<div class="row">
	<div class="col m12 s12">
		<mat-card class="mat-elevation-z4 fullWidth">
			<mat-card-title>
				<h4>Migrar facturas a contabilidad</h4>
			</mat-card-title>
			<mat-card-content>
				<form novalidate>
					<mat-form-field class="fullWidth">
						<input matInput type="date" placeholder="Del" [(ngModel)]="params.fdel" [ngModelOptions]="{standalone: true}" required>
					</mat-form-field>

					<mat-form-field class="fullWidth">
						<input matInput type="date" placeholder="Al" [(ngModel)]="params.fal" [ngModelOptions]="{standalone: true}" required>
					</mat-form-field>

					<mat-form-field class="fullWidth">
						<mat-label>Sede</mat-label>
						<mat-select name="sede" [(ngModel)]="params.sede">
							<mat-option *ngFor="let sede of sedes" [value]="sede.sede.sede">
								{{sede.sede.nombre}}
							</mat-option>
						</mat-select>
					</mat-form-field>

					<div align="end">
						<button mat-raised-button type="button" color="accent" (click)="getLista()">Buscar</button>
					</div>
				</form>
			</mat-card-content>
		</mat-card>
	</div>
</div>

<div class="row">
	<div class="col m12 s12">
		<mat-card class="mat-elevation-z4 fullWidth">
			<mat-card-content>
				<app-cargando *ngIf="cargando"></app-cargando>
				
				<div *ngIf="!cargando && lista.length > 0">
					<div align="end">
						<button mat-raised-button type="button" color="accent" (click)="enviarFacturas()">Migrar</button>
					</div>
					<mat-list>
						<div class="row">
							<div class="col m1 s1"><b>Fecha</b></div>
							<div class="col m3 s3"><b>Cliente</b></div>
							<div class="col m2 s2"><b>Serie</b></div>
							<div class="col m2 s2"><b>NÃºmero</b></div>
							<div class="col m2 s2" align="end"><b>Total</b></div>
							<div class="col m2 s2" align="end">
								<mat-checkbox name="all" class="fullWidth" (change)="toggleChk($event)"></mat-checkbox>
							</div>
						</div>
						<div class="row" *ngFor="let i of lista">
							<div class="col m1 s1">{{ i.fecha }}</div>
							<div class="col m3 s3">{{ i.ncliente }}</div>
							<div class="col m2 s2">{{ i.serie_factura }}</div>
							<div class="col m2 s2">{{ i.numero_factura }}</div>
							<div class="col m2 s2" align="end">{{ i.total }}</div>
							<div class="col m2 s2" align="end">
								<mat-checkbox name="facturas" class="fullWidth facturas" [(ngModel)]="i.checked" [value]="i.factura"></mat-checkbox>
							</div>
						</div>
					</mat-list>
					<div align="end">
						<button mat-raised-button type="button" color="accent" (click)="enviarFacturas()">Migrar</button>
					</div>
				</div>
			</mat-card-content>
		</mat-card>
	</div>
</div>