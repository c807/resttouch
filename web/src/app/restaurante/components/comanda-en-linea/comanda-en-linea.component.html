<div class="row">
    <div class="col m12 s12">
        <table mat-table [dataSource]="dataSource" multiTemplateDataRows class="mat-elevation-z8">
            <ng-container matColumnDef="comanda">
                <th mat-header-cell *matHeaderCellDef>No.</th>
                <td mat-cell *matCellDef="let element">{{element.comanda}} </td>
            </ng-container>
            <ng-container matColumnDef="nombre">
                <th mat-header-cell *matHeaderCellDef>Cliente</th>
                <td mat-cell *matCellDef="let element">{{element.cuentas[0].nombre}}</td>
            </ng-container>
            <ng-container matColumnDef="total">
                <th mat-header-cell *matHeaderCellDef>Total</th>
                <td mat-cell *matCellDef="let element">{{element.total | number: '1.2-2'}}</td>
            </ng-container>
            <ng-container matColumnDef="imprimir">
                <th mat-header-cell *matHeaderCellDef style="width: 10%;">Imprimir</th>
                <td mat-cell *matCellDef="let element" style="width: 10%;">
                    <button mat-flat-button type="button" color="accent" (click)="imprimir(element)">
                        Imprimir
                    </button>
                </td>
            </ng-container>
            <ng-container matColumnDef="facturar">
                <th mat-header-cell *matHeaderCellDef style="width: 10%;">Facturar</th>
                <td mat-cell *matCellDef="let element" style="width: 10%;">
                    <button mat-flat-button type="button" color="accent" (click)="facturar(element)">
                        Facturar
                    </button>
                </td>
            </ng-container>

            <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
            <ng-container matColumnDef="expandedDetail">
                <td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplay.length">
                    <div class="example-element-detail" [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
                        <table style="width: 50%; background-color:#f5f5f5;">
                            <caption>
                                <h5>Detalle del pedido #{{element.comanda}}</h5>
                            </caption>
                            <thead>
                                <th>Producto</th>
                                <th class="rtxt">Precio</th>
                                <th class="rtxt">Total</th>
                            </thead>
                            <tbody>
                                <tr *ngFor="let det of element.cuentas[0].productos">
                                    <td>{{det.cantidad}} {{det.articulo.descripcion}}</td>
                                    <td class="rtxt">{{det.precio | number: '1.2-2'}}</td>
                                    <td class="rtxt">{{det.total | number: '1.2-2'}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
            <tr mat-row *matRowDef="let element; columns: columnsToDisplay;" class="example-element-row"
                [class.example-expanded-row]="expandedElement === element"
                (click)="expandedElement = expandedElement === element ? null : element">
            </tr>
            <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
        </table>
    </div>
</div>