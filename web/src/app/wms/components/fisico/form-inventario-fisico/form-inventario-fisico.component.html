<div class="row">
  <div class="col m12 s12">
    <mat-card class="mat-elevation-z4 fullWidth">
      <mat-card-title>
        <div class="row">
          <div class="col">
            <h4>Ingreso Inventario Físico</h4>
          </div>
          <div class="col" style="float: right;">
            <button mat-button type="button" color="accent" (click)="showForm = !showForm;">
              <mat-icon class="iconFontSize" *ngIf="!showForm">expand_more</mat-icon>
              <mat-icon class="iconFontSize" *ngIf="showForm">expand_less</mat-icon>
            </button>
          </div>
        </div>
      </mat-card-title>
      <mat-card-content *ngIf="showForm">
        <form (ngSubmit)="buscar()" novalidate>
          <mat-form-field class="fullWidth">
            <input matInput type="number" maxlength="17" max="17" placeholder="Número" name="numero"
              [(ngModel)]="params.numero" required>
            <button mat-raised-button matSuffix color="accent" type="submit">Buscar</button>
          </mat-form-field>
        </form>
        <app-cargando *ngIf="cargando"></app-cargando>
      </mat-card-content>
    </mat-card>
  </div>
</div>
<div class="row" *ngIf="articulos.length > 0">
  <div class="col m12 s12">
    <mat-card class="mat-elevation-z4 fullWidth">
      <mat-card-content>
        <form #frmConteoFisico="ngForm" (ngSubmit)="frmConteoFisico.form.valid && actualizar()" novalidate
          autocomplete="off">

          <table class="tbl tblInventarioFisico">
            <thead>
              <tr>
                <th>Artículo</th>
                <th class="rtxt" style="width: 15%;">Existencia sistema</th>
                <th style="width: 20%;">Cantidad</th>
              </tr>
            </thead>
            <tbody>              
              <ng-container *ngFor="let cat of articulos">
                <tr>
                  <th colspan="3">
                    <mat-label>{{ cat.descripcion }}</mat-label>
                  </th>
                </tr>
  
                <ng-container *ngFor="let gcat of cat.datos">
                  <tr>
                    <th colspan="3">{{ gcat.descripcion }}</th>
                  </tr>
  
  
                  <tr *ngFor="let art of gcat.datos; index as i">
                    <td>
                      {{ art.narticulo }}
                    </td>
                    <td class="rtxt bld" style="width: 15%; font-style: italic;">                      
                      {{ art.existencia_sistema | number:'1.2-2' }}
                    </td>
                    <td style="width: 20%;">
                      <mat-form-field class="fullWidth" style="margin-left: 5px;">
                        <input matInput type="number" step="0.01" placeholder="Cantidad" name="existencia_fisica_{{i}}" [(ngModel)]="art.existencia_fisica" required>
                      </mat-form-field>
                    </td>
                  </tr>
  
  
                </ng-container>
  
              </ng-container>
            </tbody>
          </table>

          <div align="end">
            <button mat-button color="accent" type="submit" *ngIf="inventario.confirmado == 0">Guardar</button>
            <button mat-button color="accent" type="button" (click)="imprimir()">PDF</button>
            <button mat-button color="accent" type="button" (click)="imprimirXls()">Excel</button>
            <button mat-button color="accent" type="button" *ngIf="inventario.confirmado == 0"
              (click)="confirmar()">Confirmar</button>
          </div>
        </form>
        <app-cargando *ngIf="cargando"></app-cargando>
      </mat-card-content>
    </mat-card>
  </div>
</div>