!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"3e6T":function(t,n,r){"use strict";r.d(n,"a",function(){return s});var a=r("sKxO"),c=r("R5jZ"),i=r("un/a"),l=r("JIr8"),d=r("Qyje"),m=r("fXoL"),b=r("tk/3"),s=function(){var t=function(){function t(o){e(this,t),this.http=o,this.srvcErrHndl=new c.a}return o(t,[{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(a.a.urlCatalogos,"/get_tipo_movimiento?").concat(d.stringify(e))).pipe(Object(i.a)(a.a.reintentos),Object(l.a)(this.srvcErrHndl.errorHandler))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(m.Xb(b.b))},t.\u0275prov=m.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},"Wc/8":function(t,n,r){"use strict";r.r(n),r.d(n,"OrdenCompraModule",function(){return Le});var a,c=r("ofXK"),i=r("tk/3"),l=r("3Pt+"),d=r("PCNd"),m=r("MutI"),b=r("NFeN"),s=r("kmnG"),u=r("qFsG"),p=r("Wp6s"),f=r("f0Cb"),g=r("wZkO"),C=r("+0xr"),h=r("d3UM"),v=r("bSwM"),O=r("bTqV"),S=r("dNgK"),T=r("/t3+"),M=r("STbY"),D=r("zkoq"),_=r("M9IT"),F=r("0IaG"),y=r("XhcP"),I=r("8yBR"),w=r("uM5D"),x=r("tyNb"),k=r("0T/Q"),H=r("sKxO"),N=r("fXoL"),E=r("FY0D"),U=r("R5jZ"),j=r("un/a"),z=r("JIr8"),K=r("Qyje"),P=((a=function(){function t(o){e(this,t),this.http=o,this.ordenCompraUrl="compra",this.srvcErrHndl=new U.a}return o(t,[{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(H.a.urlWms,"/").concat(this.ordenCompraUrl,"/buscar?").concat(K.stringify(e))).pipe(Object(j.a)(H.a.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(e){return this.http.post("".concat(H.a.urlWms,"/").concat(this.ordenCompraUrl,"/guardar").concat(+e.orden_compra>0?"/"+e.orden_compra:""),e).pipe(Object(j.a)(H.a.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"getDetalle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.http.get("".concat(H.a.urlWms,"/").concat(this.ordenCompraUrl,"/buscar_detalle/").concat(e,"?").concat(K.stringify(t))).pipe(Object(j.a)(H.a.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"saveDetalle",value:function(e){return this.http.post("".concat(H.a.urlWms,"/").concat(this.ordenCompraUrl,"/guardar_detalle/").concat(e.orden_compra).concat(+e.orden_compra_detalle>0?"/"+e.orden_compra_detalle:""),e).pipe(Object(j.a)(H.a.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(e){return new(e||a)(N.Xb(i.b))},a.\u0275prov=N.Jb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),A=r("FKr1"),L=function(){return{standalone:!0}};function R(e,t){if(1&e){var o=N.Ub();N.Tb(0,"input",6),N.bc("input",function(){return N.xc(o),N.fc().applyFilter()})("ngModelChange",function(e){return N.xc(o),N.fc().txtFiltro=e}),N.Sb()}if(2&e){var n=N.fc();N.lc("matKeyboard",n.keyboardLayout)("ngModel",n.txtFiltro)("ngModelOptions",N.nc(3,L))}}function W(e,t){if(1&e){var o=N.Ub();N.Tb(0,"input",7),N.bc("keyup",function(){return N.xc(o),N.fc().applyFilter()})("ngModelChange",function(e){return N.xc(o),N.fc().txtFiltro=e}),N.Sb()}if(2&e){var n=N.fc();N.lc("ngModel",n.txtFiltro)("ngModelOptions",N.nc(2,L))}}function G(e,t){if(1&e){var o=N.Ub();N.Tb(0,"mat-list-item",8),N.bc("click",function(){N.xc(o);var e=t.$implicit;return N.fc().getOrdenCompra(e)}),N.Tb(1,"mat-icon",9),N.Fc(2,"description"),N.Sb(),N.Tb(3,"h5",10),N.Fc(4),N.Sb(),N.Ob(5,"br"),N.Tb(6,"p",10),N.Fc(7),N.gc(8,"date"),N.Sb(),N.Sb()}if(2&e){var n=t.$implicit;N.Cb(4),N.Hc("No. ",n.orden_compra,""),N.Cb(3),N.Hc(" Fecha: ",N.ic(8,2,n.fecha,"dd/MM/yyyy")," ")}}var $,B=(($=function(){function t(o,n){var r=this;e(this,t),this.ordenCompraSrvc=o,this.ls=n,this.getOrdenCompraEv=new N.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.keyboardLayout=H.a.IDIOMA_TECLADO,this.esMovil=!1,this.loadOrdenesCompra=function(){r.ordenCompraSrvc.get().subscribe(function(e){e&&e.length>0&&(r.lstOrdenesCompra=e,r.applyFilter())})},this.getOrdenCompra=function(e){r.getOrdenCompraEv.emit({orden_compra:e.orden_compra,proveedor:e.proveedor||0,fecha:e.fecha,usuario:e.usuario||0,notas:e.notas,estatus_movimiento:e.estatus_movimiento||1})},this.pageChange=function(e){r.pageSize=e.pageSize,r.pageIndex=e.pageIndex,r.applyFilter()}}return o(t,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(H.a.usrTokenVar).enmovil||!1,this.loadOrdenesCompra()}},{key:"applyFilter",value:function(){if(this.txtFiltro.length>0){var e=Object(H.b)(this.lstOrdenesCompra,this.txtFiltro);this.length=e.length,this.lstOrdenesCompraPaged=Object(H.d)(e,this.pageSize,this.pageIndex+1)}else this.length=this.lstOrdenesCompra.length,this.lstOrdenesCompraPaged=Object(H.d)(this.lstOrdenesCompra,this.pageSize,this.pageIndex+1)}}]),t}()).\u0275fac=function(e){return new(e||$)(N.Nb(P),N.Nb(E.a))},$.\u0275cmp=N.Hb({type:$,selectors:[["app-lista-orden-compra"]],outputs:{getOrdenCompraEv:"getOrdenCompraEv"},decls:8,vars:6,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"matKeyboard","ngModel","ngModelOptions","input","ngModelChange",4,"ngIf"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["matInput","","placeholder","Buscar...",3,"matKeyboard","ngModel","ngModelOptions","input","ngModelChange"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(e,t){1&e&&(N.Tb(0,"mat-card",0),N.Tb(1,"mat-card-content"),N.Tb(2,"mat-form-field",1),N.Dc(3,R,1,4,"input",2),N.Dc(4,W,1,3,"input",3),N.Sb(),N.Tb(5,"mat-nav-list"),N.Dc(6,G,9,5,"mat-list-item",4),N.Sb(),N.Tb(7,"mat-paginator",5),N.bc("page",function(e){return t.pageChange(e)}),N.Sb(),N.Sb(),N.Sb()),2&e&&(N.Cb(3),N.lc("ngIf",!t.esMovil),N.Cb(1),N.lc("ngIf",t.esMovil),N.Cb(2),N.lc("ngForOf",t.lstOrdenesCompraPaged),N.Cb(1),N.lc("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[p.a,p.c,s.b,c.m,m.e,c.l,_.a,u.b,w.a,l.c,l.k,l.n,m.c,b.a,m.b,A.j],pipes:[c.e],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),$),Q=r("50cD"),q=r("NGYs"),X=r("3e6T"),J=r("u5dX");function V(e,t){if(1&e){var o=N.Ub();N.Tb(0,"button",5),N.bc("click",function(){return N.xc(o),N.fc().showOrdenCompraForm=!0}),N.Tb(1,"mat-icon",6),N.Fc(2,"expand_more"),N.Sb(),N.Sb()}}function Y(e,t){if(1&e){var o=N.Ub();N.Tb(0,"button",5),N.bc("click",function(){return N.xc(o),N.fc().showOrdenCompraForm=!1}),N.Tb(1,"mat-icon",6),N.Fc(2,"expand_less"),N.Sb(),N.Sb()}}function Z(e,t){if(1&e&&(N.Tb(0,"mat-option",19),N.Fc(1),N.Sb()),2&e){var o=t.$implicit;N.lc("value",o.proveedor),N.Cb(1),N.Ic(" (",o.nit,") ",o.razon_social," ")}}function ee(e,t){if(1&e){var o=N.Ub();N.Tb(0,"input",22),N.bc("ngModelChange",function(e){return N.xc(o),N.fc(3).ordenCompra.notas=e}),N.Sb()}if(2&e){var n=N.fc(3);N.lc("matKeyboard",n.keyboardLayout)("ngModel",n.ordenCompra.notas)}}function te(e,t){if(1&e){var o=N.Ub();N.Tb(0,"input",23),N.bc("ngModelChange",function(e){return N.xc(o),N.fc(3).ordenCompra.notas=e}),N.Sb()}if(2&e){var n=N.fc(3);N.lc("ngModel",n.ordenCompra.notas)}}function oe(e,t){if(1&e&&(N.Tb(0,"mat-form-field",9),N.Dc(1,ee,1,2,"input",20),N.Dc(2,te,1,1,"input",21),N.Sb()),2&e){var o=N.fc(2);N.Cb(1),N.lc("ngIf",!o.esMovil),N.Cb(1),N.lc("ngIf",o.esMovil)}}function ne(e,t){if(1&e&&(N.Tb(0,"mat-option",19),N.Fc(1),N.Sb()),2&e){var o=t.$implicit;N.lc("value",o.tipo_movimiento),N.Cb(1),N.Hc(" ",o.descripcion," ")}}function re(e,t){if(1&e&&(N.Tb(0,"mat-option",19),N.Fc(1),N.Sb()),2&e){var o=t.$implicit;N.lc("value",o.bodega),N.Cb(1),N.Hc(" ",o.descripcion," ")}}var ae=function(){return[2,3]};function ce(e,t){if(1&e){var o=N.Ub();N.Tb(0,"button",24),N.bc("click",function(){return N.xc(o),N.fc(2).generarIngreso()}),N.Fc(1," Generar ingreso "),N.Sb()}if(2&e){N.fc();var n=N.tc(1),r=N.fc();N.lc("disabled",!n.form.valid||N.nc(1,ae).indexOf(+r.ordenCompra.estatus_movimiento)>=0||!r.ordenCompra.bodega||!r.ordenCompra.tipo_movimiento)}}function ie(e,t){if(1&e){var o=N.Ub();N.Tb(0,"button",25),N.bc("click",function(){return N.xc(o),N.fc(2).resetOrdenCompra()}),N.Fc(1," Nueva "),N.Sb()}}function le(e,t){if(1&e){var o=N.Ub();N.Tb(0,"form",7,8),N.bc("ngSubmit",function(){N.xc(o);var e=N.tc(1),t=N.fc();return e.form.valid&&t.onSubmit()}),N.Tb(2,"mat-form-field",9),N.Tb(3,"mat-label"),N.Fc(4,"Proveedor"),N.Sb(),N.Tb(5,"mat-select",10),N.bc("ngModelChange",function(e){return N.xc(o),N.fc().ordenCompra.proveedor=e}),N.Dc(6,Z,2,3,"mat-option",11),N.Sb(),N.Sb(),N.Dc(7,oe,3,2,"mat-form-field",12),N.Tb(8,"mat-form-field",9),N.Tb(9,"mat-label"),N.Fc(10,"Tipo de movimiento"),N.Sb(),N.Tb(11,"mat-select",13),N.bc("ngModelChange",function(e){return N.xc(o),N.fc().ordenCompra.tipo_movimiento=e}),N.Dc(12,ne,2,2,"mat-option",11),N.Sb(),N.Sb(),N.Tb(13,"mat-form-field",9),N.Tb(14,"mat-label"),N.Fc(15,"Bodega"),N.Sb(),N.Tb(16,"mat-select",14),N.bc("ngModelChange",function(e){return N.xc(o),N.fc().ordenCompra.bodega=e}),N.Dc(17,re,2,2,"mat-option",11),N.Sb(),N.Sb(),N.Tb(18,"div",15),N.Tb(19,"button",16),N.Fc(20," Guardar "),N.Sb(),N.Dc(21,ce,2,2,"button",17),N.Dc(22,ie,2,0,"button",18),N.Sb(),N.Sb()}if(2&e){var n=N.tc(1),r=N.fc();N.Cb(5),N.lc("ngModel",r.ordenCompra.proveedor),N.Cb(1),N.lc("ngForOf",r.proveedores),N.Cb(1),N.lc("ngIf",r.esMovil),N.Cb(4),N.lc("ngModel",r.ordenCompra.tipo_movimiento),N.Cb(1),N.lc("ngForOf",r.tiposMovimiento),N.Cb(4),N.lc("ngModel",r.ordenCompra.bodega),N.Cb(1),N.lc("ngForOf",r.bodegas),N.Cb(2),N.lc("disabled",!n.form.valid||N.nc(10,ae).indexOf(+r.ordenCompra.estatus_movimiento)>=0),N.Cb(2),N.lc("ngIf",r.ordenCompra.orden_compra&&r.detallesOrdenCompra.length>0),N.Cb(1),N.lc("ngIf",r.ordenCompra.orden_compra)}}function de(e,t){1&e&&N.Ob(0,"hr")}function me(e,t){if(1&e){var o=N.Ub();N.Tb(0,"button",5),N.bc("click",function(){return N.xc(o),N.fc(2).showDetalleOrdenCompraForm=!0}),N.Tb(1,"mat-icon",6),N.Fc(2,"expand_more"),N.Sb(),N.Sb()}}function be(e,t){if(1&e){var o=N.Ub();N.Tb(0,"button",5),N.bc("click",function(){return N.xc(o),N.fc(2).showDetalleOrdenCompraForm=!1}),N.Tb(1,"mat-icon",6),N.Fc(2,"expand_less"),N.Sb(),N.Sb()}}function se(e,t){if(1&e&&(N.Tb(0,"mat-option",19),N.Fc(1),N.Sb()),2&e){var o=t.$implicit;N.lc("value",o.articulo),N.Cb(1),N.Hc(" ",o.descripcion," ")}}function ue(e,t){if(1&e){var o=N.Ub();N.Tb(0,"mat-form-field",9),N.Tb(1,"input",29),N.bc("ngModelChange",function(e){return N.xc(o),N.fc(3).detalleOrdenCompra.cantidad=e})("change",function(){N.xc(o);var e=N.fc(3);return e.detalleOrdenCompra.total=+e.detalleOrdenCompra.monto*+e.detalleOrdenCompra.cantidad}),N.Sb(),N.Sb()}if(2&e){var n=N.fc(3);N.Cb(1),N.lc("ngModel",n.detalleOrdenCompra.cantidad)}}function pe(e,t){if(1&e){var o=N.Ub();N.Tb(0,"mat-form-field",9),N.Tb(1,"input",30),N.bc("ngModelChange",function(e){return N.xc(o),N.fc(3).detalleOrdenCompra.monto=e})("change",function(){N.xc(o);var e=N.fc(3);return e.detalleOrdenCompra.total=+e.detalleOrdenCompra.monto*+e.detalleOrdenCompra.cantidad}),N.Sb(),N.Sb()}if(2&e){var n=N.fc(3);N.Cb(1),N.lc("ngModel",n.detalleOrdenCompra.monto)}}function fe(e,t){if(1&e){var o=N.Ub();N.Tb(0,"button",25),N.bc("click",function(){return N.xc(o),N.fc(3).resetDetalleOrdenCompra()}),N.Fc(1," Nuevo "),N.Sb()}}function ge(e,t){if(1&e){var o=N.Ub();N.Tb(0,"form",7,27),N.bc("ngSubmit",function(){N.xc(o);var e=N.tc(1),t=N.fc(2);return e.form.valid&&t.onSubmitDetail()}),N.Tb(2,"mat-form-field",9),N.Tb(3,"mat-label"),N.Fc(4,"Art\xedculo"),N.Sb(),N.Tb(5,"mat-select",28),N.bc("ngModelChange",function(e){return N.xc(o),N.fc(2).detalleOrdenCompra.articulo=e}),N.Dc(6,se,2,2,"mat-option",11),N.Sb(),N.Sb(),N.Dc(7,ue,2,1,"mat-form-field",12),N.Dc(8,pe,2,1,"mat-form-field",12),N.Tb(9,"div",15),N.Tb(10,"button",16),N.Fc(11," Guardar "),N.Sb(),N.Dc(12,fe,2,0,"button",18),N.Sb(),N.Sb()}if(2&e){var n=N.tc(1),r=N.fc(2);N.Cb(5),N.lc("ngModel",r.detalleOrdenCompra.articulo),N.Cb(1),N.lc("ngForOf",r.articulos),N.Cb(1),N.lc("ngIf",r.esMovil),N.Cb(1),N.lc("ngIf",r.esMovil),N.Cb(2),N.lc("disabled",!n.form.valid||N.nc(6,ae).indexOf(+r.ordenCompra.estatus_movimiento)>=0),N.Cb(2),N.lc("ngIf",r.detalleOrdenCompra.orden_compra_detalle)}}function Ce(e,t){1&e&&N.Ob(0,"hr")}function he(e,t){1&e&&(N.Tb(0,"th",43),N.Fc(1,"Art\xedculo"),N.Sb())}function ve(e,t){if(1&e&&(N.Tb(0,"td",44),N.Fc(1),N.Sb()),2&e){var o=t.$implicit;N.Cb(1),N.Gc(o.articulo.descripcion)}}function Oe(e,t){1&e&&(N.Tb(0,"th",45),N.Fc(1,"Cantidad"),N.Sb())}function Se(e,t){if(1&e&&(N.Tb(0,"td",46),N.Fc(1),N.gc(2,"number"),N.Sb()),2&e){var o=t.$implicit;N.Cb(1),N.Gc(N.ic(2,1,o.cantidad,"1.2-2"))}}function Te(e,t){1&e&&(N.Tb(0,"th",45),N.Fc(1,"Monto"),N.Sb())}function Me(e,t){if(1&e&&(N.Tb(0,"td",46),N.Fc(1),N.gc(2,"number"),N.Sb()),2&e){var o=t.$implicit;N.Cb(1),N.Gc(N.ic(2,1,o.monto,"1.2-2"))}}function De(e,t){1&e&&(N.Tb(0,"th",45),N.Fc(1,"Total"),N.Sb())}function _e(e,t){if(1&e&&(N.Tb(0,"td",46),N.Fc(1),N.gc(2,"number"),N.Sb()),2&e){var o=t.$implicit;N.Cb(1),N.Gc(N.ic(2,1,o.total,"1.2-2"))}}function Fe(e,t){1&e&&(N.Tb(0,"th",43),N.Fc(1,"\xa0"),N.Sb())}function ye(e,t){if(1&e){var o=N.Ub();N.Tb(0,"td",44),N.Tb(1,"button",47),N.bc("click",function(){N.xc(o);var e=t.$implicit;return N.fc(3).getDetalleOrdenCompra(e.orden_compra,e.orden_compra_detalle)}),N.Fc(2," Editar "),N.Sb(),N.Sb()}if(2&e){var n=N.fc(3);N.Cb(1),N.lc("disabled",N.nc(1,ae).indexOf(+n.ordenCompra.estatus_movimiento)>=0)}}function Ie(e,t){1&e&&N.Ob(0,"tr",48)}function we(e,t){1&e&&N.Ob(0,"tr",49)}function xe(e,t){if(1&e&&(N.Tb(0,"table",31),N.Rb(1,32),N.Dc(2,he,2,0,"th",33),N.Dc(3,ve,2,1,"td",34),N.Qb(),N.Rb(4,35),N.Dc(5,Oe,2,0,"th",36),N.Dc(6,Se,3,4,"td",37),N.Qb(),N.Rb(7,38),N.Dc(8,Te,2,0,"th",36),N.Dc(9,Me,3,4,"td",37),N.Qb(),N.Rb(10,39),N.Dc(11,De,2,0,"th",36),N.Dc(12,_e,3,4,"td",37),N.Qb(),N.Rb(13,40),N.Dc(14,Fe,2,0,"th",33),N.Dc(15,ye,3,2,"td",34),N.Qb(),N.Dc(16,Ie,1,0,"tr",41),N.Dc(17,we,1,0,"tr",42),N.Sb()),2&e){var o=N.fc(2);N.lc("dataSource",o.dataSource),N.Cb(16),N.lc("matHeaderRowDef",o.displayedColumns),N.Cb(1),N.lc("matRowDefColumns",o.displayedColumns)}}function ke(e,t){if(1&e&&(N.Tb(0,"mat-card",0),N.Tb(1,"mat-card-title"),N.Tb(2,"h4"),N.Fc(3),N.Dc(4,me,3,0,"button",1),N.Dc(5,be,3,0,"button",1),N.Sb(),N.Sb(),N.Tb(6,"mat-card-content"),N.Dc(7,ge,13,7,"form",2),N.Dc(8,Ce,1,0,"hr",3),N.Dc(9,xe,18,3,"table",26),N.Sb(),N.Sb()),2&e){var o=N.fc();N.Cb(3),N.Hc(" Detalle de orden de compra No. ",o.ordenCompra.orden_compra," "),N.Cb(1),N.lc("ngIf",!o.showDetalleOrdenCompraForm),N.Cb(1),N.lc("ngIf",o.showDetalleOrdenCompraForm),N.Cb(2),N.lc("ngIf",o.showDetalleOrdenCompraForm),N.Cb(1),N.lc("ngIf",o.detallesOrdenCompra.length>0),N.Cb(1),N.lc("ngIf",o.detallesOrdenCompra.length>0)}}var He,Ne,Ee,Ue,je=((He=function(){function t(o,n,r,a,c,i,l){var d=this;e(this,t),this.snackBar=o,this.ls=n,this.ordenCompraSrvc=r,this.proveedorSrvc=a,this.articuloSrvc=c,this.tipoMovimientoSrvc=i,this.bodegaSrvc=l,this.ordenCompraSavedEv=new N.o,this.showOrdenCompraForm=!0,this.showDetalleOrdenCompraForm=!0,this.detallesOrdenCompra=[],this.displayedColumns=["articulo","cantidad","monto","total","editItem"],this.proveedores=[],this.articulos=[],this.tiposMovimiento=[],this.bodegas=[],this.keyboardLayout=H.a.IDIOMA_TECLADO,this.esMovil=!1,this.loadProveedores=function(){d.proveedorSrvc.get().subscribe(function(e){e&&(d.proveedores=e)})},this.loadTiposMovimiento=function(){d.tipoMovimientoSrvc.get().subscribe(function(e){e&&(d.tiposMovimiento=e)})},this.loadBodegas=function(){d.bodegaSrvc.get().subscribe(function(e){e&&(d.bodegas=e)})},this.resetOrdenCompra=function(){d.ordenCompra={orden_compra:null,proveedor:null,usuario:d.ls.get(H.a.usrTokenVar).idusr||0,notas:null,estatus_movimiento:1,bodega:null,tipo_movimiento:null},d.resetDetalleOrdenCompra()},this.onSubmit=function(){d.ordenCompraSrvc.save(d.ordenCompra).subscribe(function(e){e.exito&&(d.ordenCompraSavedEv.emit(),d.resetOrdenCompra(),d.ordenCompra={orden_compra:+e.compra.orden_compra,proveedor:e.compra.proveedor,fecha:e.compra.fecha,usuario:e.compra.usuario,notas:e.compra.notas,estatus_movimiento:1},d.loadDetalleOrdenCompra(d.ordenCompra.orden_compra))})},this.loadArticulos=function(){d.articuloSrvc.getArticulos().subscribe(function(e){e&&(d.articulos=e)})},this.resetDetalleOrdenCompra=function(){return d.detalleOrdenCompra={orden_compra_detalle:null,orden_compra:d.ordenCompra.orden_compra?d.ordenCompra.orden_compra:null,articulo:null,cantidad:null,monto:null,total:null}},this.loadDetalleOrdenCompra=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+d.ordenCompra.orden_compra;d.ordenCompraSrvc.getDetalle(e,{orden_compra:e}).subscribe(function(e){e&&(d.detallesOrdenCompra=e,d.updateTableDataSource())})},this.getDetalleOrdenCompra=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+d.ordenCompra.orden_compra,t=arguments.length>1?arguments[1]:void 0;d.ordenCompraSrvc.getDetalle(e,{orden_compra_detalle:t}).subscribe(function(e){e&&(d.detalleOrdenCompra={orden_compra_detalle:e[0].orden_compra_detalle,orden_compra:e[0].orden_compra,articulo:e[0].articulo.articulo,cantidad:+e[0].cantidad,monto:+e[0].monto,total:+e[0].total},d.showDetalleOrdenCompraForm=!0)})},this.onSubmitDetail=function(){d.detalleOrdenCompra.orden_compra=d.ordenCompra.orden_compra,d.ordenCompraSrvc.saveDetalle(d.detalleOrdenCompra).subscribe(function(e){e&&(d.loadDetalleOrdenCompra(),d.resetDetalleOrdenCompra())})},this.updateTableDataSource=function(){return d.dataSource=new C.k(d.detallesOrdenCompra)},this.generarIngreso=function(){d.ordenCompra.estatus_movimiento=2,d.onSubmit()}}return o(t,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(H.a.usrTokenVar).enmovil||!1,this.resetOrdenCompra(),this.loadProveedores(),this.loadArticulos(),this.loadBodegas(),this.loadTiposMovimiento()}}]),t}()).\u0275fac=function(e){return new(e||He)(N.Nb(S.b),N.Nb(E.a),N.Nb(P),N.Nb(Q.a),N.Nb(q.a),N.Nb(X.a),N.Nb(J.a))},He.\u0275cmp=N.Hb({type:He,selectors:[["app-form-orden-compra"]],inputs:{ordenCompra:"ordenCompra"},outputs:{ordenCompraSavedEv:"ordenCompraSavedEv"},decls:10,vars:6,consts:[[1,"mat-elevation-z4","fullWidth"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmOrdenCompra","ngForm"],[1,"fullWidth"],["name","proveedor","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","fullWidth",4,"ngIf"],["name","tipo_movimiento",3,"ngModel","ngModelChange"],["name","bodega",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"disabled","click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],[3,"value"],["matInput","","placeholder","Notas","name","notas",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["matInput","","placeholder","Notas","name","notas",3,"ngModel","ngModelChange",4,"ngIf"],["matInput","","placeholder","Notas","name","notas",3,"matKeyboard","ngModel","ngModelChange"],["matInput","","placeholder","Notas","name","notas",3,"ngModel","ngModelChange"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button","color","accent",3,"click"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleOrdenCompra","ngForm"],["name","articulo","required","",3,"ngModel","ngModelChange"],["matInput","","type","number","placeholder","Cantidad","name","cantidad","required","",3,"ngModel","ngModelChange","change"],["matInput","","type","number","placeholder","Monto","name","monto","required","",3,"ngModel","ngModelChange","change"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","articulo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","cantidad"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","monto"],["matColumnDef","total"],["matColumnDef","editItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(N.Tb(0,"mat-card",0),N.Tb(1,"mat-card-title"),N.Tb(2,"h4"),N.Fc(3),N.Dc(4,V,3,0,"button",1),N.Dc(5,Y,3,0,"button",1),N.Sb(),N.Sb(),N.Tb(6,"mat-card-content"),N.Dc(7,le,23,11,"form",2),N.Sb(),N.Sb(),N.Dc(8,de,1,0,"hr",3),N.Dc(9,ke,10,6,"mat-card",4)),2&e&&(N.Cb(3),N.Hc(" Orden de compra",t.ordenCompra.orden_compra?" No. "+t.ordenCompra.orden_compra:""," "),N.Cb(1),N.lc("ngIf",!t.showOrdenCompraForm),N.Cb(1),N.lc("ngIf",t.showOrdenCompraForm),N.Cb(2),N.lc("ngIf",t.showOrdenCompraForm),N.Cb(1),N.lc("ngIf",t.ordenCompra.orden_compra),N.Cb(1),N.lc("ngIf",t.ordenCompra.orden_compra))},directives:[p.a,p.h,c.m,p.c,O.a,b.a,l.r,l.l,l.m,s.b,s.f,h.a,l.p,l.k,l.n,c.l,A.m,u.b,w.a,l.c,l.o,C.j,C.c,C.e,C.b,C.g,C.i,C.d,C.a,C.f,C.h],pipes:[c.f],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}"]}),He),ze=["lstOrdenCompra"],Ke=["frmOrdenCompra"],Pe=[{path:"ordcomp",component:(Ne=function(){function t(o){var n=this;e(this,t),this.ls=o,this.setOrdenCompra=function(e){n.ordenCompra=e,n.frmOrdenCompra.loadDetalleOrdenCompra(+n.ordenCompra.orden_compra)},this.refreshOrdenCompraList=function(){n.lstOrdenCompraComponent.loadOrdenesCompra()},this.ordenCompra={orden_compra:null,proveedor:null,usuario:this.ls.get(H.a.usrTokenVar).idusr||0,notas:null,estatus_movimiento:1,bodega:null,tipo_movimiento:null}}return o(t,[{key:"ngOnInit",value:function(){}}]),t}(),Ne.\u0275fac=function(e){return new(e||Ne)(N.Nb(E.a))},Ne.\u0275cmp=N.Hb({type:Ne,selectors:[["app-orden-compra"]],viewQuery:function(e,t){var o;1&e&&(N.Kc(ze,1),N.Kc(Ke,1)),2&e&&(N.sc(o=N.cc())&&(t.lstOrdenCompraComponent=o.first),N.sc(o=N.cc())&&(t.frmOrdenCompra=o.first))},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getOrdenCompraEv"],["lstOrdenCompra",""],[1,"col","m7","s12"],[3,"ordenCompra","ordenCompraSavedEv"],["frmOrdenCompra",""]],template:function(e,t){1&e&&(N.Tb(0,"div",0),N.Tb(1,"div",1),N.Tb(2,"app-lista-orden-compra",2,3),N.bc("getOrdenCompraEv",function(e){return t.setOrdenCompra(e)}),N.Sb(),N.Sb(),N.Tb(4,"div",4),N.Tb(5,"app-form-orden-compra",5,6),N.bc("ordenCompraSavedEv",function(){return t.refreshOrdenCompraList()}),N.Sb(),N.Sb(),N.Sb()),2&e&&(N.Cb(5),N.lc("ordenCompra",t.ordenCompra))},directives:[B,je],styles:[""]}),Ne),canActivate:[k.a]},{path:"**",redirectTo:"/admin/dashboard",pathMatch:"full"}],Ae=((Ue=function t(){e(this,t)}).\u0275mod=N.Lb({type:Ue}),Ue.\u0275inj=N.Kb({factory:function(e){return new(e||Ue)},imports:[[x.d.forChild(Pe)],x.d]}),Ue),Le=((Ee=function t(){e(this,t)}).\u0275mod=N.Lb({type:Ee}),Ee.\u0275inj=N.Kb({factory:function(e){return new(e||Ee)},imports:[[c.c,Ae,d.a,i.c,l.e,w.b,m.d,b.b,s.d,u.c,p.f,f.b,g.c,C.l,h.b,v.b,O.b,S.c,T.b,M.d,D.b,_.b,F.e,y.d,I.c]]}),Ee)}}])}();