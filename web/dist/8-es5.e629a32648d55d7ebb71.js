!function(){function t(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=c(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,i=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw i}}}}function e(t,n){return(e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,n)}function n(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=o(t);if(e){var r=o(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,o=!1,i=void 0;try{for(var r,c=t[Symbol.iterator]();!(a=(r=c.next()).done)&&(n.push(r.value),!e||n.length!==e);a=!0);}catch(s){o=!0,i=s}finally{try{a||null==c.return||c.return()}finally{if(o)throw i}}return n}(t,e)||c(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function d(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{k2MF:function(a,o,c){"use strict";c.r(o),c.d(o,"RestauranteModule",function(){return Rs});var s,u,b=c("ofXK"),m=c("tk/3"),f=c("3Pt+"),p=c("PCNd"),h=c("vtFA"),g=c("qodq"),v=c("jkDv"),C=c("YUcS"),S=c("MutI"),T=c("NFeN"),_=c("kmnG"),y=c("qFsG"),D=c("Wp6s"),k=c("f0Cb"),w=c("wZkO"),E=c("+0xr"),P=c("d3UM"),x=c("bSwM"),O=c("bTqV"),M=c("dNgK"),R=c("/t3+"),F=c("STbY"),I=c("zkoq"),A=c("M9IT"),N=c("0IaG"),j=c("XhcP"),U=c("u47x"),B=c("rDax"),H=c("+rOU"),L=c("fXoL"),z=c("vxfF"),q=c("FKr1"),$=c("XNiG"),W=c("quSY"),G=c("VRyK"),V=(c("LRne"),c("FtGj"),c("IzEk")),Q=c("JX91"),J=(c("pLZG"),c("8LU1")),X=c("R0Ic"),Z=c("cH1L"),K=((s=function(){function t(){l(this,t),this.changes=new $.a,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 20 years",this.nextMultiYearLabel="Next 20 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}return d(t,[{key:"formatYearRange",value:function(t,e){return"".concat(t," \u2013 ").concat(e)}}]),t}()).\u0275fac=function(t){return new(t||s)},s.\u0275prov=Object(L.Jb)({factory:function(){return new s},token:s,providedIn:"root"}),s),Y={provide:new L.s("mat-datepicker-scroll-strategy"),deps:[B.c],useFactory:function(t){return function(){return t.scrollStrategies.reposition()}}},tt=((u=function t(){l(this,t)}).\u0275mod=L.Lb({type:u}),u.\u0275inj=L.Kb({factory:function(t){return new(t||u)},providers:[K,Y],imports:[[b.c,O.b,N.e,B.f,U.a,H.f,q.g],z.b]}),u),et=c("nLfN"),nt=c("HDdC"),at=c("D0XW"),ot=c("Y7HM");function it(t){var e=t.subscriber,n=t.counter,a=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:a},a)}var rt=c("eNwd"),ct=c("1G5W"),st=c("lJxs"),lt=c("vkgz"),ut=c("eIep");function dt(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function bt(t,e){var n=e?"":"none";dt(t.style,{touchAction:e?"":"none",webkitUserDrag:e?"":"none",webkitTapHighlightColor:e?"":"transparent",userSelect:n,msUserSelect:n,webkitUserSelect:n,MozUserSelect:n})}function mt(t,e){var n=t.style;n.position=e?"":"fixed",n.top=n.opacity=e?"":"0",n.left=e?"":"-999em"}function ft(t){var e=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*e}function pt(t,e){return t.getPropertyValue(e).split(",").map(function(t){return t.trim()})}function ht(t){var e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}function gt(t,e,n){var a=t.top,o=t.bottom,i=t.left,r=t.right;return n>=a&&n<=o&&e>=i&&e<=r}function vt(t,e,n){t.top+=e,t.bottom=t.top+t.height,t.left+=n,t.right=t.left+t.width}function Ct(t,e,n,a){var o=t.top,i=t.right,r=t.bottom,c=t.left,s=t.width*e,l=t.height*e;return a>o-l&&a<r+l&&n>c-s&&n<i+s}var St=function(){function t(e,n){l(this,t),this._document=e,this._viewportRuler=n,this.positions=new Map}return d(t,[{key:"clear",value:function(){this.positions.clear()}},{key:"cache",value:function(t){var e=this;this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),t.forEach(function(t){e.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:ht(t)})})}},{key:"handleScroll",value:function(t){var e=t.target,n=this.positions.get(e);if(!n)return null;var a,o,i=e===this._document?e.documentElement:e,r=n.scrollPosition;if(e===this._document){var c=this._viewportRuler.getViewportScrollPosition();a=c.top,o=c.left}else a=e.scrollTop,o=e.scrollLeft;var s=r.top-a,l=r.left-o;return this.positions.forEach(function(t,n){t.clientRect&&e!==n&&i.contains(n)&&vt(t.clientRect,s,l)}),r.top=a,r.left=o,{top:s,left:l}}}]),t}();function Tt(t){var e=t.cloneNode(!0),n=e.querySelectorAll("[id]"),a=t.nodeName.toLowerCase();e.removeAttribute("id");for(var o=0;o<n.length;o++)n[o].removeAttribute("id");return"canvas"===a?kt(t,e):"input"!==a&&"select"!==a&&"textarea"!==a||Dt(t,e),_t("canvas",t,e,kt),_t("input, textarea, select",t,e,Dt),e}function _t(t,e,n,a){var o=e.querySelectorAll(t);if(o.length)for(var i=n.querySelectorAll(t),r=0;r<o.length;r++)a(o[r],i[r])}var yt=0;function Dt(t,e){"file"!==e.type&&(e.value=t.value),"radio"===e.type&&e.name&&(e.name="mat-clone-".concat(e.name,"-").concat(yt++))}function kt(t,e){var n=e.getContext("2d");if(n)try{n.drawImage(t,0,0)}catch(a){}}var wt=Object(et.f)({passive:!0}),Et=Object(et.f)({passive:!1}),Pt=function(){function t(e,n,a,o,i,r){var c=this;l(this,t),this._config=n,this._document=a,this._ngZone=o,this._viewportRuler=i,this._dragDropRegistry=r,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new $.a,this._pointerMoveSubscription=W.a.EMPTY,this._pointerUpSubscription=W.a.EMPTY,this._scrollSubscription=W.a.EMPTY,this._resizeSubscription=W.a.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new $.a,this.started=new $.a,this.released=new $.a,this.ended=new $.a,this.entered=new $.a,this.exited=new $.a,this.dropped=new $.a,this.moved=this._moveEvents,this._pointerDown=function(t){if(c.beforeStarted.next(),c._handles.length){var e=c._handles.find(function(e){var n=t.target;return!!n&&(n===e||e.contains(n))});!e||c._disabledHandles.has(e)||c.disabled||c._initializeDragSequence(e,t)}else c.disabled||c._initializeDragSequence(c._rootElement,t)},this._pointerMove=function(t){var e=c._getPointerPositionOnPage(t);if(c._hasStartedDragging){c._boundaryElement&&(c._previewRect&&(c._previewRect.width||c._previewRect.height)||(c._previewRect=(c._preview||c._rootElement).getBoundingClientRect())),t.preventDefault();var n=c._getConstrainedPointerPosition(e);if(c._hasMoved=!0,c._lastKnownPointerPosition=e,c._updatePointerDirectionDelta(n),c._dropContainer)c._updateActiveDropContainer(n,e);else{var a=c._activeTransform;a.x=n.x-c._pickupPositionOnPage.x+c._passiveTransform.x,a.y=n.y-c._pickupPositionOnPage.y+c._passiveTransform.y,c._applyRootElementTransform(a.x,a.y),"undefined"!=typeof SVGElement&&c._rootElement instanceof SVGElement&&c._rootElement.setAttribute("transform","translate(".concat(a.x," ").concat(a.y,")"))}c._moveEvents.observers.length&&c._ngZone.run(function(){c._moveEvents.next({source:c,pointerPosition:n,event:t,distance:c._getDragDistance(n),delta:c._pointerDirectionDelta})})}else if(Math.abs(e.x-c._pickupPositionOnPage.x)+Math.abs(e.y-c._pickupPositionOnPage.y)>=c._config.dragStartThreshold){var o=Date.now()>=c._dragStartTime+c._getDragStartDelay(t),i=c._dropContainer;if(!o)return void c._endDragSequence(t);i&&(i.isDragging()||i.isReceiving())||(c._hasStartedDragging=!0,c._ngZone.run(function(){return c._startDragSequence(t)}))}},this._pointerUp=function(t){c._endDragSequence(t)},this.withRootElement(e).withParent(n.parentDragRef||null),this._parentPositions=new St(a,i),r.registerDragItem(this)}return d(t,[{key:"getPlaceholderElement",value:function(){return this._placeholder}},{key:"getRootElement",value:function(){return this._rootElement}},{key:"getVisibleElement",value:function(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}},{key:"withHandles",value:function(t){var e=this;this._handles=t.map(function(t){return Object(J.e)(t)}),this._handles.forEach(function(t){return bt(t,e.disabled)}),this._toggleNativeDragInteractions();var n=new Set;return this._disabledHandles.forEach(function(t){e._handles.indexOf(t)>-1&&n.add(t)}),this._disabledHandles=n,this}},{key:"withPreviewTemplate",value:function(t){return this._previewTemplate=t,this}},{key:"withPlaceholderTemplate",value:function(t){return this._placeholderTemplate=t,this}},{key:"withRootElement",value:function(t){var e=this,n=Object(J.e)(t);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(function(){n.addEventListener("mousedown",e._pointerDown,Et),n.addEventListener("touchstart",e._pointerDown,wt)}),this._initialTransform=void 0,this._rootElement=n),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}},{key:"withBoundaryElement",value:function(t){var e=this;return this._boundaryElement=t?Object(J.e)(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(function(){return e._containInsideBoundaryOnResize()})),this}},{key:"withParent",value:function(t){return this._parentDragRef=t,this}},{key:"dispose",value:function(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&Mt(this._rootElement),Mt(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}},{key:"isDragging",value:function(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}},{key:"reset",value:function(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}},{key:"disableHandle",value:function(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),bt(t,!0))}},{key:"enableHandle",value:function(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),bt(t,this.disabled))}},{key:"withDirection",value:function(t){return this._direction=t,this}},{key:"_withDropContainer",value:function(t){this._dropContainer=t}},{key:"getFreeDragPosition",value:function(){var t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}},{key:"setFreeDragPosition",value:function(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}},{key:"_sortFromLastPointerPosition",value:function(){var t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}},{key:"_removeSubscriptions",value:function(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}},{key:"_destroyPreview",value:function(){this._preview&&Mt(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}},{key:"_destroyPlaceholder",value:function(){this._placeholder&&Mt(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}},{key:"_endDragSequence",value:function(t){var e=this;this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging&&(this.released.next({source:this}),this._dropContainer?(this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(function(){e._cleanupDragArtifacts(t),e._cleanupCachedDimensions(),e._dragDropRegistry.stopDragging(e)})):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(function(){e.ended.next({source:e,distance:e._getDragDistance(e._getPointerPositionOnPage(t))})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this))))}},{key:"_startDragSequence",value:function(t){Rt(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();var e=this._dropContainer;if(e){var n=this._rootElement,a=n.parentNode,o=this._preview=this._createPreviewElement(),i=this._placeholder=this._createPlaceholderElement(),r=this._anchor=this._anchor||this._document.createComment(""),c=this._getShadowRoot();a.insertBefore(r,n),mt(n,!1),this._document.body.appendChild(a.replaceChild(i,n)),function(t,e){return e||t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement||t.body}(this._document,c).appendChild(o),this.started.next({source:this}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}},{key:"_initializeDragSequence",value:function(t,e){var n=this;this._parentDragRef&&e.stopPropagation();var a=this.isDragging(),o=Rt(e),i=!o&&0!==e.button,r=this._rootElement,c=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(e.target&&e.target.draggable&&"mousedown"===e.type&&e.preventDefault(),!(a||i||c)){this._handles.length&&(this._rootElementTapHighlight=r.style.webkitTapHighlightColor||"",r.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scroll.subscribe(function(t){n._updateOnScroll(t)}),this._boundaryElement&&(this._boundaryRect=ht(this._boundaryElement));var s=this._previewTemplate;this._pickupPositionInElement=s&&s.template&&!s.matchSize?{x:0,y:0}:this._getPointerPositionInElement(t,e);var l=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:l.x,y:l.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}}},{key:"_cleanupDragArtifacts",value:function(t){var e=this;mt(this._rootElement,!0),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(function(){var n=e._dropContainer,a=n.getItemIndex(e),o=e._getPointerPositionOnPage(t),i=e._getDragDistance(e._getPointerPositionOnPage(t)),r=n._isOverContainer(o.x,o.y);e.ended.next({source:e,distance:i}),e.dropped.next({item:e,currentIndex:a,previousIndex:e._initialIndex,container:n,previousContainer:e._initialContainer,isPointerOverContainer:r,distance:i}),n.drop(e,a,e._initialIndex,e._initialContainer,r,i),e._dropContainer=e._initialContainer})}},{key:"_updateActiveDropContainer",value:function(t,e){var n=this,a=t.x,o=t.y,i=e.x,r=e.y,c=this._initialContainer._getSiblingContainerFromPosition(this,a,o);!c&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(a,o)&&(c=this._initialContainer),c&&c!==this._dropContainer&&this._ngZone.run(function(){n.exited.next({item:n,container:n._dropContainer}),n._dropContainer.exit(n),n._dropContainer=c,n._dropContainer.enter(n,a,o,c===n._initialContainer&&c.sortingDisabled?n._initialIndex:void 0),n.entered.next({item:n,container:c,currentIndex:c.getItemIndex(n)})}),this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,a,o,this._pointerDirectionDelta),this._preview.style.transform=xt(a-this._pickupPositionInElement.x,o-this._pickupPositionInElement.y)}},{key:"_createPreviewElement",value:function(){var t,e=this._previewTemplate,n=this.previewClass,a=e?e.template:null;if(a&&e){var o=e.matchSize?this._rootElement.getBoundingClientRect():null,i=e.viewContainer.createEmbeddedView(a,e.context);i.detectChanges(),t=Ft(i,this._document),this._previewRef=i,e.matchSize?It(t,o):t.style.transform=xt(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{var r=this._rootElement;It(t=Tt(r),r.getBoundingClientRect())}return dt(t.style,{pointerEvents:"none",margin:"0",position:"fixed",top:"0",left:"0",zIndex:"".concat(this._config.zIndex||1e3)}),bt(t,!1),t.classList.add("cdk-drag-preview"),t.setAttribute("dir",this._direction),n&&(Array.isArray(n)?n.forEach(function(e){return t.classList.add(e)}):t.classList.add(n)),t}},{key:"_animatePreviewToPlaceholder",value:function(){var t=this;if(!this._hasMoved)return Promise.resolve();var e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=xt(e.left,e.top);var n=function(t){var e=getComputedStyle(t),n=pt(e,"transition-property"),a=n.find(function(t){return"transform"===t||"all"===t});if(!a)return 0;var o=n.indexOf(a),i=pt(e,"transition-duration"),r=pt(e,"transition-delay");return ft(i[o])+ft(r[o])}(this._preview);return 0===n?Promise.resolve():this._ngZone.runOutsideAngular(function(){return new Promise(function(e){var a=function n(a){(!a||a.target===t._preview&&"transform"===a.propertyName)&&(t._preview.removeEventListener("transitionend",n),e(),clearTimeout(o))},o=setTimeout(a,1.5*n);t._preview.addEventListener("transitionend",a)})})}},{key:"_createPlaceholderElement",value:function(){var t,e=this._placeholderTemplate,n=e?e.template:null;return n?(this._placeholderRef=e.viewContainer.createEmbeddedView(n,e.context),this._placeholderRef.detectChanges(),t=Ft(this._placeholderRef,this._document)):t=Tt(this._rootElement),t.classList.add("cdk-drag-placeholder"),t}},{key:"_getPointerPositionInElement",value:function(t,e){var n=this._rootElement.getBoundingClientRect(),a=t===this._rootElement?null:t,o=a?a.getBoundingClientRect():n,i=Rt(e)?e.targetTouches[0]:e,r=this._getViewportScrollPosition();return{x:o.left-n.left+(i.pageX-o.left-r.left),y:o.top-n.top+(i.pageY-o.top-r.top)}}},{key:"_getPointerPositionOnPage",value:function(t){var e=this._getViewportScrollPosition(),n=Rt(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,a=n.pageX-e.left,o=n.pageY-e.top;if(this._ownerSVGElement){var i=this._ownerSVGElement.getScreenCTM();if(i){var r=this._ownerSVGElement.createSVGPoint();return r.x=a,r.y=o,r.matrixTransform(i.inverse())}}return{x:a,y:o}}},{key:"_getConstrainedPointerPosition",value:function(t){var e=this._dropContainer?this._dropContainer.lockAxis:null,n=this.constrainPosition?this.constrainPosition(t,this):t,a=n.x,o=n.y;if("x"===this.lockAxis||"x"===e?o=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==e||(a=this._pickupPositionOnPage.x),this._boundaryRect){var i=this._pickupPositionInElement,r=i.x,c=i.y,s=this._boundaryRect,l=this._previewRect,u=s.top+c,d=s.bottom-(l.height-c);a=Ot(a,s.left+r,s.right-(l.width-r)),o=Ot(o,u,d)}return{x:a,y:o}}},{key:"_updatePointerDirectionDelta",value:function(t){var e=t.x,n=t.y,a=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,i=Math.abs(e-o.x),r=Math.abs(n-o.y);return i>this._config.pointerDirectionChangeThreshold&&(a.x=e>o.x?1:-1,o.x=e),r>this._config.pointerDirectionChangeThreshold&&(a.y=n>o.y?1:-1,o.y=n),a}},{key:"_toggleNativeDragInteractions",value:function(){if(this._rootElement&&this._handles){var t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,bt(this._rootElement,t))}}},{key:"_removeRootElementListeners",value:function(t){t.removeEventListener("mousedown",this._pointerDown,Et),t.removeEventListener("touchstart",this._pointerDown,wt)}},{key:"_applyRootElementTransform",value:function(t,e){var n=xt(t,e);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?n+" "+this._initialTransform:n}},{key:"_getDragDistance",value:function(t){var e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}},{key:"_cleanupCachedDimensions",value:function(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}},{key:"_containInsideBoundaryOnResize",value:function(){var t=this._passiveTransform,e=t.x,n=t.y;if(!(0===e&&0===n||this.isDragging())&&this._boundaryElement){var a=this._boundaryElement.getBoundingClientRect(),o=this._rootElement.getBoundingClientRect();if(!(0===a.width&&0===a.height||0===o.width&&0===o.height)){var i=a.left-o.left,r=o.right-a.right,c=a.top-o.top,s=o.bottom-a.bottom;a.width>o.width?(i>0&&(e+=i),r>0&&(e-=r)):e=0,a.height>o.height?(c>0&&(n+=c),s>0&&(n-=s)):n=0,e===this._passiveTransform.x&&n===this._passiveTransform.y||this.setFreeDragPosition({y:n,x:e})}}}},{key:"_getDragStartDelay",value:function(t){var e=this.dragStartDelay;return"number"==typeof e?e:Rt(t)?e.touch:e?e.mouse:0}},{key:"_updateOnScroll",value:function(t){var e=this._parentPositions.handleScroll(t);if(e){var n=t.target;this._boundaryRect&&(n===this._document||n!==this._boundaryElement&&n.contains(this._boundaryElement))&&vt(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}},{key:"_getViewportScrollPosition",value:function(){var t=this._parentPositions.positions.get(this._document);return t?t.scrollPosition:this._viewportRuler.getViewportScrollPosition()}},{key:"_getShadowRoot",value:function(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=Object(et.c)(this._rootElement)),this._cachedShadowRoot}},{key:"disabled",get:function(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)},set:function(t){var e=Object(J.c)(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(function(t){return bt(t,e)}))}}]),t}();function xt(t,e){return"translate3d(".concat(Math.round(t),"px, ").concat(Math.round(e),"px, 0)")}function Ot(t,e,n){return Math.max(e,Math.min(n,t))}function Mt(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Rt(t){return"t"===t.type[0]}function Ft(t,e){var n=t.rootNodes;if(1===n.length&&n[0].nodeType===e.ELEMENT_NODE)return n[0];var a=e.createElement("div");return n.forEach(function(t){return a.appendChild(t)}),a}function It(t,e){t.style.width="".concat(e.width,"px"),t.style.height="".concat(e.height,"px"),t.style.transform=xt(e.left,e.top)}function At(t,e){return Math.max(0,Math.min(e,t))}var Nt=function(){function t(e,n,a,o,i){var r=this;l(this,t),this._dragDropRegistry=n,this._ngZone=o,this._viewportRuler=i,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=function(){return!0},this.sortPredicate=function(){return!0},this.beforeStarted=new $.a,this.entered=new $.a,this.exited=new $.a,this.dropped=new $.a,this.sorted=new $.a,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=W.a.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new $.a,this._cachedShadowRoot=null,this._startScrollInterval=function(){r._stopScrolling(),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:at.a;return(!Object(ot.a)(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=at.a),new nt.a(function(n){return n.add(e.schedule(it,t,{subscriber:n,counter:0,period:t})),n})}(0,rt.a).pipe(Object(ct.a)(r._stopScrollTimers)).subscribe(function(){var t=r._scrollNode,e=r.autoScrollStep;1===r._verticalScrollDirection?Ut(t,-e):2===r._verticalScrollDirection&&Ut(t,e),1===r._horizontalScrollDirection?Bt(t,-e):2===r._horizontalScrollDirection&&Bt(t,e)})},this.element=Object(J.e)(e),this._document=a,this.withScrollableParents([this.element]),n.registerDropContainer(this),this._parentPositions=new St(a,i)}return d(t,[{key:"dispose",value:function(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}},{key:"isDragging",value:function(){return this._isDragging}},{key:"start",value:function(){this._draggingStarted(),this._notifyReceivingSiblings()}},{key:"enter",value:function(t,e,n,a){var o;this._draggingStarted(),null==a?-1===(o=this.sortingDisabled?this._draggables.indexOf(t):-1)&&(o=this._getItemIndexFromPointerPosition(t,e,n)):o=a;var i=this._activeDraggables,r=i.indexOf(t),c=t.getPlaceholderElement(),s=i[o];if(s===t&&(s=i[o+1]),r>-1&&i.splice(r,1),s&&!this._dragDropRegistry.isDragging(s)){var l=s.getRootElement();l.parentElement.insertBefore(c,l),i.splice(o,0,t)}else if(this._shouldEnterAsFirstChild(e,n)){var u=i[0].getRootElement();u.parentNode.insertBefore(c,u),i.unshift(t)}else Object(J.e)(this.element).appendChild(c),i.push(t);c.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}},{key:"exit",value:function(t){this._reset(),this.exited.next({item:t,container:this})}},{key:"drop",value:function(t,e,n,a,o,i){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:n,container:this,previousContainer:a,isPointerOverContainer:o,distance:i})}},{key:"withItems",value:function(t){var e=this,n=this._draggables;return this._draggables=t,t.forEach(function(t){return t._withDropContainer(e)}),this.isDragging()&&(n.filter(function(t){return t.isDragging()}).every(function(e){return-1===t.indexOf(e)})?this._reset():this._cacheItems()),this}},{key:"withDirection",value:function(t){return this._direction=t,this}},{key:"connectedTo",value:function(t){return this._siblings=t.slice(),this}},{key:"withOrientation",value:function(t){return this._orientation=t,this}},{key:"withScrollableParents",value:function(t){var e=Object(J.e)(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e].concat(r(t)):t.slice(),this}},{key:"getScrollableParents",value:function(){return this._scrollableElements}},{key:"getItemIndex",value:function(t){return this._isDragging?jt("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,function(e){return e.drag===t}):this._draggables.indexOf(t)}},{key:"isReceiving",value:function(){return this._activeSiblings.size>0}},{key:"_sortItem",value:function(t,e,n,a){if(!this.sortingDisabled&&this._clientRect&&Ct(this._clientRect,.05,e,n)){var o=this._itemPositions,i=this._getItemIndexFromPointerPosition(t,e,n,a);if(!(-1===i&&o.length>0)){var r="horizontal"===this._orientation,c=jt(o,function(e){return e.drag===t}),s=o[i],l=s.clientRect,u=c>i?1:-1,d=this._getItemOffsetPx(o[c].clientRect,l,u),b=this._getSiblingOffsetPx(c,o,u),m=o.slice();!function(t,e,n){var a=At(e,t.length-1),o=At(n,t.length-1);if(a!==o){for(var i=t[a],r=o<a?-1:1,c=a;c!==o;c+=r)t[c]=t[c+r];t[o]=i}}(o,c,i),this.sorted.next({previousIndex:c,currentIndex:i,container:this,item:t}),o.forEach(function(e,n){if(m[n]!==e){var a=e.drag===t,o=a?d:b,i=a?t.getPlaceholderElement():e.drag.getRootElement();e.offset+=o,r?(i.style.transform="translate3d(".concat(Math.round(e.offset),"px, 0, 0)"),vt(e.clientRect,0,o)):(i.style.transform="translate3d(0, ".concat(Math.round(e.offset),"px, 0)"),vt(e.clientRect,o,0))}}),this._previousSwap.overlaps=gt(l,e,n),this._previousSwap.drag=s.drag,this._previousSwap.delta=r?a.x:a.y}}}},{key:"_startScrollingIfNecessary",value:function(t,e){var n=this;if(!this.autoScrollDisabled){var a,o=0,r=0;if(this._parentPositions.positions.forEach(function(c,s){var l;s!==n._document&&c.clientRect&&!a&&Ct(c.clientRect,.05,t,e)&&(l=i(function(t,e,n,a){var o=Ht(e,a),i=Lt(e,n),r=0,c=0;if(o){var s=t.scrollTop;1===o?s>0&&(r=1):t.scrollHeight-s>t.clientHeight&&(r=2)}if(i){var l=t.scrollLeft;1===i?l>0&&(c=1):t.scrollWidth-l>t.clientWidth&&(c=2)}return[r,c]}(s,c.clientRect,t,e),2),o=l[0],r=l[1],(o||r)&&(a=s))}),!o&&!r){var c=this._viewportRuler.getViewportSize(),s=c.width,l=c.height,u={width:s,height:l,top:0,right:s,bottom:l,left:0};o=Ht(u,e),r=Lt(u,t),a=window}!a||o===this._verticalScrollDirection&&r===this._horizontalScrollDirection&&a===this._scrollNode||(this._verticalScrollDirection=o,this._horizontalScrollDirection=r,this._scrollNode=a,(o||r)&&a?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}}},{key:"_stopScrolling",value:function(){this._stopScrollTimers.next()}},{key:"_draggingStarted",value:function(){var t=Object(J.e)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}},{key:"_cacheParentPositions",value:function(){var t=Object(J.e)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}},{key:"_cacheItemPositions",value:function(){var t="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(function(t){var e=t.getVisibleElement();return{drag:t,offset:0,clientRect:ht(e)}}).sort(function(e,n){return t?e.clientRect.left-n.clientRect.left:e.clientRect.top-n.clientRect.top})}},{key:"_reset",value:function(){var t=this;this._isDragging=!1;var e=Object(J.e)(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(function(t){var e=t.getRootElement();e&&(e.style.transform="")}),this._siblings.forEach(function(e){return e._stopReceiving(t)}),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}},{key:"_getSiblingOffsetPx",value:function(t,e,n){var a="horizontal"===this._orientation,o=e[t].clientRect,i=e[t+-1*n],r=o[a?"width":"height"]*n;if(i){var c=a?"left":"top",s=a?"right":"bottom";-1===n?r-=i.clientRect[c]-o[s]:r+=o[c]-i.clientRect[s]}return r}},{key:"_getItemOffsetPx",value:function(t,e,n){var a="horizontal"===this._orientation,o=a?e.left-t.left:e.top-t.top;return-1===n&&(o+=a?e.width-t.width:e.height-t.height),o}},{key:"_shouldEnterAsFirstChild",value:function(t,e){if(!this._activeDraggables.length)return!1;var n=this._itemPositions,a="horizontal"===this._orientation;if(n[0].drag!==this._activeDraggables[0]){var o=n[n.length-1].clientRect;return a?t>=o.right:e>=o.bottom}var i=n[0].clientRect;return a?t<=i.left:e<=i.top}},{key:"_getItemIndexFromPointerPosition",value:function(t,e,n,a){var o=this,i="horizontal"===this._orientation,r=jt(this._itemPositions,function(r,c,s){var l=r.drag,u=r.clientRect;if(l===t)return s.length<2;if(a){var d=i?a.x:a.y;if(l===o._previousSwap.drag&&o._previousSwap.overlaps&&d===o._previousSwap.delta)return!1}return i?e>=Math.floor(u.left)&&e<Math.floor(u.right):n>=Math.floor(u.top)&&n<Math.floor(u.bottom)});return-1!==r&&this.sortPredicate(r,t,this)?r:-1}},{key:"_cacheItems",value:function(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}},{key:"_isOverContainer",value:function(t,e){return null!=this._clientRect&&gt(this._clientRect,t,e)}},{key:"_getSiblingContainerFromPosition",value:function(t,e,n){return this._siblings.find(function(a){return a._canReceive(t,e,n)})}},{key:"_canReceive",value:function(t,e,n){if(!this._clientRect||!gt(this._clientRect,e,n)||!this.enterPredicate(t,this))return!1;var a=this._getShadowRoot().elementFromPoint(e,n);if(!a)return!1;var o=Object(J.e)(this.element);return a===o||o.contains(a)}},{key:"_startReceiving",value:function(t,e){var n=this,a=this._activeSiblings;!a.has(t)&&e.every(function(t){return n.enterPredicate(t,n)||n._draggables.indexOf(t)>-1})&&(a.add(t),this._cacheParentPositions(),this._listenToScrollEvents())}},{key:"_stopReceiving",value:function(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe()}},{key:"_listenToScrollEvents",value:function(){var t=this;this._viewportScrollSubscription=this._dragDropRegistry.scroll.subscribe(function(e){if(t.isDragging()){var n=t._parentPositions.handleScroll(e);n&&(t._itemPositions.forEach(function(t){vt(t.clientRect,n.top,n.left)}),t._itemPositions.forEach(function(e){var n=e.drag;t._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()}))}else t.isReceiving()&&t._cacheParentPositions()})}},{key:"_getShadowRoot",value:function(){if(!this._cachedShadowRoot){var t=Object(et.c)(Object(J.e)(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}},{key:"_notifyReceivingSiblings",value:function(){var t=this,e=this._activeDraggables.filter(function(t){return t.isDragging()});this._siblings.forEach(function(n){return n._startReceiving(t,e)})}}]),t}();function jt(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return n;return-1}function Ut(t,e){t===window?t.scrollBy(0,e):t.scrollTop+=e}function Bt(t,e){t===window?t.scrollBy(e,0):t.scrollLeft+=e}function Ht(t,e){var n=t.top,a=t.bottom,o=.05*t.height;return e>=n-o&&e<=n+o?1:e>=a-o&&e<=a+o?2:0}function Lt(t,e){var n=t.left,a=t.right,o=.05*t.width;return e>=n-o&&e<=n+o?1:e>=a-o&&e<=a+o?2:0}var zt,qt,$t,Wt=Object(et.f)({passive:!1,capture:!0}),Gt=((zt=function(){function t(e,n){var a=this;l(this,t),this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=function(t){return t.isDragging()},this.pointerMove=new $.a,this.pointerUp=new $.a,this.scroll=new $.a,this._preventDefaultWhileDragging=function(t){a._activeDragInstances.length>0&&t.preventDefault()},this._persistentTouchmoveListener=function(t){a._activeDragInstances.length>0&&(a._activeDragInstances.some(a._draggingPredicate)&&t.preventDefault(),a.pointerMove.next(t))},this._document=n}return d(t,[{key:"registerDropContainer",value:function(t){this._dropInstances.has(t)||this._dropInstances.add(t)}},{key:"registerDragItem",value:function(t){var e=this;this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(function(){e._document.addEventListener("touchmove",e._persistentTouchmoveListener,Wt)})}},{key:"removeDropContainer",value:function(t){this._dropInstances.delete(t)}},{key:"removeDragItem",value:function(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Wt)}},{key:"startDragging",value:function(t,e){var n=this;if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){var a=e.type.startsWith("touch");this._globalListeners.set(a?"touchend":"mouseup",{handler:function(t){return n.pointerUp.next(t)},options:!0}).set("scroll",{handler:function(t){return n.scroll.next(t)},options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Wt}),a||this._globalListeners.set("mousemove",{handler:function(t){return n.pointerMove.next(t)},options:Wt}),this._ngZone.runOutsideAngular(function(){n._globalListeners.forEach(function(t,e){n._document.addEventListener(e,t.handler,t.options)})})}}},{key:"stopDragging",value:function(t){var e=this._activeDragInstances.indexOf(t);e>-1&&(this._activeDragInstances.splice(e,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}},{key:"isDragging",value:function(t){return this._activeDragInstances.indexOf(t)>-1}},{key:"ngOnDestroy",value:function(){var t=this;this._dragInstances.forEach(function(e){return t.removeDragItem(e)}),this._dropInstances.forEach(function(e){return t.removeDropContainer(e)}),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}},{key:"_clearGlobalListeners",value:function(){var t=this;this._globalListeners.forEach(function(e,n){t._document.removeEventListener(n,e.handler,e.options)}),this._globalListeners.clear()}}]),t}()).\u0275fac=function(t){return new(t||zt)(L.Xb(L.B),L.Xb(b.d))},zt.\u0275prov=Object(L.Jb)({factory:function(){return new zt(Object(L.Xb)(L.B),Object(L.Xb)(b.d))},token:zt,providedIn:"root"}),zt),Vt={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Qt=((qt=function(){function t(e,n,a,o){l(this,t),this._document=e,this._ngZone=n,this._viewportRuler=a,this._dragDropRegistry=o}return d(t,[{key:"createDrag",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vt;return new Pt(t,e,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}},{key:"createDropList",value:function(t){return new Nt(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}]),t}()).\u0275fac=function(t){return new(t||qt)(L.Xb(b.d),L.Xb(L.B),L.Xb(z.e),L.Xb(Gt))},qt.\u0275prov=Object(L.Jb)({factory:function(){return new qt(Object(L.Xb)(b.d),Object(L.Xb)(L.B),Object(L.Xb)(z.e),Object(L.Xb)(Gt))},token:qt,providedIn:"root"}),qt),Jt=new L.s("CDK_DRAG_PARENT"),Xt=new L.s("CDK_DRAG_CONFIG"),Zt=new L.s("CdkDropList"),Kt=new L.s("CdkDragHandle"),Yt=new L.s("CdkDragPlaceholder"),te=new L.s("CdkDragPreview"),ee=(($t=function(){function t(e,n,a,o,i,r,c,s,u,d,b){var m=this;l(this,t),this.element=e,this.dropContainer=n,this._ngZone=o,this._viewContainerRef=i,this._dir=c,this._changeDetectorRef=u,this._selfHandle=d,this._parentDrag=b,this._destroyed=new $.a,this.started=new L.o,this.released=new L.o,this.ended=new L.o,this.entered=new L.o,this.exited=new L.o,this.dropped=new L.o,this.moved=new nt.a(function(t){var e=m._dragRef.moved.pipe(Object(st.a)(function(t){return{source:m,pointerPosition:t.pointerPosition,event:t.event,delta:t.delta,distance:t.distance}})).subscribe(t);return function(){e.unsubscribe()}}),this._dragRef=s.createDrag(e,{dragStartThreshold:r&&null!=r.dragStartThreshold?r.dragStartThreshold:5,pointerDirectionChangeThreshold:r&&null!=r.pointerDirectionChangeThreshold?r.pointerDirectionChangeThreshold:5,zIndex:null==r?void 0:r.zIndex}),this._dragRef.data=this,t._dragInstances.push(this),r&&this._assignDefaults(r),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}return d(t,[{key:"getPlaceholderElement",value:function(){return this._dragRef.getPlaceholderElement()}},{key:"getRootElement",value:function(){return this._dragRef.getRootElement()}},{key:"reset",value:function(){this._dragRef.reset()}},{key:"getFreeDragPosition",value:function(){return this._dragRef.getFreeDragPosition()}},{key:"ngAfterViewInit",value:function(){var t=this;this._ngZone.onStable.pipe(Object(V.a)(1),Object(ct.a)(this._destroyed)).subscribe(function(){t._updateRootElement(),t._handles.changes.pipe(Object(Q.a)(t._handles),Object(lt.a)(function(e){var n=e.filter(function(e){return e._parentDrag===t}).map(function(t){return t.element});t._selfHandle&&t.rootElementSelector&&n.push(t.element),t._dragRef.withHandles(n)}),Object(ut.a)(function(t){return Object(G.a).apply(void 0,r(t.map(function(t){return t._stateChanges.pipe(Object(Q.a)(t))})))}),Object(ct.a)(t._destroyed)).subscribe(function(e){var n=t._dragRef,a=e.element.nativeElement;e.disabled?n.disableHandle(a):n.enableHandle(a)}),t.freeDragPosition&&t._dragRef.setFreeDragPosition(t.freeDragPosition)})}},{key:"ngOnChanges",value:function(t){var e=t.rootElementSelector,n=t.freeDragPosition;e&&!e.firstChange&&this._updateRootElement(),n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}},{key:"ngOnDestroy",value:function(){this.dropContainer&&this.dropContainer.removeItem(this);var e=t._dragInstances.indexOf(this);e>-1&&t._dragInstances.splice(e,-1),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}},{key:"_updateRootElement",value:function(){var t=this.element.nativeElement,e=this.rootElementSelector?ne(t,this.rootElementSelector):t;this._dragRef.withRootElement(e||t)}},{key:"_getBoundaryElement",value:function(){var t=this.boundaryElement;return t?"string"==typeof t?ne(this.element.nativeElement,t):Object(J.e)(t):null}},{key:"_syncInputs",value:function(e){var n=this;e.beforeStarted.subscribe(function(){if(!e.isDragging()){var t=n._dir,a=n.dragStartDelay,o=n._placeholderTemplate?{template:n._placeholderTemplate.templateRef,context:n._placeholderTemplate.data,viewContainer:n._viewContainerRef}:null,i=n._previewTemplate?{template:n._previewTemplate.templateRef,context:n._previewTemplate.data,matchSize:n._previewTemplate.matchSize,viewContainer:n._viewContainerRef}:null;e.disabled=n.disabled,e.lockAxis=n.lockAxis,e.dragStartDelay="object"==typeof a&&a?a:Object(J.f)(a),e.constrainPosition=n.constrainPosition,e.previewClass=n.previewClass,e.withBoundaryElement(n._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(i),t&&e.withDirection(t.value)}}),e.beforeStarted.pipe(Object(V.a)(1)).subscribe(function(){var a,o;if(n._parentDrag)e.withParent(n._parentDrag._dragRef);else for(var i=n.element.nativeElement.parentElement;i;){if(null===(a=i.classList)||void 0===a?void 0:a.contains("cdk-drag")){e.withParent((null===(o=t._dragInstances.find(function(t){return t.element.nativeElement===i}))||void 0===o?void 0:o._dragRef)||null);break}i=i.parentElement}})}},{key:"_handleEvents",value:function(t){var e=this;t.started.subscribe(function(){e.started.emit({source:e}),e._changeDetectorRef.markForCheck()}),t.released.subscribe(function(){e.released.emit({source:e})}),t.ended.subscribe(function(t){e.ended.emit({source:e,distance:t.distance}),e._changeDetectorRef.markForCheck()}),t.entered.subscribe(function(t){e.entered.emit({container:t.container.data,item:e,currentIndex:t.currentIndex})}),t.exited.subscribe(function(t){e.exited.emit({container:t.container.data,item:e})}),t.dropped.subscribe(function(t){e.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,isPointerOverContainer:t.isPointerOverContainer,item:e,distance:t.distance})})}},{key:"_assignDefaults",value:function(t){var e=t.lockAxis,n=t.dragStartDelay,a=t.constrainPosition,o=t.previewClass,i=t.boundaryElement,r=t.draggingDisabled,c=t.rootElementSelector;this.disabled=null!=r&&r,this.dragStartDelay=n||0,e&&(this.lockAxis=e),a&&(this.constrainPosition=a),o&&(this.previewClass=o),i&&(this.boundaryElement=i),c&&(this.rootElementSelector=c)}},{key:"disabled",get:function(){return this._disabled||this.dropContainer&&this.dropContainer.disabled},set:function(t){this._disabled=Object(J.c)(t),this._dragRef.disabled=this._disabled}}]),t}()).\u0275fac=function(t){return new(t||$t)(L.Nb(L.l),L.Nb(Zt,12),L.Nb(b.d),L.Nb(L.B),L.Nb(L.R),L.Nb(Xt,8),L.Nb(Z.b,8),L.Nb(Qt),L.Nb(L.h),L.Nb(Kt,10),L.Nb(Jt,12))},$t.\u0275dir=L.Ib({type:$t,selectors:[["","cdkDrag",""]],contentQueries:function(t,e,n){var a;1&t&&(L.Gb(n,te,1),L.Gb(n,Yt,1),L.Gb(n,Kt,1)),2&t&&(L.sc(a=L.cc())&&(e._previewTemplate=a.first),L.sc(a=L.cc())&&(e._placeholderTemplate=a.first),L.sc(a=L.cc())&&(e._handles=a))},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,e){2&t&&L.Fb("cdk-drag-disabled",e.disabled)("cdk-drag-dragging",e._dragRef.isDragging())},inputs:{disabled:["cdkDragDisabled","disabled"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],lockAxis:["cdkDragLockAxis","lockAxis"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],boundaryElement:["cdkDragBoundary","boundaryElement"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],data:["cdkDragData","data"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[L.Bb([{provide:Jt,useExisting:$t}]),L.Ab]}),$t._dragInstances=[],$t);function ne(t,e){for(var n=t.parentElement;n;){if(n.matches?n.matches(e):n.msMatchesSelector(e))return n;n=n.parentElement}return null}var ae,oe,ie,re,ce,se,le=((ae=function t(){l(this,t)}).\u0275mod=L.Lb({type:ae}),ae.\u0275inj=L.Kb({factory:function(t){return new(t||ae)},providers:[Qt],imports:[z.b]}),ae),ue=c("R1ws"),de=0,be=Object(q.w)(function t(){l(this,t)}),me=((ie=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&e(t,n)}(o,t);var a=n(o);function o(t,e,n,i,r){var c;return l(this,o),(c=a.call(this))._ngZone=t,c._elementRef=e,c._ariaDescriber=n,c._renderer=i,c._animationMode=r,c._hasContent=!1,c._color="primary",c._overlap=!0,c.position="above after",c.size="medium",c._id=de++,c}return d(o,[{key:"isAbove",value:function(){return-1===this.position.indexOf("below")}},{key:"isAfter",value:function(){return-1===this.position.indexOf("before")}},{key:"ngOnChanges",value:function(t){var e=t.content;if(e){var n=e.currentValue;this._hasContent=null!=n&&"".concat(n).trim().length>0,this._updateTextContent()}}},{key:"ngOnDestroy",value:function(){var t=this._badgeElement;t&&(this.description&&this._ariaDescriber.removeDescription(t,this.description),this._renderer.destroyNode&&this._renderer.destroyNode(t))}},{key:"getBadgeElement",value:function(){return this._badgeElement}},{key:"_updateTextContent",value:function(){return this._badgeElement?this._badgeElement.textContent=this._stringifyContent():this._badgeElement=this._createBadgeElement(),this._badgeElement}},{key:"_createBadgeElement",value:function(){var t=this._renderer.createElement("span");return this._clearExistingBadges("mat-badge-content"),t.setAttribute("id","mat-badge-content-".concat(this._id)),t.classList.add("mat-badge-content"),t.textContent=this._stringifyContent(),"NoopAnimations"===this._animationMode&&t.classList.add("_mat-animation-noopable"),this.description&&t.setAttribute("aria-label",this.description),this._elementRef.nativeElement.appendChild(t),"function"==typeof requestAnimationFrame&&"NoopAnimations"!==this._animationMode?this._ngZone.runOutsideAngular(function(){requestAnimationFrame(function(){t.classList.add("mat-badge-active")})}):t.classList.add("mat-badge-active"),t}},{key:"_updateHostAriaDescription",value:function(t,e){var n=this._updateTextContent();e&&this._ariaDescriber.removeDescription(n,e),t&&this._ariaDescriber.describe(n,t)}},{key:"_setColor",value:function(t){if(t!==this._color){var e=this._elementRef.nativeElement.classList;this._color&&e.remove("mat-badge-".concat(this._color)),t&&e.add("mat-badge-".concat(t))}}},{key:"_clearExistingBadges",value:function(t){for(var e=this._elementRef.nativeElement,n=e.children.length;n--;){var a=e.children[n];a.classList.contains(t)&&e.removeChild(a)}}},{key:"_stringifyContent",value:function(){var t=this.content;return null==t?"":"".concat(t)}},{key:"color",get:function(){return this._color},set:function(t){this._setColor(t),this._color=t}},{key:"overlap",get:function(){return this._overlap},set:function(t){this._overlap=Object(J.c)(t)}},{key:"description",get:function(){return this._description},set:function(t){if(t!==this._description){var e=this._badgeElement;this._updateHostAriaDescription(t,this._description),this._description=t,e&&(t?e.setAttribute("aria-label",t):e.removeAttribute("aria-label"))}}},{key:"hidden",get:function(){return this._hidden},set:function(t){this._hidden=Object(J.c)(t)}}]),o}(be)).\u0275fac=function(t){return new(t||ie)(L.Nb(L.B),L.Nb(L.l),L.Nb(U.c),L.Nb(L.G),L.Nb(ue.a,8))},ie.\u0275dir=L.Ib({type:ie,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(t,e){2&t&&L.Fb("mat-badge-overlap",e.overlap)("mat-badge-above",e.isAbove())("mat-badge-below",!e.isAbove())("mat-badge-before",!e.isAfter())("mat-badge-after",e.isAfter())("mat-badge-small","small"===e.size)("mat-badge-medium","medium"===e.size)("mat-badge-large","large"===e.size)("mat-badge-hidden",e.hidden||!e._hasContent)("mat-badge-disabled",e.disabled)},inputs:{disabled:["matBadgeDisabled","disabled"],position:["matBadgePosition","position"],size:["matBadgeSize","size"],color:["matBadgeColor","color"],overlap:["matBadgeOverlap","overlap"],description:["matBadgeDescription","description"],hidden:["matBadgeHidden","hidden"],content:["matBadge","content"]},features:[L.zb,L.Ab]}),ie),fe=((oe=function t(){l(this,t)}).\u0275mod=L.Lb({type:oe}),oe.\u0275inj=L.Kb({factory:function(t){return new(t||oe)},imports:[[U.a,q.g],q.g]}),oe),pe=c("tyNb"),he=[],ge=((ce=function t(){l(this,t)}).\u0275mod=L.Lb({type:ce}),ce.\u0275inj=L.Kb({factory:function(t){return new(t||ce)},imports:[[pe.d.forChild(he)],pe.d]}),ce),ve=((re=function t(){l(this,t)}).\u0275mod=L.Lb({type:re}),re.\u0275inj=L.Kb({factory:function(t){return new(t||re)},imports:[[b.c,ge,m.c,f.e,p.a,v.AdminModule,C.a,S.d,T.b,_.d,y.c,D.f,k.b,w.c,E.l,P.b,x.b,O.b,M.b,R.b,F.d,I.b,A.b,N.e,j.d,tt,q.j,le,fe]]}),re),Ce=c("JbvS"),Se=c("0T/Q"),Te=c("sKxO"),_e=c("R5jZ"),ye=c("un/a"),De=c("JIr8"),ke=c("Qyje"),we=((se=function(){function t(e){l(this,t),this.http=e,this.moduleUrl="mante/area",this.srvcErrHndl=new _e.a}return d(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Te.a.url,"/").concat(this.moduleUrl,"/get_areas?").concat(ke.stringify(t))).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(t){return this.http.post("".concat(Te.a.url,"/").concat(this.moduleUrl,"/guardar").concat(t.area?"/"+t.area:""),t).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||se)(L.Xb(m.b))},se.\u0275prov=L.Jb({token:se,factory:se.\u0275fac,providedIn:"root"}),se),Ee=c("FY0D");function Pe(t,e){if(1&t){var n=L.Ub();L.Tb(0,"mat-list-item",5),L.bc("click",function(){L.wc(n);var t=e.$implicit;return L.fc().getEntidad(t.area)}),L.Tb(1,"mat-icon",6),L.Dc(2,"settings"),L.Sb(),L.Tb(3,"h5",7),L.Dc(4),L.Sb(),L.Sb()}if(2&t){var a=e.$implicit;L.Cb(4),L.Ec(a.nombre)}}var xe,Oe,Me=function(){return{standalone:!0}},Re=((Oe=function(){function t(e,n){var a=this;l(this,t),this.areaSrvc=e,this.ls=n,this.getEntidadEv=new L.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadEntidades=function(){a.areaSrvc.get({sede:a.ls.get(Te.a.usrTokenVar).sede||0,debaja:1}).subscribe(function(t){t&&t.length>0&&(a.lstEntidades=t,a.applyFilter())})},this.getEntidad=function(t){a.areaSrvc.get({area:t,debaja:1}).subscribe(function(t){t&&t.length>0&&a.getEntidadEv.emit(t[0])})},this.pageChange=function(t){a.pageSize=t.pageSize,a.pageIndex=t.pageIndex,a.applyFilter()}}return d(t,[{key:"ngOnInit",value:function(){this.loadEntidades()}},{key:"applyFilter",value:function(){if(this.txtFiltro.length>0){var t=Object(Te.b)(this.lstEntidades,this.txtFiltro);this.length=t.length,this.lstEntidadesPaged=Object(Te.c)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstEntidades.length,this.lstEntidadesPaged=Object(Te.c)(this.lstEntidades,this.pageSize,this.pageIndex+1)}}]),t}()).\u0275fac=function(t){return new(t||Oe)(L.Nb(we),L.Nb(Ee.a))},Oe.\u0275cmp=L.Hb({type:Oe,selectors:[["app-lista-area"]],outputs:{getEntidadEv:"getEntidadEv"},decls:7,vars:7,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],["matRipple","",3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["matRipple","",3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,e){1&t&&(L.Tb(0,"mat-card",0),L.Tb(1,"mat-card-content"),L.Tb(2,"mat-form-field",1),L.Tb(3,"input",2),L.bc("keyup",function(){return e.applyFilter()})("ngModelChange",function(t){return e.txtFiltro=t}),L.Sb(),L.Sb(),L.Tb(4,"mat-nav-list"),L.Cc(5,Pe,5,1,"mat-list-item",3),L.Sb(),L.Tb(6,"mat-paginator",4),L.bc("page",function(t){return e.pageChange(t)}),L.Sb(),L.Sb(),L.Sb()),2&t&&(L.Cb(3),L.lc("ngModel",e.txtFiltro)("ngModelOptions",L.nc(6,Me)),L.Cb(2),L.lc("ngForOf",e.lstEntidadesPaged),L.Cb(1),L.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[D.a,D.c,_.b,y.b,f.c,f.k,f.n,S.e,b.l,A.a,S.c,T.a,S.b,q.h],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),Oe),Fe=((xe=function(){function t(e){l(this,t),this.http=e,this.moduleUrl="mesa",this.srvcErrHndl=new _e.a}return d(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Te.a.urlMantenimientos,"/").concat(this.moduleUrl,"/buscar?").concat(ke.stringify(t))).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(t){return this.http.post("".concat(Te.a.urlMantenimientos,"/mesa/guardar").concat(t.mesa?"/"+t.mesa:""),t).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"getDisponibles",value:function(){return this.http.get("".concat(Te.a.urlMantenimientos,"/area/get_mesas_disponibles?")).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||xe)(L.Xb(m.b))},xe.\u0275prov=L.Jb({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe),Ie=c("qMXL");function Ae(t,e){if(1&t&&(L.Tb(0,"mat-option",12),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n.impresora),L.Cb(1),L.Fc(" ",n.nombre," ")}}function Ne(t,e){if(1&t){var n=L.Ub();L.Tb(0,"mat-form-field",4),L.Tb(1,"mat-label"),L.Dc(2,"Impresora"),L.Sb(),L.Tb(3,"mat-select",10),L.bc("ngModelChange",function(t){return L.wc(n),L.fc().mesa.impresora=t}),L.Cc(4,Ae,2,2,"mat-option",11),L.Sb(),L.Sb()}if(2&t){var a=L.fc();L.Cb(3),L.lc("ngModel",a.mesa.impresora),L.Cb(1),L.lc("ngForOf",a.impresoras)}}var je,Ue,Be=((je=function(){function t(e,n,a,o,i){var r=this;l(this,t),this.mesaSrvc=e,this.impresoraSrvc=n,this.snackBar=a,this.dialogRef=o,this.data=i,this.impresoras=[],this.mesa={},this.loadImpresoras=function(){return r.impresoraSrvc.get().subscribe(function(t){return r.impresoras=t})},this.cancelar=function(){return r.dialogRef.close(!1)},this.guardarConfiguracion=function(){r.mesaSrvc.save(r.mesa).subscribe(function(t){t.exito?r.snackBar.open(t.mesa?"Mesa #".concat(t.mesa.numero," actualizada..."):"Mesa #".concat(r.mesa.numero," actualizada..."),"Configuraci\xf3n de mesa",{duration:3e3}):r.snackBar.open("ERROR:".concat(t.mensaje,"."),"Configuraci\xf3n de mesa",{duration:7e3}),r.dialogRef.close(!0)})}}return d(t,[{key:"ngOnInit",value:function(){this.mesa=this.data.mesa,this.loadImpresoras()}}]),t}()).\u0275fac=function(t){return new(t||je)(L.Nb(Fe),L.Nb(Ie.a),L.Nb(M.a),L.Nb(N.f),L.Nb(N.a))},je.\u0275cmp=L.Hb({type:je,selectors:[["app-configura-mesa"]],decls:13,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate",""],["frmConfigMesa","ngForm"],[1,"fullWidth"],["type","text","matInput","","placeholder","Etiqueta","name","etiqueta","maxlength","3",3,"ngModel","ngModelChange"],["class","fullWidth",4,"ngIf"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],["name","impresora",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){if(1&t&&(L.Tb(0,"h1",0),L.Dc(1),L.Sb(),L.Tb(2,"div",1),L.Tb(3,"form",2,3),L.Tb(5,"mat-form-field",4),L.Tb(6,"input",5),L.bc("ngModelChange",function(t){return e.mesa.etiqueta=t}),L.Sb(),L.Sb(),L.Cc(7,Ne,5,2,"mat-form-field",6),L.Sb(),L.Sb(),L.Tb(8,"div",7),L.Tb(9,"button",8),L.bc("click",function(){return e.cancelar()}),L.Dc(10," Cancelar "),L.Sb(),L.Tb(11,"button",9),L.bc("click",function(){return e.guardarConfiguracion()}),L.Dc(12," Guardar "),L.Sb(),L.Sb()),2&t){var n=L.tc(4);L.Cb(1),L.Fc("Configuraci\xf3n de mesa ",e.mesa.numero,""),L.Cb(5),L.lc("ngModel",e.mesa.etiqueta),L.Cb(1),L.lc("ngIf",1==+e.mesa.esmostrador),L.Cb(4),L.lc("disabled",!n.form.valid)}},directives:[N.g,N.d,f.r,f.l,f.m,_.b,y.b,f.c,f.f,f.k,f.n,b.m,N.c,O.a,_.e,P.a,b.l,q.k],styles:[""]}),je),He=c("IJgu"),Le=c("znSr"),ze=["divMesa"],qe=function(t,e,n,a,o){return{disponible:t,ocupada:e,debaja:n,"call-center-ocupado":a,"call-center-disponible":o}},$e=((Ue=function(){function t(e,n){var a=this;l(this,t),this.snackBar=e,this.mesaSrvc=n,this.configuracion={mesa:0,area:0,numero:0,posx:0,posy:0,tamanio:48,estatus:1,ancho:null,alto:null,esmostrador:0,vertical:0,etiqueta:null,escallcenter:0},this.dontAllowDrag=!0,this.isDisabled=!1,this.onClickMesa=new L.o,this.urlImage="/assets/img/mesas/",this.ngAfterViewInit=function(){return a.objMesa=a.divMesa.nativeElement},this.clickMesa=function(){return a.onClickMesa.emit({mesaSelected:a.configuracion})},this.getAncho=function(){return a.configuracion.ancho&&+a.configuracion.ancho>0?a.configuracion.ancho:a.configuracion.tamanio},this.getAlto=function(){return a.configuracion.alto&&+a.configuracion.alto>0?a.configuracion.alto:a.configuracion.tamanio},this.dragEnded=function(t){var e=t.source.element.nativeElement,n=e.offsetParent.scrollHeight,o=t.distance,i={mesa:a.configuracion.mesa,area:a.configuracion.area,numero:a.configuracion.numero,posx:Math.abs(100*(e.offsetLeft+o.x)/e.offsetParent.scrollWidth),posy:Math.abs(100*(e.offsetTop+o.y)/n),tamanio:a.configuracion.tamanio,estatus:a.configuracion.estatus};a.mesaSrvc.save(i).subscribe(function(t){t.exito?t.mesa?(a.configuracion.mesa=t.mesa.mesa,a.snackBar.open("Mesa #".concat(t.mesa.numero," actualizada..."),"Dise\xf1o de \xe1rea",{duration:3e3})):a.snackBar.open("Mesa #".concat(a.configuracion.numero," actualizada..."),"Dise\xf1o de \xe1rea",{duration:3e3}):a.snackBar.open("ERROR:".concat(t.mensaje,"."),"Dise\xf1o de \xe1rea",{duration:3e3})})},this.moviendo=function(t){}}return d(t,[{key:"ngOnInit",value:function(){this.urlImage+=0==+this.configuracion.esmostrador?"table_03.svg":0==+this.configuracion.escallcenter?0==+this.configuracion.vertical?"mostrador_horizontal.svg":"mostrador_vertical.svg":"callcenter.svg"}}]),t}()).\u0275fac=function(t){return new(t||Ue)(L.Nb(M.a),L.Nb(Fe))},Ue.\u0275cmp=L.Hb({type:Ue,selectors:[["app-mesa"]],viewQuery:function(t,e){var n;1&t&&L.Ic(ze,1),2&t&&L.sc(n=L.cc())&&(e.divMesa=n.first)},inputs:{configuracion:"configuracion",dontAllowDrag:"dontAllowDrag",isDisabled:"isDisabled"},outputs:{onClickMesa:"onClickMesa"},decls:4,vars:20,consts:[["cdkDrag","","cdkDragBoundary",".areaPosicionamiento",1,"divMesa","mat-elevation-z6",3,"cdkDragDisabled","ngClass","cdkDragEnded","cdkDragMoved","click"],["divMesa",""]],template:function(t,e){1&t&&(L.Tb(0,"div",0,1),L.bc("cdkDragEnded",function(t){return e.dragEnded(t)})("cdkDragMoved",function(t){return e.moviendo(t)})("click",function(){return e.clickMesa()}),L.Tb(2,"span"),L.Dc(3),L.Sb(),L.Sb()),2&t&&(L.zc("width",e.getAncho(),"px")("height",e.getAlto(),"px")("left",e.configuracion.posx,"%")("top",e.configuracion.posy,"%")("background-image","url("+e.urlImage+")"),L.lc("cdkDragDisabled",e.dontAllowDrag)("ngClass",L.rc(14,qe,1==+e.configuracion.estatus&&0==+e.configuracion.debaja,2==+e.configuracion.estatus&&0==+e.configuracion.debaja,1==+e.configuracion.debaja,2==+e.configuracion.estatus&&1==+e.configuracion.escallcenter,1==+e.configuracion.estatus&&1==+e.configuracion.escallcenter)),L.Db("disabled",!!e.isDisabled||null),L.Cb(3),L.Ec(e.configuracion.etiqueta||e.configuracion.numero))},directives:[ee,b.k,Le.a],styles:[".divMesa[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:50%;position:absolute;text-align:right;padding-top:0;background-size:90% 90%}span[_ngcontent-%COMP%]{font-size:12pt;font-weight:700;text-shadow:-1px 0 #fff,0 1px #fff,1px 0 #fff,0 -1px #fff}.disponible[_ngcontent-%COMP%]{background-color:#90ee90}.ocupada[_ngcontent-%COMP%]{background-color:#da332d}.debaja[_ngcontent-%COMP%]{background-color:#000}.call-center-ocupado[_ngcontent-%COMP%]{background-color:#da332d;background-image:url(/assets/img/mesas/callcenter_alt.svg)}.call-center-disponible[_ngcontent-%COMP%]{background-color:#90ee90;background-image:url(/assets/img/mesas/callcenter.svg)}"]}),Ue);function We(t,e){if(1&t){var n=L.Ub();L.Tb(0,"app-mesa",11),L.bc("onClickMesa",function(t){return L.wc(n),L.fc().onClickMesa(t)})("contextmenu",function(t){L.wc(n);var a=e.$implicit;return L.fc().onContextMenu(t,a)}),L.Sb()}2&t&&L.lc("configuracion",e.$implicit)("dontAllowDrag",!1)}function Ge(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",16),L.bc("click",function(){L.wc(n);var t=L.fc().item;return L.fc().configurarMesa(t)}),L.Tb(1,"mat-icon",3),L.Dc(2,"settings"),L.Sb(),L.Dc(3,"Configuracion "),L.Sb()}}function Ve(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",17),L.bc("click",function(){L.wc(n);var t=L.fc().item;return L.fc().toggleDeBaja(t)}),L.Tb(1,"mat-icon",3),L.Dc(2,"thumb_down"),L.Sb(),L.Dc(3,"Dar de baja "),L.Sb()}if(2&t){var a=L.fc().item;L.lc("disabled",2==+a.estatus)}}function Qe(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",18),L.bc("click",function(){L.wc(n);var t=L.fc().item;return L.fc().toggleDeBaja(t,0)}),L.Tb(1,"mat-icon",3),L.Dc(2,"thumb_up"),L.Sb(),L.Dc(3,"Habilitar "),L.Sb()}if(2&t){var a=L.fc().item;L.lc("disabled",2==+a.estatus)}}function Je(t,e){if(1&t&&(L.Tb(0,"span",12),L.Dc(1),L.Sb(),L.Ob(2,"mat-divider"),L.Cc(3,Ge,4,0,"button",13),L.Cc(4,Ve,4,1,"button",14),L.Cc(5,Qe,4,1,"button",15)),2&t){var n=e.item;L.Cb(1),L.Gc("Mesa #",n.numero," (",n.mesa,")"),L.Cb(2),L.lc("ngIf",0==+n.debaja),L.Cb(1),L.lc("ngIf",0==+n.debaja),L.Cb(1),L.lc("ngIf",1==+n.debaja)}}var Xe,Ze=((Xe=function(){function t(e,n,a,o,i){var r=this;l(this,t),this.snackBar=e,this.mesaSrvc=n,this.dialogRef=a,this.dialog=o,this.data=i,this.mesas=[],this.contextMenuPosition={x:"0px",y:"0px"},this.getNextTableNumber=function(){return r.mesas.length>0?r.mesas.reduce(function(t,e){return+e.numero>t?+e.numero:t},r.mesas[0].numero?+r.mesas[0].numero:0)+1:1},this.addTable=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:72,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:72,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;r.mesas.push({mesa:null,area:r.data.area,numero:r.getNextTableNumber(),posx:1,posy:1,tamanio:72,estatus:1,ancho:t,alto:e,esmostrador:n,vertical:a,escallcenter:o}),r.saveNewMesa(r.mesas[r.mesas.length-1],r.mesas.length-1)},this.addMostrador=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return r.addTable(t?72:144,t?144:72,1,t?1:0)},this.addCallCenter=function(){return r.addTable(72,72,1,0,1)},this.saveNewMesa=function(t,e){r.mesaSrvc.save(t).subscribe(function(t){t.exito?t.mesa&&(r.mesas[e]=t.mesa):r.snackBar.open("ERROR: ".concat(t.mensaje),"Mesa",{duration:7e3})})},this.onClickMesa=function(t){},this.terminar=function(){return r.dialogRef.close(r.mesas)},this.configurarMesa=function(t){r.dialog.open(Be,{width:"50%",data:{mesa:t}}).afterClosed().subscribe(function(t){})},this.toggleDeBaja=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;r.dialog.open(He.a,{maxWidth:"400px",data:new He.b(0==+t.esmostrador?"Mesa":"Mostrador","\xbfSeguro que desea ".concat(1===e?"dar de baja":"habilitar"," ").concat(0==+t.esmostrador?"la mesa":"el mostrador"," #").concat(t.numero,"?"),"S\xed","No")}).afterClosed().subscribe(function(n){n&&(t.debaja=e,r.mesaSrvc.save(t).subscribe(function(t){if(t.exito){if(t.mesa){var e=r.mesas.findIndex(function(e){return+e.mesa==+t.mesa.mesa});e>-1&&(r.mesas[e]=t.mesa),r.snackBar.open(t.mensaje,"Mesa",{duration:3e3})}}else r.snackBar.open("ERROR: ".concat(t.mensaje),"Mesa",{duration:7e3})}))})}}return d(t,[{key:"ngOnInit",value:function(){this.mesas=this.data.mesas}},{key:"onContextMenu",value:function(t,e){t.preventDefault(),this.contextMenuPosition.x=t.clientX+"px",this.contextMenuPosition.y=t.clientY+"px",this.contextMenu.menuData={item:e},this.contextMenu.menu.focusFirstItem("mouse"),this.contextMenu.openMenu()}}]),t}()).\u0275fac=function(t){return new(t||Xe)(L.Nb(M.a),L.Nb(Fe),L.Nb(N.f),L.Nb(N.b),L.Nb(N.a))},Xe.\u0275cmp=L.Hb({type:Xe,selectors:[["app-area-designer"]],viewQuery:function(t,e){var n;1&t&&L.Ic(F.e,1),2&t&&L.sc(n=L.cc())&&(e.contextMenu=n.first)},decls:27,vars:6,consts:[[1,"diseniador"],["align","center",2,"height","55px"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"click"],[1,"btnIconSize"],["mat-raised-button","","type","button","color","accent",3,"click"],[2,"height","5px","width","100%"],["id","divAreaPosicionamiento",1,"areaPosicionamiento"],[3,"configuracion","dontAllowDrag","onClickMesa","contextmenu",4,"ngFor","ngForOf"],[2,"visibility","hidden","position","fixed",3,"matMenuTriggerFor"],["contextMenu","matMenu"],["matMenuContent",""],[3,"configuracion","dontAllowDrag","onClickMesa","contextmenu"],["mat-menu-item","","disableRipple","true",1,"mesaTitle"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","","class","customize",3,"disabled","click",4,"ngIf"],["mat-menu-item","","class","customizeUp",3,"disabled","click",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-menu-item","",1,"customize",3,"disabled","click"],["mat-menu-item","",1,"customizeUp",3,"disabled","click"]],template:function(t,e){if(1&t&&(L.Tb(0,"div",0),L.Tb(1,"div",1),L.Tb(2,"button",2),L.bc("click",function(){return e.addTable()}),L.Tb(3,"mat-icon",3),L.Dc(4,"add"),L.Sb(),L.Dc(5,"\xa0Mesa "),L.Sb(),L.Tb(6,"button",2),L.bc("click",function(){return e.addMostrador()}),L.Tb(7,"mat-icon",3),L.Dc(8,"add"),L.Sb(),L.Dc(9,"\xa0Mostrador "),L.Sb(),L.Tb(10,"button",2),L.bc("click",function(){return e.addMostrador(!0)}),L.Tb(11,"mat-icon",3),L.Dc(12,"add"),L.Sb(),L.Dc(13,"\xa0Mostrador vertical "),L.Sb(),L.Tb(14,"button",2),L.bc("click",function(){return e.addCallCenter()}),L.Tb(15,"mat-icon",3),L.Dc(16,"add"),L.Sb(),L.Dc(17,"\xa0Call center "),L.Sb(),L.Tb(18,"button",4),L.bc("click",function(){return e.terminar()}),L.Dc(19," Terminar "),L.Sb(),L.Sb(),L.Ob(20,"div",5),L.Tb(21,"div",6),L.Cc(22,We,1,2,"app-mesa",7),L.Sb(),L.Ob(23,"div",8),L.Tb(24,"mat-menu",null,9),L.Cc(26,Je,6,5,"ng-template",10),L.Sb(),L.Sb()),2&t){var n=L.tc(25);L.Cb(22),L.lc("ngForOf",e.mesas),L.Cb(1),L.zc("left",e.contextMenuPosition.x)("top",e.contextMenuPosition.y),L.lc("matMenuTriggerFor",n)}},directives:[O.a,T.a,b.l,F.e,F.a,F.b,$e,F.c,k.a,b.m],styles:[".diseniador[_ngcontent-%COMP%]{width:750px;height:650px}.areaPosicionamiento[_ngcontent-%COMP%], .diseniador[_ngcontent-%COMP%]{overflow:hidden!important;padding:0!important}.areaPosicionamiento[_ngcontent-%COMP%]{width:100%;height:600px;background-color:hsla(0,0%,78%,.28627450980392155);position:relative}.btnIconSize[_ngcontent-%COMP%]{font-size:17pt!important}  .customize{background:#ffffe0}  .customizeUp{background:#90ee90}.mesaTitle[_ngcontent-%COMP%]{font-weight:700}"]}),Xe);function Ke(t,e){if(1&t){var n=L.Ub();L.Tb(0,"mat-form-field",4),L.Tb(1,"input",13),L.bc("ngModelChange",function(t){return L.wc(n),L.fc().entidad.nombre=t}),L.Sb(),L.Sb()}if(2&t){var a=L.fc();L.Cb(1),L.lc("ngModel",a.entidad.nombre)}}function Ye(t,e){if(1&t&&(L.Tb(0,"mat-option",14),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n.area),L.Cb(1),L.Fc(" ",n.nombre," ")}}function tn(t,e){if(1&t&&(L.Tb(0,"mat-option",14),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n.impresora),L.Cb(1),L.Fc(" ",n.nombre," ")}}function en(t,e){if(1&t&&(L.Tb(0,"mat-option",14),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n.impresora),L.Cb(1),L.Fc(" ",n.nombre," ")}}function nn(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",15),L.bc("click",function(){return L.wc(n),L.fc().openDesigner()}),L.Dc(1," Dise\xf1ar "),L.Sb()}}function an(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",16),L.bc("click",function(){return L.wc(n),L.fc().resetEntidad()}),L.Dc(1," Nuevo "),L.Sb()}}var on,rn,cn=((on=function(){function t(e,n,a,o,i){var r=this;l(this,t),this.snackBar=e,this.dialog=n,this.entidadSrvc=a,this.impresoraSrvc=o,this.ls=i,this.entidadSavedEv=new L.o,this.sedeUsr=0,this.lstAreas=[],this.esMovil=!1,this.impresoras=[],this.loadAreas=function(){return r.entidadSrvc.get({sede:r.sedeUsr,debaja:1}).subscribe(function(t){return r.lstAreas=t})},this.loadImpresoras=function(){return r.impresoraSrvc.get().subscribe(function(t){return r.impresoras=t})},this.resetEntidad=function(){return r.entidad={area:null,sede:r.sedeUsr,nombre:null,mesas:[],impresora_factura:null,impresora:null}},this.onSubmit=function(){r.entidadSrvc.save(r.entidad).subscribe(function(t){t.exito?(r.snackBar.open("".concat(t.mensaje),"\xc1rea",{duration:3e3}),r.resetEntidad(),r.loadAreas(),r.entidadSavedEv.emit()):r.snackBar.open("ERROR: ".concat(t.mensaje),"\xc1rea",{duration:3e3})})},this.openDesigner=function(){r.dialog.open(Ze,{width:"800px",disableClose:!1,data:{area:+r.entidad.area,mesas:r.entidad.mesas||[]}}).afterClosed().subscribe(function(t){t&&(r.entidadSavedEv.emit(),r.entidadSrvc.get({area:+r.entidad.area,debaja:1}).subscribe(function(t){t&&t.length>0&&(r.entidad=t[0])}))})}}return d(t,[{key:"ngOnInit",value:function(){this.sedeUsr=this.ls.get(Te.a.usrTokenVar).sede||0,this.esMovil=this.ls.get(Te.a.usrTokenVar).enmovil||!1,this.resetEntidad(),this.loadAreas(),this.loadImpresoras()}}]),t}()).\u0275fac=function(t){return new(t||on)(L.Nb(M.a),L.Nb(N.b),L.Nb(we),L.Nb(Ie.a),L.Nb(Ee.a))},on.\u0275cmp=L.Hb({type:on,selectors:[["app-form-area"]],inputs:{entidad:"entidad"},outputs:{entidadSavedEv:"entidadSavedEv"},decls:30,vars:11,consts:[[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmEntidad","ngForm"],["class","fullWidth",4,"ngIf"],[1,"fullWidth"],["name","area_padre",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","impresora","required","",3,"ngModel","ngModelChange"],["name","impresora_factura",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["type","text","matInput","","placeholder","Nombre","name","nombre","required","",3,"ngModel","ngModelChange"],[3,"value"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"click"],["mat-raised-button","","type","button","color","accent",3,"click"]],template:function(t,e){if(1&t){var n=L.Ub();L.Tb(0,"mat-card",0),L.Tb(1,"mat-card-title"),L.Tb(2,"h4"),L.Dc(3,"\xc1rea"),L.Sb(),L.Sb(),L.Tb(4,"mat-card-content"),L.Tb(5,"form",1,2),L.bc("ngSubmit",function(){return L.wc(n),L.tc(6).form.valid&&e.onSubmit()}),L.Cc(7,Ke,2,1,"mat-form-field",3),L.Tb(8,"mat-form-field",4),L.Tb(9,"mat-label"),L.Dc(10,"\xc1rea padre"),L.Sb(),L.Tb(11,"mat-select",5),L.bc("ngModelChange",function(t){return e.entidad.area_padre=t}),L.Cc(12,Ye,2,2,"mat-option",6),L.Sb(),L.Sb(),L.Tb(13,"mat-form-field",4),L.Tb(14,"mat-label"),L.Dc(15,"Impresora"),L.Sb(),L.Tb(16,"mat-select",7),L.bc("ngModelChange",function(t){return e.entidad.impresora=t}),L.Cc(17,tn,2,2,"mat-option",6),L.Sb(),L.Sb(),L.Tb(18,"mat-form-field",4),L.Tb(19,"mat-label"),L.Dc(20,"Impresora de factura"),L.Sb(),L.Tb(21,"mat-select",8),L.bc("ngModelChange",function(t){return e.entidad.impresora_factura=t}),L.Cc(22,en,2,2,"mat-option",6),L.Sb(),L.Sb(),L.Tb(23,"h5"),L.Dc(24),L.Sb(),L.Tb(25,"div",9),L.Tb(26,"button",10),L.Dc(27," Guardar "),L.Sb(),L.Cc(28,nn,2,0,"button",11),L.Cc(29,an,2,0,"button",12),L.Sb(),L.Sb(),L.Sb(),L.Sb()}if(2&t){var a=L.tc(6);L.Cb(7),L.lc("ngIf",e.esMovil),L.Cb(4),L.lc("ngModel",e.entidad.area_padre),L.Cb(1),L.lc("ngForOf",e.lstAreas),L.Cb(4),L.lc("ngModel",e.entidad.impresora),L.Cb(1),L.lc("ngForOf",e.impresoras),L.Cb(4),L.lc("ngModel",e.entidad.impresora_factura),L.Cb(1),L.lc("ngForOf",e.impresoras),L.Cb(2),L.Fc("Mesas en el \xe1rea: ",e.entidad.mesas.length,""),L.Cb(2),L.lc("disabled",!a.form.valid),L.Cb(2),L.lc("ngIf",e.entidad.area),L.Cb(1),L.lc("ngIf",e.entidad.area)}},directives:[D.a,D.h,D.c,f.r,f.l,f.m,b.m,_.b,_.e,P.a,f.k,f.n,b.l,f.p,O.a,y.b,f.c,q.k],styles:[".full-width[_ngcontent-%COMP%]{width:100%}"]}),on),sn=["listaAreas"],ln=((rn=function(){function t(){var e=this;l(this,t),this.setArea=function(t){return e.area=t},this.refreshAreaList=function(){e.lstAreasComponent.loadEntidades()},this.area={area:null,sede:null,nombre:null,impresora:null,impresora_factura:null}}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||rn)},rn.\u0275cmp=L.Hb({type:rn,selectors:[["app-area"]],viewQuery:function(t,e){var n;1&t&&L.Ic(sn,1),2&t&&L.sc(n=L.cc())&&(e.lstAreasComponent=n.first)},decls:6,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getEntidadEv"],["listaAreas",""],[1,"col","m7","s12"],[3,"entidad","entidadSavedEv"]],template:function(t,e){1&t&&(L.Tb(0,"div",0),L.Tb(1,"div",1),L.Tb(2,"app-lista-area",2,3),L.bc("getEntidadEv",function(t){return e.setArea(t)}),L.Sb(),L.Sb(),L.Tb(4,"div",4),L.Tb(5,"app-form-area",5),L.bc("entidadSavedEv",function(){return e.refreshAreaList()}),L.Sb(),L.Sb(),L.Sb()),2&t&&(L.Cb(5),L.lc("entidad",e.area))},directives:[Re,cn],styles:[""]}),rn),un=c("u01r"),dn=c("M8s9");function bn(t,e){if(1&t){var n=L.Ub();L.Tb(0,"tr"),L.Tb(1,"td"),L.Dc(2),L.Sb(),L.Tb(3,"td",9),L.Tb(4,"button",10),L.bc("click",function(){L.wc(n);var t=e.$implicit;return L.fc(2).seleccionarCliente(t)}),L.Dc(5," Seleccionar "),L.Sb(),L.Sb(),L.Sb()}if(2&t){var a=e.$implicit;L.Cb(2),L.Ec(a.nombre)}}function mn(t,e){if(1&t&&(L.Tb(0,"table"),L.Tb(1,"thead"),L.Tb(2,"tr"),L.Tb(3,"td"),L.Dc(4,"\xbfQui\xe9n est\xe1 llamando?"),L.Sb(),L.Ob(5,"td"),L.Sb(),L.Sb(),L.Tb(6,"tbody"),L.Cc(7,bn,6,1,"tr",8),L.Sb(),L.Sb()),2&t){var n=L.fc();L.Cb(7),L.lc("ngForOf",n.clientes)}}var fn,pn=function(){return{standalone:!0}},hn=((fn=function(){function t(e,n,a,o,i){var r=this;l(this,t),this.dialogRef=e,this.snackBar=n,this.data=a,this.clienteSrvc=o,this.dialog=i,this.telefonoPedido=null,this.clientes=[],this.validateKey=function(t){var e=String.fromCharCode(t.keyCode);return!!/[0-9]/.test(e)||(t.preventDefault(),!1)},this.cancelar=function(){return r.dialogRef.close()},this.buscar=function(){r.telefonoPedido&&r.telefonoPedido.length>=8?r.clienteSrvc.get({telefono:r.telefonoPedido}).subscribe(function(t){t&&t.length>0?r.clientes=t:r.dialog.open(un.a,{width:"50%",disableClose:!0,data:{cliente:{cliente:null,nombre:null,nit:null,telefono:r.telefonoPedido}}}).afterClosed().subscribe(function(t){(null==t?void 0:t.cliente)&&r.dialogRef.close(t)})}):r.snackBar.open("Favor ingresar un n\xfamero de tel\xe9fono v\xe1lido.","Pedido",{duration:5e3})},this.seleccionarCliente=function(t){r.dialogRef.close(t)}}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||fn)(L.Nb(N.f),L.Nb(M.a),L.Nb(N.a),L.Nb(dn.a),L.Nb(N.b))},fn.\u0275cmp=L.Hb({type:fn,selectors:[["app-pide-telefono-dialog"]],decls:11,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"fullWidth"],["matInput","","type","text","placeholder","Tel\xe9fono","minlength","8","maxlength","25","required","",3,"ngModel","ngModelOptions","keypress","ngModelChange"],[4,"ngIf"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[4,"ngFor","ngForOf"],["align","center",2,"width","15%"],["mat-raised-button","","type","button","color","accent",3,"click"]],template:function(t,e){1&t&&(L.Tb(0,"h1",0),L.Dc(1,"Tel\xe9fono"),L.Sb(),L.Tb(2,"div",1),L.Tb(3,"mat-form-field",2),L.Tb(4,"input",3),L.bc("keypress",function(t){return e.validateKey(t)})("ngModelChange",function(t){return e.telefonoPedido=t}),L.Sb(),L.Sb(),L.Cc(5,mn,8,1,"table",4),L.Sb(),L.Tb(6,"div",5),L.Tb(7,"button",6),L.bc("click",function(){return e.cancelar()}),L.Dc(8," Cancelar "),L.Sb(),L.Tb(9,"button",7),L.bc("click",function(){return e.buscar()}),L.Dc(10," Buscar "),L.Sb(),L.Sb()),2&t&&(L.Cb(4),L.lc("ngModel",e.telefonoPedido)("ngModelOptions",L.nc(4,pn)),L.Cb(1),L.lc("ngIf",e.clientes.length>0),L.Cb(4),L.lc("disabled",!(e.telefonoPedido&&e.telefonoPedido.length>=8)))},directives:[N.g,N.d,_.b,y.b,f.c,f.g,f.f,f.p,f.k,f.n,b.m,N.c,O.a,b.l],styles:[""]}),fn);function gn(t,e){1&t&&(L.Tb(0,"th",12),L.Dc(1,"No."),L.Sb())}function vn(t,e){if(1&t&&(L.Tb(0,"td",13),L.Tb(1,"span"),L.Dc(2),L.Sb(),L.Sb()),2&t){var n=e.$implicit;L.Cb(2),L.Ec(n.numero)}}function Cn(t,e){1&t&&(L.Tb(0,"th",12),L.Dc(1,"Nombre"),L.Sb())}function Sn(t,e){if(1&t){var n=L.Ub();L.Tb(0,"mat-form-field",15),L.Tb(1,"input",16),L.bc("ngModelChange",function(t){return L.wc(n),L.fc().$implicit.nombre=t}),L.Sb(),L.Tb(2,"button",17),L.bc("click",function(){L.wc(n);var t=L.fc().$implicit;return L.fc().eliminarFila(t)}),L.Tb(3,"mat-icon",18),L.Dc(4,"close"),L.Sb(),L.Sb(),L.Sb()}if(2&t){var a=L.fc().$implicit;L.Cb(1),L.lc("ngModel",a.nombre)}}function Tn(t,e){if(1&t&&(L.Tb(0,"td",13),L.Cc(1,Sn,5,1,"mat-form-field",14),L.Sb()),2&t){var n=L.fc();L.Cb(1),L.lc("ngIf",n.esMovil)}}function _n(t,e){1&t&&L.Ob(0,"tr",19)}function yn(t,e){1&t&&L.Ob(0,"tr",20)}var Dn,kn=((Dn=function(){function t(e,n,a,o){var i=this;l(this,t),this.dialogRef=e,this.data=n,this.snackBar=a,this.ls=o,this.displayedColumns=["numero","nombre"],this.esMovil=!1,this.terminar=function(){var t=i.todosConNombre(i.data.cuentas);t<0?i.dialogRef.close(i.data.cuentas):i.snackBar.open("Favor ingresar nombre a la cuenta #".concat(i.data.cuentas[t].cuenta,"..."),"Cuentas",{duration:5e3})},this.setTableDataSource=function(){return i.dataSource=new E.k(i.data.cuentas)},this.eliminarFila=function(t){var e=i.data.cuentas.findIndex(function(e){return+e.numero==+t.numero});e>0?(i.data.cuentas.splice(e,1),i.data.cuentas.map(function(t,e){return t.numero=e+1}),i.dataSource.data=i.data.cuentas):console.log("No se encuentra esta cuenta...")}}return d(t,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(Te.a.usrTokenVar).enmovil||!1,this.setTableDataSource();for(var t=0;t<+this.data.comensales-1;t++)this.agregarFila()}},{key:"todosConNombre",value:function(t){for(var e=0;e<t.length;e++)if(!t[e].nombre)return e;return-1}},{key:"agregarFila",value:function(){this.data.cuentas.push({cuenta:0,numero:this.data.cuentas.length+1,nombre:null,productos:[]}),this.dataSource.data=this.data.cuentas}}]),t}()).\u0275fac=function(t){return new(t||Dn)(L.Nb(N.f),L.Nb(N.a),L.Nb(M.a),L.Nb(Ee.a))},Dn.\u0275cmp=L.Hb({type:Dn,selectors:[["app-pide-datos-cuentas"]],decls:18,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-table","",1,"fullWidth",3,"dataSource"],["tblCuentas",""],["matColumnDef","numero"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-header-cell",""],["mat-cell",""],["class","fullWidth",4,"ngIf"],[1,"fullWidth"],["type","text","matInput","","name","nombre","required","",3,"ngModel","ngModelChange"],["type","button","mat-button","","matSuffix","","mat-icon-button","",3,"click"],[1,"iconFontSize"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(L.Tb(0,"h1",0),L.Dc(1,"Ingreso de datos de cuentas"),L.Sb(),L.Tb(2,"div",1),L.Tb(3,"table",2,3),L.Rb(5,4),L.Cc(6,gn,2,0,"th",5),L.Cc(7,vn,3,1,"td",6),L.Qb(),L.Rb(8,7),L.Cc(9,Cn,2,0,"th",5),L.Cc(10,Tn,2,1,"td",6),L.Qb(),L.Cc(11,_n,1,0,"tr",8),L.Cc(12,yn,1,0,"tr",9),L.Sb(),L.Sb(),L.Tb(13,"div",10),L.Tb(14,"button",11),L.bc("click",function(){return e.agregarFila()}),L.Dc(15," Agregar "),L.Sb(),L.Tb(16,"button",11),L.bc("click",function(){return e.terminar()}),L.Dc(17," Terminar "),L.Sb(),L.Sb()),2&t&&(L.Cb(3),L.lc("dataSource",e.dataSource),L.Cb(8),L.lc("matHeaderRowDef",e.displayedColumns),L.Cb(1),L.lc("matRowDefColumns",e.displayedColumns),L.Cb(2),L.lc("disabled",e.data.cuentas.length===+e.data.comensales),L.Cb(2),L.lc("disabled",e.data.cuentas.length!==+e.data.comensales))},directives:[N.g,N.d,E.j,E.c,E.e,E.b,E.g,E.i,N.c,O.a,E.d,E.a,b.m,_.b,y.b,f.c,f.p,f.k,f.n,_.f,T.a,E.f,E.h],styles:[".fullWidth[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:34pt!important}"]}),Dn),wn=c("K9lQ");function En(t,e){if(1&t&&(L.Tb(0,"mat-option",12),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n.usuario.usuario),L.Cb(1),L.Gc(" ",n.usuario.nombres," ",n.usuario.apellidos," ")}}function Pn(t,e){if(1&t){var n=L.Ub();L.Tb(0,"mat-form-field",3),L.Tb(1,"input",13),L.bc("ngModelChange",function(t){return L.wc(n),L.fc().data.comensales=t}),L.Sb(),L.Sb()}if(2&t){var a=L.fc();L.Cb(1),L.lc("ngModel",a.data.comensales)}}var xn,On=((xn=function(){function t(e,n,a,o,i){var r=this;l(this,t),this.dialogRef=e,this.data=n,this.dialogDatosCuentas=a,this.usuarioSrvc=o,this.ls=i,this.lstMeseros=[],this.esMovil=!1,this.loadMeseros=function(){r.usuarioSrvc.getMeserosTurno().subscribe(function(t){t&&(r.lstMeseros=t)})},this.toNumber=function(t){return+t}}return d(t,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(Te.a.usrTokenVar).enmovil||!1,this.loadMeseros()}},{key:"pedirDatosDeCuentas",value:function(t){var e=this;this.dialogDatosCuentas.open(kn,{width:"50%",disableClose:!0,data:{cuentas:t.cuentas,comensales:this.data.comensales}}).afterClosed().subscribe(function(n){t.cuentas=n,e.dialogRef.close(t)})}},{key:"terminar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?t.dividirCuentasPorSillas?this.pedirDatosDeCuentas(t):this.dialogRef.close(t):this.dialogRef.close()}}]),t}()).\u0275fac=function(t){return new(t||xn)(L.Nb(N.f),L.Nb(N.a),L.Nb(N.b),L.Nb(wn.a),L.Nb(Ee.a))},xn.\u0275cmp=L.Hb({type:xn,selectors:[["app-abrir-mesa"]],decls:20,vars:7,consts:[["mat-dialog-title",""],["novalidate","",3,"ngSubmit"],["frmAbrirMesa","ngForm"],[1,"separatorMargin"],["name","mesero",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","separatorMargin",4,"ngIf"],["name","esEvento",1,"separatorMargin",3,"ngModel","ngModelChange"],["name","dividirCuentasPorSillas",1,"separatorMargin",3,"ngModel","disabled","ngModelChange"],["align","end"],["mat-raised-button","","color","secondary",1,"btnAccion",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],[3,"value"],["type","text","matInput","","placeholder","# Comensales","name","comensales","required","",3,"ngModel","ngModelChange"]],template:function(t,e){if(1&t){var n=L.Ub();L.Tb(0,"h1",0),L.Dc(1,"Abrir mesa"),L.Sb(),L.Tb(2,"mat-dialog-content"),L.Tb(3,"form",1,2),L.bc("ngSubmit",function(){return L.wc(n),L.tc(4).form.valid}),L.Tb(5,"mat-form-field",3),L.Tb(6,"mat-label"),L.Dc(7,"Mesero"),L.Sb(),L.Tb(8,"mat-select",4),L.bc("ngModelChange",function(t){return e.data.mesero=t}),L.Cc(9,En,2,3,"mat-option",5),L.Sb(),L.Sb(),L.Cc(10,Pn,2,1,"mat-form-field",6),L.Tb(11,"mat-checkbox",7),L.bc("ngModelChange",function(t){return+(e.data.esEvento=t)}),L.Dc(12,"\xbfEs evento?"),L.Sb(),L.Tb(13,"mat-checkbox",8),L.bc("ngModelChange",function(t){return+(e.data.dividirCuentasPorSillas=t)}),L.Dc(14,"\xbfDividir cuentas?"),L.Sb(),L.Sb(),L.Sb(),L.Tb(15,"mat-dialog-actions",9),L.Tb(16,"button",10),L.bc("click",function(){return e.terminar()}),L.Dc(17," Cancelar "),L.Sb(),L.Tb(18,"button",11),L.bc("click",function(){return e.terminar(e.data)}),L.Dc(19," Abrir mesa "),L.Sb(),L.Sb()}if(2&t){var a=L.tc(4);L.Cb(8),L.lc("ngModel",e.data.mesero),L.Cb(1),L.lc("ngForOf",e.lstMeseros),L.Cb(1),L.lc("ngIf",e.esMovil),L.Cb(1),L.lc("ngModel",+e.data.esEvento),L.Cb(2),L.lc("ngModel",+e.data.dividirCuentasPorSillas)("disabled",+e.data.comensales<=1),L.Cb(5),L.lc("disabled",!a.form.valid)}},directives:[N.g,N.d,f.r,f.l,f.m,_.b,_.e,P.a,f.k,f.n,b.l,b.m,x.a,N.c,O.a,q.k,y.b,f.c,f.p],styles:[".contenido[_ngcontent-%COMP%]{height:50%!important}.separatorMargin[_ngcontent-%COMP%]{margin-right:8px}"]}),xn),Mn=c("NGYs"),Rn=c("XiUz");function Fn(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",13),L.bc("click",function(){L.wc(n);var t=e.$implicit;return L.fc().setSelectedCuenta(t.numero)}),L.Dc(1),L.Sb()}if(2&t){var a=e.$implicit;L.lc("disabled",1==+a.cerrada),L.Cb(1),L.Fc(" ",a.nombre," ")}}function In(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",15),L.bc("click",function(){L.wc(n);var t=L.fc().$implicit;return L.fc().loadSubcategorias(t)}),L.Dc(1),L.Sb()}if(2&t){var a=L.fc().$implicit;L.Cb(1),L.Fc(" ",a.descripcion," ")}}function An(t,e){if(1&t&&(L.Rb(0),L.Cc(1,In,2,1,"button",14),L.Qb()),2&t){var n=e.$implicit;L.Cb(1),L.lc("ngIf",n.mostrarEnPos)}}function Nn(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",18),L.bc("click",function(){L.wc(n);var t=e.$implicit,a=L.fc().index;return L.fc().loadSubcategorias({categoria:t.categoria},t,a)}),L.Dc(1),L.Sb()}if(2&t){var a=e.$implicit;L.Cb(1),L.Fc(" ",a.descripcion," ")}}function jn(t,e){if(1&t&&(L.Tb(0,"div",16),L.Cc(1,Nn,2,1,"button",17),L.Sb()),2&t){var n=e.$implicit;L.Cb(1),L.lc("ngForOf",n)}}function Un(t,e){if(1&t&&(L.Tb(0,"div",19),L.Tb(1,"mat-card",20),L.Tb(2,"mat-card-content"),L.Tb(3,"p"),L.Dc(4),L.Sb(),L.Sb(),L.Tb(5,"mat-card-actions",21),L.Tb(6,"span",22),L.Dc(7,"Por comandar"),L.Sb(),L.Tb(8,"span",22),L.Dc(9,"Comandados"),L.Sb(),L.Sb(),L.Sb(),L.Sb()),2&t){var n=e.$implicit;L.Cb(4),L.Ec(n.descripcion)}}var Bn,Hn,Ln=((Hn=function(){function t(e,n,a){var o=this;l(this,t),this.dialogRef=e,this.data=n,this.articuloSrvc=a,this.categorias=[],this.subCategorias=[],this.listaSubCategorias=[],this.articulos=[],this.setDatos=function(){o.data&&o.data.mesa&&(o.mesaEnUso=o.data.mesa)},this.cerrar=function(){return o.dialogRef.close()},this.resetArticulos=function(){return o.articulos=[]},this.resetListaSubCategorias=function(){return o.listaSubCategorias=[]},this.loadCategorias=function(){return o.articuloSrvc.getCategorias().subscribe(function(t){return o.categorias=t})},this.loadSubcategorias=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;o.resetArticulos();var a={categoria:t.categoria};e?a.categoria_grupo_grupo=e.categoria_grupo:o.resetListaSubCategorias(),o.listaSubCategorias.length>0&&o.listaSubCategorias.splice(n+1),o.articuloSrvc.getCategoriaGrupoImpresora(a).subscribe(function(t){t.length>0?o.listaSubCategorias.push(t):o.loadArticulos(e.categoria_grupo)})},this.loadArticulos=function(t){o.articuloSrvc.getArticulos({categoria_grupo:t}).subscribe(function(t){console.log(t),o.articulos=t})},this.setSelectedCuenta=function(t){},this.setDatos()}return d(t,[{key:"ngOnInit",value:function(){this.loadCategorias()}}]),t}()).\u0275fac=function(t){return new(t||Hn)(L.Nb(N.f),L.Nb(N.a),L.Nb(Mn.a))},Hn.\u0275cmp=L.Hb({type:Hn,selectors:[["app-tran-comanda-alt"]],decls:16,vars:7,consts:[["fxLayout","row","fxLayout.xs","column"],["fxFlex","50%","fxFelx.xs","100%","fxLayoutAlign","start start"],[1,"bld",2,"font-size","16pt","margin-left","10px"],["fxFlex","50%","fxFelx.xs","100%","fxLayoutAlign","end start"],["mat-raised-button","","type","button","color","accent",2,"margin-left","8px",3,"click"],["mat-dialog-content","",1,"contenido","bordeTest"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","center center"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"disabled","click",4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","start center"],[4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","start center","class","divSubCategorias",4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayoutGap","8px grid",1,"divArticulos"],["fxFlex","20%","fxFlex.xs","100%","fxFlex.sm","33%","fxFlex.md","25%",4,"ngFor","ngForOf"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"click"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","start center",1,"divSubCategorias"],["mat-raised-button","","type","button","color","warn","class","btnAccion",3,"click",4,"ngFor","ngForOf"],["mat-raised-button","","type","button","color","warn",1,"btnAccion",3,"click"],["fxFlex","20%","fxFlex.xs","100%","fxFlex.sm","33%","fxFlex.md","25%"],[1,"mat-elevation-z4"],["align","around"],["matBadge","4","matBadgeOverlap","false"]],template:function(t,e){1&t&&(L.Tb(0,"div",0),L.Tb(1,"div",1),L.Tb(2,"span",2),L.Dc(3),L.Sb(),L.Sb(),L.Tb(4,"div",3),L.Tb(5,"button",4),L.bc("click",function(){return e.cerrar()}),L.Dc(6," Cerrar "),L.Sb(),L.Sb(),L.Sb(),L.Tb(7,"div",5),L.Tb(8,"div",6),L.Cc(9,Fn,2,2,"button",7),L.Sb(),L.Tb(10,"div",8),L.Cc(11,An,2,1,"ng-container",9),L.Sb(),L.Ob(12,"mat-divider"),L.Cc(13,jn,2,1,"div",10),L.Tb(14,"div",11),L.Cc(15,Un,10,1,"div",12),L.Sb(),L.Sb()),2&t&&(L.Cb(3),L.Hc(" ",e.mesaEnUso.mesa.area.nombre," - Mesa",e.mesaEnUso.mesa.numero," - Comanda ",e.mesaEnUso.comanda," "),L.Cb(6),L.lc("ngForOf",e.mesaEnUso.cuentas),L.Cb(2),L.lc("ngForOf",e.categorias),L.Cb(2),L.lc("ngForOf",e.listaSubCategorias),L.Cb(2),L.lc("ngForOf",e.articulos))},directives:[Rn.c,Rn.a,Rn.b,O.a,N.d,b.l,k.a,Rn.d,b.m,D.a,D.c,D.b,me],styles:[".contenido[_ngcontent-%COMP%]{max-height:85vh!important;height:100%}.lnkCategorias[_ngcontent-%COMP%]{margin-right:8px;text-decoration:underline}.divSubCategorias[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0;padding-top:2px;padding-bottom:2px}.divArticulos[_ngcontent-%COMP%]{padding:16px}.divArticulos[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]{width:200px}"]}),Hn),zn=((Bn=function(){function t(e){l(this,t),this.http=e,this.moduleUrl="comanda",this.srvcErrHndl=new _e.a}return d(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/buscar?").concat(ke.stringify(t))).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"getComandaDeMesa",value:function(t){return this.http.get("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/get_comanda/").concat(t)).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(t){return this.http.post("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/guardar").concat(t.comanda?"/"+t.comanda:""),t).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"enviarPedido",value:function(t,e){return this.http.post("".concat(Te.a.urlAppRestaurante,"/callcenter/guardar_pedido/").concat(t),e).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"saveDetalleCombo",value:function(t,e,n){return this.http.post("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/guardar_detalle_combo/").concat(t,"/").concat(e),n).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"saveNotasGenerales",value:function(t){return this.http.post("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/guardar_notas_generales/").concat(t.comanda),t).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"saveNotasProducto",value:function(t){return this.http.post("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/guardar_notas_producto/").concat(t.detalle_comanda),t).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"saveDetalle",value:function(t,e,n){return this.http.post("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/guardar_detalle/").concat(t,"/").concat(e),n).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"setProductoImpreso",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.http.get("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/imprimir/").concat(t)).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"cerrarMesa",value:function(t){return this.http.post("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/cerrar_mesa/").concat(t),null).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"getComandasOnLIne",value:function(){return this.http.get("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/get_comanda")).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"validaPwdGerenteTurno",value:function(t){return this.http.post("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/validapwdgerenteturno"),{pwd:t}).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"cerrarEstacion",value:function(t){return this.http.get("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/cerrar_estacion/").concat(t)).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"getCuenta",value:function(t){return this.http.get("".concat(Te.a.urlAppRestaurante,"/cuenta/get_cuenta/").concat(t)).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"unificarCuentas",value:function(t,e){return this.http.get("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/unir_cuentas/").concat(t,"/").concat(e)).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"trasladarMesa",value:function(t,e,n){return this.http.get("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/trasladar_mesa/").concat(t,"/").concat(e,"/").concat(n)).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"getComandasCocina",value:function(){return this.http.get("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/get_comanda_cocina")).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"setComandaCocinada",value:function(t,e){return this.http.post("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/set_cocinado/").concat(t),e).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"distribuirCuentas",value:function(t){return this.http.post("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/distribuir_cuentas"),t).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"cancelarPedido",value:function(t,e){return this.http.post("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/anular_pedido/").concat(t),e).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"getComandasOnLine_Test",value:function(){return[{comanda:37,total:8,usuario:6,sede:1,estatus:1,turno:2,mesa:{mesa:1,area:{area:1,sede:1,area_padre:null,nombre:"Bar"},numero:1,posx:23.8667,posy:18.8333,tamanio:72,estatus:2},cuentas:[{cuenta:31,comanda:37,nombre:"\xdanica",numero:1,propina_monto:.8,propina_porcentaje:10,cerrada:1,productos:[{detalle_cuenta:75,cuenta_cuenta:31,detalle_comanda:79,comanda:37,articulo:{articulo:1,categoria_grupo:21,presentacion:null,descripcion:"Original",precio:8,bien_servicio:"B",existencias:969,impresora:{impresora:1,sede:1,nombre:"EPSON L120 Series",direccion_ip:null,ubicacion:null,bluetooth:0}},cantidad:1,precio:8,impreso:1,total:8,notas:"",numero_cuenta:1}]}]},{comanda:45,total:76,usuario:2,sede:1,estatus:1,turno:2,mesa:{mesa:3,area:{area:1,sede:1,area_padre:null,nombre:"Bar"},numero:3,posx:11.0667,posy:41.5,tamanio:72,estatus:2},cuentas:[{cuenta:39,comanda:45,nombre:"uno",numero:1,propina_monto:.8,propina_porcentaje:10,cerrada:1,productos:[{detalle_cuenta:84,cuenta_cuenta:39,detalle_comanda:88,comanda:45,articulo:{articulo:1,categoria_grupo:21,presentacion:null,descripcion:"Original",precio:8,bien_servicio:"B",existencias:969,impresora:{impresora:1,sede:1,nombre:"EPSON L120 Series",direccion_ip:null,ubicacion:null,bluetooth:0}},cantidad:1,precio:8,impreso:1,total:8,notas:"",numero_cuenta:1},{detalle_cuenta:85,cuenta_cuenta:40,detalle_comanda:89,comanda:45,articulo:{articulo:2,categoria_grupo:21,presentacion:null,descripcion:"Zero",precio:8,bien_servicio:"B",existencias:984,impresora:{impresora:1,sede:1,nombre:"EPSON L120 Series",direccion_ip:null,ubicacion:null,bluetooth:0}},cantidad:1,precio:8,impreso:1,total:8,notas:"",numero_cuenta:1},{detalle_cuenta:86,cuenta_cuenta:40,detalle_comanda:90,comanda:45,articulo:{articulo:6,categoria_grupo:23,presentacion:null,descripcion:"Fettuccine",precio:60,bien_servicio:"B",existencias:995,impresora:{impresora:2,sede:1,nombre:"EPSON L120 Series",direccion_ip:null,ubicacion:null,bluetooth:0}},cantidad:1,precio:60,impreso:1,total:60,notas:"",numero_cuenta:1}]}]}]}}]),t}()).\u0275fac=function(t){return new(t||Bn)(L.Xb(m.b))},Bn.\u0275prov=L.Jb({token:Bn,factory:Bn.\u0275fac,providedIn:"root"}),Bn),qn=c("qXgu"),$n=c("7JkF");function Wn(t,e){if(1&t&&(L.Tb(0,"mat-option",10),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n)("disabled",1==+n.cerrada),L.Cb(1),L.Fc(" ",n.nombre," ")}}function Gn(t,e){if(1&t&&(L.Tb(0,"mat-option",10),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n)("disabled",1==+n.cerrada),L.Cb(1),L.Fc(" ",n.nombre," ")}}var Vn,Qn=((Vn=function(){function t(e,n,a,o){l(this,t),this.dialogRef=e,this.comandaSrvc=n,this.snackBar=a,this.data=o}return d(t,[{key:"ngOnInit",value:function(){}},{key:"cancelar",value:function(){this.dialogRef.close(!1)}},{key:"unirCuentas",value:function(t,e){var n=this;this.comandaSrvc.unificarCuentas(t.cuenta,e.cuenta).subscribe(function(t){t.exito?(n.snackBar.open(t.mensaje,"Cuentas",{duration:3e3}),n.dialogRef.close(!0)):n.snackBar.open("ERROR:".concat(t.mensaje),"Cuentas",{duration:7e3})})}},{key:"unirTodas",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Vn)(L.Nb(N.f),L.Nb(zn),L.Nb(M.a),L.Nb(N.a))},Vn.\u0275cmp=L.Hb({type:Vn,selectors:[["app-unir-cuenta"]],decls:20,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate",""],["frmUnirCuenta","ngForm"],["name","cuentaDe","required","",3,"ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],["name","cuentaA","required","",3,"ngModel","ngModelChange"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[3,"value","disabled"]],template:function(t,e){if(1&t&&(L.Tb(0,"h1",0),L.Dc(1,"Unir cuentas"),L.Sb(),L.Tb(2,"div",1),L.Tb(3,"form",2,3),L.Tb(5,"mat-form-field"),L.Tb(6,"mat-label"),L.Dc(7,"Unir cuenta de"),L.Sb(),L.Tb(8,"mat-select",4),L.bc("ngModelChange",function(t){return e.cuentaDe=t}),L.Cc(9,Wn,2,3,"mat-option",5),L.Sb(),L.Sb(),L.Tb(10,"mat-form-field"),L.Tb(11,"mat-label"),L.Dc(12,"con la cuenta de"),L.Sb(),L.Tb(13,"mat-select",6),L.bc("ngModelChange",function(t){return e.cuentaA=t}),L.Cc(14,Gn,2,3,"mat-option",5),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Tb(15,"div",7),L.Tb(16,"button",8),L.bc("click",function(){return e.cancelar()}),L.Dc(17," Cancelar "),L.Sb(),L.Tb(18,"button",9),L.bc("click",function(){return e.unirCuentas(e.cuentaDe,e.cuentaA)}),L.Dc(19," Unir cuentas "),L.Sb(),L.Sb()),2&t){var n=L.tc(4);L.Cb(8),L.lc("ngModel",e.cuentaDe),L.Cb(1),L.lc("ngForOf",e.data.mesaEnUso.cuentas),L.Cb(4),L.lc("ngModel",e.cuentaA),L.Cb(1),L.lc("ngForOf",e.data.mesaEnUso.cuentas),L.Cb(4),L.lc("disabled",!n.form.valid||+e.cuentaDe.numero==+e.cuentaA.numero)}},directives:[N.g,N.d,f.r,f.l,f.m,_.b,_.e,P.a,f.p,f.k,f.n,b.l,N.c,O.a,q.k],styles:[""]}),Vn);function Jn(t,e){if(1&t&&(L.Tb(0,"mat-option",10),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n),L.Cb(1),L.Gc(" ",n.area.nombre," - ",n.etiqueta||n.numero," ")}}var Xn,Zn,Kn,Yn=((Xn=function(){function t(e,n,a,o,i){var r=this;l(this,t),this.dialogRef=e,this.snackBar=n,this.mesaSrvc=a,this.comandaSrvc=o,this.data=i,this.mesasDisponibles=[],this.loadMesasDisponibles=function(){return r.mesaSrvc.getDisponibles().subscribe(function(t){return r.mesasDisponibles=t})},this.cancelar=function(){return r.dialogRef.close(!1)},this.trasladar=function(){r.comandaSrvc.trasladarMesa(+r.data.mesaEnUso.comanda,+r.data.mesaEnUso.mesa.mesa,+r.destino.mesa).subscribe(function(t){t.exito?(r.snackBar.open(t.mensaje,"Traslado de mesa",{duration:3e3}),r.dialogRef.close(!0)):r.snackBar.open("ERROR:".concat(t.mensaje),"Traslado de mesa",{duration:7e3})})}}return d(t,[{key:"ngOnInit",value:function(){this.loadMesasDisponibles()}}]),t}()).\u0275fac=function(t){return new(t||Xn)(L.Nb(N.f),L.Nb(M.a),L.Nb(Fe),L.Nb(zn),L.Nb(N.a))},Xn.\u0275cmp=L.Hb({type:Xn,selectors:[["app-traslado-mesa"]],decls:15,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate",""],["frmTrasladarMesa","ngForm"],[1,"fullWidth"],["name","destino","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[3,"value"]],template:function(t,e){if(1&t&&(L.Tb(0,"h1",0),L.Dc(1,"Trasladar a otra mesa"),L.Sb(),L.Tb(2,"div",1),L.Tb(3,"form",2,3),L.Tb(5,"mat-form-field",4),L.Tb(6,"mat-label"),L.Dc(7,"Trasladar a mesa:"),L.Sb(),L.Tb(8,"mat-select",5),L.bc("ngModelChange",function(t){return e.destino=t}),L.Cc(9,Jn,2,3,"mat-option",6),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Tb(10,"div",7),L.Tb(11,"button",8),L.bc("click",function(){return e.cancelar()}),L.Dc(12," Cancelar "),L.Sb(),L.Tb(13,"button",9),L.bc("click",function(){return e.trasladar()}),L.Dc(14," Trasladar "),L.Sb(),L.Sb()),2&t){var n=L.tc(4);L.Cb(8),L.lc("ngModel",e.destino),L.Cb(1),L.lc("ngForOf",e.mesasDisponibles),L.Cb(4),L.lc("disabled",!n.form.valid)}},directives:[N.g,N.d,f.r,f.l,f.m,_.b,_.e,P.a,f.p,f.k,f.n,b.l,N.c,O.a,q.k],styles:[""]}),Xn),ta=c("wd/R"),ea=function t(e,n,a){l(this,t),this.tipo=e,this.subtitulo=n,this.etiquetaAceptar=a},na=((Zn=function(){function t(e,n,a){var o=this;l(this,t),this.comandaSrvc=e,this.dialogRef=n,this.data=a,this.pwd=void 0,this.cancelar=function(){return o.dialogRef.close()},this.terminar=function(){switch(+o.data.tipo){case 1:o.validarPwdGerenteTurno()}},this.validarPwdGerenteTurno=function(){o.comandaSrvc.validaPwdGerenteTurno(o.pwd).subscribe(function(t){o.dialogRef.close(!!t.exito&&t.esgerente)})}}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Zn)(L.Nb(zn),L.Nb(N.f),L.Nb(N.a))},Zn.\u0275cmp=L.Hb({type:Zn,selectors:[["app-check-password"]],decls:14,vars:4,consts:[["mat-dialog-title",""],["novalidate","",3,"ngSubmit"],["frmValidaPwd","ngForm"],[1,"fullWidth"],["type","password","matInput","","placeholder","Contrase\xf1a","name","pwd","required","",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","color","secondary",1,"btnAccion",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"]],template:function(t,e){if(1&t){var n=L.Ub();L.Tb(0,"h1",0),L.Dc(1," Validar contrase\xf1a"),L.Ob(2,"br"),L.Dc(3),L.Sb(),L.Tb(4,"mat-dialog-content"),L.Tb(5,"form",1,2),L.bc("ngSubmit",function(){return L.wc(n),L.tc(6).form.valid}),L.Tb(7,"mat-form-field",3),L.Tb(8,"input",4),L.bc("ngModelChange",function(t){return e.pwd=t}),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Tb(9,"mat-dialog-actions",5),L.Tb(10,"button",6),L.bc("click",function(){return e.cancelar()}),L.Dc(11," Cancelar "),L.Sb(),L.Tb(12,"button",7),L.bc("click",function(){return e.terminar()}),L.Dc(13),L.Sb(),L.Sb()}if(2&t){var a=L.tc(6);L.Cb(3),L.Fc(" ",e.data.subtitulo||"Gerente de turno","\n"),L.Cb(5),L.lc("ngModel",e.pwd),L.Cb(4),L.lc("disabled",!a.form.valid),L.Cb(1),L.Fc(" ",e.data.etiquetaAceptar||"Validar"," ")}},directives:[N.g,N.d,f.r,f.l,f.m,_.b,y.b,f.c,f.p,f.k,f.n,N.c,O.a],styles:[""]}),Zn),aa=c("KZK3"),oa=((Kn=function(){function t(e){l(this,t),this.http=e,this.moduleUrl="cuenta",this.srvcErrHndl=new _e.a}return d(t,[{key:"save",value:function(t){return this.http.post("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/cobrar/").concat(t.cuenta),t).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||Kn)(L.Xb(m.b))},Kn.\u0275prov=L.Jb({token:Kn,factory:Kn.\u0275fac,providedIn:"root"}),Kn),ia=c("KFbY"),ra=c("IHy4"),ca=c("FjVI"),sa=c("TOq3");function la(t,e){if(1&t&&(L.Tb(0,"small"),L.Dc(1),L.Sb()),2&t){var n=L.fc();L.Cb(1),L.Fc(" - Factura a nombre de ",n.clienteSelected.nombre," ")}}function ua(t,e){if(1&t&&(L.Tb(0,"tr"),L.Tb(1,"td"),L.Dc(2),L.Sb(),L.Tb(3,"td",21),L.Dc(4),L.gc(5,"number"),L.Sb(),L.Sb()),2&t){var n=e.$implicit;L.Cb(2),L.Gc("",n.cantidad,"\xa0",n.nombre||n.articulo.descripcion,""),L.Cb(2),L.Ec(L.ic(5,3,n.cantidad*n.precio+n.monto_extra,"1.2-2"))}}function da(t,e){if(1&t&&(L.Tb(0,"mat-option",34),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n.forma_pago),L.Cb(1),L.Fc(" ",n.descripcion," ")}}function ba(t,e){if(1&t){var n=L.Ub();L.Tb(0,"mat-form-field",13),L.Tb(1,"input",35),L.bc("ngModelChange",function(t){return L.wc(n),L.fc().formaPago.monto=t}),L.Sb(),L.Sb()}if(2&t){var a=L.fc();L.Cb(1),L.lc("ngModel",a.formaPago.monto)}}function ma(t,e){if(1&t){var n=L.Ub();L.Tb(0,"mat-form-field",13),L.Tb(1,"input",36),L.bc("ngModelChange",function(t){return L.wc(n),L.fc().formaPago.propina=t}),L.Sb(),L.Sb()}if(2&t){var a=L.fc();L.Cb(1),L.lc("ngModel",a.formaPago.propina)}}function fa(t,e){if(1&t){var n=L.Ub();L.Tb(0,"mat-form-field",13),L.Tb(1,"input",37),L.bc("ngModelChange",function(t){return L.wc(n),L.fc().formaPago.documento=t}),L.Sb(),L.Sb()}if(2&t){var a=L.fc();L.Cb(1),L.lc("ngModel",a.formaPago.documento)("required",a.pideDocumento)}}function pa(t,e){if(1&t){var n=L.Ub();L.Tb(0,"tr"),L.Tb(1,"td"),L.Dc(2),L.Sb(),L.Tb(3,"td",21),L.Dc(4),L.gc(5,"number"),L.Sb(),L.Tb(6,"td",21),L.Dc(7),L.gc(8,"number"),L.Sb(),L.Tb(9,"td",38),L.Tb(10,"button",39),L.bc("click",function(){L.wc(n);var t=e.index;return L.fc().delFormaPago(t)}),L.Tb(11,"mat-icon"),L.Dc(12,"delete_forever"),L.Sb(),L.Sb(),L.Sb(),L.Sb()}if(2&t){var a=e.$implicit;L.Cb(2),L.Ec(a.forma_pago.descripcion),L.Cb(2),L.Ec(L.ic(5,3,a.monto,"1.2-2")),L.Cb(3),L.Ec(L.ic(8,6,a.propina,"1.2-2"))}}function ha(t,e){if(1&t&&(L.Tb(0,"mat-option",34),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n.sede),L.Cb(1),L.Fc(" ",n.nombre," ")}}function ga(t,e){if(1&t){var n=L.Ub();L.Tb(0,"table",25),L.Tb(1,"caption"),L.Tb(2,"strong"),L.Dc(3,"Datos de env\xedo"),L.Sb(),L.Sb(),L.Tb(4,"tbody"),L.Tb(5,"tr"),L.Tb(6,"td"),L.Tb(7,"mat-form-field",13),L.Tb(8,"mat-label"),L.Dc(9,"Atiende:"),L.Sb(),L.Tb(10,"mat-select",40),L.bc("ngModelChange",function(t){return L.wc(n),L.fc().datosPedido.sede=t}),L.Cc(11,ha,2,2,"mat-option",15),L.Sb(),L.Sb(),L.Sb(),L.Tb(12,"td"),L.Tb(13,"mat-form-field",13),L.Tb(14,"input",41),L.bc("ngModelChange",function(t){return L.wc(n),L.fc().datosPedido.direccion_entrega=t}),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Tb(15,"tr"),L.Tb(16,"td"),L.Tb(17,"mat-form-field",13),L.Tb(18,"input",42),L.bc("ngModelChange",function(t){return L.wc(n),L.fc().datosPedido.nombre=t}),L.Sb(),L.Sb(),L.Sb(),L.Tb(19,"td"),L.Tb(20,"mat-form-field",13),L.Tb(21,"input",43),L.bc("ngModelChange",function(t){return L.wc(n),L.fc().datosPedido.telefono=t}),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Sb()}if(2&t){var a=L.fc();L.Cb(10),L.lc("ngModel",a.datosPedido.sede),L.Cb(1),L.lc("ngForOf",a.sedes),L.Cb(3),L.lc("ngModel",a.datosPedido.direccion_entrega),L.Cb(4),L.lc("ngModel",a.datosPedido.nombre),L.Cb(3),L.lc("ngModel",a.datosPedido.telefono)}}function va(t,e){if(1&t&&L.Ob(0,"app-cargando",44),2&t){var n=L.fc();L.lc("configuracion",n.cargandoConf)}}function Ca(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",32),L.bc("click",function(){return L.wc(n),L.fc().cobrar()}),L.Dc(1,"Facturar"),L.Sb()}if(2&t){var a=L.fc();L.lc("disabled",0==a.formasPagoDeCuenta.length||+a.inputData.saldo>0||!a.factReq.cliente||a.facturando)}}function Sa(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",32),L.bc("click",function(){return L.wc(n),L.fc().cobrar()}),L.Dc(1," Enviar "),L.Sb()}if(2&t){var a=L.fc();L.lc("disabled",0==a.formasPagoDeCuenta.length||+a.inputData.saldo>0||!a.factReq.cliente||a.facturando||!a.datosPedido.sede)}}var Ta,_a=function(t,e,n){return{"saldo-pendiente":t,"saldo-exacto":e,"saldo-extra":n}},ya=((Ta=function(){function e(n,a,o,i,r,c,s,u,d,b,m){var f=this;l(this,e),this.dialog=n,this.dialogRef=a,this.data=o,this.snackBar=i,this.formaPagoSrvc=r,this.cobroSrvc=c,this.facturaSrvc=s,this.ls=u,this.socket=d,this.sedeSrvc=b,this.comandaSrvc=m,this.inputData={},this.lstFormasPago=[],this.formaPago={},this.formasPagoDeCuenta=[],this.esMovil=!1,this.facturando=!1,this.cargandoConf={w:75,h:75},this.pideDocumento=!1,this.sedes=[],this.datosPedido={sede:null,direccion_entrega:null,telefono:null,nombre:null,cliente:null},this.resetFactReq=function(){f.factReq={cuentas:[],factura_serie:1,cliente:null,fecha_factura:ta().format(Te.a.dbDateFormat),moneda:1}},this.processData=function(){f.data?f.inputData=f.data:f.data=f.inputData,f.inputData.totalDeCuenta=0,f.inputData.productosACobrar.forEach(function(t){f.inputData.totalDeCuenta+=t.precio*t.cantidad+t.monto_extra}),f.calculaPropina(),f.actualizaSaldo(),f.formaPago.monto=parseFloat(f.inputData.saldo).toFixed(2),f.inputData.clientePedido&&f.setClienteFacturar(f.inputData.clientePedido)},this.loadSedes=function(){f.sedeSrvc.get().subscribe(function(t){t&&(f.sedes=t)})},this.calculaPropina=function(){f.inputData.montoPropina=parseFloat((f.inputData.porcentajePropina*f.inputData.totalDeCuenta/100).toFixed(2)),f.actualizaSaldo()},this.loadFormasPago=function(){f.formaPagoSrvc.get({activo:1}).subscribe(function(t){t&&t.length>0&&(f.lstFormasPago=t)})},this.addFormaPago=function(){var t=f.lstFormasPago.filter(function(t){return+t.forma_pago==+f.formaPago.forma_pago})[0];1==+t.pedirautorizacion?f.dialog.open(na,{width:"40%",disableClose:!0,data:new ea(1)}).afterClosed().subscribe(function(e){e?f.agregaFormaPago(t):f.snackBar.open("La contrase\xf1a no es correcta","Formas de pago",{duration:5e3})}):f.agregaFormaPago(t)},this.agregaFormaPago=function(t){f.formasPagoDeCuenta.push({forma_pago:t,monto:parseFloat(f.formaPago.monto).toFixed(2),propina:f.formaPago.propina||0,documento:f.formaPago.documento||null,comision_monto:+f.formaPago.monto*+t.comision_porcentaje/100}),f.actualizaSaldo(),f.pideDocumento=!1},this.delFormaPago=function(t){f.formasPagoDeCuenta.splice(t,1),f.actualizaSaldo()},this.actualizaSaldo=function(){var t=0;f.formasPagoDeCuenta.forEach(function(e){return t+=+e.monto}),f.inputData.saldo=(+f.inputData.totalDeCuenta-t).toFixed(2),f.formaPago={monto:f.inputData.saldo}},this.cancelar=function(){return f.dialogRef.close()},this.setClienteFacturar=function(t){f.clienteSelected=t,f.factReq.cliente=+t.cliente,1==+f.data.mesaenuso.mesa.escallcenter&&(f.datosPedido.nombre=t.nombre,f.datosPedido.direccion_entrega=t.direccion,f.datosPedido.telefono=t.telefono)},this.cobrar=function(){f.facturando=!0;var e,n={cuenta:f.inputData.idcuenta,forma_pago:[],total:f.inputData.totalDeCuenta+f.inputData.montoPropina,propina_monto:f.inputData.montoPropina,propina_porcentaje:f.inputData.porcentajePropina,comision_monto:0},a=0,o=t(f.formasPagoDeCuenta);try{for(o.s();!(e=o.n()).done;){var i=e.value;a+=i.comision_monto||0,n.forma_pago.push({forma_pago:+i.forma_pago.forma_pago,monto:+i.monto+ +i.comision_monto,propina:i.propina||0,documento:i.documento,comision_monto:i.comision_monto})}}catch(r){o.e(r)}finally{o.f()}n.comision_monto=a,n.total+=a,1!=+f.data.mesaenuso.mesa.escallcenter?(f.factReq.cuentas.push({cuenta:+f.inputData.idcuenta}),f.cobroSrvc.save(n).subscribe(function(t){t.exito&&!t.facturada?(f.snackBar.open("Cobro","".concat(t.mensaje),{duration:3e3}),t.facturar?f.facturaSrvc.facturar(f.factReq).subscribe(function(e){e.exito?f.dialog.open(He.a,{maxWidth:"400px",data:new He.b("Imprimir factura","\xbfDesea imprimir la factura?","S\xed","No")}).afterClosed().subscribe(function(n){n&&f.printFactura(e.factura),f.resetFactReq(),f.snackBar.open("Factura","".concat(e.mensaje),{duration:3e3}),f.facturando=!1,f.dialogRef.close(t.cuenta),f.socket.emit("refrescar:mesa",{mesaenuso:f.data.mesaenuso})}):(f.facturando=!1,f.snackBar.open("Factura","ERROR: ".concat(t.mensaje),{duration:7e3}),f.socket.emit("refrescar:mesa",{mesaenuso:f.data.mesaenuso}),f.dialogRef.close(t.cuenta))}):(f.socket.emit("refrescar:mesa",{mesaenuso:f.data.mesaenuso}),f.dialogRef.close(t.cuenta))):(f.facturando=!1,f.snackBar.open("Cobro","ERROR: ".concat(t.mensaje),{duration:7e3}),f.socket.emit("refrescar:mesa",{mesaenuso:f.data.mesaenuso}),f.dialogRef.close("closePanel"))})):f.enviarPedido(n)},this.enviarPedido=function(t){f.datosPedido.cliente={nombre:f.clienteSelected.nombre,apellidos:"",correo:f.clienteSelected.correo,telefono:f.datosPedido.telefono,nit:f.clienteSelected.nit,direccion:f.datosPedido.direccion_entrega};var e={cobro:t,pedido:f.datosPedido,factura:{cuentas:[{cuenta:t.cuenta}],factura_serie:1,cliente:f.clienteSelected.cliente,fecha_factura:ta().format(Te.a.dbDateFormat),moneda:1}};f.comandaSrvc.enviarPedido(+f.data.mesaenuso.comanda,e).subscribe(function(t){t.exito?(f.snackBar.open("Pedido","#".concat(t.pedido,". ").concat(t.mensaje),{duration:3e3}),f.dialogRef.close("closePanel")):f.snackBar.open("Pedido","ERROR: ".concat(t.mensaje),{duration:7e3}),f.facturando=!1,f.socket.emit("refrescar:mesa",{mesaenuso:f.data.mesaenuso})})},this.procesaDetalleFactura=function(t){var e=[];return t.forEach(function(t){return e.push({Cantidad:+t.cantidad,Descripcion:t.articulo.descripcion,Total:+t.total})}),e},this.getTotalDetalle=function(t){var e=0;return t.forEach(function(t){return e+=+t.total}),e},this.getTotalImpuestosAdicionales=function(t){var e=0;return t.forEach(function(t){return e+=+t.total}),e},this.printFactura=function(t){f.facturaSrvc.imprimir(+t.factura).subscribe(function(t){if(t.factura){var e={NombreEmpresa:t.factura.empresa.nombre,NitEmpresa:t.factura.empresa.nit,SedeEmpresa:t.factura.sedeFactura.nombre,DireccionEmpresa:t.factura.empresa.direccion,Fecha:ta(t.factura.fecha_factura).format(Te.a.dateFormat),Nit:t.factura.receptor.nit,Nombre:t.factura.receptor.nombre,Direccion:t.factura.receptor.direccion,Serie:t.factura.serie_factura,Numero:t.factura.numero_factura,Total:f.getTotalDetalle(t.factura.detalle)+f.getTotalImpuestosAdicionales(t.factura.impuestos_adicionales||[]),NoAutorizacion:t.factura.fel_uuid,NombreCertificador:t.factura.certificador_fel.nombre,NitCertificador:t.factura.certificador_fel.nit,FechaDeAutorizacion:t.factura.fecha_autorizacion,NoOrdenEnLinea:"",FormaDePago:"",DetalleFactura:f.procesaDetalleFactura(t.factura.detalle),Impresora:f.data.impresora,ImpuestosAdicionales:t.factura.impuestos_adicionales||[]};f.data.impresora?0==+f.data.impresora.bluetooth?f.socket.emit("print:factura","".concat(JSON.stringify(e))):(e.Fecha=ta(t.factura.fecha_factura).format(Te.a.dateFormatBT),f.printToBT(JSON.stringify(e))):f.socket.emit("print:factura","".concat(JSON.stringify(e))),f.snackBar.open("Imprimiendo factura ".concat(t.factura.serie_factura,"-").concat(t.factura.numero_factura),"Impresi\xf3n",{duration:3e3})}else f.snackBar.open("ERROR: ".concat(t.mensaje),"Impresi\xf3n",{duration:7e3})})},this.printToBT=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=window.open("com.restouch.impresion://impresion/".concat(t),"PrntBT","height=200,width=200,menubar=no,location=no,resizable=no,scrollbars=no,status=no");setTimeout(function(){return e.close()},1e3)},this.onSelectionChangeFP=function(t){var e=f.lstFormasPago.findIndex(function(e){return+e.forma_pago==+t.value});e>-1&&(f.pideDocumento=1==+f.lstFormasPago[e].pedirdocumento)}}return d(e,[{key:"ngOnInit",value:function(){var t=this;this.esMovil=this.ls.get(Te.a.usrTokenVar).enmovil||!1,this.resetFactReq(),this.processData(),this.loadFormasPago(),this.ls.get(Te.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(Te.a.usrTokenVar).sede_uuid),this.socket.on("reconnect",function(){return t.socket.emit("joinRestaurant",t.ls.get(Te.a.usrTokenVar).sede_uuid)})),this.loadSedes()}},{key:"calculaPorcentajePropina",value:function(){this.inputData.porcentajePropina=parseFloat((100*this.inputData.montoPropina/this.inputData.totalDeCuenta).toFixed(2)),this.actualizaSaldo()}}]),e}()).\u0275fac=function(t){return new(t||Ta)(L.Nb(N.b),L.Nb(N.f),L.Nb(N.a),L.Nb(M.a),L.Nb(aa.a),L.Nb(oa),L.Nb(ia.a),L.Nb(Ee.a),L.Nb($n.a),L.Nb(ra.a),L.Nb(zn))},Ta.\u0275cmp=L.Hb({type:Ta,selectors:[["app-cobrar-pedido"]],inputs:{inputData:"inputData"},decls:63,vars:29,consts:[["mat-dialog-title",""],[4,"ngIf"],["mat-dialog-content","",2,"height","650px"],[1,"row"],[1,"col","m5","s12","mat-elevation-z4","colHeight",2,"overflow-y","auto"],[3,"showAddButton","getClienteEv"],["lstClientes",""],[1,"col","m3","s12","mat-elevation-z4","colHeight",2,"overflow-y","auto"],[1,"table","table-sm","table-borderless","table-striped"],[4,"ngFor","ngForOf"],[1,"col","m4","s12","mat-elevation-z4","colHeight",2,"overflow-y","auto"],["novalidate",""],["frmFormasPago","ngForm"],[1,"fullWidth"],["name","forma_pago","cdkFocusInitial","","required","",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["class","fullWidth",4,"ngIf"],["align","end"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[1,"table","table-sm"],[1,"text-left"],[1,"text-right"],[1,"col","m8","s8"],["class","table table-sm table-borderless",4,"ngIf"],[1,"col","m4","s4"],[1,"table","table-sm","table-borderless"],[1,"text-right","font-weight-bold"],[1,"text-right","font-weight-bold","totalCuenta",2,"max-width","15%"],[1,"text-right","font-weight-bold",2,"max-width","15%"],[3,"ngClass"],["mat-dialog-actions","","align","end"],[3,"configuracion",4,"ngIf"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-raised-button","","color","accent",3,"disabled","click",4,"ngIf"],[3,"value"],["matInput","","placeholder","monto","name","monto","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Propina","name","propina",3,"ngModel","ngModelChange"],["matInput","","placeholder","Documento","name","documento",3,"ngModel","required","ngModelChange"],[1,"text-center"],["mat-icon-button","","type","button","color","warn",3,"click"],["name","sede","required","",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","Direcci\xf3n de entrega","name","direccion_entrega","maxlength","1000","required","",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","Nombre","name","nombre","maxlength","1000",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","Tel\xe9fono","name","telefono","maxlength","1000",3,"ngModel","ngModelChange"],[3,"configuracion"]],template:function(t,e){if(1&t&&(L.Tb(0,"h1",0),L.Dc(1),L.Cc(2,la,2,1,"small",1),L.Sb(),L.Tb(3,"div",2),L.Tb(4,"div",3),L.Tb(5,"div",4),L.Tb(6,"app-lista-cliente",5,6),L.bc("getClienteEv",function(t){return e.setClienteFacturar(t)}),L.Sb(),L.Sb(),L.Tb(8,"div",7),L.Tb(9,"table",8),L.Tb(10,"tbody"),L.Cc(11,ua,6,6,"tr",9),L.Sb(),L.Sb(),L.Sb(),L.Tb(12,"div",10),L.Tb(13,"form",11,12),L.Tb(15,"mat-form-field",13),L.Tb(16,"mat-label"),L.Dc(17,"Forma de pago"),L.Sb(),L.Tb(18,"mat-select",14),L.bc("ngModelChange",function(t){return e.formaPago.forma_pago=t})("selectionChange",function(t){return e.onSelectionChangeFP(t)}),L.Cc(19,da,2,2,"mat-option",15),L.Sb(),L.Sb(),L.Cc(20,ba,2,1,"mat-form-field",16),L.Cc(21,ma,2,1,"mat-form-field",16),L.Cc(22,fa,2,2,"mat-form-field",16),L.Tb(23,"div",17),L.Tb(24,"button",18),L.bc("click",function(){return e.addFormaPago()}),L.Dc(25," Agregar "),L.Sb(),L.Sb(),L.Sb(),L.Ob(26,"hr"),L.Tb(27,"table",19),L.Tb(28,"thead"),L.Tb(29,"tr"),L.Tb(30,"th",20),L.Dc(31,"FP"),L.Sb(),L.Tb(32,"th",21),L.Dc(33,"Mon"),L.Sb(),L.Tb(34,"th",21),L.Dc(35,"Prop"),L.Sb(),L.Sb(),L.Sb(),L.Tb(36,"tbody"),L.Cc(37,pa,13,9,"tr",9),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Tb(38,"div",3),L.Tb(39,"div",22),L.Cc(40,ga,22,5,"table",23),L.Sb(),L.Tb(41,"div",24),L.Tb(42,"table",25),L.Tb(43,"tbody"),L.Tb(44,"tr"),L.Tb(45,"td",26),L.Dc(46,"TOTAL DE CUENTA:"),L.Sb(),L.Tb(47,"td",27),L.Dc(48),L.gc(49,"number"),L.Sb(),L.Sb(),L.Tb(50,"tr"),L.Tb(51,"td",26),L.Dc(52,"PENDIENTE:"),L.Sb(),L.Tb(53,"td",28),L.Tb(54,"span",29),L.Dc(55),L.gc(56,"number"),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Tb(57,"div",30),L.Cc(58,va,1,1,"app-cargando",31),L.Tb(59,"button",32),L.bc("click",function(){return e.cancelar()}),L.Dc(60,"Cancelar"),L.Sb(),L.Cc(61,Ca,2,1,"button",33),L.Cc(62,Sa,2,1,"button",33),L.Sb()),2&t){var n=L.tc(14);L.Cb(1),L.Fc(" Cobrar cuenta de ",e.data.cuenta," "),L.Cb(1),L.lc("ngIf",e.clienteSelected&&!!e.clienteSelected.cliente),L.Cb(4),L.lc("showAddButton",!0),L.Cb(5),L.lc("ngForOf",e.inputData.productosACobrar),L.Cb(7),L.lc("ngModel",e.formaPago.forma_pago),L.Cb(1),L.lc("ngForOf",e.lstFormasPago),L.Cb(1),L.lc("ngIf",e.esMovil),L.Cb(1),L.lc("ngIf",e.esMovil),L.Cb(1),L.lc("ngIf",e.esMovil&&e.pideDocumento),L.Cb(2),L.lc("disabled",!n.form.valid||e.inputData.saldo<=0),L.Cb(13),L.lc("ngForOf",e.formasPagoDeCuenta),L.Cb(3),L.lc("ngIf",1==+e.data.mesaenuso.mesa.escallcenter),L.Cb(8),L.Ec(L.ic(49,19,e.inputData.totalDeCuenta,"1.2-2")),L.Cb(6),L.lc("ngClass",L.qc(25,_a,+e.inputData.saldo>0,0==+e.inputData.saldo,+e.inputData.saldo<0)),L.Cb(1),L.Ec(L.ic(56,22,e.inputData.saldo,"1.2-2")),L.Cb(3),L.lc("ngIf",e.facturando),L.Cb(1),L.lc("disabled",e.facturando),L.Cb(2),L.lc("ngIf",0==+e.data.mesaenuso.mesa.escallcenter),L.Cb(1),L.lc("ngIf",1==+e.data.mesaenuso.mesa.escallcenter)}},directives:[N.g,b.m,N.d,ca.a,b.l,f.r,f.l,f.m,_.b,_.e,P.a,f.p,f.k,f.n,O.a,b.k,N.c,q.k,y.b,f.c,T.a,f.f,sa.a],pipes:[b.f],styles:[".spacer[_ngcontent-%COMP%]{flex:1 1 auto}.totalCuenta[_ngcontent-%COMP%]{border-top:1px solid #000;border-bottom:5px double #000}.colHeight[_ngcontent-%COMP%]{height:400px}.saldo-pendiente[_ngcontent-%COMP%]{color:#da332d;border-bottom:5px double #da332d}.saldo-extra[_ngcontent-%COMP%]{color:#87ceeb;border-bottom:5px double #87ceeb}.saldo-exacto[_ngcontent-%COMP%]{color:green;border-bottom:5px double green}.propina[_ngcontent-%COMP%]{font-style:italic}"]}),Ta);function Da(t,e){if(1&t){var n=L.Ub();L.Tb(0,"div",6),L.Tb(1,"mat-card",7),L.Ob(2,"mat-card-header"),L.Tb(3,"mat-card-content"),L.Rb(4),L.Tb(5,"div",0),L.Tb(6,"div",8),L.Tb(7,"button",9),L.bc("click",function(){L.wc(n);var t=e.$implicit;return L.fc().onConfirm(t.numero)}),L.Dc(8),L.Sb(),L.Sb(),L.Sb(),L.Qb(),L.Sb(),L.Sb(),L.Sb()}if(2&t){var a=e.$implicit;L.Cb(8),L.Ec(a.numero)}}var ka,wa=function t(e,n,a,o){l(this,t),this.titlew=e,this.cantidadPedido=n,this.lblBtnConfirm=a,this.lblBtnDeny=o},Ea=((ka=function(){function t(e,n){l(this,t),this.dialogRef=e,this.data=n,this.pedidos=[],this.datos={respuesta:!1,pedido:""},this.title=n.titlew,this.lblBtnConfirm=n.lblBtnConfirm,this.lblBtnDeny=n.lblBtnDeny,this.cantidadPedido=n.cantidadPedido,console.log(+this.cantidadPedido);for(var a=0;a<+this.cantidadPedido;a++)console.log("asdf"),this.pedidos.push({numero:a+1});console.log(this.pedidos)}return d(t,[{key:"ngOnInit",value:function(){}},{key:"onConfirm",value:function(t){this.datos.respuesta=!0,this.datos.pedido=t,this.dialogRef.close(this.datos)}},{key:"onDismiss",value:function(){this.datos.respuesta=!1,this.dialogRef.close(this.datos)}}]),t}()).\u0275fac=function(t){return new(t||ka)(L.Nb(N.f),L.Nb(N.a))},ka.\u0275cmp=L.Hb({type:ka,selectors:[["app-dialog-pedido"]],decls:9,vars:2,consts:[[1,"row"],["mat-dialog-title",""],["fxFlex","100%","fxFlex.xs","100%",1,"bordeRght"],["fxLayout","row wrap","fxLayoutGap","10px grid","fxFlexFill","","fxLayoutAlign","start start",1,"divContenedor"],["fxFlex","100%","fxLayoutAlign","center start"],["fxFlex","20%","fxFlex.xs","100%","fxFlex.sm","100%","fxFlex.md","50%",4,"ngFor","ngForOf"],["fxFlex","20%","fxFlex.xs","100%","fxFlex.sm","100%","fxFlex.md","50%"],[1,"mat-elevation-z4"],[1,"col"],["mat-raised-button","","color","accent","type","button",3,"click"]],template:function(t,e){1&t&&(L.Tb(0,"div",0),L.Tb(1,"h1",1),L.Dc(2),L.Sb(),L.Sb(),L.Tb(3,"mat-dialog-content"),L.Tb(4,"div",2),L.Tb(5,"div",3),L.Ob(6,"div",4),L.Cc(7,Da,9,1,"div",5),L.Sb(),L.Sb(),L.Ob(8,"mat-dialog-content"),L.Sb()),2&t&&(L.Cb(2),L.Fc(" ",e.title," "),L.Cb(5),L.lc("ngForOf",e.pedidos))},directives:[N.g,N.d,Rn.a,Rn.c,Rn.d,Rn.e,Rn.b,b.l,D.a,D.d,D.c,O.a],styles:[""]}),ka);function Pa(t,e){if(1&t&&(L.Tb(0,"div"),L.Tb(1,"h5"),L.Dc(2),L.Sb(),L.Sb()),2&t){var n=L.fc().$implicit;L.Cb(2),L.Fc(" ",n.descripcion," ")}}function xa(t,e){if(1&t&&(L.Tb(0,"mat-option",12),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n),L.Cb(1),L.Fc(" ",n.descripcion," ")}}var Oa=function(){return{standalone:!0}};function Ma(t,e){if(1&t&&(L.Rb(0),L.Tb(1,"mat-select",10),L.bc("ngModelChange",function(t){return e.$implicit.seleccion=t}),L.Cc(2,xa,2,2,"mat-option",11),L.Sb(),L.Ob(3,"mat-divider"),L.Ob(4,"br"),L.Qb()),2&t){var n=e.$implicit,a=L.fc(2).$implicit;L.Cb(1),L.lc("ngModel",n.seleccion)("ngModelOptions",L.nc(3,Oa)),L.Cb(1),L.lc("ngForOf",a.receta)}}function Ra(t,e){if(1&t&&(L.Tb(0,"div",0),L.Tb(1,"div",1),L.Cc(2,Ma,5,4,"ng-container",5),L.Sb(),L.Sb()),2&t){var n=L.fc().$implicit;L.Cb(2),L.lc("ngForOf",n.input)}}function Fa(t,e){if(1&t&&(L.Tb(0,"div"),L.Cc(1,Pa,3,1,"div",8),L.Cc(2,Ra,3,1,"div",9),L.Sb()),2&t){var n=e.$implicit;L.Cb(1),L.lc("ngIf",n.receta.length>0),L.Cb(1),L.lc("ngIf",n.receta.length>0)}}var Ia,Aa,Na,ja=function t(e,n,a){l(this,t),this.producto=e,this.lblBtnConfirm=n,this.lblBtnDeny=a},Ua=((Na=function(){function e(n,a,o,i){var r=this;l(this,e),this.dialogRef=n,this.data=a,this.articuloSvr=o,this.snackBar=i,this.getArticulos=function(){r.articuloSvr.getArticuloCombo({articulo:r.producto.id}).subscribe(function(t){r.combo=t;for(var e=0;e<r.combo.receta.length;e++){var n=r.combo.receta[e];if(r.combo.receta[e].seleccionado=!1,1==+n.multiple){for(var a=[],o=0;o<+r.combo.receta[e].cantidad_maxima;o++)a.push({id:o,seleccion:{}});r.combo.receta[e].input=a}else r.seleccion.receta.push(r.combo.receta[e])}})},this.setCantidad=function(){for(var t=0;t<r.combo.receta.length;t++)if(1==+r.combo.receta[t].multiple){for(var e=[],n=0;n<+r.combo.receta[t].cantidad_maxima*r.seleccion.cantidad;n++)e.push({id:n,seleccion:{}});r.combo.receta[t].input=e}},this.todosSeleccionados=function(e){var n,a=!0,o=t(e);try{t:for(o.s();!(n=o.n()).done;){var i,r=t(n.value.input);try{for(r.s();!(i=r.n()).done;)if(void 0===i.value.seleccion.articulo){a=!1;break t}}catch(c){r.e(c)}finally{r.f()}}}catch(c){o.e(c)}finally{o.f()}return a},this.datos={respuesta:!1,seleccion:[]},this.lblBtnConfirm=a.lblBtnConfirm,this.lblBtnDeny=a.lblBtnDeny,this.producto=a.producto,this.seleccion={cantidad:1,articulo:this.producto.id,descripcion:this.producto.nombre,receta:[]}}return d(e,[{key:"ngOnInit",value:function(){this.combo=[],this.getArticulos()}},{key:"onConfirm",value:function(){var e=this,n=this.combo.receta.filter(function(t){return 1==+t.multiple});if(this.todosSeleccionados(n)){var a,o=t(n);try{var i=function(){var n=a.value;e.seleccion.receta.push({articulo:n.articulo,descripcion:n.descripcion,receta:[]});var o,i=e.seleccion.receta.findIndex(function(t){return+t.articulo==+n.articulo}),r=t(n.input);try{for(r.s();!(o=r.n()).done;){var c=o.value;e.seleccion.receta[i].receta.push(c.seleccion)}}catch(s){r.e(s)}finally{r.f()}};for(o.s();!(a=o.n()).done;)i()}catch(r){o.e(r)}finally{o.f()}this.datos.respuesta=!0,this.datos.seleccion=this.seleccion,this.dialogRef.close(this.datos)}else this.snackBar.open("Por favor seleccione todas las opciones para completar.","Combos",{duration:7e3})}},{key:"onDismiss",value:function(){this.datos.respuesta=!1,this.dialogRef.close(this.datos)}}]),e}()).\u0275fac=function(t){return new(t||Na)(L.Nb(N.f),L.Nb(N.a),L.Nb(Mn.a),L.Nb(M.a))},Na.\u0275cmp=L.Hb({type:Na,selectors:[["app-dialog-combo"]],decls:16,vars:4,consts:[[1,"row"],[1,"col","m12","s12"],[1,"fullWidth"],["type","number","matInput","","placeholder","Cantidad","min","1","step","1",3,"ngModel","ngModelOptions","change","ngModelChange"],[1,"col-sm-12"],[4,"ngFor","ngForOf"],["align","right",1,"row","text-right"],["mat-raised-button","","color","accent",1,"btnAccion",3,"click"],[4,"ngIf"],["class","row",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(L.Tb(0,"mat-dialog-content"),L.Tb(1,"div",0),L.Tb(2,"div",1),L.Tb(3,"h5"),L.Dc(4,"Cantidad"),L.Sb(),L.Tb(5,"mat-form-field",2),L.Tb(6,"input",3),L.bc("change",function(){return e.setCantidad()})("ngModelChange",function(t){return e.seleccion.cantidad=t}),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Tb(7,"div",0),L.Tb(8,"div",4),L.Cc(9,Fa,3,2,"div",5),L.Sb(),L.Sb(),L.Tb(10,"div",6),L.Tb(11,"div",1),L.Tb(12,"button",7),L.bc("click",function(){return e.onDismiss()}),L.Dc(13," Cancelar "),L.Sb(),L.Tb(14,"button",7),L.bc("click",function(){return e.onConfirm()}),L.Dc(15," Aceptar "),L.Sb(),L.Sb(),L.Sb(),L.Sb()),2&t&&(L.Cb(6),L.lc("ngModel",e.seleccion.cantidad)("ngModelOptions",L.nc(3,Oa)),L.Cb(3),L.lc("ngForOf",e.combo.receta))},directives:[N.d,_.b,f.o,y.b,f.c,f.k,f.n,b.l,O.a,b.m,P.a,k.a,q.k],styles:[""]}),Na),Ba=((Aa=function(){function t(e,n){var a=this;l(this,t),this.dialogRef=e,this.data=n,this.terminar=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return a.dialogRef.close(t)}}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Aa)(L.Nb(N.f),L.Nb(N.a))},Aa.\u0275cmp=L.Hb({type:Aa,selectors:[["app-notas-generales-comanda"]],decls:12,vars:1,consts:[["mat-dialog-title",""],["novalidate",""],["frmNotasGenCom","ngForm"],[1,"fullWidth"],["matInput","","placeholder","Notas generales","name","notasGenerales","maxlength","1000",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","color","secondary",1,"btnAccion",3,"click"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(L.Tb(0,"h1",0),L.Dc(1,"Notas generales de comanda"),L.Sb(),L.Tb(2,"mat-dialog-content"),L.Tb(3,"form",1,2),L.Tb(5,"mat-form-field",3),L.Tb(6,"textarea",4),L.bc("ngModelChange",function(t){return e.data.notasGenerales=t}),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Tb(7,"mat-dialog-actions",5),L.Tb(8,"button",6),L.bc("click",function(){return e.terminar()}),L.Dc(9," Cancelar "),L.Sb(),L.Tb(10,"button",7),L.bc("click",function(){return e.terminar(e.data.notasGenerales)}),L.Dc(11," Guardar "),L.Sb(),L.Sb()),2&t&&(L.Cb(6),L.lc("ngModel",e.data.notasGenerales))},directives:[N.g,N.d,f.r,f.l,f.m,_.b,y.b,f.c,f.f,f.k,f.n,N.c,O.a],styles:[""]}),Aa),Ha=((Ia=function(){function t(e,n,a,o){var i=this;l(this,t),this.dialogRef=e,this.snackBar=n,this.comandaSrvc=a,this.data=o,this.cancelar=function(){return i.dialogRef.close(!1)},this.guardar=function(){i.nuevaCuenta.nombre&&(i.comanda.cuentas.findIndex(function(t){return t.nombre.toUpperCase().trim()===i.nuevaCuenta.nombre.toUpperCase().trim()})<0?(i.comanda.cuentas.push(i.nuevaCuenta),i.comandaSrvc.save(i.comanda).subscribe(function(t){t.exito?(i.snackBar.open("Cuenta agregada con \xe9xito","Cuentas",{duration:3e3}),i.dialogRef.close(!0)):i.snackBar.open("ERROR: ".concat(t.mensaje),"Cuentas",{duration:7e3})})):i.snackBar.open("Ya existe una cuenta con ese nombre. Por favor ingrese otro nombre.","Cuentas",{duration:7e3}))}}return d(t,[{key:"ngOnInit",value:function(){if(+this.data.mesaEnUso.comanda>0){var t=this.data.mesaEnUso;this.comanda={area:+t.mesa.area.area,mesa:+t.mesa.mesa,mesero:+t.mesero.usuario,comensales:t.cuentas.length+1,dividirCuentasPorSillas:1,comanda:+t.comanda,cuentas:t.cuentas,replaceUnica:!1},this.nuevaCuenta={cuenta:0,numero:this.comanda.cuentas.length+1,nombre:void 0,productos:[]}}}}]),t}()).\u0275fac=function(t){return new(t||Ia)(L.Nb(N.f),L.Nb(M.a),L.Nb(zn),L.Nb(N.a))},Ia.\u0275cmp=L.Hb({type:Ia,selectors:[["app-nueva-cuenta"]],decls:12,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate",""],["frmNuevaCuenta","ngForm"],[1,"fullWidth"],["type","text","matInput","","placeholder","Nombre","name","nombre","required","",3,"ngModel","ngModelChange"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"]],template:function(t,e){if(1&t&&(L.Tb(0,"h1",0),L.Dc(1),L.Sb(),L.Tb(2,"div",1),L.Tb(3,"form",2,3),L.Tb(5,"mat-form-field",4),L.Tb(6,"input",5),L.bc("ngModelChange",function(t){return e.nuevaCuenta.nombre=t}),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Tb(7,"div",6),L.Tb(8,"button",7),L.bc("click",function(){return e.cancelar()}),L.Dc(9," Cancelar "),L.Sb(),L.Tb(10,"button",8),L.bc("click",function(){return e.guardar()}),L.Dc(11," Guardar "),L.Sb(),L.Sb()),2&t){var n=L.tc(4);L.Cb(1),L.Fc("Nueva cuenta - Comanda #",e.data.mesaEnUso.comanda,""),L.Cb(5),L.lc("ngModel",e.nuevaCuenta.nombre),L.Cb(4),L.lc("disabled",!n.form.valid)}},directives:[N.g,N.d,f.r,f.l,f.m,_.b,y.b,f.c,f.p,f.k,f.n,N.c,O.a],styles:[""]}),Ia);function La(t,e){if(1&t&&(L.Tb(0,"mat-option",12),L.Dc(1),L.Sb()),2&t){var n=e.$implicit,a=L.fc().$implicit;L.lc("value",+n.cuenta)("disabled",1==+n.cerrada||+a.idcuenta==+n.cuenta),L.Cb(1),L.Fc(" ",n.nombre," ")}}function za(t,e){if(1&t&&(L.Tb(0,"tr"),L.Tb(1,"td"),L.Dc(2),L.Sb(),L.Tb(3,"td",7),L.Tb(4,"mat-form-field",8),L.Tb(5,"input",9),L.bc("ngModelChange",function(t){return e.$implicit.cantidad=t}),L.Sb(),L.Sb(),L.Sb(),L.Tb(6,"td"),L.Tb(7,"mat-select",10),L.bc("ngModelChange",function(t){return e.$implicit.idcuenta=t}),L.Cc(8,La,2,3,"mat-option",11),L.Sb(),L.Sb(),L.Sb()),2&t){var n=e.$implicit,a=e.index,o=L.fc();L.Cb(2),L.Ec(n.nombre),L.Cb(3),L.lc("max",o.cantidadProducto[a])("ngModel",n.cantidad)("disabled",1==+n.combo),L.Cb(2),L.lc("ngModel",n.idcuenta),L.Cb(1),L.lc("ngForOf",o.comanda.cuentas)}}var qa,$a=((qa=function(){function e(n,a,o,i){var r=this;l(this,e),this.dialogRef=n,this.snackBar=a,this.comandaSrvc=o,this.data=i,this.cantidadProducto=[],this.cpLstProductos=[],this.compLstProductos=[],this.cancelar=function(){return r.dialogRef.close(!1)},this.guardar=function(){var e,n=[],a=0,o=t(r.cpLstProductos);try{for(o.s();!(e=o.n()).done;){var i=e.value;+i.idcuenta!=+r.compLstProductos[a].idcuenta&&n.push({detalle_comanda:+i.detalle_comanda,cuenta:+i.idcuenta,cantidad:+i.cantidad}),a++}}catch(c){o.e(c)}finally{o.f()}n.length>0?r.comandaSrvc.distribuirCuentas(n).subscribe(function(t){t.exito?(r.snackBar.open("Productos redistribuidos","Cuentas",{duration:3e3}),r.dialogRef.close(!0)):(r.snackBar.open("ERROR: ".concat(t.mensaje),"Cuentas",{duration:7e3}),r.cancelar())}):(r.snackBar.open("Sin cambios en las cuentas.","Cuentas",{duration:7e3}),r.dialogRef.close(!0))}}return d(e,[{key:"ngOnInit",value:function(){var t=this;if(+this.data.mesaEnUso.comanda>0){var e=this.data.mesaEnUso;this.comanda={area:+e.mesa.area.area,mesa:+e.mesa.mesa,mesero:+e.mesero.usuario,comensales:e.cuentas.length+1,dividirCuentasPorSillas:1,comanda:+e.comanda,cuentas:e.cuentas,replaceUnica:!1}}this.cpLstProductos=[],this.data.lstProductos.length>0&&(this.data.lstProductos.forEach(function(e){0==+t.data.mesaEnUso.cuentas.find(function(t){return+t.cuenta==+e.idcuenta}).cerrada&&(t.cpLstProductos.push(e),t.cantidadProducto.push(+e.cantidad))}),this.cpLstProductos=JSON.parse(JSON.stringify(this.cpLstProductos)),this.compLstProductos=JSON.parse(JSON.stringify(this.cpLstProductos)))}}]),e}()).\u0275fac=function(t){return new(t||qa)(L.Nb(N.f),L.Nb(M.a),L.Nb(zn),L.Nb(N.a))},qa.\u0275cmp=L.Hb({type:qa,selectors:[["app-distribuir-productos-cuentas"]],decls:17,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"rtxt","size-cantidad"],[4,"ngFor","ngForOf"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","type","button","color","accent",3,"click"],[1,"rtxt"],[1,"size-cantidad"],["type","number","matInput","","name","cantidad","min","1","required","",3,"max","ngModel","disabled","ngModelChange"],["name","cuenta","required","",3,"ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"]],template:function(t,e){1&t&&(L.Tb(0,"h1",0),L.Dc(1),L.Sb(),L.Tb(2,"div",1),L.Tb(3,"table"),L.Tb(4,"tr"),L.Tb(5,"th"),L.Dc(6,"Art\xedculo"),L.Sb(),L.Tb(7,"th",2),L.Dc(8,"Cantidad"),L.Sb(),L.Tb(9,"th"),L.Dc(10,"Cuenta"),L.Sb(),L.Sb(),L.Cc(11,za,9,6,"tr",3),L.Sb(),L.Sb(),L.Tb(12,"div",4),L.Tb(13,"button",5),L.bc("click",function(){return e.cancelar()}),L.Dc(14," Cancelar "),L.Sb(),L.Tb(15,"button",6),L.bc("click",function(){return e.guardar()}),L.Dc(16," Guardar "),L.Sb(),L.Sb()),2&t&&(L.Cb(1),L.Fc("Distribuci\xf3n de productos - Comanda #",e.data.mesaEnUso.comanda,""),L.Cb(10),L.lc("ngForOf",e.cpLstProductos))},directives:[N.g,N.d,b.l,N.c,O.a,_.b,f.o,y.b,f.c,f.p,f.k,f.n,P.a,q.k],styles:[".size-cantidad[_ngcontent-%COMP%]{width:25%}"]}),qa),Wa=c("FHMA");function Ga(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",6),L.bc("click",function(){L.wc(n);var t=L.fc().$implicit;return L.fc().clickOnSubCategoria(t)}),L.Dc(1),L.Sb()}if(2&t){var a=L.fc().$implicit,o=L.fc();L.lc("disabled",o.bloqueoBotones),L.Cb(1),L.Fc(" ",a.descripcion," ")}}function Va(t,e){if(1&t&&(L.Rb(0),L.Cc(1,Ga,2,2,"button",5),L.Qb()),2&t){var n=e.$implicit;L.Cb(1),L.lc("ngIf",n.mostrarEnPos)}}function Qa(t,e){1&t&&L.Ob(0,"hr")}function Ja(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",7),L.bc("click",function(){L.wc(n);var t=e.$implicit;return L.fc().clickOnArticulo(t)}),L.Dc(1),L.Sb()}if(2&t){var a=e.$implicit,o=L.fc();L.lc("disabled",o.bloqueoBotones),L.Cb(1),L.Fc(" ",a.descripcion," ")}}var Xa,Za,Ka=((Za=function(){function e(n,a){var o=this;l(this,e),this.articuloSrvc=n,this.ls=a,this.bloqueoBotones=!1,this.productoClickedEv=new L.o,this.categoriasFilledEv=new L.o,this.categorias=[],this.subcategorias=[],this.articulos=[],this.loadArbolArticulos=function(){o.articuloSrvc.getArbolArticulos(o.ls.get(Te.a.usrTokenVar).sede||0).subscribe(function(t){o.fillCategorias(t)})},this.fillCategorias=function(e){o.categorias=[],o.subcategorias=[],o.articulos=[];var n,a=t(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;o.categorias.push(i)}}catch(r){a.e(r)}finally{a.f()}o.categoriasFilledEv.emit(o.categorias)},this.fillSubCategorias=function(e){o.subcategorias=[],o.articulos=[];var n,a=t(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;o.subcategorias.push(i)}}catch(r){a.e(r)}finally{a.f()}},this.fillArticulos=function(e){o.articulos=[];var n,a=t(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;o.articulos.push(i)}}catch(r){a.e(r)}finally{a.f()}},this.clickOnCategoria=function(t){t.categoria_grupo.length>0&&o.fillSubCategorias(t.categoria_grupo)},this.clickOnSubCategoria=function(t){t.articulo.length>0&&o.fillArticulos(t.articulo)},this.clickOnArticulo=function(t){o.productoClickedEv.emit({id:+t.articulo,nombre:t.descripcion,precio:+t.precio,impresora:t.impresora,presentacion:t.presentacion,codigo:t.codigo,combo:t.combo,multiple:t.multiple})}}return d(e,[{key:"ngOnInit",value:function(){this.loadArbolArticulos()}}]),e}()).\u0275fac=function(t){return new(t||Za)(L.Nb(Mn.a),L.Nb(Ee.a))},Za.\u0275cmp=L.Hb({type:Za,selectors:[["app-lista-producto-alt"]],inputs:{bloqueoBotones:"bloqueoBotones"},outputs:{productoClickedEv:"productoClickedEv",categoriasFilledEv:"categoriasFilledEv"},decls:7,vars:3,consts:[[1,"row"],[1,"col","m12","s12"],[4,"ngFor","ngForOf"],[4,"ngIf"],["mat-raised-button","","class","btnAccion","color","warn",3,"disabled","click",4,"ngFor","ngForOf"],["mat-raised-button","","class","btnAccion","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","color","warn",1,"btnAccion",3,"disabled","click"]],template:function(t,e){1&t&&(L.Tb(0,"div",0),L.Tb(1,"div",1),L.Cc(2,Va,2,1,"ng-container",2),L.Sb(),L.Sb(),L.Cc(3,Qa,1,0,"hr",3),L.Tb(4,"div",0),L.Tb(5,"div",1),L.Cc(6,Ja,2,2,"button",4),L.Sb(),L.Sb()),2&t&&(L.Cb(2),L.lc("ngForOf",e.subcategorias),L.Cb(1),L.lc("ngIf",e.articulos.length>0),L.Cb(3),L.lc("ngForOf",e.articulos))},directives:[b.l,b.m,O.a],styles:[""]}),Za),Ya=((Xa=function(){function t(e,n){var a=this;l(this,t),this.dialogRef=e,this.comandaSrvc=n,this.data={pwd:void 0},this.cancelar=function(){return a.dialogRef.close()},this.terminar=function(){a.comandaSrvc.validaPwdGerenteTurno(a.data.pwd).subscribe(function(t){a.dialogRef.close(!!t.exito&&t.esgerente)})}}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Xa)(L.Nb(N.f),L.Nb(zn))},Xa.\u0275cmp=L.Hb({type:Xa,selectors:[["app-valida-pwd-gerente-turno"]],decls:12,vars:2,consts:[["mat-dialog-title",""],["novalidate","",3,"ngSubmit"],["frmValidarPwdGerenteTurno","ngForm"],[1,"fullWidth"],["type","password","matInput","","placeholder","Contrase\xf1a del gerente de turno","name","pwd","required","",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","color","secondary",1,"btnAccion",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"]],template:function(t,e){if(1&t){var n=L.Ub();L.Tb(0,"h1",0),L.Dc(1,"Contrase\xf1a del gerente de turno"),L.Sb(),L.Tb(2,"mat-dialog-content"),L.Tb(3,"form",1,2),L.bc("ngSubmit",function(){return L.wc(n),L.tc(4).form.valid}),L.Tb(5,"mat-form-field",3),L.Tb(6,"input",4),L.bc("ngModelChange",function(t){return e.data.pwd=t}),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Tb(7,"mat-dialog-actions",5),L.Tb(8,"button",6),L.bc("click",function(){return e.cancelar()}),L.Dc(9," Cancelar "),L.Sb(),L.Tb(10,"button",7),L.bc("click",function(){return e.terminar()}),L.Dc(11," Eliminar producto "),L.Sb(),L.Sb()}if(2&t){var a=L.tc(4);L.Cb(6),L.lc("ngModel",e.data.pwd),L.Cb(4),L.lc("disabled",!a.form.valid)}},directives:[N.g,N.d,f.r,f.l,f.m,_.b,y.b,f.c,f.p,f.k,f.n,N.c,O.a],styles:[""]}),Xa);function to(t,e){if(1&t&&(L.Rb(0),L.Dc(1),L.Qb()),2&t){var n=L.fc(2).$implicit;L.Cb(1),L.Fc(" ",n.cantidad," ")}}function eo(t,e){if(1&t&&(L.Tb(0,"div",7),L.Tb(1,"span",12),L.Dc(2),L.Sb(),L.Sb()),2&t){var n=e.$implicit;L.Cb(2),L.Ec(n)}}function no(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",16),L.bc("click",function(){L.wc(n);var t=L.fc(3),e=t.$implicit,a=t.index;return L.fc().removeProducto(e,a)}),L.Tb(1,"mat-icon",17),L.Dc(2,"remove_circle"),L.Sb(),L.Sb()}if(2&t){var a=L.fc(4);L.lc("disabled",a.bloqueoBotones)}}function ao(t,e){if(1&t){var n=L.Ub();L.Tb(0,"eco-fab-speed-dial",13),L.Tb(1,"eco-fab-speed-dial-trigger"),L.Tb(2,"button",14),L.Tb(3,"mat-icon",15),L.Dc(4,"keyboard_arrow_left"),L.Sb(),L.Sb(),L.Sb(),L.Tb(5,"eco-fab-speed-dial-actions"),L.Tb(6,"button",16),L.bc("click",function(){L.wc(n);var t=L.fc(2),e=t.$implicit,a=t.index;return L.fc().deleteProductoFromList(e,a)}),L.Tb(7,"mat-icon",17),L.Dc(8,"delete_forever"),L.Sb(),L.Sb(),L.Cc(9,no,3,1,"button",18),L.Tb(10,"button",19),L.bc("click",function(){L.wc(n);var t=L.fc(2).$implicit;return L.fc().toggleShowInputNotas(t)}),L.Tb(11,"mat-icon",17),L.Dc(12,"notes"),L.Sb(),L.Sb(),L.Sb(),L.Sb()}if(2&t){var a=L.fc(2).$implicit,o=L.fc();L.Cb(6),L.lc("disabled",o.bloqueoBotones),L.Cb(3),L.lc("ngIf",a.detalle.length<=1),L.Cb(1),L.lc("disabled",o.bloqueoBotones)}}function oo(t,e){if(1&t){var n=L.Ub();L.Tb(0,"eco-fab-speed-dial",13),L.Tb(1,"eco-fab-speed-dial-trigger"),L.Tb(2,"button",14),L.Tb(3,"mat-icon",15),L.Dc(4,"keyboard_arrow_left"),L.Sb(),L.Sb(),L.Sb(),L.Tb(5,"eco-fab-speed-dial-actions"),L.Tb(6,"button",16),L.bc("click",function(){L.wc(n);var t=L.fc(2),e=t.$implicit,a=t.index;return L.fc().deleteProductoFromListAfterPrinted(e,a)}),L.Tb(7,"mat-icon",17),L.Dc(8,"delete_forever"),L.Sb(),L.Sb(),L.Sb(),L.Sb()}if(2&t){var a=L.fc(3);L.Cb(6),L.lc("disabled",a.bloqueoBotones)}}function io(t,e){if(1&t&&(L.Tb(0,"div",4),L.Tb(1,"div",5),L.Tb(2,"div",6),L.Tb(3,"span",7),L.Cc(4,to,2,1,"ng-container",8),L.Dc(5),L.Sb(),L.Cc(6,eo,3,1,"div",9),L.Sb(),L.Tb(7,"div",10),L.Tb(8,"span"),L.Dc(9),L.gc(10,"number"),L.Sb(),L.Dc(11,"\xa0 "),L.Cc(12,ao,13,3,"eco-fab-speed-dial",11),L.Cc(13,oo,9,1,"eco-fab-speed-dial",11),L.Sb(),L.Sb(),L.Sb()),2&t){var n=L.fc().$implicit;L.Cb(4),L.lc("ngIf",0==+n.multiple),L.Cb(1),L.Fc(" ",n.nombre," "),L.Cb(1),L.lc("ngForOf",n.detalle),L.Cb(3),L.Ec(L.ic(10,6,n.cantidad*n.precio+n.monto_extra,"1.2-2")),L.Cb(3),L.lc("ngIf",0==+n.impreso),L.Cb(1),L.lc("ngIf",1==+n.impreso)}}function ro(t,e){if(1&t){var n=L.Ub();L.Tb(0,"mat-form-field",0),L.Tb(1,"input",21),L.bc("ngModelChange",function(t){return L.wc(n),L.fc(2).$implicit.notas=t})("keyup.enter",function(){L.wc(n);var t=L.fc(2).$implicit;return L.fc().toggleShowInputNotas(t)})("blur",function(){L.wc(n);var t=L.fc(2).$implicit;return L.fc().saveNotasProducto(t)}),L.Sb(),L.Sb()}if(2&t){var a=L.fc(2).$implicit;L.Cb(1),L.lc("ngModel",a.notas)}}function co(t,e){if(1&t&&(L.Tb(0,"div",4),L.Cc(1,ro,2,1,"mat-form-field",20),L.Sb()),2&t){var n=L.fc().$implicit,a=L.fc();L.Cb(1),L.lc("ngIf",n.showInputNotas&&a.esMovil)}}var so=function(t){return{noImpreso:t}};function lo(t,e){if(1&t&&(L.Tb(0,"mat-list-item",2),L.Cc(1,io,14,9,"div",3),L.Cc(2,co,2,1,"div",3),L.Sb()),2&t){var n=e.$implicit;L.lc("ngClass",L.oc(3,so,0==+n.impreso)),L.Cb(1),L.lc("ngIf",+n.cantidad>0),L.Cb(1),L.lc("ngIf",+n.cantidad>0)}}var uo,bo=((uo=function(){function t(e,n,a,o,i){var r=this;l(this,t),this.snackBar=e,this.ls=n,this.comandaSrvc=a,this.socket=o,this.dialog=i,this.listaProductos=[],this.noCuenta=null,this.listHeight="450px",this.IdComanda=0,this.IdCuenta=0,this.bloqueoBotones=!1,this.mesaEnUso={},this.productoRemovedEv=new L.o,this.esMovil=!1,this.removeProducto=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r.bloqueoBotones=!0,r.detalleComanda={detalle_cuenta:t.detalle_cuenta,detalle_comanda:t.detalle_comanda,articulo:t.id,cantidad:+t.cantidad>1?+t.cantidad-1:0,precio:+t.precio,total:+t.cantidad>1?(+t.cantidad-1)*+t.precio:0,notas:t.notas,autorizado:n},r.comandaSrvc.saveDetalle(r.IdComanda,r.IdCuenta,r.detalleComanda).subscribe(function(e){e.exito?(t.cantidad=r.detalleComanda.cantidad,r.productoRemovedEv.emit({listaProductos:r.listaProductos,comanda:e.comanda}),0==+t.cantidad&&(r.socket.emit("refrescar:mesa",{mesaenuso:r.mesaEnUso}),r.socket.emit("refrescar:listaCocina",{mesaenuso:r.mesaEnUso}))):r.snackBar.open("ERROR: ".concat(e.mensaje),"Comanda",{duration:3e3}),r.bloqueoBotones=!1})},this.deleteProductoFromList=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.cantidad=0,t.notas="",r.removeProducto(t,e,n)},this.deleteProductoFromListAfterPrinted=function(t,e){r.bloqueoBotones=!0,r.dialog.open(Ya,{width:"40%",disableClose:!0}).afterClosed().subscribe(function(n){n?(r.deleteProductoFromList(t,e,!0),r.snackBar.open("Se eliminar\xe1 el producto seleccionado.","Comanda",{duration:5e3})):r.snackBar.open("La contrase\xf1a no es correcta","Comanda",{duration:5e3}),r.bloqueoBotones=!1})},this.saveNotasProducto=function(t){r.comandaSrvc.saveNotasProducto({detalle_comanda:t.detalle_comanda,notas:t.notas}).subscribe(function(t){t.exito&&r.snackBar.open("Notas de producto guardadas con \xe9xito...","Producto",{duration:3e3})})}}return d(t,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(Te.a.usrTokenVar).enmovil||!1}},{key:"toggleShowInputNotas",value:function(t){console.log("ARTICULO = ",t),t.showInputNotas=!t.showInputNotas,t.showInputNotas?t.itemListHeight="140px":(t.itemListHeight="70px",this.saveNotasProducto(t))}},{key:"doAction",value:function(t){console.log(t)}}]),t}()).\u0275fac=function(t){return new(t||uo)(L.Nb(M.a),L.Nb(Ee.a),L.Nb(zn),L.Nb($n.a),L.Nb(N.b))},uo.\u0275cmp=L.Hb({type:uo,selectors:[["app-lista-productos-comanda"]],inputs:{listaProductos:"listaProductos",noCuenta:"noCuenta",listHeight:"listHeight",IdComanda:"IdComanda",IdCuenta:"IdCuenta",bloqueoBotones:"bloqueoBotones",mesaEnUso:"mesaEnUso"},outputs:{productoRemovedEv:"productoRemovedEv"},decls:2,vars:3,consts:[[1,"fullWidth"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["matLine","","class","fullWidth",4,"ngIf"],["matLine","",1,"fullWidth"],[1,"row"],[1,"col","m6","s12"],["matLine",""],[4,"ngIf"],["matLine","",4,"ngFor","ngForOf"],["align","end",1,"col","m6","s12"],["direction","left",4,"ngIf"],[1,"tabulador"],["direction","left"],["mat-fab",""],[2,"font-size","18pt !important"],["mat-mini-fab","","color","warn",3,"disabled","click"],[2,"font-size","16pt !important"],["mat-mini-fab","","color","warn",3,"disabled","click",4,"ngIf"],["mat-mini-fab","","color","accent",3,"disabled","click"],["class","fullWidth",4,"ngIf"],["matInput","","placeholder","Notas de producto","maxlength","1000",3,"ngModel","ngModelChange","keyup.enter","blur"]],template:function(t,e){1&t&&(L.Tb(0,"mat-list",0),L.Cc(1,lo,3,5,"mat-list-item",1),L.Sb()),2&t&&(L.zc("height",e.listHeight),L.Cb(1),L.lc("ngForOf",e.listaProductos))},directives:[S.a,b.l,S.c,b.k,Le.a,b.m,q.h,Ce.b,Ce.d,O.a,T.a,Ce.a,_.b,y.b,f.c,f.f,f.k,f.n],pipes:[b.f],styles:[".fullWidth[_ngcontent-%COMP%]{width:100%!important}.spacer[_ngcontent-%COMP%]{flex:1 1 auto!important}.noImpreso[_ngcontent-%COMP%]{background-color:#c7c7c7}.text-pre-wrap[_ngcontent-%COMP%]{white-space:pre-wrap!important}"]}),uo),mo=["appLstProdAlt"],fo=["txtCodigoBarras"];function po(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",27),L.bc("click",function(){L.wc(n);var t=e.$implicit;return L.fc().setSelectedCuenta(t.numero)}),L.Dc(1),L.Sb()}if(2&t){var a=e.$implicit;L.lc("disabled",1==+a.cerrada),L.Cb(1),L.Fc(" ",a.nombre," ")}}function ho(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",28),L.bc("click",function(){return L.wc(n),L.fc().nuevaCuenta()}),L.Dc(1," Nueva "),L.Sb()}}var go=function(){return{standalone:!0}};function vo(t,e){if(1&t){var n=L.Ub();L.Tb(0,"mat-form-field",29),L.Tb(1,"input",30,31),L.bc("ngModelChange",function(t){return L.wc(n),L.fc().codigoBarras=t})("keyup.enter",function(){return L.wc(n),L.fc().buscarArticulo()}),L.Sb(),L.Sb()}if(2&t){var a=L.fc();L.Cb(1),L.lc("ngModel",a.codigoBarras)("ngModelOptions",L.nc(2,go))}}function Co(t,e){1&t&&L.Ob(0,"br")}function So(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",33),L.bc("click",function(){L.wc(n);var t=L.fc().$implicit;return L.fc().clickOnCategoria(t)}),L.Dc(1),L.Sb()}if(2&t){var a=L.fc().$implicit,o=L.fc();L.lc("disabled",o.bloqueoBotones||!o.cuentaActiva.cuenta),L.Cb(1),L.Fc(" ",a.descripcion," ")}}function To(t,e){if(1&t&&(L.Rb(0),L.Cc(1,So,2,2,"button",32),L.Qb()),2&t){var n=e.$implicit;L.Cb(1),L.lc("ngIf",n.mostrarEnPos)}}function _o(t,e){if(1&t&&(L.Tb(0,"span",11),L.Dc(1),L.Sb()),2&t){var n=L.fc();L.Cb(1),L.Fc("Cuenta de ",n.cuentaActiva.nombre,"")}}function yo(t,e){1&t&&(L.Tb(0,"span",11),L.Dc(1,"Por favor seleccione una cuenta. Gracias."),L.Sb())}function Do(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",20),L.bc("click",function(){return L.wc(n),L.fc().validarImpresion()}),L.Dc(1," Comanda "),L.Sb()}if(2&t){var a=L.fc();L.lc("disabled",!a.cuentaActiva.nombre||a.bloqueoBotones)}}function ko(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",20),L.bc("click",function(){return L.wc(n),L.fc().printCuenta()}),L.Dc(1," Cuenta "),L.Sb()}if(2&t){var a=L.fc();L.lc("disabled",!a.cuentaActiva.nombre||a.bloqueoBotones)}}function wo(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",20),L.bc("click",function(){return L.wc(n),L.fc().distribuirProductos()}),L.Dc(1," Distribuir "),L.Sb()}if(2&t){var a=L.fc();L.lc("disabled",a.mesaEnUso.cuentas.length<2||a.bloqueoBotones)}}function Eo(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",20),L.bc("click",function(){return L.wc(n),L.fc().unirCuentas()}),L.Dc(1," Unir cuentas "),L.Sb()}if(2&t){var a=L.fc();L.lc("disabled",a.mesaEnUso.cuentas.length<2||a.bloqueoBotones)}}function Po(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",20),L.bc("click",function(){return L.wc(n),L.fc().cobrarCuenta()}),L.Dc(1," Cobrar cuenta "),L.Sb()}if(2&t){var a=L.fc();L.lc("disabled",!a.cuentaActiva.nombre||a.esCajero()||a.bloqueoBotones)}}function xo(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",20),L.bc("click",function(){return L.wc(n),L.fc().enviarPedido()}),L.Dc(1," Enviar pedido "),L.Sb()}if(2&t){var a=L.fc();L.lc("disabled",!a.cuentaActiva.nombre||a.esCajero()||a.bloqueoBotones)}}function Oo(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",20),L.bc("click",function(){return L.wc(n),L.fc().trasladoMesa()}),L.Dc(1," Trasladar "),L.Sb()}if(2&t){var a=L.fc();L.lc("disabled",a.bloqueoBotones)}}function Mo(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",34),L.bc("click",function(){return L.wc(n),L.fc().cerrarMesa()}),L.Dc(1),L.Sb()}if(2&t){var a=L.fc();L.Cb(1),L.Fc(" Cerrar ",0==+a.mesaEnUso.mesa.esmostrador?"Mesa":0==+a.mesaEnUso.mesa.escallcenter?"Mostrador":"Pedido"," ")}}var Ro,Fo=((Ro=function(){function e(n,a,o,i,r,c,s,u){var d=this;l(this,e),this.dialog=n,this.snackBar=a,this.comandaSrvc=o,this.socket=i,this.ls=r,this.pdfServicio=c,this.configSrvc=s,this.articuloSrvc=u,this.clientePedido=null,this.closeSideNavEv=new L.o,this.mesaSavedEv=new L.o,this.showPortalComanda=!1,this.showPortalCuenta=!1,this.noComanda=0,this.sumCuenta=0,this.categorias=[],this.bloqueoBotones=!1,this.rolesUsuario=[],this.impreso=0,this.usaCodigoBarras=!1,this.codigoBarras=null,this.resetMesaEnUso=function(){return d.mesaEnUso={exito:!0,comanda:null,usuario:null,sede:null,estatus:null,mesa:{mesa:null,area:{area:null,sede:null,area_padre:null,nombre:null},numero:null,posx:null,posy:null,tamanio:null,estatus:null},numero_pedido:null,cuentas:[]}},this.resetLstProductosSeleccionados=function(){return d.lstProductosSeleccionados=[]},this.resetLstProductosDeCuenta=function(){return d.lstProductosDeCuenta=[]},this.resetCuentaActiva=function(){return d.cuentaActiva={cuenta:null,numero:null,nombre:null,productos:[]}},this.resetListadoArticulos=function(){return d.appLstProdAlt.loadArbolArticulos()},this.setListaCategorias=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return d.categorias=d.setVerBotones(t)},this.setVerBotones=function(e){var n,a=t(e);try{for(a.s();!(n=a.n()).done;){var o,i=n.value,r=t(i.categoria_grupo);try{t:for(r.s();!(o=r.n()).done;){var c,s=o.value,l=t(s.articulo);try{for(l.s();!(c=l.n()).done;)if(1==+c.value.mostrar_pos){s.mostrarEnPos=!0,i.mostrarEnPos=!0;continue t}}catch(u){l.e(u)}finally{l.f()}}}catch(u){r.e(u)}finally{r.f()}}}catch(u){a.e(u)}finally{a.f()}return e},this.clickOnCategoria=function(t){return d.appLstProdAlt.fillSubCategorias(t.categoria_grupo)},this.buscarArticulo=function(){d.codigoBarras&&d.codigoBarras.trim().length>0&&d.articuloSrvc.getArticulos({codigo:d.codigoBarras.trim()}).subscribe(function(t){if(t&&t.length>0){var e=t[0];d.agregarProductos({id:+e.articulo,nombre:e.descripcion,precio:+e.precio,impresora:e.impresora,presentacion:e.presentacion,codigo:e.codigo,combo:e.combo,multiple:e.multiple}),d.codigoBarras=null,d.txtCodigoBarras.focus()}})},this.llenaProductosSeleccionados=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.mesaEnUso;null==d.mesaEnUso.comanda&&(d.mesaEnUso=e),d.lstProductosSeleccionados=[];var n,a=t(e.cuentas);try{for(a.s();!(n=a.n()).done;){var o,i=n.value,r=t(i.productos);try{for(r.s();!(o=r.n()).done;){var c=o.value;d.lstProductosSeleccionados.push({id:+c.articulo.articulo,nombre:c.articulo.descripcion,cuenta:+c.numero_cuenta||1,idcuenta:+i.cuenta,cantidad:+c.cantidad,impreso:+c.impreso,precio:parseFloat(c.precio)||10,total:parseFloat(c.total)||parseFloat(c.cantidad)*parseFloat(c.precio),notas:c.notas||"",showInputNotas:!1,itemListHeight:"70px",detalle_comanda:+c.detalle_comanda,detalle_cuenta:+c.detalle_cuenta,impresora:c.articulo.impresora,detalle:c.detalle,monto_extra:+c.monto_extra||0,multiple:+c.articulo.multiple,combo:+c.articulo.combo})}}catch(s){r.e(s)}finally{r.f()}}}catch(s){a.e(s)}finally{a.f()}},this.cerrarMesa=function(){d.comandaSrvc.cerrarMesa(d.mesaEnUso.mesa.mesa).subscribe(function(t){t.exito?(d.snackBar.open(t.mensaje,"Comanda",{duration:3e3}),d.mesaEnUso.mesa.estatus=1,d.mesaSavedEv.emit(),d.socket.emit("refrescar:mesa",{mesaenuso:d.mesaEnUso})):(console.log("FALLA PARA CERRAR LA MESA...",t),d.snackBar.open("ERROR: ".concat(t.mensaje),"Comanda",{duration:7e3}))})},this.printToBT=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=window.open("com.restouch.impresion://impresion/".concat(t),"PrntBT","height=200,width=200,menubar=no,location=no,resizable=no,scrollbars=no,status=no");setTimeout(function(){return e.close()},1e3),d.bloqueoBotones=!1},this.printComandaPDF=function(){var t=+d.cuentaActiva.cuenta;d.pdfServicio.getComanda(t).subscribe(function(e){if(e){var n=new Blob([e],{type:"application/pdf"}),a=window.URL.createObjectURL(n);window.open(a,"cuenta_".concat(t),"height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no")}else d.snackBar.open("No se pudo generar la comanda...","Comanda",{duration:3e3})})},this.sumaDetalle=function(e){var n,a=0,o=t(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;a+=+i.total||0,a+=+i.monto_extra||0}}catch(r){o.e(r)}finally{o.f()}return a},this.enviarPedido=function(){var t=d.mesaEnUso.cuentas[0];d.cuentaActiva=d.mesaEnUso.cuentas.find(function(e){return+e.numero==+t.numero});var e=d.lstProductosSeleccionados.filter(function(t){return+t.cuenta==+d.cuentaActiva.numero});e.map(function(t){return t.impreso=1}),d.noComanda=d.mesaEnUso.comanda,d.cuentaActiva.productos=d.prepProductosComanda(e),d.mesaEnUso.cuentas.findIndex(function(t){return+t.cuenta==+d.cuentaActiva.cuenta})>-1&&d.comandaSrvc.save({area:d.mesaEnUso.mesa.area.area,mesa:d.mesaEnUso.mesa.mesa,mesero:d.mesaEnUso.usuario,comanda:d.mesaEnUso.comanda,cuentas:d.mesaEnUso.cuentas,numero_pedido:d.mesaEnUso.numero_pedido}).subscribe(function(e){e.exito&&(d.mesaEnUso.numero_pedido=e.comanda.numero_pedido,d.comandaSrvc.setProductoImpreso(t.cuenta).subscribe(function(e){d.llenaProductosSeleccionados(e.comanda),d.setSelectedCuenta(t.numero),d.cobrarCuenta()}))})},this.cambiarEstatusCuenta=function(t){var e=d.mesaEnUso.cuentas.findIndex(function(e){return+e.cuenta==+t.cuenta});d.mesaEnUso.cuentas[e].cerrada=+t.cerrada},this.esCajero=function(){return!1},this.trasladoMesa=function(){d.dialog.open(Yn,{width:"55%",data:{mesaEnUso:d.mesaEnUso}}).afterClosed().subscribe(function(t){t&&(d.socket.emit("refrescar:mesa",{mesaenuso:d.mesaEnUso}),d.closeSideNavEv.emit(d.mesaEnUso))})},this.getNotasGenerales=function(){d.dialog.open(Ba,{width:"50%",data:{notasGenerales:d.mesaEnUso.notas_generales||""}}).afterClosed().subscribe(function(t){null!==t&&t.trim().length>0&&d.comandaSrvc.saveNotasGenerales({comanda:d.mesaEnUso.comanda,notas_generales:t}).subscribe(function(e){e.exito?(d.mesaEnUso.notas_generales=t,d.snackBar.open(e.mensaje,"Comanda",{duration:3e3})):d.snackBar.open("ERROR: ".concat(e.mensaje),"Comanda",{duration:7e3})})})},this.nuevaCuenta=function(){d.dialog.open(Ha,{width:"50%",data:{mesaEnUso:d.mesaEnUso}}).afterClosed().subscribe(function(t){t&&d.closeSideNavEv.emit()})},this.distribuirProductos=function(){d.dialog.open($a,{width:"50%",data:{mesaEnUso:d.mesaEnUso,lstProductos:d.lstProductosSeleccionados||[]}}).afterClosed().subscribe(function(t){t&&d.closeSideNavEv.emit()})}}return d(e,[{key:"ngOnInit",value:function(){var t=this;this.resetMesaEnUso(),this.resetLstProductosSeleccionados(),this.resetLstProductosDeCuenta(),this.resetCuentaActiva(),this.impreso=0,this.noComanda=this.mesaEnUso.comanda||0,this.llenaProductosSeleccionados(),this.ls.get(Te.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(Te.a.usrTokenVar).sede_uuid),this.socket.on("reconnect",function(){return t.socket.emit("joinRestaurant",t.ls.get(Te.a.usrTokenVar).sede_uuid)})),this.usaCodigoBarras=this.configSrvc.getConfig(Te.a.CONSTANTES.RT_USA_CODIGO_BARRAS)||!1}},{key:"setSelectedCuenta",value:function(t){this.bloqueoBotones=!0,this.cuentaActiva=this.mesaEnUso.cuentas.find(function(e){return+e.numero==+t}),this.setLstProductosDeCuenta(),this.bloqueoBotones=!1}},{key:"setSumaCuenta",value:function(e){var n,a=0,o=t(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;a+=i.precio*i.cantidad}}catch(r){o.e(r)}finally{o.f()}this.sumCuenta=a}},{key:"setLstProductosDeCuenta",value:function(){var t=this;this.lstProductosDeCuenta=this.lstProductosSeleccionados.filter(function(e){return+e.cuenta==+t.cuentaActiva.numero})}},{key:"agregarProductos",value:function(t){var e=this;1==+t.combo||1==+t.multiple?(this.bloqueoBotones=!0,this.dialog.open(Ua,{maxWidth:"50%",data:new ja(t,"S\xed","No")}).afterClosed().subscribe(function(t){t&&t.respuesta&&t.seleccion.receta.length>0?e.comandaSrvc.saveDetalleCombo(e.mesaEnUso.comanda,e.cuentaActiva.cuenta,t.seleccion).subscribe(function(t){t.exito?(e.mesaEnUso=t.comanda,e.llenaProductosSeleccionados(e.mesaEnUso),e.setSelectedCuenta(+e.cuentaActiva.numero)):e.snackBar.open("ERROR:".concat(t.mensaje),"Comanda",{duration:3e3}),e.bloqueoBotones=!1}):(e.bloqueoBotones=!1,e.snackBar.open("Error, Debe seleccionar los productos del combo","Comanda",{duration:7e3}))})):this.addProductoSelected(t)}},{key:"addProductoSelected",value:function(t){var e=this;if(this.bloqueoBotones=!0,+this.cuentaActiva.numero){var n=this.lstProductosSeleccionados.findIndex(function(n){return+n.id==+t.id&&+n.cuenta==+e.cuentaActiva.numero&&0==+n.impreso});if(n<0)this.detalleComanda={articulo:t.id,cantidad:1,precio:+t.precio,total:1*+t.precio,notas:""},this.comandaSrvc.saveDetalle(this.mesaEnUso.comanda,this.cuentaActiva.cuenta,this.detalleComanda).subscribe(function(t){t.exito?(e.mesaEnUso=t.comanda,e.llenaProductosSeleccionados(e.mesaEnUso),e.setSelectedCuenta(+e.cuentaActiva.numero)):e.snackBar.open("ERROR:".concat(t.mensaje),"Comanda",{duration:3e3}),e.bloqueoBotones=!1});else{var a=this.lstProductosSeleccionados[n];this.detalleComanda={detalle_cuenta:a.detalle_cuenta,detalle_comanda:a.detalle_comanda,articulo:a.id,cantidad:+a.cantidad+1,precio:+a.precio,total:(+a.cantidad+1)*+a.precio,notas:a.notas},this.comandaSrvc.saveDetalle(this.mesaEnUso.comanda,this.cuentaActiva.cuenta,this.detalleComanda).subscribe(function(t){t.exito?(e.mesaEnUso=t.comanda,e.llenaProductosSeleccionados(e.mesaEnUso),e.setSelectedCuenta(+e.cuentaActiva.numero)):e.snackBar.open("ERROR:".concat(t.mensaje),"Comanda",{duration:3e3}),e.bloqueoBotones=!1})}this.setLstProductosDeCuenta()}}},{key:"updProductosCuenta",value:function(t){var e=this,n=t.listaProductos||[],a=this.lstProductosSeleccionados.filter(function(t){return+t.cuenta!=+e.cuentaActiva.numero});this.lstProductosSeleccionados=n.length>0?a.concat(n):a,t.comanda&&(this.mesaEnUso=t.comanda,this.llenaProductosSeleccionados(this.mesaEnUso),this.setSelectedCuenta(+this.cuentaActiva.numero))}},{key:"prepProductosComanda",value:function(t){for(var e=[],n=0;n<t.length;n++)e.push({articulo:t[n].id,cantidad:t[n].cantidad,precio:t[n].precio,total:t[n].total,notas:t[n].notas,impreso:1,detalle_comanda:t[n].detalle_comanda,detalle_cuenta:t[n].detalle_cuenta});return e}},{key:"validarImpresion",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.configSrvc.getConfig(Te.a.CONSTANTES.RT_INGRESO_NUMERO_PEDIDO);if(1==+this.mesaEnUso.mesa.esmostrador&&n&&!this.mesaEnUso.numero_pedido){var a=this.configSrvc.getConfig(Te.a.CONSTANTES.RT_TOTAL_NUMEROS_PEDIDO);(!a||a<=0)&&(a=30),this.dialog.open(Ea,{maxWidth:"50%",data:new wa("Numero de Pedido",a,"S\xed","No")}).afterClosed().subscribe(function(n){n&&n.respuesta&&n.pedido?(t.mesaEnUso.numero_pedido=n.pedido,t.printComanda(e)):t.snackBar.open("Error, Debe seleccionar un numero de pedido","Comanda",{duration:7e3})})}else this.printComanda(e)}},{key:"printComanda",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.bloqueoBotones=!0,this.impreso=0;for(var n=this.configSrvc.getConfig(Te.a.CONSTANTES.RT_MODO_COMANDA)||1,a=function(a){var o=t.mesaEnUso.cuentas[a];t.cuentaActiva=t.mesaEnUso.cuentas.find(function(t){return+t.numero==+o.numero});var i=t.lstProductosSeleccionados.filter(function(e){return+e.cuenta==+t.cuentaActiva.numero}),r=i.filter(function(t){return 0==+t.impreso&&+t.cantidad>0});r.length>0?(i.map(function(t){return t.impreso=1}),t.noComanda=t.mesaEnUso.comanda,t.cuentaActiva.productos=t.prepProductosComanda(i),t.mesaEnUso.cuentas.findIndex(function(e){return+e.cuenta==+t.cuentaActiva.cuenta})>-1&&t.comandaSrvc.save({area:t.mesaEnUso.mesa.area.area,mesa:t.mesaEnUso.mesa.mesa,mesero:t.mesaEnUso.usuario,comanda:t.mesaEnUso.comanda,cuentas:t.mesaEnUso.cuentas,numero_pedido:t.mesaEnUso.numero_pedido}).subscribe(function(a){a.exito?(t.mesaEnUso.numero_pedido=a.comanda.numero_pedido,t.comandaSrvc.setProductoImpreso(o.cuenta).subscribe(function(a){a.exito&&t.impreso++,t.llenaProductosSeleccionados(a.comanda),t.setSelectedCuenta(o.numero),t.snackBar.open("Cuenta actualizada","Cuenta #".concat(o.numero),{duration:3e3});var i=[],c=[];try{i=r.filter(function(t){return 0==+t.impresora.bluetooth}),c=r.filter(function(t){return 1==+t.impresora.bluetooth})}catch(s){console.log("PRODUCTOS A IMPRIMIR = ",r),console.log("NORMAL = ",i),console.log("BT = ",c),console.log(s)}e?t.printComandaPDF():(i.length>0&&(3!==n?(t.socket.emit("print:comanda","".concat(JSON.stringify({Tipo:"Comanda",Nombre:t.cuentaActiva.nombre,Numero:t.noComanda,DetalleCuenta:i,Ubicacion:"".concat(t.mesaEnUso.mesa.area.nombre," - Mesa ").concat(t.mesaEnUso.mesa.etiqueta||t.mesaEnUso.mesa.numero),Mesero:"".concat(t.mesaEnUso.mesero.nombres," ").concat(t.mesaEnUso.mesero.apellidos),Total:null,NumeroPedido:t.mesaEnUso.numero_pedido,NotasGenerales:t.mesaEnUso.notas_generales||""}))),t.snackBar.open("Imprimiendo comanda #".concat(t.noComanda),"Comanda",{duration:7e3})):t.snackBar.open("Comanda #".concat(t.noComanda," enviada a cocina"),"Comanda",{duration:7e3}),t.bloqueoBotones=!1),c.length>0&&3!==n&&t.printToBT(JSON.stringify({Tipo:"Comanda",Nombre:t.cuentaActiva.nombre,Numero:t.noComanda,DetalleCuenta:c,Ubicacion:"".concat(t.mesaEnUso.mesa.area.nombre," - Mesa ").concat(t.mesaEnUso.mesa.etiqueta||t.mesaEnUso.mesa.numero),Mesero:"".concat(t.mesaEnUso.mesero.nombres," ").concat(t.mesaEnUso.mesero.apellidos),Total:null,NumeroPedido:t.mesaEnUso.numero_pedido}))),+t.impreso===t.mesaEnUso.cuentas.length&&(t.impreso=0,t.socket.emit("refrescar:mesa",{mesaenuso:t.mesaEnUso}),t.socket.emit("refrescar:listaCocina",{mesaenuso:t.mesaEnUso}),0==+t.mesaEnUso.mesa.esmostrador?t.closeSideNavEv.emit():t.cobrarCuenta())})):t.snackBar.open("ERROR: ".concat(a.mensaje),"Cuenta #".concat(t.cuentaActiva.numero),{duration:3e3}),t.bloqueoBotones=!1})):(t.impreso++,t.bloqueoBotones=!1)},o=0;o<this.mesaEnUso.cuentas.length;o++)a(o)}},{key:"printCuenta",value:function(){this.bloqueoBotones=!0,this.lstProductosAImprimir=this.lstProductosDeCuenta.filter(function(t){return 1==+t.impreso}),this.setSumaCuenta(this.lstProductosAImprimir);var t=this.sumaDetalle(this.lstProductosAImprimir),e=this.mesaEnUso.mesa.impresora||this.mesaEnUso.mesa.area.impresora,n=this.configSrvc.getConfig(Te.a.CONSTANTES.RT_IMPRIME_PROPINA_SUGERIDA),a={Tipo:"Cuenta",Nombre:this.cuentaActiva.nombre,Numero:null,DetalleCuenta:this.lstProductosAImprimir,Total:t,Empresa:this.ls.get(Te.a.usrTokenVar).empresa,Restaurante:this.ls.get(Te.a.usrTokenVar).restaurante,PropinaSugerida:n?(.1*t).toFixed(2):null,Impresora:e,Ubicacion:"".concat(this.mesaEnUso.mesa.area.nombre," - Mesa ").concat(this.mesaEnUso.mesa.etiqueta||this.mesaEnUso.mesa.numero," - Comanda ").concat(this.mesaEnUso.comanda),Mesero:"".concat(this.mesaEnUso.mesero.nombres," ").concat(this.mesaEnUso.mesero.apellidos)};0==+e.bluetooth?this.socket.emit("print:cuenta","".concat(JSON.stringify(a))):this.printToBT(JSON.stringify(a)),this.snackBar.open("Imprimiendo cuenta de ".concat(this.cuentaActiva.nombre),"Cuenta",{duration:7e3}),this.bloqueoBotones=!1,this.closeSideNavEv.emit()}},{key:"unirCuentas",value:function(){var t=this;this.dialog.open(Qn,{width:"55%",data:{lstProductosSeleccionados:this.lstProductosSeleccionados,mesaEnUso:this.mesaEnUso}}).afterClosed().subscribe(function(e){e&&t.closeSideNavEv.emit()})}},{key:"cobrarCuenta",value:function(){var t=this;this.comandaSrvc.getCuenta(this.cuentaActiva.cuenta).subscribe(function(e){if(e.pendiente.length>0)t.snackBar.open("Cobro","Tiene productos sin comandar",{duration:3e3});else{var n=t.lstProductosDeCuenta.filter(function(t){return 1==+t.impreso});n.length>0?t.dialog.open(ya,{width:"95%",data:{mesaenuso:t.mesaEnUso,cuenta:t.cuentaActiva.nombre,idcuenta:t.cuentaActiva.cuenta,productosACobrar:n,porcentajePropina:0,impresora:0==+t.mesaEnUso.mesa.esmostrador?t.mesaEnUso.mesa.area.impresora_factura||null:t.mesaEnUso.mesa.impresora||t.mesaEnUso.mesa.area.impresora,clientePedido:t.clientePedido}}).afterClosed().subscribe(function(e){e&&"closePanel"!==e?(t.cambiarEstatusCuenta(e),t.closeSideNavEv.emit()):"closePanel"===e&&t.closeSideNavEv.emit()}):t.snackBar.open("Cobro","Sin productos a cobrar.",{duration:3e3})}})}}]),e}()).\u0275fac=function(t){return new(t||Ro)(L.Nb(N.b),L.Nb(M.a),L.Nb(zn),L.Nb($n.a),L.Nb(Ee.a),L.Nb(Wa.a),L.Nb(qn.a),L.Nb(Mn.a))},Ro.\u0275cmp=L.Hb({type:Ro,selectors:[["app-tran-comanda"]],viewQuery:function(t,e){var n;1&t&&(L.Ic(mo,1),L.Ic(fo,1)),2&t&&(L.sc(n=L.cc())&&(e.appLstProdAlt=n.first),L.sc(n=L.cc())&&(e.txtCodigoBarras=n.first))},inputs:{mesaEnUso:"mesaEnUso",clientePedido:"clientePedido"},outputs:{closeSideNavEv:"closeSideNavEv",mesaSavedEv:"mesaSavedEv"},decls:46,vars:26,consts:[["fxLayout","row","fxLayout.xs","column"],["fxFlex","50%","fxFelx.xs","100%","fxLayoutAlign","center start"],[1,"bld",2,"font-size","16pt","margin-left","10px"],["fxFlex","50%","fxFelx.xs","100%","fxLayoutAlign","end start"],["mat-raised-button","","type","button","color","accent",2,"margin-left","8px",3,"click"],[1,"divFullSize"],[1,"row"],["align","center",1,"col","m12","s12",2,"padding","0 !important"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"disabled","click",4,"ngFor","ngForOf"],["mat-raised-button","","type","button","class","btnAccion",3,"click",4,"ngIf"],["align","center",1,"col","m6","s12",2,"padding","0 !important"],[1,"bld"],["class","fullWidth","style","margin-left: 10px; margin-right: 10px;",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","bld",4,"ngIf"],["align","center"],["direction","down"],["mat-fab","","color","warn"],[2,"font-size","18pt !important"],["mat-mini-fab","","type","button","color","warn",1,"btnAccion","btnAccionComanda",3,"disabled","click"],["mat-mini-fab","","type","button","color","warn","class","btnAccion btnAccionComanda",3,"disabled","click",4,"ngIf"],["mat-mini-fab","","type","button","color","warn","class","btnAccionComanda",3,"click",4,"ngIf"],[1,"col","m6","s12","mat-elevation-z3","colProductos"],[3,"bloqueoBotones","productoClickedEv","categoriasFilledEv"],["appLstProdAlt",""],[3,"listaProductos","noCuenta","IdComanda","IdCuenta","bloqueoBotones","mesaEnUso","productoRemovedEv"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button",1,"btnAccion",3,"click"],[1,"fullWidth",2,"margin-left","10px","margin-right","10px"],["matInput","","cdkFocusInitial","","type","text","placeholder","C\xf3digo","name","codigoBarras",3,"ngModel","ngModelOptions","ngModelChange","keyup.enter"],["txtCodigoBarras","matInput"],["mat-raised-button","","class","btnAccion","color","accent",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","accent",1,"btnAccion",3,"disabled","click"],["mat-mini-fab","","type","button","color","warn",1,"btnAccionComanda",3,"click"]],template:function(t,e){1&t&&(L.Tb(0,"div",0),L.Tb(1,"div",1),L.Tb(2,"span",2),L.Dc(3),L.Sb(),L.Sb(),L.Tb(4,"div",3),L.Tb(5,"button",4),L.bc("click",function(){return e.closeSideNavEv.emit()}),L.Dc(6," Cerrar Panel "),L.Sb(),L.Sb(),L.Sb(),L.Tb(7,"div",5),L.Tb(8,"div",6),L.Tb(9,"div",7),L.Cc(10,po,2,2,"button",8),L.Cc(11,ho,2,0,"button",9),L.Sb(),L.Sb(),L.Tb(12,"div",6),L.Tb(13,"div",10),L.Tb(14,"span",11),L.Dc(15,"Productos"),L.Sb(),L.Ob(16,"br"),L.Cc(17,vo,3,3,"mat-form-field",12),L.Cc(18,Co,1,0,"br",13),L.Cc(19,To,2,1,"ng-container",14),L.Sb(),L.Tb(20,"div",10),L.Cc(21,_o,2,1,"span",15),L.Cc(22,yo,2,0,"span",15),L.Tb(23,"div",16),L.Tb(24,"eco-fab-speed-dial",17),L.Tb(25,"eco-fab-speed-dial-trigger"),L.Tb(26,"button",18),L.Tb(27,"mat-icon",19),L.Dc(28,"keyboard_arrow_down"),L.Sb(),L.Sb(),L.Sb(),L.Tb(29,"eco-fab-speed-dial-actions"),L.Tb(30,"button",20),L.bc("click",function(){return e.getNotasGenerales()}),L.Dc(31," Notas "),L.Sb(),L.Cc(32,Do,2,1,"button",21),L.Cc(33,ko,2,1,"button",21),L.Cc(34,wo,2,1,"button",21),L.Cc(35,Eo,2,1,"button",21),L.Cc(36,Po,2,1,"button",21),L.Cc(37,xo,2,1,"button",21),L.Cc(38,Oo,2,1,"button",21),L.Cc(39,Mo,2,1,"button",22),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Tb(40,"div",6),L.Tb(41,"div",23),L.Tb(42,"app-lista-producto-alt",24,25),L.bc("productoClickedEv",function(t){return e.agregarProductos(t)})("categoriasFilledEv",function(t){return e.setListaCategorias(t)}),L.Sb(),L.Sb(),L.Tb(44,"div",23),L.Tb(45,"app-lista-productos-comanda",26),L.bc("productoRemovedEv",function(t){return e.updProductosCuenta(t)}),L.Sb(),L.Sb(),L.Sb(),L.Sb()),2&t&&(L.Cb(3),L.Hc(" ",e.mesaEnUso.mesa.area.nombre," - Mesa ",e.mesaEnUso.mesa.etiqueta||e.mesaEnUso.mesa.numero," - Comanda ",e.mesaEnUso.comanda," "),L.Cb(7),L.lc("ngForOf",e.mesaEnUso.cuentas),L.Cb(1),L.lc("ngIf",0==+e.mesaEnUso.mesa.esmostrador&&0==+e.mesaEnUso.mesa.escallcenter),L.Cb(6),L.lc("ngIf",e.usaCodigoBarras),L.Cb(1),L.lc("ngIf",e.usaCodigoBarras),L.Cb(1),L.lc("ngForOf",e.categorias),L.Cb(2),L.lc("ngIf",e.cuentaActiva.nombre),L.Cb(1),L.lc("ngIf",!e.cuentaActiva.nombre),L.Cb(8),L.lc("disabled",e.bloqueoBotones),L.Cb(2),L.lc("ngIf",0==+e.mesaEnUso.mesa.escallcenter),L.Cb(1),L.lc("ngIf",0==+e.mesaEnUso.mesa.esmostrador),L.Cb(1),L.lc("ngIf",0==+e.mesaEnUso.mesa.esmostrador),L.Cb(1),L.lc("ngIf",0==+e.mesaEnUso.mesa.esmostrador),L.Cb(1),L.lc("ngIf",0==+e.mesaEnUso.mesa.escallcenter),L.Cb(1),L.lc("ngIf",1==+e.mesaEnUso.mesa.escallcenter),L.Cb(1),L.lc("ngIf",0==+e.mesaEnUso.mesa.esmostrador),L.Cb(1),L.lc("ngIf",e.lstProductosSeleccionados.length<=0),L.Cb(3),L.lc("bloqueoBotones",e.bloqueoBotones),L.Cb(3),L.lc("listaProductos",e.lstProductosDeCuenta)("noCuenta",+e.cuentaActiva.numero)("IdComanda",e.mesaEnUso.comanda)("IdCuenta",e.cuentaActiva.cuenta)("bloqueoBotones",e.bloqueoBotones)("mesaEnUso",e.mesaEnUso))},directives:[Rn.c,Rn.a,Rn.b,O.a,b.l,b.m,Ce.b,Ce.d,T.a,Ce.a,Ka,bo,_.b,y.b,f.c,f.k,f.n],styles:[".divFullSize[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:hidden}.col[_ngcontent-%COMP%]{padding-top:1px;padding-bottom:1px}.btnAccionComanda[_ngcontent-%COMP%]{width:135px}.colProductos[_ngcontent-%COMP%]{overflow-y:auto;height:450px!important}@media (max-width:400px){.colProductos[_ngcontent-%COMP%]{height:300px!important}}@media (min-width:401px) and (max-width:1024px){.colProductos[_ngcontent-%COMP%]{height:450px!important}}@media (min-height:985px){.colProductos[_ngcontent-%COMP%]{height:600px!important}}@media (max-height:768px){.colProductos[_ngcontent-%COMP%]{height:400px!important}}"]}),Ro),Io=["matTabArea"],Ao=["rightSidenav"],No=["tabArea"],jo=["snTranComanda"];function Uo(t,e){if(1&t){var n=L.Ub();L.Tb(0,"app-mesa",12),L.bc("onClickMesa",function(t){return L.wc(n),L.fc(2).onClickMesa(t)}),L.Sb()}if(2&t){var a=e.$implicit,o=L.fc(2);L.lc("configuracion",a)("isDisabled",o.cargando)}}function Bo(t,e){if(1&t){var n=L.Ub();L.Tb(0,"mat-tab",7,8),L.Tb(2,"div",9,10),L.bc("resize",function(t){return L.wc(n),L.fc().onResize(t)},!1,L.vc),L.Cc(4,Uo,1,2,"app-mesa",11),L.Sb(),L.Sb()}if(2&t){var a=e.$implicit;L.mc("label",a.nombre),L.Cb(4),L.lc("ngForOf",a.mesas)}}var Ho,Lo,zo=((Lo=function(){function e(n,a,o,i,r,c,s){var u=this;l(this,e),this.dialog=n,this.snackBar=a,this.ls=o,this.areaSrvc=i,this.comandaSrvc=r,this.configSrvc=c,this.socket=s,this.divSize={h:0,w:0},this.cargando=!1,this.lstTabsAreas=[],this.lstTabsAreasForUpdate=[],this.configTipoPantalla=1,this.clientePedido=null,this.actualizar=function(){var t=u.lstTabsAreas.find(function(t){return+t.area==+u.mesaSeleccionada.mesa.area.area}),e=u.lstTabsAreas.findIndex(function(t){return+t.area==+u.mesaSeleccionada.mesa.area.area}),n=t.mesas.findIndex(function(t){return+t.mesa==+u.mesaSeleccionada.mesa.mesa});u.lstTabsAreas[e].mesas[n].estatus=1,u.toggleRightSidenav()},this.resetMesaSeleccionada=function(){return u.mesaSeleccionada={comanda:null,usuario:null,sede:null,estatus:null,mesa:{mesa:null,area:{area:null,sede:null,area_padre:null,nombre:null},numero:null,posx:null,posy:null,tamanio:null,estatus:null},cuentas:[]}},this.loadAreas=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.cargando=!0,u.areaSrvc.get({sede:+u.ls.get(Te.a.usrTokenVar).sede||0}).subscribe(function(n){t?(u.lstTabsAreasForUpdate=n,u.updateTableStatus(e.mesaenuso)):(u.lstTabsAreas=n,u.cargando=!1)})},this.updateTableStatus=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t(u.lstTabsAreasForUpdate);try{for(a.s();!(e=a.n()).done;){var o,i=e.value,r=t(i.mesas);try{for(r.s();!(o=r.n()).done;){var c=o.value;u.setEstatusMesa({area:+i.area,mesa:+c.mesa},+c.estatus)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){a.e(s)}finally{a.f()}u.cargando=!1,u.rightSidenav.opened&&+u.mesaSeleccionada.comanda==+n.comanda&&u.toggleRightSidenav()},this.onResize=function(t){return u.setDivSize()},this.aperturaCargaMesa=function(t){switch(+t.mesaSelected.estatus){case 1:u.openAbrirMesaDialog(t.mesaSelected);break;case 2:u.loadComandaMesa(t.mesaSelected)}},this.setEstatusMesa=function(t,e){var n=u.lstTabsAreas.findIndex(function(e){return+e.area==+t.area});if(n>-1){var a=u.lstTabsAreas[n].mesas.findIndex(function(e){return+e.mesa==+t.mesa});a>-1&&(u.lstTabsAreas[n].mesas[a].estatus=e)}},this.guardarMesa=function(t){u.comandaSrvc.save(u.mesaSeleccionadaToOpen).subscribe(function(e){e.exito?(u.socket.emit("refrescar:mesa",{}),u.mesaSeleccionada=e.comanda,u.setEstatusMesa(t,+e.comanda.mesa.estatus),u.snTrancomanda.llenaProductosSeleccionados(u.mesaSeleccionada),u.snTrancomanda.setSelectedCuenta(u.mesaSeleccionada.cuentas[0].numero),u.snTrancomanda.rolesUsuario=u.mesaSeleccionada.turno_rol,u.toggleRightSidenav()):u.snackBar.open("".concat(e.mensaje),"ERROR",{duration:5e3})})},this.toggleRightSidenav=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;u.rightSidenav.toggle().then(function(e){"close"===e?(u.checkEstatusMesa(),t&&u.loadAreas(!0,{mesaenuso:t})):"open"===e&&1===u.mesaSeleccionada.cuentas.length&&u.snTrancomanda.setSelectedCuenta(u.mesaSeleccionada.cuentas[0].numero)})},this.cerrandoRightSideNav=function(){u.snTrancomanda.resetMesaEnUso(),u.snTrancomanda.resetLstProductosDeCuenta(),u.snTrancomanda.resetLstProductosSeleccionados(),u.snTrancomanda.resetCuentaActiva(),u.snTrancomanda.resetListadoArticulos(),u.fuerzaCierreComanda(!1)},this.checkEstatusMesa=function(){u.mesaSeleccionada&&u.mesaSeleccionada.cuentas&&u.mesaSeleccionada.cuentas.length>0&&0===(u.mesaSeleccionada.cuentas.filter(function(t){return 0==+t.cerrada}).length||0)&&u.setEstatusMesa({area:u.mesaSeleccionada.mesa.area.area,mesa:u.mesaSeleccionada.mesa.mesa},1)},this.fuerzaCierreComanda=function(t){u.comandaSrvc.cerrarEstacion(u.mesaSeleccionada.comanda).subscribe(function(e){u.loadComandaMesa(u.mesaSeleccionada.mesa,t)})},this.openTranComandaAlt=function(){u.dialog.open(Ln,{maxWidth:"100vw",maxHeight:"100vh",width:"99vw",height:"99vh",disableClose:!0,data:{mesa:u.mesaSeleccionada}}).afterClosed().subscribe(function(t){console.log(t)})},this.loadComandaMesa=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];u.comandaSrvc.getComandaDeMesa(t.mesa).subscribe(function(t){if(t.exito)if(Array.isArray(t)?(0===t.length&&(u.mesaSeleccionada={mesa:u.mesaSeleccionada.mesa,cuentas:[{cerrada:1}]}),u.checkEstatusMesa()):(u.mesaSeleccionada=t,u.snTrancomanda.rolesUsuario=u.mesaSeleccionada.turno_rol),u.checkEstatusMesa(),e)switch(u.snTrancomanda.llenaProductosSeleccionados(u.mesaSeleccionada),u.configTipoPantalla){case 1:u.toggleRightSidenav();break;case 2:u.openTranComandaAlt();break;default:u.toggleRightSidenav()}else u.checkEstatusMesa();else t.mensaje&&u.snackBar.open("".concat(t.mensaje),"ERROR",{duration:5e3}),Array.isArray(t)&&0===t.length&&(u.mesaSeleccionada={mesa:u.mesaSeleccionada.mesa,cuentas:[{cerrada:1}]}),u.checkEstatusMesa();u.checkEstatusMesa()})}}return d(e,[{key:"ngOnInit",value:function(){var t=this;this.loadAreas(),this.resetMesaSeleccionada(),this.ls.get(Te.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(Te.a.usrTokenVar).sede_uuid),this.socket.on("reconnect",function(){return t.socket.emit("joinRestaurant",t.ls.get(Te.a.usrTokenVar).sede_uuid)}),this.socket.on("refrescar:mesa",function(e){t.loadAreas(!0,e)})),this.configTipoPantalla=this.configSrvc.getConfig(Te.a.CONSTANTES.RT_PANTALLA_TOMA_COMANDA)}},{key:"ngAfterViewInit",value:function(){var t=this;setTimeout(function(){t.setDivSize(),t.snTrancomanda.resetMesaEnUso()},600)}},{key:"setDivSize",value:function(){}},{key:"onClickMesa",value:function(t){var e=this;if(0==+t.mesaSelected.escallcenter)this.aperturaCargaMesa(t);else{var n="".concat(Te.a.rtClientePedido,"_").concat(t.mesaSelected.mesa);1==+t.mesaSelected.estatus?(this.ls.clear(n),this.dialog.open(hn,{width:"50%",disableClose:!0,data:{mesa:t.mesaSelected}}).afterClosed().subscribe(function(a){a&&(e.clientePedido=a,e.ls.set(n,e.clientePedido),e.aperturaCargaMesa(t))})):(this.clientePedido=this.ls.get(n),this.aperturaCargaMesa(t))}}},{key:"openAbrirMesaDialog",value:function(t){var e,n=this;this.mesaSeleccionadaToOpen={nombreArea:this.tabArea.textLabel,area:+t.area,mesa:+t.mesa,numero:+t.numero,mesero:"",comensales:"1",comanda:0,esEvento:!1,dividirCuentasPorSillas:!1,estatus:1,clientePedido:this.clientePedido||null,cuentas:[{numero:1,nombre:(null===(e=this.clientePedido)||void 0===e?void 0:e.nombre)||"\xdanica",productos:[]}]},0==+t.esmostrador?this.dialog.open(On,{width:"50%",height:"auto",disableClose:!0,data:this.mesaSeleccionadaToOpen}).afterClosed().subscribe(function(e){e&&(n.mesaSeleccionadaToOpen=e,n.guardarMesa(t))}):(this.mesaSeleccionadaToOpen.mesero=this.ls.get(Te.a.usrTokenVar).idusr,this.guardarMesa(t))}}]),e}()).\u0275fac=function(t){return new(t||Lo)(L.Nb(N.b),L.Nb(M.a),L.Nb(Ee.a),L.Nb(we),L.Nb(zn),L.Nb(qn.a),L.Nb($n.a))},Lo.\u0275cmp=L.Hb({type:Lo,selectors:[["app-tran-areas"]],viewQuery:function(t,e){var n;1&t&&(L.Ic(Io,1),L.Ic(Ao,1),L.Ic(No,1),L.Ic(jo,1)),2&t&&(L.sc(n=L.cc())&&(e.pestania=n.first),L.sc(n=L.cc())&&(e.rightSidenav=n.first),L.sc(n=L.cc())&&(e.tabArea=n.first),L.sc(n=L.cc())&&(e.snTrancomanda=n.first))},decls:8,vars:4,consts:[[1,"matSideNavContainer"],["mode","over","position","end","disableClose","",3,"opened","openedChange","closedStart"],["rightSidenav",""],[3,"mesaEnUso","clientePedido","mesaSavedEv","closeSideNavEv"],["snTranComanda",""],["dynamicHeight","","backgroundColor","primary"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],["tabArea",""],[1,"divAreaMesa",3,"resize"],["matTabArea",""],[3,"configuracion","isDisabled","onClickMesa",4,"ngFor","ngForOf"],[3,"configuracion","isDisabled","onClickMesa"]],template:function(t,e){1&t&&(L.Tb(0,"mat-sidenav-container",0),L.Tb(1,"mat-sidenav",1,2),L.bc("openedChange",function(t){return e.openedRightPanel=t})("closedStart",function(){return e.cerrandoRightSideNav()}),L.Tb(3,"app-tran-comanda",3,4),L.bc("mesaSavedEv",function(){return e.actualizar()})("closeSideNavEv",function(t){return e.toggleRightSidenav(t)}),L.Sb(),L.Sb(),L.Tb(5,"mat-sidenav-content"),L.Tb(6,"mat-tab-group",5),L.Cc(7,Bo,5,2,"mat-tab",6),L.Sb(),L.Sb(),L.Sb()),2&t&&(L.Cb(1),L.lc("opened",e.openedRightPanel),L.Cb(2),L.lc("mesaEnUso",e.mesaSeleccionada)("clientePedido",e.clientePedido),L.Cb(4),L.lc("ngForOf",e.lstTabsAreas))},directives:[j.b,j.a,Fo,j.c,w.b,b.l,w.a,$e],styles:[".matSideNavContainer[_ngcontent-%COMP%]{height:90%;overflow:hidden!important}.divAreaMesa[_ngcontent-%COMP%]{width:100vw;height:90vh;background-color:hsla(0,0%,78%,.28627450980392155)}mat-sidenav[_ngcontent-%COMP%]{width:97vw}  .mat-drawer-inner-container{overflow-y:auto!important;overflow-x:hidden!important}"]}),Lo),qo=((Ho=function(){function t(e){l(this,t),this.http=e,this.moduleUrl="turno",this.srvcErrHndl=new _e.a}return d(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Te.a.urlMantenimientos,"/").concat(this.moduleUrl,"/buscar?").concat(ke.stringify(t))).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(t){return this.http.post("".concat(Te.a.urlMantenimientos,"/").concat(this.moduleUrl,"/guardar").concat(t.turno?"/"+t.turno:""),t).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"getDetalle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.http.get("".concat(Te.a.urlMantenimientos,"/").concat(this.moduleUrl,"/buscar_usuario/").concat(t,"?").concat(ke.stringify(e))).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"saveDetalle",value:function(t){return this.http.post("".concat(Te.a.urlMantenimientos,"/").concat(this.moduleUrl,"/agregar_usuario/").concat(t.turno),t).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"anularDetalle",value:function(t){return this.http.post("".concat(Te.a.urlMantenimientos,"/").concat(this.moduleUrl,"/anular_usuario/").concat(t.turno),t).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||Ho)(L.Xb(m.b))},Ho.\u0275prov=L.Jb({token:Ho,factory:Ho.\u0275fac,providedIn:"root"}),Ho);function $o(t,e){if(1&t){var n=L.Ub();L.Tb(0,"mat-list-item",5),L.bc("click",function(){L.wc(n);var t=e.$implicit;return L.fc().getTurno(t)}),L.Tb(1,"mat-icon",6),L.Dc(2,"schedule"),L.Sb(),L.Tb(3,"h5",7),L.Dc(4),L.gc(5,"date"),L.Sb(),L.Ob(6,"br"),L.Tb(7,"p",7),L.Dc(8),L.gc(9,"date"),L.Sb(),L.Sb()}if(2&t){var a=e.$implicit;L.Cb(4),L.Fc("Inicio: ",L.ic(5,2,a.inicio,"dd/MM/yyyy HH:mm:ss"),""),L.Cb(4),L.Fc(" Fin: ",L.ic(9,5,a.fin,"dd/MM/yyyy")," ")}}var Wo,Go,Vo,Qo=function(){return{standalone:!0}},Jo=((Vo=function(){function t(e,n){var a=this;l(this,t),this.ls=e,this.turnoSrvc=n,this.getTurnoEv=new L.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadTurnos=function(){a.turnoSrvc.get({sede:+a.ls.get(Te.a.usrTokenVar).sede||0}).subscribe(function(t){t&&t.length>0&&(a.lstTurnos=t,a.applyFilter())})},this.getTurno=function(t){a.getTurnoEv.emit({turno:t.turno,turno_tipo:t.turno_tipo.turno_tipo,fecha:t.fecha,inicio:t.inicio,fin:t.fin})},this.pageChange=function(t){a.pageSize=t.pageSize,a.pageIndex=t.pageIndex,a.applyFilter()}}return d(t,[{key:"ngOnInit",value:function(){this.loadTurnos()}},{key:"applyFilter",value:function(){if(this.txtFiltro.length>0){var t=Object(Te.b)(this.lstTurnos,this.txtFiltro);this.length=t.length,this.lstTurnosPaged=Object(Te.c)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstTurnos.length,this.lstTurnosPaged=Object(Te.c)(this.lstTurnos,this.pageSize,this.pageIndex+1)}}]),t}()).\u0275fac=function(t){return new(t||Vo)(L.Nb(Ee.a),L.Nb(qo))},Vo.\u0275cmp=L.Hb({type:Vo,selectors:[["app-lista-turno"]],outputs:{getTurnoEv:"getTurnoEv"},decls:7,vars:7,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,e){1&t&&(L.Tb(0,"mat-card",0),L.Tb(1,"mat-card-content"),L.Tb(2,"mat-form-field",1),L.Tb(3,"input",2),L.bc("keyup",function(){return e.applyFilter()})("ngModelChange",function(t){return e.txtFiltro=t}),L.Sb(),L.Sb(),L.Tb(4,"mat-nav-list"),L.Cc(5,$o,10,8,"mat-list-item",3),L.Sb(),L.Tb(6,"mat-paginator",4),L.bc("page",function(t){return e.pageChange(t)}),L.Sb(),L.Sb(),L.Sb()),2&t&&(L.Cb(3),L.lc("ngModel",e.txtFiltro)("ngModelOptions",L.nc(6,Qo)),L.Cb(2),L.lc("ngForOf",e.lstTurnosPaged),L.Cb(1),L.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[D.a,D.c,_.b,y.b,f.c,f.k,f.n,S.e,b.l,A.a,S.c,T.a,S.b,q.h],pipes:[b.e],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),Vo),Xo=((Go=function(){function t(e){l(this,t),this.http=e,this.moduleUrl="turno",this.srvcErrHndl=new _e.a}return d(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Te.a.urlMantenimientos,"/").concat(this.moduleUrl,"/get_turno_tipo?").concat(ke.stringify(t))).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(t){return this.http.post("".concat(Te.a.urlMantenimientos,"/").concat(this.moduleUrl,"/guardar_turno_tipo").concat(t.turno_tipo?"/"+t.turno_tipo:""),t).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||Go)(L.Xb(m.b))},Go.\u0275prov=L.Jb({token:Go,factory:Go.\u0275fac,providedIn:"root"}),Go),Zo=((Wo=function(){function t(e){l(this,t),this.http=e,this.srvcErrHndl=new _e.a}return d(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Te.a.urlCatalogos,"/get_tipo_usuario?").concat(ke.stringify(t))).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||Wo)(L.Xb(m.b))},Wo.\u0275prov=L.Jb({token:Wo,factory:Wo.\u0275fac,providedIn:"root"}),Wo);function Ko(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",5),L.bc("click",function(){return L.wc(n),L.fc().showTurnoForm=!0}),L.Tb(1,"mat-icon",6),L.Dc(2,"expand_more"),L.Sb(),L.Sb()}}function Yo(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",5),L.bc("click",function(){return L.wc(n),L.fc().showTurnoForm=!1}),L.Tb(1,"mat-icon",6),L.Dc(2,"expand_less"),L.Sb(),L.Sb()}}function ti(t,e){if(1&t&&(L.Tb(0,"mat-option",17),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n.turno_tipo),L.Cb(1),L.Fc(" ",n.descripcion," ")}}function ei(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",21),L.bc("click",function(){L.wc(n);var t=L.fc(3);return t.turno.inicio=t.getNow()}),L.Tb(1,"mat-icon",6),L.Dc(2,"query_builder"),L.Sb(),L.Sb()}}function ni(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",22),L.bc("click",function(){return L.wc(n),L.fc(3).turno.inicio=null}),L.Tb(1,"mat-icon",6),L.Dc(2,"close"),L.Sb(),L.Sb()}}function ai(t,e){if(1&t){var n=L.Ub();L.Tb(0,"mat-form-field",10),L.Tb(1,"input",18),L.bc("ngModelChange",function(t){return L.wc(n),L.fc(2).turno.inicio=t}),L.Sb(),L.Cc(2,ei,3,0,"button",19),L.Cc(3,ni,3,0,"button",20),L.Sb()}if(2&t){var a=L.fc(2);L.Cb(1),L.lc("ngModel",a.turno.inicio),L.Cb(1),L.lc("ngIf",!a.turno.inicio),L.Cb(1),L.lc("ngIf",a.turno.inicio)}}function oi(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",21),L.bc("click",function(){L.wc(n);var t=L.fc(3);return t.turno.fin=t.getNow()}),L.Tb(1,"mat-icon",6),L.Dc(2,"query_builder"),L.Sb(),L.Sb()}}function ii(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",22),L.bc("click",function(){return L.wc(n),L.fc(3).turno.fin=null}),L.Tb(1,"mat-icon",6),L.Dc(2,"close"),L.Sb(),L.Sb()}}function ri(t,e){if(1&t){var n=L.Ub();L.Tb(0,"mat-form-field",10),L.Tb(1,"input",23),L.bc("ngModelChange",function(t){return L.wc(n),L.fc(2).turno.fin=t}),L.Sb(),L.Cc(2,oi,3,0,"button",19),L.Cc(3,ii,3,0,"button",20),L.Sb()}if(2&t){var a=L.fc(2);L.Cb(1),L.lc("ngModel",a.turno.fin),L.Cb(1),L.lc("ngIf",!a.turno.fin),L.Cb(1),L.lc("ngIf",a.turno.fin)}}function ci(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",24),L.bc("click",function(){return L.wc(n),L.fc(2).resetTurno()}),L.Dc(1," Nuevo "),L.Sb()}}function si(t,e){if(1&t&&(L.Tb(0,"li"),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.Cb(1),L.Ec(n)}}function li(t,e){if(1&t&&(L.Tb(0,"li"),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.Cb(1),L.Ec(n)}}function ui(t,e){if(1&t&&(L.Tb(0,"div"),L.Tb(1,"h6"),L.Dc(2,"Documentos Pendientes"),L.Sb(),L.Tb(3,"div",25),L.Tb(4,"div",26),L.Tb(5,"label"),L.Tb(6,"b"),L.Dc(7,"Comandas sin facturar"),L.Sb(),L.Sb(),L.Tb(8,"ul"),L.Cc(9,si,2,1,"li",27),L.Sb(),L.Sb(),L.Tb(10,"div",26),L.Tb(11,"label"),L.Tb(12,"b"),L.Dc(13,"Facturas sin firmar"),L.Sb(),L.Sb(),L.Tb(14,"ul"),L.Cc(15,li,2,1,"li",27),L.Sb(),L.Sb(),L.Sb(),L.Sb()),2&t){var n=L.fc(2);L.Cb(9),L.lc("ngForOf",n.comandas),L.Cb(6),L.lc("ngForOf",n.facturas)}}function di(t,e){if(1&t){var n=L.Ub();L.Tb(0,"form",7,8),L.bc("ngSubmit",function(){L.wc(n);var t=L.tc(1),e=L.fc();return t.form.valid&&e.onSubmit()}),L.Tb(2,"div",9),L.Tb(3,"mat-form-field",10),L.Tb(4,"mat-label"),L.Dc(5,"Tipo de turno"),L.Sb(),L.Tb(6,"mat-select",11),L.bc("ngModelChange",function(t){return L.wc(n),L.fc().turno.turno_tipo=t}),L.Cc(7,ti,2,2,"mat-option",12),L.Sb(),L.Sb(),L.Sb(),L.Tb(8,"div",9),L.Cc(9,ai,4,3,"mat-form-field",13),L.Sb(),L.Tb(10,"div",9),L.Cc(11,ri,4,3,"mat-form-field",13),L.Sb(),L.Tb(12,"div",14),L.Tb(13,"button",15),L.Dc(14," Guardar "),L.Sb(),L.Cc(15,ci,2,0,"button",16),L.Sb(),L.Cc(16,ui,16,2,"div",3),L.Sb()}if(2&t){var a=L.tc(1),o=L.fc();L.Cb(6),L.lc("ngModel",o.turno.turno_tipo),L.Cb(1),L.lc("ngForOf",o.tiposTurno),L.Cb(2),L.lc("ngIf",o.esMovil),L.Cb(2),L.lc("ngIf",o.esMovil),L.Cb(2),L.lc("disabled",!a.form.valid),L.Cb(2),L.lc("ngIf",o.turno.turno),L.Cb(1),L.lc("ngIf",o.pendientes)}}function bi(t,e){1&t&&L.Ob(0,"hr")}function mi(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",5),L.bc("click",function(){return L.wc(n),L.fc(2).showDetalleTurnoForm=!0}),L.Tb(1,"mat-icon",6),L.Dc(2,"expand_more"),L.Sb(),L.Sb()}}function fi(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",5),L.bc("click",function(){return L.wc(n),L.fc(2).showDetalleTurnoForm=!1}),L.Tb(1,"mat-icon",6),L.Dc(2,"expand_less"),L.Sb(),L.Sb()}}function pi(t,e){if(1&t&&(L.Tb(0,"mat-option",17),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n.usuario_tipo),L.Cb(1),L.Fc(" ",n.descripcion," ")}}function hi(t,e){if(1&t&&(L.Tb(0,"mat-option",17),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n.usuario),L.Cb(1),L.Gc(" ",n.nombres," ",n.apellidos," ")}}function gi(t,e){if(1&t){var n=L.Ub();L.Tb(0,"form",7,29),L.bc("ngSubmit",function(){L.wc(n);var t=L.tc(1),e=L.fc(2);return t.form.valid&&e.onSubmitDetail()}),L.Tb(2,"div",9),L.Tb(3,"mat-form-field",10),L.Tb(4,"mat-label"),L.Dc(5,"Tipo"),L.Sb(),L.Tb(6,"mat-select",30),L.bc("ngModelChange",function(t){return L.wc(n),L.fc(2).detalleTurno.usuario_tipo=t}),L.Cc(7,pi,2,2,"mat-option",12),L.Sb(),L.Sb(),L.Sb(),L.Tb(8,"div",9),L.Tb(9,"mat-form-field",10),L.Tb(10,"mat-label"),L.Dc(11,"Usuario"),L.Sb(),L.Tb(12,"mat-select",31),L.bc("ngModelChange",function(t){return L.wc(n),L.fc(2).detalleTurno.usuario=t}),L.Cc(13,hi,2,3,"mat-option",12),L.Sb(),L.Sb(),L.Sb(),L.Tb(14,"div",32),L.Tb(15,"button",15),L.Dc(16," Guardar "),L.Sb(),L.Sb(),L.Sb()}if(2&t){var a=L.tc(1),o=L.fc(2);L.Cb(6),L.lc("ngModel",o.detalleTurno.usuario_tipo),L.Cb(1),L.lc("ngForOf",o.tiposUsuario),L.Cb(5),L.lc("ngModel",o.detalleTurno.usuario),L.Cb(1),L.lc("ngForOf",o.usuarios),L.Cb(2),L.lc("disabled",!a.form.valid||!!o.turno.fin)}}function vi(t,e){1&t&&L.Ob(0,"hr")}function Ci(t,e){1&t&&(L.Tb(0,"th",43),L.Dc(1,"Tipo"),L.Sb())}function Si(t,e){if(1&t&&(L.Tb(0,"td",44),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.Cb(1),L.Ec(n.usuario_tipo.descripcion)}}function Ti(t,e){1&t&&(L.Tb(0,"th",45),L.Dc(1,"Usuario"),L.Sb())}function _i(t,e){if(1&t&&(L.Tb(0,"td",46),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.Cb(1),L.Gc("",n.usuario.nombres," ",n.usuario.apellidos,"")}}function yi(t,e){1&t&&(L.Tb(0,"th",43),L.Dc(1,"\xa0"),L.Sb())}function Di(t,e){if(1&t){var n=L.Ub();L.Tb(0,"td",44),L.Tb(1,"button",47),L.bc("click",function(){L.wc(n);var t=e.$implicit;return L.fc(3).anularDetalleTurno(t)}),L.Dc(2," Anular "),L.Sb(),L.Sb()}if(2&t){var a=L.fc(3);L.Cb(1),L.lc("disabled",!!a.turno.fin)}}function ki(t,e){1&t&&L.Ob(0,"tr",48)}function wi(t,e){1&t&&L.Ob(0,"tr",49)}function Ei(t,e){if(1&t&&(L.Tb(0,"table",33),L.Rb(1,34),L.Cc(2,Ci,2,0,"th",35),L.Cc(3,Si,2,1,"td",36),L.Qb(),L.Rb(4,37),L.Cc(5,Ti,2,0,"th",38),L.Cc(6,_i,2,2,"td",39),L.Qb(),L.Rb(7,40),L.Cc(8,yi,2,0,"th",35),L.Cc(9,Di,3,1,"td",36),L.Qb(),L.Cc(10,ki,1,0,"tr",41),L.Cc(11,wi,1,0,"tr",42),L.Sb()),2&t){var n=L.fc(2);L.lc("dataSource",n.dataSource),L.Cb(10),L.lc("matHeaderRowDef",n.displayedColumns),L.Cb(1),L.lc("matRowDefColumns",n.displayedColumns)}}function Pi(t,e){if(1&t&&(L.Tb(0,"mat-card",0),L.Tb(1,"mat-card-title"),L.Tb(2,"h4"),L.Dc(3),L.gc(4,"date"),L.Cc(5,mi,3,0,"button",1),L.Cc(6,fi,3,0,"button",1),L.Sb(),L.Sb(),L.Tb(7,"mat-card-content"),L.Cc(8,gi,17,5,"form",2),L.Cc(9,vi,1,0,"hr",3),L.Cc(10,Ei,12,3,"table",28),L.Sb(),L.Sb()),2&t){var n=L.fc();L.Cb(3),L.Fc(" Detalle del turno ",L.ic(4,6,n.turno.inicio,"dd/MM/yyyy HH:mm:ss")," "),L.Cb(2),L.lc("ngIf",!n.showDetalleTurnoForm),L.Cb(1),L.lc("ngIf",n.showDetalleTurnoForm),L.Cb(2),L.lc("ngIf",n.showDetalleTurnoForm),L.Cb(1),L.lc("ngIf",n.detallesTurno.length>0),L.Cb(1),L.lc("ngIf",n.detallesTurno.length>0)}}var xi,Oi,Mi,Ri=((xi=function(){function t(e,n,a,o,i,r,c){var s=this;l(this,t),this.snackBar=e,this.ls=n,this.tipoTurnoSrvc=a,this.turnoSrvc=o,this.usuarioTipoSrvc=i,this.usuarioSrvc=r,this.dialog=c,this.turnoSavedEv=new L.o,this.showTurnoForm=!0,this.showDetalleTurnoForm=!0,this.detallesTurno=[],this.displayedColumns=["usuario_tipo","usuario","editItem"],this.tiposTurno=[],this.tiposUsuario=[],this.usuarios=[],this.esMovil=!1,this.comandas=[],this.facturas=[],this.pendientes=!1,this.loadTiposTurno=function(){s.tipoTurnoSrvc.get().subscribe(function(t){t&&(s.tiposTurno=t)})},this.loadTiposUsuario=function(){s.usuarioTipoSrvc.get().subscribe(function(t){t&&(s.tiposUsuario=t)})},this.loadUsuarios=function(){s.usuarioSrvc.get({sede:s.ls.get(Te.a.usrTokenVar).sede||0}).subscribe(function(t){t&&(s.usuarios=t)})},this.resetTurno=function(){s.pendientes=!1,s.comandas=[],s.facturas=[],s.turno={turno:null,turno_tipo:null,inicio:ta().format(Te.a.dbDateTimeFormat),fin:null},s.resetDetalleTurno()},this.saveInfoTurno=function(){s.pendientes=!1,s.turnoSrvc.save(s.turno).subscribe(function(t){t.exito?(s.turnoSavedEv.emit(),s.resetTurno(),s.turno=t.turno,s.snackBar.open("Turno modificado con \xe9xito...","Turno",{duration:3e3})):(t.pendientes&&(s.snackBar.open("ERROR: Error al cerrar el turno","Turno",{duration:3e3}),s.pendientes=!0,s.comandas=t.comandas,s.facturas=t.facturas),s.snackBar.open("ERROR: ".concat(t.mensaje),"Turno",{duration:3e3}))})},this.onSubmit=function(){ta(s.turno.fin).isValid()?s.dialog.open(He.a,{maxWidth:"400px",data:new He.b("Cerrar turno","La fecha de finalizaci\xf3n cerrar\xe1 el turno. \xbfDesea continuar?","S\xed","No")}).afterClosed().subscribe(function(t){t&&s.saveInfoTurno()}):s.saveInfoTurno()},this.resetDetalleTurno=function(){return s.detalleTurno={turno:s.turno.turno?s.turno.turno:null,usuario:null,usuario_tipo:null}},this.loadDetalleTurno=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+s.turno.turno;s.turnoSrvc.getDetalle(t,{turno:t}).subscribe(function(t){t&&(s.detallesTurno=t,s.updateTableDataSource())})},this.onSubmitDetail=function(){s.detalleTurno.turno=s.turno.turno,s.turnoSrvc.saveDetalle(s.detalleTurno).subscribe(function(t){t.exito?(s.loadDetalleTurno(),s.resetDetalleTurno(),s.snackBar.open("Usuario agregado al turno...","Turno",{duration:3e3})):s.snackBar.open("ERROR: ".concat(t.mensaje),"Turno",{duration:3e3})})},this.anularDetalleTurno=function(t){s.turnoSrvc.anularDetalle({turno:t.turno,usuario:t.usuario.usuario,usuario_tipo:t.usuario_tipo.usuario_tipo}).subscribe(function(t){t.exito?(s.loadDetalleTurno(),s.resetDetalleTurno(),s.snackBar.open("Se quit\xf3 al usuario del turno...","Turno",{duration:3e3})):s.snackBar.open("ERROR: ".concat(t.mensaje),"Turno",{duration:3e3})})},this.updateTableDataSource=function(){return s.dataSource=new E.k(s.detallesTurno)},this.getNow=function(){return ta().format(Te.a.dbDateTimeFormat)}}return d(t,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(Te.a.usrTokenVar).enmovil||!1,this.resetTurno(),this.loadTiposTurno(),this.loadTiposUsuario(),this.loadUsuarios()}}]),t}()).\u0275fac=function(t){return new(t||xi)(L.Nb(M.a),L.Nb(Ee.a),L.Nb(Xo),L.Nb(qo),L.Nb(Zo),L.Nb(wn.a),L.Nb(N.b))},xi.\u0275cmp=L.Hb({type:xi,selectors:[["app-form-turno"]],inputs:{turno:"turno"},outputs:{turnoSavedEv:"turnoSavedEv"},decls:11,vars:9,consts:[[1,"mat-elevation-z4","fullWidth"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmTurno","ngForm"],[1,"form-group"],[1,"fullWidth"],["name","turno_tipo","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","fullWidth",4,"ngIf"],["role","group","align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],[3,"value"],["matInput","","type","datetime-locale","placeholder","Inicio","name","inicio","required","",3,"ngModel","ngModelChange"],["type","button","mat-button","","matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],["type","button","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["type","button","mat-button","","matSuffix","","mat-icon-button","",3,"click"],["type","button","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["matInput","","type","datetime-locale","placeholder","Fin","name","fin",3,"ngModel","ngModelChange"],["mat-raised-button","","type","button","color","accent",3,"click"],[1,"row"],[1,"col"],[4,"ngFor","ngForOf"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleTurno","ngForm"],["name","usuario_tipo","required","",3,"ngModel","ngModelChange"],["name","usuario","required","",3,"ngModel","ngModelChange"],["role","group",1,"btn-group","d-flex","justify-content-end"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","usuario_tipo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","usuario"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","editItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(L.Tb(0,"mat-card",0),L.Tb(1,"mat-card-title"),L.Tb(2,"h4"),L.Dc(3),L.gc(4,"date"),L.Cc(5,Ko,3,0,"button",1),L.Cc(6,Yo,3,0,"button",1),L.Sb(),L.Sb(),L.Tb(7,"mat-card-content"),L.Cc(8,di,17,7,"form",2),L.Sb(),L.Sb(),L.Cc(9,bi,1,0,"hr",3),L.Cc(10,Pi,11,9,"mat-card",4)),2&t&&(L.Cb(3),L.Fc(" Turno ",e.turno.turno?L.ic(4,6,e.turno.inicio,"dd/MM/yyyy HH:mm:ss"):""," "),L.Cb(2),L.lc("ngIf",!e.showTurnoForm),L.Cb(1),L.lc("ngIf",e.showTurnoForm),L.Cb(2),L.lc("ngIf",e.showTurnoForm),L.Cb(1),L.lc("ngIf",e.turno.turno),L.Cb(1),L.lc("ngIf",e.turno.turno))},directives:[D.a,D.h,b.m,D.c,O.a,T.a,f.r,f.l,f.m,_.b,_.e,P.a,f.p,f.k,f.n,b.l,q.k,y.b,f.c,_.f,E.j,E.c,E.e,E.b,E.g,E.i,E.d,E.a,E.f,E.h],pipes:[b.e],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:34pt!important}"]}),xi),Fi=["lstTurno"],Ii=["frmTurno"],Ai=((Oi=function(){function t(){var e=this;l(this,t),this.setTurno=function(t){e.turno=t,e.frmTurno.loadDetalleTurno(+e.turno.turno),e.frmTurno.pendientes=!1,e.frmTurno.comandas=[],e.frmTurno.facturas=[]},this.refreshTurnoList=function(){return e.lstTurnoComponent.loadTurnos()},this.turno={turno:null,turno_tipo:null,inicio:ta().format(Te.a.dbDateTimeFormat),fin:null}}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Oi)},Oi.\u0275cmp=L.Hb({type:Oi,selectors:[["app-turno"]],viewQuery:function(t,e){var n;1&t&&(L.Ic(Fi,1),L.Ic(Ii,1)),2&t&&(L.sc(n=L.cc())&&(e.lstTurnoComponent=n.first),L.sc(n=L.cc())&&(e.frmTurno=n.first))},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getTurnoEv"],["lstTurno",""],[1,"col","m7","s12"],[3,"turno","turnoSavedEv"],["frmTurno",""]],template:function(t,e){1&t&&(L.Tb(0,"div",0),L.Tb(1,"div",1),L.Tb(2,"app-lista-turno",2,3),L.bc("getTurnoEv",function(t){return e.setTurno(t)}),L.Sb(),L.Sb(),L.Tb(4,"div",4),L.Tb(5,"app-form-turno",5,6),L.bc("turnoSavedEv",function(){return e.refreshTurnoList()}),L.Sb(),L.Sb(),L.Sb()),2&t&&(L.Cb(5),L.lc("turno",e.turno))},directives:[Jo,Ri],styles:[""]}),Oi),Ni=c("Iab2"),ji=((Mi=function(){function t(e){l(this,t),this.http=e,this.moduleUrl="reporte/venta",this.srvcErrHndl=new _e.a}return d(t,[{key:"porCategoria",value:function(t){return this.http.get("".concat(Te.a.urlFacturacion,"/").concat(this.moduleUrl,"/categoria?").concat(ke.stringify(t))).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"porArticulo",value:function(t){return this.http.get("".concat(Te.a.urlFacturacion,"/").concat(this.moduleUrl,"/articulo?").concat(ke.stringify(t))).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"porCategoriaPdf",value:function(t){var e={headers:new m.d({Accept:"application/pdf"}),responseType:"blob"};return this.http.get("".concat(Te.a.urlFacturacion,"/").concat(this.moduleUrl,"/categoriapdf/1?").concat(ke.stringify(t)),e).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"porArticuloPdf",value:function(t){var e={headers:new m.d({Accept:"application/pdf"}),responseType:"blob"};return this.http.get("".concat(Te.a.urlFacturacion,"/").concat(this.moduleUrl,"/articulopdf/1?").concat(ke.stringify(t)),e).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||Mi)(L.Xb(m.b))},Mi.\u0275prov=L.Jb({token:Mi,factory:Mi.\u0275fac,providedIn:"root"}),Mi),Ui=c("2qVp"),Bi=c("NU9O");function Hi(t,e){if(1&t&&(L.Rb(0),L.Tb(1,"tr"),L.Tb(2,"td",10),L.Dc(3),L.Sb(),L.Tb(4,"td",11),L.Dc(5),L.gc(6,"number"),L.Sb(),L.Tb(7,"td",11),L.Dc(8),L.gc(9,"number"),L.Sb(),L.Tb(10,"td",11),L.Dc(11),L.gc(12,"number"),L.Sb(),L.Tb(13,"td",11),L.Dc(14),L.gc(15,"number"),L.Sb(),L.Sb(),L.Qb()),2&t){var n=e.$implicit;L.Cb(3),L.Ec(n.descripcion),L.Cb(2),L.Ec(L.ic(6,5,n.cantidad,"1.2-2")),L.Cb(3),L.Ec(L.ic(9,8,n.porcentaje,"1.2-2")),L.Cb(3),L.Ec(L.ic(12,11,n.precio_unitario,"1.2-2")),L.Cb(3),L.Ec(L.ic(15,14,n.total,"1.2-2"))}}function Li(t,e){if(1&t&&(L.Rb(0),L.Tb(1,"tr"),L.Tb(2,"th",7),L.Dc(3),L.Sb(),L.Sb(),L.Cc(4,Hi,16,17,"ng-container",4),L.Tb(5,"tr"),L.Tb(6,"th",8),L.Dc(7,"Total de subcategor\xeda:"),L.Sb(),L.Tb(8,"th",9),L.Dc(9),L.gc(10,"number"),L.Sb(),L.Sb(),L.Qb()),2&t){var n=L.fc().$implicit;L.Cb(3),L.Ec(n.descripcion),L.Cb(1),L.lc("ngForOf",n.articulos),L.Cb(5),L.Ec(L.ic(10,3,n.total,"1.2-2"))}}function zi(t,e){if(1&t&&(L.Rb(0),L.Cc(1,Li,11,6,"ng-container",5),L.Qb()),2&t){var n=e.$implicit;L.Cb(1),L.lc("ngIf",n.articulos.length>0)}}function qi(t,e){if(1&t&&(L.Rb(0),L.Tb(1,"tr"),L.Tb(2,"th",6),L.Dc(3),L.Sb(),L.Sb(),L.Cc(4,zi,2,1,"ng-container",4),L.Qb()),2&t){var n=L.fc().$implicit;L.Cb(3),L.Ec(n.descripcion),L.Cb(1),L.lc("ngForOf",n.subcategoria)}}function $i(t,e){if(1&t&&(L.Rb(0),L.Cc(1,qi,5,2,"ng-container",5),L.Qb()),2&t){var n=e.$implicit;L.Cb(1),L.lc("ngIf",n.subcategoria.length>0)}}var Wi,Gi=((Wi=function(){function t(){l(this,t),this.params={},this.data=[]}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Wi)},Wi.\u0275cmp=L.Hb({type:Wi,selectors:[["app-por-categoria"]],inputs:{params:"params",data:"data"},decls:26,vars:9,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"tbl"],[1,"brdTSingleBSingle"],[1,"rtxt","numWidth","brdTSingleBSingle"],[4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","5"],["colspan","5",1,"tab"],["colspan","4",1,"rtxt"],[1,"rtxt","brdTSingleBDouble","numWidth"],[1,"doubleTab","brdBSingle"],[1,"rtxt","numWidth","brdBSingle"]],template:function(t,e){1&t&&(L.Tb(0,"mat-card",0),L.Tb(1,"mat-card-header"),L.Tb(2,"mat-card-title"),L.Dc(3,"Reporte de ventas"),L.Sb(),L.Tb(4,"mat-card-subtitle"),L.Dc(5," Por categor\xeda"),L.Ob(6,"br"),L.Dc(7),L.gc(8,"date"),L.gc(9,"date"),L.Sb(),L.Sb(),L.Tb(10,"mat-card-content"),L.Tb(11,"table",1),L.Tb(12,"thead"),L.Tb(13,"tr"),L.Tb(14,"th",2),L.Dc(15,"Descripci\xf3n"),L.Sb(),L.Tb(16,"th",3),L.Dc(17,"Cantidad"),L.Sb(),L.Tb(18,"th",3),L.Dc(19,"Porcentaje"),L.Sb(),L.Tb(20,"th",3),L.Dc(21,"Precio unitario"),L.Sb(),L.Tb(22,"th",3),L.Dc(23,"Total"),L.Sb(),L.Sb(),L.Sb(),L.Tb(24,"tbody"),L.Cc(25,$i,2,1,"ng-container",4),L.Sb(),L.Sb(),L.Sb(),L.Sb()),2&t&&(L.Cb(7),L.Gc(" Del ",L.ic(8,3,e.params.fdel,"dd/MM/yyyy")," al ",L.ic(9,6,e.params.fal,"dd/MM/yyyy")," "),L.Cb(18),L.lc("ngForOf",e.data))},directives:[D.a,D.d,D.h,D.g,D.c,b.l,b.m],pipes:[b.e,b.f],styles:[".numWidth[_ngcontent-%COMP%]{width:10%}tr[_ngcontent-%COMP%]{border:none}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-top:.25em;padding-bottom:.25em}"]}),Wi);function Vi(t,e){if(1&t&&(L.Rb(0),L.Tb(1,"tr"),L.Tb(2,"td",6),L.Dc(3),L.Sb(),L.Tb(4,"td",7),L.Dc(5),L.gc(6,"number"),L.Sb(),L.Tb(7,"td",7),L.Dc(8),L.gc(9,"number"),L.Sb(),L.Sb(),L.Qb()),2&t){var n=e.$implicit;L.Cb(3),L.Ec(n.articulo.descripcion),L.Cb(2),L.Ec(L.ic(6,3,n.cantidad,"1.2-2")),L.Cb(3),L.Ec(L.ic(9,6,n.total,"1.2-2"))}}function Qi(t,e){if(1&t&&(L.Tb(0,"mat-card-content"),L.Tb(1,"table",2),L.Tb(2,"thead"),L.Tb(3,"tr"),L.Tb(4,"th",3),L.Dc(5,"Descripci\xf3n"),L.Sb(),L.Tb(6,"th",4),L.Dc(7,"Cantidad"),L.Sb(),L.Tb(8,"th",4),L.Dc(9,"Total"),L.Sb(),L.Sb(),L.Sb(),L.Tb(10,"tbody"),L.Cc(11,Vi,10,9,"ng-container",5),L.Sb(),L.Sb(),L.Sb()),2&t){var n=L.fc();L.Cb(11),L.lc("ngForOf",n.data.datos)}}function Ji(t,e){if(1&t&&(L.Tb(0,"tr"),L.Tb(1,"td",6),L.Dc(2),L.Sb(),L.Tb(3,"td",7),L.Dc(4),L.gc(5,"number"),L.Sb(),L.Tb(6,"td",7),L.Dc(7),L.gc(8,"number"),L.Sb(),L.Sb()),2&t){var n=e.$implicit;L.Cb(2),L.Ec(n.articulo.descripcion),L.Cb(2),L.Ec(L.ic(5,3,n.cantidad,"1.2-2")),L.Cb(3),L.Ec(L.ic(8,6,n.total,"1.2-2"))}}function Xi(t,e){if(1&t&&(L.Rb(0),L.Tb(1,"tr"),L.Tb(2,"th",8),L.Dc(3),L.Sb(),L.Sb(),L.Cc(4,Ji,9,9,"tr",5),L.Qb()),2&t){var n=e.$implicit;L.Cb(3),L.Ec(n.sede),L.Cb(1),L.lc("ngForOf",n.articulos)}}function Zi(t,e){if(1&t&&(L.Tb(0,"mat-card-content"),L.Tb(1,"table",2),L.Tb(2,"thead"),L.Tb(3,"tr"),L.Tb(4,"th",3),L.Dc(5,"Descripci\xf3n"),L.Sb(),L.Tb(6,"th",4),L.Dc(7,"Cantidad"),L.Sb(),L.Tb(8,"th",4),L.Dc(9,"Total"),L.Sb(),L.Sb(),L.Sb(),L.Tb(10,"tbody"),L.Cc(11,Xi,5,2,"ng-container",5),L.Sb(),L.Sb(),L.Sb()),2&t){var n=L.fc();L.Cb(11),L.lc("ngForOf",n.data.datos)}}var Ki,Yi=((Ki=function(){function t(){l(this,t),this.params={},this.data={}}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Ki)},Ki.\u0275cmp=L.Hb({type:Ki,selectors:[["app-por-articulo"]],inputs:{params:"params",data:"data"},decls:12,vars:10,consts:[[1,"mat-elevation-z4","fullWidth"],[4,"ngIf"],[1,"tbl"],[1,"brdTSingleBSingle"],[1,"rtxt","numWidth","brdTSingleBSingle"],[4,"ngFor","ngForOf"],[1,"doubleTab","brdBSingle"],[1,"rtxt","numWidth","brdBSingle"],["colspan","3",1,"brdTSingleBSingle"]],template:function(t,e){1&t&&(L.Tb(0,"mat-card",0),L.Tb(1,"mat-card-header"),L.Tb(2,"mat-card-title"),L.Dc(3,"Reporte de ventas"),L.Sb(),L.Tb(4,"mat-card-subtitle"),L.Dc(5," Por art\xedculo"),L.Ob(6,"br"),L.Dc(7),L.gc(8,"date"),L.gc(9,"date"),L.Sb(),L.Sb(),L.Cc(10,Qi,12,1,"mat-card-content",1),L.Cc(11,Zi,12,1,"mat-card-content",1),L.Sb()),2&t&&(L.Cb(7),L.Gc(" Del ",L.ic(8,4,e.params.fdel,"dd/MM/yyyy")," al ",L.ic(9,7,e.params.fal,"dd/MM/yyyy")," "),L.Cb(3),L.lc("ngIf",1==e.data.grupo),L.Cb(1),L.lc("ngIf",2==e.data.grupo))},directives:[D.a,D.d,D.h,D.g,b.m,D.c,b.l],pipes:[b.e,b.f],styles:[".numWidth[_ngcontent-%COMP%]{width:10%}tr[_ngcontent-%COMP%]{border:none}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-top:.25em;padding-bottom:.25em}"]}),Ki);function tr(t,e){if(1&t&&(L.Tb(0,"mat-option",16),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n.tipo_reporte),L.Cb(1),L.Fc(" ",n.descripcion," ")}}function er(t,e){if(1&t&&(L.Tb(0,"mat-option",16),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n.turno_tipo),L.Cb(1),L.Fc(" ",n.descripcion," ")}}function nr(t,e){if(1&t&&(L.Tb(0,"mat-option",16),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n.sede.sede),L.Cb(1),L.Fc(" ",n.sede.nombre," ")}}function ar(t,e){if(1&t&&(L.Tb(0,"mat-option",16),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n.id),L.Cb(1),L.Fc(" ",n.descripcion," ")}}function or(t,e){if(1&t){var n=L.Ub();L.Tb(0,"mat-form-field",5),L.Tb(1,"mat-label"),L.Dc(2,"Agrupar por"),L.Sb(),L.Tb(3,"mat-select",17),L.bc("ngModelChange",function(t){return L.wc(n),L.fc().params._grupo=t}),L.Cc(4,ar,2,2,"mat-option",7),L.Sb(),L.Sb()}if(2&t){var a=L.fc();L.Cb(3),L.lc("ngModel",a.params._grupo),L.Cb(1),L.lc("ngForOf",a.grupos)}}function ir(t,e){1&t&&L.Ob(0,"app-cargando")}function rr(t,e){if(1&t&&(L.Tb(0,"div",0),L.Tb(1,"div",1),L.Ob(2,"app-por-categoria",18),L.Sb(),L.Sb()),2&t){var n=L.fc();L.Cb(2),L.lc("params",n.params)("data",n.porCategoria)}}function cr(t,e){if(1&t&&(L.Tb(0,"div",0),L.Tb(1,"div",1),L.Ob(2,"app-por-articulo",18),L.Sb(),L.Sb()),2&t){var n=L.fc();L.Cb(2),L.lc("params",n.params)("data",n.porArticulo)}}var sr,lr,ur=((lr=function(){function t(e,n,a,o){var i=this;l(this,t),this.snackBar=e,this.rptVentasSrvc=n,this.tipoTurnoSrvc=a,this.sedeSrvc=o,this.tiposReporte=[],this.params={},this.paramsToSend={},this.msgGenerandoReporte=null,this.porCategoria=[],this.porArticulo={datos:[]},this.tiposTurno=[],this.sedes=[],this.grupos=Te.a.grupos,this.tituloCategoria="Ventas por categoria",this.tituloArticulo="Ventas por articulo",this.cargando=!1,this.configBotones={showPdf:!0,showHtml:!0,showExcel:!0},this.loadSedes=function(){i.sedeSrvc.getSedes({reporte:!0}).subscribe(function(t){t&&(i.sedes=t)})},this.loadTiposTurno=function(){i.tipoTurnoSrvc.get().subscribe(function(t){t&&(i.tiposTurno=t)})},this.loadTiposReporte=function(){i.tiposReporte=[{tipo_reporte:1,descripcion:"Por categor\xeda"},{tipo_reporte:2,descripcion:"Por art\xedculo"}]},this.resetParams=function(){i.porCategoria=[],i.porArticulo=[],i.msgGenerandoReporte=null,i.params={tipo_reporte:void 0,fdel:ta().startOf("week").format(Te.a.dbDateFormat),fal:ta().endOf("week").format(Te.a.dbDateFormat)},i.cargando=!1},this.getReporte=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;switch(i.paramsToSend=JSON.parse(JSON.stringify(i.params)),i.msgGenerandoReporte="GENERANDO REPORTE EN ",t){case 1:i.getEnPantalla();break;case 2:i.getPdf();break;case 3:i.getExcel()}},this.getPdf=function(){switch(i.params.tipo_reporte){case 1:i.getPorCategoriaPdf();break;case 2:i.getPorArticuloPdf()}},this.getExcel=function(){switch(i.params.tipo_reporte){case 1:i.getPorCategoriaExcel();break;case 2:i.getPorArticuloExcel()}},this.getPorCategoriaExcel=function(){i.paramsToSend._excel=1,i.cargando=!0,i.cleanParams(),i.rptVentasSrvc.porCategoriaPdf(i.paramsToSend).subscribe(function(t){if(i.cargando=!1,t){var e=new Blob([t],{type:"application/vnd.ms-excel"});Object(Ni.saveAs)(e,"".concat(i.tituloCategoria,".xls"))}else i.snackBar.open("No se pudo generar el reporte...",i.tituloCategoria,{duration:3e3})})},this.getPorCategoriaPdf=function(){i.paramsToSend._excel=0,i.cargando=!0,i.cleanParams(),i.rptVentasSrvc.porCategoriaPdf(i.paramsToSend).subscribe(function(t){if(i.cargando=!1,t){var e=new Blob([t],{type:"application/pdf"});Object(Ni.saveAs)(e,"".concat(i.tituloCategoria,".pdf"))}else i.snackBar.open("No se pudo generar el reporte...",i.tituloCategoria,{duration:3e3})})},this.getPorArticuloPdf=function(){i.paramsToSend._excel=0,i.cargando=!0,i.cleanParams(),i.rptVentasSrvc.porArticuloPdf(i.paramsToSend).subscribe(function(t){if(i.cargando=!1,t){var e=new Blob([t],{type:"application/pdf"});Object(Ni.saveAs)(e,"".concat(i.tituloArticulo,".pdf"))}else i.snackBar.open("No se pudo generar el reporte...",i.tituloArticulo,{duration:3e3})})},this.getPorArticuloExcel=function(){i.paramsToSend._excel=1,i.cargando=!0,i.cleanParams(),i.rptVentasSrvc.porArticuloPdf(i.paramsToSend).subscribe(function(t){if(i.cargando=!1,t){var e=new Blob([t],{type:"application/vnd.ms-excel"});Object(Ni.saveAs)(e,"".concat(i.tituloArticulo,".xls"))}else i.snackBar.open("No se pudo generar el reporte...",i.tituloArticulo,{duration:3e3})})},this.getEnPantalla=function(){switch(i.params.tipo_reporte){case 1:i.getPorCategoriaEnPantalla();break;case 2:i.getPorArticuloEnPantalla()}},this.cleanParams=function(){return delete i.paramsToSend.tipo_reporte},this.getPorCategoriaEnPantalla=function(){i.cargando=!0,i.cleanParams(),i.rptVentasSrvc.porCategoria(i.paramsToSend).subscribe(function(t){i.cargando=!1,t?i.porCategoria=t:i.snackBar.open("No se pudo generar el reporte...","Ventas por categor\xeda",{duration:3e3})})},this.getPorArticuloEnPantalla=function(){i.cargando=!0,i.cleanParams(),i.rptVentasSrvc.porArticulo(i.paramsToSend).subscribe(function(t){i.cargando=!1,t?i.porArticulo=t:i.snackBar.open("No se pudo generar el reporte...","Ventas por art\xedculo",{duration:3e3})})}}return d(t,[{key:"ngOnInit",value:function(){this.resetParams(),this.loadTiposReporte(),this.loadTiposTurno(),this.loadSedes()}}]),t}()).\u0275fac=function(t){return new(t||lr)(L.Nb(M.a),L.Nb(ji),L.Nb(Xo),L.Nb(Ui.a))},lr.\u0275cmp=L.Hb({type:lr,selectors:[["app-rpt-ventas"]],decls:33,vars:13,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmEntidad","ngForm"],[1,"fullWidth"],["name","tipo_reporte","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","turno_tipo",3,"ngModel","ngModelChange"],["type","date","matInput","","placeholder","Del","name","fdel","required","",3,"ngModel","ngModelChange"],["type","date","matInput","","placeholder","Al","name","fal","required","",3,"ngModel","ngModelChange"],["name","sede","multiple","",3,"ngModel","ngModelChange"],["class","fullWidth",4,"ngIf"],[3,"configuracion","excelClick","htmlClick","pdfClick","resetParamsClick"],[4,"ngIf"],["class","row",4,"ngIf"],[3,"value"],["name","grupo",3,"ngModel","ngModelChange"],[3,"params","data"]],template:function(t,e){1&t&&(L.Tb(0,"div",0),L.Tb(1,"div",1),L.Tb(2,"mat-card",2),L.Tb(3,"mat-card-title"),L.Tb(4,"h4"),L.Dc(5,"Reporte de ventas"),L.Sb(),L.Sb(),L.Tb(6,"mat-card-content"),L.Tb(7,"form",3,4),L.Tb(9,"mat-form-field",5),L.Tb(10,"mat-label"),L.Dc(11,"Tipo"),L.Sb(),L.Tb(12,"mat-select",6),L.bc("ngModelChange",function(t){return e.params.tipo_reporte=t}),L.Cc(13,tr,2,2,"mat-option",7),L.Sb(),L.Sb(),L.Tb(14,"mat-form-field",5),L.Tb(15,"mat-label"),L.Dc(16,"Tipo de turno"),L.Sb(),L.Tb(17,"mat-select",8),L.bc("ngModelChange",function(t){return e.params.turno_tipo=t}),L.Cc(18,er,2,2,"mat-option",7),L.Sb(),L.Sb(),L.Tb(19,"mat-form-field",5),L.Tb(20,"input",9),L.bc("ngModelChange",function(t){return e.params.fdel=t}),L.Sb(),L.Sb(),L.Tb(21,"mat-form-field",5),L.Tb(22,"input",10),L.bc("ngModelChange",function(t){return e.params.fal=t}),L.Sb(),L.Sb(),L.Tb(23,"mat-form-field",5),L.Tb(24,"mat-label"),L.Dc(25,"Sede"),L.Sb(),L.Tb(26,"mat-select",11),L.bc("ngModelChange",function(t){return e.params.sede=t}),L.Cc(27,nr,2,2,"mat-option",7),L.Sb(),L.Sb(),L.Cc(28,or,5,2,"mat-form-field",12),L.Tb(29,"app-rpt-botones",13),L.bc("excelClick",function(){return e.getReporte(3)})("htmlClick",function(){return e.getReporte(1)})("pdfClick",function(){return e.getReporte(2)})("resetParamsClick",function(){return e.resetParams()}),L.Sb(),L.Sb(),L.Cc(30,ir,1,0,"app-cargando",14),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Cc(31,rr,3,2,"div",15),L.Cc(32,cr,3,2,"div",15)),2&t&&(L.Cb(12),L.lc("ngModel",e.params.tipo_reporte),L.Cb(1),L.lc("ngForOf",e.tiposReporte),L.Cb(4),L.lc("ngModel",e.params.turno_tipo),L.Cb(1),L.lc("ngForOf",e.tiposTurno),L.Cb(2),L.lc("ngModel",e.params.fdel),L.Cb(2),L.lc("ngModel",e.params.fal),L.Cb(4),L.lc("ngModel",e.params.sede),L.Cb(1),L.lc("ngForOf",e.sedes),L.Cb(1),L.lc("ngIf",e.params.sede&&e.params.sede.length>1),L.Cb(1),L.lc("configuracion",e.configBotones),L.Cb(1),L.lc("ngIf",e.cargando),L.Cb(1),L.lc("ngIf",1===e.params.tipo_reporte&&e.porCategoria.length>0),L.Cb(1),L.lc("ngIf",2===e.params.tipo_reporte))},directives:[D.a,D.h,D.c,f.r,f.l,f.m,_.b,_.e,P.a,f.p,f.k,f.n,b.l,y.b,f.c,b.m,Bi.a,q.k,sa.a,Gi,Yi],styles:[""]}),lr),dr=((sr=function(){function t(){var e=this;l(this,t),this.fdel=ta().format(Te.a.dbDateFormat),this.fdelChange=new L.o,this.fal=ta().format(Te.a.dbDateFormat),this.falChange=new L.o,this.configuracion={isRequiredFDel:!0,isRequiredFAl:!0},this.onFDelChange=function(){return e.fdelChange.emit(e.fdel)},this.onFAlChange=function(){return e.falChange.emit(e.fal)}}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||sr)},sr.\u0275cmp=L.Hb({type:sr,selectors:[["app-rpt-fechas"]],inputs:{fdel:"fdel",fal:"fal",configuracion:"configuracion"},outputs:{fdelChange:"fdelChange",falChange:"falChange"},decls:4,vars:4,consts:[[1,"fullWidth"],["type","date","matInput","","placeholder","Del","name","fdel",3,"ngModel","required","ngModelChange","change"],["type","date","matInput","","placeholder","Al","name","fal",3,"ngModel","required","ngModelChange","change"]],template:function(t,e){1&t&&(L.Tb(0,"mat-form-field",0),L.Tb(1,"input",1),L.bc("ngModelChange",function(t){return e.fdel=t})("change",function(){return e.onFDelChange()}),L.Sb(),L.Sb(),L.Tb(2,"mat-form-field",0),L.Tb(3,"input",2),L.bc("ngModelChange",function(t){return e.fal=t})("change",function(){return e.onFAlChange()}),L.Sb(),L.Sb()),2&t&&(L.Cb(1),L.lc("ngModel",e.fdel)("required",e.configuracion.isRequiredFDel),L.Cb(2),L.lc("ngModel",e.fal)("required",e.configuracion.isRequiredFAl))},directives:[_.b,y.b,f.c,f.k,f.n,f.p],styles:[""]}),sr);function br(t,e){1&t&&L.Ob(0,"app-cargando")}var mr,fr=((mr=function(){function t(){var e=this;l(this,t),this.params={},this.configParams={isRequiredFDel:!0,isRequiredFAl:!0},this.configBotones={isHtmlDisabled:!1,isPdfDisabled:!1,isExcelDisabled:!1},this.cargando=!1,this.resetParams=function(){e.params={fdel:ta().startOf("week").format(Te.a.dbDateFormat),fal:ta().endOf("week").format(Te.a.dbDateFormat)}},this.getReporte=function(){console.log("GENERANDO CON PARAMETROS = ",e.params)}}return d(t,[{key:"ngOnInit",value:function(){this.resetParams()}}]),t}()).\u0275fac=function(t){return new(t||mr)},mr.\u0275cmp=L.Hb({type:mr,selectors:[["app-turnos"]],decls:12,vars:5,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmEntidad","ngForm"],[3,"fdel","fal","configuracion","fdelChange","falChange"],[3,"configuracion","htmlClick","pdfClick","excelClick","resetParamsClick"],[4,"ngIf"]],template:function(t,e){1&t&&(L.Tb(0,"div",0),L.Tb(1,"div",1),L.Tb(2,"mat-card",2),L.Tb(3,"mat-card-title"),L.Tb(4,"h4"),L.Dc(5,"Reporte de Turnos"),L.Sb(),L.Sb(),L.Tb(6,"mat-card-content"),L.Tb(7,"form",3,4),L.Tb(9,"app-rpt-fechas",5),L.bc("fdelChange",function(t){return e.params.fdel=t})("falChange",function(t){return e.params.fal=t}),L.Sb(),L.Tb(10,"app-rpt-botones",6),L.bc("htmlClick",function(){return e.getReporte()})("pdfClick",function(){return e.getReporte()})("excelClick",function(){return e.getReporte()})("resetParamsClick",function(){return e.resetParams()}),L.Sb(),L.Sb(),L.Cc(11,br,1,0,"app-cargando",7),L.Sb(),L.Sb(),L.Sb(),L.Sb()),2&t&&(L.Cb(9),L.lc("fdel",e.params.fdel)("fal",e.params.fal)("configuracion",e.configParams),L.Cb(1),L.lc("configuracion",e.configBotones),L.Cb(1),L.lc("ngIf",e.cargando))},directives:[D.a,D.h,D.c,f.r,f.l,f.m,dr,Bi.a,b.m,sa.a],styles:[""]}),mr);function pr(t,e){1&t&&L.Ob(0,"app-cargando")}var hr,gr=function(){return{standalone:!0}},vr=((hr=function(){function t(e,n){var a=this;l(this,t),this.snackBar=e,this.pdfServicio=n,this.params={},this.titulo="Propinas",this.configBotones={isHtmlDisabled:!0,isPdfDisabled:!1,isExcelDisabled:!0,showHtml:!1,showExcel:!1,showPdf:!0},this.cargando=!1,this.resetParams=function(){a.params={},a.cargando=!1}}return d(t,[{key:"ngOnInit",value:function(){}},{key:"onSubmit",value:function(){var t=this;this.cargando=!0,this.pdfServicio.getReportePropina(this.params).subscribe(function(e){if(t.cargando=!1,e){var n=new Blob([e],{type:"application/pdf"});Object(Ni.saveAs)(n,"".concat(t.titulo,".pdf"))}else t.snackBar.open("No se pudo generar el reporte...",t.titulo,{duration:3e3})})}}]),t}()).\u0275fac=function(t){return new(t||hr)(L.Nb(M.a),L.Nb(Wa.a))},hr.\u0275cmp=L.Hb({type:hr,selectors:[["app-propinas"]],decls:17,vars:9,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmRptPropinas","ngForm"],[1,"fullWidth"],["matInput","","type","date","placeholder","Del","required","",3,"ngModel","ngModelOptions","ngModelChange"],["matInput","","type","date","placeholder","Al","required","",3,"ngModel","ngModelOptions","ngModelChange"],["name","mostrar_detalle",1,"fullWidth",3,"ngModel","ngModelChange"],[3,"configuracion","pdfClick","resetParamsClick"],[4,"ngIf"]],template:function(t,e){1&t&&(L.Tb(0,"div",0),L.Tb(1,"div",1),L.Tb(2,"mat-card",2),L.Tb(3,"mat-card-title"),L.Tb(4,"h4"),L.Dc(5,"Reporte de propinas"),L.Sb(),L.Sb(),L.Tb(6,"mat-card-content"),L.Tb(7,"form",3,4),L.Tb(9,"mat-form-field",5),L.Tb(10,"input",6),L.bc("ngModelChange",function(t){return e.params.fdel=t}),L.Sb(),L.Sb(),L.Tb(11,"mat-form-field",5),L.Tb(12,"input",7),L.bc("ngModelChange",function(t){return e.params.fal=t}),L.Sb(),L.Sb(),L.Tb(13,"mat-checkbox",8),L.bc("ngModelChange",function(t){return+(e.params._detalle=t)}),L.Dc(14,"Mostrar Detalle"),L.Sb(),L.Tb(15,"app-rpt-botones",9),L.bc("pdfClick",function(){return e.onSubmit()})("resetParamsClick",function(){return e.resetParams()}),L.Sb(),L.Sb(),L.Cc(16,pr,1,0,"app-cargando",10),L.Sb(),L.Sb(),L.Sb(),L.Sb()),2&t&&(L.Cb(10),L.lc("ngModel",e.params.fdel)("ngModelOptions",L.nc(7,gr)),L.Cb(2),L.lc("ngModel",e.params.fal)("ngModelOptions",L.nc(8,gr)),L.Cb(1),L.lc("ngModel",+e.params._detalle),L.Cb(2),L.lc("configuracion",e.configBotones),L.Cb(1),L.lc("ngIf",e.cargando))},directives:[D.a,D.h,D.c,f.r,f.l,f.m,_.b,y.b,f.c,f.p,f.k,f.n,x.a,Bi.a,b.m,sa.a],styles:[""]}),hr),Cr=c("+iZS");function Sr(t,e){1&t&&(L.Tb(0,"th",19),L.Dc(1,"No."),L.Sb())}function Tr(t,e){if(1&t&&(L.Tb(0,"td",20),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.Cb(1),L.Fc("",n.comanda," ")}}function _r(t,e){1&t&&(L.Tb(0,"th",19),L.Dc(1,"Orden"),L.Sb())}function yr(t,e){if(1&t&&(L.Tb(0,"td",20),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.Cb(1),L.Ec(n.origen_datos.numero_orden||"")}}function Dr(t,e){1&t&&(L.Tb(0,"th",19),L.Dc(1,"Fecha/Hora"),L.Sb())}function kr(t,e){if(1&t&&(L.Tb(0,"td",20),L.Dc(1),L.gc(2,"date"),L.Sb()),2&t){var n=e.$implicit;L.Cb(1),L.Ec(L.ic(2,1,n.fhcreacion,"dd/MM/yyyy HH:mm:ss")||"")}}function wr(t,e){1&t&&(L.Tb(0,"th",19),L.Dc(1,"Cliente"),L.Sb())}function Er(t,e){if(1&t&&(L.Tb(0,"td",20),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.Cb(1),L.Ec(n.cuentas[0].nombre)}}function Pr(t,e){1&t&&(L.Tb(0,"th",19),L.Dc(1,"Total"),L.Sb())}function xr(t,e){if(1&t&&(L.Tb(0,"td",20),L.Dc(1),L.gc(2,"number"),L.Sb()),2&t){var n=e.$implicit;L.Cb(1),L.Ec(L.ic(2,1,n.total,"1.2-2"))}}function Or(t,e){1&t&&(L.Tb(0,"th",21),L.Dc(1,"Imprimir"),L.Sb())}function Mr(t,e){if(1&t){var n=L.Ub();L.Tb(0,"td",22),L.Tb(1,"button",23),L.bc("click",function(){L.wc(n);var t=e.$implicit;return L.fc().imprimir(t)}),L.Dc(2," Imprimir "),L.Sb(),L.Sb()}}function Rr(t,e){1&t&&(L.Tb(0,"th",21),L.Dc(1,"Cancelar"),L.Sb())}function Fr(t,e){if(1&t){var n=L.Ub();L.Tb(0,"td",22),L.Tb(1,"button",23),L.bc("click",function(){L.wc(n);var t=e.$implicit;return L.fc().cancelarPedido(t)}),L.Dc(2," Cancelar "),L.Sb(),L.Sb()}}function Ir(t,e){1&t&&(L.Tb(0,"th",21),L.Dc(1,"Facturar"),L.Sb())}function Ar(t,e){if(1&t){var n=L.Ub();L.Tb(0,"td",22),L.Tb(1,"button",23),L.bc("click",function(){L.wc(n);var t=e.$implicit;return L.fc().firmar(t)}),L.Dc(2," Facturar "),L.Sb(),L.Sb()}}function Nr(t,e){if(1&t&&(L.Tb(0,"h6"),L.Dc(1),L.Sb()),2&t){var n=L.fc().$implicit;L.Cb(1),L.Fc("Orden #",n.origen_datos.numero_orden,"")}}function jr(t,e){if(1&t&&(L.Tb(0,"tr"),L.Tb(1,"td",29),L.Tb(2,"p",30),L.Dc(3),L.Sb(),L.Sb(),L.Sb()),2&t){var n=L.fc().$implicit;L.Cb(3),L.Ec(n.notas_generales)}}function Ur(t,e){1&t&&L.Ob(0,"br")}function Br(t,e){if(1&t&&(L.Tb(0,"span"),L.Dc(1),L.Sb()),2&t){var n=L.fc().$implicit;L.Cb(1),L.Fc("\xa0\xa0\xa0",n.notas,"")}}function Hr(t,e){if(1&t&&(L.Tb(0,"tr"),L.Tb(1,"td",31),L.Dc(2),L.Sb(),L.Sb()),2&t){var n=L.fc().$implicit;L.Cb(2),L.Fc(" ",n," ")}}function Lr(t,e){if(1&t&&(L.Rb(0),L.Cc(1,Hr,3,1,"tr",26),L.Qb()),2&t){var n=e.$implicit;L.Cb(1),L.lc("ngIf",n.length>0)}}function zr(t,e){if(1&t&&(L.Rb(0),L.Tb(1,"tr"),L.Tb(2,"td"),L.Dc(3),L.Cc(4,Ur,1,0,"br",26),L.Cc(5,Br,2,1,"span",26),L.Sb(),L.Tb(6,"td",27),L.Dc(7),L.gc(8,"number"),L.Sb(),L.Sb(),L.Cc(9,Lr,2,1,"ng-container",28),L.Qb()),2&t){var n=e.$implicit;L.Cb(3),L.Gc(" ",n.cantidad," ",n.articulo.descripcion,""),L.Cb(1),L.lc("ngIf",n.notas.length>0),L.Cb(1),L.lc("ngIf",n.notas.length>0),L.Cb(2),L.Ec(L.ic(8,6,+n.precio*+n.cantidad+ +n.monto_extra,"1.2-2")),L.Cb(2),L.lc("ngForOf",n.detalle)}}function qr(t,e){if(1&t&&(L.Tb(0,"td",20),L.Tb(1,"div",24),L.Tb(2,"table",25),L.Tb(3,"caption"),L.Tb(4,"h5"),L.Dc(5),L.Sb(),L.Cc(6,Nr,2,1,"h6",26),L.Sb(),L.Tb(7,"thead"),L.Tb(8,"th"),L.Dc(9,"Producto"),L.Sb(),L.Tb(10,"th",27),L.Dc(11,"Total"),L.Sb(),L.Sb(),L.Tb(12,"tbody"),L.Cc(13,jr,4,1,"tr",26),L.Cc(14,zr,10,9,"ng-container",28),L.Sb(),L.Sb(),L.Sb(),L.Sb()),2&t){var n=e.$implicit,a=L.fc();L.Db("colspan",a.columnsToDisplay.length),L.Cb(1),L.lc("@detailExpand",n==a.expandedElement?"expanded":"collapsed"),L.Cb(4),L.Fc("Detalle del pedido #",n.comanda,""),L.Cb(1),L.lc("ngIf",n.origen_datos.numero_orden),L.Cb(7),L.lc("ngIf",n.notas_generales),L.Cb(1),L.lc("ngForOf",n.cuentas[0].productos)}}function $r(t,e){1&t&&L.Ob(0,"tr",32)}function Wr(t,e){if(1&t){var n=L.Ub();L.Tb(0,"tr",33),L.bc("click",function(){L.wc(n);var t=e.$implicit,a=L.fc();return a.expandedElement=a.expandedElement===t?null:t}),L.Sb()}if(2&t){var a=e.$implicit,o=L.fc();L.Fb("example-expanded-row",o.expandedElement===a)}}function Gr(t,e){1&t&&L.Ob(0,"tr",34)}var Vr,Qr=function(){return["expandedDetail"]},Jr=((Vr=function(){function e(n,a,o,i,r,c,s,u,d){var b=this;l(this,e),this.dialog=n,this.snackBar=a,this.socket=o,this.ls=i,this.comandaSrvc=r,this.facturaSrvc=c,this.dns=s,this.pdfServicio=u,this.configSrvc=d,this.dataSource=[],this.columnsToDisplay=["comanda","orden","fechahora","nombre","total","imprimir","cancelar","facturar"],this.comandasEnLinea=[],this.params={de:0,a:99},this.avisoSocketIOEvent=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";b.dialog.open(He.a,{maxWidth:"400px",data:new He.b("Socket.IO",t,"Aceptar","Cancelar")}).afterClosed().subscribe(function(t){})},this.notificarUsuario=function(){var t={icon:"assets/img/minilogo.png",body:"Se recibi\xf3 una nueva orden a las ".concat(ta().format(Te.a.dateTimeFormat),"."),dir:"auto"};b.dns.createNotification("Rest-Touch Pro",1e4,t)},this.loadComandasEnLinea=function(){b.comandaSrvc.getComandasOnLIne().subscribe(function(t){b.comandasEnLinea=t,b.dataSource=b.comandasEnLinea})},this.setToPrint=function(t){var e=[];return t.forEach(function(t){e.push({id:+t.articulo.articulo,nombre:t.articulo.descripcion,cantidad:+t.cantidad,total:+t.total,notas:t.notas||"",impresora:{bluetooth:+t.articulo.impresora.bluetooth,direccion_ip:t.articulo.impresora.direccion_ip||"",impresora:+t.articulo.impresora.impresora,nombre:t.articulo.impresora.nombre||"",sede:+t.articulo.impresora.sede,ubicacion:t.articulo.impresora.ubicacion||""},detalle:t.detalle})}),e},this.getPdf=function(t){var e=+t.cuentas[0].cuenta;b.pdfServicio.getComanda(e).subscribe(function(t){if(t){var n=new Blob([t],{type:"application/pdf"}),a=window.URL.createObjectURL(n);window.open(a,"cuenta_".concat(e),"height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no")}else b.snackBar.open("No se pudo generar la comanda...","Comanda",{duration:3e3})})},this.imprimir=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=b.setToPrint(t.cuentas[0].productos),a=n.filter(function(t){return 0==+t.impresora.bluetooth}),o=n.filter(function(t){return 1==+t.impresora.bluetooth}),i={};a.length>0&&(i={Indice:e+1,Tipo:"Comanda",Nombre:t.cuentas[0].nombre,Numero:t.comanda,NoOrdenEnLinea:t.origen_datos.numero_orden,DireccionEntrega:t.origen_datos.direccion_entrega,DetalleCuenta:a,Total:0,NotasGenerales:t.notas_generales||""},b.socket.emit("print:comanda","".concat(JSON.stringify(i)))),o.length>0&&(i={Tipo:"Comanda",Nombre:t.cuentas[0].nombre,Numero:t.comanda,NoOrdenEnLinea:t.origen_datos.numero_orden,DireccionEntrega:t.origen_datos.direccion_entrega,DetalleCuenta:o,Total:0},b.printToBT(JSON.stringify(i)))},this.printToBT=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=window.open("com.restouch.impresion://impresion/".concat(t),"PrntBT","height=200,width=200,menubar=no,location=no,resizable=no,scrollbars=no,status=no");setTimeout(function(){return e.close()},1e3)},this.firmar=function(t){b.facturaSrvc.firmar(+t.factura.factura).subscribe(function(e){e.exito&&(b.loadComandasEnLinea(),b.dialog.open(He.a,{maxWidth:"400px",data:new He.b("Imprimir factura","\xbfDesea imprimir la factura?","S\xed","No")}).afterClosed().subscribe(function(n){n&&(1===(b.configSrvc.getConfig(Te.a.CONSTANTES.RT_MODO_FACTURA)||1)?b.printFactura(e.factura,t.origen_datos):b.representacionGrafica(+t.factura.factura))})),b.snackBar.open(e.mensaje,"Facturaci\xf3n",{duration:e.exito?3e3:1e4})})},this.printFactura=function(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={NombreEmpresa:e.empresa.nombre_comercial,NitEmpresa:e.empresa.nit,SedeEmpresa:e.sedeFactura.nombre,DireccionEmpresa:e.empresa.direccion,Fecha:ta(e.fecha_factura).format(Te.a.dateFormat),Nit:e.receptor.nit,Nombre:e.receptor.nombre,Direccion:e.receptor.direccion,Serie:e.serie_factura,Numero:e.numero_factura,Total:0,NoAutorizacion:e.fel_uuid,NombreCertificador:e.certificador_fel.nombre,NitCertificador:e.certificador_fel.nit,FechaDeAutorizacion:e.fecha_autorizacion,NoOrdenEnLinea:a.numero_orden,FormaDePago:a.metodo_pago&&a.metodo_pago.length>0?a.metodo_pago.join(", "):"",DetalleFactura:[]},i=t(e.detalle);try{for(i.s();!(n=i.n()).done;){var r=n.value;o.DetalleFactura.push({Cantidad:r.cantidad,Descripcion:r.articulo.descripcion,Total:parseFloat(r.total)}),o.Total+=parseFloat(r.total)}}catch(c){i.e(c)}finally{i.f()}b.socket.emit("print:factura",JSON.stringify(o))},this.representacionGrafica=function(t){b.facturaSrvc.getGrafo(t).subscribe(function(t){if(t.exito)switch(t.tipo){case"link":b.openLinkWindow(t.documento);break;case"pdf":b.openPdfDocument(t.documento)}})},this.openLinkWindow=function(t){return window.open(t,"winFactPdf","height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no")},this.openPdfDocument=function(t){window.open("","winFactPdf","height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no").document.write('<iframe width="100%" style="margin: -8px;border: none;" height="100%" src="data:application/pdf;base64, '+encodeURI(t)+'"></iframe>')},this.imprimirLote=function(){for(var t=b.params.de;t<=b.params.a;t++)b.imprimir(b.comandasEnLinea[t],t)},this.cancelarPedido=function(e){b.dialog.open(He.a,{maxWidth:"400px",data:new He.b("Cancelar pedido","Si cancela el pedido, ser\xe1 necesario volver a ingresarlo. \xbfDesea continuar?","S\xed","No",{input:[{select:!1,label:"Comentario",valor:null,id:"comentario",requerido:!1}]})}).afterClosed().subscribe(function(n){if(n.resultado){var a,o={},i=t(n.config.input);try{for(i.s();!(a=i.n()).done;){var r=a.value;o[r.id]=r.valor}}catch(c){i.e(c)}finally{i.f()}b.comandaSrvc.cancelarPedido(e.comanda,o).subscribe(function(t){t.exito?b.snackBar.open("Pedido cancelado con \xe9xito...","Pedido",{duration:3e3}):b.snackBar.open("ERROR: ".concat(t.mensaje),"Pedido",{duration:7e3}),b.loadComandasEnLinea()})}})}}return d(e,[{key:"ngOnInit",value:function(){var t=this;this.ls.get(Te.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(Te.a.usrTokenVar).sede_uuid),this.socket.on("shopify:updlist",function(){t.loadComandasEnLinea(),t.notificarUsuario()}),this.socket.on("reconnect",function(){return t.socket.emit("joinRestaurant",t.ls.get(Te.a.usrTokenVar).sede_uuid)}),this.socket.on("connect_timeout",function(){var e="DESCONECTADO DEL SERVIDOR (TIMEOUT)";t.snackBar.open(e,"ERROR",{duration:5e3}),t.avisoSocketIOEvent(e)}),this.socket.on("reconnect_attempt",function(e){return t.snackBar.open("INTENTO DE RECONEXI\xd3N #".concat(e),"ERROR",{duration:1e4})}),this.socket.on("shopify:error",function(e){t.loadComandasEnLinea(),t.snackBar.open("ERROR: ".concat(e),"Firmar",{duration:1e4})})),this.loadComandasEnLinea()}},{key:"ngOnDestroy",value:function(){}}]),e}()).\u0275fac=function(t){return new(t||Vr)(L.Nb(N.b),L.Nb(M.a),L.Nb($n.a),L.Nb(Ee.a),L.Nb(zn),L.Nb(ia.a),L.Nb(Cr.a),L.Nb(Wa.a),L.Nb(qn.a))},Vr.\u0275cmp=L.Hb({type:Vr,selectors:[["app-comanda-en-linea"]],decls:32,vars:5,consts:[[1,"row"],[1,"col","m12","s12"],["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","comanda"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","orden"],["matColumnDef","fechahora"],["matColumnDef","nombre"],["matColumnDef","total"],["matColumnDef","imprimir"],["mat-header-cell","","style","width: 10%;",4,"matHeaderCellDef"],["mat-cell","","class","tamanioAmigable","style","width: 10%;",4,"matCellDef"],["matColumnDef","cancelar"],["matColumnDef","facturar"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",3,"example-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",2,"width","10%"],["mat-cell","",1,"tamanioAmigable",2,"width","10%"],["mat-flat-button","","type","button","color","accent",1,"btnCelSize",3,"click"],[1,"example-element-detail"],[2,"width","75%","background-color","#f5f5f5","table-layout","fixed"],[4,"ngIf"],[1,"rtxt"],[4,"ngFor","ngForOf"],["colspan","2"],[1,"long-notes"],["colspan","2",1,"tabulador-doble"],["mat-header-row",""],["mat-row","",1,"example-element-row",3,"click"],["mat-row","",1,"example-detail-row"]],template:function(t,e){1&t&&(L.Tb(0,"div",0),L.Tb(1,"div",1),L.Tb(2,"table",2),L.Rb(3,3),L.Cc(4,Sr,2,0,"th",4),L.Cc(5,Tr,2,1,"td",5),L.Qb(),L.Rb(6,6),L.Cc(7,_r,2,0,"th",4),L.Cc(8,yr,2,1,"td",5),L.Qb(),L.Rb(9,7),L.Cc(10,Dr,2,0,"th",4),L.Cc(11,kr,3,4,"td",5),L.Qb(),L.Rb(12,8),L.Cc(13,wr,2,0,"th",4),L.Cc(14,Er,2,1,"td",5),L.Qb(),L.Rb(15,9),L.Cc(16,Pr,2,0,"th",4),L.Cc(17,xr,3,4,"td",5),L.Qb(),L.Rb(18,10),L.Cc(19,Or,2,0,"th",11),L.Cc(20,Mr,3,0,"td",12),L.Qb(),L.Rb(21,13),L.Cc(22,Rr,2,0,"th",11),L.Cc(23,Fr,3,0,"td",12),L.Qb(),L.Rb(24,14),L.Cc(25,Ir,2,0,"th",11),L.Cc(26,Ar,3,0,"td",12),L.Qb(),L.Rb(27,15),L.Cc(28,qr,15,6,"td",5),L.Qb(),L.Cc(29,$r,1,0,"tr",16),L.Cc(30,Wr,1,2,"tr",17),L.Cc(31,Gr,1,0,"tr",18),L.Sb(),L.Sb(),L.Sb()),2&t&&(L.Cb(2),L.lc("dataSource",e.dataSource),L.Cb(27),L.lc("matHeaderRowDef",e.columnsToDisplay),L.Cb(1),L.lc("matRowDefColumns",e.columnsToDisplay),L.Cb(1),L.lc("matRowDefColumns",L.nc(4,Qr)))},directives:[E.j,E.c,E.e,E.b,E.g,E.i,E.d,E.a,O.a,b.m,b.l,E.f,E.h],pipes:[b.e,b.f],styles:["table[_ngcontent-%COMP%]{width:100%}tr.example-detail-row[_ngcontent-%COMP%]{height:0}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):hover{background:#777}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):active{background:#efefef}.tamanioAmigable[_ngcontent-%COMP%]{padding:5px;width:10%!important;min-height:55px}.btnCelSize[_ngcontent-%COMP%]{min-width:55px;width:100%}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.example-element-diagram[_ngcontent-%COMP%]{min-width:80px;border:2px solid #000;padding:8px;font-weight:lighter;margin:8px 0;height:104px}.example-element-symbol[_ngcontent-%COMP%]{font-weight:700;font-size:40px;line-height:normal}.example-element-description[_ngcontent-%COMP%]{padding:16px}.example-element-description-attribution[_ngcontent-%COMP%]{opacity:.5}.long-notes[_ngcontent-%COMP%]{overflow-wrap:break-word}"],data:{animation:[Object(X.m)("detailExpand",[Object(X.j)("collapsed",Object(X.k)({height:"0px",minHeight:"0"})),Object(X.j)("expanded",Object(X.k)({height:"*"})),Object(X.l)("expanded <=> collapsed",Object(X.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),Vr),Xr=c("roIu");function Zr(t,e){if(1&t&&(L.Tb(0,"mat-option",17),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n.turno_tipo),L.Cb(1),L.Fc(" ",n.descripcion," ")}}function Kr(t,e){if(1&t&&(L.Tb(0,"mat-option",17),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n.sede.sede),L.Cb(1),L.Fc(" ",n.sede.nombre," ")}}function Yr(t,e){if(1&t&&(L.Tb(0,"mat-option",17),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n.id),L.Cb(1),L.Fc(" ",n.descripcion," ")}}function tc(t,e){if(1&t){var n=L.Ub();L.Tb(0,"mat-form-field",5),L.Tb(1,"mat-label"),L.Dc(2,"Agrupar por"),L.Sb(),L.Tb(3,"mat-select",18),L.bc("ngModelChange",function(t){return L.wc(n),L.fc().params._grupo=t}),L.Cc(4,Yr,2,2,"mat-option",7),L.Sb(),L.Sb()}if(2&t){var a=L.fc();L.Cb(3),L.lc("ngModel",a.params._grupo),L.Cb(1),L.lc("ngForOf",a.grupos)}}function ec(t,e){1&t&&L.Ob(0,"hr")}var nc=function(){return{standalone:!0}};function ac(t,e){if(1&t&&(L.Tb(0,"div"),L.Tb(1,"mat-form-field",5),L.Tb(2,"input",20),L.bc("ngModelChange",function(t){return e.$implicit.monto=t}),L.Sb(),L.Sb(),L.Sb()),2&t){var n=e.$implicit;L.Cb(2),L.mc("placeholder",n.descripcion),L.lc("ngModel",n.monto)("ngModelOptions",L.nc(3,nc))}}function oc(t,e){if(1&t&&(L.Tb(0,"form"),L.Cc(1,ac,3,4,"div",19),L.Sb()),2&t){var n=L.fc();L.Cb(1),L.lc("ngForOf",n.fpagos)}}function ic(t,e){1&t&&L.Ob(0,"app-cargando")}var rc,cc=((rc=function(){function t(e,n,a,o,i){var r=this;l(this,t),this.snackBar=e,this.pdfServicio=n,this.tipoTurnoSrvc=a,this.fpagoSrvc=o,this.sedeSrvc=i,this.params={_validar:!1,sede:[]},this.titulo="Resumen de caja",this.tiposTurno=[],this.cargando=!1,this.fpagos=[],this.sedes=[],this.grupos=Te.a.grupos,this.configBotones={showPdf:!0,showHtml:!1,showExcel:!0},this.loadFormaPago=function(){r.fpagoSrvc.get().subscribe(function(t){t&&(r.fpagos=t)})},this.loadSedes=function(){r.sedeSrvc.getSedes({reporte:!0}).subscribe(function(t){t&&(r.sedes=t)})},this.loadTiposTurno=function(){r.tipoTurnoSrvc.get().subscribe(function(t){t&&(r.tiposTurno=t)})},this.resetParams=function(){r.params={},r.cargando=!1},this.excelClick=function(){r.cargando=!0,r.params._pagos=r.fpagos,r.params._excel=1,r.pdfServicio.getReporteCaja(r.params).subscribe(function(t){if(r.cargando=!1,t){var e=new Blob([t],{type:"application/vnd.ms-excel"});Object(Ni.saveAs)(e,"".concat(r.titulo,".xls"))}else r.snackBar.open("No se pudo generar el reporte...",r.titulo,{duration:3e3})})}}return d(t,[{key:"ngOnInit",value:function(){this.loadTiposTurno(),this.loadFormaPago(),this.loadSedes()}},{key:"onSubmit",value:function(){var t=this;this.cargando=!0,this.params._pagos=this.fpagos,this.pdfServicio.getReporteCaja(this.params).subscribe(function(e){if(t.cargando=!1,e){var n=new Blob([e],{type:"application/pdf"});Object(Ni.saveAs)(n,"".concat(t.titulo,".pdf"))}else t.snackBar.open("No se pudo generar el reporte...",t.titulo,{duration:3e3})})}}]),t}()).\u0275fac=function(t){return new(t||rc)(L.Nb(M.a),L.Nb(Wa.a),L.Nb(Xo),L.Nb(Xr.a),L.Nb(Ui.a))},rc.\u0275cmp=L.Hb({type:rc,selectors:[["app-caja"]],decls:35,vars:17,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmRptCaja","ngForm"],[1,"fullWidth"],["name","turno_tipo",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","date","placeholder","Del","required","",3,"ngModel","ngModelOptions","ngModelChange"],["matInput","","type","date","placeholder","Al","required","",3,"ngModel","ngModelOptions","ngModelChange"],["name","sede","multiple","",3,"ngModel","ngModelChange"],["class","fullWidth",4,"ngIf"],[1,"col"],["name","mostrar_detalle",1,"fullWidth",3,"ngModel","ngModelChange"],["name","validar",1,"fullWidth",3,"ngModel","ngModelChange"],[4,"ngIf"],[3,"configuracion","excelClick","pdfClick","resetParamsClick"],[3,"value"],["name","grupo",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["matInput","","type","number","step","0.01",3,"placeholder","ngModel","ngModelOptions","ngModelChange"]],template:function(t,e){1&t&&(L.Tb(0,"div",0),L.Tb(1,"div",1),L.Tb(2,"mat-card",2),L.Tb(3,"mat-card-title"),L.Tb(4,"h4"),L.Dc(5,"Reporte de caja"),L.Sb(),L.Sb(),L.Tb(6,"mat-card-content"),L.Tb(7,"form",3,4),L.Tb(9,"mat-form-field",5),L.Tb(10,"mat-label"),L.Dc(11,"Tipo de turno"),L.Sb(),L.Tb(12,"mat-select",6),L.bc("ngModelChange",function(t){return e.params.turno_tipo=t}),L.Cc(13,Zr,2,2,"mat-option",7),L.Sb(),L.Sb(),L.Tb(14,"mat-form-field",5),L.Tb(15,"input",8),L.bc("ngModelChange",function(t){return e.params.fdel=t}),L.Sb(),L.Sb(),L.Tb(16,"mat-form-field",5),L.Tb(17,"input",9),L.bc("ngModelChange",function(t){return e.params.fal=t}),L.Sb(),L.Sb(),L.Tb(18,"mat-form-field",5),L.Tb(19,"mat-label"),L.Dc(20,"Sede"),L.Sb(),L.Tb(21,"mat-select",10),L.bc("ngModelChange",function(t){return e.params.sede=t}),L.Cc(22,Kr,2,2,"mat-option",7),L.Sb(),L.Sb(),L.Cc(23,tc,5,2,"mat-form-field",11),L.Tb(24,"div",0),L.Tb(25,"div",12),L.Tb(26,"mat-checkbox",13),L.bc("ngModelChange",function(t){return+(e.params._detalle=t)}),L.Dc(27,"Mostrar Detalle"),L.Sb(),L.Sb(),L.Tb(28,"div",12),L.Tb(29,"mat-checkbox",14),L.bc("ngModelChange",function(t){return+(e.params._validar=t)}),L.Dc(30,"Validar Montos"),L.Sb(),L.Sb(),L.Sb(),L.Cc(31,ec,1,0,"hr",15),L.Cc(32,oc,2,1,"form",15),L.Tb(33,"app-rpt-botones",16),L.bc("excelClick",function(){return e.excelClick()})("pdfClick",function(){return e.onSubmit()})("resetParamsClick",function(){return e.resetParams()}),L.Sb(),L.Sb(),L.Cc(34,ic,1,0,"app-cargando",15),L.Sb(),L.Sb(),L.Sb(),L.Sb()),2&t&&(L.Cb(12),L.lc("ngModel",e.params.turno_tipo),L.Cb(1),L.lc("ngForOf",e.tiposTurno),L.Cb(2),L.lc("ngModel",e.params.fdel)("ngModelOptions",L.nc(15,nc)),L.Cb(2),L.lc("ngModel",e.params.fal)("ngModelOptions",L.nc(16,nc)),L.Cb(4),L.lc("ngModel",e.params.sede),L.Cb(1),L.lc("ngForOf",e.sedes),L.Cb(1),L.lc("ngIf",e.params.sede&&e.params.sede.length>1),L.Cb(3),L.lc("ngModel",+e.params._detalle),L.Cb(3),L.lc("ngModel",+e.params._validar),L.Cb(2),L.lc("ngIf",e.params._validar),L.Cb(1),L.lc("ngIf",e.params._validar),L.Cb(1),L.lc("configuracion",e.configBotones),L.Cb(1),L.lc("ngIf",e.cargando))},directives:[D.a,D.h,D.c,f.r,f.l,f.m,_.b,_.e,P.a,f.k,f.n,b.l,y.b,f.c,f.p,b.m,x.a,Bi.a,q.k,f.o,sa.a],styles:[""]}),rc);function sc(t,e){1&t&&L.Ob(0,"app-cargando")}var lc,uc=((lc=function(){function t(e,n){var a=this;l(this,t),this.snackBar=e,this.pdfServicio=n,this.params={},this.titulo="Facturas",this.cargando=!1,this.configBotones={showPdf:!0,showHtml:!1,showExcel:!0,isPdfDisabled:!1,isExcelDisabled:!1},this.resetParams=function(){a.params={fdel:ta().startOf("month").format(Te.a.dbDateFormat),fal:ta().format(Te.a.dbDateFormat)},a.cargando=!1},this.chkDates=function(){a.configBotones.isPdfDisabled=!a.params.fdel||!a.params.fal,a.configBotones.isExcelDisabled=!a.params.fdel||!a.params.fal}}return d(t,[{key:"ngOnInit",value:function(){this.resetParams()}},{key:"onSubmit",value:function(){var t=this;this.cargando=!0,this.params._excel=0,this.pdfServicio.getReporteFactura(this.params).subscribe(function(e){if(t.cargando=!1,e){var n=new Blob([e],{type:"application/pdf"});Object(Ni.saveAs)(n,"".concat(t.titulo,".pdf"))}else t.snackBar.open("No se pudo generar el reporte...",t.titulo,{duration:3e3})})}},{key:"excelClick",value:function(){var t=this;this.cargando=!0,this.params._excel=1,this.pdfServicio.getReporteFactura(this.params).subscribe(function(e){if(t.cargando=!1,e){var n=new Blob([e],{type:"application/vnd.ms-excel"});Object(Ni.saveAs)(n,"".concat(t.titulo,".xls"))}else t.snackBar.open("No se pudo generar el reporte...",t.titulo,{duration:3e3})})}}]),t}()).\u0275fac=function(t){return new(t||lc)(L.Nb(M.a),L.Nb(Wa.a))},lc.\u0275cmp=L.Hb({type:lc,selectors:[["app-factura"]],decls:22,vars:6,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmRptFactura","ngForm"],[1,"fullWidth"],["matInput","","type","date","placeholder","Del","name","fdel","required","",3,"ngModel","ngModelChange","change"],["matInput","","type","date","placeholder","Al","name","fal","required","",3,"ngModel","ngModelChange","change"],[1,"col"],["name","detalle",1,"fullWidth",3,"ngModel","ngModelChange"],["name","anuladas",1,"fullWidth",3,"ngModel","ngModelChange"],[3,"configuracion","excelClick","pdfClick","resetParamsClick"],[4,"ngIf"]],template:function(t,e){1&t&&(L.Tb(0,"div",0),L.Tb(1,"div",1),L.Tb(2,"mat-card",2),L.Tb(3,"mat-card-title"),L.Tb(4,"h4"),L.Dc(5,"Reporte de facturas"),L.Sb(),L.Sb(),L.Tb(6,"mat-card-content"),L.Tb(7,"form",3,4),L.Tb(9,"mat-form-field",5),L.Tb(10,"input",6),L.bc("ngModelChange",function(t){return e.params.fdel=t})("change",function(){return e.chkDates()}),L.Sb(),L.Sb(),L.Tb(11,"mat-form-field",5),L.Tb(12,"input",7),L.bc("ngModelChange",function(t){return e.params.fal=t})("change",function(){return e.chkDates()}),L.Sb(),L.Sb(),L.Tb(13,"div",0),L.Tb(14,"div",8),L.Tb(15,"mat-checkbox",9),L.bc("ngModelChange",function(t){return+(e.params._detalle=t)}),L.Dc(16,"Mostrar Detalle"),L.Sb(),L.Sb(),L.Tb(17,"div",8),L.Tb(18,"mat-checkbox",10),L.bc("ngModelChange",function(t){return+(e.params._anuladas=t)}),L.Dc(19,"Mostrar \xdanicamente Anuladas"),L.Sb(),L.Sb(),L.Sb(),L.Tb(20,"app-rpt-botones",11),L.bc("excelClick",function(){return e.excelClick()})("pdfClick",function(){return e.onSubmit()})("resetParamsClick",function(){return e.resetParams()}),L.Sb(),L.Sb(),L.Cc(21,sc,1,0,"app-cargando",12),L.Sb(),L.Sb(),L.Sb(),L.Sb()),2&t&&(L.Cb(10),L.lc("ngModel",e.params.fdel),L.Cb(2),L.lc("ngModel",e.params.fal),L.Cb(3),L.lc("ngModel",+e.params._detalle),L.Cb(3),L.lc("ngModel",+e.params._anuladas),L.Cb(2),L.lc("configuracion",e.configBotones),L.Cb(1),L.lc("ngIf",e.cargando))},directives:[D.a,D.h,D.c,f.r,f.l,f.m,_.b,y.b,f.c,f.p,f.k,f.n,x.a,Bi.a,b.m,sa.a],styles:[""]}),lc);function dc(t,e){if(1&t){var n=L.Ub();L.Tb(0,"mat-list-item",5),L.bc("click",function(){L.wc(n);var t=e.$implicit;return L.fc().getTurno(t)}),L.Tb(1,"mat-icon",6),L.Dc(2,"line_weight"),L.Sb(),L.Tb(3,"h5",7),L.Dc(4),L.Sb(),L.Sb()}if(2&t){var a=e.$implicit;L.Cb(4),L.Ec(a.descripcion)}}var bc,mc=function(){return{standalone:!0}},fc=((bc=function(){function t(e){var n=this;l(this,t),this.turnoSrvc=e,this.getTurnoEv=new L.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadTurnos=function(){n.turnoSrvc.get().subscribe(function(t){t&&t.length>0&&(n.lstTurnos=t,n.applyFilter())})},this.getTurno=function(t){n.getTurnoEv.emit(t)},this.pageChange=function(t){n.pageSize=t.pageSize,n.pageIndex=t.pageIndex,n.applyFilter()}}return d(t,[{key:"ngOnInit",value:function(){this.loadTurnos()}},{key:"applyFilter",value:function(){if(this.txtFiltro.length>0){var t=Object(Te.b)(this.lstTurnos,this.txtFiltro);this.length=t.length,this.lstTurnosPaged=Object(Te.c)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstTurnos.length,this.lstTurnosPaged=Object(Te.c)(this.lstTurnos,this.pageSize,this.pageIndex+1)}}]),t}()).\u0275fac=function(t){return new(t||bc)(L.Nb(Xo))},bc.\u0275cmp=L.Hb({type:bc,selectors:[["app-lista-turno-tipo"]],outputs:{getTurnoEv:"getTurnoEv"},decls:7,vars:7,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,e){1&t&&(L.Tb(0,"mat-card",0),L.Tb(1,"mat-card-content"),L.Tb(2,"mat-form-field",1),L.Tb(3,"input",2),L.bc("keyup",function(){return e.applyFilter()})("ngModelChange",function(t){return e.txtFiltro=t}),L.Sb(),L.Sb(),L.Tb(4,"mat-nav-list"),L.Cc(5,dc,5,1,"mat-list-item",3),L.Sb(),L.Tb(6,"mat-paginator",4),L.bc("page",function(t){return e.pageChange(t)}),L.Sb(),L.Sb(),L.Sb()),2&t&&(L.Cb(3),L.lc("ngModel",e.txtFiltro)("ngModelOptions",L.nc(6,mc)),L.Cb(2),L.lc("ngForOf",e.lstTurnosPaged),L.Cb(1),L.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[D.a,D.c,_.b,y.b,f.c,f.k,f.n,S.e,b.l,A.a,S.c,T.a,S.b,q.h],styles:[""]}),bc);function pc(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",9),L.bc("click",function(){return L.wc(n),L.fc().resetTurno()}),L.Dc(1," Nuevo "),L.Sb()}}var hc,gc,vc,Cc=((hc=function(){function t(e,n){var a=this;l(this,t),this._snackBar=e,this.turnoSrvc=n,this.turnoSavedEv=new L.o,this.resetTurno=function(){return a.turno={turno_tipo:null,descripcion:null,activo:1}},this.onSubmit=function(){a.turnoSrvc.save(a.turno).subscribe(function(t){t.exito?(a.turnoSavedEv.emit(),a.resetTurno(),a._snackBar.open("Tipo de Turno agregado...","Turno",{duration:3e3})):a._snackBar.open("ERROR: ".concat(t.mensaje),"Turno",{duration:3e3})})}}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||hc)(L.Nb(M.a),L.Nb(Xo))},hc.\u0275cmp=L.Hb({type:hc,selectors:[["app-form-turno-tipo"]],inputs:{turno:"turno"},outputs:{turnoSavedEv:"turnoSavedEv"},decls:15,vars:5,consts:[[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmTurno","ngForm"],[1,"fullWidth"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"ngModel","ngModelChange"],["name","activo",1,"fullWidth",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click"]],template:function(t,e){if(1&t){var n=L.Ub();L.Tb(0,"mat-card",0),L.Tb(1,"mat-card-title"),L.Tb(2,"h4"),L.Dc(3),L.Sb(),L.Sb(),L.Tb(4,"mat-card-content"),L.Tb(5,"form",1,2),L.bc("ngSubmit",function(){return L.wc(n),L.tc(6).form.valid&&e.onSubmit()}),L.Tb(7,"mat-form-field",3),L.Tb(8,"input",4),L.bc("ngModelChange",function(t){return e.turno.descripcion=t}),L.Sb(),L.Sb(),L.Tb(9,"mat-checkbox",5),L.bc("ngModelChange",function(t){return+(e.turno.activo=t)}),L.Dc(10,"Activo"),L.Sb(),L.Tb(11,"div",6),L.Tb(12,"button",7),L.Dc(13," Guardar "),L.Sb(),L.Cc(14,pc,2,0,"button",8),L.Sb(),L.Sb(),L.Sb(),L.Sb()}if(2&t){var a=L.tc(6);L.Cb(3),L.Fc(" Tipo de Turno ",e.turno.turno_tipo?e.turno.descripcion:""," "),L.Cb(5),L.lc("ngModel",e.turno.descripcion),L.Cb(1),L.lc("ngModel",+e.turno.activo),L.Cb(3),L.lc("disabled",!a.form.valid),L.Cb(2),L.lc("ngIf",e.turno.turno_tipo)}},directives:[D.a,D.h,D.c,f.r,f.l,f.m,_.b,y.b,f.c,f.p,f.k,f.n,x.a,O.a,b.m],styles:[""]}),hc),Sc=["lstTurno"],Tc=((vc=function(){function t(){var e=this;l(this,t),this.setTurno=function(t){return e.turno=t},this.refreshTurnoList=function(){return e.lstTurnoComponent.loadTurnos()},this.turno={turno_tipo:null,descripcion:null,activo:1}}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||vc)},vc.\u0275cmp=L.Hb({type:vc,selectors:[["app-turno-tipo"]],viewQuery:function(t,e){var n;1&t&&L.Ic(Sc,1),2&t&&L.sc(n=L.cc())&&(e.lstTurnoComponent=n.first)},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getTurnoEv"],["lstTurno",""],[1,"col","m7","s12"],[3,"turno","turnoSavedEv"],["frmTurno",""]],template:function(t,e){1&t&&(L.Tb(0,"div",0),L.Tb(1,"div",1),L.Tb(2,"app-lista-turno-tipo",2,3),L.bc("getTurnoEv",function(t){return e.setTurno(t)}),L.Sb(),L.Sb(),L.Tb(4,"div",4),L.Tb(5,"app-form-turno-tipo",5,6),L.bc("turnoSavedEv",function(){return e.refreshTurnoList()}),L.Sb(),L.Sb(),L.Sb()),2&t&&(L.Cb(5),L.lc("turno",e.turno))},directives:[fc,Cc],styles:[""]}),vc),_c=((gc=function(){function t(e){l(this,t),this.http=e,this.moduleUrl="propina",this.srvcErrHndl=new _e.a}return d(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/buscar?").concat(ke.stringify(t))).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(t){return this.http.post("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/guardar").concat(t.propina_distribucion?"/"+t.propina_distribucion:""),t).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||gc)(L.Xb(m.b))},gc.\u0275prov=L.Jb({token:gc,factory:gc.\u0275fac,providedIn:"root"}),gc);function yc(t,e){if(1&t){var n=L.Ub();L.Tb(0,"td",7),L.bc("click",function(){L.wc(n);var t=e.$implicit;return L.fc().getPropina(t)}),L.Tb(1,"mat-list"),L.Tb(2,"mat-list-item"),L.Tb(3,"mat-icon",8),L.Dc(4,"line_weight"),L.Sb(),L.Tb(5,"h5",9),L.Dc(6),L.Sb(),L.Tb(7,"span",9),L.Dc(8),L.Sb(),L.Tb(9,"button",10),L.Tb(10,"mat-icon"),L.Dc(11,"arrow_right_alt"),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Sb()}if(2&t){var a=e.$implicit;L.Cb(6),L.Fc("",a.porcentaje,"%"),L.Cb(2),L.Ec(a.usuario_tipo.descripcion)}}function Dc(t,e){1&t&&L.Ob(0,"tr",11)}var kc,wc=function(){return[5,10,20]},Ec=((kc=function(){function t(e){var n=this;l(this,t),this.propinaSrvc=e,this.displayedColumns=["propina"],this.getPropinaEv=new L.o,this.loadPropinas=function(){n.propinaSrvc.get().subscribe(function(t){t&&t.length>0&&(n.lstPropinas=t,n.dataSource=new E.k(n.lstPropinas),n.dataSource.paginator=n.paginator)})},this.getPropina=function(t){n.getPropinaEv.emit(t)}}return d(t,[{key:"ngOnInit",value:function(){this.loadPropinas()}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.trim().toLowerCase()}}]),t}()).\u0275fac=function(t){return new(t||kc)(L.Nb(_c))},kc.\u0275cmp=L.Hb({type:kc,selectors:[["app-lista-propina"]],viewQuery:function(t,e){var n;1&t&&L.Ic(A.a,3),2&t&&L.sc(n=L.cc())&&(e.paginator=n.first)},outputs:{getPropinaEv:"getPropinaEv"},decls:9,vars:4,consts:[[1,"mat-elevation-z4","fullWidth"],["matInput","","placeholder","Buscar...",3,"keyup"],["mat-table","",3,"dataSource"],["matColumnDef","propina"],["mat-cell","",3,"click",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-cell","",3,"click"],["mat-list-icon",""],["mat-line",""],["mat-icon-button","","type","button","color","accent"],["mat-row",""]],template:function(t,e){1&t&&(L.Tb(0,"mat-card",0),L.Tb(1,"mat-card-content"),L.Tb(2,"mat-form-field"),L.Tb(3,"input",1),L.bc("keyup",function(t){return e.applyFilter(t.target.value)}),L.Sb(),L.Sb(),L.Tb(4,"table",2),L.Rb(5,3),L.Cc(6,yc,12,2,"td",4),L.Qb(),L.Cc(7,Dc,1,0,"tr",5),L.Sb(),L.Ob(8,"mat-paginator",6),L.Sb(),L.Sb()),2&t&&(L.Cb(4),L.lc("dataSource",e.dataSource),L.Cb(3),L.lc("matRowDefColumns",e.displayedColumns),L.Cb(1),L.lc("pageSizeOptions",L.nc(3,wc)))},directives:[D.a,D.c,_.b,y.b,E.j,E.c,E.b,E.i,A.a,E.a,S.a,S.c,T.a,S.b,q.h,O.a,E.h],styles:[""]}),kc);function Pc(t,e){if(1&t&&(L.Tb(0,"mat-option",14),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n.usuario_tipo),L.Cb(1),L.Fc(" ",n.descripcion," ")}}function xc(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",15),L.bc("click",function(){return L.wc(n),L.fc().resetPropina()}),L.Tb(1,"mat-icon"),L.Dc(2,"add"),L.Sb(),L.Sb()}}var Oc,Mc,Rc,Fc=((Oc=function(){function t(e,n,a){var o=this;l(this,t),this.snackBar=e,this.propinaSrvc=n,this.usuarioSrvc=a,this.propinaSavedEv=new L.o,this.usuarios=[],this.loadUsuario=function(){o.usuarioSrvc.get().subscribe(function(t){o.usuarios=t})},this.resetPropina=function(){return o.propina={propina_distribucion:null,usuario_tipo:null,porcentaje:null,anulado:0,sede:null,grupal:0}},this.onSubmit=function(){o.propinaSrvc.save(o.propina).subscribe(function(t){t.exito?(o.propinaSavedEv.emit(),o.resetPropina(),o.snackBar.open("Propina agregada...","Distribucion de propinas",{duration:3e3})):o.snackBar.open("ERROR: ".concat(t.mensaje),"Distribucion de propinas",{duration:3e3})})}}return d(t,[{key:"ngOnInit",value:function(){this.resetPropina(),this.loadUsuario()}}]),t}()).\u0275fac=function(t){return new(t||Oc)(L.Nb(M.a),L.Nb(_c),L.Nb(Zo))},Oc.\u0275cmp=L.Hb({type:Oc,selectors:[["app-form-propina"]],inputs:{propina:"propina"},outputs:{propinaSavedEv:"propinaSavedEv"},decls:24,vars:7,consts:[[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmPropina","ngForm"],[1,"fullWidth"],["name","usuario","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","step","0.01","placeholder","Porcentaje","name","porcentaje","required","",3,"ngModel","ngModelChange"],[1,"row"],[1,"col","m6","s6"],["name","grupal",1,"fullWidth",3,"ngModel","ngModelChange"],["name","anulado",1,"fullWidth",3,"ngModel","ngModelChange"],["align","end"],["mat-icon-button","","type","submit","color","accent",3,"disabled"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],[3,"value"],["mat-icon-button","","type","button","color","accent",3,"click"]],template:function(t,e){if(1&t){var n=L.Ub();L.Tb(0,"mat-card",0),L.Ob(1,"mat-card-title"),L.Tb(2,"mat-card-content"),L.Tb(3,"form",1,2),L.bc("ngSubmit",function(){return L.wc(n),L.tc(4).form.valid&&e.onSubmit()}),L.Tb(5,"mat-form-field",3),L.Tb(6,"mat-label"),L.Dc(7,"Tipo Usuario"),L.Sb(),L.Tb(8,"mat-select",4),L.bc("ngModelChange",function(t){return e.propina.usuario_tipo=t}),L.Cc(9,Pc,2,2,"mat-option",5),L.Sb(),L.Sb(),L.Tb(10,"mat-form-field",3),L.Tb(11,"input",6),L.bc("ngModelChange",function(t){return e.propina.porcentaje=t}),L.Sb(),L.Sb(),L.Tb(12,"div",7),L.Tb(13,"div",8),L.Tb(14,"mat-checkbox",9),L.bc("ngModelChange",function(t){return+(e.propina.grupal=t)}),L.Dc(15,"Propina Grupal"),L.Sb(),L.Sb(),L.Tb(16,"div",8),L.Tb(17,"mat-checkbox",10),L.bc("ngModelChange",function(t){return+(e.propina.anulado=t)}),L.Dc(18,"Anulado"),L.Sb(),L.Sb(),L.Sb(),L.Tb(19,"div",11),L.Tb(20,"button",12),L.Tb(21,"mat-icon"),L.Dc(22,"save"),L.Sb(),L.Sb(),L.Cc(23,xc,3,0,"button",13),L.Sb(),L.Sb(),L.Sb(),L.Sb()}if(2&t){var a=L.tc(4);L.Cb(8),L.lc("ngModel",e.propina.usuario_tipo),L.Cb(1),L.lc("ngForOf",e.usuarios),L.Cb(2),L.lc("ngModel",e.propina.porcentaje),L.Cb(3),L.lc("ngModel",+e.propina.grupal),L.Cb(3),L.lc("ngModel",+e.propina.anulado),L.Cb(3),L.lc("disabled",!a.form.valid),L.Cb(3),L.lc("ngIf",e.propina.propina_distribucion)}},directives:[D.a,D.h,D.c,f.r,f.l,f.m,_.b,_.e,P.a,f.p,f.k,f.n,b.l,y.b,f.o,f.c,x.a,O.a,T.a,b.m,q.k],styles:[""]}),Oc),Ic=["lstPropina"],Ac=((Rc=function(){function t(){var e=this;l(this,t),this.setPropina=function(t){return e.propina={propina_distribucion:t.propina_distribucion,usuario_tipo:t.usuario_tipo.usuario_tipo,porcentaje:t.porcentaje,anulado:t.anulado,sede:t.sede,grupal:t.grupal}},this.refreshPropinaList=function(){return e.lstPropinaComponent.loadPropinas()},this.propina={propina_distribucion:null,usuario_tipo:null,porcentaje:null,anulado:null,sede:null,grupal:null}}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Rc)},Rc.\u0275cmp=L.Hb({type:Rc,selectors:[["app-propina"]],viewQuery:function(t,e){var n;1&t&&L.Ic(Ic,1),2&t&&L.sc(n=L.cc())&&(e.lstPropinaComponent=n.first)},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getPropinaEv"],["lstPropina",""],[1,"col","m7","s12"],[3,"propina","propinaSavedEv"],["frmPropina",""]],template:function(t,e){1&t&&(L.Tb(0,"div",0),L.Tb(1,"div",1),L.Tb(2,"app-lista-propina",2,3),L.bc("getPropinaEv",function(t){return e.setPropina(t)}),L.Sb(),L.Sb(),L.Tb(4,"div",4),L.Tb(5,"app-form-propina",5,6),L.bc("propinaSavedEv",function(){return e.refreshPropinaList()}),L.Sb(),L.Sb(),L.Sb()),2&t&&(L.Cb(5),L.lc("propina",e.propina))},directives:[Ec,Fc],styles:[""]}),Rc),Nc=((Mc=function(){function t(e){l(this,t),this.http=e,this.srvcErrHndl=new _e.a}return d(t,[{key:"getCampos",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Te.a.urlCatalogos,"/get_campos?").concat(ke.stringify(t))).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"getReporte",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={headers:new m.d({Accept:"application/vnd.ms-excel"}),responseType:"blob"};return this.http.post("".concat(Te.a.urlAppRestaurante,"/reporte/autoconsulta"),t,e).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||Mc)(L.Xb(m.b))},Mc.\u0275prov=L.Jb({token:Mc,factory:Mc.\u0275fac,providedIn:"root"}),Mc);function jc(t,e){if(1&t&&(L.Tb(0,"mat-option",14),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n.tabla_campo),L.Cb(1),L.Fc(" ",n.descripcion," ")}}function Uc(t,e){if(1&t&&(L.Tb(0,"mat-option",14),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n.tabla_campo),L.Cb(1),L.Fc(" ",n.descripcion," ")}}function Bc(t,e){if(1&t&&(L.Tb(0,"mat-option",14),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n.tabla_campo),L.Cb(1),L.Fc(" ",n.descripcion," ")}}function Hc(t,e){1&t&&L.Ob(0,"app-cargando")}var Lc,zc,qc=((zc=function(){function t(e,n){var a=this;l(this,t),this.snackBar=e,this.autoconsultaSrvc=n,this.params={campos:[],datos:[]},this.titulo="Autoconsulta",this.campos=[],this.fechas=[],this.orden=[],this.cargando=!1,this.configBotones={showPdf:!1,showHtml:!1,showExcel:!0},this.resetParams=function(){a.params={campos:[],datos:[]},a.cargando=!1},this.getReporte=function(){for(var t in a.cargando=!0,a.params.campos)a.params.datos.push(a.params.campos[t]);a.autoconsultaSrvc.getReporte(a.params).subscribe(function(t){if(a.cargando=!1,t){var e=new Blob([t],{type:"application/vnd.ms-excel"});Object(Ni.saveAs)(e,"".concat(a.titulo,".xls"))}else a.snackBar.open("No se pudo generar el reporte...",a.titulo,{duration:3e3})})},this.getCampos=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;a.cargando=!0,a.autoconsultaSrvc.getCampos(t).subscribe(function(t){switch(a.cargando=!1,e){case 1:a.campos=t;break;case 2:a.fechas=t;break;case 3:a.orden=t}})}}return d(t,[{key:"ngOnInit",value:function(){this.getCampos(),this.getCampos({por_fecha:1},2),this.getCampos({ordenar_por:1},3)}}]),t}()).\u0275fac=function(t){return new(t||zc)(L.Nb(M.a),L.Nb(Nc))},zc.\u0275cmp=L.Hb({type:zc,selectors:[["app-autoconsulta"]],decls:30,vars:10,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmEntidad","ngForm"],[1,"fullWidth"],["name","campos","multiple","multiple","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","date","matInput","","placeholder","Del","name","fdel","required","",3,"ngModel","ngModelChange"],["type","date","matInput","","placeholder","Al","name","fal","required","",3,"ngModel","ngModelChange"],["name","campos","required","",3,"ngModel","ngModelChange"],["name","campos",3,"ngModel","ngModelChange"],[3,"configuracion","excelClick","resetParamsClick"],[4,"ngIf"],[3,"value"]],template:function(t,e){1&t&&(L.Tb(0,"div",0),L.Tb(1,"div",1),L.Tb(2,"mat-card",2),L.Tb(3,"mat-card-title"),L.Tb(4,"h4"),L.Dc(5,"Autoconsulta"),L.Sb(),L.Sb(),L.Tb(6,"mat-card-content"),L.Tb(7,"form",3,4),L.Tb(9,"mat-form-field",5),L.Tb(10,"mat-label"),L.Dc(11,"Campos"),L.Sb(),L.Tb(12,"mat-select",6),L.bc("ngModelChange",function(t){return e.params.campos=t}),L.Cc(13,jc,2,2,"mat-option",7),L.Sb(),L.Sb(),L.Tb(14,"mat-form-field",5),L.Tb(15,"input",8),L.bc("ngModelChange",function(t){return e.params.fdel=t}),L.Sb(),L.Sb(),L.Tb(16,"mat-form-field",5),L.Tb(17,"input",9),L.bc("ngModelChange",function(t){return e.params.fal=t}),L.Sb(),L.Sb(),L.Tb(18,"mat-form-field",5),L.Tb(19,"mat-label"),L.Dc(20,"Filtrar Por"),L.Sb(),L.Tb(21,"mat-select",10),L.bc("ngModelChange",function(t){return e.params.fecha=t}),L.Cc(22,Uc,2,2,"mat-option",7),L.Sb(),L.Sb(),L.Tb(23,"mat-form-field",5),L.Tb(24,"mat-label"),L.Dc(25,"Ordenar Por"),L.Sb(),L.Tb(26,"mat-select",11),L.bc("ngModelChange",function(t){return e.params.orden=t}),L.Cc(27,Bc,2,2,"mat-option",7),L.Sb(),L.Sb(),L.Tb(28,"app-rpt-botones",12),L.bc("excelClick",function(){return e.getReporte()})("resetParamsClick",function(){return e.resetParams()}),L.Sb(),L.Sb(),L.Cc(29,Hc,1,0,"app-cargando",13),L.Sb(),L.Sb(),L.Sb(),L.Sb()),2&t&&(L.Cb(12),L.lc("ngModel",e.params.campos),L.Cb(1),L.lc("ngForOf",e.campos),L.Cb(2),L.lc("ngModel",e.params.fdel),L.Cb(2),L.lc("ngModel",e.params.fal),L.Cb(4),L.lc("ngModel",e.params.fecha),L.Cb(1),L.lc("ngForOf",e.fechas),L.Cb(4),L.lc("ngModel",e.params.orden),L.Cb(1),L.lc("ngForOf",e.orden),L.Cb(1),L.lc("configuracion",e.configBotones),L.Cb(1),L.lc("ngIf",e.cargando))},directives:[D.a,D.h,D.c,f.r,f.l,f.m,_.b,_.e,P.a,f.p,f.k,f.n,b.l,y.b,f.c,Bi.a,b.m,q.k,sa.a],styles:[""]}),zc),$c=((Lc=function(){function t(e){l(this,t),this.http=e,this.moduleUrl="cajacorte",this.srvcErrHndl=new _e.a}return d(t,[{key:"buscar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/buscar?").concat(ke.stringify(t))).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"getCajaCorteTipo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Te.a.urlCatalogos,"/get_caja_corte_tipo?").concat(ke.stringify(t))).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"getCajaCorteNominacion",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Te.a.urlCatalogos,"/get_caja_corte_nominacion?").concat(ke.stringify(t))).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"guardar",value:function(t){return this.http.post("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/guardar"),t).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"anularCorte",value:function(t){return this.http.post("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/anular_caja"),t).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}},{key:"anularDetalle",value:function(t){return this.http.post("".concat(Te.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/anular_caja_detalle"),t).pipe(Object(ye.a)(Te.a.reintentos),Object(De.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||Lc)(L.Xb(m.b))},Lc.\u0275prov=L.Jb({token:Lc,factory:Lc.\u0275fac,providedIn:"root"}),Lc);function Wc(t,e){if(1&t){var n=L.Ub();L.Tb(0,"td",7),L.Tb(1,"mat-list"),L.Tb(2,"mat-list-item"),L.Tb(3,"mat-icon",8),L.bc("click",function(){L.wc(n);var t=e.$implicit;return L.fc().anularCaja(t)}),L.Dc(4,"close"),L.Sb(),L.Tb(5,"h5",9),L.Dc(6),L.Sb(),L.Tb(7,"span",9),L.Dc(8),L.Sb(),L.Tb(9,"span",9),L.Dc(10),L.Sb(),L.Tb(11,"button",10),L.bc("click",function(){L.wc(n);var t=e.$implicit;return L.fc().getCajacorte(t)}),L.Tb(12,"mat-icon"),L.Dc(13,"arrow_right_alt"),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Sb()}if(2&t){var a=e.$implicit;L.Cb(6),L.Ec(a.descripcion),L.Cb(2),L.Ec(a.creacion),L.Cb(2),L.Fc("Total: ",a.total,"")}}function Gc(t,e){1&t&&L.Ob(0,"tr",11)}var Vc,Qc=function(){return[5,10,20]},Jc=((Vc=function(){function t(e,n){var a=this;l(this,t),this.ccorteSrvc=e,this._snackBar=n,this.displayedColumns=["ccGeneral"],this.getCajacorteEv=new L.o,this.getCajascortes=function(){a.ccorteSrvc.buscar().subscribe(function(t){a.listacc=t,a.dataSource=new E.k(a.listacc),a.dataSource.paginator=a.paginator})},this.anularCaja=function(t){confirm("\xbfSi anula este corte, se anular\xe1 tambi\xe9n las nominaciones.?")&&a.ccorteSrvc.anularCorte(t).subscribe(function(t){t.exito&&a.getCajascortes(),a._snackBar.open("".concat(t.mensaje),"Corte de caja",{duration:3e3})})},this.getCajacorte=function(t){a.getCajacorteEv.emit(t)}}return d(t,[{key:"ngOnInit",value:function(){this.getCajascortes()}},{key:"filtrar",value:function(t){this.dataSource.filter=t.trim().toLowerCase()}}]),t}()).\u0275fac=function(t){return new(t||Vc)(L.Nb($c),L.Nb(M.a))},Vc.\u0275cmp=L.Hb({type:Vc,selectors:[["app-cajacorte-lista"]],viewQuery:function(t,e){var n;1&t&&L.Ic(A.a,3),2&t&&L.sc(n=L.cc())&&(e.paginator=n.first)},outputs:{getCajacorteEv:"getCajacorteEv"},decls:9,vars:4,consts:[[1,"mat-elevation-z4","fullWidth"],["matInput","","placeholder","Buscar...",3,"keyup"],["mat-table","",3,"dataSource"],["matColumnDef","ccGeneral"],["mat-cell","",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-cell",""],["mat-list-icon","",1,"anulaicon",3,"click"],["mat-line",""],["mat-icon-button","","type","button","color","accent",3,"click"],["mat-row",""]],template:function(t,e){1&t&&(L.Tb(0,"mat-card",0),L.Tb(1,"mat-card-content"),L.Tb(2,"mat-form-field"),L.Tb(3,"input",1),L.bc("keyup",function(t){return e.filtrar(t.target.value)}),L.Sb(),L.Sb(),L.Tb(4,"table",2),L.Rb(5,3),L.Cc(6,Wc,14,3,"td",4),L.Qb(),L.Cc(7,Gc,1,0,"tr",5),L.Sb(),L.Ob(8,"mat-paginator",6),L.Sb(),L.Sb()),2&t&&(L.Cb(4),L.lc("dataSource",e.dataSource),L.Cb(3),L.lc("matRowDefColumns",e.displayedColumns),L.Cb(1),L.lc("pageSizeOptions",L.nc(3,Qc)))},directives:[D.a,D.c,_.b,y.b,E.j,E.c,E.b,E.i,A.a,E.a,S.a,S.c,T.a,S.b,q.h,O.a,E.h],styles:[".anulaicon[_ngcontent-%COMP%]{cursor:pointer}"]}),Vc);function Xc(t,e){if(1&t&&(L.Tb(0,"mat-option",16),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n.caja_corte_tipo),L.Cb(1),L.Fc(" ",n.descripcion," ")}}function Zc(t,e){if(1&t&&(L.Tb(0,"mat-option",16),L.Dc(1),L.Sb()),2&t){var n=e.$implicit;L.lc("value",n.caja_corte_nominacion),L.Cb(1),L.Fc(" ",n.nombre," ")}}function Kc(t,e){if(1&t){var n=L.Ub();L.Tb(0,"mat-grid-list",11),L.Tb(1,"mat-grid-tile"),L.Dc(2),L.Sb(),L.Tb(3,"mat-grid-tile"),L.Dc(4),L.Sb(),L.Tb(5,"mat-grid-tile"),L.Dc(6),L.Sb(),L.Tb(7,"mat-grid-tile"),L.Tb(8,"mat-icon",17),L.bc("click",function(){L.wc(n);var t=e.$implicit;return L.fc().anularCajaDetalle(t)}),L.Dc(9,"close"),L.Sb(),L.Sb(),L.Sb()}if(2&t){var a=e.$implicit;L.Cb(2),L.Ec(a.nombre),L.Cb(2),L.Ec(a.cantidad),L.Cb(2),L.Ec(a.total)}}function Yc(t,e){if(1&t){var n=L.Ub();L.Tb(0,"button",18),L.bc("click",function(){return L.wc(n),L.fc().reseteGeneral()}),L.Tb(1,"mat-icon"),L.Dc(2,"add"),L.Sb(),L.Sb()}}var ts,es,ns=((ts=function(){function t(e,n){var a=this;l(this,t),this._snackBar=e,this.cajacorteSrvc=n,this.cajacorteSavedEv=new L.o,this.ccorteTipo=[],this.ccorteNomi=[],this.detalle={caja_corte_detalle:0,caja_corte:0,cantidad:0,total:0,anulado:0,caja_corte_nominacion:0,nombre:null},this.getCajaCorteTipo=function(){a.cajacorteSrvc.getCajaCorteTipo().subscribe(function(t){a.ccorteTipo=t})},this.getCajaCorteNominacion=function(){a.cajacorteSrvc.getCajaCorteNominacion().subscribe(function(t){a.ccorteNomi=t})},this.setTotal=function(){if(a.detalle.caja_corte_nominacion){var t=a.ccorteNomi.filter(function(t){return t.caja_corte_nominacion==a.detalle.caja_corte_nominacion})[0];a.detalle.total=1==t.calcula?a.detalle.cantidad*t.valor:a.detalle.cantidad}},this.setNamenomi=function(){var t=a.ccorteNomi.filter(function(t){return t.caja_corte_nominacion==a.detalle.caja_corte_nominacion})[0];console.log(t,a.detalle.caja_corte_nominacion),a.detalle.nombre=t.nombre},this.setNameTipo=function(){var t=a.ccorteTipo.filter(function(t){return t.caja_corte_tipo==a.ccorte.caja_corte_tipo})[0];console.log(t,a.ccorte.caja_corte_tipo),a.ccorte.descripcion=t.descripcion},this.reseteGeneral=function(){return a.ccorte={caja_corte:0,creacion:null,usuario:0,turno:0,confirmado:null,anulado:0,caja_corte_tipo:0,descripcion:null,detalle:[]}},this.resetDetalle=function(){return a.detalle={caja_corte_detalle:0,caja_corte:0,cantidad:0,total:0,anulado:0,caja_corte_nominacion:0,nombre:null}},this.agregarDetalle=function(){a.detalle.caja_corte_nominacion&&a.detalle.cantidad&&a.detalle.total?(a.ccorte.detalle.push(a.detalle),a.resetDetalle()):a._snackBar.open("Complete los datos de nominaciones","Corte de caja",{duration:3e3})},this.guardar=function(){if(confirm("\xbfEst\xe1 seguro?")){if(0==a.ccorte.detalle.length)return a._snackBar.open("Por favor agregue las nominaciones","Corte de caja",{duration:3e3}),!1;if(!a.ccorte.caja_corte_tipo)return a._snackBar.open("Seleccione el tipo de corte de caja.","Corte de caja",{duration:3e3}),!1;a.cajacorteSrvc.guardar(a.ccorte).subscribe(function(t){t.exito&&(a.cajacorteSavedEv.emit(),a.reseteGeneral()),a._snackBar.open("".concat(t.mensaje),"Corte de caja",{duration:3e3})})}},this.anularCajaDetalle=function(t){if(confirm("\xbfEst\xe1 seguro.?"))if(t.caja_corte_detalle)a.cajacorteSrvc.anularDetalle(t).subscribe(function(e){if(e.exito){var n=a.ccorte.detalle.indexOf(t);a.ccorte.detalle.splice(n,1)}a._snackBar.open("".concat(e.mensaje),"Corte de caja",{duration:3e3})});else{var e=a.ccorte.detalle.indexOf(t);a.ccorte.detalle.splice(e,1)}}}return d(t,[{key:"ngOnInit",value:function(){this.getCajaCorteTipo(),this.getCajaCorteNominacion()}}]),t}()).\u0275fac=function(t){return new(t||ts)(L.Nb(M.a),L.Nb($c))},ts.\u0275cmp=L.Hb({type:ts,selectors:[["app-cajacorte-form"]],inputs:{ccorte:"ccorte"},outputs:{cajacorteSavedEv:"cajacorteSavedEv"},decls:49,vars:9,consts:[[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmcc","ngForm"],[1,"fullWidth"],["name","tipo","required","",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"example-container"],["name","nominacion",3,"ngModel","ngModelChange","selectionChange"],["matInput","","type","number","step","0.01","name","cantidad",3,"ngModel","ngModelChange","blur"],["matInput","","type","number","step","0.01","name","total","readonly","",3,"ngModel","ngModelChange"],["mat-icon-button","","type","button","color","accent","title","Agregar el detalle",3,"click"],["cols","4","rowHeight","7:1"],["cols","4","rowHeight","7:1",4,"ngFor","ngForOf"],["align","end"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["mat-icon-button","","type","submit","color","accent","title","Guardar corte de caja",3,"disabled"],[3,"value"],["mat-list-icon","",1,"anulacion",3,"click"],["mat-icon-button","","type","button","color","accent",3,"click"]],template:function(t,e){if(1&t){var n=L.Ub();L.Tb(0,"mat-card",0),L.Tb(1,"mat-card-title"),L.Tb(2,"h5"),L.Dc(3,"Corte de caja"),L.Sb(),L.Sb(),L.Tb(4,"mat-card-content"),L.Tb(5,"form",1,2),L.bc("ngSubmit",function(){return L.wc(n),L.tc(6).form.valid&&e.guardar()}),L.Tb(7,"mat-form-field",3),L.Tb(8,"mat-label"),L.Dc(9,"Tipo de Corte"),L.Sb(),L.Tb(10,"mat-select",4),L.bc("ngModelChange",function(t){return e.ccorte.caja_corte_tipo=t})("selectionChange",function(){return e.setNameTipo()}),L.Cc(11,Xc,2,2,"mat-option",5),L.Sb(),L.Sb(),L.Tb(12,"p"),L.Dc(13,"Agregar nominaciones"),L.Sb(),L.Tb(14,"div",6),L.Tb(15,"mat-form-field"),L.Tb(16,"mat-label"),L.Dc(17,"Nominaci\xf3n:"),L.Sb(),L.Tb(18,"mat-select",7),L.bc("ngModelChange",function(t){return e.detalle.caja_corte_nominacion=t})("selectionChange",function(){return e.setNamenomi()}),L.Cc(19,Zc,2,2,"mat-option",5),L.Sb(),L.Sb(),L.Tb(20,"mat-form-field"),L.Tb(21,"mat-label"),L.Dc(22,"Cantidad:"),L.Sb(),L.Tb(23,"input",8),L.bc("ngModelChange",function(t){return e.detalle.cantidad=t})("blur",function(){return e.setTotal()}),L.Sb(),L.Sb(),L.Tb(24,"mat-form-field"),L.Tb(25,"mat-label"),L.Dc(26,"Total:"),L.Sb(),L.Tb(27,"input",9),L.bc("ngModelChange",function(t){return e.detalle.total=t}),L.Sb(),L.Sb(),L.Tb(28,"button",10),L.bc("click",function(){return e.agregarDetalle()}),L.Tb(29,"mat-icon"),L.Dc(30,"add"),L.Sb(),L.Sb(),L.Sb(),L.Tb(31,"mat-grid-list",11),L.Tb(32,"mat-grid-tile"),L.Tb(33,"b"),L.Dc(34,"Nominaci\xf3n"),L.Sb(),L.Sb(),L.Tb(35,"mat-grid-tile"),L.Tb(36,"b"),L.Dc(37,"Cantidad"),L.Sb(),L.Sb(),L.Tb(38,"mat-grid-tile"),L.Tb(39,"b"),L.Dc(40,"Total"),L.Sb(),L.Sb(),L.Ob(41,"mat-grid-tile"),L.Sb(),L.Cc(42,Kc,10,3,"mat-grid-list",12),L.Ob(43,"hr"),L.Tb(44,"div",13),L.Cc(45,Yc,3,0,"button",14),L.Tb(46,"button",15),L.Tb(47,"mat-icon"),L.Dc(48,"save"),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Sb(),L.Sb()}if(2&t){var a=L.tc(6);L.Cb(10),L.lc("ngModel",e.ccorte.caja_corte_tipo),L.Cb(1),L.lc("ngForOf",e.ccorteTipo),L.Cb(7),L.lc("ngModel",e.detalle.caja_corte_nominacion),L.Cb(1),L.lc("ngForOf",e.ccorteNomi),L.Cb(4),L.lc("ngModel",e.detalle.cantidad),L.Cb(4),L.lc("ngModel",e.detalle.total),L.Cb(15),L.lc("ngForOf",e.ccorte.detalle),L.Cb(3),L.lc("ngIf",e.ccorte.caja_corte),L.Cb(1),L.lc("disabled",!a.form.valid)}},directives:[D.a,D.h,D.c,f.r,f.l,f.m,_.b,_.e,P.a,f.p,f.k,f.n,b.l,y.b,f.o,f.c,O.a,T.a,I.a,I.c,b.m,q.k,S.b],styles:[".example-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}mat-grid-tile[_ngcontent-%COMP%]{text-align:left}.anulacion[_ngcontent-%COMP%]{cursor:pointer}"]}),ts),as=["lstCortecaja"],os=((es=function(){function t(){var e=this;l(this,t),this.editarCajaCorte=function(t){return e.ccorte=t},this.actualizaLista=function(){return e.lstCajacorteComponent.getCajascortes()},this.ccorte={caja_corte:0,creacion:null,usuario:0,turno:0,confirmado:null,anulado:0,caja_corte_tipo:0,descripcion:null,detalle:[]}}return d(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||es)},es.\u0275cmp=L.Hb({type:es,selectors:[["app-cajacorte"]],viewQuery:function(t,e){var n;1&t&&L.Ic(as,1),2&t&&L.sc(n=L.cc())&&(e.lstCajacorteComponent=n.first)},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getCajacorteEv"],["lstCortecaja",""],[1,"col","m7","s12"],[3,"ccorte","cajacorteSavedEv"],["frmCortecaja",""]],template:function(t,e){1&t&&(L.Tb(0,"div",0),L.Tb(1,"div",1),L.Tb(2,"app-cajacorte-lista",2,3),L.bc("getCajacorteEv",function(t){return e.editarCajaCorte(t)}),L.Sb(),L.Sb(),L.Tb(4,"div",4),L.Tb(5,"app-cajacorte-form",5,6),L.bc("cajacorteSavedEv",function(){return e.actualizaLista()}),L.Sb(),L.Sb(),L.Sb()),2&t&&(L.Cb(5),L.lc("ccorte",e.ccorte))},directives:[Jc,ns],styles:[""]}),es),is=function(){return{standalone:!0}};function rs(t,e){if(1&t){var n=L.Ub();L.Tb(0,"form"),L.Tb(1,"mat-form-field",6),L.Tb(2,"input",7),L.bc("ngModelChange",function(t){return L.wc(n),L.fc().datos.tiempo=t}),L.Sb(),L.Sb(),L.Sb()}if(2&t){var a=L.fc();L.Cb(2),L.lc("ngModel",a.datos.tiempo)("ngModelOptions",L.nc(2,is))}}var cs,ss=function t(e,n,a,o,i,r){l(this,t),this.title=e,this.message=n,this.lblBtnConfirm=a,this.lblBtnDeny=o,this.datos=i,this.showTimer=r},ls=((cs=function(){function t(e,n){l(this,t),this.dialogRef=e,this.data=n,this.title=n.title,this.message=n.message,this.lblBtnConfirm=n.lblBtnConfirm,this.lblBtnDeny=n.lblBtnDeny,this.datos={respuesta:!1,tiempo:"00:00"}}return d(t,[{key:"ngOnInit",value:function(){}},{key:"onConfirm",value:function(t){this.datos.respuesta=!0,this.datos.tiempo=t.tiempo,this.dialogRef.close(this.datos)}},{key:"onDismiss",value:function(){this.datos.respuesta=!1,this.dialogRef.close(this.datos)}}]),t}()).\u0275fac=function(t){return new(t||cs)(L.Nb(N.f),L.Nb(N.a))},cs.\u0275cmp=L.Hb({type:cs,selectors:[["app-dialog-cocina"]],decls:11,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[4,"ngIf"],["mat-dialog-actions","","align","center"],["mat-raised-button","",1,"btnConfig",3,"click"],["mat-raised-button","","color","accent",1,"btnConfig",3,"click"],[1,"fullWidth"],["type","number","matInput","","placeholder","Minutos","min","0","max","59","step","1",3,"ngModel","ngModelOptions","ngModelChange"]],template:function(t,e){1&t&&(L.Tb(0,"h1",0),L.Dc(1),L.Sb(),L.Tb(2,"div",1),L.Tb(3,"p"),L.Dc(4),L.Sb(),L.Sb(),L.Cc(5,rs,3,3,"form",2),L.Tb(6,"div",3),L.Tb(7,"button",4),L.bc("click",function(){return e.onDismiss()}),L.Dc(8),L.Sb(),L.Tb(9,"button",5),L.bc("click",function(){return e.onConfirm(e.datos)}),L.Dc(10),L.Sb(),L.Sb()),2&t&&(L.Cb(1),L.Fc(" ",e.title," "),L.Cb(3),L.Ec(e.message),L.Cb(1),L.lc("ngIf",e.data.showTimer),L.Cb(3),L.Ec(e.lblBtnDeny),L.Cb(2),L.Ec(e.lblBtnConfirm))},directives:[N.g,N.d,b.m,N.c,O.a,f.r,f.l,f.m,_.b,f.o,y.b,f.c,f.k,f.n],styles:[""]}),cs);function us(t,e){1&t&&L.Ob(0,"br")}function ds(t,e){if(1&t&&(L.Rb(0),L.Tb(1,"span"),L.Dc(2),L.Sb(),L.Ob(3,"br"),L.Qb()),2&t){var n=e.$implicit;L.Cb(2),L.Ec(n.trim())}}function bs(t,e){1&t&&L.Ob(0,"br")}function ms(t,e){if(1&t&&(L.Tb(0,"span"),L.Tb(1,"strong"),L.Dc(2,"Notas:"),L.Sb(),L.Dc(3),L.Sb()),2&t){var n=L.fc().$implicit;L.Cb(3),L.Fc(" ",n.notas," ")}}function fs(t,e){if(1&t&&(L.Tb(0,"tr"),L.Tb(1,"td"),L.Dc(2),L.Cc(3,us,1,0,"br",11),L.Cc(4,ds,4,1,"ng-container",8),L.Cc(5,bs,1,0,"br",11),L.Cc(6,ms,4,1,"span",11),L.Sb(),L.Sb()),2&t){var n=e.$implicit;L.Cb(2),L.Gc(" ",n.cantidad," ",n.articulo.descripcion," "),L.Cb(1),L.lc("ngIf",n.detalle.length>0),L.Cb(1),L.lc("ngForOf",n.detalle),L.Cb(1),L.lc("ngIf",!!n.notas&&n.notas.length>0&&!n.detalle),L.Cb(1),L.lc("ngIf",!!n.notas&&n.notas.length>0)}}function ps(t,e){if(1&t&&(L.Tb(0,"table"),L.Cc(1,fs,7,6,"tr",8),L.Sb()),2&t){var n=L.fc().$implicit;L.Cb(1),L.lc("ngForOf",n.productos)}}function hs(t,e){if(1&t&&(L.Rb(0),L.Cc(1,ps,2,1,"table",11),L.Qb()),2&t){var n=e.$implicit;L.Cb(1),L.lc("ngIf",n.productos.length>0)}}function gs(t,e){if(1&t){var n=L.Ub();L.Tb(0,"div",6),L.Tb(1,"mat-card",7),L.Tb(2,"mat-card-header"),L.Tb(3,"mat-card-title"),L.Dc(4),L.Sb(),L.Tb(5,"mat-card-subtitle"),L.Dc(6),L.Ob(7,"br"),L.Dc(8),L.Sb(),L.Sb(),L.Tb(9,"mat-card-content"),L.Cc(10,hs,2,1,"ng-container",8),L.Sb(),L.Tb(11,"mat-card-actions",9),L.Tb(12,"button",10),L.bc("click",function(){L.wc(n);var t=e.$implicit;return L.fc().setCocinado(t,1)}),L.Dc(13,"Vista"),L.Sb(),L.Sb(),L.Sb(),L.Sb()}if(2&t){var a=e.$implicit;L.Cb(4),L.Gc("Comanda #",a.comanda," - ",a.numero,""),L.Cb(2),L.Gc(" Area ",a.mesa.area.nombre," - Mesa #",a.mesa.etiqueta||a.mesa.numero,""),L.Cb(2),L.Gc(" Atiende: ",a.mesero.nombres," ",a.mesero.apellidos," "),L.Cb(2),L.lc("ngForOf",a.cuentas)}}function vs(t,e){1&t&&L.Ob(0,"br")}function Cs(t,e){if(1&t&&(L.Rb(0),L.Tb(1,"span"),L.Dc(2),L.Sb(),L.Ob(3,"br"),L.Qb()),2&t){var n=e.$implicit;L.Cb(2),L.Ec(n.trim())}}function Ss(t,e){1&t&&L.Ob(0,"br")}function Ts(t,e){if(1&t&&(L.Tb(0,"span"),L.Tb(1,"strong"),L.Dc(2,"Notas:"),L.Sb(),L.Dc(3),L.Sb()),2&t){var n=L.fc().$implicit;L.Cb(3),L.Fc(" ",n.notas," ")}}function _s(t,e){if(1&t&&(L.Tb(0,"tr"),L.Tb(1,"td"),L.Dc(2),L.Cc(3,vs,1,0,"br",11),L.Cc(4,Cs,4,1,"ng-container",8),L.Cc(5,Ss,1,0,"br",11),L.Cc(6,Ts,4,1,"span",11),L.Sb(),L.Sb()),2&t){var n=e.$implicit;L.Cb(2),L.Gc(" ",n.cantidad," ",n.articulo.descripcion," "),L.Cb(1),L.lc("ngIf",n.detalle.length>0),L.Cb(1),L.lc("ngForOf",n.detalle),L.Cb(1),L.lc("ngIf",!!n.notas&&n.notas.length>0&&!n.detalle),L.Cb(1),L.lc("ngIf",!!n.notas&&n.notas.length>0)}}function ys(t,e){if(1&t&&(L.Tb(0,"table"),L.Cc(1,_s,7,6,"tr",8),L.Sb()),2&t){var n=L.fc().$implicit;L.Cb(1),L.lc("ngForOf",n.productos)}}function Ds(t,e){if(1&t&&(L.Rb(0),L.Cc(1,ys,2,1,"table",11),L.Qb()),2&t){var n=e.$implicit;L.Cb(1),L.lc("ngIf",n.productos.length>0)}}var ks=function(t){return{"text-danger":t}};function ws(t,e){if(1&t){var n=L.Ub();L.Tb(0,"div",6),L.Tb(1,"mat-card",7),L.Tb(2,"mat-card-header"),L.Tb(3,"mat-card-title"),L.Dc(4),L.Sb(),L.Tb(5,"mat-card-subtitle"),L.Dc(6),L.Ob(7,"br"),L.Dc(8),L.Sb(),L.Sb(),L.Tb(9,"mat-card-content"),L.Tb(10,"div",12),L.Tb(11,"h6",13),L.Dc(12),L.gc(13,"date"),L.Sb(),L.Sb(),L.Cc(14,Ds,2,1,"ng-container",8),L.Sb(),L.Tb(15,"mat-card-actions",9),L.Tb(16,"button",10),L.bc("click",function(){L.wc(n);var t=e.$implicit;return L.fc().setCocinado(t)}),L.Dc(17,"Cocinado"),L.Sb(),L.Sb(),L.Sb(),L.Sb()}if(2&t){var a=e.$implicit,o=L.fc();L.Cb(4),L.Gc("Comanda #",a.comanda," - ",a.numero,""),L.Cb(2),L.Gc(" Area ",a.mesa.area.nombre," - Mesa #",a.mesa.etiqueta||a.mesa.numero,""),L.Cb(2),L.Gc(" Atiende: ",a.mesero.nombres," ",a.mesero.apellidos," "),L.Cb(3),L.lc("ngClass",L.oc(12,ks,o.comparaFecha(a))),L.Cb(1),L.Fc(" ",L.ic(13,9,a.tiempo_transcurrido,"HH:mm:ss")," "),L.Cb(2),L.lc("ngForOf",a.cuentas)}}var Es,Ps,xs,Os=[{path:"mantareas",component:ln,canActivate:[Se.a]},{path:"tranareas",component:zo,canActivate:[Se.a]},{path:"turno",component:Ai,canActivate:[Se.a]},{path:"rptvtascat",component:ur,canActivate:[Se.a]},{path:"rptturnos",component:fr,canActivate:[Se.a]},{path:"rptpropinas",component:vr,canActivate:[Se.a]},{path:"rptcaja",component:cc,canActivate:[Se.a]},{path:"rptfactura",component:uc,canActivate:[Se.a]},{path:"cmdonline",component:Jr,canActivate:[Se.a]},{path:"tipoturno",component:Tc,canActivate:[Se.a]},{path:"propina",component:Ac,canActivate:[Se.a]},{path:"autoconsulta",component:qc,canActivate:[Se.a]},{path:"cajacorte",component:os,canActivate:[Se.a]},{path:"trancocina",component:(Es=function(){function t(e,n,a,o,i,r){var c=this;l(this,t),this.ls=e,this.comandaSrvc=n,this.socket=a,this.dns=o,this.snackBar=i,this.dialog=r,this.lstComandasCocina=[],this.lstComandasCocinaEnProceso=[],this.notificarUsuario=function(){var t={icon:"assets/img/minilogo.png",body:"Se recibi\xf3 una nueva orden a las ".concat(ta().format(Te.a.dateTimeFormat),"."),dir:"auto"};c.dns.createNotification("Rest-Touch Pro",1e4,t)},this.loadComandasCocina=function(){return c.comandaSrvc.getComandasCocina().subscribe(function(t){c.lstComandasCocina=t.pendientes,c.lstComandasCocinaEnProceso=t.enproceso,c.setTiempo()})},this.setTiempo=function(){if(c.lstComandasCocinaEnProceso)for(var t=0;t<c.lstComandasCocinaEnProceso.length;t++){var e=c.lstComandasCocinaEnProceso[t],n=6e4,a=36e5,o=864e5,i=new Date(e.fecha_proceso);c.lstComandasCocinaEnProceso[t].inicio_proceso=i,e.inicio=i;var r=i.getTime(),s=(i=new Date).getTime()-r;s-=Math.floor(s/o)*o;var l=Math.floor(s/a);s-=l*a;var u=Math.floor(s/n);s-=u*n;var d=Math.floor(s/1e3),b=new Date;if(b.setHours(l),b.setMinutes(u),b.setSeconds(d),c.lstComandasCocinaEnProceso[t].tiempo_transcurrido=b,e.tiempo_preparacion){var m=e.tiempo_preparacion.split(":");e.inicio.setHours(e.inicio.getHours()+ +m[0]),e.inicio.setMinutes(e.inicio.getMinutes()+ +m[1]),c.lstComandasCocinaEnProceso[t].fin_proceso=e.inicio}else c.lstComandasCocinaEnProceso[t].fin_proceso=i}},this.comparaFecha=function(t){return new Date>t.fin_proceso},this.setCocinado=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;c.dialog.open(ls,{maxWidth:"400px",data:new ss("Cocina","\xbfSeguro de marcar como '".concat(1==+e?"vista":"cocinada","' la comanda #").concat(t.comanda,"?"),"S\xed","No",{respuesta:!1,tiempo:""},1==+e)}).afterClosed().subscribe(function(n){n&&n.respuesta&&n.tiempo&&c.comandaSrvc.setComandaCocinada(+t.comanda,{numero:+t.numero,estatus:e,tiempo:n.tiempo}).subscribe(function(t){t.exito?c.snackBar.open(t.mensaje,"Cocina",{duration:3e3}):c.snackBar.open("ERROR: ".concat(t.mensaje),"Cocina",{duration:7e3}),c.loadComandasCocina()})})}}return d(t,[{key:"ngOnInit",value:function(){var t=this;this.ls.get(Te.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(Te.a.usrTokenVar).sede_uuid),this.socket.on("refrescar:listaCocina",function(){t.loadComandasCocina(),t.notificarUsuario()}),setInterval(function(){t.setTiempo()},1e3)),this.loadComandasCocina()}}]),t}(),Es.\u0275fac=function(t){return new(t||Es)(L.Nb(Ee.a),L.Nb(zn),L.Nb($n.a),L.Nb(Cr.a),L.Nb(M.a),L.Nb(N.b))},Es.\u0275cmp=L.Hb({type:Es,selectors:[["app-tran-cocina"]],decls:13,vars:2,consts:[["fxLayout","row","fxLayout.xs","column","fxFlexFill",""],["fxFlex","50%","fxFlex.xs","100%",1,"bordeRght"],["fxLayout","row wrap","fxLayoutGap","10px grid","fxFlexFill","","fxLayoutAlign","start start",1,"divContenedor"],["fxFlex","100%","fxLayoutAlign","center start"],["fxFlex","33%","fxFlex.xs","100%","fxFlex.sm","100%","fxFlex.md","50%",4,"ngFor","ngForOf"],["fxFlex","50%","fxFlex.xs","100%",1,"bordeLft"],["fxFlex","33%","fxFlex.xs","100%","fxFlex.sm","100%","fxFlex.md","50%"],[1,"mat-elevation-z4"],[4,"ngFor","ngForOf"],["align","end"],["mat-raised-button","","color","accent","type","button",3,"click"],[4,"ngIf"],["align","center"],[3,"ngClass"]],template:function(t,e){1&t&&(L.Tb(0,"div",0),L.Tb(1,"div",1),L.Tb(2,"div",2),L.Tb(3,"div",3),L.Tb(4,"h4"),L.Dc(5,"Pendientes"),L.Sb(),L.Sb(),L.Cc(6,gs,14,7,"div",4),L.Sb(),L.Sb(),L.Tb(7,"div",5),L.Tb(8,"div",2),L.Tb(9,"div",3),L.Tb(10,"h4"),L.Dc(11,"En Proceso"),L.Sb(),L.Sb(),L.Cc(12,ws,18,14,"div",4),L.Sb(),L.Sb(),L.Sb()),2&t&&(L.Cb(6),L.lc("ngForOf",e.lstComandasCocina),L.Cb(6),L.lc("ngForOf",e.lstComandasCocinaEnProceso))},directives:[Rn.c,Rn.e,Rn.a,Rn.d,Rn.b,b.l,D.a,D.d,D.h,D.g,D.c,D.b,O.a,b.m,b.k,Le.a],pipes:[b.e],styles:[".divContenedor[_ngcontent-%COMP%]{margin-left:5px!important}.bordeRght[_ngcontent-%COMP%]{border-right:1.5px solid #000}.bordeLft[_ngcontent-%COMP%]{border-left:1.5px solid #000}.text-danger[_ngcontent-%COMP%]{color:#dc143c}.item[_ngcontent-%COMP%]{display:block;height:auto;white-space:nowrap;word-wrap:break-word}"]}),Es),canActivate:[Se.a]},{path:"**",redirectTo:"/admin/dashboard",pathMatch:"full"}],Ms=((xs=function t(){l(this,t)}).\u0275mod=L.Lb({type:xs}),xs.\u0275inj=L.Kb({factory:function(t){return new(t||xs)},imports:[[pe.d.forChild(Os)],pe.d]}),xs),Rs=((Ps=function t(){l(this,t)}).\u0275mod=L.Lb({type:Ps}),Ps.\u0275inj=L.Kb({factory:function(t){return new(t||Ps)},providers:[q.j],imports:[[b.c,Ms,m.c,f.e,p.a,h.WmsModule,g.PosModule,ve,C.a,S.d,T.b,_.d,y.c,D.f,k.b,w.c,E.l,P.b,x.b,O.b,M.b,R.b,F.d,I.b,A.b,N.e,j.d,tt,q.j,Ce.c,le,fe]]}),Ps)}}])}();