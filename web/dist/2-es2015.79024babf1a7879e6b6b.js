(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{JbvS:function(t,e,a){"use strict";a.d(e,"a",function(){return m}),a.d(e,"b",function(){return g}),a.d(e,"c",function(){return F}),a.d(e,"d",function(){return S});var i=a("fXoL"),c=a("bTqV"),n=a("ofXK"),r=a("xgIS"),o=a("cp0P"),s=a("IzEk");function l(t,e){1&t&&i.jc(0,0,["*ngIf","miniFabVisible"])}const u=[[["","mat-mini-fab",""]]],d=["[mat-mini-fab]"],f=[[["eco-fab-speed-dial-trigger"]],[["eco-fab-speed-dial-actions"]]],b=["eco-fab-speed-dial-trigger","eco-fab-speed-dial-actions"],h=[[["","mat-fab",""]]],p=["[mat-fab]"];let m=(()=>{class t{constructor(t,e){this.renderer=e,this.miniFabVisible=!1,this._parent=t.get(g)}ngAfterContentInit(){this._buttons.changes.subscribe(()=>{this.initButtonStates(),this._parent.setActionsVisibility()}),this.initButtonStates()}initButtonStates(){this._buttons.forEach((t,e)=>{this.renderer.addClass(t._getHostElement(),"eco-fab-action-item"),this.changeElementStyle(t._getHostElement(),"z-index",""+(23-e))})}show(){this._buttons&&(this.resetAnimationState(),this.miniFabVisible=!0,this.showMiniFabAnimation=setTimeout(()=>{this._buttons.forEach((t,e)=>{let a,i=0;"scale"===this._parent.animationMode?(i=3+65*e,a="scale(1)"):a=this.getTranslateFunction("0");const c=t._getHostElement();this.changeElementStyle(c,"transition-delay",i+"ms"),this.changeElementStyle(c,"opacity","1"),this.changeElementStyle(c,"transform",a)})},50))}resetAnimationState(){clearTimeout(this.showMiniFabAnimation),this.hideMiniFab&&(this.hideMiniFab.unsubscribe(),this.hideMiniFab=null)}hide(){if(!this._buttons)return;this.resetAnimationState();const t=this._buttons.map((t,e)=>{let a,i="1",c=0;"scale"===this._parent.animationMode?(c=3-65*e,a="scale(0)",i="0"):a=this.getTranslateFunction(55*(e+1)-5*e+"px");const n=t._getHostElement();return this.changeElementStyle(n,"transition-delay",c+"ms"),this.changeElementStyle(n,"opacity",i),this.changeElementStyle(n,"transform",a),Object(r.a)(n,"transitionend").pipe(Object(s.a)(1))});this.hideMiniFab=Object(o.a)(t).subscribe(()=>this.miniFabVisible=!1)}getTranslateFunction(t){const e=this._parent.direction;return("up"===e||"down"===e?"translateY":"translateX")+"("+("down"===e||"right"===e?"-":"")+t+")"}changeElementStyle(t,e,a){this.renderer.setStyle(t,e,a)}}return t.\u0275fac=function(e){return new(e||t)(i.Nb(i.t),i.Nb(i.G))},t.\u0275cmp=i.Hb({type:t,selectors:[["eco-fab-speed-dial-actions"]],contentQueries:function(t,e,a){if(1&t&&i.Gb(a,c.a,0),2&t){let t;i.sc(t=i.cc())&&(e._buttons=t)}},ngContentSelectors:d,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(t,e){1&t&&(i.kc(u),i.Cc(0,l,1,0,"ng-content",0)),2&t&&i.lc("ngIf",e.miniFabVisible)},directives:[n.m],encapsulation:2}),t})(),g=(()=>{class t{constructor(t,e,a){this.elementRef=t,this.renderer=e,this.document=a,this.isInitialized=!1,this._direction="up",this._open=!1,this._animationMode="fling",this._fixed=!1,this._documentClickUnlistener=null,this.openChange=new i.o}get fixed(){return this._fixed}set fixed(t){this._fixed=t,this._processOutsideClickState()}get open(){return this._open}set open(t){const e=this._open;this._open=t,e!==this._open&&(this.openChange.emit(this._open),this.isInitialized&&this.setActionsVisibility())}get direction(){return this._direction}set direction(t){const e=this._direction;this._direction=t,e!==this.direction&&(this._setElementClass(e,!1),this._setElementClass(this.direction,!0),this.isInitialized&&this.setActionsVisibility())}get animationMode(){return this._animationMode}set animationMode(t){const e=this._animationMode;this._animationMode=t,e!==this._animationMode&&(this._setElementClass(e,!1),this._setElementClass(this.animationMode,!0),this.isInitialized&&Promise.resolve(null).then(()=>this.open=!1))}ngAfterContentInit(){this.isInitialized=!0,this.setActionsVisibility(),this._setElementClass(this.direction,!0),this._setElementClass(this.animationMode,!0)}ngOnDestroy(){this._unsetDocumentClickListener()}toggle(){this.open=!this.open}_onClick(){!this.fixed&&this.open&&(this.open=!1)}setActionsVisibility(){this._childActions&&(this.open?this._childActions.show():this._childActions.hide(),this._processOutsideClickState())}_setElementClass(t,e){const a=`eco-${t}`;e?this.renderer.addClass(this.elementRef.nativeElement,a):this.renderer.removeClass(this.elementRef.nativeElement,a)}_processOutsideClickState(){!this.fixed&&this.open?this._setDocumentClickListener():this._unsetDocumentClickListener()}_setDocumentClickListener(){this._documentClickUnlistener||(this._documentClickUnlistener=this.renderer.listen(this.document,"click",()=>{this.open=!1}))}_unsetDocumentClickListener(){this._documentClickUnlistener&&(this._documentClickUnlistener(),this._documentClickUnlistener=null)}}return t.\u0275fac=function(e){return new(e||t)(i.Nb(i.l),i.Nb(i.G),i.Nb(n.d))},t.\u0275cmp=i.Hb({type:t,selectors:[["eco-fab-speed-dial"]],contentQueries:function(t,e,a){if(1&t&&i.Gb(a,m,1),2&t){let t;i.sc(t=i.cc())&&(e._childActions=t.first)}},hostVars:2,hostBindings:function(t,e){1&t&&i.bc("click",function(){return e._onClick()}),2&t&&i.Fb("eco-opened",e.open)},inputs:{fixed:"fixed",open:"open",direction:"direction",animationMode:"animationMode"},outputs:{openChange:"openChange"},ngContentSelectors:b,decls:3,vars:0,consts:[[1,"eco-fab-speed-dial-container"]],template:function(t,e){1&t&&(i.kc(f),i.Tb(0,"div",0),i.jc(1),i.jc(2,1),i.Sb())},styles:["eco-fab-speed-dial{display:inline-block}eco-fab-speed-dial.eco-opened .eco-fab-speed-dial-container eco-fab-speed-dial-trigger.eco-spin .spin180{transform:rotate(180deg)}eco-fab-speed-dial.eco-opened .eco-fab-speed-dial-container eco-fab-speed-dial-trigger.eco-spin .spin360{transform:rotate(1turn)}eco-fab-speed-dial .eco-fab-speed-dial-container{align-items:center;display:flex;position:relative;z-index:20}eco-fab-speed-dial .eco-fab-speed-dial-container eco-fab-speed-dial-trigger{pointer-events:auto;z-index:24}eco-fab-speed-dial .eco-fab-speed-dial-container eco-fab-speed-dial-trigger.eco-spin .spin180,eco-fab-speed-dial .eco-fab-speed-dial-container eco-fab-speed-dial-trigger.eco-spin .spin360{transition:all .6s cubic-bezier(.4,0,.2,1)}eco-fab-speed-dial .eco-fab-speed-dial-container eco-fab-speed-dial-actions{display:flex;height:0;position:absolute;width:0}eco-fab-speed-dial.eco-fling .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{display:block;opacity:1;transition:all .3s cubic-bezier(.55,0,.55,.2)}eco-fab-speed-dial.eco-scale .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{transform:scale(0);transition:all .3s cubic-bezier(.55,0,.55,.2);transition-duration:.14286s}eco-fab-speed-dial.eco-down eco-fab-speed-dial-actions{bottom:2px;left:7px}eco-fab-speed-dial.eco-down .eco-fab-speed-dial-container{flex-direction:column}eco-fab-speed-dial.eco-down .eco-fab-speed-dial-container eco-fab-speed-dial-trigger{order:1}eco-fab-speed-dial.eco-down .eco-fab-speed-dial-container eco-fab-speed-dial-actions{flex-direction:column;order:2}eco-fab-speed-dial.eco-down .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{margin-top:10px}eco-fab-speed-dial.eco-up eco-fab-speed-dial-actions{left:7px;top:2px}eco-fab-speed-dial.eco-up .eco-fab-speed-dial-container{flex-direction:column}eco-fab-speed-dial.eco-up .eco-fab-speed-dial-container eco-fab-speed-dial-trigger{order:2}eco-fab-speed-dial.eco-up .eco-fab-speed-dial-container eco-fab-speed-dial-actions{flex-direction:column-reverse;order:1}eco-fab-speed-dial.eco-up .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{margin-bottom:10px}eco-fab-speed-dial.eco-left eco-fab-speed-dial-actions{left:2px;top:7px}eco-fab-speed-dial.eco-left .eco-fab-speed-dial-container{flex-direction:row}eco-fab-speed-dial.eco-left .eco-fab-speed-dial-container eco-fab-speed-dial-trigger{order:2}eco-fab-speed-dial.eco-left .eco-fab-speed-dial-container eco-fab-speed-dial-actions{flex-direction:row-reverse;order:1}eco-fab-speed-dial.eco-left .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{margin-right:10px}eco-fab-speed-dial.eco-right eco-fab-speed-dial-actions{right:2px;top:7px}eco-fab-speed-dial.eco-right .eco-fab-speed-dial-container{flex-direction:row}eco-fab-speed-dial.eco-right .eco-fab-speed-dial-container eco-fab-speed-dial-trigger{order:1}eco-fab-speed-dial.eco-right .eco-fab-speed-dial-container eco-fab-speed-dial-actions{flex-direction:row;order:2}eco-fab-speed-dial.eco-right .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{margin-left:10px}"],encapsulation:2}),t})(),S=(()=>{class t{constructor(t){this.spin=!1,this._parent=t.get(g)}get sp(){return this.spin}_onClick(t){this._parent.fixed||(this._parent.toggle(),t.stopPropagation())}}return t.\u0275fac=function(e){return new(e||t)(i.Nb(i.t))},t.\u0275cmp=i.Hb({type:t,selectors:[["eco-fab-speed-dial-trigger"]],hostVars:2,hostBindings:function(t,e){1&t&&i.bc("click",function(t){return e._onClick(t)}),2&t&&i.Fb("eco-spin",e.sp)},inputs:{spin:"spin"},ngContentSelectors:p,decls:1,vars:0,template:function(t,e){1&t&&(i.kc(h),i.jc(0))},encapsulation:2}),t})(),F=(()=>{class t{}return t.\u0275mod=i.Lb({type:t}),t.\u0275inj=i.Kb({factory:function(e){return new(e||t)},imports:[[n.c]]}),t})()},KFbY:function(t,e,a){"use strict";a.d(e,"a",function(){return u});var i=a("sKxO"),c=a("R5jZ"),n=a("un/a"),r=a("JIr8"),o=a("Qyje"),s=a("fXoL"),l=a("tk/3");let u=(()=>{class t{constructor(t){this.http=t,this.moduleUrl="factura",this.srvcErrHndl=new c.a}facturar(t){return this.http.post(`${i.a.urlAppRestaurante}/${this.moduleUrl}/guardar`,t).pipe(Object(n.a)(i.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}get(t={}){return this.http.get(`${i.a.urlFacturacion}/${this.moduleUrl}/buscar_factura?${o.stringify(t)}`).pipe(Object(n.a)(i.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}imprimir(t){return this.http.get(`${i.a.urlFacturacion}/${this.moduleUrl}/imprimir/${t}`).pipe(Object(n.a)(i.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}save(t){return this.http.post(`${i.a.urlFacturacion}/${this.moduleUrl}/guardar${t.factura?"/"+t.factura:""}`,t).pipe(Object(n.a)(i.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}refacturar(t){return this.http.post(`${i.a.urlFacturacion}/${this.moduleUrl}/refacturar${t.factura?"/"+t.factura:""}`,t).pipe(Object(n.a)(i.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}firmar(t){return this.http.post(`${i.a.urlFacturacion}/${this.moduleUrl}/facturar/${t}`,{}).pipe(Object(n.a)(i.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}anular(t,e={}){return this.http.post(`${i.a.urlFacturacion}/${this.moduleUrl}/anular/${t}`,e).pipe(Object(n.a)(i.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}getDetalle(t,e={}){return this.http.get(`${i.a.urlFacturacion}/${this.moduleUrl}/buscar_detalle/${t}?${o.stringify(e)}`).pipe(Object(n.a)(i.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}saveDetalle(t){return this.http.post(`${i.a.urlFacturacion}/${this.moduleUrl}/guardar_detalle/${t.factura}${t.detalle_factura?"/"+t.detalle_factura:""}`,t).pipe(Object(n.a)(i.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}getGrafo(t){return this.http.get(`${i.a.urlFacturacion}/${this.moduleUrl}/get_grafo_factura/${t}`).pipe(Object(n.a)(i.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(s.Xb(l.b))},t.\u0275prov=s.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},KZK3:function(t,e,a){"use strict";a.d(e,"a",function(){return u});var i=a("sKxO"),c=a("R5jZ"),n=a("un/a"),r=a("JIr8"),o=a("Qyje"),s=a("fXoL"),l=a("tk/3");let u=(()=>{class t{constructor(t){this.http=t,this.moduleUrl="catalogo",this.manteUrl="fpago",this.srvcErrHndl=new c.a}get(t={}){return this.http.get(`${i.a.url}/${this.moduleUrl}/get_forma_pago?${o.stringify(t)}`).pipe(Object(n.a)(i.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}buscar(t={}){return this.http.get(`${i.a.urlMantenimientos}/${this.manteUrl}/buscar?${o.stringify(t)}`).pipe(Object(n.a)(i.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}save(t){return this.http.post(`${i.a.urlMantenimientos}/${this.manteUrl}/guardar${t.forma_pago?"/"+t.forma_pago:""}`,t).pipe(Object(n.a)(i.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(s.Xb(l.b))},t.\u0275prov=s.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},qodq:function(t,e,a){"use strict";a.r(e),a.d(e,"PosModule",function(){return Vt});var i=a("ofXK"),c=a("tk/3"),n=a("3Pt+"),r=a("PCNd"),o=a("jkDv"),s=a("MutI"),l=a("NFeN"),u=a("kmnG"),d=a("qFsG"),f=a("Wp6s"),b=a("f0Cb"),h=a("wZkO"),p=a("+0xr"),m=a("d3UM"),g=a("bSwM"),S=a("bTqV"),F=a("dNgK"),C=a("/t3+"),_=a("STbY"),v=a("zkoq"),T=a("M9IT"),w=a("0IaG"),M=a("XhcP"),D=a("/1cH"),y=a("JbvS"),k=a("tyNb"),x=a("0T/Q"),O=a("fXoL"),I=a("sKxO"),P=a("KZK3"),E=a("FKr1");function A(t,e){if(1&t){const t=O.Ub();O.Tb(0,"mat-list-item",5),O.bc("click",function(){O.wc(t);const a=e.$implicit;return O.fc().getFormaPago(a)}),O.Tb(1,"mat-icon",6),O.Dc(2,"account_balance_wallet"),O.Sb(),O.Tb(3,"h5",7),O.Dc(4),O.Sb(),O.Sb()}if(2&t){const t=e.$implicit;O.Cb(4),O.Ec(t.descripcion)}}const $=function(){return{standalone:!0}};let j=(()=>{class t{constructor(t){this.formaPagoSrvc=t,this.getFormaPagoEv=new O.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadFormasPago=()=>{this.formaPagoSrvc.buscar().subscribe(t=>{t&&t.length>0&&(this.lstFormasPago=t,this.applyFilter())})},this.getFormaPago=t=>{this.getFormaPagoEv.emit(t)},this.pageChange=t=>{this.pageSize=t.pageSize,this.pageIndex=t.pageIndex,this.applyFilter()}}ngOnInit(){this.loadFormasPago()}applyFilter(){if(this.txtFiltro.length>0){const t=Object(I.b)(this.lstFormasPago,this.txtFiltro);this.length=t.length,this.lstFormasPagoPaged=Object(I.c)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstFormasPago.length,this.lstFormasPagoPaged=Object(I.c)(this.lstFormasPago,this.pageSize,this.pageIndex+1)}}return t.\u0275fac=function(e){return new(e||t)(O.Nb(P.a))},t.\u0275cmp=O.Hb({type:t,selectors:[["app-lista-forma-pago"]],outputs:{getFormaPagoEv:"getFormaPagoEv"},decls:7,vars:7,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,e){1&t&&(O.Tb(0,"mat-card",0),O.Tb(1,"mat-card-content"),O.Tb(2,"mat-form-field",1),O.Tb(3,"input",2),O.bc("keyup",function(){return e.applyFilter()})("ngModelChange",function(t){return e.txtFiltro=t}),O.Sb(),O.Sb(),O.Tb(4,"mat-nav-list"),O.Cc(5,A,5,1,"mat-list-item",3),O.Sb(),O.Tb(6,"mat-paginator",4),O.bc("page",function(t){return e.pageChange(t)}),O.Sb(),O.Sb(),O.Sb()),2&t&&(O.Cb(3),O.lc("ngModel",e.txtFiltro)("ngModelOptions",O.nc(6,$)),O.Cb(2),O.lc("ngForOf",e.lstFormasPagoPaged),O.Cb(1),O.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[f.a,f.c,u.b,d.b,n.c,n.k,n.n,s.e,i.l,T.a,s.c,l.a,s.b,E.j],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),t})();var z=a("FY0D");function H(t,e){if(1&t){const t=O.Ub();O.Tb(0,"mat-form-field",9),O.Tb(1,"input",10),O.bc("ngModelChange",function(e){return O.wc(t),O.fc().formaPago.descripcion=e}),O.Sb(),O.Sb()}if(2&t){const t=O.fc();O.Cb(1),O.lc("ngModel",t.formaPago.descripcion)}}function N(t,e){if(1&t){const t=O.Ub();O.Tb(0,"button",11),O.bc("click",function(){return O.wc(t),O.fc().resetFormaPago()}),O.Dc(1," Nueva "),O.Sb()}}let U=(()=>{class t{constructor(t,e,a){this._snackBar=t,this.formaPagoSrvc=e,this.ls=a,this.formaPagoSavedEv=new O.o,this.esMovil=!1,this.resetFormaPago=()=>this.formaPago={forma_pago:null,descripcion:null,activo:1},this.onSubmit=()=>{this.formaPagoSrvc.save(this.formaPago).subscribe(t=>{t.exito&&(this.formaPagoSavedEv.emit(),this.resetFormaPago(),this._snackBar.open("Forma de pago agregada...","Forma de pago",{duration:3e3}))})}}ngOnInit(){this.esMovil=this.ls.get(I.a.usrTokenVar).enmovil||!1}}return t.\u0275fac=function(e){return new(e||t)(O.Nb(F.a),O.Nb(P.a),O.Nb(z.a))},t.\u0275cmp=O.Hb({type:t,selectors:[["app-form-forma-pago"]],inputs:{formaPago:"formaPago"},outputs:{formaPagoSavedEv:"formaPagoSavedEv"},decls:16,vars:5,consts:[[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmFormaPago","ngForm"],[1,"form-group"],["class","fullWidth",4,"ngIf"],["name","activo",1,"fullWidth",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],[1,"fullWidth"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"ngModel","ngModelChange"],["mat-raised-button","","type","button","color","accent",3,"click"]],template:function(t,e){if(1&t){const t=O.Ub();O.Tb(0,"mat-card",0),O.Tb(1,"mat-card-title"),O.Tb(2,"h4"),O.Dc(3),O.Sb(),O.Sb(),O.Tb(4,"mat-card-content"),O.Tb(5,"form",1,2),O.bc("ngSubmit",function(){return O.wc(t),O.tc(6).form.valid&&e.onSubmit()}),O.Tb(7,"div",3),O.Cc(8,H,2,1,"mat-form-field",4),O.Sb(),O.Tb(9,"div",3),O.Tb(10,"mat-checkbox",5),O.bc("ngModelChange",function(t){return+(e.formaPago.activo=t)}),O.Dc(11,"Activo"),O.Sb(),O.Sb(),O.Tb(12,"div",6),O.Tb(13,"button",7),O.Dc(14," Guardar "),O.Sb(),O.Cc(15,N,2,0,"button",8),O.Sb(),O.Sb(),O.Sb(),O.Sb()}if(2&t){const t=O.tc(6);O.Cb(3),O.Fc(" Forma de pago ",e.formaPago.forma_pago?e.formaPago.descripcion:""," "),O.Cb(5),O.lc("ngIf",e.esMovil),O.Cb(2),O.lc("ngModel",+e.formaPago.activo),O.Cb(3),O.lc("disabled",!t.form.valid),O.Cb(2),O.lc("ngIf",e.formaPago.forma_pago)}},directives:[f.a,f.h,f.c,n.r,n.l,n.m,i.m,g.a,n.k,n.n,S.a,u.b,d.b,n.c,n.p],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}"]}),t})();const R=["lstFormaPago"];let L=(()=>{class t{constructor(){this.setFormaPago=t=>this.formaPago=t,this.refreshFormaPagoList=()=>this.lstFormaPagoComponent.loadFormasPago(),this.formaPago={forma_pago:null,descripcion:null,activo:1}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=O.Hb({type:t,selectors:[["app-forma-pago"]],viewQuery:function(t,e){if(1&t&&O.Ic(R,1),2&t){let t;O.sc(t=O.cc())&&(e.lstFormaPagoComponent=t.first)}},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getFormaPagoEv"],["lstFormaPago",""],[1,"col","m7","s12"],[3,"formaPago","formaPagoSavedEv"],["frmIngreso",""]],template:function(t,e){1&t&&(O.Tb(0,"div",0),O.Tb(1,"div",1),O.Tb(2,"app-lista-forma-pago",2,3),O.bc("getFormaPagoEv",function(t){return e.setFormaPago(t)}),O.Sb(),O.Sb(),O.Tb(4,"div",4),O.Tb(5,"app-form-forma-pago",5,6),O.bc("formaPagoSavedEv",function(){return e.refreshFormaPagoList()}),O.Sb(),O.Sb(),O.Sb()),2&t&&(O.Cb(5),O.lc("formaPago",e.formaPago))},directives:[j,U],styles:[""]}),t})();var W=a("wd/R"),B=a("KFbY");const V=function(){return{standalone:!0}};function G(t,e){if(1&t){const t=O.Ub();O.Tb(0,"mat-form-field",5),O.Tb(1,"input",6),O.bc("keyup",function(){return O.wc(t),O.fc().applyFilter()})("ngModelChange",function(e){return O.wc(t),O.fc().txtFiltro=e}),O.Sb(),O.Sb()}if(2&t){const t=O.fc();O.Cb(1),O.lc("ngModel",t.txtFiltro)("ngModelOptions",O.nc(2,V))}}function K(t,e){if(1&t){const t=O.Ub();O.Tb(0,"mat-list-item",7),O.bc("click",function(){O.wc(t);const a=e.$implicit;return O.fc().getFactura(a)}),O.Tb(1,"mat-icon",8),O.Dc(2,"receipt"),O.Sb(),O.Tb(3,"h5",9),O.Dc(4),O.Sb(),O.Tb(5,"span",9),O.Dc(6),O.gc(7,"date"),O.Sb(),O.Tb(8,"span",9),O.Dc(9),O.Sb(),O.Tb(10,"span",9),O.Dc(11),O.Sb(),O.Sb()}if(2&t){const t=e.$implicit;O.Cb(4),O.Gc("",t.serie_factura,"\xa0",t.numero_factura,""),O.Cb(2),O.Fc("Fecha: ",O.ic(7,5,t.fecha_factura,"dd/MM/yyyy"),""),O.Cb(3),O.Fc("Cliente: ",t.cliente.nombre,""),O.Cb(2),O.Fc("NIT: ",t.cliente.nit,"")}}let q=(()=>{class t{constructor(t,e){this.facturaSrvc=t,this.ls=e,this.esMovil=!1,this.getFacturaEv=new O.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.verTodas=!1,this.loadFacturas=()=>{const t={};this.verTodas&&(t._todas=!0),this.facturaSrvc.get(t).subscribe(t=>{t&&(this.lstFacturas=t.length>0?t:[],this.applyFilter())})},this.cargarFacturas=t=>this.loadFacturas(),this.getFactura=t=>{this.getFacturaEv.emit(t)},this.pageChange=t=>{this.pageSize=t.pageSize,this.pageIndex=t.pageIndex,this.applyFilter()}}ngOnInit(){this.esMovil=this.ls.get(I.a.usrTokenVar).enmovil||!1,this.loadFacturas()}applyFilter(){if(this.txtFiltro.length>0){const t=Object(I.b)(this.lstFacturas,this.txtFiltro);this.length=t.length,this.lstFacturasPaged=Object(I.c)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstFacturas.length,this.lstFacturasPaged=Object(I.c)(this.lstFacturas,this.pageSize,this.pageIndex+1)}}return t.\u0275fac=function(e){return new(e||t)(O.Nb(B.a),O.Nb(z.a))},t.\u0275cmp=O.Hb({type:t,selectors:[["app-lista-factura-manual"]],outputs:{getFacturaEv:"getFacturaEv"},decls:8,vars:8,consts:[[1,"mat-elevation-z4","fullWidth"],["class","fullWidth",4,"ngIf"],["name","pedirdocumento",1,"btnAccion",3,"ngModel","ngModelOptions","ngModelChange","change"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,e){1&t&&(O.Tb(0,"mat-card",0),O.Tb(1,"mat-card-content"),O.Cc(2,G,2,3,"mat-form-field",1),O.Tb(3,"mat-checkbox",2),O.bc("ngModelChange",function(t){return e.verTodas=t})("change",function(t){return e.cargarFacturas(t)}),O.Dc(4,"Todas"),O.Sb(),O.Tb(5,"mat-nav-list"),O.Cc(6,K,12,8,"mat-list-item",3),O.Sb(),O.Tb(7,"mat-paginator",4),O.bc("page",function(t){return e.pageChange(t)}),O.Sb(),O.Sb(),O.Sb()),2&t&&(O.Cb(2),O.lc("ngIf",e.esMovil),O.Cb(1),O.lc("ngModel",e.verTodas)("ngModelOptions",O.nc(7,V)),O.Cb(3),O.lc("ngForOf",e.lstFacturasPaged),O.Cb(1),O.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[f.a,f.c,i.m,g.a,n.k,n.n,s.e,i.l,T.a,u.b,d.b,n.c,s.c,l.a,s.b,E.j],pipes:[i.e],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),t})();var J=a("IJgu"),Q=a("R5jZ"),X=a("un/a"),Y=a("JIr8"),Z=a("Qyje");let tt=(()=>{class t{constructor(t){this.http=t,this.srvcErrHndl=new Q.a}get(t={}){return this.http.get(`${I.a.urlCatalogos}/get_factura_serie?${Z.stringify(t)}`).pipe(Object(X.a)(I.a.reintentos),Object(Y.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(O.Xb(c.b))},t.\u0275prov=O.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var et=a("M8s9");let at=(()=>{class t{constructor(t){this.http=t,this.srvcErrHndl=new Q.a}get(t={}){return this.http.get(`${I.a.urlCatalogos}/get_moneda?${Z.stringify(t)}`).pipe(Object(X.a)(I.a.reintentos),Object(Y.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(O.Xb(c.b))},t.\u0275prov=O.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var it=a("NGYs"),ct=a("X/K6"),nt=a("7JkF");function rt(t,e){1&t&&(O.Tb(0,"h4",6),O.Dc(1,"*** ANULADA ***"),O.Sb())}function ot(t,e){if(1&t){const t=O.Ub();O.Tb(0,"button",7),O.bc("click",function(){return O.wc(t),O.fc().showForm=!0}),O.Tb(1,"mat-icon",8),O.Dc(2,"expand_more"),O.Sb(),O.Sb()}}function st(t,e){if(1&t){const t=O.Ub();O.Tb(0,"button",7),O.bc("click",function(){return O.wc(t),O.fc().showForm=!1}),O.Tb(1,"mat-icon",8),O.Dc(2,"expand_less"),O.Sb(),O.Sb()}}function lt(t,e){if(1&t&&(O.Tb(0,"mat-option",27),O.Dc(1),O.Sb()),2&t){const t=e.$implicit;O.lc("value",t.factura_serie),O.Cb(1),O.Gc(" ",t.serie," (",t.tipo,") ")}}function ut(t,e){if(1&t&&(O.Tb(0,"mat-option",27),O.Dc(1),O.Sb()),2&t){const t=e.$implicit;O.lc("value",t),O.Cb(1),O.Gc(" ",t.nombre," (",t.nit,") ")}}function dt(t,e){if(1&t&&(O.Tb(0,"mat-option",27),O.Dc(1),O.Sb()),2&t){const t=e.$implicit;O.lc("value",t.moneda),O.Cb(1),O.Gc(" ",t.nombre," (",t.simbolo,") ")}}function ft(t,e){if(1&t){const t=O.Ub();O.Tb(0,"mat-form-field",12),O.Tb(1,"input",28),O.bc("ngModelChange",function(e){return O.wc(t),O.fc(2).factura.notas=e}),O.Sb(),O.Sb()}if(2&t){const t=O.fc(2);O.Cb(1),O.lc("ngModel",t.factura.notas)}}function bt(t,e){if(1&t){const t=O.Ub();O.Tb(0,"button",29),O.bc("click",function(){return O.wc(t),O.fc(2).refacturar()}),O.Dc(1," Refacturar "),O.Sb()}}function ht(t,e){if(1&t){const t=O.Ub();O.Tb(0,"button",30),O.bc("click",function(){return O.wc(t),O.fc(2).resetFactura()}),O.Dc(1," Nueva "),O.Sb()}}const pt=function(){return{standalone:!0}};function mt(t,e){if(1&t){const t=O.Ub();O.Tb(0,"form",9,10),O.bc("ngSubmit",function(){O.wc(t);const e=O.tc(1),a=O.fc();return e.form.valid&&a.onSubmit()}),O.Tb(2,"div",11),O.Tb(3,"mat-form-field",12),O.Tb(4,"mat-label"),O.Dc(5,"Serie"),O.Sb(),O.Tb(6,"mat-select",13),O.bc("ngModelChange",function(e){return O.wc(t),O.fc().factura.factura_serie=e}),O.Cc(7,lt,2,3,"mat-option",14),O.Sb(),O.Sb(),O.Sb(),O.Tb(8,"div",11),O.Tb(9,"mat-form-field",12),O.Tb(10,"mat-label"),O.Dc(11,"Cliente"),O.Sb(),O.Tb(12,"input",15),O.bc("ngModelChange",function(e){return O.wc(t),O.fc().clienteSelected=e})("keyup",function(){O.wc(t);const e=O.fc();return e.filtrar(e.clienteSelected)}),O.Sb(),O.Tb(13,"mat-autocomplete",16,17),O.Cc(15,ut,2,3,"mat-option",14),O.Sb(),O.Sb(),O.Sb(),O.Tb(16,"div",11),O.Tb(17,"mat-form-field",12),O.Tb(18,"input",18),O.bc("ngModelChange",function(e){return O.wc(t),O.fc().factura.fecha_factura=e}),O.Sb(),O.Sb(),O.Sb(),O.Tb(19,"div",11),O.Tb(20,"mat-form-field",12),O.Tb(21,"mat-label"),O.Dc(22,"Moneda"),O.Sb(),O.Tb(23,"mat-select",19),O.bc("ngModelChange",function(e){return O.wc(t),O.fc().factura.moneda=e}),O.Cc(24,dt,2,3,"mat-option",14),O.Sb(),O.Sb(),O.Sb(),O.Tb(25,"div",11),O.Tb(26,"mat-checkbox",20),O.bc("ngModelChange",function(e){return O.wc(t),+(O.fc().factura.exenta=e)}),O.Dc(27,"Exenta"),O.Sb(),O.Sb(),O.Tb(28,"div",11),O.Cc(29,ft,2,1,"mat-form-field",21),O.Sb(),O.Tb(30,"div",22),O.Tb(31,"button",23),O.Dc(32," Guardar "),O.Sb(),O.Tb(33,"button",24),O.bc("click",function(){return O.wc(t),O.fc().firmarFactura()}),O.Dc(34," Firmar "),O.Sb(),O.Tb(35,"button",24),O.bc("click",function(){return O.wc(t),O.fc().imprimirFactura()}),O.Dc(36," Imprimir "),O.Sb(),O.Tb(37,"button",24),O.bc("click",function(){return O.wc(t),O.fc().representacionGrafica()}),O.Dc(38," PDF "),O.Sb(),O.Tb(39,"button",24),O.bc("click",function(){return O.wc(t),O.fc().anularFactura()}),O.Dc(40," Anular "),O.Sb(),O.Cc(41,bt,2,0,"button",25),O.Cc(42,ht,2,0,"button",26),O.Sb(),O.Sb()}if(2&t){const t=O.tc(1),e=O.tc(14),a=O.fc();O.Cb(6),O.lc("ngModel",a.factura.factura_serie),O.Cb(1),O.lc("ngForOf",a.facturaSeries),O.Cb(5),O.lc("ngModel",a.clienteSelected)("ngModelOptions",O.nc(19,pt))("matAutocomplete",e),O.Cb(1),O.lc("displayWith",a.displayCliente),O.Cb(2),O.lc("ngForOf",a.filteredClientes),O.Cb(3),O.lc("ngModel",a.factura.fecha_factura),O.Cb(5),O.lc("ngModel",a.factura.moneda),O.Cb(1),O.lc("ngForOf",a.monedas),O.Cb(2),O.lc("ngModel",+a.factura.exenta),O.Cb(3),O.lc("ngIf",a.esMovil),O.Cb(2),O.lc("disabled",!(t.form.valid&&!a.factura.fel_uuid&&!a.factura.fel_uuid_anulacion&&a.factura.cliente)),O.Cb(2),O.lc("disabled",!t.form.valid||!!a.factura.fel_uuid||!!a.factura.fel_uuid_anulacion||0===a.detallesFactura.length||a.refacturacion),O.Cb(2),O.lc("disabled",!t.form.valid||null==a.factura.fel_uuid||null==a.factura.fel_uuid||!!a.factura.fel_uuid_anulacion||0===a.detallesFactura.length||a.refacturacion),O.Cb(2),O.lc("disabled",!t.form.valid||null==a.factura.fel_uuid||null==a.factura.fel_uuid||0===a.detallesFactura.length||a.refacturacion),O.Cb(2),O.lc("disabled",!t.form.valid||null==a.factura.fel_uuid||null==a.factura.fel_uuid||!!a.factura.fel_uuid_anulacion||0===a.detallesFactura.length),O.Cb(2),O.lc("ngIf",!!a.factura.fel_uuid_anulacion),O.Cb(1),O.lc("ngIf",a.factura.factura)}}function gt(t,e){1&t&&O.Ob(0,"hr")}function St(t,e){if(1&t){const t=O.Ub();O.Tb(0,"button",7),O.bc("click",function(){return O.wc(t),O.fc(2).showFormDetalle=!0}),O.Tb(1,"mat-icon",8),O.Dc(2,"expand_more"),O.Sb(),O.Sb()}}function Ft(t,e){if(1&t){const t=O.Ub();O.Tb(0,"button",7),O.bc("click",function(){return O.wc(t),O.fc(2).showFormDetalle=!1}),O.Tb(1,"mat-icon",8),O.Dc(2,"expand_less"),O.Sb(),O.Sb()}}function Ct(t,e){if(1&t&&(O.Tb(0,"mat-option",27),O.Dc(1),O.Sb()),2&t){const t=e.$implicit;O.lc("value",t),O.Cb(1),O.Fc(" ",t.descripcion," ")}}function _t(t,e){if(1&t){const t=O.Ub();O.Tb(0,"mat-form-field",12),O.Tb(1,"input",36),O.bc("ngModelChange",function(e){return O.wc(t),O.fc(3).detalleFactura.cantidad=e})("change",function(){O.wc(t);const e=O.fc(3);return e.detalleFactura.total=+e.detalleFactura.precio_unitario*+e.detalleFactura.cantidad}),O.Sb(),O.Sb()}if(2&t){const t=O.fc(3);O.Cb(1),O.lc("ngModel",t.detalleFactura.cantidad)}}function vt(t,e){if(1&t){const t=O.Ub();O.Tb(0,"mat-form-field",12),O.Tb(1,"input",37),O.bc("ngModelChange",function(e){return O.wc(t),O.fc(3).detalleFactura.precio_unitario=e})("change",function(){O.wc(t);const e=O.fc(3);return e.detalleFactura.total=+e.detalleFactura.precio_unitario*+e.detalleFactura.cantidad}),O.Sb(),O.Sb()}if(2&t){const t=O.fc(3);O.Cb(1),O.lc("ngModel",t.detalleFactura.precio_unitario)}}function Tt(t,e){if(1&t){const t=O.Ub();O.Tb(0,"button",30),O.bc("click",function(){return O.wc(t),O.fc(3).resetDetalleFactura()}),O.Dc(1," Nuevo "),O.Sb()}}function wt(t,e){if(1&t){const t=O.Ub();O.Tb(0,"form",9,32),O.bc("ngSubmit",function(){O.wc(t);const e=O.tc(1),a=O.fc(2);return e.form.valid&&a.onSubmitDetail()}),O.Tb(2,"div",11),O.Tb(3,"mat-form-field",12),O.Tb(4,"mat-label"),O.Dc(5,"Art\xedculo"),O.Sb(),O.Tb(6,"input",33),O.bc("ngModelChange",function(e){return O.wc(t),O.fc(2).txtArticuloSelected=e})("keyup",function(){O.wc(t);const e=O.fc(2);return e.filtrarArticulos(e.txtArticuloSelected)}),O.Sb(),O.Tb(7,"mat-autocomplete",34,35),O.bc("optionSelected",function(e){return O.wc(t),O.fc(2).setPrecioUnitario(e)}),O.Cc(9,Ct,2,2,"mat-option",14),O.Sb(),O.Sb(),O.Sb(),O.Tb(10,"div",11),O.Cc(11,_t,2,1,"mat-form-field",21),O.Sb(),O.Tb(12,"div",11),O.Cc(13,vt,2,1,"mat-form-field",21),O.Sb(),O.Tb(14,"div",22),O.Tb(15,"button",23),O.Dc(16," Guardar "),O.Sb(),O.Cc(17,Tt,2,0,"button",26),O.Sb(),O.Sb()}if(2&t){const t=O.tc(1),e=O.tc(8),a=O.fc(2);O.Cb(6),O.lc("ngModel",a.txtArticuloSelected)("ngModelOptions",O.nc(9,pt))("matAutocomplete",e),O.Cb(1),O.lc("displayWith",a.displayArticulo),O.Cb(2),O.lc("ngForOf",a.filteredArticulos),O.Cb(2),O.lc("ngIf",a.esMovil),O.Cb(2),O.lc("ngIf",a.esMovil),O.Cb(2),O.lc("disabled",!t.form.valid||!!a.factura.fel_uuid||!!a.factura.fel_uuid_anulacion),O.Cb(2),O.lc("ngIf",a.detalleFactura.detalle_factura)}}function Mt(t,e){1&t&&O.Ob(0,"hr")}function Dt(t,e){1&t&&(O.Tb(0,"th",50),O.Dc(1,"Art\xedculo"),O.Sb())}function yt(t,e){if(1&t&&(O.Tb(0,"td",51),O.Dc(1),O.Sb()),2&t){const t=e.$implicit;O.Cb(1),O.Ec(t.articulo.descripcion)}}function kt(t,e){1&t&&(O.Tb(0,"th",52),O.Dc(1,"Cantidad"),O.Sb())}function xt(t,e){if(1&t&&(O.Tb(0,"td",53),O.Dc(1),O.gc(2,"number"),O.Sb()),2&t){const t=e.$implicit;O.Cb(1),O.Ec(O.ic(2,1,t.cantidad,"1.2-2"))}}function Ot(t,e){1&t&&(O.Tb(0,"th",52),O.Dc(1,"Precio Unitario"),O.Sb())}function It(t,e){if(1&t&&(O.Tb(0,"td",53),O.Dc(1),O.gc(2,"number"),O.Sb()),2&t){const t=e.$implicit;O.Cb(1),O.Fc("",O.ic(2,1,t.precio_unitario,"1.2-2")," ")}}function Pt(t,e){1&t&&(O.Tb(0,"th",52),O.Dc(1,"Total"),O.Sb())}function Et(t,e){if(1&t&&(O.Tb(0,"td",53),O.Dc(1),O.gc(2,"number"),O.Sb()),2&t){const t=e.$implicit;O.Cb(1),O.Ec(O.ic(2,1,t.total,"1.2-2"))}}function At(t,e){1&t&&(O.Tb(0,"th",50),O.Dc(1,"\xa0"),O.Sb())}function $t(t,e){if(1&t){const t=O.Ub();O.Tb(0,"td",51),O.Tb(1,"button",54),O.bc("click",function(){O.wc(t);const a=e.$implicit;return O.fc(3).getDetalleFactura(a.factura,a.detalle_factura)}),O.Dc(2," Editar "),O.Sb(),O.Sb()}if(2&t){const t=O.fc(3);O.Cb(1),O.lc("disabled",!!t.factura.fel_uuid||!!t.factura.fel_uuid_anulacion||t.refacturacion)}}function jt(t,e){1&t&&O.Ob(0,"tr",55)}function zt(t,e){1&t&&O.Ob(0,"tr",56)}function Ht(t,e){if(1&t&&(O.Tb(0,"table",38),O.Rb(1,39),O.Cc(2,Dt,2,0,"th",40),O.Cc(3,yt,2,1,"td",41),O.Qb(),O.Rb(4,42),O.Cc(5,kt,2,0,"th",43),O.Cc(6,xt,3,4,"td",44),O.Qb(),O.Rb(7,45),O.Cc(8,Ot,2,0,"th",43),O.Cc(9,It,3,4,"td",44),O.Qb(),O.Rb(10,46),O.Cc(11,Pt,2,0,"th",43),O.Cc(12,Et,3,4,"td",44),O.Qb(),O.Rb(13,47),O.Cc(14,At,2,0,"th",40),O.Cc(15,$t,3,1,"td",41),O.Qb(),O.Cc(16,jt,1,0,"tr",48),O.Cc(17,zt,1,0,"tr",49),O.Sb()),2&t){const t=O.fc(2);O.lc("dataSource",t.dataSource),O.Cb(16),O.lc("matHeaderRowDef",t.displayedColumns),O.Cb(1),O.lc("matRowDefColumns",t.displayedColumns)}}function Nt(t,e){if(1&t&&(O.Tb(0,"mat-card",0),O.Tb(1,"mat-card-title"),O.Tb(2,"h4"),O.Dc(3),O.Cc(4,St,3,0,"button",2),O.Cc(5,Ft,3,0,"button",2),O.Sb(),O.Sb(),O.Tb(6,"mat-card-content"),O.Cc(7,wt,18,10,"form",3),O.Cc(8,Mt,1,0,"hr",4),O.Cc(9,Ht,18,3,"table",31),O.Sb(),O.Sb()),2&t){const t=O.fc();O.Cb(3),O.Fc(" Detalle de factura No. ",t.factura.serie_factura?t.factura.serie_factura+" "+t.factura.numero_factura:"Pendiente de firmar."," "),O.Cb(1),O.lc("ngIf",!t.showFormDetalle),O.Cb(1),O.lc("ngIf",t.showFormDetalle),O.Cb(2),O.lc("ngIf",t.showFormDetalle),O.Cb(1),O.lc("ngIf",t.detallesFactura.length>0),O.Cb(1),O.lc("ngIf",t.detallesFactura.length>0)}}let Ut=(()=>{class t{constructor(t,e,a,i,c,n,r,o,s,l){this.snackBar=t,this.dialog=e,this.facturaSrvc=a,this.facturaSerieSrvc=i,this.clienteSrvc=c,this.monedaSrvc=n,this.articuloSrvc=r,this.anulacionSrvc=o,this.socket=s,this.ls=l,this.facturaSavedEv=new O.o,this.showForm=!0,this.showFormDetalle=!0,this.facturaSeries=[],this.clientes=[],this.filteredClientes=[],this.monedas=[],this.detallesFactura=[],this.articulos=[],this.filteredArticulos=[],this.displayedColumns=["articulo","cantidad","precio_unitario","total","editItem"],this.esMovil=!1,this.refacturacion=!1,this.txtArticuloSelected=void 0,this.clienteSelected=void 0,this.razonAnulacion=[],this.getRazonAnulacion=()=>{this.anulacionSrvc.get().subscribe(t=>{this.razonAnulacion=t})},this.filtrar=t=>{if(t&&"string"==typeof t){const e=t.toLowerCase();this.filteredClientes=this.clientes.filter(t=>t.nombre.toLowerCase().includes(e)||t.nit.toLowerCase().includes(e))}else this.filteredClientes=this.clientes},this.loadFacturaSeries=()=>{this.facturaSerieSrvc.get().subscribe(t=>{t&&(this.facturaSeries=t)})},this.loadClientes=()=>{this.clienteSrvc.get().subscribe(t=>{t&&(this.clientes=t,this.filteredClientes=this.clientes)})},this.loadMonedas=()=>{this.monedaSrvc.get().subscribe(t=>{t&&(this.monedas=t)})},this.refacturar=()=>{this.factura={factura:this.factura.factura,factura_serie:null,cliente:null,fecha_factura:W().format(I.a.dbDateFormat),moneda:null,exenta:0,notas:null,fel_uuid:null,fel_uuid_anulacion:null},this.refacturacion=!0},this.resetFactura=()=>{this.factura={factura:null,factura_serie:null,cliente:null,fecha_factura:W().format(I.a.dbDateFormat),moneda:null,exenta:0,notas:null,fel_uuid:null,fel_uuid_anulacion:null},this.clienteSelected=void 0,this.resetDetalleFactura(),this.detallesFactura=[]},this.displayCliente=t=>{if(t)return this.factura.cliente=t.cliente,t.nombre},this.onSubmit=()=>{this.refacturacion?this.facturaSrvc.refacturar(this.factura).subscribe(t=>{t.exito&&(this.facturaSavedEv.emit(),this.resetFactura(),this.refacturacion=!1,this.factura={factura:t.factura.factura,factura_serie:t.factura.factura_serie,cliente:t.factura.cliente,fecha_factura:t.factura.fecha_factura,moneda:t.factura.moneda,exenta:+t.factura.exenta,notas:t.factura.notas,fel_uuid:t.factura.fel_uuid},this.snackBar.open("Factura manual agregada...","Factura",{duration:3e3}))}):this.facturaSrvc.save(this.factura).subscribe(t=>{t.exito&&(this.facturaSavedEv.emit(),this.resetFactura(),this.factura={factura:t.factura.factura,factura_serie:t.factura.factura_serie,cliente:t.factura.cliente,fecha_factura:t.factura.fecha_factura,moneda:t.factura.moneda,exenta:+t.factura.exenta,notas:t.factura.notas,fel_uuid:t.factura.fel_uuid},this.snackBar.open("Factura manual agregada...","Factura",{duration:3e3}))})},this.firmarFactura=()=>{this.dialog.open(J.a,{maxWidth:"400px",data:new J.b("Firmar factura","Luego de firmar la factura no podr\xe1 hacer ninguna modificaci\xf3n. \xbfDesea continuar?","S\xed","No")}).afterClosed().subscribe(t=>{t&&this.facturaSrvc.firmar(+this.factura.factura).subscribe(t=>{t.exito?(this.factura.numero_factura=t.factura.numero_factura,this.factura.serie_factura=t.factura.serie_factura,this.factura.certificador_fel=t.factura.certificador_fel,this.factura.fel_uuid=t.factura.fel_uuid,this.facturaSavedEv.emit(),this.snackBar.open("Factura firmada con \xe9xito...","Firmar",{duration:3e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Firmar",{duration:3e3})})})},this.procesaDetalleFactura=t=>{const e=[];return t.forEach(t=>e.push({Cantidad:+t.cantidad,Descripcion:t.articulo.descripcion,Total:+t.total})),e},this.getTotalDetalle=t=>{let e=0;return t.forEach(t=>e+=+t.total),e},this.getTotalImpuestosAdicionales=t=>{let e=0;return t.forEach(t=>e+=+t.total),e},this.imprimirFactura=()=>{this.facturaSrvc.imprimir(+this.factura.factura).subscribe(t=>{t.factura?(console.log(t.factura),this.socket.emit("print:factura",`${JSON.stringify({NombreEmpresa:t.factura.empresa.nombre,NitEmpresa:t.factura.empresa.nit,SedeEmpresa:t.factura.sedeFactura.nombre,DireccionEmpresa:t.factura.empresa.direccion,Fecha:W(t.factura.fecha_factura).format(I.a.dateFormat),Nit:t.factura.receptor.nit,Nombre:t.factura.receptor.nombre,Direccion:t.factura.receptor.direccion,Serie:t.factura.serie_factura,Numero:t.factura.numero_factura,Total:this.getTotalDetalle(t.factura.detalle)+this.getTotalImpuestosAdicionales(t.factura.impuestos_adicionales||[]),NoAutorizacion:t.factura.fel_uuid,NombreCertificador:t.factura.certificador_fel.nombre,NitCertificador:t.factura.certificador_fel.nit,FechaDeAutorizacion:t.factura.fecha_autorizacion,NoOrdenEnLinea:"",FormaDePago:"",DetalleFactura:this.procesaDetalleFactura(t.factura.detalle),ImpuestosAdicionales:t.factura.impuestos_adicionales||[]})}`),this.snackBar.open(`Imprimiendo factura ${this.factura.serie_factura}-${this.factura.numero_factura}`,"Impresi\xf3n",{duration:3e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Impresi\xf3n",{duration:3e3})})},this.anularFactura=()=>{this.dialog.open(J.a,{maxWidth:"400px",data:new J.b("Anular factura","Luego de anular la factura no podr\xe1 hacer ninguna modificaci\xf3n. \xbfDesea continuar?","S\xed","No",{input:[{select:!0,label:"Motivo",datos:this.razonAnulacion,valor:null,id:"razon_anulacion",descripcion:"descripcion",requerido:!0},{select:!1,label:"Comentario",valor:null,id:"comentario_anulacion",requerido:!1}]})}).afterClosed().subscribe(t=>{if(t.resultado){const e={};for(let a=0;a<t.config.input.length;a++){const i=t.config.input[a];e[i.id]=i.valor}this.facturaSrvc.anular(+this.factura.factura,e).subscribe(t=>{t.exito?(this.factura.fel_uuid_anulacion=t.factura.fel_uuid_anulacion,this.facturaSavedEv.emit(),this.snackBar.open("Factura anulada con \xe9xito...","Firmar",{duration:3e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Firmar",{duration:1e4})})}})},this.loadArticulos=()=>{this.articuloSrvc.getArticulos().subscribe(t=>{t&&(this.articulos=t,this.filteredArticulos=this.articulos)})},this.displayArticulo=t=>{if(t)return this.detalleFactura.articulo=t.articulo,t.descripcion},this.filtrarArticulos=t=>{if(t&&"string"==typeof t){const e=t.toLowerCase();this.filteredArticulos=this.articulos.filter(t=>t.descripcion.toLowerCase().includes(e))}else this.filteredArticulos=this.articulos},this.setPrecioUnitario=t=>{this.detalleFactura.precio_unitario=+t.option.value.precio,this.detalleFactura.total=+this.detalleFactura.precio_unitario*+this.detalleFactura.cantidad},this.resetDetalleFactura=()=>{this.detalleFactura={detalle_factura:null,factura:this.factura.factura||0,articulo:null,cantidad:1,precio_unitario:null,total:null},this.txtArticuloSelected=void 0},this.loadDetalleFactura=(t=+this.factura.factura)=>{this.facturaSrvc.getDetalle(t,{factura:t}).subscribe(t=>{t&&(this.detallesFactura=t,this.updateTableDataSource())})},this.getDetalleFactura=(t=+this.factura.factura,e)=>{this.facturaSrvc.getDetalle(t,{detalle_factura:e}).subscribe(t=>{t&&(this.detalleFactura={detalle_factura:t[0].detalle_factura,factura:t[0].factura,articulo:t[0].articulo.articulo,cantidad:+t[0].cantidad,precio_unitario:+t[0].precio_unitario,total:+t[0].total},this.txtArticuloSelected=t[0].articulo,this.showFormDetalle=!0)})},this.onSubmitDetail=()=>{this.detalleFactura.factura=this.factura.factura,this.detalleFactura.total=+this.detalleFactura.precio_unitario*+this.detalleFactura.cantidad,this.facturaSrvc.saveDetalle(this.detalleFactura).subscribe(t=>{t&&(this.loadDetalleFactura(),this.resetDetalleFactura())})},this.updateTableDataSource=()=>this.dataSource=new p.k(this.detallesFactura),this.representacionGrafica=()=>{this.facturaSrvc.getGrafo(this.factura.factura).subscribe(t=>{if(t.exito)switch(t.tipo){case"link":this.openLinkWindow(t.documento);break;case"pdf":this.openPdfDocument(t.documento)}})},this.openLinkWindow=t=>window.open(t,"winFactPdf","height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no"),this.openPdfDocument=t=>{window.open("","winFactPdf","height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no").document.write('<iframe width="100%" style="margin: -8px;border: none;" height="100%" src="data:application/pdf;base64, '+encodeURI(t)+'"></iframe>')}}ngOnInit(){this.esMovil=this.ls.get(I.a.usrTokenVar).enmovil||!1,this.refacturacion=!1,this.resetFactura(),this.loadFacturaSeries(),this.loadClientes(),this.loadMonedas(),this.loadArticulos(),this.getRazonAnulacion(),this.ls.get(I.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(I.a.usrTokenVar).sede_uuid),this.socket.on("reconnect",()=>this.socket.emit("joinRestaurant",this.ls.get(I.a.usrTokenVar).sede_uuid)))}}return t.\u0275fac=function(e){return new(e||t)(O.Nb(F.a),O.Nb(w.b),O.Nb(B.a),O.Nb(tt),O.Nb(et.a),O.Nb(at),O.Nb(it.a),O.Nb(ct.a),O.Nb(nt.a),O.Nb(z.a))},t.\u0275cmp=O.Hb({type:t,selectors:[["app-form-factura-manual"]],inputs:{factura:"factura"},outputs:{facturaSavedEv:"facturaSavedEv"},decls:11,vars:7,consts:[[1,"mat-elevation-z4","fullWidth"],["style","background-color: lightcoral;",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],[2,"background-color","lightcoral"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmFactura","ngForm"],[1,"form-group"],[1,"fullWidth"],["name","factura_serie","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Cliente","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith"],["auto","matAutocomplete"],["matInput","","type","date","placeholder","Fecha","name","fecha_factura","required","",3,"ngModel","ngModelChange"],["name","moneda","required","",3,"ngModel","ngModelChange"],["name","exenta",1,"fullWidth",3,"ngModel","ngModelChange"],["class","fullWidth",4,"ngIf"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],[3,"value"],["matInput","","type","text","placeholder","Notas","name","notas",3,"ngModel","ngModelChange"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"click"],["mat-raised-button","","type","button","color","accent",3,"click"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleFactura","ngForm"],["type","text","placeholder","Art\xedculo","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith","optionSelected"],["autoArticulos","matAutocomplete"],["matInput","","placeholder","Cantidad","name","cantidad","required","",3,"ngModel","ngModelChange","change"],["matInput","","placeholder","Precio unitario","name","precio_unitario","required","",3,"ngModel","ngModelChange","change"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","articulo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","cantidad"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","precio_unitario"],["matColumnDef","total"],["matColumnDef","editItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(O.Tb(0,"mat-card",0),O.Tb(1,"mat-card-title"),O.Cc(2,rt,2,0,"h4",1),O.Tb(3,"h4"),O.Dc(4),O.Cc(5,ot,3,0,"button",2),O.Cc(6,st,3,0,"button",2),O.Sb(),O.Sb(),O.Tb(7,"mat-card-content"),O.Cc(8,mt,43,20,"form",3),O.Sb(),O.Sb(),O.Cc(9,gt,1,0,"hr",4),O.Cc(10,Nt,10,6,"mat-card",5)),2&t&&(O.Cb(2),O.lc("ngIf",!!e.factura.fel_uuid_anulacion),O.Cb(2),O.Fc(" Factura ",e.factura.factura?e.factura.serie_factura?e.factura.serie_factura+" "+e.factura.numero_factura:"Pendiente de firmar.":""," "),O.Cb(1),O.lc("ngIf",!e.showForm),O.Cb(1),O.lc("ngIf",e.showForm),O.Cb(2),O.lc("ngIf",e.showForm),O.Cb(1),O.lc("ngIf",e.factura.factura),O.Cb(1),O.lc("ngIf",e.factura.factura))},directives:[f.a,f.h,i.m,f.c,S.a,l.a,n.r,n.l,n.m,u.b,u.e,m.a,n.p,n.k,n.n,i.l,d.b,n.c,D.c,D.a,g.a,E.m,p.j,p.c,p.e,p.b,p.g,p.i,p.d,p.a,p.f,p.h],pipes:[i.f],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}"]}),t})();const Rt=["lstFacturaManual"],Lt=["frmFacturaManual"],Wt=[{path:"fpago",component:L,canActivate:[x.a]},{path:"factman",component:(()=>{class t{constructor(){this.setFactura=t=>{this.factura={factura:t.factura,factura_serie:t.factura_serie.factura_serie,cliente:t.cliente.cliente,fecha_factura:t.fecha_factura,moneda:t.moneda.moneda,exenta:t.exenta,notas:t.notas,usuario:t.usuario.usuario,numero_factura:t.numero_factura,serie_factura:t.serie_factura,fel_uuid:t.fel_uuid,fel_uuid_anulacion:t.fel_uuid_anulacion,certificador_fel:t.certificador_fel},this.frmFactura.clienteSelected=t.cliente,this.frmFactura.loadDetalleFactura(+this.factura.factura),this.frmFactura.resetDetalleFactura()},this.refreshFacturaList=()=>this.lstFacturaComponent.loadFacturas(),this.factura={factura:null,factura_serie:null,cliente:null,fecha_factura:W().format(I.a.dbDateFormat),moneda:null,exenta:0,notas:null}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=O.Hb({type:t,selectors:[["app-factura-manual"]],viewQuery:function(t,e){if(1&t&&(O.Ic(Rt,1),O.Ic(Lt,1)),2&t){let t;O.sc(t=O.cc())&&(e.lstFacturaComponent=t.first),O.sc(t=O.cc())&&(e.frmFactura=t.first)}},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getFacturaEv"],["lstFacturaManual",""],[1,"col","m7","s12"],[3,"factura","facturaSavedEv"],["frmFacturaManual",""]],template:function(t,e){1&t&&(O.Tb(0,"div",0),O.Tb(1,"div",1),O.Tb(2,"app-lista-factura-manual",2,3),O.bc("getFacturaEv",function(t){return e.setFactura(t)}),O.Sb(),O.Sb(),O.Tb(4,"div",4),O.Tb(5,"app-form-factura-manual",5,6),O.bc("facturaSavedEv",function(){return e.refreshFacturaList()}),O.Sb(),O.Sb(),O.Sb()),2&t&&(O.Cb(5),O.lc("factura",e.factura))},directives:[q,Ut],styles:[""]}),t})(),canActivate:[x.a]},{path:"**",redirectTo:"/admin/dashboard",pathMatch:"full"}];let Bt=(()=>{class t{}return t.\u0275mod=O.Lb({type:t}),t.\u0275inj=O.Kb({factory:function(e){return new(e||t)},imports:[[k.d.forChild(Wt)],k.d]}),t})(),Vt=(()=>{class t{}return t.\u0275mod=O.Lb({type:t}),t.\u0275inj=O.Kb({factory:function(e){return new(e||t)},imports:[[i.c,Bt,c.c,n.e,r.a,o.AdminModule,s.d,l.b,u.d,d.c,f.f,b.b,h.c,p.l,m.b,g.b,S.b,F.b,C.b,_.d,v.b,T.b,w.e,M.d,D.b,y.c]]}),t})()}}]);