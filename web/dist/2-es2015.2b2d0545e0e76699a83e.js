(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"0Uhh":function(e,t,o){"use strict";o.r(t),t.default='<mat-card class="mat-elevation-z4 fullWidth">\n    <mat-card-title>\n        <h4>\n            Ingreso{{!!ingreso.ingreso ? (\' No. \' + ingreso.ingreso) : \'\'}}\n            <button mat-icon-button type="button" color="accent" (click)="showIngresoForm = true;"\n                *ngIf="!showIngresoForm">\n                <mat-icon class="iconFontSize">expand_more</mat-icon>\n            </button>\n            <button mat-icon-button type="button" color="accent" (click)="showIngresoForm = false;"\n                *ngIf="showIngresoForm">\n                <mat-icon class="iconFontSize">expand_less</mat-icon>\n            </button>\n        </h4>\n    </mat-card-title>\n    <mat-card-content>\n        <form #frmIngreso="ngForm" *ngIf="showIngresoForm" (ngSubmit)="frmIngreso.form.valid && onSubmit()" novalidate>\n            <mat-form-field class="fullWidth">\n                <mat-label>Tipo de movimiento</mat-label>\n                <mat-select name="tipo_movimiento" [(ngModel)]="ingreso.tipo_movimiento" required>\n                    <mat-option *ngFor="let tm of tiposMovimiento" [value]="tm.tipo_movimiento">\n                        {{tm.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <input matInput type="date" placeholder="Fecha" name="fecha" [(ngModel)]="ingreso.fecha" required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <mat-label>Bodega</mat-label>\n                <mat-select name="bodega" [(ngModel)]="ingreso.bodega" required>\n                    <mat-option *ngFor="let bode of bodegas" [value]="bode.bodega">\n                        {{bode.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <mat-label>Bodega de origen</mat-label>\n                <mat-select name="bodega_origen" [(ngModel)]="ingreso.bodega_origen">\n                    <mat-option *ngFor="let bodeO of bodegas" [value]="bodeO.bodega">\n                        {{bodeO.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <mat-label>Proveedor</mat-label>\n                <mat-select name="proveedor" [(ngModel)]="ingreso.proveedor" required>\n                    <mat-option *ngFor="let prov of proveedores" [value]="prov.proveedor">\n                        ({{prov.nit}}) {{prov.razon_social}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="esMovil">\n                <input matInput placeholder="Comentarios" name="comentario" [(ngModel)]="ingreso.comentario">\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="alphanumeric"\n                    ng-virtual-keyboard-placeholder="Comentarios" placeholder="Comentarios" name="comentario"\n                    [(ngModel)]="ingreso.comentario">\n            </mat-form-field>\n            <div align="end">\n                <button mat-raised-button type="submit" color="accent" class="btnAccion" [disabled]="!frmIngreso.form.valid"\n                    *ngIf="saveToDB">\n                    Guardar\n                </button>\n                <button mat-raised-button type="button" color="accent" (click)="resetIngreso()" *ngIf="ingreso.ingreso">\n                    Nuevo\n                </button>\n            </div>\n        </form>\n    </mat-card-content>\n</mat-card>\n<hr *ngIf="ingreso.ingreso || !saveToDB" />\n<mat-card class="mat-elevation-z4 fullWidth" *ngIf="ingreso.ingreso || !saveToDB">\n    <mat-card-title>\n        <h4>\n            Detalle del ingreso {{saveToDB ? \'No.\' : \'\'}} {{ingreso.ingreso}}\n            <button mat-icon-button type="button" color="accent" (click)="showDetalleIngresoForm = true;"\n                *ngIf="!showDetalleIngresoForm">\n                <mat-icon class="iconFontSize">expand_more</mat-icon>\n            </button>\n            <button mat-icon-button type="button" color="accent" (click)="showDetalleIngresoForm = false;"\n                *ngIf="showDetalleIngresoForm">\n                <mat-icon class="iconFontSize">expand_less</mat-icon>\n            </button>\n        </h4>\n    </mat-card-title>\n    <mat-card-content>\n        <form #frmDetalleIngreso="ngForm" *ngIf="showDetalleIngresoForm" (ngSubmit)="frmDetalleIngreso.form.valid && onSubmitDetail()" novalidate>\n            <mat-form-field class="fullWidth">\n                <mat-label>Art\xedculo</mat-label>\n                <mat-select name="articulo" [(ngModel)]="detalleIngreso.articulo" required>\n                    <mat-option *ngFor="let a of articulos" [value]="a.articulo">\n                        {{a.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <mat-label>Presentaci\xf3n</mat-label>\n                <mat-select name="presentacion" [(ngModel)]="detalleIngreso.presentacion" required>\n                    <mat-option *ngFor="let p of presentaciones" [value]="p.presentacion">\n                        {{p.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="esMovil">\n                <input matInput placeholder="Cantidad" name="cantidad" [(ngModel)]="detalleIngreso.cantidad"\n                    (change)="detalleIngreso.precio_total = +detalleIngreso.precio_unitario * +detalleIngreso.cantidad"\n                    required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="numeric"\n                    ng-virtual-keyboard-placeholder="Cantidad" placeholder="Cantidad" name="cantidad"\n                    [(ngModel)]="detalleIngreso.cantidad"\n                    (change)="detalleIngreso.precio_total = +detalleIngreso.precio_unitario * +detalleIngreso.cantidad"\n                    required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="esMovil">\n                <input matInput placeholder="Costo unitario" name="precio_unitario"\n                    [(ngModel)]="detalleIngreso.precio_unitario"\n                    (change)="detalleIngreso.precio_total = +detalleIngreso.precio_unitario * +detalleIngreso.cantidad"\n                    required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="numeric"\n                    ng-virtual-keyboard-placeholder="Costo unitario" placeholder="Costo unitario" name="precio_unitario"\n                    [(ngModel)]="detalleIngreso.precio_unitario"\n                    (change)="detalleIngreso.precio_total = +detalleIngreso.precio_unitario * +detalleIngreso.cantidad"\n                    required>\n            </mat-form-field>\n            <div align="end">\n                <button mat-raised-button type="submit" color="accent" class="btnAccion" [disabled]="!frmDetalleIngreso.form.valid"\n                    *ngIf="saveToDB">\n                    Guardar\n                </button>\n                <button mat-raised-button type="button" color="accent" (click)="addToDetail()"\n                    [disabled]="!frmDetalleIngreso.form.valid || [2, 3].indexOf(+ingreso.estatus_movimiento) >= 0"\n                    *ngIf="!saveToDB">\n                    Nuevo\n                </button>\n                <button mat-raised-button type="button" color="accent" (click)="resetDetalleIngreso()"\n                    *ngIf="detalleIngreso.ingreso_detalle">\n                    Nuevo\n                </button>\n            </div>\n        </form>\n        <hr *ngIf="detallesIngreso.length > 0" />\n        <table mat-table [dataSource]="dataSource" class="mat-elevation-z4 full-width"\n            *ngIf="detallesIngreso.length > 0">\n            <ng-container matColumnDef="articulo">\n                <th mat-header-cell *matHeaderCellDef>Art\xedculo</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">\n                    {{saveToDB ? element.articulo.descripcion : getDescripcionArticulo(element.articulo)}}</td>\n            </ng-container>\n            <ng-container matColumnDef="presentacion">\n                <th mat-header-cell *matHeaderCellDef>Presentaci\xf3n</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">\n                    {{saveToDB ? element.presentacion.descripcion : getDescripcionPresentacion(element.presentacion)}}\n                </td>\n            </ng-container>\n            <ng-container matColumnDef="cantidad">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Cantidad</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.cantidad | number:\'1.2-2\'}}</td>\n            </ng-container>\n            <ng-container matColumnDef="costo_unitario">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Costo Unitario</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.precio_unitario | number:\'1.2-2\'}}\n                </td>\n            </ng-container>\n            <ng-container matColumnDef="costo_total">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Costo Total</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.precio_total | number:\'1.2-2\'}}</td>\n            </ng-container>\n            <ng-container matColumnDef="deleteItem">\n                <th mat-header-cell *matHeaderCellDef>&nbsp;</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">\n                    <button mat-raised-button type="button" color="accent"\n                        (click)="getDetalleIngreso(element.ingreso, element.ingreso_detalle)" *ngIf="saveToDB">\n                        Editar\n                    </button>\n                    <button mat-raised-button type="button" color="accent" (click)="removeFromDetail(element.articulo)"\n                        [disabled]="[2, 3].indexOf(+ingreso.estatus_movimiento) >= 0" *ngIf="!saveToDB">\n                        Editar\n                    </button>\n                </td>\n            </ng-container>\n            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>\n            <tr mat-row *matRowDef="let row; columns: displayedColumns;">\n            </tr>\n        </table>\n    </mat-card-content>\n</mat-card>'},"3e6T":function(e,t,o){"use strict";o.d(t,"a",(function(){return m}));var a=o("mrSG"),n=o("8Y7J"),i=o("IheW"),r=o("sKxO"),s=o("R5jZ"),l=o("FY0D"),c=o("un/a"),d=o("JIr8"),u=o("Qyje");let m=class{constructor(e,t){this.http=e,this.ls=t,this.usrToken=null,this.srvcErrHndl=new s.a,this.usrToken=this.ls.get(r.a.usrTokenVar)?this.ls.get(r.a.usrTokenVar).token:null}get(e={}){const t={headers:new i.c({Authorization:this.usrToken})};return this.http.get(`${r.a.urlCatalogos}/get_tipo_movimiento?${u.stringify(e)}`,t).pipe(Object(c.a)(r.a.reintentos),Object(d.a)(this.srvcErrHndl.errorHandler))}};m.ctorParameters=()=>[{type:i.a},{type:l.a}],m=a.b([Object(n.Injectable)({providedIn:"root"})],m)},"4muF":function(e,t,o){"use strict";o.r(t),t.default='<div class="row">\n    <div class="col m12 s12">\n        <button mat-raised-button class="btnAccion" color="primary" *ngFor="let sc of subcategorias" (click)="clickOnSubCategoria(sc)" [disabled]="bloqueoBotones">\n            {{sc.descripcion}}\n        </button>\n    </div>\n</div>\n<hr *ngIf="articulos.length > 0" />\n<div class="row">\n    <div class="col m12 s12">\n        <button mat-raised-button class="btnAccion" color="warn" *ngFor="let art of articulos" (click)="clickOnArticulo(art)" [disabled]="bloqueoBotones">\n            {{art.descripcion}}\n        </button>\n    </div>\n</div>'},"5bcq":function(e,t,o){"use strict";o.r(t),t.default=".fullWidth {\n    width: 100% !important;\n}\n\ntable {\n    width: 100% !important;\n}"},"66Qk":function(e,t,o){"use strict";o.r(t),t.default='<mat-card class="mat-elevation-z4 fullWidth">\n    <mat-card-title>\n        <h4>\n            Art\xedculo {{!!articulo.articulo ? articulo.descripcion: \'\'}}\n            <button mat-icon-button type="button" color="accent" (click)="showArticuloForm = true;"\n                *ngIf="!showArticuloForm">\n                <mat-icon class="iconFontSize">expand_more</mat-icon>\n            </button>\n            <button mat-icon-button type="button" color="accent" (click)="showArticuloForm = false;"\n                *ngIf="showArticuloForm">\n                <mat-icon class="iconFontSize">expand_less</mat-icon>\n            </button>\n        </h4>\n    </mat-card-title>\n    <mat-card-content>\n        <form #frmArticulo="ngForm" *ngIf="showArticuloForm" (ngSubmit)="frmArticulo.form.valid && onSubmit()" novalidate>\n            <mat-form-field class="fullWidth" *ngIf="esMovil">\n                <input matInput type="text" placeholder="Descripcion" name="descripcion"\n                    [(ngModel)]="articulo.descripcion" required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="alphanumeric"\n                    ng-virtual-keyboard-placeholder="Descripci\xf3n" type="text" placeholder="Descripci\xf3n"\n                    name="descripcion" [(ngModel)]="articulo.descripcion" required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="esMovil">\n                <input matInput type="number" placeholder="Precio" name="precio" [(ngModel)]="articulo.precio" required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="numeric"\n                    ng-virtual-keyboard-placeholder="Precio" type="number" placeholder="Precio" name="precio"\n                    [(ngModel)]="articulo.precio" required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <mat-label>Presentaci\xf3n</mat-label>\n                <mat-select name="presentacion" [(ngModel)]="articulo.presentacion">\n                    <mat-option *ngFor="let p of presentaciones" [value]="p.presentacion">\n                        {{p.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="esMovil">\n                <input matInput type="text" placeholder="C\xf3digo" name="codigo" [(ngModel)]="articulo.codigo" required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="numeric"\n                    ng-virtual-keyboard-placeholder="C\xf3digo" type="text" placeholder="C\xf3digo" name="codigo"\n                    [(ngModel)]="articulo.codigo" required>\n            </mat-form-field>\n            <mat-checkbox name="produccion" class="fullWidth" [(ngModel)]="+articulo.produccion">\xbfEs produccion?</mat-checkbox>\n            <div align="end">\n                <button mat-raised-button type="submit" color="accent" class="btnAccion" [disabled]="!frmArticulo.form.valid || !articulo.categoria_grupo">\n                    Guardar\n                </button>\n                <button mat-raised-button type="button" color="accent" (click)="resetArticulo()" *ngIf="articulo.articulo">\n                    Nuevo\n                </button>\n            </div>\n        </form>\n    </mat-card-content>\n</mat-card>\n<hr *ngIf="articulo.articulo" />\n<mat-card class="mat-elevation-z4 fullWidth" *ngIf="articulo.articulo">\n    <mat-card-title>\n        <h4>\n            Detalle del art\xedculo {{articulo.descripcion}}\n            <button mat-icon-button type="button" color="accent" (click)="showDetalleForm = true;"\n                *ngIf="!showDetalleForm">\n                <mat-icon class="iconFontSize">expand_more</mat-icon>\n            </button>\n            <button mat-icon-button type="button" color="accent" (click)="showDetalleForm = false;"\n                *ngIf="showDetalleForm">\n                <mat-icon class="iconFontSize">expand_less</mat-icon>\n            </button>\n        </h4>\n    </mat-card-title>\n    <mat-card-content>\n        <form #frmDetalleArticulo="ngForm" *ngIf="showDetalleForm" (ngSubmit)="frmDetalleArticulo.form.valid && onSubmitDetail()" novalidate>\n            <mat-form-field class="fullWidth">\n                <mat-label>Art\xedculo</mat-label>\n                <mat-select name="articulo" [(ngModel)]="receta.articulo" required>\n                    <mat-option *ngFor="let a of articulos" [value]="a.articulo">\n                        {{a.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="esMovil">\n                <input matInput placeholder="Cantidad" name="cantidad" [(ngModel)]="receta.cantidad" required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="numeric"\n                    ng-virtual-keyboard-placeholder="Cantidad" placeholder="Cantidad" name="cantidad"\n                    [(ngModel)]="receta.cantidad" required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <mat-label>Unidad de medida</mat-label>\n                <mat-select name="medida" [(ngModel)]="receta.medida" required>\n                    <mat-option *ngFor="let m of medidas" [value]="m.medida">\n                        {{m.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-checkbox name="racionable" class="fullWidth" [(ngModel)]="+receta.racionable">\xbfEs racionable?</mat-checkbox>\n            <div align="end">\n                <button mat-raised-button type="submit" color="accent" class="btnAccion" [disabled]="!frmDetalleArticulo.form.valid">\n                    Guardar\n                </button>\n                <button mat-raised-button type="button" color="accent" (click)="resetReceta()" *ngIf="receta.articulo_detalle">\n                    Nuevo\n                </button>\n            </div>\n        </form>\n        <hr *ngIf="recetas.length > 0" />\n        <table mat-table [dataSource]="dataSource" class="mat-elevation-z4 full-width" *ngIf="recetas.length > 0">\n            <ng-container matColumnDef="articulo">\n                <th mat-header-cell *matHeaderCellDef>Art\xedculo</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">{{element.articulo.descripcion}}</td>\n            </ng-container>\n            <ng-container matColumnDef="cantidad">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Cantidad</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.cantidad | number:\'1.2-2\'}}</td>\n            </ng-container>\n            <ng-container matColumnDef="medida">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Unida de medida</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.medida.descripcion}}</td>\n            </ng-container>\n            <ng-container matColumnDef="editItem">\n                <th mat-header-cell *matHeaderCellDef>&nbsp;</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">\n                    <button mat-raised-button type="button" color="accent" class="btnAccion" (click)="getReceta(element.receta, element.articulo_detalle)">\n                        Editar\n                    </button>\n                    <button mat-raised-button type="button" color="accent" (click)="eliminaReceta(element)">\n                        Eliminar\n                    </button>\n                </td>\n            </ng-container>\n            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>\n            <tr mat-row *matRowDef="let row; columns: displayedColumns;">\n            </tr>\n        </table>\n    </mat-card-content>\n</mat-card>'},"8Mvs":function(e,t,o){"use strict";o.r(t),t.default=""},CIKf:function(e,t,o){"use strict";o.r(t),t.default='<div class="row">\n  <div class="col m12 s12">\n    <mat-card class="mat-elevation-z4 fullWidth">\n      <mat-card-title>\n        <h4>Kardex</h4>\n      </mat-card-title>\n      <mat-card-content>\n        <form (ngSubmit)="onSubmit()" novalidate>\n          <mat-form-field class="fullWidth">\n              <mat-label>Articulo</mat-label>\n              <mat-select name="articulo" [(ngModel)]="params.articulo" required>\n                  <mat-option *ngFor="let art of articulos" [value]="art.articulo">\n                      {{art.descripcion}}\n                  </mat-option>\n              </mat-select>\n          </mat-form-field>\n          <mat-form-field class="fullWidth">\n              <mat-label>Bodega</mat-label>\n              <mat-select name="bodega" [(ngModel)]="params.bodega">\n                  <mat-option *ngFor="let bod of bodegas" [value]="bod.bodega">\n                      {{bod.descripcion}}\n                  </mat-option>\n              </mat-select>\n          </mat-form-field>\n          <mat-form-field class="fullWidth">\n              <mat-label>Sede</mat-label>\n              <mat-select name="sede" [(ngModel)]="params.sede">\n                  <mat-option *ngFor="let sede of sedes" [value]="sede.sede">\n                      {{sede.nombre}}\n                  </mat-option>\n              </mat-select>\n          </mat-form-field>\n          <mat-form-field class="fullWidth">            \n            <input matInput type="date" placeholder="Del" [(ngModel)]="params.fdel" [ngModelOptions]="{standalone: true}" required>\n          </mat-form-field>\n          <mat-form-field class="fullWidth">            \n            <input matInput type="date" placeholder="Al" [(ngModel)]="params.fal" [ngModelOptions]="{standalone: true}" required>\n          </mat-form-field>\n          <div align="end">\n            <button mat-button color="accent" type="submit">GENERAR</button>\n          </div>\n        </form>        \n      </mat-card-content>\n    </mat-card>\n  </div>\n</div>'},FHMA:function(e,t,o){"use strict";o.d(t,"a",(function(){return u}));var a=o("mrSG"),n=o("8Y7J"),i=o("IheW"),r=o("sKxO"),s=o("R5jZ"),l=o("FY0D"),c=o("un/a"),d=o("JIr8");let u=class{constructor(e,t){this.http=e,this.ls=t,this.usrToken=null,this.httpOptions={responseType:"blob"},this.srvcErrHndl=new s.a,this.usrToken=this.ls.get(r.a.usrTokenVar)?this.ls.get(r.a.usrTokenVar).token:null,this.httpOptions.headers=new i.c({Authorization:this.usrToken,Accept:"application/pdf"})}getReporteCaja(e){return this.httpOptions.params=e,this.http.get(`${r.a.urlAppRestaurante}/reporte/caja`,this.httpOptions).pipe(Object(c.a)(r.a.reintentos),Object(d.a)(this.srvcErrHndl.errorHandler))}getReporteExistencia(e){return this.httpOptions.params=e,this.http.get(`${r.a.urlWms}/reporte/existencia`,this.httpOptions).pipe(Object(c.a)(r.a.reintentos),Object(d.a)(this.srvcErrHndl.errorHandler))}getReporteKardex(e){return this.httpOptions.params=e,this.http.get(`${r.a.urlWms}/reporte/kardex`,this.httpOptions).pipe(Object(c.a)(r.a.reintentos),Object(d.a)(this.srvcErrHndl.errorHandler))}getReporteFactura(e){return this.httpOptions.params=e,this.http.get(`${r.a.urlAppRestaurante}/reporte/factura`,this.httpOptions).pipe(Object(c.a)(r.a.reintentos),Object(d.a)(this.srvcErrHndl.errorHandler))}getReportePropina(e){return this.httpOptions.params=e,this.http.get(`${r.a.urlFacturacion}/reporte/venta/propina`,this.httpOptions).pipe(Object(c.a)(r.a.reintentos),Object(d.a)(this.srvcErrHndl.errorHandler))}getComanda(e){return this.http.get(`${r.a.urlAppRestaurante}/comanda/imprimir/${e}/1`,this.httpOptions).pipe(Object(c.a)(r.a.reintentos),Object(d.a)(this.srvcErrHndl.errorHandler))}};u.ctorParameters=()=>[{type:i.a},{type:l.a}],u=a.b([Object(n.Injectable)({providedIn:"root"})],u)},Iab2:function(e,t,o){var a,n,i;n=[],void 0===(i="function"==typeof(a=function(){"use strict";function t(e,t,o){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){i(a.response,t,o)},a.onerror=function(){console.error("could not download file")},a.send()}function o(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(o)}}var n="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,i=n.saveAs||("object"!=typeof window||window!==n?function(){}:"download"in HTMLAnchorElement.prototype?function(e,i,r){var s=n.URL||n.webkitURL,l=document.createElement("a");i=i||e.name||"download",l.download=i,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?a(l):o(l.href)?t(e,i,r):a(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){a(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,i){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,i),n);else if(o(e))t(e,n,i);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout((function(){a(r)}))}}:function(e,o,a,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return t(e,o,a);var r="application/octet-stream"===e.type,s=/constructor/i.test(n.HTMLElement)||n.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||r&&s)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},c.readAsDataURL(e)}else{var d=n.URL||n.webkitURL,u=d.createObjectURL(e);i?i.location=u:location.href=u,i=null,setTimeout((function(){d.revokeObjectURL(u)}),4e4)}});n.saveAs=i.saveAs=i,e.exports=i})?a.apply(t,n):a)||(e.exports=i)},JOQN:function(e,t,o){"use strict";o.r(t),t.default='<mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="example-tree" [style.height]="treeHeight">\n    \x3c!-- This is the tree node template for leaf nodes --\x3e\n    <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>\n        <li class="mat-tree-node">\n            \x3c!-- use a disabled button to provide padding for tree leaf --\x3e\n            <button mat-icon-button disabled></button>\n            <span *ngIf="tieneHijos(node)">{{node.nombre}}</span>\n            <button mat-raised-button type="button" *ngIf="!tieneHijos(node)"\n                (click)="onProductoClicked(node)">{{node.nombre}}</button>\n        </li>\n    </mat-tree-node>\n    \x3c!-- This is the tree node template for expandable nodes --\x3e\n    <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">\n        <li>\n            <div class="mat-tree-node">\n                <button mat-icon-button matTreeNodeToggle [attr.aria-label]="\'toggle \' + node.nombre">\n                    <mat-icon class="mat-icon-rtl-mirror" style="font-size: 24pt !important;">\n                        {{treeControl.isExpanded(node) ? \'expand_more\' : \'chevron_right\'}}\n                    </mat-icon>\n                </button>\n                <span *ngIf="tieneHijos(node)">{{node.nombre}}</span>\n                <button mat-raised-button type="button" *ngIf="!tieneHijos(node)" (click)="onProductoClicked(node);">{{node.nombre}}</button>\n            </div>\n            <ul [class.example-tree-invisible]="!treeControl.isExpanded(node)">\n                <ng-container matTreeNodeOutlet></ng-container>\n            </ul>\n        </li>\n    </mat-nested-tree-node>\n</mat-tree>\n\x3c!--\n<mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="example-tree">\n    \n    <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>\n        <li class="mat-tree-node">\n            \n            <button mat-icon-button disabled></button>\n            {{node.nombre}}\n        </li>\n    </mat-tree-node>\n    \n    <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">\n        <li>\n            <div class="mat-tree-node">\n                <button mat-icon-button matTreeNodeToggle [attr.aria-label]="\'toggle \' + node.nombre">\n                    <mat-icon class="mat-icon-rtl-mirror">\n                        {{treeControl.isExpanded(node) ? \'expand_more\' : \'chevron_right\'}}\n                    </mat-icon>\n                </button>\n                {{node.nombre}}\n            </div>\n            <ul [class.example-tree-invisible]="!treeControl.isExpanded(node)">\n                <ng-container matTreeNodeOutlet></ng-container>\n            </ul>\n        </li>\n    </mat-nested-tree-node>\n</mat-tree>\n--\x3e'},KtKg:function(e,t,o){"use strict";o.r(t),t.default="/*\n.mat-grid-list {\n    display: flex;\n    align-items: flex-start !important;\n    vertical-align: top !important;\n }\n*/\n/*\n .mat-grid-tile .mat-figure {\n    align-items: flex-start !important;\n }\n*/\n/*\n ::ng-deep md-grid-tile.mat-grid-tile .mat-figure {\n    align-items: flex-start;  \n    justify-content: flex-start;  \n}\n*/\n/*\nmat-grid-tile >::ng-deep .mat-figure {\n    align-items: flex-start;\n    overflow-y: auto;\n}\n*/"},NRFb:function(e,t,o){"use strict";o.r(t),t.default=""},PySw:function(e,t,o){"use strict";o.r(t),t.default=""},Q1s9:function(e,t,o){"use strict";o.r(t),t.default=""},SOpS:function(e,t,o){"use strict";o.r(t),t.default=""},Vthy:function(e,t,o){"use strict";o.r(t),t.default='<mat-card class="mat-elevation-z4 fullWidth">\n    <mat-card-title>\n        <h4>\n            Egreso{{!!egreso.egreso ? (\' No. \' + egreso.egreso) : \'\'}}\n            <button mat-icon-button type="button" color="accent" (click)="showEgresoForm = true;"\n                *ngIf="!showEgresoForm">\n                <mat-icon class="iconFontSize">expand_more</mat-icon>\n            </button>\n            <button mat-icon-button type="button" color="accent" (click)="showEgresoForm = false;"\n                *ngIf="showEgresoForm">\n                <mat-icon class="iconFontSize">expand_less</mat-icon>\n            </button>\n        </h4>\n    </mat-card-title>\n    <mat-card-content>\n        <form #frmEgreso="ngForm" *ngIf="showEgresoForm" (ngSubmit)="frmEgreso.form.valid && onSubmit()" novalidate>\n            <mat-form-field class="fullWidth">\n                <mat-label>Tipo de movimiento</mat-label>\n                <mat-select name="tipo_movimiento" [(ngModel)]="egreso.tipo_movimiento" required>\n                    <mat-option *ngFor="let tm of tiposMovimiento" [value]="tm.tipo_movimiento">\n                        {{tm.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <input matInput type="date" placeholder="Fecha" name="fecha" [(ngModel)]="egreso.fecha" required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <mat-label>Bodega</mat-label>\n                <mat-select name="bodega" [(ngModel)]="egreso.bodega" required>\n                    <mat-option *ngFor="let bode of bodegas" [value]="bode.bodega">\n                        {{bode.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-checkbox name="traslado" class="fullWidth" [(ngModel)]="+egreso.traslado">\xbfEs traslado?</mat-checkbox>\n            <mat-form-field class="fullWidth">\n                <mat-label>Tipo de movimiento destino</mat-label>\n                <mat-select name="tipo_movimiento_destino" [(ngModel)]="egreso.tipo_movimiento_destino"\n                    [required]="+egreso.traslado == 1">\n                    <mat-option *ngFor="let tmD of tiposMovimiento" [value]="tmD.tipo_movimiento">\n                        {{tmD.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <mat-label>Proveedor</mat-label>\n                <mat-select name="proveedor" [(ngModel)]="egreso.proveedor" [required]="+egreso.traslado == 1">\n                    <mat-option *ngFor="let prov of proveedores" [value]="prov.proveedor">\n                        ({{prov.nit}}) {{prov.razon_social}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <mat-label>Bodega destino</mat-label>\n                <mat-select name="bodega_destino" [(ngModel)]="egreso.bodega_destino"\n                    [required]="+egreso.traslado == 1">\n                    <mat-option *ngFor="let bodeDest of bodegas" [value]="bodeDest.bodega">\n                        {{bodeDest.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <div align="end">\n                <button mat-raised-button type="submit" color="accent" class="btnAccion"\n                    [disabled]="!frmEgreso.form.valid || [2, 3].indexOf(+egreso.estatus_movimiento) >= 0"\n                    *ngIf="saveToDB">\n                    Guardar\n                </button>\n                <button mat-raised-button type="button" color="accent" class="btnAccion" (click)="confirmarEgreso()"\n                    *ngIf="egreso.egreso && detallesEgreso.length > 0"\n                    [disabled]="!frmEgreso.form.valid || [2, 3].indexOf(+egreso.estatus_movimiento) >= 0">Confirmar</button>\n                <button mat-raised-button type="button" color="accent" (click)="resetEgreso()" *ngIf="egreso.egreso">\n                    Nuevo\n                </button>\n            </div>\n        </form>\n    </mat-card-content>\n</mat-card>\n<hr *ngIf="egreso.egreso || !saveToDB" />\n<mat-card class="mat-elevation-z4 fullWidth" *ngIf="egreso.egreso || !saveToDB">\n    <mat-card-title>\n        <h4>\n            Detalle del egreso {{saveToDB ? \'No.\' : \'\'}} {{egreso.egreso}}\n            <button mat-icon-button type="button" color="accent" (click)="showDetalleEgresoForm = true;"\n                *ngIf="!showDetalleEgresoForm">\n                <mat-icon class="iconFontSize">expand_more</mat-icon>\n            </button>\n            <button mat-icon-button type="button" color="accent" (click)="showDetalleEgresoForm = false;"\n                *ngIf="showDetalleEgresoForm">\n                <mat-icon class="iconFontSize">expand_less</mat-icon>\n            </button>\n        </h4>\n    </mat-card-title>\n    <mat-card-content>\n        <form #frmDetalleEgreso="ngForm" *ngIf="showDetalleEgresoForm"\n            (ngSubmit)="frmDetalleEgreso.form.valid && onSubmitDetail()" novalidate>\n            <mat-form-field class="fullWidth">\n                <mat-label>Art\xedculo</mat-label>\n                <mat-select name="articulo" [(ngModel)]="detalleEgreso.articulo" required>\n                    <mat-option *ngFor="let a of articulos" [value]="a.articulo">\n                        {{a.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <mat-label>Presentaci\xf3n</mat-label>\n                <mat-select name="presentacion" [(ngModel)]="detalleEgreso.presentacion" required>\n                    <mat-option *ngFor="let p of presentaciones" [value]="p.presentacion">\n                        {{p.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="esMovil">\n                <input matInput placeholder="Cantidad" name="cantidad" [(ngModel)]="detalleEgreso.cantidad"\n                    (change)="detalleEgreso.precio_total = +detalleEgreso.precio_unitario * +detalleEgreso.cantidad"\n                    required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="numeric"\n                    ng-virtual-keyboard-placeholder="Cantidad" placeholder="Cantidad" name="cantidad"\n                    [(ngModel)]="detalleEgreso.cantidad"\n                    (change)="detalleEgreso.precio_total = +detalleEgreso.precio_unitario * +detalleEgreso.cantidad"\n                    required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="esMovil">\n                <input matInput placeholder="Costo unitario" name="precio_unitario"\n                    [(ngModel)]="detalleEgreso.precio_unitario"\n                    (change)="detalleEgreso.precio_total = +detalleEgreso.precio_unitario * +detalleEgreso.cantidad"\n                    required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="numeric"\n                    ng-virtual-keyboard-placeholder="Costo unitario" placeholder="Costo unitario" name="precio_unitario"\n                    [(ngModel)]="detalleEgreso.precio_unitario"\n                    (change)="detalleEgreso.precio_total = +detalleEgreso.precio_unitario * +detalleEgreso.cantidad"\n                    required>\n            </mat-form-field>\n            <div align="end">\n                <button mat-raised-button type="submit" color="accent" class="btnAccion"\n                    [disabled]="!frmDetalleEgreso.form.valid || [2, 3].indexOf(+egreso.estatus_movimiento) >= 0"\n                    *ngIf="saveToDB">\n                    Guardar\n                </button>\n                <button mat-raised-button type="button" color="accent" (click)="addToDetail()"\n                    [disabled]="!frmDetalleEgreso.form.valid || [2, 3].indexOf(+egreso.estatus_movimiento) >= 0"\n                    *ngIf="!saveToDB">\n                    Nuevo\n                </button>\n                <button mat-raised-button type="button" color="accent" (click)="resetDetalleEgreso()"\n                    *ngIf="detalleEgreso.egreso_detalle">\n                    Nuevo\n                </button>\n            </div>\n        </form>\n        <hr *ngIf="detallesEgreso.length > 0" />\n        <table mat-table [dataSource]="dataSource" class="mat-elevation-z4 full-width"\n            *ngIf="detallesEgreso.length > 0">\n            <ng-container matColumnDef="articulo">\n                <th mat-header-cell *matHeaderCellDef>Art\xedculo</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">\n                    {{saveToDB ? element.articulo.descripcion : getDescripcionArticulo(element.articulo)}}</td>\n            </ng-container>\n            <ng-container matColumnDef="presentacion">\n                <th mat-header-cell *matHeaderCellDef>Presentaci\xf3n</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">\n                    {{saveToDB ? element.presentacion.descripcion : getDescripcionPresentacion(element.presentacion)}}\n                </td>\n            </ng-container>\n            <ng-container matColumnDef="cantidad">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Cantidad</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.cantidad | number:\'1.2-2\'}}</td>\n            </ng-container>\n            <ng-container matColumnDef="precio_unitario">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Costo Unitario</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.precio_unitario | number:\'1.2-2\'}}\n                </td>\n            </ng-container>\n            <ng-container matColumnDef="precio_total">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Costo Total</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.precio_total | number:\'1.2-2\'}}</td>\n            </ng-container>\n            <ng-container matColumnDef="editItem">\n                <th mat-header-cell *matHeaderCellDef>&nbsp;</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">\n                    <button mat-raised-button type="button" color="accent" class="btnAccion"\n                        (click)="getDetalleEgreso(element.egreso, element.egreso_detalle)"\n                        [disabled]="[2, 3].indexOf(+egreso.estatus_movimiento) >= 0" *ngIf="saveToDB">\n                        Editar\n                    </button>\n                    <button mat-raised-button type="button" color="accent" (click)="removeFromDetail(element.articulo)"\n                        [disabled]="[2, 3].indexOf(+egreso.estatus_movimiento) >= 0" *ngIf="!saveToDB">\n                        Eliminar\n                    </button>\n                </td>\n            </ng-container>\n            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>\n            <tr mat-row *matRowDef="let row; columns: displayedColumns;">\n            </tr>\n        </table>\n    </mat-card-content>\n</mat-card>\n<hr *ngIf="egreso.egreso || !saveToDB" />\n<mat-card class="mat-elevation-z4 fullWidth" *ngIf="!saveToDB">\n    <mat-card-title>\n        <h4>\n            Merma {{saveToDB ? \'No.\' : \'\'}} {{egreso.egreso}}\n            <button mat-icon-button type="button" color="accent" (click)="showDetalleEgresoForm = true;"\n                *ngIf="!showDetalleEgresoForm">\n                <mat-icon class="iconFontSize">expand_more</mat-icon>\n            </button>\n            <button mat-icon-button type="button" color="accent" (click)="showDetalleEgresoForm = false;"\n                *ngIf="showDetalleEgresoForm">\n                <mat-icon class="iconFontSize">expand_less</mat-icon>\n            </button>\n        </h4>\n    </mat-card-title>\n    <mat-card-content>\n        <form #frmMerma="ngForm" *ngIf="showDetalleEgresoForm"\n            (ngSubmit)="frmMerma.form.valid && onSubmitDetail()" novalidate>\n            <mat-form-field class="fullWidth">\n                <mat-label>Art\xedculo</mat-label>\n                <mat-select name="articulo" [(ngModel)]="detalleMerma.articulo" required>\n                    <mat-option *ngFor="let a of articulos" [value]="a.articulo">\n                        {{a.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <mat-label>Presentaci\xf3n</mat-label>\n                <mat-select name="presentacion" [(ngModel)]="detalleMerma.presentacion" required>\n                    <mat-option *ngFor="let p of presentaciones" [value]="p.presentacion">\n                        {{p.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="esMovil">\n                <input matInput placeholder="Cantidad" name="cantidad" [(ngModel)]="detalleMerma.cantidad"\n                    (change)="detalleMerma.precio_total = +detalleMerma.precio_unitario * +detalleMerma.cantidad"\n                    required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="numeric"\n                    ng-virtual-keyboard-placeholder="Cantidad" placeholder="Cantidad" name="cantidad"\n                    [(ngModel)]="detalleMerma.cantidad"\n                    (change)="detalleMerma.precio_total = +detalleMerma.precio_unitario * +detalleMerma.cantidad"\n                    required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="esMovil">\n                <input matInput placeholder="Costo unitario" name="precio_unitario"\n                    [(ngModel)]="detalleMerma.precio_unitario"\n                    (change)="detalleMerma.precio_total = +detalleMerma.precio_unitario * +detalleMerma.cantidad"\n                    required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="numeric"\n                    ng-virtual-keyboard-placeholder="Costo unitario" placeholder="Costo unitario" name="precio_unitario"\n                    [(ngModel)]="detalleMerma.precio_unitario"\n                    (change)="detalleMerma.precio_total = +detalleMerma.precio_unitario * +detalleMerma.cantidad"\n                    required>\n            </mat-form-field>\n            <div align="end">\n                <button mat-raised-button type="button" color="accent" (click)="addToDetailMerma()"\n                    [disabled]="!frmMerma.form.valid || [2, 3].indexOf(+egreso.estatus_movimiento) >= 0"\n                    *ngIf="!saveToDB">\n                    Nuevo\n                </button>\n            </div>\n        </form>\n        <hr *ngIf="detallesMerma.length > 0" />\n        <table mat-table [dataSource]="dataSource" class="mat-elevation-z4 full-width"\n            *ngIf="detallesMerma.length > 0">\n            <ng-container matColumnDef="articulo">\n                <th mat-header-cell *matHeaderCellDef>Art\xedculo</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">\n                    {{saveToDB ? element.articulo.descripcion : getDescripcionArticulo(element.articulo)}}</td>\n            </ng-container>\n            <ng-container matColumnDef="presentacion">\n                <th mat-header-cell *matHeaderCellDef>Presentaci\xf3n</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">\n                    {{saveToDB ? element.presentacion.descripcion : getDescripcionPresentacion(element.presentacion)}}\n                </td>\n            </ng-container>\n            <ng-container matColumnDef="cantidad">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Cantidad</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.cantidad | number:\'1.2-2\'}}</td>\n            </ng-container>\n            <ng-container matColumnDef="precio_unitario">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Costo Unitario</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.precio_unitario | number:\'1.2-2\'}}\n                </td>\n            </ng-container>\n            <ng-container matColumnDef="precio_total">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Costo Total</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.precio_total | number:\'1.2-2\'}}</td>\n            </ng-container>\n            <ng-container matColumnDef="editItem">\n                <th mat-header-cell *matHeaderCellDef>&nbsp;</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">\n                    <button mat-raised-button type="button" color="accent" class="btnAccion"\n                        (click)="getDetalleEgreso(element.egreso, element.egreso_detalle)"\n                        [disabled]="[2, 3].indexOf(+egreso.estatus_movimiento) >= 0" *ngIf="saveToDB">\n                        Editar\n                    </button>\n                    <button mat-raised-button type="button" color="accent" (click)="removeFromDetail(element.articulo)"\n                        [disabled]="[2, 3].indexOf(+egreso.estatus_movimiento) >= 0" *ngIf="!saveToDB">\n                        Eliminar\n                    </button>\n                </td>\n            </ng-container>\n            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>\n            <tr mat-row *matRowDef="let row; columns: displayedColumns;">\n            </tr>\n        </table>\n    </mat-card-content>\n</mat-card>'},Wgbk:function(e,t,o){"use strict";o.r(t),t.default='<div>\n    <div *ngIf="!showCategoriasForm">\n        <div align="center">\n            <button mat-button type="button" color="accent" (click)="showCategoriasForm = true; resetCategoria();">\n                <mat-icon class="iconFontSize">expand_more</mat-icon>&nbsp;Categor\xedas y sub-categor\xedas\n            </button>\n        </div>\n    </div>\n    <div *ngIf="showCategoriasForm">\n        <div align="center">\n            <button mat-button type="button" color="accent" (click)="showCategoriasForm = false; resetCategoria();">\n                <mat-icon class="iconFontSize">expand_less</mat-icon>&nbsp;Categor\xedas y sub-categor\xedas\n            </button>\n        </div>\n    </div>\n</div>\n<div *ngIf="showCategoriasForm">\n    <div>\n        <form #frmCategoria="ngForm" novalidate>\n            <mat-form-field class="fullWidth" *ngIf="!editCategoriaMode">\n                <mat-label>Categor\xeda</mat-label>\n                <mat-select name="categoria" [(ngModel)]="categoria" (selectionChange)="onCategoriaSelected($event)">\n                    <mat-option *ngFor="let cat of categorias" [value]="cat">\n                        {{cat.descripcion}}\n                    </mat-option>\n                </mat-select>\n                \x3c!--Inicio de botones para edici\xf3n y nueva--\x3e\n                <button mat-raised-button type="button" matSuffix color="accent" class="btnAccion"\n                    (click)="editCategoriaMode = true;" *ngIf="!editCategoriaMode && +categoria.categoria > 0">\n                    Editar\n                </button>\n                <button mat-raised-button type="button" matSuffix color="accent"\n                    (click)="resetCategoria(); editCategoriaMode = true;" *ngIf="!editCategoriaMode">\n                    Nueva\n                </button>\n                \x3c!--Fin de botones para edici\xf3n y nueva--\x3e\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="esMovil && editCategoriaMode">\n                <input matInput placeholder="Descripcion de la categor\xeda" name="descripcion"\n                    [(ngModel)]="categoria.descripcion" [required]="editCategoriaMode">\n                \x3c!--Inicia botones de guardar y cancelar--\x3e\n                <button mat-raised-button type="button" matSuffix color="accent" class="btnAccion"\n                    (click)="onSubmitCategoria()" [disabled]="!frmCategoria.form.valid" *ngIf="editCategoriaMode">\n                    Guardar\n                </button>\n                <button mat-raised-button type="button" matSuffix color="warn" (click)="resetCategoria()"\n                    *ngIf="editCategoriaMode">\n                    Cancelar\n                </button>\n                \x3c!--Fin de botones de guardar y cancelar--\x3e\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil && editCategoriaMode">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="alphanumeric"\n                    ng-virtual-keyboard-placeholder="Descripcion de la categor\xeda"\n                    placeholder="Descripcion de la categor\xeda" name="descripcion" [(ngModel)]="categoria.descripcion"\n                    [required]="editCategoriaMode">\n                \x3c!--Inicia botones de guardar y cancelar cuando no es m\xf3vil--\x3e\n                <button mat-raised-button type="button" matSuffix color="accent" class="btnAccion"\n                    (click)="onSubmitCategoria()" [disabled]="!frmCategoria.form.valid" *ngIf="editCategoriaMode">\n                    Guardar\n                </button>\n                <button mat-raised-button type="button" matSuffix color="warn" (click)="resetCategoria()"\n                    *ngIf="editCategoriaMode">\n                    Cancelar\n                </button>\n                \x3c!--Fin de botones de guardar y cancelar cuando no es m\xf3vil--\x3e\n            </mat-form-field>\n        </form>\n    </div>\n</div>\n<div *ngIf="showCategoriasForm">\n    <form #frmCategoriaGrupo="ngForm" novalidate>\n        <mat-form-field class="fullWidth">\n            <mat-label>Sub-categor\xeda Padre</mat-label>\n            <mat-select name="categoriaGrupoPadre" [(ngModel)]="categoriaGrupo.categoria_grupo_grupo"\n                (selectionChange)="onSubCategoriaPadreSelected($event)">\n                <mat-option *ngFor="let subcatpadre of categoriasGruposPadre" [value]="subcatpadre.categoria_grupo">\n                    {{subcatpadre.descripcion}}\n                </mat-option>\n            </mat-select>\n        </mat-form-field>\n\n        <mat-form-field class="fullWidth" *ngIf="!editSubCategoriaMode">\n            <mat-label>Sub-categor\xeda</mat-label>\n            <mat-select name="categoriaGrupo" [(ngModel)]="categoriaGrupo"\n                (selectionChange)="onSubCategoriaSelected($event)">\n                <mat-option *ngFor="let subcat of categoriasGrupos" [value]="subcat">\n                    {{subcat.descripcion}}\n                </mat-option>\n            </mat-select>\n            <button mat-raised-button type="button" matSuffix color="accent" class="btnAccion"\n                (click)="editSubCategoriaMode = true;"\n                *ngIf="!editSubCategoriaMode && +categoriaGrupo.categoria_grupo > 0">\n                Editar\n            </button>\n            <button mat-raised-button type="button" matSuffix color="accent"\n                (click)="resetCategoriaGrupo(); editSubCategoriaMode = true;" *ngIf="!editSubCategoriaMode">\n                Nueva\n            </button>\n        </mat-form-field>\n        <mat-form-field class="fullWidth" *ngIf="esMovil && editSubCategoriaMode">\n            <input matInput placeholder="Descripcion de la sub - categor\xeda" name="descripcion"\n                [(ngModel)]="categoriaGrupo.descripcion" [required]="editCategoriaMode">\n        </mat-form-field>\n        <mat-form-field class="fullWidth" *ngIf="!esMovil && editSubCategoriaMode">\n            <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="alphanumeric"\n                ng-virtual-keyboard-placeholder="Descripcion de la sub - categor\xeda"\n                placeholder="Descripcion de la sub - categor\xeda" name="descripcion"\n                [(ngModel)]="categoriaGrupo.descripcion" [required]="editCategoriaMode">\n        </mat-form-field>\n        <mat-checkbox name="descuento" class="fullWidth" [(ngModel)]="+categoriaGrupo.descuento">\xbfAplica Descuento?\n        </mat-checkbox>\n        <mat-form-field class="fullWidth" *ngIf="editSubCategoriaMode">\n            <mat-label>Impresora</mat-label>\n            <mat-select name="impresora" [(ngModel)]="categoriaGrupo.impresora" im>\n                <mat-option *ngFor="let imp of impresoras" [value]="imp.impresora">\n                    {{imp.nombre}}\n                </mat-option>\n            </mat-select>\n            <button mat-raised-button type="button" matSuffix color="accent" class="btnAccion" (click)="onSubmitSubCategoria()"\n                [disabled]="!frmCategoriaGrupo.form.valid" *ngIf="editSubCategoriaMode">\n                Guardar\n            </button>\n            <button mat-raised-button type="button" matSuffix color="warn" (click)="resetCategoriaGrupo()"\n                *ngIf="editSubCategoriaMode">\n                Cancelar\n            </button>\n        </mat-form-field>\n    </form>\n</div>'},YpM4:function(e,t,o){"use strict";o.r(t),t.default=".full-width {\n    width: 100%;\n}\n\n.iconFontSize {\n    font-size: 24pt;\n}"},ZSjk:function(e,t,o){"use strict";o.r(t),t.default=".example-tree-invisible {\n    display: none;\n}\n\n.example-tree ul, .example-tree li {\n    margin-top: 0;\n    margin-bottom: 0;\n    list-style-type: none;\n}\n\n.tabulacion {\n    padding-left: 10px !important;\n}"},aDkJ:function(e,t,o){"use strict";o.r(t),t.default=".fullWidth { width: 100%; }\n.iconFontSize{ font-size: 18pt; }"},f8CZ:function(e,t,o){"use strict";o.r(t),t.default='<div class="row">\n    <div class="col m5 s12">\n        <app-lista-ingreso #lstIngreso (getIngresoEv)="setIngreso($event)"></app-lista-ingreso>\n    </div>\n    <div class="col m7 s12">\n        <app-form-ingreso #frmIngreso [ingreso]="ingreso" (ingresoSavedEv)="refreshIngresoList()"></app-form-ingreso>\n    </div>\n</div>'},fPcv:function(e,t,o){"use strict";o.r(t),t.default='<div class="row">\n    <div class="col m12 s12" style="padding-bottom: 5px !important;">\n        <div align="end">\n            <button mat-raised-button type="button" color="accent" (click)="transformar()">\n                <mat-icon style="font-size: 18pt;">transform</mat-icon>&nbsp;Transformar\n            </button>\n        </div>\n    </div>\n</div>\n<div class="row">\n    <div class="col m12 s12">\n        <app-form-ingreso #frmIngreso [(ingreso)]="ingreso" [saveToDB]="false" (ingresoSavedEv)="doSomething()">\n        </app-form-ingreso>\n    </div>\n</div>\n'},h9cp:function(e,t,o){"use strict";o.r(t),t.default=""},"iQY+":function(e,t,o){"use strict";o.r(t),t.default=".full-width {\n    width: 100%;\n}\n\n.iconFontSize {\n    font-size: 24pt;\n}"},iYQc:function(e,t,o){"use strict";o.r(t),t.default='<div class="row">\n  <div class="col m12 s12">\n    <mat-card class="mat-elevation-z4 fullWidth">\n      <mat-card-title>\n        <h4>Reporte de existencias</h4>\n      </mat-card-title>\n      <mat-card-content>\n        <form (ngSubmit)="onSubmit()" novalidate>\n          <mat-form-field class="fullWidth">\n              <mat-label>Bodega</mat-label>\n              <mat-select name="bodega" [(ngModel)]="params.bodega">\n                  <mat-option *ngFor="let bod of bodegas" [value]="bod.bodega">\n                      {{bod.descripcion}}\n                  </mat-option>\n              </mat-select>\n          </mat-form-field>\n          <mat-form-field class="fullWidth">\n              <mat-label>Sede</mat-label>\n              <mat-select name="sede" [(ngModel)]="params.sede">\n                  <mat-option *ngFor="let sede of sedes" [value]="sede.sede">\n                      {{sede.nombre}}\n                  </mat-option>\n              </mat-select>\n          </mat-form-field>\n          <mat-form-field class="fullWidth">            \n            <input matInput type="date" placeholder="Al" [(ngModel)]="params.fecha" [ngModelOptions]="{standalone: true}" required>\n          </mat-form-field>\n          <div align="end">\n            <button mat-button color="accent" type="submit">GENERAR</button>\n          </div>\n        </form>        \n      </mat-card-content>\n    </mat-card>\n  </div>\n</div>'},qRjx:function(e,t,o){"use strict";o.r(t),t.default='<div class="row">\n    <div class="col m12 s12" style="padding-bottom: 5px !important;">\n        <div align="end">\n            <button mat-raised-button type="button" color="accent" (click)="transformar()">\n                <mat-icon style="font-size: 18pt;">transform</mat-icon>&nbsp;Transformar\n            </button>\n        </div>\n    </div>\n</div>\n<div class="row">\n    <div class="col m6 s12">\n        <app-form-egreso #frmEgreso [(egreso)]="egreso" [saveToDB]="false" (egresoSavedEv)="doSomething()">\n        </app-form-egreso>\n    </div>\n    <div class="col m6 s12">\n        <app-form-ingreso #frmIngreso [(ingreso)]="ingreso" [saveToDB]="false" (ingresoSavedEv)="doSomething()">\n        </app-form-ingreso>\n    </div>\n</div>\n<div class="row">\n\n</div>'},qhgY:function(e,t,o){"use strict";o.r(t),t.default=".full-width {\n    width: 100%;\n}\n\n.iconFontSize {\n    font-size: 24pt;\n}"},qrxf:function(e,t,o){"use strict";o.r(t),t.default='<mat-card class="mat-elevation-z4 fullWidth">\n    <mat-card-content>\n        <mat-form-field>\n            <input matInput (keyup)="applyFilter()" placeholder="Buscar..." [(ngModel)]="txtFiltro" [ngModelOptions]="{standalone: true}">\n        </mat-form-field>\n        <mat-nav-list>\n            <mat-list-item *ngFor="let element of lstEgresosPaged" (click)="getEgreso(element)">\n                <mat-icon mat-list-icon>trending_down</mat-icon>\n                <h5 mat-line>No. {{element.egreso}}</h5><br/>\n                <p mat-line>\n                    Fecha: {{element.fecha | date: \'dd/MM/yyyy\'}}<br/>\n                    Bodega: {{element.bodega.descripcion}}<br/>\n                </p>\n            </mat-list-item>\n        </mat-nav-list>\n        <mat-paginator [length]="length" [pageSize]="pageSize" [pageSizeOptions]="pageSizeOptions" (page)="pageChange($event)" showFirstLastButtons>\n        </mat-paginator>\n    </mat-card-content>\n</mat-card>\n'},rRvq:function(e,t,o){"use strict";o.r(t),t.default='<div class="row">\n    <div class="col m5 s12">\n        <app-categoria-producto (categoriaGrupoSvd)="refreshArticuloList($event)"\n            (onChangeSubCategoriaEv)="setArticuloCategoriaGrupo($event)"></app-categoria-producto>\n        <app-lista-producto #lstProducto [treeHeight]="\'100%\'" (productoClickedEv)="setArticulo($event)">\n        </app-lista-producto>\n    </div>\n    <div class="col m7 s12">\n        <app-form-producto #frmProducto [articulo]="articulo" (articuloSvd)="refreshArticuloList($event)">\n        </app-form-producto>\n    </div>\n</div>'},"sR+E":function(e,t,o){"use strict";o.r(t),t.default=""},u5dX:function(e,t,o){"use strict";o.d(t,"a",(function(){return m}));var a=o("mrSG"),n=o("8Y7J"),i=o("IheW"),r=o("sKxO"),s=o("R5jZ"),l=o("FY0D"),c=o("un/a"),d=o("JIr8"),u=o("Qyje");let m=class{constructor(e,t){this.http=e,this.ls=t,this.usrToken=null,this.srvcErrHndl=new s.a,this.usrToken=this.ls.get(r.a.usrTokenVar)?this.ls.get(r.a.usrTokenVar).token:null}get(e={}){const t={headers:new i.c({Authorization:this.usrToken})};return this.http.get(`${r.a.urlCatalogos}/get_bodega?${u.stringify(e)}`,t).pipe(Object(c.a)(r.a.reintentos),Object(d.a)(this.srvcErrHndl.errorHandler))}};m.ctorParameters=()=>[{type:i.a},{type:l.a}],m=a.b([Object(n.Injectable)({providedIn:"root"})],m)},v3Pe:function(e,t,o){"use strict";o.r(t),t.default='<div class="row">\n    <div class="col m5 s12">\n        <app-lista-egreso #lstEgreso (getEgresoEv)="setEgreso($event)"></app-lista-egreso>\n    </div>\n    <div class="col m7 s12">\n        <app-form-egreso #frmEgreso [egreso]="egreso" (egresoSavedEv)="refreshEgresoList()"></app-form-egreso>\n    </div>\n</div>'},vtFA:function(e,t,o){"use strict";o.r(t);var a=o("mrSG"),n=o("8Y7J"),i=o("SVse"),r=o("IheW"),s=o("s7LF"),l=o("PCNd"),c=o("Q+lL"),d=o("Gi4r"),u=o("HsOI"),m=o("ZwOa"),g=o("igqZ"),p=o("02hT"),h=o("rWV4"),f=o("8rEH"),b=o("JjoW"),v=o("r0V8"),I=o("Fwaw"),y=o("dFDH"),C=o("BzsH"),S=o("gavF"),D=o("FVPZ"),_=o("OIZN"),E=o("s6ns"),k=o("BV1i"),w=o("AaDx"),M=o("Y8tL"),x=o("drcI"),O=o("iInd"),F=o("0T/Q"),T=o("FY0D"),j=o("sKxO"),A=o("wd/R");let W=class{constructor(e){this.ls=e,this.breakpoint=2,this.onWindowResize=e=>{this.breakpoint=e.target.innerWidth<=360?1:2},this.setIngreso=e=>{this.ingreso=e,this.frmIngreso.loadDetalleIngreso(+this.ingreso.ingreso)},this.refreshIngresoList=()=>{this.lstIngresoComponent.loadIngresos()},this.ingreso={ingreso:null,tipo_movimiento:null,fecha:A().format(j.a.dbDateFormat),bodega:null,usuario:this.ls.get(j.a.usrTokenVar).idusr||0,comentario:null,proveedor:null}}ngOnInit(){this.breakpoint=window.innerWidth<=360?1:2}};W.ctorParameters=()=>[{type:T.a}],a.b([Object(n.ViewChild)("lstIngreso",{static:!1})],W.prototype,"lstIngresoComponent",void 0),a.b([Object(n.ViewChild)("frmIngreso",{static:!1})],W.prototype,"frmIngreso",void 0),W=a.b([Object(n.Component)({selector:"app-ingreso",template:a.c(o("f8CZ")).default,styles:[a.c(o("KtKg")).default]})],W);let B=class{constructor(e){this.ls=e,this.setEgreso=e=>{this.egreso=e,this.frmEgreso.loadDetalleEgreso(+this.egreso.egreso)},this.refreshEgresoList=()=>{this.lstEgresoComponent.loadEgresos()},this.egreso={egreso:null,tipo_movimiento:null,bodega:null,fecha:A().format(j.a.dbDateFormat),usuario:this.ls.get(j.a.usrTokenVar).idusr||0,estatus_movimiento:1,traslado:0}}ngOnInit(){}};B.ctorParameters=()=>[{type:T.a}],a.b([Object(n.ViewChild)("lstEgreso",{static:!1})],B.prototype,"lstEgresoComponent",void 0),a.b([Object(n.ViewChild)("frmEgreso",{static:!1})],B.prototype,"frmEgreso",void 0),B=a.b([Object(n.Component)({selector:"app-egreso",template:a.c(o("v3Pe")).default,styles:[a.c(o("SOpS")).default]})],B);var H=o("NGYs");let P=class{constructor(e){this.articuloSrvc=e,this.setArticulo=e=>{this.articuloSrvc.getArticulo({articulo:e.id}).subscribe(e=>{if(e&&e.length>0){let t=e[0];this.articulo={articulo:+t.articulo,categoria_grupo:+t.categoria_grupo.categoria_grupo,presentacion:t.presentacion.presentacion,descripcion:t.descripcion,precio:+t.precio,codigo:t.codigo,produccion:t.produccion},this.frmProductoComponent.loadRecetas(+this.articulo.articulo),this.frmProductoComponent.resetReceta()}})},this.setArticuloCategoriaGrupo=e=>{this.articulo.categoria_grupo=+e,this.frmProductoComponent.setArticuloCategoriaGrupo(+e)},this.refreshArticuloList=e=>{this.lstProductoComponent.loadArbolArticulos()},this.articulo={articulo:null,categoria_grupo:null,presentacion:null,descripcion:null,precio:null,bien_servicio:"B",produccion:0}}ngOnInit(){}};P.ctorParameters=()=>[{type:H.a}],a.b([Object(n.ViewChild)("lstProducto",{static:!1})],P.prototype,"lstProductoComponent",void 0),a.b([Object(n.ViewChild)("frmProducto",{static:!1})],P.prototype,"frmProductoComponent",void 0),P=a.b([Object(n.Component)({selector:"app-producto",template:a.c(o("rRvq")).default,styles:[a.c(o("Q1s9")).default]})],P);var R=o("R5jZ"),z=o("un/a"),$=o("JIr8");let q=class{constructor(e,t){this.http=e,this.ls=t,this.conversorUrl="conversor",this.usrToken=null,this.srvcErrHndl=new R.a,this.usrToken=this.ls.get(j.a.usrTokenVar)?this.ls.get(j.a.usrTokenVar).token:null}transformar(e){const t={headers:new r.c({Authorization:this.usrToken})};return this.http.post(`${j.a.urlWms}/${this.conversorUrl}/transformar`,e,t).pipe(Object(z.a)(j.a.reintentos),Object($.a)(this.srvcErrHndl.errorHandler))}producir(e){const t={headers:new r.c({Authorization:this.usrToken})};return this.http.post(`${j.a.urlWms}/${this.conversorUrl}/producir`,e,t).pipe(Object(z.a)(j.a.reintentos),Object($.a)(this.srvcErrHndl.errorHandler))}};q.ctorParameters=()=>[{type:r.a},{type:T.a}],q=a.b([Object(n.Injectable)({providedIn:"root"})],q);let G=class{constructor(e,t,o){this.ls=e,this._snackBar=t,this.transformacionSrvc=o,this.mermaDetalle=[],this.showMerma=!0,this.transformar=()=>{this.egreso=this.frmEgreso.egreso,this.ingreso=this.frmIngreso.ingreso,this.transformacion={egreso:{tipo_movimiento:this.egreso.tipo_movimiento,fecha:this.egreso.fecha,proveedor:this.ingreso.proveedor,bodega:this.egreso.bodega,usuario:this.egreso.usuario,estatus_movimiento:this.egreso.estatus_movimiento,bodega_destino:this.egreso.bodega_destino,tipo_movimiento_destino:this.egreso.tipo_movimiento_destino,detalle:[]},ingreso:{tipo_movimiento:this.ingreso.tipo_movimiento,fecha:this.ingreso.fecha,proveedor:this.ingreso.proveedor,bodega:this.ingreso.bodega,usuario:this.ingreso.usuario,bodega_origen:this.ingreso.bodega_origen,comentario:this.ingreso.comentario,detalle:[]},merma:[]},this.frmEgreso.detallesMerma.forEach(e=>this.transformacion.merma.push({articulo:e.articulo,cantidad:e.cantidad,precio_unitario:e.precio_unitario,precio_total:e.precio_total,presentacion:e.presentacion})),this.frmEgreso.detallesEgreso.forEach(e=>this.transformacion.egreso.detalle.push({articulo:e.articulo,cantidad:e.cantidad,precio_unitario:e.precio_unitario,precio_total:e.precio_total,presentacion:e.presentacion})),this.frmIngreso.detallesIngreso.forEach(e=>this.transformacion.ingreso.detalle.push({articulo:e.articulo,cantidad:e.cantidad,precio_unitario:e.precio_unitario,precio_total:e.precio_total,presentacion:e.presentacion})),this.transformacion.egreso&&this.transformacion.egreso.detalle&&this.transformacion.egreso.detalle.length>0&&this.transformacion.ingreso&&this.transformacion.ingreso.detalle&&this.transformacion.ingreso.detalle.length>0?this.transformacionSrvc.transformar(this.transformacion).subscribe(e=>{e.exito?(this.frmEgreso.resetEgreso(),this.frmEgreso.detallesEgreso=[],this.frmIngreso.resetIngreso(),this.frmIngreso.detallesIngreso=[],this._snackBar.open("Transformaci\xf3n generada con \xe9xito...","Transformaci\xf3n",{duration:5e3})):this._snackBar.open(`ERROR: ${e.mensaje}`,"Transformaci\xf3n",{duration:3e3})}):this._snackBar.open("Faltan datos necesario. Favor complete los datos e intente de nuevo.","Transformaci\xf3n",{duration:3e3})}}ngOnInit(){this.egreso={egreso:null,tipo_movimiento:null,bodega:null,fecha:A().format(j.a.dbDateFormat),usuario:this.ls.get(j.a.usrTokenVar).idusr||0,estatus_movimiento:1,traslado:0},this.ingreso={ingreso:null,tipo_movimiento:null,fecha:A().format(j.a.dbDateFormat),bodega:null,usuario:this.ls.get(j.a.usrTokenVar).idusr||0,comentario:null,proveedor:null}}doSomething(){}};G.ctorParameters=()=>[{type:T.a},{type:y.a},{type:q}],a.b([Object(n.ViewChild)("frmEgreso",{static:!1})],G.prototype,"frmEgreso",void 0),a.b([Object(n.ViewChild)("frmIngreso",{static:!1})],G.prototype,"frmIngreso",void 0),G=a.b([Object(n.Component)({selector:"app-transformacion",template:a.c(o("qRjx")).default,styles:[a.c(o("PySw")).default]})],G);var V=o("FHMA"),N=o("IHy4"),U=o("u5dX"),L=o("Iab2");let Y=class{constructor(e,t,o,a){this.snackBar=e,this.pdfServicio=t,this.sedeSrvc=o,this.bodegaSrvc=a,this.bodegas=[],this.sedes=[],this.params={},this.titulo="Existencias",this.getSede=(e={})=>{this.sedeSrvc.get(e).subscribe(e=>{this.sedes=e})},this.getBodega=(e={})=>{this.bodegaSrvc.get(e).subscribe(e=>{this.bodegas=e})}}ngOnInit(){this.getSede(),this.getBodega()}onSubmit(){this.pdfServicio.getReporteExistencia(this.params).subscribe(e=>{if(e){const t=new Blob([e],{type:"application/pdf"});Object(L.saveAs)(t,`${this.titulo}.pdf`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})}};Y.ctorParameters=()=>[{type:y.a},{type:V.a},{type:N.a},{type:U.a}],Y=a.b([Object(n.Component)({selector:"app-existencias",template:a.c(o("iYQc")).default,styles:[a.c(o("sR+E")).default]})],Y);let J=class{constructor(e,t,o,a,n){this.snackBar=e,this.pdfServicio=t,this.sedeSrvc=o,this.bodegaSrvc=a,this.articuloSrvc=n,this.bodegas=[],this.sedes=[],this.articulos=[],this.params={},this.titulo="Kardex",this.getSede=(e={})=>{this.sedeSrvc.get(e).subscribe(e=>{this.sedes=e})},this.getArticulo=(e={})=>{this.articuloSrvc.getArticulos(e).subscribe(e=>{this.articulos=e})},this.getBodega=(e={})=>{this.bodegaSrvc.get(e).subscribe(e=>{this.bodegas=e})}}ngOnInit(){this.getSede(),this.getBodega(),this.getArticulo()}onSubmit(){this.pdfServicio.getReporteKardex(this.params).subscribe(e=>{if(e){const t=new Blob([e],{type:"application/pdf"});Object(L.saveAs)(t,`${this.titulo}.pdf`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})}};J.ctorParameters=()=>[{type:y.a},{type:V.a},{type:N.a},{type:U.a},{type:H.a}],J=a.b([Object(n.Component)({selector:"app-kardex",template:a.c(o("CIKf")).default,styles:[a.c(o("NRFb")).default]})],J);let Q=class{constructor(e,t,o){this.ls=e,this._snackBar=t,this.transformacionSrvc=o,this.transformar=()=>{this.ingreso=this.frmIngreso.ingreso,this.produccion={tipo_movimiento:this.ingreso.tipo_movimiento,fecha:this.ingreso.fecha,proveedor:this.ingreso.proveedor,bodega:this.ingreso.bodega,usuario:this.ingreso.usuario,bodega_origen:this.ingreso.bodega_origen,comentario:this.ingreso.comentario,detalle:[]},this.frmIngreso.detallesIngreso.forEach(e=>this.produccion.detalle.push({articulo:e.articulo,cantidad:e.cantidad,precio_unitario:e.precio_unitario,precio_total:e.precio_total,presentacion:e.presentacion})),this.produccion&&this.produccion.detalle&&this.produccion.detalle.length>0?this.transformacionSrvc.producir(this.produccion).subscribe(e=>{e.exito?(this.frmIngreso.resetIngreso(),this.frmIngreso.detallesIngreso=[],this._snackBar.open("Producto generado con \xe9xito...","Producci\xf3n",{duration:5e3})):this._snackBar.open(`ERROR: ${e.mensaje}`,"Producci\xf3n",{duration:3e3})}):this._snackBar.open("Faltan datos necesario. Favor complete los datos e intente de nuevo.","Transformaci\xf3n",{duration:3e3})}}ngOnInit(){this.ingreso={ingreso:null,tipo_movimiento:null,fecha:A().format(j.a.dbDateFormat),bodega:null,usuario:this.ls.get(j.a.usrTokenVar).idusr||0,comentario:null,proveedor:null}}};Q.ctorParameters=()=>[{type:T.a},{type:y.a},{type:q}],a.b([Object(n.ViewChild)("frmIngreso",{static:!1})],Q.prototype,"frmIngreso",void 0),Q=a.b([Object(n.Component)({selector:"app-produccion",template:a.c(o("fPcv")).default,styles:[a.c(o("h9cp")).default]})],Q);const K=[{path:"ingresos",component:W,canActivate:[F.a]},{path:"egresos",component:B,canActivate:[F.a]},{path:"articulos",component:P,canActivate:[F.a]},{path:"transformaciones",component:G,canActivate:[F.a]},{path:"rptexistencia",component:Y,canActivate:[F.a]},{path:"rptkardex",component:J,canActivate:[F.a]},{path:"produccion",component:Q,canActivate:[F.a]},{path:"**",redirectTo:"/admin/dashboard",pathMatch:"full"}];let Z=class{};Z=a.b([Object(n.NgModule)({imports:[O.b.forChild(K)],exports:[O.b]})],Z);var X=o("DkaU");let ee=class{constructor(e,t){this.ls=e,this.articuloSrvc=t,this.treeHeight="450px",this.productoClickedEv=new n.EventEmitter,this.treeControl=new X.j(e=>e.hijos),this.dataSource=new w.b,this.hasChild=(e,t)=>!!t.hijos&&t.hijos.length>0,this.tieneHijos=e=>!!e.hijos&&e.hijos.length>0}ngOnInit(){this.loadArbolArticulos()}onProductoClicked(e){this.productoClickedEv.emit(e)}loadArbolArticulos(){this.articuloSrvc.getArbolArticulos(this.ls.get(j.a.usrTokenVar).sede||0).subscribe(e=>{e&&(this.arbol=this.articuloSrvc.convertToArbolNodoProducto(e),this.dataSource.data=this.arbol)})}};ee.ctorParameters=()=>[{type:T.a},{type:H.a}],a.b([Object(n.Input)()],ee.prototype,"treeHeight",void 0),a.b([Object(n.Output)()],ee.prototype,"productoClickedEv",void 0),ee=a.b([Object(n.Component)({selector:"app-lista-producto",template:a.c(o("JOQN")).default,styles:[a.c(o("ZSjk")).default]})],ee);var te=o("Qyje");let oe=class{constructor(e,t){this.http=e,this.ls=t,this.ingresoUrl="ingreso",this.usrToken=null,this.srvcErrHndl=new R.a,this.usrToken=this.ls.get(j.a.usrTokenVar)?this.ls.get(j.a.usrTokenVar).token:null}get(e={}){const t={headers:new r.c({Authorization:this.usrToken})};return this.http.get(`${j.a.urlWms}/${this.ingresoUrl}/buscar_ingreso?${te.stringify(e)}`,t).pipe(Object(z.a)(j.a.reintentos),Object($.a)(this.srvcErrHndl.errorHandler))}save(e){const t={headers:new r.c({Authorization:this.usrToken})};return this.http.post(`${j.a.urlWms}/${this.ingresoUrl}/guardar${+e.ingreso>0?"/"+e.ingreso:""}`,e,t).pipe(Object(z.a)(j.a.reintentos),Object($.a)(this.srvcErrHndl.errorHandler))}getDetalle(e,t={}){const o={headers:new r.c({Authorization:this.usrToken})};return this.http.get(`${j.a.urlWms}/${this.ingresoUrl}/buscar_detalle/${e}?${te.stringify(t)}`,o).pipe(Object(z.a)(j.a.reintentos),Object($.a)(this.srvcErrHndl.errorHandler))}saveDetalle(e){const t={headers:new r.c({Authorization:this.usrToken})};return this.http.post(`${j.a.urlWms}/${this.ingresoUrl}/guardar_detalle/${e.ingreso}${+e.ingreso_detalle>0?"/"+e.ingreso_detalle:""}`,e,t).pipe(Object(z.a)(j.a.reintentos),Object($.a)(this.srvcErrHndl.errorHandler))}};oe.ctorParameters=()=>[{type:r.a},{type:T.a}],oe=a.b([Object(n.Injectable)({providedIn:"root"})],oe);let ae=class{constructor(e){this.ingresoSrvc=e,this.getIngresoEv=new n.EventEmitter,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadIngresos=()=>{this.ingresoSrvc.get().subscribe(e=>{e&&e.length>0&&(this.lstIngresos=e,this.applyFilter())})},this.getIngreso=e=>{this.getIngresoEv.emit({ingreso:e.ingreso,tipo_movimiento:e.tipo_movimiento.tipo_movimiento,fecha:e.fecha,bodega_origen:e.bodega_origen&&e.bodega_origen.bodega?e.bodega_origen.bodega:null,bodega:e.bodega.bodega,usuario:e.usuario.usuario,comentario:e.comentario,proveedor:e.proveedor.proveedor})},this.pageChange=e=>{this.pageSize=e.pageSize,this.pageIndex=e.pageIndex,this.applyFilter()}}ngOnInit(){this.loadIngresos()}applyFilter(){if(this.txtFiltro.length>0){const e=Object(j.b)(this.lstIngresos,this.txtFiltro);this.length=e.length,this.lstIngresosPaged=Object(j.c)(e,this.pageSize,this.pageIndex+1)}else this.length=this.lstIngresos.length,this.lstIngresosPaged=Object(j.c)(this.lstIngresos,this.pageSize,this.pageIndex+1)}};ae.ctorParameters=()=>[{type:oe}],a.b([Object(n.Output)()],ae.prototype,"getIngresoEv",void 0),ae=a.b([Object(n.Component)({selector:"app-lista-ingreso",template:a.c(o("x2BN")).default,styles:[a.c(o("5bcq")).default]})],ae);var ne=o("3e6T"),ie=o("50cD"),re=o("C5NV");let se=class{constructor(e,t,o,a,i,r,s,l){this._snackBar=e,this.ls=t,this.ingresoSrvc=o,this.proveedorSrvc=a,this.tipoMovimientoSrvc=i,this.bodegaSrvc=r,this.articuloSrvc=s,this.presentacinSrvc=l,this.saveToDB=!0,this.ingresoSavedEv=new n.EventEmitter,this.showIngresoForm=!0,this.showDetalleIngresoForm=!0,this.detallesIngreso=[],this.displayedColumns=["articulo","presentacion","cantidad","costo_unitario","costo_total","deleteItem"],this.tiposMovimiento=[],this.proveedores=[],this.bodegas=[],this.articulos=[],this.presentaciones=[],this.esMovil=!1,this.loadTiposMovimiento=()=>{this.tipoMovimientoSrvc.get().subscribe(e=>{e&&(this.tiposMovimiento=e)})},this.loadProveedores=()=>{this.proveedorSrvc.get().subscribe(e=>{e&&(this.proveedores=e)})},this.loadBodegas=()=>{this.bodegaSrvc.get({sede:+this.ls.get(j.a.usrTokenVar).sede||0}).subscribe(e=>{e&&(this.bodegas=e)})},this.loadPresentaciones=()=>{this.presentacinSrvc.get().subscribe(e=>{e&&(this.presentaciones=e)})},this.resetIngreso=()=>{this.ingreso={ingreso:null,tipo_movimiento:null,fecha:A().format(j.a.dbDateFormat),bodega:null,usuario:this.ls.get(j.a.usrTokenVar).idusr||0,comentario:null,proveedor:null,estatus_movimiento:1},this.resetDetalleIngreso()},this.onSubmit=()=>{this.ingresoSrvc.save(this.ingreso).subscribe(e=>{this.ingresoSavedEv.emit(),this.resetIngreso()})},this.loadArticulos=()=>{this.articuloSrvc.getArticulos().subscribe(e=>{e&&(this.articulos=e)})},this.resetDetalleIngreso=()=>this.detalleIngreso={ingreso_detalle:null,ingreso:this.ingreso.ingreso?this.ingreso.ingreso:null,articulo:null,cantidad:null,precio_unitario:null,precio_total:null,presentacion:0},this.loadDetalleIngreso=(e=+this.ingreso.ingreso)=>{this.ingresoSrvc.getDetalle(e,{ingreso:e}).subscribe(e=>{e&&(this.detallesIngreso=e,this.updateTableDataSource())})},this.getDetalleIngreso=(e=+this.ingreso.ingreso,t)=>{this.ingresoSrvc.getDetalle(e,{ingreso_detalle:t}).subscribe(e=>{e&&(this.detalleIngreso={ingreso_detalle:e[0].ingreso_detalle,ingreso:e[0].ingreso,articulo:e[0].articulo.articulo,cantidad:+e[0].cantidad,precio_unitario:+e[0].precio_unitario,precio_total:+e[0].precio_total,presentacion:e[0].presentacion.presentacion},this.showDetalleIngresoForm=!0)})},this.onSubmitDetail=()=>{this.detalleIngreso.ingreso=this.ingreso.ingreso,this.detalleIngreso.precio_total=+this.detalleIngreso.cantidad*+this.detalleIngreso.precio_unitario,this.ingresoSrvc.saveDetalle(this.detalleIngreso).subscribe(e=>{e&&(this.loadDetalleIngreso(),this.resetDetalleIngreso())})},this.addToDetail=()=>{this.detallesIngreso.push(this.detalleIngreso),this.resetDetalleIngreso(),this.updateTableDataSource()},this.removeFromDetail=e=>this.detallesIngreso.splice(this.detallesIngreso.findIndex(t=>+t.articulo==+e),1),this.getDescripcionArticulo=e=>this.articulos.find(t=>+t.articulo==+e).descripcion||"",this.getDescripcionPresentacion=e=>this.presentaciones.find(t=>+t.presentacion==+e).descripcion||"",this.updateTableDataSource=()=>this.dataSource=new f.a(this.detallesIngreso),this.eliminarArticulo=e=>{this.detallesIngreso.splice(this.detallesIngreso.findIndex(t=>t.ingreso_detalle===e.ingreso_detalle),1),this.updateTableDataSource()}}ngOnInit(){this.esMovil=this.ls.get(j.a.usrTokenVar).enmovil||!1,this.resetIngreso(),this.loadTiposMovimiento(),this.loadProveedores(),this.loadBodegas(),this.loadArticulos(),this.loadPresentaciones()}};se.ctorParameters=()=>[{type:y.a},{type:T.a},{type:oe},{type:ie.a},{type:ne.a},{type:U.a},{type:H.a},{type:re.a}],a.b([Object(n.Input)()],se.prototype,"ingreso",void 0),a.b([Object(n.Input)()],se.prototype,"saveToDB",void 0),a.b([Object(n.Output)()],se.prototype,"ingresoSavedEv",void 0),se=a.b([Object(n.Component)({selector:"app-form-ingreso",template:a.c(o("0Uhh")).default,styles:[a.c(o("YpM4")).default]})],se);var le=o("pJXi"),ce=o("IJgu");let de=class{constructor(e,t,o,a,i,r){this.dialog=e,this.snackBar=t,this.ls=o,this.articuloSrvc=a,this.medidaSrvc=i,this.presentacionSrvc=r,this.articuloSvd=new n.EventEmitter,this.showArticuloForm=!0,this.medidas=[],this.presentaciones=[],this.articulos=[],this.recetas=[],this.showDetalleForm=!0,this.displayedColumns=["articulo","cantidad","medida","editItem"],this.esMovil=!1,this.resetArticulo=()=>{this.articulo={articulo:null,categoria_grupo:this.articulo.categoria_grupo,presentacion:null,descripcion:null,precio:null,bien_servicio:"B",produccion:0},this.resetReceta()},this.setArticuloCategoriaGrupo=e=>this.articulo.categoria_grupo=+e,this.onSubmit=()=>{this.articuloSrvc.saveArticulo(this.articulo).subscribe(e=>{e.exito?(this.articuloSvd.emit(),this.resetArticulo(),this.articulo=e.articulo,this.loadArticulos(),this.snackBar.open("Articulo guardado con \xe9xito...","Articulo",{duration:3e3})):this.snackBar.open(`ERROR: ${e.mensaje}`,"Articulo",{duration:3e3})})},this.loadMedidas=()=>{this.medidaSrvc.get().subscribe(e=>{e&&(this.medidas=e)})},this.loadPresentaciones=()=>{this.presentacionSrvc.get().subscribe(e=>{e&&(this.presentaciones=e)})},this.loadArticulos=()=>{this.articuloSrvc.getArticulos().subscribe(e=>{e&&(this.articulos=e)})},this.resetReceta=()=>{this.receta={articulo_detalle:null,receta:this.articulo.articulo||0,racionable:0,articulo:null,cantidad:1,medida:null,anulado:0},this.recetas=[],this.updateTableDataSource()},this.loadRecetas=(e=+this.articulo.articulo)=>{this.articuloSrvc.getArticuloDetalle(+e,{receta:+e}).subscribe(e=>{e&&(this.recetas=e,this.updateTableDataSource())})},this.getReceta=(e=+this.articulo.articulo,t)=>{this.articuloSrvc.getArticuloDetalle(e,{articulo_detalle:t}).subscribe(e=>{e&&(this.receta={articulo_detalle:e[0].articulo_detalle,receta:e[0].receta.articulo,racionable:e[0].articulo.articulo,articulo:e[0].articulo.articulo,cantidad:+e[0].cantidad,medida:e[0].medida.medida,anulado:e[0].anulado||0},this.showDetalleForm=!0)})},this.eliminaReceta=e=>{this.dialog.open(ce.a,{maxWidth:"400px",data:new ce.b("Eliminar detalle",`\xbfDesea eliminar '${e.cantidad} de ${e.articulo.descripcion}' de la receta?`,"S\xed","No")}).afterClosed().subscribe(t=>{t&&(e.anulado=1,this.articuloSrvc.saveArticuloDetalle(e).subscribe(e=>{this.loadRecetas(),this.resetReceta()}))})},this.onSubmitDetail=()=>{this.receta.receta=this.articulo.articulo,this.articuloSrvc.saveArticuloDetalle(this.receta).subscribe(e=>{e&&(e.exito?(this.loadRecetas(),this.resetReceta()):this.snackBar.open(`ERROR: ${e.mensaje}`,"Articulo",{duration:3e3}))})},this.updateTableDataSource=()=>this.dataSource=new f.a(this.recetas)}ngOnInit(){this.esMovil=this.ls.get(j.a.usrTokenVar).enmovil||!1,this.resetArticulo(),this.loadMedidas(),this.loadArticulos(),this.loadPresentaciones()}};de.ctorParameters=()=>[{type:E.b},{type:y.a},{type:T.a},{type:H.a},{type:le.a},{type:re.a}],a.b([Object(n.Input)()],de.prototype,"articulo",void 0),a.b([Object(n.Output)()],de.prototype,"articuloSvd",void 0),de=a.b([Object(n.Component)({selector:"app-form-producto",template:a.c(o("66Qk")).default,styles:[a.c(o("qhgY")).default]})],de);let ue=class{constructor(e,t,o){this._snackBar=e,this.ls=t,this.articuloSrvc=o,this.categoriaGrupoSvd=new n.EventEmitter,this.onChangeSubCategoriaEv=new n.EventEmitter,this.categorias=[],this.categoriasGruposPadre=[],this.categoriasGrupos=[],this.editCategoriaMode=!1,this.editSubCategoriaMode=!1,this.showCategoriasForm=!1,this.esMovil=!1,this.impresoras=[],this.resetCategoria=()=>{this.categoria={categoria:null,sede:this.ls.get(j.a.usrTokenVar).sede||0,descripcion:null},this.resetCategoriaGrupo(),this.editCategoriaMode=!1},this.resetCategoriaGrupo=()=>{this.categoriaGrupo={categoria_grupo:null,categoria:this.categoria.categoria,categoria_grupo_grupo:null,descripcion:null,receta:0,impresora:null,descuento:0,antecesores:null},this.editSubCategoriaMode=!1},this.loadCategorias=()=>{this.articuloSrvc.getCategorias({sede:+this.ls.get(j.a.usrTokenVar).sede||0}).subscribe(e=>{e&&(this.categorias=e)})},this.onCategoriaSelected=e=>this.loadSubCategorias(+e.value.categoria),this.loadSubCategorias=e=>{this.articuloSrvc.getCategoriasGrupos({categoria:+e}).subscribe(e=>{e&&(this.categoriasGruposPadre=this.articuloSrvc.adaptCategoriaGrupoResponse(e),this.categoriasGrupos=this.categoriasGruposPadre)})},this.loadImpresoras=()=>{this.articuloSrvc.getImpresoras({sede:+this.ls.get(j.a.usrTokenVar).sede||0}).subscribe(e=>{e&&(this.impresoras=e)})},this.onSubCategoriaPadreSelected=e=>this.loadSubCategoriasSubcategorias(+e.value),this.loadSubCategoriasSubcategorias=e=>{this.articuloSrvc.getCategoriasGrupos({categoria_grupo_grupo:e}).subscribe(e=>{e&&(this.categoriasGrupos=this.articuloSrvc.adaptCategoriaGrupoResponse(e))})},this.onSubmitCategoria=()=>{this.articuloSrvc.saveCategoria(this.categoria).subscribe(e=>{e.exito?(this.editCategoriaMode=!1,this.resetCategoria(),this.loadCategorias(),this.categoriaGrupoSvd.emit(),this._snackBar.open("Grabada con \xe9xito.","Categor\xeda",{duration:5e3})):this._snackBar.open(`ERROR: ${e.mensaje}`,"Categor\xeda",{duration:5e3})})},this.onSubCategoriaSelected=e=>this.onChangeSubCategoriaEv.emit(+e.value.categoria_grupo),this.onSubmitSubCategoria=()=>{this.articuloSrvc.saveCategoriaGrupo(this.categoriaGrupo).subscribe(e=>{e.exito?(this.resetCategoriaGrupo(),this.loadSubCategorias(+this.categoria.categoria),this.categoriaGrupoSvd.emit(),this._snackBar.open("Grabada con \xe9xito.","Sub - Categor\xeda",{duration:5e3})):this._snackBar.open(`ERROR: ${e.mensaje}`,"Sub - Categor\xeda",{duration:5e3})})}}ngOnInit(){this.esMovil=this.ls.get(j.a.usrTokenVar).enmovil||!1,this.resetCategoria(),this.loadCategorias(),this.loadImpresoras()}};ue.ctorParameters=()=>[{type:y.a},{type:T.a},{type:H.a}],a.b([Object(n.Output)()],ue.prototype,"categoriaGrupoSvd",void 0),a.b([Object(n.Output)()],ue.prototype,"onChangeSubCategoriaEv",void 0),ue=a.b([Object(n.Component)({selector:"app-categoria-producto",template:a.c(o("Wgbk")).default,styles:[a.c(o("aDkJ")).default]})],ue);let me=class{constructor(e,t){this.http=e,this.ls=t,this.egresoUrl="egreso",this.usrToken=null,this.srvcErrHndl=new R.a,this.usrToken=this.ls.get(j.a.usrTokenVar)?this.ls.get(j.a.usrTokenVar).token:null}get(e={}){const t={headers:new r.c({Authorization:this.usrToken})};return this.http.get(`${j.a.urlWms}/${this.egresoUrl}/buscar_egreso?${te.stringify(e)}`,t).pipe(Object(z.a)(j.a.reintentos),Object($.a)(this.srvcErrHndl.errorHandler))}save(e){const t={headers:new r.c({Authorization:this.usrToken})};return this.http.post(`${j.a.urlWms}/${this.egresoUrl}/guardar${+e.egreso>0?"/"+e.egreso:""}`,e,t).pipe(Object(z.a)(j.a.reintentos),Object($.a)(this.srvcErrHndl.errorHandler))}getDetalle(e,t={}){const o={headers:new r.c({Authorization:this.usrToken})};return this.http.get(`${j.a.urlWms}/${this.egresoUrl}/buscar_detalle/${e}?${te.stringify(t)}`,o).pipe(Object(z.a)(j.a.reintentos),Object($.a)(this.srvcErrHndl.errorHandler))}saveDetalle(e){const t={headers:new r.c({Authorization:this.usrToken})};return this.http.post(`${j.a.urlWms}/${this.egresoUrl}/guardar_detalle/${e.egreso}${+e.egreso_detalle>0?"/"+e.egreso_detalle:""}`,e,t).pipe(Object(z.a)(j.a.reintentos),Object($.a)(this.srvcErrHndl.errorHandler))}};me.ctorParameters=()=>[{type:r.a},{type:T.a}],me=a.b([Object(n.Injectable)({providedIn:"root"})],me);let ge=class{constructor(e){this.egresoSrvc=e,this.getEgresoEv=new n.EventEmitter,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadEgresos=()=>{this.egresoSrvc.get().subscribe(e=>{e&&e.length>0&&(this.lstEgresos=e,this.applyFilter())})},this.getEgreso=e=>{this.getEgresoEv.emit({egreso:e.egreso,tipo_movimiento:e.tipo_movimiento.tipo_movimiento,bodega:e.bodega.bodega,fecha:e.fecha,usuario:e.usuario.usuario,estatus_movimiento:e.estatus_movimiento||1,traslado:e.traslado||0})},this.pageChange=e=>{this.pageSize=e.pageSize,this.pageIndex=e.pageIndex,this.applyFilter()}}ngOnInit(){this.loadEgresos()}applyFilter(){if(this.txtFiltro.length>0){const e=Object(j.b)(this.lstEgresos,this.txtFiltro);this.length=e.length,this.lstEgresosPaged=Object(j.c)(e,this.pageSize,this.pageIndex+1)}else this.length=this.lstEgresos.length,this.lstEgresosPaged=Object(j.c)(this.lstEgresos,this.pageSize,this.pageIndex+1)}};ge.ctorParameters=()=>[{type:me}],a.b([Object(n.Output)()],ge.prototype,"getEgresoEv",void 0),ge=a.b([Object(n.Component)({selector:"app-lista-egreso",template:a.c(o("qrxf")).default,styles:[a.c(o("yQYf")).default]})],ge);let pe=class{constructor(e,t,o,a,i,r,s,l,c){this._snackBar=e,this.ls=t,this.egresoSrvc=o,this.tipoMovimientoSrvc=a,this.bodegaSrvc=i,this.articuloSrvc=r,this.proveedorSrvc=s,this.transformacionSrvc=l,this.presentacionSrvc=c,this.saveToDB=!0,this.egresoSavedEv=new n.EventEmitter,this.showEgresoForm=!0,this.showDetalleEgresoForm=!0,this.detallesEgreso=[],this.detallesMerma=[],this.displayedColumns=["articulo","presentacion","cantidad","precio_unitario","precio_total","editItem"],this.tiposMovimiento=[],this.bodegas=[],this.articulos=[],this.proveedores=[],this.presentaciones=[],this.esMovil=!1,this.loadTiposMovimiento=()=>{this.tipoMovimientoSrvc.get().subscribe(e=>{e&&(this.tiposMovimiento=e)})},this.loadBodegas=()=>{this.bodegaSrvc.get({sede:this.ls.get(j.a.usrTokenVar).sede||0}).subscribe(e=>{e&&(this.bodegas=e)})},this.loadProveedores=()=>{this.proveedorSrvc.get().subscribe(e=>{e&&(this.proveedores=e)})},this.loadPresentaciones=()=>{this.presentacionSrvc.get().subscribe(e=>{e&&(this.presentaciones=e)})},this.resetEgreso=()=>{this.egreso={egreso:null,tipo_movimiento:null,bodega:null,fecha:A().format(j.a.dbDateFormat),usuario:this.ls.get(j.a.usrTokenVar).idusr||0,estatus_movimiento:1,traslado:0},this.resetDetalleEgreso(),this.resetDetalleMerma()},this.onSubmit=()=>{this.egresoSrvc.save(this.egreso).subscribe(e=>{e.exito&&(this.egresoSavedEv.emit(),this.resetEgreso(),this.egreso={egreso:e.egreso.egreso,tipo_movimiento:e.egreso.tipo_movimiento,fecha:e.egreso.fecha,bodega:e.egreso.bodega,creacion:e.egreso.creacion,usuario:e.egreso.usuario,estatus_movimiento:e.egreso.estatus_movimiento,traslado:e.egreso.traslado},this.loadDetalleEgreso(this.egreso.egreso))})},this.confirmarEgreso=()=>{this.egreso.estatus_movimiento=2,this.onSubmit()},this.loadArticulos=()=>{this.articuloSrvc.getArticulos().subscribe(e=>{e&&(this.articulos=e)})},this.resetDetalleEgreso=()=>this.detalleEgreso={egreso_detalle:null,egreso:this.egreso.egreso?this.egreso.egreso:null,articulo:null,cantidad:null,precio_unitario:null,precio_total:null,presentacion:0},this.resetDetalleMerma=()=>this.detalleMerma={egreso_detalle:null,egreso:this.egreso.egreso?this.egreso.egreso:null,articulo:null,cantidad:null,precio_unitario:null,precio_total:null,presentacion:0},this.loadDetalleEgreso=(e=+this.egreso.egreso)=>{this.egresoSrvc.getDetalle(e,{egreso:e}).subscribe(e=>{e&&(this.detallesEgreso=e,this.updateTableDataSource())})},this.getDetalleEgreso=(e=+this.egreso.egreso,t)=>{this.egresoSrvc.getDetalle(e,{egreso_detalle:t}).subscribe(e=>{e&&(this.detalleEgreso={egreso_detalle:e[0].egreso_detalle,egreso:e[0].egreso,articulo:e[0].articulo.articulo,cantidad:+e[0].cantidad,precio_unitario:+e[0].precio_unitario,precio_total:+e[0].precio_total,presentacion:e[0].presentacion.presentacion},this.showDetalleEgresoForm=!0)})},this.onSubmitDetail=()=>{this.detalleEgreso.egreso=this.egreso.egreso,this.egresoSrvc.saveDetalle(this.detalleEgreso).subscribe(e=>{e.exito?(this.loadDetalleEgreso(),this.resetDetalleEgreso(),this._snackBar.open("Egreso guardado con \xe9xito...","Egreso",{duration:3e3})):this._snackBar.open(`ERROR: ${e.mensaje}`,"Egreso",{duration:3e3})})},this.addToDetail=()=>{this.detallesEgreso.push(this.detalleEgreso),this.resetDetalleEgreso(),this.updateTableDataSource()},this.addToDetailMerma=()=>{this.detallesMerma.push(this.detalleMerma),this.resetDetalleMerma(),this.updateTableDataSourceM()},this.removeFromDetail=e=>this.detallesEgreso.splice(this.detallesEgreso.findIndex(t=>+t.articulo==+e),1),this.getDescripcionArticulo=e=>this.articulos.find(t=>+t.articulo==+e).descripcion||"",this.getDescripcionPresentacion=e=>this.presentaciones.find(t=>+t.presentacion==+e).descripcion||"",this.updateTableDataSource=()=>this.dataSource=new f.a(this.detallesEgreso),this.updateTableDataSourceM=()=>this.dataSource=new f.a(this.detallesMerma)}ngOnInit(){this.esMovil=this.ls.get(j.a.usrTokenVar).enmovil||!1,this.resetEgreso(),this.loadTiposMovimiento(),this.loadBodegas(),this.loadArticulos(),this.loadProveedores(),this.loadPresentaciones()}};pe.ctorParameters=()=>[{type:y.a},{type:T.a},{type:me},{type:ne.a},{type:U.a},{type:H.a},{type:ie.a},{type:q},{type:re.a}],a.b([Object(n.Input)()],pe.prototype,"egreso",void 0),a.b([Object(n.Input)()],pe.prototype,"saveToDB",void 0),a.b([Object(n.Output)()],pe.prototype,"egresoSavedEv",void 0),pe=a.b([Object(n.Component)({selector:"app-form-egreso",template:a.c(o("Vthy")).default,styles:[a.c(o("iQY+")).default]})],pe);let he=class{constructor(e,t){this.articuloSrvc=e,this.ls=t,this.bloqueoBotones=!1,this.productoClickedEv=new n.EventEmitter,this.categoriasFilledEv=new n.EventEmitter,this.categorias=[],this.subcategorias=[],this.articulos=[],this.loadArbolArticulos=()=>{this.articuloSrvc.getArbolArticulos(this.ls.get(j.a.usrTokenVar).sede||0).subscribe(e=>{this.fillCategorias(e)})},this.fillCategorias=e=>{this.categorias=[],this.subcategorias=[],this.articulos=[];for(const t of e)this.categorias.push(t);this.categoriasFilledEv.emit(this.categorias)},this.fillSubCategorias=e=>{this.subcategorias=[],this.articulos=[];for(const t of e)this.subcategorias.push(t)},this.fillArticulos=e=>{this.articulos=[];for(const t of e)this.articulos.push(t)},this.clickOnCategoria=e=>{e.categoria_grupo.length>0&&this.fillSubCategorias(e.categoria_grupo)},this.clickOnSubCategoria=e=>{e.articulo.length>0&&this.fillArticulos(e.articulo)},this.clickOnArticulo=e=>{const t={id:+e.articulo,nombre:e.descripcion,precio:+e.precio,impresora:e.impresora,presentacion:e.presentacion,codigo:e.codigo};this.productoClickedEv.emit(t)}}ngOnInit(){this.loadArbolArticulos()}};he.ctorParameters=()=>[{type:H.a},{type:T.a}],a.b([Object(n.Input)()],he.prototype,"bloqueoBotones",void 0),a.b([Object(n.Output)()],he.prototype,"productoClickedEv",void 0),a.b([Object(n.Output)()],he.prototype,"categoriasFilledEv",void 0),he=a.b([Object(n.Component)({selector:"app-lista-producto-alt",template:a.c(o("4muF")).default,styles:[a.c(o("8Mvs")).default]})],he),o.d(t,"WmsModule",(function(){return fe}));let fe=class{};fe=a.b([Object(n.NgModule)({declarations:[ee,ae,se,W,P,de,ue,B,ge,pe,G,Y,J,he,Q],imports:[i.CommonModule,Z,l.a,r.b,s.FormsModule,c.a,d.a,u.c,m.b,g.a,p.a,h.a,f.b,b.a,v.a,I.b,y.b,C.a,S.a,D.a,_.b,E.c,M.a,k.a,w.a,x.NgVirtualKeyboardModule],providers:[q],exports:[ee,he]})],fe)},x2BN:function(e,t,o){"use strict";o.r(t),t.default='<mat-card class="mat-elevation-z4 fullWidth" style="height: 100% important;">\n    <mat-card-content>\n        <mat-form-field class="fullWidth">\n            <input matInput (keyup)="applyFilter()" placeholder="Buscar..." [(ngModel)]="txtFiltro" [ngModelOptions]="{standalone: true}">\n        </mat-form-field>\n        <mat-nav-list>\n            <mat-list-item *ngFor="let element of lstIngresosPaged" (click)="getIngreso(element)">\n                <mat-icon mat-list-icon>trending_up</mat-icon>\n                <h5 mat-line>No. {{element.ingreso}}</h5><br/>\n                <p mat-line>\n                    Fecha: {{element.fecha | date: \'dd/MM/yyyy\'}}<br/>\n                    Bodega: {{element.bodega.descripcion}}<br/>\n                </p>\n                <p mat-line>\n                    Proveedor: {{element.proveedor.razon_social}}\n                </p>\n            </mat-list-item>                        \n        </mat-nav-list>\n        <mat-paginator [length]="length" [pageSize]="pageSize" [pageSizeOptions]="pageSizeOptions" (page)="pageChange($event)" showFirstLastButtons>\n        </mat-paginator>\n    </mat-card-content>\n</mat-card>\n'},yQYf:function(e,t,o){"use strict";o.r(t),t.default=".fullWidth {\n    width: 100% !important;\n}\n\ntable {\n    width: 100% !important;\n}"}}]);