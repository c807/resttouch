!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,o){if(!e)return;if("string"==typeof e)return t(e,o);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,o)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var o,n=r(e);if(t){var i=r(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return a(this,o)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,o){return t&&l(e.prototype,t),o&&l(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"3e6T":function(e,t,o){"use strict";o.d(t,"a",function(){return b});var n=o("sKxO"),i=o("R5jZ"),a=o("un/a"),c=o("JIr8"),r=o("Qyje"),l=o("fXoL"),d=o("tk/3"),b=function(){var e=function(){function e(t){s(this,e),this.http=t,this.srvcErrHndl=new i.a}return u(e,[{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(n.a.urlCatalogos,"/get_tipo_movimiento?").concat(r.stringify(e))).pipe(Object(a.a)(n.a.reintentos),Object(c.a)(this.srvcErrHndl.errorHandler))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Xb(d.b))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},A5z7:function(t,n,a){"use strict";a.d(n,"a",function(){return w}),a.d(n,"b",function(){return H}),a.d(n,"c",function(){return j});var r=a("FtGj"),l=a("fXoL"),d=a("FKr1"),b=a("8LU1"),g=a("ofXK"),f=a("R1ws"),p=a("XNiG"),m=a("VRyK"),h=a("IzEk"),v=a("1G5W"),S=a("JX91"),C=a("u47x"),T=a("0EQZ"),_=a("kmnG"),x=a("nLfN"),M=a("cH1L"),y=a("3Pt+"),I=["*"],D=new l.s("MatChipRemove"),F=new l.s("MatChipAvatar"),k=new l.s("MatChipTrailingIcon"),O=Object(d.B)(Object(d.w)(Object(d.x)(function e(t){s(this,e),this._elementRef=t}),"primary"),-1),w=function(){var e=function(e){o(n,e);var t=i(n);function n(e,o,i,a,r,u,b,g){var f;return s(this,n),(f=t.call(this,e))._elementRef=e,f._ngZone=o,f._changeDetectorRef=r,f._hasFocus=!1,f.chipListSelectable=!0,f._chipListMultiple=!1,f._chipListDisabled=!1,f._selected=!1,f._selectable=!0,f._disabled=!1,f._removable=!0,f._onFocus=new p.a,f._onBlur=new p.a,f.selectionChange=new l.o,f.destroyed=new l.o,f.removed=new l.o,f._addHostClassName(),f._chipRippleTarget=u.createElement("div"),f._chipRippleTarget.classList.add("mat-chip-ripple"),f._elementRef.nativeElement.appendChild(f._chipRippleTarget),f._chipRipple=new d.t(c(f),o,f._chipRippleTarget,i),f._chipRipple.setupTriggerEvents(e),f.rippleConfig=a||{},f._animationsDisabled="NoopAnimations"===b,f.tabIndex=null!=g&&parseInt(g)||-1,f}return u(n,[{key:"_addHostClassName",value:function(){var e=this._elementRef.nativeElement;e.hasAttribute("mat-basic-chip")||"mat-basic-chip"===e.tagName.toLowerCase()?e.classList.add("mat-basic-chip"):e.classList.add("mat-standard-chip")}},{key:"ngOnDestroy",value:function(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}},{key:"select",value:function(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}},{key:"deselect",value:function(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}},{key:"selectViaInteraction",value:function(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}},{key:"toggleSelected",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._selected=!this.selected,this._dispatchSelectionChange(e),this._changeDetectorRef.markForCheck(),this.selected}},{key:"focus",value:function(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}},{key:"remove",value:function(){this.removable&&this.removed.emit({chip:this})}},{key:"_handleClick",value:function(e){this.disabled?e.preventDefault():e.stopPropagation()}},{key:"_handleKeydown",value:function(e){if(!this.disabled)switch(e.keyCode){case r.c:case r.b:this.remove(),e.preventDefault();break;case r.n:this.selectable&&this.toggleSelected(!0),e.preventDefault()}}},{key:"_blur",value:function(){var e=this;this._ngZone.onStable.pipe(Object(h.a)(1)).subscribe(function(){e._ngZone.run(function(){e._hasFocus=!1,e._onBlur.next({chip:e})})})}},{key:"_dispatchSelectionChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.selectionChange.emit({source:this,isUserInput:e,selected:this._selected})}},{key:"rippleDisabled",get:function(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}},{key:"selected",get:function(){return this._selected},set:function(e){var t=Object(b.c)(e);t!==this._selected&&(this._selected=t,this._dispatchSelectionChange())}},{key:"value",get:function(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent},set:function(e){this._value=e}},{key:"selectable",get:function(){return this._selectable&&this.chipListSelectable},set:function(e){this._selectable=Object(b.c)(e)}},{key:"disabled",get:function(){return this._chipListDisabled||this._disabled},set:function(e){this._disabled=Object(b.c)(e)}},{key:"removable",get:function(){return this._removable},set:function(e){this._removable=Object(b.c)(e)}},{key:"ariaSelected",get:function(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}}]),n}(O);return e.\u0275fac=function(t){return new(t||e)(l.Nb(l.l),l.Nb(l.B),l.Nb(x.a),l.Nb(d.h,8),l.Nb(l.h),l.Nb(g.d),l.Nb(f.a,8),l.Yb("tabindex"))},e.\u0275dir=l.Ib({type:e,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(e,t,o){var n;(1&e&&(l.Gb(o,F,1),l.Gb(o,k,1),l.Gb(o,D,1)),2&e)&&(l.sc(n=l.cc())&&(t.avatar=n.first),l.sc(n=l.cc())&&(t.trailingIcon=n.first),l.sc(n=l.cc())&&(t.removeIcon=n.first))},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(e,t){1&e&&l.bc("click",function(e){return t._handleClick(e)})("keydown",function(e){return t._handleKeydown(e)})("focus",function(){return t.focus()})("blur",function(){return t._blur()}),2&e&&(l.Db("tabindex",t.disabled?null:t.tabIndex)("disabled",t.disabled||null)("aria-disabled",t.disabled.toString())("aria-selected",t.ariaSelected),l.Fb("mat-chip-selected",t.selected)("mat-chip-with-avatar",t.avatar)("mat-chip-with-trailing-icon",t.trailingIcon||t.removeIcon)("mat-chip-disabled",t.disabled)("_mat-animation-noopable",t._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[l.zb]}),e}(),E=new l.s("mat-chips-default-options"),A=Object(d.z)(function e(t,o,n,i){s(this,e),this._defaultErrorStateMatcher=t,this._parentForm=o,this._parentFormGroup=n,this.ngControl=i}),R=0,B=function e(t,o){s(this,e),this.source=t,this.value=o},H=function(){var t=function(t){o(a,t);var n=i(a);function a(e,t,o,i,r,u,d){var b;return s(this,a),(b=n.call(this,u,i,r,d))._elementRef=e,b._changeDetectorRef=t,b._dir=o,b.ngControl=d,b.controlType="mat-chip-list",b._lastDestroyedChipIndex=null,b._destroyed=new p.a,b._uid="mat-chip-list-"+R++,b._tabIndex=0,b._userTabIndex=null,b._onTouched=function(){},b._onChange=function(){},b._multiple=!1,b._compareWith=function(e,t){return e===t},b._required=!1,b._disabled=!1,b.ariaOrientation="horizontal",b._selectable=!0,b.change=new l.o,b.valueChange=new l.o,b.ngControl&&(b.ngControl.valueAccessor=c(b)),b}return u(a,[{key:"ngAfterContentInit",value:function(){var e=this;this._keyManager=new C.g(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(Object(v.a)(this._destroyed)).subscribe(function(t){return e._keyManager.withHorizontalOrientation(t)}),this._keyManager.tabOut.pipe(Object(v.a)(this._destroyed)).subscribe(function(){e._allowFocusEscape()}),this.chips.changes.pipe(Object(S.a)(null),Object(v.a)(this._destroyed)).subscribe(function(){e.disabled&&Promise.resolve().then(function(){e._syncChipsState()}),e._resetChips(),e._initializeSelection(),e._updateTabIndex(),e._updateFocusForDestroyedChips(),e.stateChanges.next()})}},{key:"ngOnInit",value:function(){this._selectionModel=new T.c(this.multiple,void 0,!1),this.stateChanges.next()}},{key:"ngDoCheck",value:function(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}},{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}},{key:"registerInput",value:function(e){this._chipInput=e,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",e.id)}},{key:"setDescribedByIds",value:function(e){this._ariaDescribedby=e.join(" ")}},{key:"writeValue",value:function(e){this.chips&&this._setSelectionByValue(e,!1)}},{key:"registerOnChange",value:function(e){this._onChange=e}},{key:"registerOnTouched",value:function(e){this._onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e,this.stateChanges.next()}},{key:"onContainerClick",value:function(e){this._originatesFromChip(e)||this.focus()}},{key:"focus",value:function(e){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(e),this.stateChanges.next()))}},{key:"_focusInput",value:function(e){this._chipInput&&this._chipInput.focus(e)}},{key:"_keydown",value:function(e){var t=e.target;e.keyCode===r.b&&this._isInputEmpty(t)?(this._keyManager.setLastItemActive(),e.preventDefault()):t&&t.classList.contains("mat-chip")&&(this._keyManager.onKeydown(e),this.stateChanges.next())}},{key:"_updateTabIndex",value:function(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}},{key:"_updateFocusForDestroyedChips",value:function(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){var e=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(e)}else this.focus();this._lastDestroyedChipIndex=null}},{key:"_isValidIndex",value:function(e){return e>=0&&e<this.chips.length}},{key:"_isInputEmpty",value:function(e){return!(!e||"input"!==e.nodeName.toLowerCase()||e.value)}},{key:"_setSelectionByValue",value:function(e){var t=this,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._clearSelection(),this.chips.forEach(function(e){return e.deselect()}),Array.isArray(e))e.forEach(function(e){return t._selectValue(e,o)}),this._sortValues();else{var n=this._selectValue(e,o);n&&o&&this._keyManager.setActiveItem(n)}}},{key:"_selectValue",value:function(e){var t=this,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.chips.find(function(o){return null!=o.value&&t._compareWith(o.value,e)});return n&&(o?n.selectViaInteraction():n.select(),this._selectionModel.select(n)),n}},{key:"_initializeSelection",value:function(){var e=this;Promise.resolve().then(function(){(e.ngControl||e._value)&&(e._setSelectionByValue(e.ngControl?e.ngControl.value:e._value,!1),e.stateChanges.next())})}},{key:"_clearSelection",value:function(e){this._selectionModel.clear(),this.chips.forEach(function(t){t!==e&&t.deselect()}),this.stateChanges.next()}},{key:"_sortValues",value:function(){var e=this;this._multiple&&(this._selectionModel.clear(),this.chips.forEach(function(t){t.selected&&e._selectionModel.select(t)}),this.stateChanges.next())}},{key:"_propagateChanges",value:function(e){var t;t=Array.isArray(this.selected)?this.selected.map(function(e){return e.value}):this.selected?this.selected.value:e,this._value=t,this.change.emit(new B(this,t)),this.valueChange.emit(t),this._onChange(t),this._changeDetectorRef.markForCheck()}},{key:"_blur",value:function(){var e=this;this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(function(){e.focused||e._markAsTouched()}):this._markAsTouched())}},{key:"_markAsTouched",value:function(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}},{key:"_allowFocusEscape",value:function(){var e=this;-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(function(){e._tabIndex=e._userTabIndex||0,e._changeDetectorRef.markForCheck()}))}},{key:"_resetChips",value:function(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}},{key:"_dropSubscriptions",value:function(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}},{key:"_listenToChipsSelection",value:function(){var e=this;this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(function(t){t.source.selected?e._selectionModel.select(t.source):e._selectionModel.deselect(t.source),e.multiple||e.chips.forEach(function(t){!e._selectionModel.isSelected(t)&&t.selected&&t.deselect()}),t.isUserInput&&e._propagateChanges()})}},{key:"_listenToChipsFocus",value:function(){var e=this;this._chipFocusSubscription=this.chipFocusChanges.subscribe(function(t){var o=e.chips.toArray().indexOf(t.chip);e._isValidIndex(o)&&e._keyManager.updateActiveItem(o),e.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(function(){e._blur(),e.stateChanges.next()})}},{key:"_listenToChipsRemoved",value:function(){var e=this;this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(function(t){var o=t.chip,n=e.chips.toArray().indexOf(t.chip);e._isValidIndex(n)&&o._hasFocus&&(e._lastDestroyedChipIndex=n)})}},{key:"_originatesFromChip",value:function(e){for(var t=e.target;t&&t!==this._elementRef.nativeElement;){if(t.classList.contains("mat-chip"))return!0;t=t.parentElement}return!1}},{key:"_hasFocusedChip",value:function(){return this.chips&&this.chips.some(function(e){return e._hasFocus})}},{key:"_syncChipsState",value:function(){var e=this;this.chips&&this.chips.forEach(function(t){t._chipListDisabled=e._disabled,t._chipListMultiple=e.multiple})}},{key:"selected",get:function(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}},{key:"role",get:function(){return this.empty?null:"listbox"}},{key:"multiple",get:function(){return this._multiple},set:function(e){this._multiple=Object(b.c)(e),this._syncChipsState()}},{key:"compareWith",get:function(){return this._compareWith},set:function(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}},{key:"value",get:function(){return this._value},set:function(e){this.writeValue(e),this._value=e}},{key:"id",get:function(){return this._chipInput?this._chipInput.id:this._uid}},{key:"required",get:function(){return this._required},set:function(e){this._required=Object(b.c)(e),this.stateChanges.next()}},{key:"placeholder",get:function(){return this._chipInput?this._chipInput.placeholder:this._placeholder},set:function(e){this._placeholder=e,this.stateChanges.next()}},{key:"focused",get:function(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}},{key:"empty",get:function(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}},{key:"shouldLabelFloat",get:function(){return!this.empty||this.focused}},{key:"disabled",get:function(){return this.ngControl?!!this.ngControl.disabled:this._disabled},set:function(e){this._disabled=Object(b.c)(e),this._syncChipsState()}},{key:"selectable",get:function(){return this._selectable},set:function(e){var t=this;this._selectable=Object(b.c)(e),this.chips&&this.chips.forEach(function(e){return e.chipListSelectable=t._selectable})}},{key:"tabIndex",set:function(e){this._userTabIndex=e,this._tabIndex=e}},{key:"chipSelectionChanges",get:function(){return Object(m.a).apply(void 0,e(this.chips.map(function(e){return e.selectionChange})))}},{key:"chipFocusChanges",get:function(){return Object(m.a).apply(void 0,e(this.chips.map(function(e){return e._onFocus})))}},{key:"chipBlurChanges",get:function(){return Object(m.a).apply(void 0,e(this.chips.map(function(e){return e._onBlur})))}},{key:"chipRemoveChanges",get:function(){return Object(m.a).apply(void 0,e(this.chips.map(function(e){return e.destroyed})))}}]),a}(A);return t.\u0275fac=function(e){return new(e||t)(l.Nb(l.l),l.Nb(l.h),l.Nb(M.b,8),l.Nb(y.m,8),l.Nb(y.d,8),l.Nb(d.d),l.Nb(y.j,10))},t.\u0275cmp=l.Hb({type:t,selectors:[["mat-chip-list"]],contentQueries:function(e,t,o){var n;(1&e&&l.Gb(o,w,1),2&e)&&(l.sc(n=l.cc())&&(t.chips=n))},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(e,t){1&e&&l.bc("focus",function(){return t.focus()})("blur",function(){return t._blur()})("keydown",function(e){return t._keydown(e)}),2&e&&(l.Wb("id",t._uid),l.Db("tabindex",t.disabled?null:t._tabIndex)("aria-describedby",t._ariaDescribedby||null)("aria-required",t.role?t.required:null)("aria-disabled",t.disabled.toString())("aria-invalid",t.errorState)("aria-multiselectable",t.multiple)("role",t.role)("aria-orientation",t.ariaOrientation),l.Fb("mat-chip-list-disabled",t.disabled)("mat-chip-list-invalid",t.errorState)("mat-chip-list-required",t.required))},inputs:{ariaOrientation:["aria-orientation","ariaOrientation"],multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",selectable:"selectable",tabIndex:"tabIndex",errorStateMatcher:"errorStateMatcher"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[l.Bb([{provide:_.c,useExisting:t}]),l.zb],ngContentSelectors:I,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(e,t){1&e&&(l.kc(),l.Tb(0,"div",0),l.jc(1),l.Sb())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;transform:translateZ(0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove.mat-icon{width:18px;height:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),t}(),P={separatorKeyCodes:[r.f]},j=function(){var e=function e(){s(this,e)};return e.\u0275mod=l.Lb({type:e}),e.\u0275inj=l.Kb({factory:function(t){return new(t||e)},providers:[d.d,{provide:E,useValue:P}],imports:[[d.i]]}),e}()},FHMA:function(e,t,o){"use strict";o.d(t,"a",function(){return b});var n=o("tk/3"),i=o("sKxO"),a=o("R5jZ"),c=o("un/a"),r=o("JIr8"),l=o("fXoL"),d=o("FY0D"),b=function(){var e=function(){function e(t,o){s(this,e),this.http=t,this.ls=o,this.usrToken=null,this.httpOptions={responseType:"blob"},this.srvcErrHndl=new a.a,this.usrToken=this.ls.get(i.a.usrTokenVar)?this.ls.get(i.a.usrTokenVar).token:null,this.httpOptions.headers=new n.d({Authorization:this.usrToken,Accept:"application/pdf"})}return u(e,[{key:"getReporteCaja",value:function(e){return this.http.post("".concat(i.a.urlAppRestaurante,"/reporte/caja"),e,this.httpOptions).pipe(Object(c.a)(i.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}},{key:"getReporteExistencia",value:function(e){return this.httpOptions.params=e,this.http.get("".concat(i.a.urlWms,"/reporte/existencia"),this.httpOptions).pipe(Object(c.a)(i.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}},{key:"getReporteValorizado",value:function(e){return this.httpOptions.params=e,this.http.get("".concat(i.a.urlWms,"/reporte/valorizado"),this.httpOptions).pipe(Object(c.a)(i.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}},{key:"imprimirInventarioFisico",value:function(e,t){return this.httpOptions.params=t,this.http.get("".concat(i.a.urlWms,"/fisico/imprimir/").concat(e),this.httpOptions).pipe(Object(c.a)(i.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}},{key:"imprimirReceta",value:function(e){return this.http.get("".concat(i.a.urlMantenimientos,"/articulo/imprimir_receta/").concat(e),this.httpOptions).pipe(Object(c.a)(i.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}},{key:"getReporteKardex",value:function(e){return this.httpOptions.params=e,this.http.get("".concat(i.a.urlWms,"/reporte/kardex"),this.httpOptions).pipe(Object(c.a)(i.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}},{key:"getReporteFactura",value:function(e){return this.httpOptions.params=e,this.http.get("".concat(i.a.urlAppRestaurante,"/reporte/factura"),this.httpOptions).pipe(Object(c.a)(i.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}},{key:"getReportePropina",value:function(e){return this.httpOptions.params=e,this.http.get("".concat(i.a.urlAppRestaurante,"/reporte/distribucion_propina"),this.httpOptions).pipe(Object(c.a)(i.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}},{key:"getComanda",value:function(e){return this.http.get("".concat(i.a.urlAppRestaurante,"/comanda/imprimir/").concat(e,"/1"),this.httpOptions).pipe(Object(c.a)(i.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Xb(n.b),l.Xb(d.a))},e.\u0275prov=l.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},Iab2:function(e,t,o){var n,i;void 0===(i="function"==typeof(n=function(){"use strict";function t(e,t,o){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){c(n.response,t,o)},n.onerror=function(){console.error("could not download file")},n.send()}function o(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function n(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(o)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,a,c){var r=i.URL||i.webkitURL,s=document.createElement("a");s.download=a=a||e.name||"download",s.rel="noopener","string"==typeof e?(s.href=e,s.origin===location.origin?n(s):o(s.href)?t(e,a,c):n(s,s.target="_blank")):(s.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){n(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,i,a){if(i=i||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,a),i);else if(o(e))t(e,i,a);else{var c=document.createElement("a");c.href=e,c.target="_blank",setTimeout(function(){n(c)})}}:function(e,o,n,c){if((c=c||open("","_blank"))&&(c.document.title=c.document.body.innerText="downloading..."),"string"==typeof e)return t(e,o,n);var r="application/octet-stream"===e.type,s=/constructor/i.test(i.HTMLElement)||i.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||r&&s||a)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=e:location=e,c=null},u.readAsDataURL(e)}else{var d=i.URL||i.webkitURL,b=d.createObjectURL(e);c?c.location=b:location.href=b,c=null,setTimeout(function(){d.revokeObjectURL(b)},4e4)}});i.saveAs=c.saveAs=c,e.exports=c})?n.apply(t,[]):n)||(e.exports=i)},NU9O:function(e,t,o){"use strict";o.d(t,"a",function(){return d});var n=o("fXoL"),i=o("ofXK"),a=o("bTqV");function c(e,t){if(1&e){var o=n.Ub();n.Tb(0,"button",3),n.bc("click",function(){return n.xc(o),n.fc().onHtmlClick()}),n.Fc(1," Generar "),n.Sb()}if(2&e){var i=n.fc();n.lc("disabled",i.configuracion.isHtmlDisabled)}}function r(e,t){if(1&e){var o=n.Ub();n.Tb(0,"button",3),n.bc("click",function(){return n.xc(o),n.fc().onPdfClick()}),n.Fc(1," PDF "),n.Sb()}if(2&e){var i=n.fc();n.lc("disabled",i.configuracion.isPdfDisabled)}}function l(e,t){if(1&e){var o=n.Ub();n.Tb(0,"button",3),n.bc("click",function(){return n.xc(o),n.fc().onExcelClick()}),n.Fc(1," Excel "),n.Sb()}if(2&e){var i=n.fc();n.lc("disabled",i.configuracion.isExcelDisabled)}}var d=function(){var e=function(){function e(){var t=this;s(this,e),this.htmlClick=new n.o,this.pdfClick=new n.o,this.excelClick=new n.o,this.resetParamsClick=new n.o,this.configuracion={isHtmlDisabled:!1,isPdfDisabled:!1,isExcelDisabled:!1,showHtml:!0,showPdf:!0,showExcel:!0},this.onHtmlClick=function(){return t.htmlClick.emit()},this.onPdfClick=function(){return t.pdfClick.emit()},this.onExcelClick=function(){return t.excelClick.emit()},this.onResetParamsClick=function(){return t.resetParamsClick.emit()}}return u(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Hb({type:e,selectors:[["app-rpt-botones"]],inputs:{configuracion:"configuracion"},outputs:{htmlClick:"htmlClick",pdfClick:"pdfClick",excelClick:"excelClick",resetParamsClick:"resetParamsClick"},decls:6,vars:3,consts:[["align","end"],["mat-raised-button","","type","button","class","btnAccion","color","accent",3,"disabled","click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"]],template:function(e,t){1&e&&(n.Tb(0,"div",0),n.Dc(1,c,2,1,"button",1),n.Dc(2,r,2,1,"button",1),n.Dc(3,l,2,1,"button",1),n.Tb(4,"button",2),n.bc("click",function(){return t.onResetParamsClick()}),n.Fc(5," Restaurar "),n.Sb(),n.Sb()),2&e&&(n.Cb(1),n.lc("ngIf",t.configuracion.showHtml),n.Cb(1),n.lc("ngIf",t.configuracion.showPdf),n.Cb(1),n.lc("ngIf",t.configuracion.showExcel))},directives:[i.m,a.a],styles:[""]}),e}()},TOq3:function(e,t,o){"use strict";o.d(t,"a",function(){return i});var n=o("fXoL"),i=function(){var e=function(){function e(){s(this,e),this.configuracion={w:150,h:150,align:"center",size:100}}return u(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Hb({type:e,selectors:[["app-cargando"]],inputs:{configuracion:"configuracion"},decls:2,vars:7,consts:[[3,"align"],["id","imgCargando","src","/assets/img/loading.gif","alt","Cargando..."]],template:function(e,t){1&e&&(n.Tb(0,"div",0),n.Ob(1,"img",1),n.Sb()),2&e&&(n.Ac("width",t.configuracion.size,"%"),n.lc("align",t.configuracion.align),n.Cb(1),n.Ac("width",t.configuracion.w,"px")("height",t.configuracion.h,"px"))},styles:[""]}),e}()},vtFA:function(e,t,o){"use strict";o.r(t),o.d(t,"WmsModule",function(){return Wa});var n,i=o("ofXK"),a=o("tk/3"),c=o("3Pt+"),r=o("YUcS"),l=o("PCNd"),d=o("MutI"),b=o("NFeN"),g=o("kmnG"),f=o("qFsG"),p=o("Wp6s"),m=o("f0Cb"),h=o("wZkO"),v=o("+0xr"),S=o("d3UM"),C=o("bSwM"),T=o("bTqV"),_=o("dNgK"),x=o("/t3+"),M=o("STbY"),y=o("zkoq"),I=o("M9IT"),D=o("0IaG"),F=o("XhcP"),k=o("8yBR"),O=o("/1cH"),w=o("A5z7"),E=o("vxfF"),A=o("uM5D"),R=o("tyNb"),B=o("0T/Q"),H=o("sKxO"),P=o("wd/R"),j=o("fXoL"),N=o("FY0D"),U=o("R5jZ"),G=o("un/a"),z=o("JIr8"),q=o("Qyje"),L=((n=function(){function e(t){s(this,e),this.http=t,this.ingresoUrl="ingreso",this.documentoUrl="documento",this.srvcErrHndl=new U.a}return u(e,[{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(H.a.urlWms,"/").concat(this.ingresoUrl,"/buscar_ingreso?").concat(q.stringify(e))).pipe(Object(G.a)(H.a.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(e){return this.http.post("".concat(H.a.urlWms,"/").concat(this.ingresoUrl,"/guardar").concat(+e.ingreso>0?"/"+e.ingreso:""),e).pipe(Object(G.a)(H.a.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"getDetalle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.http.get("".concat(H.a.urlWms,"/").concat(this.ingresoUrl,"/buscar_detalle/").concat(e,"?").concat(q.stringify(t))).pipe(Object(G.a)(H.a.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"saveDetalle",value:function(e){return this.http.post("".concat(H.a.urlWms,"/").concat(this.ingresoUrl,"/guardar_detalle/").concat(e.ingreso).concat(+e.ingreso_detalle>0?"/"+e.ingreso_detalle:""),e).pipe(Object(G.a)(H.a.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"getDocumento",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(H.a.urlWms,"/").concat(this.documentoUrl,"/buscar?").concat(q.stringify(e))).pipe(Object(G.a)(H.a.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"saveDocumento",value:function(e){return this.http.post("".concat(H.a.urlWms,"/").concat(this.documentoUrl,"/guardar").concat(+e.documento>0?"/"+e.documento:""),e).pipe(Object(G.a)(H.a.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"enviarDocumentoAConta",value:function(e){return this.http.get("".concat(H.a.urlWms,"/").concat(this.documentoUrl,"/enviar/").concat(e)).pipe(Object(G.a)(H.a.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}}]),e}()).\u0275fac=function(e){return new(e||n)(j.Xb(a.b))},n.\u0275prov=j.Jb({token:n,factory:n.\u0275fac,providedIn:"root"}),n),$=o("FKr1");function W(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-list-item",5),j.bc("click",function(){j.xc(o);var e=t.$implicit;return j.fc().getIngreso(e)}),j.Tb(1,"mat-icon",6),j.Fc(2,"trending_up"),j.Sb(),j.Tb(3,"h5",7),j.Fc(4),j.Sb(),j.Ob(5,"br"),j.Tb(6,"p",7),j.Fc(7),j.gc(8,"date"),j.Ob(9,"br"),j.Fc(10),j.Ob(11,"br"),j.Sb(),j.Tb(12,"p",7),j.Fc(13),j.Sb(),j.Sb()}if(2&e){var n=t.$implicit;j.Cb(4),j.Hc("No. ",n.ingreso,""),j.Cb(3),j.Hc(" Fecha: ",j.ic(8,4,n.fecha,"dd/MM/yyyy"),""),j.Cb(3),j.Hc(" Bodega: ",n.bodega.descripcion,""),j.Cb(3),j.Hc(" Proveedor: ",n.proveedor.razon_social," ")}}var V,K=function(){return{standalone:!0}},Q=((V=function(){function e(t){var o=this;s(this,e),this.ingresoSrvc=t,this.getIngresoEv=new j.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadIngresos=function(){o.ingresoSrvc.get().subscribe(function(e){e&&e.length>0&&(o.lstIngresos=e,o.applyFilter())})},this.getIngreso=function(e){o.getIngresoEv.emit({ingreso:e.ingreso,tipo_movimiento:e.tipo_movimiento.tipo_movimiento,fecha:e.fecha,bodega_origen:e.bodega_origen&&e.bodega_origen.bodega?e.bodega_origen.bodega:null,bodega:e.bodega.bodega,usuario:e.usuario.usuario,comentario:e.comentario,proveedor:e.proveedor.proveedor})},this.pageChange=function(e){o.pageSize=e.pageSize,o.pageIndex=e.pageIndex,o.applyFilter()}}return u(e,[{key:"ngOnInit",value:function(){this.loadIngresos()}},{key:"applyFilter",value:function(){if(this.txtFiltro.length>0){var e=Object(H.b)(this.lstIngresos,this.txtFiltro);this.length=e.length,this.lstIngresosPaged=Object(H.e)(e,this.pageSize,this.pageIndex+1)}else this.length=this.lstIngresos.length,this.lstIngresosPaged=Object(H.e)(this.lstIngresos,this.pageSize,this.pageIndex+1)}}]),e}()).\u0275fac=function(e){return new(e||V)(j.Nb(L))},V.\u0275cmp=j.Hb({type:V,selectors:[["app-lista-ingreso"]],outputs:{getIngresoEv:"getIngresoEv"},decls:7,vars:7,consts:[[1,"mat-elevation-z4","fullWidth",2,"height","100% important"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(e,t){1&e&&(j.Tb(0,"mat-card",0),j.Tb(1,"mat-card-content"),j.Tb(2,"mat-form-field",1),j.Tb(3,"input",2),j.bc("keyup",function(){return t.applyFilter()})("ngModelChange",function(e){return t.txtFiltro=e}),j.Sb(),j.Sb(),j.Tb(4,"mat-nav-list"),j.Dc(5,W,14,7,"mat-list-item",3),j.Sb(),j.Tb(6,"mat-paginator",4),j.bc("page",function(e){return t.pageChange(e)}),j.Sb(),j.Sb(),j.Sb()),2&e&&(j.Cb(3),j.lc("ngModel",t.txtFiltro)("ngModelOptions",j.nc(6,K)),j.Cb(2),j.lc("ngForOf",t.lstIngresosPaged),j.Cb(1),j.lc("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[p.a,p.c,g.b,f.b,c.c,c.k,c.n,d.e,i.l,I.a,d.c,b.a,d.b,$.j],pipes:[i.e],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),V),X=o("IJgu"),J=o("50cD"),Z=o("3e6T"),Y=o("u5dX"),ee=o("NGYs"),te=o("C5NV"),oe=o("yZ4O"),ne=o("DVqU");function ie(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",7),j.bc("click",function(){return j.xc(o),j.fc().showIngresoForm=!0}),j.Tb(1,"mat-icon",8),j.Fc(2,"expand_more"),j.Sb(),j.Sb()}}function ae(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",7),j.bc("click",function(){return j.xc(o),j.fc().showIngresoForm=!1}),j.Tb(1,"mat-icon",8),j.Fc(2,"expand_less"),j.Sb(),j.Sb()}}function ce(e,t){if(1&e&&(j.Tb(0,"mat-option",20),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.tipo_movimiento),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function re(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-form-field",12),j.Tb(1,"mat-label"),j.Fc(2,"Tipo de movimiento"),j.Sb(),j.Tb(3,"mat-select",18),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).ingreso.tipo_movimiento=e}),j.Dc(4,ce,2,2,"mat-option",19),j.Sb(),j.Sb()}if(2&e){var n=j.fc(2);j.Cb(3),j.lc("ngModel",n.ingreso.tipo_movimiento),j.Cb(1),j.lc("ngForOf",n.tiposMovimiento)}}function se(e,t){if(1&e&&(j.Tb(0,"mat-option",20),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.bodega),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function le(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-form-field",12),j.Tb(1,"mat-label"),j.Fc(2,"Bodega"),j.Sb(),j.Tb(3,"mat-select",21),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).ingreso.bodega=e}),j.Dc(4,se,2,2,"mat-option",19),j.Sb(),j.Sb()}if(2&e){var n=j.fc(2);j.Cb(3),j.lc("ngModel",n.ingreso.bodega),j.Cb(1),j.lc("ngForOf",n.bodegas)}}function ue(e,t){if(1&e&&(j.Tb(0,"mat-option",20),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.bodega),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function de(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",24),j.bc("click",function(){return j.xc(o),j.fc(3).ingreso.bodega_origen=void 0}),j.Tb(1,"mat-icon",8),j.Fc(2,"close"),j.Sb(),j.Sb()}}function be(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-form-field",12),j.Tb(1,"mat-label"),j.Fc(2,"Bodega de origen"),j.Sb(),j.Tb(3,"mat-select",22),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).ingreso.bodega_origen=e}),j.Dc(4,ue,2,2,"mat-option",19),j.Sb(),j.Dc(5,de,3,0,"button",23),j.Sb()}if(2&e){var n=j.fc(2);j.Cb(3),j.lc("ngModel",n.ingreso.bodega_origen),j.Cb(1),j.lc("ngForOf",n.bodegas),j.Cb(1),j.lc("ngIf",n.ingreso.bodega_origen)}}function ge(e,t){if(1&e&&(j.Tb(0,"mat-option",20),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o),j.Cb(1),j.Ic(" (",o.nit,") ",o.razon_social," ")}}var fe=function(){return{standalone:!0}};function pe(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-form-field",12),j.Tb(1,"mat-label"),j.Fc(2,"Proveedor"),j.Sb(),j.Tb(3,"input",25),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).txtProveedorSelected=e})("keyup",function(){j.xc(o);var e=j.fc(2);return e.filtrarProveedores(e.txtProveedorSelected)}),j.Sb(),j.Tb(4,"mat-autocomplete",26,27),j.Dc(6,ge,2,3,"mat-option",19),j.Sb(),j.Sb()}if(2&e){var n=j.tc(5),i=j.fc(2);j.Cb(3),j.lc("ngModel",i.txtProveedorSelected)("ngModelOptions",j.nc(5,fe))("matAutocomplete",n),j.Cb(1),j.lc("displayWith",i.displayProveedor),j.Cb(2),j.lc("ngForOf",i.filteredProveedores)}}function me(e,t){if(1&e&&(j.Tb(0,"button",28),j.Fc(1," Guardar "),j.Sb()),2&e){j.fc();var o=j.tc(1),n=j.fc();j.lc("disabled",!o.form.valid||n.bloqueoBotones||1==+n.documento.enviado)}}function he(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",29),j.bc("click",function(){return j.xc(o),j.fc(2).resetIngreso()}),j.Fc(1," Nuevo "),j.Sb()}}function ve(e,t){if(1&e){var o=j.Ub();j.Tb(0,"form",9,10),j.bc("ngSubmit",function(){j.xc(o);var e=j.tc(1),t=j.fc();return e.form.valid&&t.onSubmit()}),j.Dc(2,re,5,2,"mat-form-field",11),j.Tb(3,"mat-form-field",12),j.Tb(4,"input",13),j.bc("ngModelChange",function(e){return j.xc(o),j.fc().ingreso.fecha=e}),j.Sb(),j.Sb(),j.Dc(5,le,5,2,"mat-form-field",11),j.Dc(6,be,6,3,"mat-form-field",11),j.Dc(7,pe,7,6,"mat-form-field",11),j.Tb(8,"mat-form-field",12),j.Tb(9,"input",14),j.bc("ngModelChange",function(e){return j.xc(o),j.fc().ingreso.comentario=e}),j.Sb(),j.Sb(),j.Tb(10,"div",15),j.Dc(11,me,2,1,"button",16),j.Dc(12,he,2,0,"button",17),j.Sb(),j.Sb()}if(2&e){var n=j.fc();j.Cb(2),j.lc("ngIf",n.saveToDB),j.Cb(2),j.lc("ngModel",n.ingreso.fecha),j.Cb(1),j.lc("ngIf",n.bodega),j.Cb(1),j.lc("ngIf",n.saveToDB),j.Cb(1),j.lc("ngIf",n.saveToDB),j.Cb(2),j.lc("ngModel",n.ingreso.comentario),j.Cb(2),j.lc("ngIf",n.saveToDB),j.Cb(1),j.lc("ngIf",n.ingreso.ingreso)}}function Se(e,t){1&e&&j.Ob(0,"hr")}function Ce(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",7),j.bc("click",function(){return j.xc(o),j.fc(2).showDetalleIngresoForm=!0}),j.Tb(1,"mat-icon",8),j.Fc(2,"expand_more"),j.Sb(),j.Sb()}}function Te(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",7),j.bc("click",function(){return j.xc(o),j.fc(2).showDetalleIngresoForm=!1}),j.Tb(1,"mat-icon",8),j.Fc(2,"expand_less"),j.Sb(),j.Sb()}}function _e(e,t){if(1&e&&(j.Tb(0,"mat-option",20),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function xe(e,t){if(1&e&&(j.Tb(0,"mat-option",20),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.presentacion),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function Me(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-form-field",12),j.Tb(1,"mat-label"),j.Fc(2,"Presentaci\xf3n"),j.Sb(),j.Tb(3,"mat-select",38),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(3).detalleIngreso.presentacion=e}),j.Dc(4,xe,2,2,"mat-option",19),j.Sb(),j.Sb()}if(2&e){var n=j.fc(3);j.Cb(3),j.lc("ngModel",n.detalleIngreso.presentacion),j.Cb(1),j.lc("ngForOf",n.fltrPresentaciones)}}function ye(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-form-field",12),j.Tb(1,"input",39),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(3).detalleIngreso.cantidad_utilizada=e}),j.Sb(),j.Sb()}if(2&e){var n=j.fc(3);j.Cb(1),j.lc("ngModel",n.detalleIngreso.cantidad_utilizada)}}function Ie(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-form-field",12),j.Tb(1,"input",40),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(3).detalleIngreso.precio_unitario=e})("change",function(){j.xc(o);var e=j.fc(3);return e.detalleIngreso.precio_total=+e.detalleIngreso.precio_unitario*+e.detalleIngreso.cantidad}),j.Sb(),j.Sb()}if(2&e){var n=j.fc(3);j.Cb(1),j.lc("ngModel",n.detalleIngreso.precio_unitario)}}function De(e,t){if(1&e&&(j.Tb(0,"button",28),j.Fc(1," Guardar "),j.Sb()),2&e){j.fc();var o=j.tc(1),n=j.fc(2);j.lc("disabled",!o.form.valid||n.bloqueoBotones||1==+n.documento.enviado||+n.detalleIngreso.cantidad<1)}}var Fe=function(){return[2,3]};function ke(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",41),j.bc("click",function(){return j.xc(o),j.fc(3).addToDetail()}),j.Fc(1," Guardar producci\xf3n "),j.Sb()}if(2&e){j.fc();var n=j.tc(1),i=j.fc(2);j.lc("disabled",!i.detalleIngreso.articulo||!n.form.valid||j.nc(1,Fe).indexOf(+i.ingreso.estatus_movimiento)>=0||+i.detalleIngreso.cantidad<1)}}function Oe(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",29),j.bc("click",function(){return j.xc(o),j.fc(3).resetDetalleIngreso()}),j.Fc(1," Nuevo "),j.Sb()}}function we(e,t){if(1&e){var o=j.Ub();j.Tb(0,"form",9,32),j.bc("ngSubmit",function(){j.xc(o);var e=j.tc(1),t=j.fc(2);return e.form.valid&&t.onSubmitDetail()}),j.Tb(2,"mat-form-field",12),j.Tb(3,"mat-label"),j.Fc(4,"Art\xedculo"),j.Sb(),j.Tb(5,"input",33),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).txtArticuloSelected=e})("keyup",function(){j.xc(o);var e=j.fc(2);return e.filtrarArticulos(e.txtArticuloSelected)}),j.Sb(),j.Tb(6,"mat-autocomplete",34,35),j.bc("optionSelected",function(){return j.xc(o),j.fc(2).setPresentaciones()}),j.Dc(8,_e,2,2,"mat-option",19),j.Sb(),j.Sb(),j.Dc(9,Me,5,2,"mat-form-field",11),j.Dc(10,ye,2,1,"mat-form-field",11),j.Tb(11,"mat-form-field",12),j.Tb(12,"input",36),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).detalleIngreso.cantidad=e})("change",function(){j.xc(o);var e=j.fc(2);return e.detalleIngreso.precio_total=+e.detalleIngreso.precio_unitario*+e.detalleIngreso.cantidad}),j.Sb(),j.Sb(),j.Dc(13,Ie,2,1,"mat-form-field",11),j.Tb(14,"div",15),j.Dc(15,De,2,1,"button",16),j.Dc(16,ke,2,2,"button",37),j.Dc(17,Oe,2,0,"button",17),j.Sb(),j.Sb()}if(2&e){var n=j.tc(7),i=j.fc(2);j.Cb(5),j.lc("ngModel",i.txtArticuloSelected)("ngModelOptions",j.nc(12,fe))("matAutocomplete",n),j.Cb(1),j.lc("displayWith",i.displayArticulo),j.Cb(2),j.lc("ngForOf",i.filteredArticulos),j.Cb(1),j.lc("ngIf",i.saveToDB),j.Cb(1),j.lc("ngIf",!i.bodega),j.Cb(2),j.lc("ngModel",i.detalleIngreso.cantidad),j.Cb(1),j.lc("ngIf",i.saveToDB),j.Cb(2),j.lc("ngIf",i.saveToDB),j.Cb(1),j.lc("ngIf",!i.saveToDB),j.Cb(1),j.lc("ngIf",i.detalleIngreso.ingreso_detalle)}}function Ee(e,t){1&e&&j.Ob(0,"hr")}function Ae(e,t){1&e&&(j.Tb(0,"th",56),j.Fc(1,"Art\xedculo"),j.Sb())}function Re(e,t){if(1&e&&(j.Tb(0,"td",57),j.Fc(1),j.Sb()),2&e){var o=t.$implicit,n=j.fc(3);j.Cb(1),j.Hc(" ",n.saveToDB?o.articulo.descripcion:n.getDescripcionArticulo(o.articulo),"")}}function Be(e,t){1&e&&(j.Tb(0,"th",56),j.Fc(1,"Presentaci\xf3n"),j.Sb())}function He(e,t){if(1&e&&(j.Tb(0,"td",57),j.Fc(1),j.Sb()),2&e){var o=t.$implicit,n=j.fc(3);j.Cb(1),j.Hc(" ",n.saveToDB?o.presentacion.descripcion:n.getDescripcionPresentacion(o.presentacion)," ")}}function Pe(e,t){1&e&&(j.Tb(0,"th",58),j.Fc(1,"Cantidad a Utilizar"),j.Sb())}function je(e,t){if(1&e&&(j.Tb(0,"td",59),j.Fc(1),j.gc(2,"number"),j.Sb()),2&e){var o=t.$implicit;j.Cb(1),j.Hc("",j.ic(2,1,o.cantidad_utilizada,"1.2-2")," ")}}function Ne(e,t){1&e&&(j.Tb(0,"th",58),j.Fc(1,"Cantidad"),j.Sb())}function Ue(e,t){if(1&e&&(j.Tb(0,"td",59),j.Fc(1),j.gc(2,"number"),j.Sb()),2&e){var o=t.$implicit;j.Cb(1),j.Hc("",j.ic(2,1,o.cantidad,"1.2-2")," ")}}function Ge(e,t){1&e&&(j.Tb(0,"th",58),j.Fc(1,"Costo Unitario Con IVA"),j.Sb())}function ze(e,t){if(1&e&&(j.Tb(0,"td",59),j.Fc(1),j.gc(2,"number"),j.Sb()),2&e){var o=t.$implicit;j.Cb(1),j.Hc("",j.ic(2,1,o.precio_unitario,"1.2-2")," ")}}function qe(e,t){1&e&&(j.Tb(0,"th",58),j.Fc(1,"Costo Total con IVA"),j.Sb())}function Le(e,t){if(1&e&&(j.Tb(0,"td",59),j.Fc(1),j.gc(2,"number"),j.Sb()),2&e){var o=t.$implicit;j.Cb(1),j.Gc(j.ic(2,1,o.precio_total,"1.2-2"))}}function $e(e,t){1&e&&(j.Tb(0,"th",56),j.Fc(1,"\xa0"),j.Sb())}function We(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",41),j.bc("click",function(){j.xc(o);var e=j.fc().$implicit;return j.fc(3).getDetalleIngreso(e.ingreso,e.ingreso_detalle)}),j.Fc(1," Editar "),j.Sb()}if(2&e){var n=j.fc(4);j.lc("disabled",n.bloqueoBotones||1==+n.documento.enviado)}}function Ve(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",41),j.bc("click",function(){j.xc(o);var e=j.fc().$implicit;return j.fc(3).editFromDetail(e.articulo)}),j.Fc(1," Editar "),j.Sb()}if(2&e){var n=j.fc(4);j.lc("disabled",j.nc(1,Fe).indexOf(+n.ingreso.estatus_movimiento)>=0||n.bloqueoBotones)}}function Ke(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",41),j.bc("click",function(){j.xc(o);var e=j.fc().$implicit;return j.fc(3).removeFromDetail(e.articulo)}),j.Fc(1," Eliminar "),j.Sb()}if(2&e){var n=j.fc(4);j.lc("disabled",j.nc(1,Fe).indexOf(+n.ingreso.estatus_movimiento)>=0||n.bloqueoBotones)}}function Qe(e,t){if(1&e&&(j.Tb(0,"td",57),j.Dc(1,We,2,1,"button",37),j.Dc(2,Ve,2,2,"button",37),j.Dc(3,Ke,2,2,"button",37),j.Sb()),2&e){var o=j.fc(3);j.Cb(1),j.lc("ngIf",o.saveToDB),j.Cb(1),j.lc("ngIf",!o.saveToDB),j.Cb(1),j.lc("ngIf",!o.saveToDB)}}function Xe(e,t){1&e&&j.Ob(0,"td",57)}function Je(e,t){1&e&&j.Ob(0,"tr",60)}function Ze(e,t){1&e&&j.Ob(0,"tr",61)}function Ye(e,t){if(1&e&&(j.Tb(0,"table",42),j.Rb(1,43),j.Dc(2,Ae,2,0,"th",44),j.Dc(3,Re,2,1,"td",45),j.Qb(),j.Rb(4,46),j.Dc(5,Be,2,0,"th",44),j.Dc(6,He,2,1,"td",45),j.Qb(),j.Rb(7,47),j.Dc(8,Pe,2,0,"th",48),j.Dc(9,je,3,4,"td",49),j.Qb(),j.Rb(10,50),j.Dc(11,Ne,2,0,"th",48),j.Dc(12,Ue,3,4,"td",49),j.Qb(),j.Rb(13,51),j.Dc(14,Ge,2,0,"th",48),j.Dc(15,ze,3,4,"td",49),j.Qb(),j.Rb(16,52),j.Dc(17,qe,2,0,"th",48),j.Dc(18,Le,3,4,"td",49),j.Qb(),j.Rb(19,53),j.Dc(20,$e,2,0,"th",44),j.Dc(21,Qe,4,3,"td",45),j.Dc(22,Xe,1,0,"td",45),j.Qb(),j.Dc(23,Je,1,0,"tr",54),j.Dc(24,Ze,1,0,"tr",55),j.Sb()),2&e){var o=j.fc(2);j.lc("dataSource",o.dataSource),j.Cb(23),j.lc("matHeaderRowDef",o.displayedColumns),j.Cb(1),j.lc("matRowDefColumns",o.displayedColumns)}}function et(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-card",1),j.Tb(1,"mat-card-title"),j.Tb(2,"h4"),j.Fc(3),j.Dc(4,Ce,3,0,"button",2),j.Dc(5,Te,3,0,"button",2),j.Sb(),j.Sb(),j.Tb(6,"mat-card-content"),j.Dc(7,we,18,13,"form",3),j.Dc(8,Ee,1,0,"hr",4),j.Tb(9,"mat-form-field",12),j.Tb(10,"input",30),j.bc("keyup",function(e){return j.xc(o),j.fc().applyFilter(e.target.value)}),j.Sb(),j.Sb(),j.Dc(11,Ye,25,3,"table",31),j.Sb(),j.Sb()}if(2&e){var n=j.fc();j.Cb(3),j.Ic(" Detalle del ingreso ",n.saveToDB?"No.":""," ",n.ingreso.ingreso," "),j.Cb(1),j.lc("ngIf",!n.showDetalleIngresoForm),j.Cb(1),j.lc("ngIf",n.showDetalleIngresoForm),j.Cb(2),j.lc("ngIf",n.showDetalleIngresoForm),j.Cb(1),j.lc("ngIf",n.detallesIngreso.length>0),j.Cb(3),j.lc("ngIf",n.detallesIngreso.length>0)}}function tt(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",7),j.bc("click",function(){return j.xc(o),j.fc(2).showDocumentoForm=!0}),j.Tb(1,"mat-icon",8),j.Fc(2,"expand_more"),j.Sb(),j.Sb()}}function ot(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",7),j.bc("click",function(){return j.xc(o),j.fc(2).showDocumentoForm=!1}),j.Tb(1,"mat-icon",8),j.Fc(2,"expand_less"),j.Sb(),j.Sb()}}function nt(e,t){if(1&e&&(j.Tb(0,"mat-option",20),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.documento_tipo),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function it(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-form-field",12),j.Tb(1,"mat-label"),j.Fc(2,"Tipo de documento"),j.Sb(),j.Tb(3,"mat-select",68),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(3).documento.documento_tipo=e}),j.Dc(4,nt,2,2,"mat-option",19),j.Sb(),j.Sb()}if(2&e){var n=j.fc(3);j.Cb(3),j.lc("ngModel",n.documento.documento_tipo)("disabled",1==+n.documento.enviado),j.Cb(1),j.lc("ngForOf",n.documentosTipo)}}function at(e,t){if(1&e&&(j.Tb(0,"mat-option",20),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.tipo_compra_venta),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function ct(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-form-field",12),j.Tb(1,"mat-label"),j.Fc(2,"Tipo de compra"),j.Sb(),j.Tb(3,"mat-select",69),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(3).documento.tipo_compra_venta=e}),j.Dc(4,at,2,2,"mat-option",19),j.Sb(),j.Sb()}if(2&e){var n=j.fc(3);j.Cb(3),j.lc("ngModel",n.documento.tipo_compra_venta)("disabled",1==+n.documento.enviado),j.Cb(1),j.lc("ngForOf",n.tiposCompraVenta)}}function rt(e,t){if(1&e&&(j.Tb(0,"button",28),j.Fc(1," Guardar detalle "),j.Sb()),2&e){j.fc();var o=j.tc(1),n=j.fc(2);j.lc("disabled",!o.form.valid||n.bloqueoBotones||1==+n.documento.enviado)}}function st(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",70),j.bc("click",function(){return j.xc(o),j.fc(3).enviarAConta()}),j.Fc(1," Enviar a contabilidad "),j.Sb()}if(2&e){j.fc();var n=j.tc(1),i=j.fc(2);j.lc("disabled",!n.form.valid||i.bloqueoBotones||1==+i.documento.enviado)}}function lt(e,t){if(1&e){var o=j.Ub();j.Tb(0,"form",9,63),j.bc("ngSubmit",function(){j.xc(o);var e=j.tc(1),t=j.fc(2);return e.form.valid&&t.submitDocumento()}),j.Dc(2,it,5,3,"mat-form-field",11),j.Tb(3,"mat-form-field",12),j.Tb(4,"input",64),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).documento.serie=e}),j.Sb(),j.Sb(),j.Tb(5,"mat-form-field",12),j.Tb(6,"input",65),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).documento.numero=e}),j.Sb(),j.Sb(),j.Tb(7,"mat-form-field",12),j.Tb(8,"input",66),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).documento.fecha=e}),j.Sb(),j.Sb(),j.Dc(9,ct,5,3,"mat-form-field",11),j.Tb(10,"div",15),j.Dc(11,rt,2,1,"button",16),j.Dc(12,st,2,1,"button",67),j.Sb(),j.Sb()}if(2&e){var n=j.fc(2);j.Cb(2),j.lc("ngIf",n.saveToDB),j.Cb(2),j.lc("ngModel",n.documento.serie)("disabled",1==+n.documento.enviado),j.Cb(2),j.lc("ngModel",n.documento.numero)("disabled",1==+n.documento.enviado),j.Cb(2),j.lc("ngModel",n.documento.fecha)("disabled",1==+n.documento.enviado),j.Cb(1),j.lc("ngIf",n.saveToDB),j.Cb(2),j.lc("ngIf",n.saveToDB),j.Cb(1),j.lc("ngIf",n.saveToDB&&+n.documento.documento>0&&0==+n.documento.enviado)}}function ut(e,t){if(1&e&&(j.Tb(0,"mat-tab",62),j.Tb(1,"mat-card",1),j.Tb(2,"mat-card-title"),j.Tb(3,"h4"),j.Fc(4),j.Dc(5,tt,3,0,"button",2),j.Dc(6,ot,3,0,"button",2),j.Sb(),j.Sb(),j.Tb(7,"mat-card-content"),j.Dc(8,lt,13,10,"form",3),j.Sb(),j.Sb(),j.Sb()),2&e){var o=j.fc();j.Cb(4),j.Hc(" Documento del ingreso",o.ingreso.ingreso?" No. "+o.ingreso.ingreso:""," "),j.Cb(1),j.lc("ngIf",!o.showDocumentoForm),j.Cb(1),j.lc("ngIf",o.showDocumentoForm),j.Cb(2),j.lc("ngIf",o.showDocumentoForm)}}var dt,bt,gt,ft=((dt=function(){function e(t,o,n,i,a,c,r,l,u,d,b){var g=this;s(this,e),this.dialog=t,this.snackBar=o,this.ls=n,this.ingresoSrvc=i,this.proveedorSrvc=a,this.tipoMovimientoSrvc=c,this.bodegaSrvc=r,this.articuloSrvc=l,this.presentacinSrvc=u,this.documentoTipoSrvc=d,this.tipoCompraVentaSrvc=b,this.saveToDB=!0,this.bodega=!0,this.produccion=!1,this.ingresoSavedEv=new j.o,this.showIngresoForm=!0,this.showDetalleIngresoForm=!0,this.showDocumentoForm=!0,this.detallesIngreso=[],this.displayedColumns=["articulo","presentacion","cantidad","costo_unitario","costo_total","deleteItem"],this.tiposMovimiento=[],this.proveedores=[],this.filteredProveedores=[],this.bodegas=[],this.articulos=[],this.filteredArticulos=[],this.presentaciones=[],this.fltrPresentaciones=[],this.esMovil=!1,this.bloqueoBotones=!1,this.txtArticuloSelected=void 0,this.txtProveedorSelected=void 0,this.documentosTipo=[],this.tiposCompraVenta=[],this.loadTiposMovimiento=function(){g.tipoMovimientoSrvc.get({ingreso:1}).subscribe(function(e){e&&(g.tiposMovimiento=e)})},this.loadProveedores=function(){g.proveedorSrvc.get().subscribe(function(e){e&&(g.proveedores=e)})},this.loadBodegas=function(){g.bodegaSrvc.get({sede:+g.ls.get(H.a.usrTokenVar).sede||0}).subscribe(function(e){e&&(g.bodegas=e)})},this.loadPresentaciones=function(){g.presentacinSrvc.get().subscribe(function(e){e&&(g.presentaciones=e)})},this.loadDocumentosTipo=function(){g.documentoTipoSrvc.get().subscribe(function(e){e&&(g.documentosTipo=e)})},this.loadTiposCompraVenta=function(){g.tipoCompraVentaSrvc.get().subscribe(function(e){e&&(g.tiposCompraVenta=e)})},this.removeFromDetail=function(e){var t=g.detallesIngreso.findIndex(function(t){return+t.articulo==+e});t>=0&&(g.detallesIngreso.splice(t,1),g.updateTableDataSource())},this.resetIngreso=function(){g.ingreso={ingreso:null,tipo_movimiento:null,fecha:P().format(H.a.dbDateFormat),bodega:null,usuario:g.ls.get(H.a.usrTokenVar).idusr||0,comentario:null,proveedor:null,estatus_movimiento:1},g.resetDetalleIngreso(),g.detallesIngreso=[],g.resetDocumento(),g.updateTableDataSource(),g.txtProveedorSelected=void 0},this.onSubmit=function(){g.bloqueoBotones=!0,g.ingresoSrvc.save(g.ingreso).subscribe(function(e){g.resetIngreso(),e.exito&&(g.ingreso=e.ingreso,g.setProveedor(+g.ingreso.proveedor)),g.ingresoSavedEv.emit(),g.bloqueoBotones=!1})},this.loadArticulos=function(){var e={};g.produccion&&(e={produccion:1}),g.articuloSrvc.getArticulosIngreso(e).subscribe(function(e){e&&(g.articulos=e)})},this.resetDetalleIngreso=function(){g.detalleIngreso={ingreso_detalle:null,ingreso:g.ingreso.ingreso?g.ingreso.ingreso:null,articulo:null,cantidad:null,precio_unitario:null,precio_total:null,presentacion:0},g.txtArticuloSelected=void 0},this.loadDetalleIngreso=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+g.ingreso.ingreso;g.ingresoSrvc.getDetalle(e,{ingreso:e}).subscribe(function(e){e&&(g.detallesIngreso=e,g.updateTableDataSource())})},this.getDetalleIngreso=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+g.ingreso.ingreso,t=arguments.length>1?arguments[1]:void 0;g.ingresoSrvc.getDetalle(e,{ingreso_detalle:t}).subscribe(function(e){e&&(g.detalleIngreso={ingreso_detalle:e[0].ingreso_detalle,ingreso:e[0].ingreso,articulo:e[0].articulo.articulo,cantidad:+e[0].cantidad,precio_unitario:+e[0].precio_unitario,precio_total:+e[0].precio_total,presentacion:e[0].presentacion.presentacion},g.setPresentaciones(),g.txtArticuloSelected=e[0].articulo,g.showDetalleIngresoForm=!0)})},this.onSubmitDetail=function(){g.bloqueoBotones=!0,g.detalleIngreso.ingreso=g.ingreso.ingreso,g.detalleIngreso.precio_total=+g.detalleIngreso.cantidad*+g.detalleIngreso.precio_unitario,+g.detalleIngreso.cantidad<1&&(g.detalleIngreso.cantidad=1),g.ingresoSrvc.saveDetalle(g.detalleIngreso).subscribe(function(e){e&&(g.loadDetalleIngreso(),g.resetDetalleIngreso()),g.bloqueoBotones=!1})},this.agregaADetalle=function(){var e,t=g.detallesIngreso.findIndex(function(e){return+e.articulo==+g.detalleIngreso.articulo});t>-1&&g.detallesIngreso.splice(t,1),e=g.articulos.filter(function(e){return+e.articulo==g.detalleIngreso.articulo}),g.detalleIngreso.presentacion=e[0].presentacion_reporte,+g.detalleIngreso.cantidad<1&&(g.detalleIngreso.cantidad=1),g.detallesIngreso.push(g.detalleIngreso),g.resetDetalleIngreso(),g.updateTableDataSource()},this.addToDetail=function(){g.detalleIngreso.cantidad>0?g.produccion||g.detalleIngreso.cantidad_utilizada>0?g.agregaADetalle():g.snackBar.open("ERROR: La cantidad a utilizar debe ser mayor a 0","Egreso",{duration:3e3}):g.snackBar.open("ERROR: La cantidad debe ser mayor a 0","Egreso",{duration:3e3})},this.editFromDetail=function(e){var t=g.detallesIngreso.filter(function(t){return+t.articulo==+e})[0];g.detalleIngreso={ingreso_detalle:t.ingreso_detalle,ingreso:t.ingreso,articulo:t.articulo,cantidad:+t.cantidad<1?1:t.cantidad,precio_unitario:t.precio_unitario,precio_total:t.precio_total,presentacion:t.presentacion,cantidad_utilizada:t.cantidad_utilizada},g.setPresentaciones(),g.txtArticuloSelected=g.articulos.filter(function(e){return+e.articulo==g.detalleIngreso.articulo})[0]},this.getDescripcionArticulo=function(e){return g.articulos.find(function(t){return+t.articulo==+e}).descripcion||""},this.getDescripcionPresentacion=function(e){return g.presentaciones.find(function(t){return+t.presentacion==+e}).descripcion||""},this.updateTableDataSource=function(){g.dataSource=new v.k(g.detallesIngreso),g.dataSource.filterPredicate=function(e,t){return e.articulo.descripcion.toLowerCase().includes(t)}},this.eliminarArticulo=function(e){g.detallesIngreso.splice(g.detallesIngreso.findIndex(function(t){return t.ingreso_detalle===e.ingreso_detalle}),1),g.updateTableDataSource()},this.filtrarArticulos=function(e){if(e&&"string"==typeof e){var t=e.toLowerCase();g.filteredArticulos=g.articulos.filter(function(e){return e.descripcion.toLowerCase().includes(t)})}else g.filteredArticulos=g.articulos},this.displayArticulo=function(e){if(e)return g.detalleIngreso.articulo=e.articulo,e.descripcion},this.filtrarProveedores=function(e){if(e&&"string"==typeof e){var t=e.toLowerCase();g.filteredProveedores=g.proveedores.filter(function(e){return e.razon_social.toLowerCase().includes(t)||e.nit.toLowerCase().includes(t)})}else g.filteredProveedores=g.proveedores},this.displayProveedor=function(e){if(e)return g.ingreso.proveedor=e.proveedor,"(".concat(e.nit,") ").concat(e.razon_social)},this.setPresentaciones=function(){g.fltrPresentaciones=[];var e=g.articulos.findIndex(function(e){return+e.articulo==+g.detalleIngreso.articulo}),t=g.articulos[e];g.fltrPresentaciones=g.presentaciones.filter(function(e){return+e.medida.medida==+t.presentacion.medida})},this.setProveedor=function(e){return g.txtProveedorSelected=g.proveedores.find(function(t){return+t.proveedor===e})},this.applyFilter=function(e){g.dataSource.filter=e.toLocaleLowerCase()},this.resetDocumento=function(){return g.documento={documento:null,ingreso:null,documento_tipo:null,serie:null,numero:null,fecha:null,tipo_compra_venta:null,enviado:0}},this.setDocumentoIngreso=function(e){g.documento={documento:+e.documento,ingreso:+e.ingreso,documento_tipo:e.documento_tipo.documento_tipo,serie:e.serie,numero:e.numero,fecha:e.fecha,tipo_compra_venta:e.tipo_compra_venta.tipo_compra_venta,enviado:e.enviado}},this.loadDocumento=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.ingreso.ingreso||null;e&&g.ingresoSrvc.getDocumento({ingreso:e}).subscribe(function(e){e&&e.length>0?g.setDocumentoIngreso(e[0]):g.resetDocumento()})},this.submitDocumento=function(){g.documento.ingreso=g.ingreso.ingreso,g.ingresoSrvc.saveDocumento(g.documento).subscribe(function(e){e.exito?(g.setDocumentoIngreso(e.documento),g.snackBar.open("Documento guardado con \xe9xito.","Ingreso",{duration:3e3})):g.snackBar.open("ERROR: ".concat(e.mensaje),"Ingreso",{duration:7e3})})},this.enviarAConta=function(){var e;+(null===(e=g.documento)||void 0===e?void 0:e.documento)>0&&g.dialog.open(X.a,{maxWidth:"400px",data:new X.b("Env\xedo a contabilidad","Una vez enviado a contabilidad no podr\xe1 modificar el ingreso ni el documento. \xbfDesea continuar?","S\xed","No")}).afterClosed().subscribe(function(e){e&&g.ingresoSrvc.enviarDocumentoAConta(g.documento.documento).subscribe(function(e){e.exito?(g.documento=e.documento,g.snackBar.open("Documento enviado a contabilidad.","Ingreso",{duration:3e3})):g.snackBar.open("ERROR: ".concat(e.mensaje),"Ingreso",{duration:7e3})})})}}return u(e,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(H.a.usrTokenVar).enmovil||!1,this.resetIngreso(),this.loadTiposMovimiento(),this.loadProveedores(),this.loadBodegas(),this.loadArticulos(),this.loadPresentaciones(),this.loadDocumentosTipo(),this.loadTiposCompraVenta(),this.bodega||(this.displayedColumns=["cantidad_utilizada","articulo","presentacion","cantidad","deleteItem"]),this.produccion&&(this.displayedColumns=["articulo","presentacion","cantidad","deleteItem"])}}]),e}()).\u0275fac=function(e){return new(e||dt)(j.Nb(D.b),j.Nb(_.b),j.Nb(N.a),j.Nb(L),j.Nb(J.a),j.Nb(Z.a),j.Nb(Y.a),j.Nb(ee.a),j.Nb(te.a),j.Nb(oe.a),j.Nb(ne.a))},dt.\u0275cmp=j.Hb({type:dt,selectors:[["app-form-ingreso"]],inputs:{ingreso:"ingreso",saveToDB:"saveToDB",bodega:"bodega",produccion:"produccion"},outputs:{ingresoSavedEv:"ingresoSavedEv"},decls:13,vars:7,consts:[["label","Ingreso"],[1,"mat-elevation-z4","fullWidth"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],["label","Documento",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmIngreso","ngForm"],["class","fullWidth",4,"ngIf"],[1,"fullWidth"],["matInput","","type","date","placeholder","Fecha","name","fecha","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Comentarios","name","comentario",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent","class","btnAccion",3,"disabled",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["name","tipo_movimiento","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["name","bodega","required","",3,"ngModel","ngModelChange"],["name","bodega_origen",3,"ngModel","ngModelChange"],["type","button","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["type","button","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["type","text","placeholder","Proveedor","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith"],["autoProveedores","matAutocomplete"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",3,"click"],["matInput","","placeholder","Buscar",3,"keyup"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleIngreso","ngForm"],["type","text","placeholder","Art\xedculo","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith","optionSelected"],["autoArticulos","matAutocomplete"],["matInput","","placeholder","Cantidad","name","cantidad","type","number","step","0.01","min","1","required","",3,"ngModel","ngModelChange","change"],["mat-raised-button","","type","button","color","accent",3,"disabled","click",4,"ngIf"],["name","presentacion","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Cantidad a Utilizar","name","cantidad_utilizada","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Costo unitario Con IVA","name","precio_unitario","type","number","step","0.01","required","",3,"ngModel","ngModelChange","change"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","articulo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","presentacion"],["matColumnDef","cantidad_utilizada"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","cantidad"],["matColumnDef","costo_unitario"],["matColumnDef","costo_total"],["matColumnDef","deleteItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-header-row",""],["mat-row",""],["label","Documento"],["frmDocumento","ngForm"],["matInput","","type","text","placeholder","Serie","name","serie","minlength","1","maxlength","50","required","",3,"ngModel","disabled","ngModelChange"],["matInput","","type","text","placeholder","N\xfamero","name","numero","minlength","1","maxlength","50","required","",3,"ngModel","disabled","ngModelChange"],["matInput","","type","date","placeholder","Fecha","name","fecha","required","",3,"ngModel","disabled","ngModelChange"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"disabled","click",4,"ngIf"],["name","documento_tipo","required","",3,"ngModel","disabled","ngModelChange"],["name","tipo_compra_venta","required","",3,"ngModel","disabled","ngModelChange"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"]],template:function(e,t){1&e&&(j.Tb(0,"mat-tab-group"),j.Tb(1,"mat-tab",0),j.Tb(2,"mat-card",1),j.Tb(3,"mat-card-title"),j.Tb(4,"h4"),j.Fc(5),j.Dc(6,ie,3,0,"button",2),j.Dc(7,ae,3,0,"button",2),j.Sb(),j.Sb(),j.Tb(8,"mat-card-content"),j.Dc(9,ve,13,8,"form",3),j.Sb(),j.Sb(),j.Dc(10,Se,1,0,"hr",4),j.Dc(11,et,12,7,"mat-card",5),j.Sb(),j.Dc(12,ut,9,4,"mat-tab",6),j.Sb()),2&e&&(j.Cb(5),j.Hc(" Ingreso",t.ingreso.ingreso?" No. "+t.ingreso.ingreso:""," "),j.Cb(1),j.lc("ngIf",!t.showIngresoForm),j.Cb(1),j.lc("ngIf",t.showIngresoForm),j.Cb(2),j.lc("ngIf",t.showIngresoForm),j.Cb(1),j.lc("ngIf",t.ingreso.ingreso||!t.saveToDB),j.Cb(1),j.lc("ngIf",t.ingreso.ingreso||!t.saveToDB),j.Cb(1),j.lc("ngIf",+t.ingreso.ingreso>0))},directives:[h.b,h.a,p.a,p.h,i.m,p.c,T.a,b.a,c.r,c.l,c.m,g.b,f.b,c.c,c.p,c.k,c.n,g.f,S.a,i.l,$.m,g.g,O.c,O.a,c.o,v.j,v.c,v.e,v.b,v.g,v.i,v.d,v.a,v.f,v.h,c.g,c.f],pipes:[i.f],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}"]}),dt),pt=["lstIngreso"],mt=["frmIngreso"],ht=((gt=function(){function e(t){var o=this;s(this,e),this.ls=t,this.breakpoint=2,this.onWindowResize=function(e){o.breakpoint=e.target.innerWidth<=360?1:2},this.setIngreso=function(e){o.ingreso=e,o.frmIngreso.setProveedor(+o.ingreso.proveedor),o.frmIngreso.loadDetalleIngreso(+o.ingreso.ingreso),o.frmIngreso.resetDetalleIngreso(),o.frmIngreso.loadDocumento(o.ingreso.ingreso)},this.refreshIngresoList=function(){o.lstIngresoComponent.loadIngresos()},this.ingreso={ingreso:null,tipo_movimiento:null,fecha:P().format(H.a.dbDateFormat),bodega:null,usuario:this.ls.get(H.a.usrTokenVar).idusr||0,comentario:null,proveedor:null}}return u(e,[{key:"ngOnInit",value:function(){this.breakpoint=window.innerWidth<=360?1:2}}]),e}()).\u0275fac=function(e){return new(e||gt)(j.Nb(N.a))},gt.\u0275cmp=j.Hb({type:gt,selectors:[["app-ingreso"]],viewQuery:function(e,t){var o;1&e&&(j.Kc(pt,1),j.Kc(mt,1)),2&e&&(j.sc(o=j.cc())&&(t.lstIngresoComponent=o.first),j.sc(o=j.cc())&&(t.frmIngreso=o.first))},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getIngresoEv"],["lstIngreso",""],[1,"col","m7","s12"],[3,"ingreso","ingresoSavedEv"],["frmIngreso",""]],template:function(e,t){1&e&&(j.Tb(0,"div",0),j.Tb(1,"div",1),j.Tb(2,"app-lista-ingreso",2,3),j.bc("getIngresoEv",function(e){return t.setIngreso(e)}),j.Sb(),j.Sb(),j.Tb(4,"div",4),j.Tb(5,"app-form-ingreso",5,6),j.bc("ingresoSavedEv",function(){return t.refreshIngresoList()}),j.Sb(),j.Sb(),j.Sb()),2&e&&(j.Cb(5),j.lc("ingreso",t.ingreso))},directives:[Q,ft],styles:[""]}),gt),vt=((bt=function(){function e(t){s(this,e),this.http=t,this.egresoUrl="egreso",this.srvcErrHndl=new U.a}return u(e,[{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(H.a.urlWms,"/").concat(this.egresoUrl,"/buscar_egreso?").concat(q.stringify(e))).pipe(Object(G.a)(H.a.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(e){return this.http.post("".concat(H.a.urlWms,"/").concat(this.egresoUrl,"/guardar").concat(+e.egreso>0?"/"+e.egreso:""),e).pipe(Object(G.a)(H.a.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"getDetalle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.http.get("".concat(H.a.urlWms,"/").concat(this.egresoUrl,"/buscar_detalle/").concat(e,"?").concat(q.stringify(t))).pipe(Object(G.a)(H.a.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"saveDetalle",value:function(e){return this.http.post("".concat(H.a.urlWms,"/").concat(this.egresoUrl,"/guardar_detalle/").concat(e.egreso).concat(+e.egreso_detalle>0?"/"+e.egreso_detalle:""),e).pipe(Object(G.a)(H.a.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}}]),e}()).\u0275fac=function(e){return new(e||bt)(j.Xb(a.b))},bt.\u0275prov=j.Jb({token:bt,factory:bt.\u0275fac,providedIn:"root"}),bt),St=function(){return{standalone:!0}};function Ct(e,t){if(1&e){var o=j.Ub();j.Tb(0,"input",6),j.bc("input",function(){return j.xc(o),j.fc().applyFilter()})("ngModelChange",function(e){return j.xc(o),j.fc().txtFiltro=e}),j.Sb()}if(2&e){var n=j.fc();j.lc("matKeyboard",n.keyboardLayout)("ngModel",n.txtFiltro)("ngModelOptions",j.nc(3,St))}}function Tt(e,t){if(1&e){var o=j.Ub();j.Tb(0,"input",7),j.bc("keyup",function(){return j.xc(o),j.fc().applyFilter()})("ngModelChange",function(e){return j.xc(o),j.fc().txtFiltro=e}),j.Sb()}if(2&e){var n=j.fc();j.lc("ngModel",n.txtFiltro)("ngModelOptions",j.nc(2,St))}}function _t(e,t){if(1&e&&(j.Tb(0,"span",10),j.Fc(1),j.Sb()),2&e){var o=j.fc().$implicit;j.Cb(1),j.Hc("Comanda: #",o.idcomandafox,"")}}function xt(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-list-item",8),j.bc("click",function(){j.xc(o);var e=t.$implicit;return j.fc().getEgreso(e)}),j.Tb(1,"mat-icon",9),j.Fc(2,"trending_down"),j.Sb(),j.Tb(3,"h5",10),j.Fc(4),j.Sb(),j.Ob(5,"br"),j.Tb(6,"p",10),j.Fc(7),j.gc(8,"date"),j.Ob(9,"br"),j.Fc(10),j.Ob(11,"br"),j.Sb(),j.Dc(12,_t,2,1,"span",11),j.Sb()}if(2&e){var n=t.$implicit;j.Cb(4),j.Hc("No. ",n.egreso,""),j.Cb(3),j.Hc(" Fecha: ",j.ic(8,4,n.fecha,"dd/MM/yyyy"),""),j.Cb(3),j.Hc(" Bodega: ",n.bodega.descripcion,""),j.Cb(2),j.lc("ngIf",!!n.idcomandafox)}}var Mt,yt,It=((yt=function(){function e(t,o){var n=this;s(this,e),this.egresoSrvc=t,this.ls=o,this.getEgresoEv=new j.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.keyboardLayout=H.a.IDIOMA_TECLADO,this.esMovil=!1,this.loadEgresos=function(){n.egresoSrvc.get().subscribe(function(e){e&&e.length>0&&(n.lstEgresos=e,n.applyFilter())})},this.getEgreso=function(e){n.getEgresoEv.emit({egreso:e.egreso,tipo_movimiento:e.tipo_movimiento.tipo_movimiento,bodega:e.bodega.bodega,fecha:e.fecha,usuario:e.usuario.usuario,estatus_movimiento:e.estatus_movimiento||1,traslado:e.traslado||0,idcomandafox:e.idcomandafox})},this.pageChange=function(e){n.pageSize=e.pageSize,n.pageIndex=e.pageIndex,n.applyFilter()}}return u(e,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(H.a.usrTokenVar).enmovil||!1,this.loadEgresos()}},{key:"applyFilter",value:function(){if(this.txtFiltro.length>0){var e=Object(H.b)(this.lstEgresos,this.txtFiltro);this.length=e.length,this.lstEgresosPaged=Object(H.e)(e,this.pageSize,this.pageIndex+1)}else this.length=this.lstEgresos.length,this.lstEgresosPaged=Object(H.e)(this.lstEgresos,this.pageSize,this.pageIndex+1)}}]),e}()).\u0275fac=function(e){return new(e||yt)(j.Nb(vt),j.Nb(N.a))},yt.\u0275cmp=j.Hb({type:yt,selectors:[["app-lista-egreso"]],outputs:{getEgresoEv:"getEgresoEv"},decls:8,vars:6,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"matKeyboard","ngModel","ngModelOptions","input","ngModelChange",4,"ngIf"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["matInput","","placeholder","Buscar...",3,"matKeyboard","ngModel","ngModelOptions","input","ngModelChange"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click"],["mat-list-icon",""],["mat-line",""],["mat-line","",4,"ngIf"]],template:function(e,t){1&e&&(j.Tb(0,"mat-card",0),j.Tb(1,"mat-card-content"),j.Tb(2,"mat-form-field",1),j.Dc(3,Ct,1,4,"input",2),j.Dc(4,Tt,1,3,"input",3),j.Sb(),j.Tb(5,"mat-nav-list"),j.Dc(6,xt,13,7,"mat-list-item",4),j.Sb(),j.Tb(7,"mat-paginator",5),j.bc("page",function(e){return t.pageChange(e)}),j.Sb(),j.Sb(),j.Sb()),2&e&&(j.Cb(3),j.lc("ngIf",!t.esMovil),j.Cb(1),j.lc("ngIf",t.esMovil),j.Cb(2),j.lc("ngForOf",t.lstEgresosPaged),j.Cb(1),j.lc("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[p.a,p.c,g.b,i.m,d.e,i.l,I.a,f.b,A.a,c.c,c.k,c.n,d.c,b.a,d.b,$.j],pipes:[i.e],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),yt),Dt=((Mt=function(){function e(t){s(this,e),this.http=t,this.conversorUrl="conversor",this.srvcErrHndl=new U.a}return u(e,[{key:"transformar",value:function(e){return this.http.post("".concat(H.a.urlWms,"/").concat(this.conversorUrl,"/transformar"),e).pipe(Object(G.a)(H.a.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"producir",value:function(e){return this.http.post("".concat(H.a.urlWms,"/").concat(this.conversorUrl,"/producir"),e).pipe(Object(G.a)(H.a.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}}]),e}()).\u0275fac=function(e){return new(e||Mt)(j.Xb(a.b))},Mt.\u0275prov=j.Jb({token:Mt,factory:Mt.\u0275fac,providedIn:"root"}),Mt);function Ft(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",5),j.bc("click",function(){return j.xc(o),j.fc().showEgresoForm=!0}),j.Tb(1,"mat-icon",6),j.Fc(2,"expand_more"),j.Sb(),j.Sb()}}function kt(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",5),j.bc("click",function(){return j.xc(o),j.fc().showEgresoForm=!1}),j.Tb(1,"mat-icon",6),j.Fc(2,"expand_less"),j.Sb(),j.Sb()}}function Ot(e,t){if(1&e&&(j.Tb(0,"mat-option",20),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.tipo_movimiento),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function wt(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-form-field",10),j.Tb(1,"mat-label"),j.Fc(2,"Tipo de movimiento"),j.Sb(),j.Tb(3,"mat-select",19),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).egreso.tipo_movimiento=e}),j.Dc(4,Ot,2,2,"mat-option",13),j.Sb(),j.Sb()}if(2&e){var n=j.fc(2);j.Cb(3),j.lc("ngModel",n.egreso.tipo_movimiento),j.Cb(1),j.lc("ngForOf",n.tiposMovimiento)}}function Et(e,t){if(1&e&&(j.Tb(0,"mat-option",20),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.bodega),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function At(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-checkbox",21),j.bc("ngModelChange",function(e){return j.xc(o),+(j.fc(2).egreso.traslado=e)}),j.Fc(1,"\xbfEs traslado entre bodegas de la misma sede? "),j.Sb()}if(2&e){var n=j.fc(2);j.lc("ngModel",+n.egreso.traslado)}}function Rt(e,t){if(1&e&&(j.Tb(0,"mat-option",20),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.bodega),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function Bt(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-form-field",10),j.Tb(1,"mat-label"),j.Fc(2,"Bodega destino"),j.Sb(),j.Tb(3,"mat-select",22),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).egreso.bodega_destino=e}),j.Dc(4,Rt,2,2,"mat-option",13),j.Sb(),j.Sb()}if(2&e){var n=j.fc(2);j.Cb(3),j.lc("ngModel",n.egreso.bodega_destino)("required",1==+n.egreso.traslado),j.Cb(1),j.lc("ngForOf",n.bodegas)}}function Ht(e,t){if(1&e&&(j.Tb(0,"mat-option",20),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.tipo_movimiento),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function Pt(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-form-field",10),j.Tb(1,"mat-label"),j.Fc(2,"Tipo de movimiento destino"),j.Sb(),j.Tb(3,"mat-select",23),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).egreso.tipo_movimiento_destino=e}),j.Dc(4,Ht,2,2,"mat-option",13),j.Sb(),j.Sb()}if(2&e){var n=j.fc(2);j.Cb(3),j.lc("ngModel",n.egreso.tipo_movimiento_destino)("required",1==+n.egreso.traslado),j.Cb(1),j.lc("ngForOf",n.tiposMovimientoIngreso)}}function jt(e,t){if(1&e&&(j.Tb(0,"span"),j.Ob(1,"br"),j.Tb(2,"strong"),j.Fc(3),j.Sb(),j.Sb()),2&e){var o=j.fc(2);j.Cb(3),j.Hc("Comanda: #",o.egreso.idcomandafox,"")}}var Nt=function(){return[2,3]};function Ut(e,t){if(1&e&&(j.Tb(0,"button",24),j.Fc(1," Guardar "),j.Sb()),2&e){j.fc();var o=j.tc(1),n=j.fc();j.lc("disabled",!o.form.valid||j.nc(1,Nt).indexOf(+n.egreso.estatus_movimiento)>=0||n.bloqueoBotones)}}function Gt(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",25),j.bc("click",function(){return j.xc(o),j.fc(2).confirmarEgreso()}),j.Fc(1," Confirmar "),j.Sb()}if(2&e){j.fc();var n=j.tc(1),i=j.fc();j.lc("disabled",!n.form.valid||j.nc(1,Nt).indexOf(+i.egreso.estatus_movimiento)>=0)}}function zt(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",26),j.bc("click",function(){return j.xc(o),j.fc(2).resetEgreso()}),j.Fc(1," Nuevo "),j.Sb()}}function qt(e,t){if(1&e){var o=j.Ub();j.Tb(0,"form",7,8),j.bc("ngSubmit",function(){j.xc(o);var e=j.tc(1),t=j.fc();return e.form.valid&&t.onSubmit()}),j.Dc(2,wt,5,2,"mat-form-field",9),j.Tb(3,"mat-form-field",10),j.Tb(4,"input",11),j.bc("ngModelChange",function(e){return j.xc(o),j.fc().egreso.fecha=e}),j.Sb(),j.Sb(),j.Tb(5,"mat-form-field",10),j.Tb(6,"mat-label"),j.Fc(7,"Bodega"),j.Sb(),j.Tb(8,"mat-select",12),j.bc("ngModelChange",function(e){return j.xc(o),j.fc().egreso.bodega=e}),j.Dc(9,Et,2,2,"mat-option",13),j.Sb(),j.Sb(),j.Dc(10,At,2,1,"mat-checkbox",14),j.Dc(11,Bt,5,3,"mat-form-field",9),j.Dc(12,Pt,5,3,"mat-form-field",9),j.Dc(13,jt,4,1,"span",3),j.Tb(14,"div",15),j.Dc(15,Ut,2,2,"button",16),j.Dc(16,Gt,2,2,"button",17),j.Dc(17,zt,2,0,"button",18),j.Sb(),j.Sb()}if(2&e){var n=j.fc();j.Cb(2),j.lc("ngIf",n.saveToDB),j.Cb(2),j.lc("ngModel",n.egreso.fecha),j.Cb(4),j.lc("ngModel",n.egreso.bodega),j.Cb(1),j.lc("ngForOf",n.bodegas),j.Cb(1),j.lc("ngIf",n.saveToDB),j.Cb(1),j.lc("ngIf",1==+n.egreso.traslado&&j.nc(11,Nt).indexOf(+n.egreso.estatus_movimiento)<0),j.Cb(1),j.lc("ngIf",1==+n.egreso.traslado&&j.nc(12,Nt).indexOf(+n.egreso.estatus_movimiento)<0),j.Cb(1),j.lc("ngIf",!!n.egreso.idcomandafox),j.Cb(2),j.lc("ngIf",n.saveToDB),j.Cb(1),j.lc("ngIf",n.egreso.egreso&&n.detallesEgreso.length>0),j.Cb(1),j.lc("ngIf",n.egreso.egreso)}}function Lt(e,t){1&e&&j.Ob(0,"hr")}function $t(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",5),j.bc("click",function(){return j.xc(o),j.fc(2).showDetalleEgresoForm=!0}),j.Tb(1,"mat-icon",6),j.Fc(2,"expand_more"),j.Sb(),j.Sb()}}function Wt(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",5),j.bc("click",function(){return j.xc(o),j.fc(2).showDetalleEgresoForm=!1}),j.Tb(1,"mat-icon",6),j.Fc(2,"expand_less"),j.Sb(),j.Sb()}}function Vt(e,t){if(1&e&&(j.Tb(0,"mat-option",20),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function Kt(e,t){if(1&e&&(j.Tb(0,"mat-option",20),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.presentacion),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function Qt(e,t){if(1&e&&(j.Tb(0,"button",24),j.Fc(1," Guardar "),j.Sb()),2&e){j.fc();var o=j.tc(1),n=j.fc(2);j.lc("disabled",!o.form.valid||j.nc(1,Nt).indexOf(+n.egreso.estatus_movimiento)>=0||n.bloqueoBotones)}}function Xt(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",37),j.bc("click",function(){return j.xc(o),j.fc(3).addToDetail()}),j.Fc(1," Guardar "),j.Sb()}if(2&e){j.fc();var n=j.tc(1),i=j.fc(2);j.lc("disabled",!i.egreso.bodega||!n.form.valid||j.nc(1,Nt).indexOf(+i.egreso.estatus_movimiento)>=0)}}function Jt(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",26),j.bc("click",function(){return j.xc(o),j.fc(3).resetDetalleEgreso()}),j.Fc(1," Nuevo "),j.Sb()}}var Zt=function(){return{standalone:!0}};function Yt(e,t){if(1&e){var o=j.Ub();j.Tb(0,"form",7,30),j.bc("ngSubmit",function(){j.xc(o);var e=j.tc(1),t=j.fc(2);return e.form.valid&&t.onSubmitDetail()}),j.Tb(2,"mat-form-field",10),j.Tb(3,"mat-label"),j.Fc(4,"Art\xedculo"),j.Sb(),j.Tb(5,"input",31),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).txtArticuloSelected=e})("keyup",function(){j.xc(o);var e=j.fc(2);return e.filtrarArticulos(e.txtArticuloSelected)}),j.Sb(),j.Tb(6,"mat-autocomplete",32,33),j.bc("optionSelected",function(){return j.xc(o),j.fc(2).setPresentaciones()}),j.Dc(8,Vt,2,2,"mat-option",13),j.Sb(),j.Sb(),j.Tb(9,"mat-form-field",10),j.Tb(10,"mat-label"),j.Fc(11,"Presentaci\xf3n"),j.Sb(),j.Tb(12,"mat-select",34),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).detalleEgreso.presentacion=e}),j.Dc(13,Kt,2,2,"mat-option",13),j.Sb(),j.Sb(),j.Tb(14,"mat-form-field",10),j.Tb(15,"input",35),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).detalleEgreso.cantidad=e})("change",function(){j.xc(o);var e=j.fc(2);return e.detalleEgreso.precio_total=+e.detalleEgreso.precio_unitario*+e.detalleEgreso.cantidad}),j.Sb(),j.Sb(),j.Tb(16,"div",15),j.Dc(17,Qt,2,2,"button",16),j.Dc(18,Xt,2,2,"button",36),j.Dc(19,Jt,2,0,"button",18),j.Sb(),j.Sb()}if(2&e){var n=j.tc(7),i=j.fc(2);j.Cb(5),j.lc("ngModel",i.txtArticuloSelected)("ngModelOptions",j.nc(11,Zt))("matAutocomplete",n),j.Cb(1),j.lc("displayWith",i.displayArticulo),j.Cb(2),j.lc("ngForOf",i.filteredArticulos),j.Cb(4),j.lc("ngModel",i.detalleEgreso.presentacion),j.Cb(1),j.lc("ngForOf",i.fltrPresentaciones),j.Cb(2),j.lc("ngModel",i.detalleEgreso.cantidad),j.Cb(2),j.lc("ngIf",i.saveToDB),j.Cb(1),j.lc("ngIf",!i.saveToDB),j.Cb(1),j.lc("ngIf",i.detalleEgreso.egreso_detalle)}}function eo(e,t){1&e&&j.Ob(0,"hr")}function to(e,t){if(1&e){var o=j.Ub();j.Tb(0,"input",38),j.bc("input",function(e){return j.xc(o),j.fc(2).applyFilter(e.target.value)}),j.Sb()}if(2&e){var n=j.fc(2);j.lc("matKeyboard",n.keyboardLayout)}}function oo(e,t){if(1&e){var o=j.Ub();j.Tb(0,"input",39),j.bc("keyup",function(e){return j.xc(o),j.fc(2).applyFilter(e.target.value)}),j.Sb()}}function no(e,t){1&e&&(j.Tb(0,"th",53),j.Fc(1,"Art\xedculo"),j.Sb())}function io(e,t){if(1&e&&(j.Tb(0,"td",54),j.Fc(1),j.Sb()),2&e){var o=t.$implicit,n=j.fc(3);j.Cb(1),j.Hc(" ",n.saveToDB?o.articulo.descripcion:n.getDescripcionArticulo(o.articulo),"")}}function ao(e,t){1&e&&(j.Tb(0,"th",53),j.Fc(1,"Presentaci\xf3n"),j.Sb())}function co(e,t){if(1&e&&(j.Tb(0,"td",54),j.Fc(1),j.Sb()),2&e){var o=t.$implicit,n=j.fc(3);j.Cb(1),j.Hc(" ",n.saveToDB?o.presentacion.descripcion:n.getDescripcionPresentacion(o.presentacion)," ")}}function ro(e,t){1&e&&(j.Tb(0,"th",55),j.Fc(1,"Cantidad"),j.Sb())}function so(e,t){if(1&e&&(j.Tb(0,"td",56),j.Fc(1),j.gc(2,"number"),j.Sb()),2&e){var o=t.$implicit;j.Cb(1),j.Gc(j.ic(2,1,o.cantidad,"1.2-2"))}}function lo(e,t){1&e&&(j.Tb(0,"th",55),j.Fc(1,"Costo Unitario"),j.Sb())}function uo(e,t){if(1&e&&(j.Tb(0,"td",56),j.Fc(1),j.gc(2,"number"),j.Sb()),2&e){var o=t.$implicit;j.Cb(1),j.Hc("",j.ic(2,1,o.precio_unitario,"1.2-2")," ")}}function bo(e,t){1&e&&(j.Tb(0,"th",55),j.Fc(1,"Costo Total"),j.Sb())}function go(e,t){if(1&e&&(j.Tb(0,"td",56),j.Fc(1),j.gc(2,"number"),j.Sb()),2&e){var o=t.$implicit;j.Cb(1),j.Gc(j.ic(2,1,o.precio_total,"1.2-2"))}}function fo(e,t){1&e&&(j.Tb(0,"th",53),j.Fc(1,"\xa0"),j.Sb())}function po(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",25),j.bc("click",function(){j.xc(o);var e=j.fc().$implicit;return j.fc(3).getDetalleEgreso(e.egreso,e.egreso_detalle)}),j.Fc(1," Editar "),j.Sb()}if(2&e){var n=j.fc(4);j.lc("disabled",j.nc(1,Nt).indexOf(+n.egreso.estatus_movimiento)>=0||n.bloqueoBotones)}}function mo(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",37),j.bc("click",function(){j.xc(o);var e=j.fc().$implicit;return j.fc(3).editFromDetail(e.articulo)}),j.Fc(1," Editar "),j.Sb()}if(2&e){var n=j.fc(4);j.lc("disabled",j.nc(1,Nt).indexOf(+n.egreso.estatus_movimiento)>=0||n.bloqueoBotones)}}function ho(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",37),j.bc("click",function(){j.xc(o);var e=j.fc().$implicit;return j.fc(3).removeFromDetail(e.articulo)}),j.Fc(1," Eliminar "),j.Sb()}if(2&e){var n=j.fc(4);j.lc("disabled",j.nc(1,Nt).indexOf(+n.egreso.estatus_movimiento)>=0||n.bloqueoBotones)}}function vo(e,t){if(1&e&&(j.Tb(0,"td",54),j.Dc(1,po,2,2,"button",17),j.Dc(2,mo,2,2,"button",36),j.Dc(3,ho,2,2,"button",36),j.Sb()),2&e){var o=j.fc(3);j.Cb(1),j.lc("ngIf",o.saveToDB),j.Cb(1),j.lc("ngIf",!o.saveToDB),j.Cb(1),j.lc("ngIf",!o.saveToDB)}}function So(e,t){1&e&&j.Ob(0,"tr",57)}function Co(e,t){1&e&&j.Ob(0,"tr",58)}function To(e,t){if(1&e&&(j.Tb(0,"table",40),j.Rb(1,41),j.Dc(2,no,2,0,"th",42),j.Dc(3,io,2,1,"td",43),j.Qb(),j.Rb(4,44),j.Dc(5,ao,2,0,"th",42),j.Dc(6,co,2,1,"td",43),j.Qb(),j.Rb(7,45),j.Dc(8,ro,2,0,"th",46),j.Dc(9,so,3,4,"td",47),j.Qb(),j.Rb(10,48),j.Dc(11,lo,2,0,"th",46),j.Dc(12,uo,3,4,"td",47),j.Qb(),j.Rb(13,49),j.Dc(14,bo,2,0,"th",46),j.Dc(15,go,3,4,"td",47),j.Qb(),j.Rb(16,50),j.Dc(17,fo,2,0,"th",42),j.Dc(18,vo,4,3,"td",43),j.Qb(),j.Dc(19,So,1,0,"tr",51),j.Dc(20,Co,1,0,"tr",52),j.Sb()),2&e){var o=j.fc(2);j.lc("dataSource",o.dataSource),j.Cb(19),j.lc("matHeaderRowDef",o.displayedColumns),j.Cb(1),j.lc("matRowDefColumns",o.displayedColumns)}}function _o(e,t){if(1&e&&(j.Tb(0,"mat-card",0),j.Tb(1,"mat-card-title"),j.Tb(2,"h4"),j.Fc(3),j.Dc(4,$t,3,0,"button",1),j.Dc(5,Wt,3,0,"button",1),j.Sb(),j.Sb(),j.Tb(6,"mat-card-content"),j.Dc(7,Yt,20,12,"form",2),j.Dc(8,eo,1,0,"hr",3),j.Tb(9,"mat-form-field",10),j.Dc(10,to,1,1,"input",27),j.Dc(11,oo,1,0,"input",28),j.Sb(),j.Dc(12,To,21,3,"table",29),j.Sb(),j.Sb()),2&e){var o=j.fc();j.Cb(3),j.Ic(" Detalle del egreso ",o.saveToDB?"No.":""," ",o.egreso.egreso," "),j.Cb(1),j.lc("ngIf",!o.showDetalleEgresoForm),j.Cb(1),j.lc("ngIf",o.showDetalleEgresoForm),j.Cb(2),j.lc("ngIf",o.showDetalleEgresoForm),j.Cb(1),j.lc("ngIf",o.detallesEgreso.length>0),j.Cb(2),j.lc("ngIf",!o.esMovil),j.Cb(1),j.lc("ngIf",o.esMovil),j.Cb(1),j.lc("ngIf",o.detallesEgreso.length>0)}}function xo(e,t){1&e&&j.Ob(0,"hr")}function Mo(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",5),j.bc("click",function(){return j.xc(o),j.fc(2).showDetalleEgresoForm=!0}),j.Tb(1,"mat-icon",6),j.Fc(2,"expand_more"),j.Sb(),j.Sb()}}function yo(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",5),j.bc("click",function(){return j.xc(o),j.fc(2).showDetalleEgresoForm=!1}),j.Tb(1,"mat-icon",6),j.Fc(2,"expand_less"),j.Sb(),j.Sb()}}function Io(e,t){if(1&e&&(j.Tb(0,"mat-option",20),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function Do(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",37),j.bc("click",function(){return j.xc(o),j.fc(3).addToDetailMerma()}),j.Fc(1," Guardar "),j.Sb()}if(2&e){j.fc();var n=j.tc(1),i=j.fc(2);j.lc("disabled",!i.detalleMerma.articulo||!n.form.valid||j.nc(1,Nt).indexOf(+i.egreso.estatus_movimiento)>=0)}}function Fo(e,t){if(1&e){var o=j.Ub();j.Tb(0,"form",7,59),j.bc("ngSubmit",function(){j.xc(o);var e=j.tc(1),t=j.fc(2);return e.form.valid&&t.onSubmitDetail()}),j.Tb(2,"mat-form-field",10),j.Tb(3,"mat-label"),j.Fc(4,"Art\xedculo"),j.Sb(),j.Tb(5,"input",31),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).txtArticuloSelectedM=e})("keyup",function(){j.xc(o);var e=j.fc(2);return e.filtrarArticulos(e.txtArticuloSelectedM)}),j.Sb(),j.Tb(6,"mat-autocomplete",32,33),j.bc("optionSelected",function(){return j.xc(o),j.fc(2).setPresentacionesMerma()}),j.Dc(8,Io,2,2,"mat-option",13),j.Sb(),j.Sb(),j.Tb(9,"mat-form-field",10),j.Tb(10,"input",60),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).detalleMerma.cantidad_utilizada=e}),j.Sb(),j.Sb(),j.Tb(11,"mat-form-field",10),j.Tb(12,"input",61),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).detalleMerma.cantidad=e}),j.Sb(),j.Sb(),j.Tb(13,"div",15),j.Dc(14,Do,2,2,"button",36),j.Sb(),j.Sb()}if(2&e){var n=j.tc(7),i=j.fc(2);j.Cb(5),j.lc("ngModel",i.txtArticuloSelectedM)("ngModelOptions",j.nc(8,Zt))("matAutocomplete",n),j.Cb(1),j.lc("displayWith",i.displayArticuloMerma),j.Cb(2),j.lc("ngForOf",i.filteredArticulos),j.Cb(2),j.lc("ngModel",i.detalleMerma.cantidad_utilizada),j.Cb(2),j.lc("ngModel",i.detalleMerma.cantidad),j.Cb(2),j.lc("ngIf",!i.saveToDB)}}function ko(e,t){1&e&&j.Ob(0,"hr")}function Oo(e,t){1&e&&(j.Tb(0,"th",53),j.Fc(1,"Art\xedculo"),j.Sb())}function wo(e,t){if(1&e&&(j.Tb(0,"td",54),j.Fc(1),j.Sb()),2&e){var o=t.$implicit,n=j.fc(3);j.Cb(1),j.Hc(" ",n.saveToDB?o.articulo.descripcion:n.getDescripcionArticulo(o.articulo),"")}}function Eo(e,t){1&e&&(j.Tb(0,"th",53),j.Fc(1,"Presentaci\xf3n"),j.Sb())}function Ao(e,t){if(1&e&&(j.Tb(0,"td",54),j.Fc(1),j.Sb()),2&e){var o=t.$implicit,n=j.fc(3);j.Cb(1),j.Hc(" ",n.saveToDB?o.presentacion.descripcion:n.getDescripcionPresentacion(o.presentacion)," ")}}function Ro(e,t){1&e&&(j.Tb(0,"th",55),j.Fc(1,"Cantidad a Utilizar"),j.Sb())}function Bo(e,t){if(1&e&&(j.Tb(0,"td",56),j.Fc(1),j.gc(2,"number"),j.Sb()),2&e){var o=t.$implicit;j.Cb(1),j.Gc(j.ic(2,1,o.cantidad_utilizada,"1.2-2"))}}function Ho(e,t){1&e&&(j.Tb(0,"th",55),j.Fc(1,"Cantidad"),j.Sb())}function Po(e,t){if(1&e&&(j.Tb(0,"td",56),j.Fc(1),j.gc(2,"number"),j.Sb()),2&e){var o=t.$implicit;j.Cb(1),j.Gc(j.ic(2,1,o.cantidad,"1.2-2"))}}function jo(e,t){1&e&&(j.Tb(0,"th",53),j.Fc(1,"\xa0"),j.Sb())}function No(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",25),j.bc("click",function(){j.xc(o);var e=j.fc().$implicit;return j.fc(3).getDetalleEgreso(e.egreso,e.egreso_detalle)}),j.Fc(1," Editar "),j.Sb()}if(2&e){var n=j.fc(4);j.lc("disabled",j.nc(1,Nt).indexOf(+n.egreso.estatus_movimiento)>=0||n.bloqueoBotones)}}function Uo(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",37),j.bc("click",function(){j.xc(o);var e=j.fc().$implicit;return j.fc(3).editFromDetailMerma(e.articulo)}),j.Fc(1," Editar "),j.Sb()}if(2&e){var n=j.fc(4);j.lc("disabled",j.nc(1,Nt).indexOf(+n.egreso.estatus_movimiento)>=0||n.bloqueoBotones)}}function Go(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",37),j.bc("click",function(){j.xc(o);var e=j.fc().$implicit;return j.fc(3).removeFromDetailMerma(e.articulo)}),j.Fc(1," Eliminar "),j.Sb()}if(2&e){var n=j.fc(4);j.lc("disabled",j.nc(1,Nt).indexOf(+n.egreso.estatus_movimiento)>=0||n.bloqueoBotones)}}function zo(e,t){if(1&e&&(j.Tb(0,"td",54),j.Dc(1,No,2,2,"button",17),j.Dc(2,Uo,2,2,"button",36),j.Dc(3,Go,2,2,"button",36),j.Sb()),2&e){var o=j.fc(3);j.Cb(1),j.lc("ngIf",o.saveToDB),j.Cb(1),j.lc("ngIf",!o.saveToDB),j.Cb(1),j.lc("ngIf",!o.saveToDB)}}function qo(e,t){1&e&&j.Ob(0,"tr",57)}function Lo(e,t){1&e&&j.Ob(0,"tr",58)}function $o(e,t){if(1&e&&(j.Tb(0,"table",40),j.Rb(1,41),j.Dc(2,Oo,2,0,"th",42),j.Dc(3,wo,2,1,"td",43),j.Qb(),j.Rb(4,44),j.Dc(5,Eo,2,0,"th",42),j.Dc(6,Ao,2,1,"td",43),j.Qb(),j.Rb(7,62),j.Dc(8,Ro,2,0,"th",46),j.Dc(9,Bo,3,4,"td",47),j.Qb(),j.Rb(10,45),j.Dc(11,Ho,2,0,"th",46),j.Dc(12,Po,3,4,"td",47),j.Qb(),j.Rb(13,50),j.Dc(14,jo,2,0,"th",42),j.Dc(15,zo,4,3,"td",43),j.Qb(),j.Dc(16,qo,1,0,"tr",51),j.Dc(17,Lo,1,0,"tr",52),j.Sb()),2&e){var o=j.fc(2);j.lc("dataSource",o.dataSourceM),j.Cb(16),j.lc("matHeaderRowDef",o.displayedColumnsM),j.Cb(1),j.lc("matRowDefColumns",o.displayedColumnsM)}}function Wo(e,t){if(1&e&&(j.Tb(0,"mat-card",0),j.Tb(1,"mat-card-title"),j.Tb(2,"h4"),j.Fc(3),j.Dc(4,Mo,3,0,"button",1),j.Dc(5,yo,3,0,"button",1),j.Sb(),j.Sb(),j.Tb(6,"mat-card-content"),j.Dc(7,Fo,15,9,"form",2),j.Dc(8,ko,1,0,"hr",3),j.Dc(9,$o,18,3,"table",29),j.Sb(),j.Sb()),2&e){var o=j.fc();j.Cb(3),j.Ic(" Merma ",o.saveToDB?"No.":""," ",o.egreso.egreso," "),j.Cb(1),j.lc("ngIf",!o.showDetalleEgresoForm),j.Cb(1),j.lc("ngIf",o.showDetalleEgresoForm),j.Cb(2),j.lc("ngIf",o.showDetalleEgresoForm),j.Cb(1),j.lc("ngIf",o.detallesMerma.length>0),j.Cb(1),j.lc("ngIf",o.detallesMerma.length>0)}}var Vo,Ko,Qo=((Vo=function(){function e(t,o,n,i,a,c,r,l,u){var d=this;s(this,e),this.snackBar=t,this.ls=o,this.egresoSrvc=n,this.tipoMovimientoSrvc=i,this.bodegaSrvc=a,this.articuloSrvc=c,this.proveedorSrvc=r,this.transformacionSrvc=l,this.presentacionSrvc=u,this.saveToDB=!0,this.egresoSavedEv=new j.o,this.showEgresoForm=!0,this.showDetalleEgresoForm=!0,this.detallesEgreso=[],this.detallesMerma=[],this.displayedColumns=["articulo","presentacion","cantidad","precio_unitario","precio_total","editItem"],this.displayedColumnsM=["cantidad_utilizada","articulo","presentacion","cantidad","editItem"],this.tiposMovimiento=[],this.tiposMovimientoIngreso=[],this.bodegas=[],this.articulos=[],this.filteredArticulos=[],this.proveedores=[],this.filteredProveedores=[],this.presentaciones=[],this.fltrPresentaciones=[],this.fltrPresentacionesMerma=[],this.keyboardLayout=H.a.IDIOMA_TECLADO,this.esMovil=!1,this.bloqueoBotones=!1,this.txtArticuloSelected=void 0,this.txtArticuloSelectedM=void 0,this.txtProveedorSelected=void 0,this.loadTiposMovimiento=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];d.tipoMovimientoSrvc.get(e?{egreso:1}:{ingreso:1}).subscribe(function(t){t&&(e?d.tiposMovimiento=t:d.tiposMovimientoIngreso=t)})},this.loadBodegas=function(){d.bodegaSrvc.get({sede:d.ls.get(H.a.usrTokenVar).sede||0}).subscribe(function(e){e&&(d.bodegas=e)})},this.loadProveedores=function(){d.proveedorSrvc.get().subscribe(function(e){e&&(d.proveedores=e)})},this.loadPresentaciones=function(){d.presentacionSrvc.get().subscribe(function(e){e&&(d.presentaciones=e)})},this.resetEgreso=function(){d.egreso={egreso:null,tipo_movimiento:null,bodega:null,fecha:P().format(H.a.dbDateFormat),usuario:d.ls.get(H.a.usrTokenVar).idusr||0,estatus_movimiento:1,traslado:0},d.resetDetalleEgreso(),d.updateTableDataSource(),d.resetDetalleMerma(),d.updateTableDataSourceM()},this.onSubmit=function(){d.bloqueoBotones=!0,d.egresoSrvc.save(d.egreso).subscribe(function(e){e.exito&&(d.egresoSavedEv.emit(),d.resetEgreso(),d.egreso={egreso:e.egreso.egreso,tipo_movimiento:e.egreso.tipo_movimiento,fecha:e.egreso.fecha,bodega:e.egreso.bodega,creacion:e.egreso.creacion,usuario:e.egreso.usuario,estatus_movimiento:e.egreso.estatus_movimiento,traslado:e.egreso.traslado},d.loadDetalleEgreso(d.egreso.egreso)),d.bloqueoBotones=!1})},this.confirmarEgreso=function(){d.egreso.estatus_movimiento=2,d.onSubmit()},this.loadArticulos=function(){d.articuloSrvc.getArticulosIngreso().subscribe(function(e){e&&(d.articulos=e)})},this.resetDetalleEgreso=function(){d.detalleEgreso={egreso_detalle:null,egreso:d.egreso.egreso?d.egreso.egreso:null,articulo:null,cantidad:null,precio_unitario:null,precio_total:null,presentacion:0},d.txtArticuloSelected=void 0},this.resetDetalleMerma=function(){d.detalleMerma={egreso_detalle:null,egreso:d.egreso.egreso?d.egreso.egreso:null,articulo:null,cantidad:null,precio_unitario:null,precio_total:null,presentacion:0},d.txtArticuloSelectedM=void 0},this.loadDetalleEgreso=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+d.egreso.egreso;d.egresoSrvc.getDetalle(e,{egreso:e}).subscribe(function(e){e&&(d.detallesEgreso=e,d.updateTableDataSource())})},this.getDetalleEgreso=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+d.egreso.egreso,t=arguments.length>1?arguments[1]:void 0;d.egresoSrvc.getDetalle(e,{egreso_detalle:t}).subscribe(function(e){e&&(d.detalleEgreso={egreso_detalle:e[0].egreso_detalle,egreso:e[0].egreso,articulo:e[0].articulo.articulo,cantidad:+e[0].cantidad,precio_unitario:+e[0].precio_unitario,precio_total:+e[0].precio_total,presentacion:e[0].presentacion.presentacion},d.setPresentaciones(),d.saveToDB||d.setPresentacionesMerma(),d.txtArticuloSelected=e[0].articulo,d.showDetalleEgresoForm=!0)})},this.onSubmitDetail=function(){d.bloqueoBotones=!0,d.detalleEgreso.egreso=d.egreso.egreso,d.egresoSrvc.saveDetalle(d.detalleEgreso).subscribe(function(e){e.exito?(d.loadDetalleEgreso(),d.resetDetalleEgreso(),d.snackBar.open("Egreso guardado con \xe9xito...","Egreso",{duration:3e3})):d.snackBar.open("ERROR: ".concat(e.mensaje),"Egreso",{duration:3e3}),d.bloqueoBotones=!1})},this.addToDetail=function(){d.detalleEgreso.cantidad>0?(d.detallesEgreso.splice(d.detallesEgreso.findIndex(function(e){return+e.articulo==+d.detalleEgreso.articulo}),1),d.detallesEgreso.push(d.detalleEgreso),d.resetDetalleEgreso(),d.updateTableDataSource()):d.snackBar.open("ERROR: La cantidad debe ser mayor a 0","Egreso",{duration:3e3})},this.addToDetailMerma=function(){if(d.detalleMerma.cantidad>0&&d.detalleMerma.cantidad_utilizada>0){var e,t=d.detallesMerma.findIndex(function(e){return+e.articulo==+d.detalleMerma.articulo});t>-1&&d.detallesMerma.splice(t,1),e=d.articulos.filter(function(e){return+e.articulo==d.detalleMerma.articulo}),d.detalleMerma.presentacion=e[0].presentacion_reporte,d.detallesMerma.push(d.detalleMerma),d.txtArticuloSelectedM=void 0,d.resetDetalleMerma(),d.updateTableDataSourceM()}else d.detalleMerma.cantidad<=0?d.snackBar.open("ERROR: La cantidad debe ser mayor a 0","Egreso",{duration:3e3}):d.detalleMerma.cantidad_utilizada<=0&&d.snackBar.open("ERROR: La cantidad a utilizar debe ser mayor a 0","Egreso",{duration:3e3})},this.editFromDetail=function(e){var t=d.detallesEgreso.filter(function(t){return+t.articulo==+e})[0];d.detalleEgreso={egreso_detalle:t.egreso_detalle,egreso:t.egreso_detalle,articulo:t.articulo,cantidad:t.cantidad,precio_unitario:t.precio_unitario,precio_total:t.precio_unitario,presentacion:t.presentacion},d.setPresentaciones(!0),d.txtArticuloSelected=d.articulos.filter(function(e){return+e.articulo==d.detalleEgreso.articulo})[0]},this.editFromDetailMerma=function(e){var t=d.detallesMerma.filter(function(t){return+t.articulo==+e})[0];d.detalleMerma={egreso_detalle:t.egreso_detalle,egreso:t.egreso_detalle,articulo:t.articulo,cantidad:t.cantidad,precio_unitario:t.precio_unitario,precio_total:t.precio_unitario,presentacion:t.presentacion,cantidad_utilizada:t.cantidad_utilizada},d.setPresentacionesMerma(),d.txtArticuloSelectedM=d.articulos.filter(function(e){return+e.articulo==d.detalleMerma.articulo})[0]},this.removeFromDetailMerma=function(e){return d.detallesMerma.splice(d.detallesMerma.findIndex(function(t){return+t.articulo==+e}),1)},this.removeFromDetail=function(e){return d.detallesEgreso.splice(d.detallesEgreso.findIndex(function(t){return+t.articulo==+e}),1)},this.getDescripcionArticulo=function(e){return d.articulos.find(function(t){return+t.articulo==+e}).descripcion||""},this.getDescripcionPresentacion=function(e){return d.presentaciones.find(function(t){return+t.presentacion==+e}).descripcion||""},this.updateTableDataSource=function(){d.dataSource=new v.k(d.detallesEgreso),d.dataSource.filterPredicate=function(e,t){return e.articulo.descripcion.toLowerCase().includes(t)}},this.updateTableDataSourceM=function(){d.dataSourceM=new v.k(d.detallesMerma)},this.filtrarArticulos=function(e){if(e&&"string"==typeof e){var t=e.toLowerCase();d.filteredArticulos=d.articulos.filter(function(e){return e.descripcion.toLowerCase().includes(t)})}else d.filteredArticulos=d.articulos},this.setPresentaciones=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];d.fltrPresentaciones=[];var t=d.articulos.findIndex(function(e){return+e.articulo==+d.detalleEgreso.articulo}),o=d.articulos[t];d.fltrPresentaciones=d.presentaciones.filter(function(e){return+e.medida.medida==+o.presentacion.medida}),e||(d.detalleEgreso.presentacion=null)},this.setPresentacionesMerma=function(){d.fltrPresentacionesMerma=[];var e=d.articulos.findIndex(function(e){return+e.articulo==+d.detalleMerma.articulo}),t=d.articulos[e];d.fltrPresentacionesMerma=d.presentaciones.filter(function(e){return+e.medida.medida==+t.presentacion.medida})},this.displayArticulo=function(e){if(e)return d.detalleEgreso.articulo=e.articulo,e.descripcion},this.displayArticuloMerma=function(e){if(e)return d.detalleMerma.articulo=e.articulo,e.descripcion},this.filtrarProveedores=function(e){if(e&&"string"==typeof e){var t=e.toLowerCase();d.filteredProveedores=d.proveedores.filter(function(e){return e.razon_social.toLowerCase().includes(t)||e.nit.toLowerCase().includes(t)})}else d.filteredProveedores=d.proveedores},this.displayProveedor=function(e){if(e)return d.egreso.proveedor=e.proveedor,"(".concat(e.nit,") ").concat(e.razon_social)},this.applyFilter=function(e){d.dataSource.filter=e}}return u(e,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(H.a.usrTokenVar).enmovil||!1,this.resetEgreso(),this.loadTiposMovimiento(),this.loadTiposMovimiento(!1),this.loadBodegas(),this.loadArticulos(),this.loadProveedores(),this.loadPresentaciones(),this.saveToDB||(this.displayedColumns=["articulo","presentacion","cantidad","editItem"])}}]),e}()).\u0275fac=function(e){return new(e||Vo)(j.Nb(_.b),j.Nb(N.a),j.Nb(vt),j.Nb(Z.a),j.Nb(Y.a),j.Nb(ee.a),j.Nb(J.a),j.Nb(Dt),j.Nb(te.a))},Vo.\u0275cmp=j.Hb({type:Vo,selectors:[["app-form-egreso"]],inputs:{egreso:"egreso",saveToDB:"saveToDB"},outputs:{egresoSavedEv:"egresoSavedEv"},decls:12,vars:8,consts:[[1,"mat-elevation-z4","fullWidth"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmEgreso","ngForm"],["class","fullWidth",4,"ngIf"],[1,"fullWidth"],["matInput","","type","date","placeholder","Fecha","name","fecha","required","",3,"ngModel","ngModelChange"],["name","bodega","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","traslado","class","fullWidth",3,"ngModel","ngModelChange",4,"ngIf"],["align","end"],["mat-raised-button","","type","submit","color","accent","class","btnAccion",3,"disabled",4,"ngIf"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"disabled","click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["name","tipo_movimiento","required","",3,"ngModel","ngModelChange"],[3,"value"],["name","traslado",1,"fullWidth",3,"ngModel","ngModelChange"],["name","bodega_destino",3,"ngModel","required","ngModelChange"],["name","tipo_movimiento_destino",3,"ngModel","required","ngModelChange"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button","color","accent",3,"click"],["matInput","","placeholder","Buscar",3,"matKeyboard","input",4,"ngIf"],["matInput","","placeholder","Buscar",3,"keyup",4,"ngIf"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleEgreso","ngForm"],["type","text","placeholder","Art\xedculo","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith","optionSelected"],["autoArticulos","matAutocomplete"],["name","presentacion","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Cantidad","name","cantidad","type","number","step","0.01","required","",3,"ngModel","ngModelChange","change"],["mat-raised-button","","type","button","color","accent",3,"disabled","click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["matInput","","placeholder","Buscar",3,"matKeyboard","input"],["matInput","","placeholder","Buscar",3,"keyup"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","articulo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","presentacion"],["matColumnDef","cantidad"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","precio_unitario"],["matColumnDef","precio_total"],["matColumnDef","editItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-header-row",""],["mat-row",""],["frmMerma","ngForm"],["type","number","step","0.01","matInput","","placeholder","Cantidad a Utilizar","name","cantidad_utilizar","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Cantidad","name","cantidad","type","number","step","0.01","required","",3,"ngModel","ngModelChange"],["matColumnDef","cantidad_utilizada"]],template:function(e,t){1&e&&(j.Tb(0,"mat-card",0),j.Tb(1,"mat-card-title"),j.Tb(2,"h4"),j.Fc(3),j.Dc(4,Ft,3,0,"button",1),j.Dc(5,kt,3,0,"button",1),j.Sb(),j.Sb(),j.Tb(6,"mat-card-content"),j.Dc(7,qt,18,13,"form",2),j.Sb(),j.Sb(),j.Dc(8,Lt,1,0,"hr",3),j.Dc(9,_o,13,9,"mat-card",4),j.Dc(10,xo,1,0,"hr",3),j.Dc(11,Wo,10,7,"mat-card",4)),2&e&&(j.Cb(3),j.Hc(" Egreso",t.egreso.egreso?" No. "+t.egreso.egreso:""," "),j.Cb(1),j.lc("ngIf",!t.showEgresoForm),j.Cb(1),j.lc("ngIf",t.showEgresoForm),j.Cb(2),j.lc("ngIf",t.showEgresoForm),j.Cb(1),j.lc("ngIf",t.egreso.egreso||!t.saveToDB),j.Cb(1),j.lc("ngIf",t.egreso.egreso||!t.saveToDB),j.Cb(1),j.lc("ngIf",t.egreso.egreso||!t.saveToDB),j.Cb(1),j.lc("ngIf",!t.saveToDB))},directives:[p.a,p.h,i.m,p.c,T.a,b.a,c.r,c.l,c.m,g.b,f.b,c.c,c.p,c.k,c.n,g.f,S.a,i.l,$.m,C.a,O.c,O.a,c.o,A.a,v.j,v.c,v.e,v.b,v.g,v.i,v.d,v.a,v.f,v.h],pipes:[i.f],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}"]}),Vo),Xo=["lstEgreso"],Jo=["frmEgreso"],Zo=((Ko=function(){function e(t){var o=this;s(this,e),this.ls=t,this.setEgreso=function(e){o.egreso=e,o.frmEgreso.resetDetalleEgreso(),o.frmEgreso.loadDetalleEgreso(+o.egreso.egreso)},this.refreshEgresoList=function(){o.lstEgresoComponent.loadEgresos()},this.egreso={egreso:null,tipo_movimiento:null,bodega:null,fecha:P().format(H.a.dbDateFormat),usuario:this.ls.get(H.a.usrTokenVar).idusr||0,estatus_movimiento:1,traslado:0}}return u(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Ko)(j.Nb(N.a))},Ko.\u0275cmp=j.Hb({type:Ko,selectors:[["app-egreso"]],viewQuery:function(e,t){var o;1&e&&(j.Kc(Xo,1),j.Kc(Jo,1)),2&e&&(j.sc(o=j.cc())&&(t.lstEgresoComponent=o.first),j.sc(o=j.cc())&&(t.frmEgreso=o.first))},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getEgresoEv"],["lstEgreso",""],[1,"col","m7","s12"],[3,"egreso","egresoSavedEv"],["frmEgreso",""]],template:function(e,t){1&e&&(j.Tb(0,"div",0),j.Tb(1,"div",1),j.Tb(2,"app-lista-egreso",2,3),j.bc("getEgresoEv",function(e){return t.setEgreso(e)}),j.Sb(),j.Sb(),j.Tb(4,"div",4),j.Tb(5,"app-form-egreso",5,6),j.bc("egresoSavedEv",function(){return t.refreshEgresoList()}),j.Sb(),j.Sb(),j.Sb()),2&e&&(j.Cb(5),j.lc("egreso",t.egreso))},directives:[It,Qo],styles:[""]}),Ko);function Yo(e,t){if(1&e){var o=j.Ub();j.Tb(0,"input",10),j.bc("ngModelChange",function(e){return j.xc(o),j.fc().categoria.descripcion=e}),j.Sb()}if(2&e){var n=j.fc();j.lc("matKeyboard",n.keyboardLayout)("ngModel",n.categoria.descripcion)}}function en(e,t){if(1&e){var o=j.Ub();j.Tb(0,"input",11),j.bc("ngModelChange",function(e){return j.xc(o),j.fc().categoria.descripcion=e}),j.Sb()}if(2&e){var n=j.fc();j.lc("ngModel",n.categoria.descripcion)}}function tn(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-chip",12),j.bc("click",function(){j.xc(o);var e=t.$implicit;return j.fc().categoria=e}),j.Fc(1),j.Sb()}if(2&e){var n=t.$implicit;j.Cb(1),j.Hc(" ",n.descripcion," ")}}var on,nn=((on=function(){function e(t,o,n){var i=this;s(this,e),this.snackBar=t,this.ls=o,this.articuloSrvc=n,this.categoriaGrupoSvd=new j.o,this.onChangeSubCategoriaEv=new j.o,this.categorias=[],this.categoriasGruposPadre=[],this.categoriasGrupos=[],this.editCategoriaMode=!1,this.editSubCategoriaMode=!1,this.showCategoriasForm=!0,this.keyboardLayout=H.a.IDIOMA_TECLADO,this.esMovil=!1,this.impresoras=[],this.resetCategoria=function(){i.categoria={categoria:null,sede:i.ls.get(H.a.usrTokenVar).sede||0,descripcion:null},i.resetCategoriaGrupo(),i.editCategoriaMode=!1},this.resetCategoriaGrupo=function(){i.categoriaGrupo={categoria_grupo:null,categoria:i.categoria.categoria,categoria_grupo_grupo:null,descripcion:null,receta:0,impresora:null,descuento:0,antecesores:null},i.editSubCategoriaMode=!1},this.loadCategorias=function(){i.articuloSrvc.getCategorias({sede:+i.ls.get(H.a.usrTokenVar).sede||0}).subscribe(function(e){e&&(i.categorias=e)})},this.onCategoriaSelected=function(e){return i.loadSubCategorias(+e.value.categoria)},this.loadSubCategorias=function(e){i.articuloSrvc.getCategoriasGrupos({categoria:+e}).subscribe(function(e){e&&(i.categoriasGruposPadre=i.articuloSrvc.adaptCategoriaGrupoResponse(e),i.categoriasGrupos=i.categoriasGruposPadre)})},this.loadImpresoras=function(){i.articuloSrvc.getImpresoras({sede:+i.ls.get(H.a.usrTokenVar).sede||0}).subscribe(function(e){e&&(i.impresoras=e)})},this.onSubCategoriaPadreSelected=function(e){return i.loadSubCategoriasSubcategorias(+e.value)},this.loadSubCategoriasSubcategorias=function(e){i.articuloSrvc.getCategoriasGrupos({categoria_grupo_grupo:e}).subscribe(function(e){e&&(i.categoriasGrupos=i.articuloSrvc.adaptCategoriaGrupoResponse(e))})},this.onSubmitCategoria=function(){i.articuloSrvc.saveCategoria(i.categoria).subscribe(function(e){e.exito?(i.editCategoriaMode=!1,i.resetCategoria(),i.loadCategorias(),i.categoriaGrupoSvd.emit(),i.snackBar.open("Grabada con \xe9xito.","Categor\xeda",{duration:5e3})):i.snackBar.open("ERROR: ".concat(e.mensaje),"Categor\xeda",{duration:5e3})})},this.onSubCategoriaSelected=function(e){return i.onChangeSubCategoriaEv.emit(+e.value.categoria_grupo)},this.onSubmitSubCategoria=function(){i.articuloSrvc.saveCategoriaGrupo(i.categoriaGrupo).subscribe(function(e){e.exito?(i.resetCategoriaGrupo(),i.loadSubCategorias(+i.categoria.categoria),i.snackBar.open("Grabada con \xe9xito.","Sub - Categor\xeda",{duration:5e3})):i.snackBar.open("ERROR: ".concat(e.mensaje),"Sub - Categor\xeda",{duration:5e3})})}}return u(e,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(H.a.usrTokenVar).enmovil||!1,this.resetCategoria(),this.loadCategorias(),this.loadImpresoras()}}]),e}()).\u0275fac=function(e){return new(e||on)(j.Nb(_.b),j.Nb(N.a),j.Nb(ee.a))},on.\u0275cmp=j.Hb({type:on,selectors:[["app-categoria-producto"]],outputs:{categoriaGrupoSvd:"categoriaGrupoSvd",onChangeSubCategoriaEv:"onChangeSubCategoriaEv"},decls:18,vars:4,consts:[[1,"mat-elevation-z4"],["novalidate",""],["frmCategoria","ngForm"],[1,"fullWidth"],["type","text","matInput","","placeholder","Descripci\xf3n de la categor\xeda","name","descripcion","minlength","1","maxlength","150","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["type","text","matInput","","placeholder","Descripci\xf3n de la categor\xeda","name","descripcion","minlength","1","maxlength","150","required","",3,"ngModel","ngModelChange",4,"ngIf"],["align","end"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button","color","warn",3,"click"],["color","accent","selected","",3,"click",4,"ngFor","ngForOf"],["type","text","matInput","","placeholder","Descripci\xf3n de la categor\xeda","name","descripcion","minlength","1","maxlength","150","required","",3,"matKeyboard","ngModel","ngModelChange"],["type","text","matInput","","placeholder","Descripci\xf3n de la categor\xeda","name","descripcion","minlength","1","maxlength","150","required","",3,"ngModel","ngModelChange"],["color","accent","selected","",3,"click"]],template:function(e,t){if(1&e&&(j.Tb(0,"mat-card",0),j.Tb(1,"mat-card-title"),j.Tb(2,"h4"),j.Fc(3,"Categor\xedas"),j.Sb(),j.Sb(),j.Tb(4,"mat-card-content"),j.Tb(5,"form",1,2),j.Tb(7,"mat-form-field",3),j.Dc(8,Yo,1,2,"input",4),j.Dc(9,en,1,1,"input",5),j.Sb(),j.Tb(10,"div",6),j.Tb(11,"button",7),j.bc("click",function(){return t.onSubmitCategoria()}),j.Fc(12," Guardar "),j.Sb(),j.Tb(13,"button",8),j.bc("click",function(){return t.resetCategoria()}),j.Fc(14," Cancelar "),j.Sb(),j.Sb(),j.Sb(),j.Ob(15,"hr"),j.Tb(16,"mat-chip-list"),j.Dc(17,tn,2,1,"mat-chip",9),j.Sb(),j.Sb(),j.Sb()),2&e){var o=j.tc(6);j.Cb(8),j.lc("ngIf",!t.esMovil),j.Cb(1),j.lc("ngIf",t.esMovil),j.Cb(2),j.lc("disabled",!o.form.valid),j.Cb(6),j.lc("ngForOf",t.categorias)}},directives:[p.a,p.h,p.c,c.r,c.l,c.m,g.b,i.m,T.a,w.b,i.l,f.b,A.a,c.c,c.g,c.f,c.p,c.k,c.n,w.a],styles:[".fullWidth[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:18pt}"]}),on);function an(e,t){if(1&e&&(j.Tb(0,"mat-option",19),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.categoria),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function cn(e,t){if(1&e){var o=j.Ub();j.Tb(0,"input",20),j.bc("ngModelChange",function(e){return j.xc(o),j.fc().categoriaGrupo.descripcion=e}),j.Sb()}if(2&e){var n=j.fc();j.lc("matKeyboard",n.keyboardLayout)("ngModel",n.categoriaGrupo.descripcion)}}function rn(e,t){if(1&e){var o=j.Ub();j.Tb(0,"input",21),j.bc("ngModelChange",function(e){return j.xc(o),j.fc().categoriaGrupo.descripcion=e}),j.Sb()}if(2&e){var n=j.fc();j.lc("ngModel",n.categoriaGrupo.descripcion)}}function sn(e,t){if(1&e&&(j.Tb(0,"mat-option",19),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.impresora),j.Cb(1),j.Hc(" ",o.nombre," ")}}function ln(e,t){if(1&e&&(j.Tb(0,"mat-option",19),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.bodega),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function un(e,t){if(1&e){var o=j.Ub();j.Tb(0,"input",22),j.bc("ngModelChange",function(e){return j.xc(o),j.fc().categoriaGrupo.cuenta_contable=e}),j.Sb()}if(2&e){var n=j.fc();j.lc("matKeyboard",n.keyboardLayout)("ngModel",n.categoriaGrupo.cuenta_contable)}}function dn(e,t){if(1&e){var o=j.Ub();j.Tb(0,"input",23),j.bc("ngModelChange",function(e){return j.xc(o),j.fc().categoriaGrupo.cuenta_contable=e}),j.Sb()}if(2&e){var n=j.fc();j.lc("ngModel",n.categoriaGrupo.cuenta_contable)}}function bn(e,t){if(1&e&&(j.Tb(0,"mat-option",24),j.Fc(1),j.Sb()),2&e){var o=t.$implicit,n=j.fc();j.lc("value",o.categoria_grupo)("disabled",+o.categoria_grupo==+n.categoriaGrupo.categoria_grupo),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function gn(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-chip",25),j.bc("click",function(){j.xc(o);var e=t.$implicit,n=j.fc();return n.categoria=e,n.loadSubCategorias(e.categoria)}),j.Fc(1),j.Sb()}if(2&e){var n=t.$implicit;j.Cb(1),j.Hc(" ",n.descripcion," ")}}function fn(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-chip",26),j.bc("click",function(){j.xc(o);var e=t.$implicit;return j.fc().setCatGrp(e)}),j.Fc(1),j.Sb()}if(2&e){var n=t.$implicit;j.Cb(1),j.Hc(" ",n.descripcion," ")}}var pn,mn=((pn=function(){function e(t,o,n,i){var a=this;s(this,e),this.snackBar=t,this.articuloSrvc=o,this.bodegaSrvc=n,this.ls=i,this.categorias=[],this.impresoras=[],this.categoriasGruposPadre=[],this.categoriasGrupos=[],this.keyboardLayout=H.a.IDIOMA_TECLADO,this.esMovil=!1,this.bodegas=[],this.loadCategorias=function(){a.articuloSrvc.getCategorias({sede:+a.ls.get(H.a.usrTokenVar).sede||0}).subscribe(function(e){e&&(a.categorias=e)})},this.loadImpresoras=function(){a.articuloSrvc.getImpresoras({sede:+a.ls.get(H.a.usrTokenVar).sede||0}).subscribe(function(e){e&&(a.impresoras=e)})},this.loadBodegas=function(){a.bodegaSrvc.get({sede:a.ls.get(H.a.usrTokenVar).sede||0}).subscribe(function(e){e&&(a.bodegas=e)})},this.loadSubCategorias=function(e){a.resetCategoriaGrupo(),a.categoriaGrupo.categoria=e,a.articuloSrvc.getCategoriasGrupos({categoria:+e}).subscribe(function(e){e&&(a.categoriasGruposPadre=a.articuloSrvc.adaptCategoriaGrupoResponse(e),a.categoriasGrupos=JSON.parse(JSON.stringify(a.categoriasGruposPadre)))})},this.resetCategoriaGrupo=function(){a.categoriaGrupo={categoria_grupo:null,categoria:null,categoria_grupo_grupo:null,descripcion:null,receta:0,impresora:null,descuento:0,antecesores:null}},this.onSubmitSubCategoria=function(){a.articuloSrvc.saveCategoriaGrupo(a.categoriaGrupo).subscribe(function(e){e.exito?(a.loadSubCategorias(+a.categoriaGrupo.categoria),a.resetCategoriaGrupo(),a.snackBar.open("Grabada con \xe9xito.","Sub - Categor\xeda",{duration:5e3})):a.snackBar.open("ERROR: ".concat(e.mensaje),"Sub - Categor\xeda",{duration:5e3})})},this.setCatGrp=function(e){a.categoriaGrupo=e},this.resetCategoriaGrupo()}return u(e,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(H.a.usrTokenVar).enmovil||!1,this.loadCategorias(),this.loadImpresoras(),this.loadBodegas()}}]),e}()).\u0275fac=function(e){return new(e||pn)(j.Nb(_.b),j.Nb(ee.a),j.Nb(Y.a),j.Nb(N.a))},pn.\u0275cmp=j.Hb({type:pn,selectors:[["app-sub-categoria-producto"]],decls:43,vars:15,consts:[[1,"mat-elevation-z4"],["novalidate",""],["frmCategoriaGrupo","ngForm"],[1,"fullWidth"],["name","categoria","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","matInput","","placeholder","Descripci\xf3n de la sub - categor\xeda","name","descripcion","minlength","1","maxlength","45","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["type","text","matInput","","placeholder","Descripci\xf3n de la sub - categor\xeda","name","descripcion","minlength","1","maxlength","45","required","",3,"ngModel","ngModelChange",4,"ngIf"],["name","impresora","required","",3,"ngModel","ngModelChange"],["name","bodega","required","",3,"ngModel","ngModelChange"],["type","text","matInput","","placeholder","Cuenta contable (si aplica)","name","cuenta_contable","minlength","0","maxlength","10",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["type","text","matInput","","placeholder","Cuenta contable (si aplica)","name","cuenta_contable","minlength","0","maxlength","10",3,"ngModel","ngModelChange",4,"ngIf"],["name","categoriaGrupoPadre",3,"ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],["align","end"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button","color","warn",3,"click"],["color","accent","selected","",3,"click",4,"ngFor","ngForOf"],["color","warn","selected","",3,"click",4,"ngFor","ngForOf"],[3,"value"],["type","text","matInput","","placeholder","Descripci\xf3n de la sub - categor\xeda","name","descripcion","minlength","1","maxlength","45","required","",3,"matKeyboard","ngModel","ngModelChange"],["type","text","matInput","","placeholder","Descripci\xf3n de la sub - categor\xeda","name","descripcion","minlength","1","maxlength","45","required","",3,"ngModel","ngModelChange"],["type","text","matInput","","placeholder","Cuenta contable (si aplica)","name","cuenta_contable","minlength","0","maxlength","10",3,"matKeyboard","ngModel","ngModelChange"],["type","text","matInput","","placeholder","Cuenta contable (si aplica)","name","cuenta_contable","minlength","0","maxlength","10",3,"ngModel","ngModelChange"],[3,"value","disabled"],["color","accent","selected","",3,"click"],["color","warn","selected","",3,"click"]],template:function(e,t){if(1&e&&(j.Tb(0,"mat-card",0),j.Tb(1,"mat-card-title"),j.Tb(2,"h4"),j.Fc(3,"Sub - categor\xedas"),j.Sb(),j.Sb(),j.Tb(4,"mat-card-content"),j.Tb(5,"form",1,2),j.Tb(7,"mat-form-field",3),j.Tb(8,"mat-label"),j.Fc(9,"Categor\xeda"),j.Sb(),j.Tb(10,"mat-select",4),j.bc("ngModelChange",function(e){return t.categoriaGrupo.categoria=e}),j.Dc(11,an,2,2,"mat-option",5),j.Sb(),j.Sb(),j.Tb(12,"mat-form-field",3),j.Dc(13,cn,1,2,"input",6),j.Dc(14,rn,1,1,"input",7),j.Sb(),j.Tb(15,"mat-form-field",3),j.Tb(16,"mat-label"),j.Fc(17,"Impresora:"),j.Sb(),j.Tb(18,"mat-select",8),j.bc("ngModelChange",function(e){return t.categoriaGrupo.impresora=e}),j.Dc(19,sn,2,2,"mat-option",5),j.Sb(),j.Sb(),j.Tb(20,"mat-form-field",3),j.Tb(21,"mat-label"),j.Fc(22,"Sacar de la bodega:"),j.Sb(),j.Tb(23,"mat-select",9),j.bc("ngModelChange",function(e){return t.categoriaGrupo.bodega=e}),j.Dc(24,ln,2,2,"mat-option",5),j.Sb(),j.Sb(),j.Tb(25,"mat-form-field",3),j.Dc(26,un,1,2,"input",10),j.Dc(27,dn,1,1,"input",11),j.Sb(),j.Tb(28,"mat-form-field",3),j.Tb(29,"mat-label"),j.Fc(30,"Anidar dentro de"),j.Sb(),j.Tb(31,"mat-select",12),j.bc("ngModelChange",function(e){return t.categoriaGrupo.categoria_grupo_grupo=e}),j.Dc(32,bn,2,3,"mat-option",13),j.Sb(),j.Sb(),j.Tb(33,"div",14),j.Tb(34,"button",15),j.bc("click",function(){return t.onSubmitSubCategoria()}),j.Fc(35," Guardar "),j.Sb(),j.Tb(36,"button",16),j.bc("click",function(){return t.resetCategoriaGrupo()}),j.Fc(37," Cancelar "),j.Sb(),j.Sb(),j.Sb(),j.Ob(38,"hr"),j.Tb(39,"mat-chip-list"),j.Dc(40,gn,2,1,"mat-chip",17),j.Sb(),j.Tb(41,"mat-chip-list"),j.Dc(42,fn,2,1,"mat-chip",18),j.Sb(),j.Sb(),j.Sb()),2&e){var o=j.tc(6);j.Cb(10),j.lc("ngModel",t.categoriaGrupo.categoria),j.Cb(1),j.lc("ngForOf",t.categorias),j.Cb(2),j.lc("ngIf",!t.esMovil),j.Cb(1),j.lc("ngIf",t.esMovil),j.Cb(4),j.lc("ngModel",t.categoriaGrupo.impresora),j.Cb(1),j.lc("ngForOf",t.impresoras),j.Cb(4),j.lc("ngModel",t.categoriaGrupo.bodega),j.Cb(1),j.lc("ngForOf",t.bodegas),j.Cb(2),j.lc("ngIf",!t.esMovil),j.Cb(1),j.lc("ngIf",t.esMovil),j.Cb(4),j.lc("ngModel",t.categoriaGrupo.categoria_grupo_grupo),j.Cb(1),j.lc("ngForOf",t.categoriasGruposPadre),j.Cb(2),j.lc("disabled",!o.form.valid),j.Cb(6),j.lc("ngForOf",t.categorias),j.Cb(2),j.lc("ngForOf",t.categoriasGrupos)}},directives:[p.a,p.h,p.c,c.r,c.l,c.m,g.b,g.f,S.a,c.p,c.k,c.n,i.l,i.m,T.a,w.b,$.m,f.b,A.a,c.c,c.g,c.f,w.a],styles:[""]}),pn),hn=o("XiUz"),vn=o("Iab2"),Sn=o("IHy4"),Cn=o("TOq3");function Tn(e,t){if(1&e&&(j.Tb(0,"mat-option",11),j.Fc(1),j.Sb()),2&e){var o=t.$implicit,n=j.fc();j.lc("value",o.sede)("disabled",+o.sede==+n.miSede),j.Cb(1),j.Hc(" ",o.nombre," ")}}function _n(e,t){1&e&&j.Ob(0,"app-cargando")}var xn,Mn,yn=((Mn=function(){function e(t,o,n,i,a){var c=this;s(this,e),this.sedeSrvc=t,this.ls=o,this.snackBar=n,this.dialog=i,this.articuloSrvc=a,this.articulo=null,this.cargando=!1,this.sedes=[],this.params={},this.miSede=0,this.loadSedes=function(){c.sedeSrvc.get().subscribe(function(e){e&&(c.sedes=e)})},this.onSubmit=function(){c.dialog.open(X.a,{maxWidth:"400px",data:new X.b("Replicar art\xedculos","Este proceso replicar\xe1 TODOS los art\xedculos a las sedes seleccionadas. \xbfDesea continuar?","S\xed","No")}).afterClosed().subscribe(function(e){if(e){c.cargando=!0;var t={sedes:[],articulo:null};c.params.sede.forEach(function(e){return t.sedes.push({sede:+e})}),c.articulo&&(t.articulo=+c.articulo.articulo),c.articuloSrvc.replicaArticulosEnSedes(t).subscribe(function(e){e.exito?c.snackBar.open(e.mensaje,"Replicar art\xedculos",{duration:3e3}):c.snackBar.open("ERROR: ".concat(e.mensaje),"Replicar art\xedculos",{duration:7e3}),c.params={},c.cargando=!1})}})}}return u(e,[{key:"ngOnInit",value:function(){this.miSede=this.ls.get(H.a.usrTokenVar).sede||0,this.loadSedes()}}]),e}()).\u0275fac=function(e){return new(e||Mn)(j.Nb(Sn.a),j.Nb(N.a),j.Nb(_.b),j.Nb(D.b),j.Nb(ee.a))},Mn.\u0275cmp=j.Hb({type:Mn,selectors:[["app-replicar-asedes"]],inputs:{articulo:"articulo"},decls:18,vars:5,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmReplicaArticulosSedes","ngForm"],[2,"width","90%"],["name","sede","multiple","","required","",3,"ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],[4,"ngIf"],[3,"value","disabled"]],template:function(e,t){if(1&e){var o=j.Ub();j.Tb(0,"div",0),j.Tb(1,"div",1),j.Tb(2,"mat-card",2),j.Tb(3,"mat-card-title"),j.Tb(4,"h4"),j.Fc(5),j.Sb(),j.Sb(),j.Tb(6,"mat-card-content"),j.Tb(7,"form",3,4),j.bc("ngSubmit",function(){return j.xc(o),j.tc(8).form.valid&&t.onSubmit()}),j.Tb(9,"mat-form-field",5),j.Tb(10,"mat-label"),j.Fc(11,"Sede"),j.Sb(),j.Tb(12,"mat-select",6),j.bc("ngModelChange",function(e){return t.params.sede=e}),j.Dc(13,Tn,2,3,"mat-option",7),j.Sb(),j.Sb(),j.Tb(14,"div",8),j.Tb(15,"button",9),j.Fc(16," Replicar "),j.Sb(),j.Sb(),j.Sb(),j.Dc(17,_n,1,0,"app-cargando",10),j.Sb(),j.Sb(),j.Sb(),j.Sb()}if(2&e){var n=j.tc(8);j.Cb(5),j.Hc("Replicar ",(null==t.articulo?null:t.articulo.descripcion)||"TODOS los art\xedculos"," a las sedes"),j.Cb(7),j.lc("ngModel",t.params.sede),j.Cb(1),j.lc("ngForOf",t.sedes),j.Cb(2),j.lc("disabled",!n.form.valid||t.cargando),j.Cb(2),j.lc("ngIf",t.cargando)}},directives:[p.a,p.h,p.c,c.r,c.l,c.m,g.b,g.f,S.a,c.p,c.k,c.n,i.l,T.a,i.m,$.m,Cn.a],styles:[""]}),Mn),In=((xn=function(){function e(t,o){s(this,e),this.dialogRef=t,this.data=o,this.articulo=null}return u(e,[{key:"ngOnInit",value:function(){this.data.articulo&&(this.articulo=this.data.articulo)}}]),e}()).\u0275fac=function(e){return new(e||xn)(j.Nb(D.f),j.Nb(D.a))},xn.\u0275cmp=j.Hb({type:xn,selectors:[["app-replicar-a-sedes-dialog"]],decls:5,vars:1,consts:[["mat-dialog-content",""],[3,"articulo"],["mat-dialog-actions","","align","end"],["mat-raised-button","","type","button","color","accent",3,"click"]],template:function(e,t){1&e&&(j.Tb(0,"div",0),j.Ob(1,"app-replicar-asedes",1),j.Sb(),j.Tb(2,"div",2),j.Tb(3,"button",3),j.bc("click",function(){return t.dialogRef.close()}),j.Fc(4," Terminar "),j.Sb(),j.Sb()),2&e&&(j.Cb(1),j.lc("articulo",t.articulo))},directives:[D.d,yn,D.c,T.a],styles:[""]}),xn),Dn=o("pJXi"),Fn=o("1wH6"),kn=o("FHMA");function On(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",5),j.bc("click",function(){return j.xc(o),j.fc().showArticuloForm=!0}),j.Tb(1,"mat-icon",6),j.Fc(2,"expand_more"),j.Sb(),j.Sb()}}function wn(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",5),j.bc("click",function(){return j.xc(o),j.fc().showArticuloForm=!1}),j.Tb(1,"mat-icon",6),j.Fc(2,"expand_less"),j.Sb(),j.Sb()}}function En(e,t){if(1&e&&(j.Tb(0,"mat-chip",36),j.Fc(1),j.Sb()),2&e){var o=j.fc(2);j.Cb(1),j.Hc(" ",o.categoria.descripcion," ")}}function An(e,t){if(1&e&&(j.Tb(0,"mat-chip",37),j.Fc(1),j.Sb()),2&e){var o=j.fc(2);j.Cb(1),j.Hc(" ",o.subcategoria.descripcion," ")}}function Rn(e,t){if(1&e){var o=j.Ub();j.Tb(0,"input",38),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).articulo.descripcion=e}),j.Sb()}if(2&e){var n=j.fc(2);j.lc("matKeyboard",n.keyboardLayout)("ngModel",n.articulo.descripcion)}}function Bn(e,t){if(1&e){var o=j.Ub();j.Tb(0,"input",39),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).articulo.descripcion=e}),j.Sb()}if(2&e){var n=j.fc(2);j.lc("ngModel",n.articulo.descripcion)}}function Hn(e,t){if(1&e&&(j.Tb(0,"mat-option",40),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.presentacion),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function Pn(e,t){if(1&e&&(j.Tb(0,"mat-option",40),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.presentacion),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function jn(e,t){if(1&e){var o=j.Ub();j.Tb(0,"input",41),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).articulo.codigo=e}),j.Sb()}if(2&e){var n=j.fc(2);j.lc("matKeyboard",n.keyboardLayout)("ngModel",n.articulo.codigo)}}function Nn(e,t){if(1&e){var o=j.Ub();j.Tb(0,"input",42),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).articulo.codigo=e}),j.Sb()}if(2&e){var n=j.fc(2);j.lc("ngModel",n.articulo.codigo)}}function Un(e,t){if(1&e){var o=j.Ub();j.Tb(0,"input",43),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).articulo.shopify_id=e}),j.Sb()}if(2&e){var n=j.fc(2);j.lc("matKeyboard",n.keyboardLayout)("ngModel",n.articulo.shopify_id)}}function Gn(e,t){if(1&e){var o=j.Ub();j.Tb(0,"input",44),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).articulo.shopify_id=e}),j.Sb()}if(2&e){var n=j.fc(2);j.lc("ngModel",n.articulo.shopify_id)}}function zn(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-form-field",11),j.Tb(1,"input",45),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).articulo.rendimiento=e}),j.Sb(),j.Sb()}if(2&e){var n=j.fc(2);j.Cb(1),j.lc("ngModel",n.articulo.rendimiento)}}function qn(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-form-field",11),j.Tb(1,"input",46),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).articulo.cantidad_minima=e}),j.Sb(),j.Sb()}if(2&e){var n=j.fc(2);j.Cb(1),j.lc("ngModel",n.articulo.cantidad_minima)}}function Ln(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-form-field",11),j.Tb(1,"input",47),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).articulo.cantidad_maxima=e}),j.Sb(),j.Sb()}if(2&e){var n=j.fc(2);j.Cb(1),j.lc("ngModel",n.articulo.cantidad_maxima)}}function $n(e,t){if(1&e&&(j.Tb(0,"mat-option",40),j.Fc(1),j.gc(2,"number"),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.impuesto_especial),j.Cb(1),j.Ic(" ",o.descripcion_interna," (",j.ic(2,3,o.porcentaje,"1.2-2"),"%) ")}}function Wn(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-form-field",11),j.Tb(1,"input",48),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).articulo.cantidad_gravable=e}),j.Sb(),j.Sb()}if(2&e){var n=j.fc(2);j.Cb(1),j.lc("ngModel",n.articulo.cantidad_gravable)}}function Vn(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-form-field",11),j.Tb(1,"input",49),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).articulo.precio_sugerido=e}),j.Sb(),j.Sb()}if(2&e){var n=j.fc(2);j.Cb(1),j.lc("ngModel",n.articulo.precio_sugerido)}}function Kn(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",50),j.bc("click",function(){return j.xc(o),j.fc(2).replicarASedes()}),j.Fc(1," Replicar a sedes "),j.Sb()}}function Qn(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",51),j.bc("click",function(){return j.xc(o),j.fc(2).resetArticulo()}),j.Fc(1," Nuevo "),j.Sb()}}function Xn(e,t){if(1&e){var o=j.Ub();j.Tb(0,"form",7,8),j.bc("ngSubmit",function(){j.xc(o);var e=j.tc(1),t=j.fc();return e.form.valid&&t.onSubmit()}),j.Tb(2,"mat-chip-list"),j.Dc(3,En,2,1,"mat-chip",9),j.Dc(4,An,2,1,"mat-chip",10),j.Sb(),j.Tb(5,"mat-form-field",11),j.Dc(6,Rn,1,2,"input",12),j.Dc(7,Bn,1,1,"input",13),j.Sb(),j.Tb(8,"mat-form-field",11),j.Tb(9,"input",14),j.bc("ngModelChange",function(e){return j.xc(o),j.fc().articulo.precio=e}),j.Sb(),j.Sb(),j.Tb(10,"mat-form-field",11),j.Tb(11,"mat-label"),j.Fc(12,"Presentaci\xf3n Venta"),j.Sb(),j.Tb(13,"mat-select",15),j.bc("ngModelChange",function(e){return j.xc(o),j.fc().articulo.presentacion=e}),j.Dc(14,Hn,2,2,"mat-option",16),j.Sb(),j.Sb(),j.Tb(15,"mat-form-field",11),j.Tb(16,"mat-label"),j.Fc(17,"Presentaci\xf3n Reportes"),j.Sb(),j.Tb(18,"mat-select",17),j.bc("ngModelChange",function(e){return j.xc(o),j.fc().articulo.presentacion_reporte=e}),j.Dc(19,Pn,2,2,"mat-option",16),j.Sb(),j.Sb(),j.Tb(20,"mat-form-field",11),j.Dc(21,jn,1,2,"input",18),j.Dc(22,Nn,1,1,"input",19),j.Sb(),j.Tb(23,"mat-form-field",11),j.Dc(24,Un,1,2,"input",20),j.Dc(25,Gn,1,1,"input",21),j.Sb(),j.Dc(26,zn,2,1,"mat-form-field",22),j.Dc(27,qn,2,1,"mat-form-field",22),j.Dc(28,Ln,2,1,"mat-form-field",22),j.Tb(29,"mat-form-field",11),j.Tb(30,"mat-label"),j.Fc(31,"Impuesto Especial"),j.Sb(),j.Tb(32,"mat-select",23),j.bc("ngModelChange",function(e){return j.xc(o),j.fc().articulo.impuesto_especial=e}),j.Dc(33,$n,3,6,"mat-option",16),j.Sb(),j.Sb(),j.Dc(34,Wn,2,1,"mat-form-field",22),j.Dc(35,Vn,2,1,"mat-form-field",22),j.Tb(36,"div",24),j.Tb(37,"div",25),j.Tb(38,"mat-checkbox",26),j.bc("ngModelChange",function(e){return j.xc(o),+(j.fc().articulo.produccion=e)}),j.Fc(39,"\xbfEs producci\xf3n?"),j.Sb(),j.Sb(),j.Tb(40,"div",25),j.Tb(41,"mat-checkbox",27),j.bc("ngModelChange",function(e){return j.xc(o),+(j.fc().articulo.mostrar_pos=e)}),j.Fc(42,"Mostrar en POS"),j.Sb(),j.Sb(),j.Tb(43,"div",25),j.Tb(44,"mat-checkbox",28),j.bc("ngModelChange",function(e){return j.xc(o),+(j.fc().articulo.combo=e)}),j.Fc(45,"Combo"),j.Sb(),j.Sb(),j.Tb(46,"div",25),j.Tb(47,"mat-checkbox",29),j.bc("ngModelChange",function(e){return j.xc(o),+(j.fc().articulo.multiple=e)}),j.Fc(48,"Opci\xf3n m\xfaltiple"),j.Sb(),j.Sb(),j.Sb(),j.Tb(49,"div",24),j.Tb(50,"div",25),j.Tb(51,"mat-checkbox",30),j.bc("ngModelChange",function(e){return j.xc(o),+(j.fc().articulo.mostrar_inventario=e)}),j.Fc(52,"Mostrar en Inventario"),j.Sb(),j.Sb(),j.Tb(53,"div",25),j.Tb(54,"mat-checkbox",31),j.bc("ngModelChange",function(e){return j.xc(o),+(j.fc().articulo.esreceta=e)}),j.Fc(55,"Es receta"),j.Sb(),j.Sb(),j.Sb(),j.Tb(56,"div",32),j.Tb(57,"button",33),j.Fc(58," Guardar "),j.Sb(),j.Dc(59,Kn,2,0,"button",34),j.Dc(60,Qn,2,0,"button",35),j.Sb(),j.Sb()}if(2&e){var n=j.tc(1),i=j.fc();j.Cb(3),j.lc("ngIf",i.categoria),j.Cb(1),j.lc("ngIf",i.subcategoria),j.Cb(2),j.lc("ngIf",!i.esMovil),j.Cb(1),j.lc("ngIf",i.esMovil),j.Cb(2),j.lc("ngModel",i.articulo.precio),j.Cb(4),j.lc("ngModel",i.articulo.presentacion),j.Cb(1),j.lc("ngForOf",i.presentaciones),j.Cb(4),j.lc("ngModel",i.articulo.presentacion_reporte),j.Cb(1),j.lc("ngForOf",i.presentaciones),j.Cb(2),j.lc("ngIf",!i.esMovil),j.Cb(1),j.lc("ngIf",i.esMovil),j.Cb(2),j.lc("ngIf",!i.esMovil),j.Cb(1),j.lc("ngIf",i.esMovil),j.Cb(1),j.lc("ngIf",1==+i.articulo.produccion),j.Cb(1),j.lc("ngIf",1==+i.articulo.multiple||+i.articulo.combo),j.Cb(1),j.lc("ngIf",1==+i.articulo.multiple||+i.articulo.combo),j.Cb(4),j.lc("ngModel",i.articulo.impuesto_especial),j.Cb(1),j.lc("ngForOf",i.impuestosEspeciales),j.Cb(1),j.lc("ngIf",i.articulo.impuesto_especial),j.Cb(1),j.lc("ngIf",i.articulo.impuesto_especial),j.Cb(3),j.lc("ngModel",+i.articulo.produccion),j.Cb(3),j.lc("ngModel",+i.articulo.mostrar_pos),j.Cb(3),j.lc("ngModel",+i.articulo.combo),j.Cb(3),j.lc("ngModel",+i.articulo.multiple),j.Cb(4),j.lc("ngModel",+i.articulo.mostrar_inventario),j.Cb(3),j.lc("ngModel",+i.articulo.esreceta),j.Cb(3),j.lc("disabled",!n.form.valid||!i.articulo.categoria_grupo),j.Cb(2),j.lc("ngIf",i.articulo.articulo),j.Cb(1),j.lc("ngIf",i.articulo.articulo)}}function Jn(e,t){1&e&&j.Ob(0,"hr")}function Zn(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",5),j.bc("click",function(){return j.xc(o),j.fc(2).showDetalleForm=!0}),j.Tb(1,"mat-icon",6),j.Fc(2,"expand_more"),j.Sb(),j.Sb()}}function Yn(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",5),j.bc("click",function(){return j.xc(o),j.fc(2).showDetalleForm=!1}),j.Tb(1,"mat-icon",6),j.Fc(2,"expand_less"),j.Sb(),j.Sb()}}function ei(e,t){if(1&e&&(j.Tb(0,"mat-option",40),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function ti(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-form-field",11),j.Tb(1,"input",62),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(3).receta.precio=e}),j.Sb(),j.Sb()}if(2&e){var n=j.fc(3);j.Cb(1),j.lc("ngModel",n.receta.precio)}}function oi(e,t){if(1&e&&(j.Tb(0,"mat-option",40),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.medida),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function ni(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",51),j.bc("click",function(){return j.xc(o),j.fc(3).resetReceta()}),j.Fc(1," Nuevo "),j.Sb()}}function ii(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",51),j.bc("click",function(){return j.xc(o),j.fc(3).imprimirReceta()}),j.Fc(1," Imprimir "),j.Sb()}}var ai=function(){return{standalone:!0}};function ci(e,t){if(1&e){var o=j.Ub();j.Tb(0,"form",7,54),j.bc("ngSubmit",function(){j.xc(o);var e=j.tc(1),t=j.fc(2);return e.form.valid&&t.onSubmitDetail()}),j.Tb(2,"mat-form-field",11),j.Tb(3,"mat-label"),j.Fc(4,"Art\xedculo"),j.Sb(),j.Tb(5,"input",55),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).txtArticuloSelected=e})("keyup",function(){j.xc(o);var e=j.fc(2);return e.filtrarArticulos(e.txtArticuloSelected)}),j.Sb(),j.Tb(6,"mat-autocomplete",56,57),j.Dc(8,ei,2,2,"mat-option",16),j.Sb(),j.Sb(),j.Tb(9,"mat-form-field",11),j.Tb(10,"input",58),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).receta.cantidad=e}),j.Sb(),j.Sb(),j.Dc(11,ti,2,1,"mat-form-field",22),j.Tb(12,"mat-form-field",11),j.Tb(13,"mat-label"),j.Fc(14,"Unidad de medida"),j.Sb(),j.Tb(15,"mat-select",59),j.bc("ngModelChange",function(e){return j.xc(o),j.fc(2).receta.medida=e}),j.Dc(16,oi,2,2,"mat-option",16),j.Sb(),j.Sb(),j.Tb(17,"div",24),j.Tb(18,"div",25),j.Tb(19,"mat-checkbox",60),j.bc("ngModelChange",function(e){return j.xc(o),+(j.fc(2).receta.racionable=e)}),j.Fc(20,"\xbfEs racionable?"),j.Sb(),j.Sb(),j.Tb(21,"div",25),j.Tb(22,"mat-checkbox",61),j.bc("ngModelChange",function(e){return j.xc(o),+(j.fc(2).receta.precio_extra=e)}),j.Fc(23," Precio Extra "),j.Sb(),j.Sb(),j.Sb(),j.Tb(24,"div",32),j.Tb(25,"button",33),j.Fc(26," Guardar "),j.Sb(),j.Dc(27,ni,2,0,"button",35),j.Dc(28,ii,2,0,"button",35),j.Sb(),j.Sb()}if(2&e){var n=j.tc(1),i=j.tc(7),a=j.fc(2);j.Cb(5),j.lc("ngModel",a.txtArticuloSelected)("ngModelOptions",j.nc(14,ai))("matAutocomplete",i),j.Cb(1),j.lc("displayWith",a.displayArticulo),j.Cb(2),j.lc("ngForOf",a.filteredArticulos),j.Cb(2),j.lc("ngModel",a.receta.cantidad),j.Cb(1),j.lc("ngIf",a.receta.precio_extra&&a.receta.precio_extra>0),j.Cb(4),j.lc("ngModel",a.receta.medida),j.Cb(1),j.lc("ngForOf",a.medidas),j.Cb(3),j.lc("ngModel",+a.receta.racionable),j.Cb(3),j.lc("ngModel",+a.receta.precio_extra),j.Cb(3),j.lc("disabled",!n.form.valid),j.Cb(2),j.lc("ngIf",a.receta.articulo_detalle),j.Cb(1),j.lc("ngIf",a.recetas.length>0)}}function ri(e,t){1&e&&j.Ob(0,"hr")}function si(e,t){1&e&&(j.Tb(0,"th",75),j.Fc(1,"Art\xedculo"),j.Sb())}function li(e,t){if(1&e&&(j.Tb(0,"td",76),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.Cb(1),j.Gc(o.articulo.descripcion)}}function ui(e,t){1&e&&(j.Tb(0,"th",77),j.Fc(1,"Cantidad"),j.Sb())}function di(e,t){if(1&e&&(j.Tb(0,"td",78),j.Fc(1),j.gc(2,"number"),j.Sb()),2&e){var o=t.$implicit;j.Cb(1),j.Gc(j.ic(2,1,o.cantidad,"1.2-2"))}}function bi(e,t){1&e&&(j.Tb(0,"th",77),j.Fc(1,"Unida de medida"),j.Sb())}function gi(e,t){if(1&e&&(j.Tb(0,"td",78),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.Cb(1),j.Gc(o.medida.descripcion)}}function fi(e,t){1&e&&(j.Tb(0,"th",77),j.Fc(1,"Precio"),j.Sb())}function pi(e,t){if(1&e&&(j.Tb(0,"td",78),j.Fc(1),j.gc(2,"number"),j.Sb()),2&e){var o=t.$implicit;j.Cb(1),j.Gc(j.ic(2,1,o.precio,"1.2-2"))}}function mi(e,t){1&e&&(j.Tb(0,"th",75),j.Fc(1,"\xa0"),j.Sb())}function hi(e,t){if(1&e){var o=j.Ub();j.Tb(0,"td",76),j.Tb(1,"button",50),j.bc("click",function(){j.xc(o);var e=t.$implicit;return j.fc(3).getReceta(e.receta,e.articulo_detalle)}),j.Fc(2," Editar "),j.Sb(),j.Tb(3,"button",51),j.bc("click",function(){j.xc(o);var e=t.$implicit;return j.fc(3).eliminaReceta(e)}),j.Fc(4," Eliminar "),j.Sb(),j.Sb()}}function vi(e,t){1&e&&j.Ob(0,"tr",79)}function Si(e,t){1&e&&j.Ob(0,"tr",80)}function Ci(e,t){if(1&e&&(j.Tb(0,"table",63),j.Rb(1,64),j.Dc(2,si,2,0,"th",65),j.Dc(3,li,2,1,"td",66),j.Qb(),j.Rb(4,67),j.Dc(5,ui,2,0,"th",68),j.Dc(6,di,3,4,"td",69),j.Qb(),j.Rb(7,70),j.Dc(8,bi,2,0,"th",68),j.Dc(9,gi,2,1,"td",69),j.Qb(),j.Rb(10,71),j.Dc(11,fi,2,0,"th",68),j.Dc(12,pi,3,4,"td",69),j.Qb(),j.Rb(13,72),j.Dc(14,mi,2,0,"th",65),j.Dc(15,hi,5,0,"td",66),j.Qb(),j.Dc(16,vi,1,0,"tr",73),j.Dc(17,Si,1,0,"tr",74),j.Sb()),2&e){var o=j.fc(2);j.lc("dataSource",o.dataSource),j.Cb(16),j.lc("matHeaderRowDef",o.displayedColumns),j.Cb(1),j.lc("matRowDefColumns",o.displayedColumns)}}function Ti(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-card",0),j.Tb(1,"mat-card-title"),j.Tb(2,"h4"),j.Fc(3),j.Dc(4,Zn,3,0,"button",1),j.Dc(5,Yn,3,0,"button",1),j.Sb(),j.Sb(),j.Tb(6,"mat-card-content"),j.Dc(7,ci,29,15,"form",2),j.Dc(8,ri,1,0,"hr",3),j.Tb(9,"mat-form-field",11),j.Tb(10,"input",52),j.bc("keyup",function(e){return j.xc(o),j.fc().applyFilter(e.target.value)}),j.Sb(),j.Sb(),j.Dc(11,Ci,18,3,"table",53),j.Sb(),j.Sb()}if(2&e){var n=j.fc();j.Cb(3),j.Hc(" Detalle del art\xedculo ",n.articulo.descripcion," "),j.Cb(1),j.lc("ngIf",!n.showDetalleForm),j.Cb(1),j.lc("ngIf",n.showDetalleForm),j.Cb(2),j.lc("ngIf",n.showDetalleForm),j.Cb(1),j.lc("ngIf",n.recetas.length>0),j.Cb(3),j.lc("ngIf",n.recetas.length>0)}}var _i,xi=((_i=function(){function e(t,o,n,i,a,c,r,l){var u=this;s(this,e),this.dialog=t,this.snackBar=o,this.ls=n,this.articuloSrvc=i,this.medidaSrvc=a,this.presentacionSrvc=c,this.impuestoEspecialSrvc=r,this.rptSrvc=l,this.categoria=null,this.subcategoria=null,this.articuloSvd=new j.o,this.titulo="Receta",this.showArticuloForm=!0,this.medidas=[],this.medidasFull=[],this.presentaciones=[],this.articulos=[],this.filteredArticulos=[],this.recetas=[],this.impuestosEspeciales=[],this.showDetalleForm=!0,this.displayedColumns=["articulo","cantidad","medida","precio","editItem"],this.keyboardLayout=H.a.IDIOMA_TECLADO,this.esMovil=!1,this.txtArticuloSelected=void 0,this.resetArticulo=function(){u.articulo={articulo:null,categoria_grupo:u.articulo.categoria_grupo,presentacion:null,descripcion:null,precio:null,bien_servicio:"B",produccion:0,mostrar_pos:1,presentacion_reporte:null,impuesto_especial:null,shopify_id:null,multiple:0,cantidad_minima:1,cantidad_maxima:1,combo:0,rendimiento:0,mostrar_inventario:0},u.recetas=[],u.resetReceta()},this.setArticuloCategoriaGrupo=function(e){return u.articulo.categoria_grupo=+e},this.onSubmit=function(){u.articuloSrvc.saveArticulo(u.articulo).subscribe(function(e){e.exito?(u.articuloSvd.emit(),u.resetArticulo(),u.articulo=e.articulo,u.loadRecetas(u.articulo.articulo),u.loadArticulos(),u.snackBar.open("Art\xedculo guardado con \xe9xito...","Art\xedculo",{duration:3e3})):u.snackBar.open("ERROR: ".concat(e.mensaje),"Articulo",{duration:3e3})})},this.loadMedidas=function(){u.medidaSrvc.get().subscribe(function(e){e&&(u.medidasFull=e)})},this.loadPresentaciones=function(){u.presentacionSrvc.get().subscribe(function(e){e&&(u.presentaciones=e)})},this.loadArticulos=function(){u.articuloSrvc.getArticulos().subscribe(function(e){e&&(u.articulos=e)})},this.loadImpuestosEspeciales=function(){u.impuestoEspecialSrvc.get().subscribe(function(e){e&&(u.impuestosEspeciales=e)})},this.displayArticulo=function(e){if(e)return u.receta.articulo=e.articulo,u.filtrarMedidas(e),e.descripcion;u.medidas=[]},this.filtrarMedidas=function(e){var t=u.presentaciones.find(function(t){return+t.presentacion==+e.presentacion_reporte});u.medidas=t?u.medidasFull.filter(function(e){return+e.medida==+t.medida.medida}):[]},this.filtrarArticulos=function(e){if(e&&"string"==typeof e){var t=e.toLowerCase();u.filteredArticulos=u.articulos.filter(function(e){return e.descripcion.toLowerCase().includes(t)})}else u.filteredArticulos=u.articulos},this.resetReceta=function(){u.receta={articulo_detalle:null,receta:u.articulo.articulo||0,racionable:0,articulo:null,cantidad:1,medida:null,anulado:0,precio_extra:0,precio:0},u.txtArticuloSelected=void 0,u.updateTableDataSource()},this.loadRecetas=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+u.articulo.articulo;u.articuloSrvc.getArticuloDetalle(+e,{receta:+e}).subscribe(function(e){e&&(u.recetas=e,u.updateTableDataSource())})},this.getReceta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+u.articulo.articulo,t=arguments.length>1?arguments[1]:void 0;u.articuloSrvc.getArticuloDetalle(e,{articulo_detalle:t}).subscribe(function(e){e&&(u.receta={articulo_detalle:e[0].articulo_detalle,receta:e[0].receta.articulo,racionable:e[0].articulo.articulo,articulo:e[0].articulo.articulo,cantidad:+e[0].cantidad,medida:e[0].medida.medida,anulado:e[0].anulado||0,precio_extra:e[0].precio_extra||0,precio:+e[0].precio},u.txtArticuloSelected=e[0].articulo,u.showDetalleForm=!0)})},this.eliminaReceta=function(e){u.dialog.open(X.a,{maxWidth:"400px",data:new X.b("Eliminar detalle","\xbfDesea eliminar '".concat(e.cantidad," de ").concat(e.articulo.descripcion,"' de la receta?"),"S\xed","No")}).afterClosed().subscribe(function(t){t&&(e.anulado=1,e.articulo=e.articulo.articulo,u.articuloSrvc.saveArticuloDetalle(e).subscribe(function(e){u.loadRecetas(),u.resetReceta()}))})},this.onSubmitDetail=function(){u.receta.receta=u.articulo.articulo,u.articuloSrvc.saveArticuloDetalle(u.receta).subscribe(function(e){e&&(e.exito?(u.loadRecetas(),u.resetReceta()):u.snackBar.open("ERROR: ".concat(e.mensaje),"Art\xedculo",{duration:3e3}))})},this.imprimirReceta=function(){u.rptSrvc.imprimirReceta(u.articulo.articulo).subscribe(function(e){if(e){var t=new Blob([e],{type:"application/pdf"});Object(vn.saveAs)(t,"".concat(u.titulo,"_").concat(u.articulo.descripcion,".pdf"))}else u.snackBar.open("No se pudo generar el reporte...",u.titulo,{duration:3e3})})},this.updateTableDataSource=function(){u.dataSource=new v.k(u.recetas),u.dataSource.filterPredicate=function(e,t){return e.articulo.descripcion.toLowerCase().includes(t)}},this.replicarASedes=function(){u.dialog.open(In,{width:"50%",data:{articulo:u.articulo}}).afterClosed().subscribe(function(e){})},this.applyFilter=function(e){u.dataSource.filter=e.toLocaleLowerCase()}}return u(e,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(H.a.usrTokenVar).enmovil||!1,this.resetArticulo(),this.loadMedidas(),this.loadArticulos(),this.loadPresentaciones(),this.loadImpuestosEspeciales()}}]),e}()).\u0275fac=function(e){return new(e||_i)(j.Nb(D.b),j.Nb(_.b),j.Nb(N.a),j.Nb(ee.a),j.Nb(Dn.a),j.Nb(te.a),j.Nb(Fn.a),j.Nb(kn.a))},_i.\u0275cmp=j.Hb({type:_i,selectors:[["app-form-producto"]],inputs:{articulo:"articulo",categoria:"categoria",subcategoria:"subcategoria"},outputs:{articuloSvd:"articuloSvd"},decls:10,vars:6,consts:[[1,"mat-elevation-z4","fullWidth"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmArticulo","ngForm"],["color","accent","class","catSubCat","selected","",4,"ngIf"],["color","warn","class","catSubCat","selected","",4,"ngIf"],[1,"fullWidth"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"ngModel","ngModelChange",4,"ngIf"],["matInput","","type","number","placeholder","Precio","name","precio","required","",3,"ngModel","ngModelChange"],["name","presentacion","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","presentacion_reporte","required","",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","C\xf3digo","name","codigo","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text","placeholder","C\xf3digo","name","codigo","required","",3,"ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text","placeholder","Shopify ID","name","shopify_id",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text","placeholder","Shopify ID","name","shopify_id",3,"ngModel","ngModelChange",4,"ngIf"],["class","fullWidth",4,"ngIf"],["name","impuesto_especial",3,"ngModel","ngModelChange"],[1,"row"],[1,"col","m3","s3"],["name","produccion",1,"example-margin",3,"ngModel","ngModelChange"],["name","mostrar_pos",1,"example-margin",3,"ngModel","ngModelChange"],["name","combo",1,"example-margin",3,"ngModel","ngModelChange"],["name","multiple",1,"example-margin",3,"ngModel","ngModelChange"],["name","mostrar_inventario",1,"example-margin",3,"ngModel","ngModelChange"],["name","esreceta",1,"example-margin",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["color","accent","selected","",1,"catSubCat"],["color","warn","selected","",1,"catSubCat"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"matKeyboard","ngModel","ngModelChange"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"ngModel","ngModelChange"],[3,"value"],["matInput","","type","text","placeholder","C\xf3digo","name","codigo","required","",3,"matKeyboard","ngModel","ngModelChange"],["matInput","","type","text","placeholder","C\xf3digo","name","codigo","required","",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","Shopify ID","name","shopify_id",3,"matKeyboard","ngModel","ngModelChange"],["matInput","","type","text","placeholder","Shopify ID","name","shopify_id",3,"ngModel","ngModelChange"],["matInput","","type","number","step","0.05","placeholder","Rendimiento","name","rendimiento","required","",3,"ngModel","ngModelChange"],["matInput","","type","number","step","1","placeholder","Cantidad minima","name","minima","required","",3,"ngModel","ngModelChange"],["matInput","","type","number","step","1","placeholder","Cantidad maxima","name","maxima","required","",3,"ngModel","ngModelChange"],["matInput","","type","number","placeholder","Cantidad gravable","name","cantidad_gravable",3,"ngModel","ngModelChange"],["matInput","","type","number","placeholder","Precio sugerido","name","precio_sugerido",3,"ngModel","ngModelChange"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"click"],["mat-raised-button","","type","button","color","accent",3,"click"],["matInput","","placeholder","Buscar",3,"keyup"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleArticulo","ngForm"],["type","text","placeholder","Art\xedculo","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith"],["autoArticulos","matAutocomplete"],["matInput","","placeholder","Cantidad","name","cantidad","required","",3,"ngModel","ngModelChange"],["name","medida","required","",3,"ngModel","ngModelChange"],["name","racionable",1,"fullWidth",3,"ngModel","ngModelChange"],["name","extra",1,"fullWidth",3,"ngModel","ngModelChange"],["matInput","","placeholder","Precio","name","precio","required","",3,"ngModel","ngModelChange"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","articulo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","cantidad"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","medida"],["matColumnDef","precio"],["matColumnDef","editItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(j.Tb(0,"mat-card",0),j.Tb(1,"mat-card-title"),j.Tb(2,"h4"),j.Fc(3),j.Dc(4,On,3,0,"button",1),j.Dc(5,wn,3,0,"button",1),j.Sb(),j.Sb(),j.Tb(6,"mat-card-content"),j.Dc(7,Xn,61,29,"form",2),j.Sb(),j.Sb(),j.Dc(8,Jn,1,0,"hr",3),j.Dc(9,Ti,12,6,"mat-card",4)),2&e&&(j.Cb(3),j.Hc(" Art\xedculo ",t.articulo.articulo?t.articulo.descripcion:""," "),j.Cb(1),j.lc("ngIf",!t.showArticuloForm),j.Cb(1),j.lc("ngIf",t.showArticuloForm),j.Cb(2),j.lc("ngIf",t.showArticuloForm),j.Cb(1),j.lc("ngIf",t.articulo.articulo),j.Cb(1),j.lc("ngIf",t.articulo.articulo))},directives:[p.a,p.h,i.m,p.c,T.a,b.a,c.r,c.l,c.m,w.b,g.b,f.b,c.o,c.c,c.p,c.k,c.n,g.f,S.a,i.l,C.a,w.a,A.a,$.m,O.c,O.a,v.j,v.c,v.e,v.b,v.g,v.i,v.d,v.a,v.f,v.h],pipes:[i.f],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}.catSubCat[_ngcontent-%COMP%]{margin-bottom:10px}"]}),_i),Mi=["frmProducto"],yi=["frmSubcategoria"];function Ii(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-chip",16),j.bc("click",function(){j.xc(o);var e=t.$implicit,n=j.fc();return n.categoria=e,n.categoriaGrupo=null,n.loadSubCategorias(e.categoria)}),j.Fc(1),j.Sb()}if(2&e){var n=t.$implicit;j.Cb(1),j.Hc(" ",n.descripcion," ")}}function Di(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-chip",19),j.bc("click",function(){j.xc(o);var e=t.$implicit,n=j.fc(2);return n.categoriaGrupo=e,n.loadSubCategorias(n.categoria.categoria,e.categoria_grupo)}),j.Fc(1),j.Sb()}if(2&e){var n=t.$implicit;j.Cb(1),j.Hc(" ",n.descripcion," ")}}function Fi(e,t){if(1&e&&(j.Tb(0,"mat-chip-list",17),j.Dc(1,Di,2,1,"mat-chip",18),j.Sb()),2&e){var o=t.$implicit;j.Cb(1),j.lc("ngForOf",o)}}function ki(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",20),j.bc("click",function(){j.xc(o);var e=t.$implicit;return j.fc().setArticulo(e)}),j.Fc(1),j.Sb()}if(2&e){var n=t.$implicit;j.Cb(1),j.Gc(n.descripcion)}}var Oi,wi,Ei=function(){return{standalone:!0}},Ai=((Oi=function(){function e(t,o){var n=this;s(this,e),this.articuloSrvc=t,this.ls=o,this.categorias=[],this.categoriasGrupos=[],this.listasCategoriasGrupo=[],this.articulos=[],this.articulosFull=[],this.txtFiltro="",this.setArticulo=function(e){n.articuloSrvc.getArticulo({articulo:e.articulo}).subscribe(function(e){if(e&&e.length>0){var t=e[0];n.articulo={articulo:+t.articulo,categoria_grupo:+t.categoria_grupo.categoria_grupo,presentacion:t.presentacion.presentacion,descripcion:t.descripcion,precio:+t.precio,codigo:t.codigo,produccion:t.produccion,presentacion_reporte:t.presentacion_reporte.presentacion,mostrar_pos:t.mostrar_pos,impuesto_especial:t.impuesto_especial,shopify_id:t.shopify_id,multiple:t.multiple,cantidad_minima:t.cantidad_minima,cantidad_maxima:t.cantidad_maxima,combo:t.combo,rendimiento:t.rendimiento,mostrar_inventario:t.mostrar_inventario,esreceta:t.esreceta,cantidad_gravable:t.cantidad_gravable,precio_sugerido:t.precio_sugerido},n.frmProductoComponent.loadRecetas(+n.articulo.articulo),n.frmProductoComponent.resetReceta()}})},this.setArticuloCategoriaGrupo=function(e){n.articulo.categoria_grupo=+e,n.frmProductoComponent.setArticuloCategoriaGrupo(+e)},this.refreshArticuloList=function(e){n.loadArticulos()},this.loadCategorias=function(){n.articuloSrvc.getCategorias({sede:+n.ls.get(H.a.usrTokenVar).sede||0}).subscribe(function(e){e&&(n.categorias=e)})},this.loadSubCategorias=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o={categoria:+e,categoria_grupo_grupo:null};t?(n.frmProductoComponent.articulo.categoria_grupo=t,o.categoria_grupo_grupo=t):(n.frmProductoComponent.articulo.categoria_grupo=null,delete o.categoria_grupo_grupo,n.listasCategoriasGrupo=[]),n.articuloSrvc.getCategoriasGrupos(o).subscribe(function(e){e&&e.length>0?n.listasCategoriasGrupo.push(n.articuloSrvc.adaptCategoriaGrupoResponse(e)):t&&n.loadArticulos(t)})},this.loadArticulos=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={categoria_grupo:null};e?t.categoria_grupo=e:delete t.categoria_grupo,n.articuloSrvc.getArticulos(t).subscribe(function(e){e&&(n.articulosFull=e,n.articulos=JSON.parse(JSON.stringify(n.articulosFull)))})},this.reloadCategoriasInSubcategoriasArticulos=function(){n.loadCategorias(),n.frmSubcategoria.loadCategorias()},this.articulo={articulo:null,categoria_grupo:null,presentacion:null,descripcion:null,precio:null,bien_servicio:"B",produccion:0,presentacion_reporte:null,mostrar_pos:0,impuesto_especial:null,rendimiento:1,mostrar_inventario:0}}return u(e,[{key:"ngOnInit",value:function(){this.loadCategorias(),this.loadArticulos()}},{key:"applyFilter",value:function(){this.articulos=this.txtFiltro.length>0?Object(H.b)(this.articulosFull,this.txtFiltro):JSON.parse(JSON.stringify(this.articulosFull))}}]),e}()).\u0275fac=function(e){return new(e||Oi)(j.Nb(ee.a),j.Nb(N.a))},Oi.\u0275cmp=j.Hb({type:Oi,selectors:[["app-producto"]],viewQuery:function(e,t){var o;1&e&&(j.Kc(Mi,1),j.Kc(yi,1)),2&e&&(j.sc(o=j.cc())&&(t.frmProductoComponent=o.first),j.sc(o=j.cc())&&(t.frmSubcategoria=o.first))},decls:20,vars:9,consts:[["label","Categor\xedas"],[3,"categoriaGrupoSvd","onChangeSubCategoriaEv"],["label","Sub-categor\xedas"],["frmSubcategoria",""],["label","Art\xedculos"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","start start"],["fxFlex","100%"],["color","accent","selected","",3,"click",4,"ngFor","ngForOf"],["class","divSubCategorias",4,"ngFor","ngForOf"],["fxFlex","40%","fxFlex.xs","100%","fxFlex.sm","100%","fxLayout","row wrap","fxLayoutGap","8px grid","fxLayoutAlign","start start",1,"divArticulos"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],["mat-list-item","","class","accion-comanda mat-elevation-z4",3,"click",4,"ngFor","ngForOf"],["fxFlex","60%","fxFlex.xs","100%","fxFlex.sm","100%",1,"divArticulos"],[3,"categoria","subcategoria","articulo","articuloSvd"],["frmProducto",""],["color","accent","selected","",3,"click"],[1,"divSubCategorias"],["color","warn","selected","",3,"click",4,"ngFor","ngForOf"],["color","warn","selected","",3,"click"],["mat-list-item","",1,"accion-comanda","mat-elevation-z4",3,"click"]],template:function(e,t){1&e&&(j.Tb(0,"mat-tab-group"),j.Tb(1,"mat-tab",0),j.Tb(2,"app-categoria-producto",1),j.bc("categoriaGrupoSvd",function(){return t.reloadCategoriasInSubcategoriasArticulos()})("onChangeSubCategoriaEv",function(e){return t.setArticuloCategoriaGrupo(e)}),j.Sb(),j.Sb(),j.Tb(3,"mat-tab",2),j.Ob(4,"app-sub-categoria-producto",null,3),j.Sb(),j.Tb(6,"mat-tab",4),j.Tb(7,"div",5),j.Tb(8,"div",6),j.Tb(9,"mat-chip-list"),j.Dc(10,Ii,2,1,"mat-chip",7),j.Sb(),j.Dc(11,Fi,2,1,"mat-chip-list",8),j.Sb(),j.Tb(12,"div",9),j.Tb(13,"mat-form-field",10),j.Tb(14,"input",11),j.bc("keyup",function(){return t.applyFilter()})("ngModelChange",function(e){return t.txtFiltro=e}),j.Sb(),j.Sb(),j.Tb(15,"mat-action-list"),j.Dc(16,ki,2,1,"button",12),j.Sb(),j.Sb(),j.Tb(17,"div",13),j.Tb(18,"app-form-producto",14,15),j.bc("articuloSvd",function(e){return t.refreshArticuloList(e)}),j.Sb(),j.Sb(),j.Sb(),j.Sb(),j.Sb()),2&e&&(j.Cb(10),j.lc("ngForOf",t.categorias),j.Cb(1),j.lc("ngForOf",t.listasCategoriasGrupo),j.Cb(3),j.lc("ngModel",t.txtFiltro)("ngModelOptions",j.nc(8,Ei)),j.Cb(2),j.lc("ngForOf",t.articulos),j.Cb(2),j.lc("categoria",t.categoria)("subcategoria",t.categoriaGrupo)("articulo",t.articulo))},directives:[h.b,h.a,nn,mn,hn.c,hn.b,hn.a,w.b,i.l,hn.d,g.b,f.b,c.c,c.k,c.n,d.a,xi,w.a,d.c],styles:[".divArticulos[_ngcontent-%COMP%]{padding:3px 8px;overflow-y:auto;margin:0;height:85vh}.divArticulos[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]{width:200px;max-height:95px}.divSubCategorias[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px}.accion-comanda[_ngcontent-%COMP%]{background-color:#fff;margin:10px 0}"]}),Oi),Ri=["frmEgreso"],Bi=["frmIngreso"],Hi=((wi=function(){function e(t,o,n){var i=this;s(this,e),this.ls=t,this._snackBar=o,this.transformacionSrvc=n,this.mermaDetalle=[],this.showMerma=!0,this.bloqueoBotones=!1,this.transformar=function(){i.bloqueoBotones=!0,i.egreso=i.frmEgreso.egreso,i.ingreso=i.frmIngreso.ingreso,i.transformacion={egreso:{tipo_movimiento:i.egreso.tipo_movimiento,fecha:i.egreso.fecha,proveedor:i.ingreso.proveedor,bodega:i.egreso.bodega,usuario:i.egreso.usuario,estatus_movimiento:i.egreso.estatus_movimiento,bodega_destino:i.egreso.bodega_destino,tipo_movimiento_destino:i.egreso.tipo_movimiento_destino,detalle:[]},ingreso:{tipo_movimiento:i.ingreso.tipo_movimiento,fecha:i.ingreso.fecha,proveedor:i.ingreso.proveedor,bodega:i.ingreso.bodega,usuario:i.ingreso.usuario,bodega_origen:i.ingreso.bodega_origen,comentario:i.ingreso.comentario,detalle:[]},merma:[]},i.frmEgreso.detallesMerma.forEach(function(e){return i.transformacion.merma.push({articulo:e.articulo,cantidad:e.cantidad,precio_unitario:e.precio_unitario,precio_total:e.precio_total,presentacion:e.presentacion,cantidad_utilizada:e.cantidad_utilizada})}),i.frmEgreso.detallesEgreso.forEach(function(e){return i.transformacion.egreso.detalle.push({articulo:e.articulo,cantidad:e.cantidad,precio_unitario:e.precio_unitario,precio_total:e.precio_total,presentacion:e.presentacion})}),i.frmIngreso.detallesIngreso.forEach(function(e){return i.transformacion.ingreso.detalle.push({articulo:e.articulo,cantidad:e.cantidad,precio_unitario:e.precio_unitario,precio_total:e.precio_total,presentacion:e.presentacion,cantidad_utilizada:e.cantidad_utilizada})}),i.transformacion.egreso&&i.transformacion.egreso.detalle&&i.transformacion.egreso.detalle.length>0&&i.transformacion.ingreso&&i.transformacion.ingreso.detalle&&i.transformacion.ingreso.detalle.length>0?i.transformacionSrvc.transformar(i.transformacion).subscribe(function(e){i.bloqueoBotones=!1,e.exito?(i.frmEgreso.resetEgreso(),i.frmEgreso.detallesEgreso=[],i.frmEgreso.resetDetalleMerma(),i.frmEgreso.detallesMerma=[],i.frmIngreso.resetIngreso(),i.frmIngreso.detallesIngreso=[],i._snackBar.open("Transformaci\xf3n generada con \xe9xito...","Transformaci\xf3n",{duration:5e3})):i._snackBar.open("ERROR: ".concat(e.mensaje),"Transformaci\xf3n",{duration:3e3})}):(i.bloqueoBotones=!1,i._snackBar.open("Faltan datos necesario. Favor complete los datos e intente de nuevo.","Transformaci\xf3n",{duration:3e3}))}}return u(e,[{key:"ngOnInit",value:function(){this.egreso={egreso:null,tipo_movimiento:null,bodega:null,fecha:P().format(H.a.dbDateFormat),usuario:this.ls.get(H.a.usrTokenVar).idusr||0,estatus_movimiento:1,traslado:0},this.ingreso={ingreso:null,tipo_movimiento:null,fecha:P().format(H.a.dbDateFormat),bodega:null,usuario:this.ls.get(H.a.usrTokenVar).idusr||0,comentario:null,proveedor:null}}},{key:"doSomething",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||wi)(j.Nb(N.a),j.Nb(_.b),j.Nb(Dt))},wi.\u0275cmp=j.Hb({type:wi,selectors:[["app-transformacion"]],viewQuery:function(e,t){var o;1&e&&(j.Kc(Ri,1),j.Kc(Bi,1)),2&e&&(j.sc(o=j.cc())&&(t.frmEgreso=o.first),j.sc(o=j.cc())&&(t.frmIngreso=o.first))},decls:15,vars:6,consts:[[1,"row"],[1,"col","m12","s12",2,"padding-bottom","5px !important"],["align","end"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[2,"font-size","18pt"],[1,"col","m6","s12"],[3,"egreso","saveToDB","egresoChange","egresoSavedEv"],["frmEgreso",""],[3,"bodega","ingreso","saveToDB","ingresoChange","ingresoSavedEv"],["frmIngreso",""]],template:function(e,t){1&e&&(j.Tb(0,"div",0),j.Tb(1,"div",1),j.Tb(2,"div",2),j.Tb(3,"button",3),j.bc("click",function(){return t.transformar()}),j.Tb(4,"mat-icon",4),j.Fc(5,"transform"),j.Sb(),j.Fc(6,"\xa0Transformar "),j.Sb(),j.Sb(),j.Sb(),j.Sb(),j.Tb(7,"div",0),j.Tb(8,"div",5),j.Tb(9,"app-form-egreso",6,7),j.bc("egresoChange",function(e){return t.egreso=e})("egresoSavedEv",function(){return t.doSomething()}),j.Sb(),j.Sb(),j.Tb(11,"div",5),j.Tb(12,"app-form-ingreso",8,9),j.bc("ingresoChange",function(e){return t.ingreso=e})("ingresoSavedEv",function(){return t.doSomething()}),j.Sb(),j.Sb(),j.Sb(),j.Ob(14,"div",0)),2&e&&(j.Cb(3),j.lc("disabled",t.bloqueoBotones),j.Cb(6),j.lc("egreso",t.egreso)("saveToDB",!1),j.Cb(3),j.lc("bodega",!1)("ingreso",t.ingreso)("saveToDB",!1))},directives:[T.a,b.a,Qo,ft],styles:[""]}),wi),Pi=o("NU9O");function ji(e,t){if(1&e&&(j.Tb(0,"mat-option",13),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.bodega),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function Ni(e,t){if(1&e&&(j.Tb(0,"mat-option",13),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.sede),j.Cb(1),j.Hc(" ",o.nombre," ")}}function Ui(e,t){1&e&&j.Ob(0,"app-cargando")}var Gi,zi=function(){return{standalone:!0}},qi=((Gi=function(){function e(t,o,n,i){var a=this;s(this,e),this.snackBar=t,this.pdfServicio=o,this.sedeSrvc=n,this.bodegaSrvc=i,this.bodegas=[],this.sedes=[],this.params={},this.titulo="Existencias",this.cargando=!1,this.configBotones={showPdf:!0,showHtml:!1,showExcel:!0},this.getSede=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.sedeSrvc.get(e).subscribe(function(e){a.sedes=e})},this.getBodega=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.bodegaSrvc.get(e).subscribe(function(e){a.bodegas=e})},this.excelClick=function(){a.params._excel=1,a.cargando=!0,a.pdfServicio.getReporteExistencia(a.params).subscribe(function(e){if(a.cargando=!1,e){var t=new Blob([e],{type:"application/vnd.ms-excel"});Object(vn.saveAs)(t,"".concat(a.titulo,".xls"))}else a.snackBar.open("No se pudo generar el reporte...",a.titulo,{duration:3e3})})},this.resetParams=function(){a.params={},a.cargando=!1}}return u(e,[{key:"ngOnInit",value:function(){this.params.fecha=P().format(H.a.dbDateFormat),this.getSede(),this.getBodega()}},{key:"onSubmit",value:function(){var e=this;this.params._excel=0,this.cargando=!0,this.pdfServicio.getReporteExistencia(this.params).subscribe(function(t){if(e.cargando=!1,t){var o=new Blob([t],{type:"application/pdf"});Object(vn.saveAs)(o,"".concat(e.titulo,".pdf"))}else e.snackBar.open("No se pudo generar el reporte...",e.titulo,{duration:3e3})})}}]),e}()).\u0275fac=function(e){return new(e||Gi)(j.Nb(_.b),j.Nb(kn.a),j.Nb(Sn.a),j.Nb(Y.a))},Gi.\u0275cmp=j.Hb({type:Gi,selectors:[["app-existencias"]],decls:24,vars:9,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmRptExistencias","ngForm"],[1,"fullWidth"],["name","bodega",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","sede",3,"ngModel","ngModelChange"],["matInput","","type","date","placeholder","Al","required","",3,"ngModel","ngModelOptions","ngModelChange"],["align","end"],[3,"configuracion","excelClick","pdfClick","resetParamsClick"],[4,"ngIf"],[3,"value"]],template:function(e,t){1&e&&(j.Tb(0,"div",0),j.Tb(1,"div",1),j.Tb(2,"mat-card",2),j.Tb(3,"mat-card-title"),j.Tb(4,"h4"),j.Fc(5,"Reporte de existencias"),j.Sb(),j.Sb(),j.Tb(6,"mat-card-content"),j.Tb(7,"form",3,4),j.Tb(9,"mat-form-field",5),j.Tb(10,"mat-label"),j.Fc(11,"Bodega"),j.Sb(),j.Tb(12,"mat-select",6),j.bc("ngModelChange",function(e){return t.params.bodega=e}),j.Dc(13,ji,2,2,"mat-option",7),j.Sb(),j.Sb(),j.Tb(14,"mat-form-field",5),j.Tb(15,"mat-label"),j.Fc(16,"Sede"),j.Sb(),j.Tb(17,"mat-select",8),j.bc("ngModelChange",function(e){return t.params.sede=e}),j.Dc(18,Ni,2,2,"mat-option",7),j.Sb(),j.Sb(),j.Tb(19,"mat-form-field",5),j.Tb(20,"input",9),j.bc("ngModelChange",function(e){return t.params.fecha=e}),j.Sb(),j.Sb(),j.Tb(21,"div",10),j.Tb(22,"app-rpt-botones",11),j.bc("excelClick",function(){return t.excelClick()})("pdfClick",function(){return t.onSubmit()})("resetParamsClick",function(){return t.resetParams()}),j.Sb(),j.Sb(),j.Sb(),j.Dc(23,Ui,1,0,"app-cargando",12),j.Sb(),j.Sb(),j.Sb(),j.Sb()),2&e&&(j.Cb(12),j.lc("ngModel",t.params.bodega),j.Cb(1),j.lc("ngForOf",t.bodegas),j.Cb(4),j.lc("ngModel",t.params.sede),j.Cb(1),j.lc("ngForOf",t.sedes),j.Cb(2),j.lc("ngModel",t.params.fecha)("ngModelOptions",j.nc(8,zi)),j.Cb(2),j.lc("configuracion",t.configBotones),j.Cb(1),j.lc("ngIf",t.cargando))},directives:[p.a,p.h,p.c,c.r,c.l,c.m,g.b,g.f,S.a,c.k,c.n,i.l,f.b,c.c,c.p,Pi.a,i.m,$.m,Cn.a],styles:[""]}),Gi);function Li(e,t){if(1&e&&(j.Tb(0,"mat-option",14),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.articulo),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function $i(e,t){if(1&e&&(j.Tb(0,"mat-option",14),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.bodega),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function Wi(e,t){if(1&e&&(j.Tb(0,"mat-option",14),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.sede),j.Cb(1),j.Hc(" ",o.nombre," ")}}function Vi(e,t){1&e&&j.Ob(0,"app-cargando")}var Ki,Qi,Xi=function(){return{standalone:!0}},Ji=((Ki=function(){function e(t,o,n,i,a){var c=this;s(this,e),this.snackBar=t,this.pdfServicio=o,this.sedeSrvc=n,this.bodegaSrvc=i,this.articuloSrvc=a,this.bodegas=[],this.sedes=[],this.articulos=[],this.params={},this.titulo="Kardex",this.cargando=!1,this.configBotones={showPdf:!0,showHtml:!1,showExcel:!0},this.getSede=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c.sedeSrvc.get(e).subscribe(function(e){c.sedes=e})},this.getArticulo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c.articuloSrvc.getArticulosIngreso(e).subscribe(function(e){c.articulos=e})},this.getBodega=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c.bodegaSrvc.get(e).subscribe(function(e){c.bodegas=e})},this.excelClick=function(){c.params._excel=1,c.cargando=!0,c.pdfServicio.getReporteKardex(c.params).subscribe(function(e){if(c.cargando=!1,e){var t=new Blob([e],{type:"application/vnd.ms-excel"});Object(vn.saveAs)(t,"".concat(c.titulo,".xls"))}else c.snackBar.open("No se pudo generar el reporte...",c.titulo,{duration:3e3})})},this.resetParams=function(){c.params={},c.cargando=!1}}return u(e,[{key:"ngOnInit",value:function(){this.getSede(),this.getBodega(),this.getArticulo()}},{key:"onSubmit",value:function(){var e=this;this.params._excel=0,this.pdfServicio.getReporteKardex(this.params).subscribe(function(t){if(t){var o=new Blob([t],{type:"application/pdf"});Object(vn.saveAs)(o,"".concat(e.titulo,".pdf"))}else e.snackBar.open("No se pudo generar el reporte...",e.titulo,{duration:3e3})})}}]),e}()).\u0275fac=function(e){return new(e||Ki)(j.Nb(_.b),j.Nb(kn.a),j.Nb(Sn.a),j.Nb(Y.a),j.Nb(ee.a))},Ki.\u0275cmp=j.Hb({type:Ki,selectors:[["app-kardex"]],decls:30,vars:14,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],[1,"fullWidth"],["name","articulo","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","bodega",3,"ngModel","ngModelChange"],["name","sede",3,"ngModel","ngModelChange"],["matInput","","type","date","placeholder","Del","required","",3,"ngModel","ngModelOptions","ngModelChange"],["matInput","","type","date","placeholder","Al","required","",3,"ngModel","ngModelOptions","ngModelChange"],["align","end"],[3,"configuracion","excelClick","pdfClick","resetParamsClick"],[4,"ngIf"],[3,"value"]],template:function(e,t){1&e&&(j.Tb(0,"div",0),j.Tb(1,"div",1),j.Tb(2,"mat-card",2),j.Tb(3,"mat-card-title"),j.Tb(4,"h4"),j.Fc(5,"Kardex"),j.Sb(),j.Sb(),j.Tb(6,"mat-card-content"),j.Tb(7,"form",3),j.Tb(8,"mat-form-field",4),j.Tb(9,"mat-label"),j.Fc(10,"Articulo"),j.Sb(),j.Tb(11,"mat-select",5),j.bc("ngModelChange",function(e){return t.params.articulo=e}),j.Dc(12,Li,2,2,"mat-option",6),j.Sb(),j.Sb(),j.Tb(13,"mat-form-field",4),j.Tb(14,"mat-label"),j.Fc(15,"Bodega"),j.Sb(),j.Tb(16,"mat-select",7),j.bc("ngModelChange",function(e){return t.params.bodega=e}),j.Dc(17,$i,2,2,"mat-option",6),j.Sb(),j.Sb(),j.Tb(18,"mat-form-field",4),j.Tb(19,"mat-label"),j.Fc(20,"Sede"),j.Sb(),j.Tb(21,"mat-select",8),j.bc("ngModelChange",function(e){return t.params.sede=e}),j.Dc(22,Wi,2,2,"mat-option",6),j.Sb(),j.Sb(),j.Tb(23,"mat-form-field",4),j.Tb(24,"input",9),j.bc("ngModelChange",function(e){return t.params.fdel=e}),j.Sb(),j.Sb(),j.Tb(25,"mat-form-field",4),j.Tb(26,"input",10),j.bc("ngModelChange",function(e){return t.params.fal=e}),j.Sb(),j.Sb(),j.Tb(27,"div",11),j.Tb(28,"app-rpt-botones",12),j.bc("excelClick",function(){return t.excelClick()})("pdfClick",function(){return t.onSubmit()})("resetParamsClick",function(){return t.resetParams()}),j.Sb(),j.Sb(),j.Sb(),j.Dc(29,Vi,1,0,"app-cargando",13),j.Sb(),j.Sb(),j.Sb(),j.Sb()),2&e&&(j.Cb(11),j.lc("ngModel",t.params.articulo),j.Cb(1),j.lc("ngForOf",t.articulos),j.Cb(4),j.lc("ngModel",t.params.bodega),j.Cb(1),j.lc("ngForOf",t.bodegas),j.Cb(4),j.lc("ngModel",t.params.sede),j.Cb(1),j.lc("ngForOf",t.sedes),j.Cb(2),j.lc("ngModel",t.params.fdel)("ngModelOptions",j.nc(12,Xi)),j.Cb(2),j.lc("ngModel",t.params.fal)("ngModelOptions",j.nc(13,Xi)),j.Cb(2),j.lc("configuracion",t.configBotones),j.Cb(1),j.lc("ngIf",t.cargando))},directives:[p.a,p.h,p.c,c.r,c.l,c.m,g.b,g.f,S.a,c.p,c.k,c.n,i.l,f.b,c.c,Pi.a,i.m,$.m,Cn.a],styles:[""]}),Ki),Zi=["frmIngreso"],Yi=((Qi=function(){function e(t,o,n){var i=this;s(this,e),this.ls=t,this.snackBar=o,this.transformacionSrvc=n,this.bloqueoBotones=!1,this.transformar=function(){i.bloqueoBotones=!0,i.ingreso=i.frmIngreso.ingreso,i.produccion={tipo_movimiento:i.ingreso.tipo_movimiento,fecha:i.ingreso.fecha,proveedor:i.ingreso.proveedor,bodega:i.ingreso.bodega,usuario:i.ingreso.usuario,bodega_origen:i.ingreso.bodega_origen,comentario:i.ingreso.comentario,detalle:[]},i.frmIngreso.detallesIngreso.forEach(function(e){return i.produccion.detalle.push({articulo:e.articulo,cantidad:e.cantidad,precio_unitario:e.precio_unitario,precio_total:e.precio_total,presentacion:e.presentacion})}),i.produccion&&i.produccion.detalle&&i.produccion.detalle.length>0?i.transformacionSrvc.producir(i.produccion).subscribe(function(e){i.bloqueoBotones=!1,e.exito?(i.frmIngreso.resetIngreso(),i.frmIngreso.detallesIngreso=[],i.snackBar.open("Producto generado con \xe9xito...","Producci\xf3n",{duration:5e3})):i.snackBar.open("ERROR: ".concat(e.mensaje),"Producci\xf3n",{duration:3e3})}):(i.bloqueoBotones=!1,i.snackBar.open("Faltan datos necesario. Favor complete los datos e intente de nuevo.","Transformaci\xf3n",{duration:3e3}))},this.doSomething=function(){}}return u(e,[{key:"ngOnInit",value:function(){this.ingreso={ingreso:null,tipo_movimiento:null,fecha:P().format(H.a.dbDateFormat),bodega:null,usuario:this.ls.get(H.a.usrTokenVar).idusr||0,comentario:null,proveedor:null}}}]),e}()).\u0275fac=function(e){return new(e||Qi)(j.Nb(N.a),j.Nb(_.b),j.Nb(Dt))},Qi.\u0275cmp=j.Hb({type:Qi,selectors:[["app-produccion"]],viewQuery:function(e,t){var o;1&e&&j.Kc(Zi,1),2&e&&j.sc(o=j.cc())&&(t.frmIngreso=o.first)},decls:11,vars:4,consts:[[1,"row"],[1,"col","m12","s12",2,"padding-bottom","5px !important"],["align","end"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[2,"font-size","18pt"],[1,"col","m12","s12"],[3,"produccion","ingreso","saveToDB","ingresoChange","ingresoSavedEv"],["frmIngreso",""]],template:function(e,t){1&e&&(j.Tb(0,"div",0),j.Tb(1,"div",1),j.Tb(2,"div",2),j.Tb(3,"button",3),j.bc("click",function(){return t.transformar()}),j.Tb(4,"mat-icon",4),j.Fc(5,"transform"),j.Sb(),j.Fc(6,"\xa0Producir "),j.Sb(),j.Sb(),j.Sb(),j.Sb(),j.Tb(7,"div",0),j.Tb(8,"div",5),j.Tb(9,"app-form-ingreso",6,7),j.bc("ingresoChange",function(e){return t.ingreso=e})("ingresoSavedEv",function(){return t.doSomething()}),j.Sb(),j.Sb(),j.Sb()),2&e&&(j.Cb(3),j.lc("disabled",t.bloqueoBotones),j.Cb(6),j.lc("produccion",!0)("ingreso",t.ingreso)("saveToDB",!1))},directives:[T.a,b.a,ft],styles:[""]}),Qi);function ea(e,t){if(1&e&&(j.Tb(0,"mat-option",13),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.bodega),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function ta(e,t){if(1&e&&(j.Tb(0,"mat-option",13),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.sede),j.Cb(1),j.Hc(" ",o.nombre," ")}}function oa(e,t){1&e&&j.Ob(0,"app-cargando")}var na,ia,aa=function(){return{standalone:!0}},ca=((ia=function(){function e(t,o,n,i){var a=this;s(this,e),this.snackBar=t,this.pdfServicio=o,this.sedeSrvc=n,this.bodegaSrvc=i,this.bodegas=[],this.sedes=[],this.params={},this.titulo="Valorizado",this.cargando=!1,this.configBotones={showPdf:!0,showHtml:!1,showExcel:!0},this.getSede=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.sedeSrvc.get(e).subscribe(function(e){a.sedes=e})},this.getBodega=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.bodegaSrvc.get(e).subscribe(function(e){a.bodegas=e})},this.excelClick=function(){a.params._excel=1,a.cargando=!0,a.pdfServicio.getReporteValorizado(a.params).subscribe(function(e){if(a.cargando=!1,e){var t=new Blob([e],{type:"application/vnd.ms-excel"});Object(vn.saveAs)(t,"".concat(a.titulo,".xls"))}else a.snackBar.open("No se pudo generar el reporte...",a.titulo,{duration:3e3})})},this.resetParams=function(){a.params={},a.cargando=!1}}return u(e,[{key:"ngOnInit",value:function(){this.params.fecha=P().format(H.a.dbDateFormat),this.getSede(),this.getBodega()}},{key:"onSubmit",value:function(){var e=this;this.params._excel=0,this.cargando=!0,this.pdfServicio.getReporteValorizado(this.params).subscribe(function(t){if(e.cargando=!1,t){var o=new Blob([t],{type:"application/pdf"});Object(vn.saveAs)(o,"".concat(e.titulo,".pdf"))}else e.snackBar.open("No se pudo generar el reporte...",e.titulo,{duration:3e3})})}}]),e}()).\u0275fac=function(e){return new(e||ia)(j.Nb(_.b),j.Nb(kn.a),j.Nb(Sn.a),j.Nb(Y.a))},ia.\u0275cmp=j.Hb({type:ia,selectors:[["app-valorizado"]],decls:24,vars:9,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmRptValorizado","ngForm"],[1,"fullWidth"],["name","bodega",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","sede",3,"ngModel","ngModelChange"],["matInput","","type","date","placeholder","Al","required","",3,"ngModel","ngModelOptions","ngModelChange"],["align","end"],[3,"configuracion","excelClick","pdfClick","resetParamsClick"],[4,"ngIf"],[3,"value"]],template:function(e,t){1&e&&(j.Tb(0,"div",0),j.Tb(1,"div",1),j.Tb(2,"mat-card",2),j.Tb(3,"mat-card-title"),j.Tb(4,"h4"),j.Fc(5,"Inventario Valorizado"),j.Sb(),j.Sb(),j.Tb(6,"mat-card-content"),j.Tb(7,"form",3,4),j.Tb(9,"mat-form-field",5),j.Tb(10,"mat-label"),j.Fc(11,"Bodega"),j.Sb(),j.Tb(12,"mat-select",6),j.bc("ngModelChange",function(e){return t.params.bodega=e}),j.Dc(13,ea,2,2,"mat-option",7),j.Sb(),j.Sb(),j.Tb(14,"mat-form-field",5),j.Tb(15,"mat-label"),j.Fc(16,"Sede"),j.Sb(),j.Tb(17,"mat-select",8),j.bc("ngModelChange",function(e){return t.params.sede=e}),j.Dc(18,ta,2,2,"mat-option",7),j.Sb(),j.Sb(),j.Tb(19,"mat-form-field",5),j.Tb(20,"input",9),j.bc("ngModelChange",function(e){return t.params.fecha=e}),j.Sb(),j.Sb(),j.Tb(21,"div",10),j.Tb(22,"app-rpt-botones",11),j.bc("excelClick",function(){return t.excelClick()})("pdfClick",function(){return t.onSubmit()})("resetParamsClick",function(){return t.resetParams()}),j.Sb(),j.Sb(),j.Sb(),j.Dc(23,oa,1,0,"app-cargando",12),j.Sb(),j.Sb(),j.Sb(),j.Sb()),2&e&&(j.Cb(12),j.lc("ngModel",t.params.bodega),j.Cb(1),j.lc("ngForOf",t.bodegas),j.Cb(4),j.lc("ngModel",t.params.sede),j.Cb(1),j.lc("ngForOf",t.sedes),j.Cb(2),j.lc("ngModel",t.params.fecha)("ngModelOptions",j.nc(8,aa)),j.Cb(2),j.lc("configuracion",t.configBotones),j.Cb(1),j.lc("ngIf",t.cargando))},directives:[p.a,p.h,p.c,c.r,c.l,c.m,g.b,g.f,S.a,c.k,c.n,i.l,f.b,c.c,c.p,Pi.a,i.m,$.m,Cn.a],styles:[""]}),ia),ra=((na=function(){function e(t){s(this,e),this.http=t,this.fisicoUrl="fisico",this.srvcErrHndl=new U.a}return u(e,[{key:"generarInventarioFisico",value:function(e){return this.http.post("".concat(H.a.urlWms,"/").concat(this.fisicoUrl,"/generar"),e).pipe(Object(G.a)(H.a.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"confirmar",value:function(e){return this.http.post("".concat(H.a.urlWms,"/").concat(this.fisicoUrl,"/confirmar/").concat(+e.inventario_fisico>0?"/"+e.inventario_fisico:""),{}).pipe(Object(G.a)(H.a.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"getDetalle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.http.get("".concat(H.a.urlWms,"/").concat(this.fisicoUrl,"/buscar_detalle/").concat(e,"?").concat(q.stringify(t))).pipe(Object(G.a)(H.a.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"saveDetalle",value:function(e){return this.http.post("".concat(H.a.urlWms,"/").concat(this.fisicoUrl,"/actualizar/"),e).pipe(Object(G.a)(H.a.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}}]),e}()).\u0275fac=function(e){return new(e||na)(j.Xb(a.b))},na.\u0275prov=j.Jb({token:na,factory:na.\u0275fac,providedIn:"root"}),na);function sa(e,t){1&e&&(j.Tb(0,"mat-icon",8),j.Fc(1,"expand_more"),j.Sb())}function la(e,t){1&e&&(j.Tb(0,"mat-icon",8),j.Fc(1,"expand_less"),j.Sb())}function ua(e,t){if(1&e&&(j.Tb(0,"mat-option",21),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.bodega),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function da(e,t){if(1&e&&(j.Tb(0,"mat-option",21),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.sede),j.Cb(1),j.Hc(" ",o.nombre," ")}}function ba(e,t){if(1&e&&(j.Tb(0,"mat-option",21),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function ga(e,t){if(1&e&&(j.Tb(0,"mat-option",21),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.categoria_grupo),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function fa(e,t){1&e&&j.Ob(0,"app-cargando")}var pa=function(){return{standalone:!0}};function ma(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-card-content"),j.Tb(1,"form",9,10),j.bc("ngSubmit",function(){j.xc(o);var e=j.tc(2),t=j.fc();return e.form.valid&&t.onSubmit()}),j.Tb(3,"mat-form-field",11),j.Tb(4,"mat-label"),j.Fc(5,"Bodega"),j.Sb(),j.Tb(6,"mat-select",12),j.bc("ngModelChange",function(e){return j.xc(o),j.fc().params.bodega=e}),j.Dc(7,ua,2,2,"mat-option",13),j.Sb(),j.Sb(),j.Tb(8,"mat-form-field",11),j.Tb(9,"mat-label"),j.Fc(10,"Sede"),j.Sb(),j.Tb(11,"mat-select",14),j.bc("ngModelChange",function(e){return j.xc(o),j.fc().params.sede=e}),j.Dc(12,da,2,2,"mat-option",13),j.Sb(),j.Sb(),j.Tb(13,"mat-form-field",11),j.Tb(14,"mat-label"),j.Fc(15,"Categor\xeda"),j.Sb(),j.Tb(16,"mat-select",15),j.bc("selectionChange",function(e){return j.xc(o),j.fc().onCategoriaSelected(e)}),j.Dc(17,ba,2,2,"mat-option",13),j.Sb(),j.Sb(),j.Tb(18,"mat-form-field",11),j.Tb(19,"mat-label"),j.Fc(20,"Sub-categor\xeda"),j.Sb(),j.Tb(21,"mat-select",16),j.bc("ngModelChange",function(e){return j.xc(o),j.fc().params.categoria_grupo_grupo=e}),j.Dc(22,ga,2,2,"mat-option",13),j.Sb(),j.Sb(),j.Tb(23,"mat-form-field",11),j.Tb(24,"input",17),j.bc("ngModelChange",function(e){return j.xc(o),j.fc().params.fecha=e}),j.Sb(),j.Sb(),j.Tb(25,"mat-checkbox",18),j.bc("ngModelChange",function(e){return j.xc(o),+(j.fc().params._excel=e)}),j.Fc(26,"Generar en Excel "),j.Sb(),j.Tb(27,"div",19),j.Tb(28,"button",20),j.Fc(29,"GENERAR"),j.Sb(),j.Sb(),j.Sb(),j.Dc(30,fa,1,0,"app-cargando",7),j.Sb()}if(2&e){var n=j.tc(2),i=j.fc();j.Cb(6),j.lc("ngModel",i.params.bodega),j.Cb(1),j.lc("ngForOf",i.bodegas),j.Cb(4),j.lc("ngModel",i.params.sede),j.Cb(1),j.lc("ngForOf",i.sedes),j.Cb(5),j.lc("ngForOf",i.categorias),j.Cb(4),j.lc("ngModel",i.params.categoria_grupo_grupo),j.Cb(1),j.lc("ngForOf",i.categoriasGruposPadre),j.Cb(2),j.lc("ngModel",i.params.fecha)("ngModelOptions",j.nc(12,pa)),j.Cb(1),j.lc("ngModel",+i.params._excel),j.Cb(3),j.lc("disabled",!n.form.valid),j.Cb(2),j.lc("ngIf",i.cargando)}}var ha,va=((ha=function(){function e(t,o,n,i,a,c,r){var l=this;s(this,e),this.snackBar=t,this.pdfServicio=o,this.sedeSrvc=n,this.bodegaSrvc=i,this.articuloSrvc=a,this.fisicoSrvc=c,this.ls=r,this.bodegas=[],this.sedes=[],this.params={},this.categorias=[],this.categoriasGruposPadre=[],this.categoriasGrupos=[],this.titulo="Fisico",this.cargando=!1,this.showReporte=!0,this.getSede=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l.sedeSrvc.get(e).subscribe(function(e){l.sedes=e})},this.getBodega=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l.bodegaSrvc.get(e).subscribe(function(e){l.bodegas=e})},this.loadCategorias=function(){l.articuloSrvc.getCategorias({sede:+l.ls.get(H.a.usrTokenVar).sede||0}).subscribe(function(e){e&&(l.categorias=e)})},this.onCategoriaSelected=function(e){return l.loadSubCategorias(+e.value.categoria)},this.loadSubCategorias=function(e){l.articuloSrvc.getCategoriasGrupos({categoria:+e}).subscribe(function(e){e&&(l.categoriasGruposPadre=l.articuloSrvc.adaptCategoriaGrupoResponse(e),l.categoriasGrupos=l.categoriasGruposPadre)})},this.onSubCategoriaPadreSelected=function(e){return l.loadSubCategoriasSubcategorias(+e.value)},this.loadSubCategoriasSubcategorias=function(e){l.articuloSrvc.getCategoriasGrupos({categoria_grupo_grupo:e}).subscribe(function(e){e&&(l.categoriasGrupos=l.articuloSrvc.adaptCategoriaGrupoResponse(e))})}}return u(e,[{key:"ngOnInit",value:function(){this.getSede(),this.getBodega(),this.loadCategorias(),this.params.fecha=P().format(H.a.dbDateFormat)}},{key:"onSubmit",value:function(){var e=this;this.cargando=!0,this.fisicoSrvc.generarInventarioFisico(this.params).subscribe(function(t){e.cargando=!1,console.log(t),t.exito?e.pdfServicio.imprimirInventarioFisico(t.inventario,e.params).subscribe(function(t){if(e.params._excel){var o=new Blob([t],{type:"application/vnd.ms-excel"});Object(vn.saveAs)(o,"".concat(e.titulo,".xls"))}else{var n=new Blob([t],{type:"application/pdf"});Object(vn.saveAs)(n,"".concat(e.titulo,".pdf"))}}):e.snackBar.open("No se pudo generar el reporte... "+t.mensaje,e.titulo,{duration:3e3})})}}]),e}()).\u0275fac=function(e){return new(e||ha)(j.Nb(_.b),j.Nb(kn.a),j.Nb(Sn.a),j.Nb(Y.a),j.Nb(ee.a),j.Nb(ra),j.Nb(N.a))},ha.\u0275cmp=j.Hb({type:ha,selectors:[["app-reporte"]],decls:13,vars:3,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],[1,"col"],[1,"col",2,"float","right"],["mat-button","","type","button","color","accent",3,"click"],["class","iconFontSize",4,"ngIf"],[4,"ngIf"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmFisicoReporte","ngForm"],[1,"fullWidth"],["name","bodega","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","sede","required","",3,"ngModel","ngModelChange"],["name","categoria",3,"selectionChange"],["name","categoriaGrupoPadre",3,"ngModel","ngModelChange"],["matInput","","type","date","placeholder","Fecha","readonly","","required","",3,"ngModel","ngModelOptions","ngModelChange"],["name","excel",1,"fullWidth",3,"ngModel","ngModelChange"],["align","end"],["mat-button","","color","accent","type","submit",3,"disabled"],[3,"value"]],template:function(e,t){1&e&&(j.Tb(0,"div",0),j.Tb(1,"div",1),j.Tb(2,"mat-card",2),j.Tb(3,"mat-card-title"),j.Tb(4,"div",0),j.Tb(5,"div",3),j.Tb(6,"h4"),j.Fc(7,"Inventario F\xedsico"),j.Sb(),j.Sb(),j.Tb(8,"div",4),j.Tb(9,"button",5),j.bc("click",function(){return t.showReporte=!t.showReporte}),j.Dc(10,sa,2,0,"mat-icon",6),j.Dc(11,la,2,0,"mat-icon",6),j.Sb(),j.Sb(),j.Sb(),j.Sb(),j.Dc(12,ma,31,13,"mat-card-content",7),j.Sb(),j.Sb(),j.Sb()),2&e&&(j.Cb(10),j.lc("ngIf",t.showReporte),j.Cb(1),j.lc("ngIf",!t.showReporte),j.Cb(1),j.lc("ngIf",t.showReporte))},directives:[p.a,p.h,T.a,i.m,b.a,p.c,c.r,c.l,c.m,g.b,g.f,S.a,c.p,c.k,c.n,i.l,f.b,c.c,C.a,$.m,Cn.a],styles:[""]}),ha);function Sa(e,t){1&e&&(j.Tb(0,"mat-icon",9),j.Fc(1,"expand_more"),j.Sb())}function Ca(e,t){1&e&&(j.Tb(0,"mat-icon",9),j.Fc(1,"expand_less"),j.Sb())}function Ta(e,t){1&e&&j.Ob(0,"app-cargando")}function _a(e,t){if(1&e){var o=j.Ub();j.Tb(0,"mat-card-content"),j.Tb(1,"form",10),j.bc("ngSubmit",function(){return j.xc(o),j.fc().buscar()}),j.Tb(2,"mat-form-field",11),j.Tb(3,"input",12),j.bc("ngModelChange",function(e){return j.xc(o),j.fc().params.numero=e}),j.Sb(),j.Tb(4,"button",13),j.Fc(5,"Buscar"),j.Sb(),j.Sb(),j.Sb(),j.Dc(6,Ta,1,0,"app-cargando",7),j.Sb()}if(2&e){var n=j.fc();j.Cb(3),j.lc("ngModel",n.params.numero),j.Cb(3),j.lc("ngIf",n.cargando)}}var xa=function(){return{standalone:!0}};function Ma(e,t){if(1&e&&(j.Tb(0,"tr"),j.Tb(1,"td",24),j.Fc(2),j.Sb(),j.Tb(3,"td",24),j.Tb(4,"mat-form-field"),j.Tb(5,"input",25),j.bc("ngModelChange",function(e){return t.$implicit.existencia_sistema=e}),j.Sb(),j.Sb(),j.Sb(),j.Tb(6,"td",24),j.Tb(7,"mat-form-field",11),j.Tb(8,"input",26),j.bc("ngModelChange",function(e){return t.$implicit.existencia_fisica=e}),j.Sb(),j.Sb(),j.Sb(),j.Sb()),2&e){var o=t.$implicit;j.Cb(2),j.Hc(" ",o.narticulo," "),j.Cb(3),j.lc("ngModel",o.existencia_sistema)("ngModelOptions",j.nc(5,xa)),j.Cb(3),j.lc("ngModel",o.existencia_fisica)("ngModelOptions",j.nc(6,xa))}}function ya(e,t){if(1&e&&(j.Rb(0),j.Tb(1,"tr"),j.Tb(2,"th",23),j.Fc(3),j.Sb(),j.Sb(),j.Dc(4,Ma,9,7,"tr",17),j.Qb()),2&e){var o=t.$implicit;j.Cb(3),j.Gc(o.descripcion),j.Cb(1),j.lc("ngForOf",o.datos)}}function Ia(e,t){if(1&e&&(j.Rb(0),j.Tb(1,"tr"),j.Tb(2,"th",22),j.Tb(3,"mat-label"),j.Fc(4),j.Sb(),j.Sb(),j.Sb(),j.Dc(5,ya,5,2,"ng-container",17),j.Qb()),2&e){var o=t.$implicit;j.Cb(4),j.Gc(o.descripcion),j.Cb(1),j.lc("ngForOf",o.datos)}}function Da(e,t){1&e&&(j.Tb(0,"button",27),j.Fc(1,"Guardar"),j.Sb())}function Fa(e,t){if(1&e){var o=j.Ub();j.Tb(0,"button",20),j.bc("click",function(){return j.xc(o),j.fc(2).confirmar()}),j.Fc(1,"Confirmar"),j.Sb()}}function ka(e,t){1&e&&j.Ob(0,"app-cargando")}function Oa(e,t){if(1&e){var o=j.Ub();j.Tb(0,"div",0),j.Tb(1,"div",1),j.Tb(2,"mat-card",2),j.Ob(3,"mat-card-title"),j.Tb(4,"mat-card-content"),j.Tb(5,"form",14,15),j.bc("ngSubmit",function(){j.xc(o);var e=j.tc(6),t=j.fc();return e.form.valid&&t.actualizar()}),j.Tb(7,"table",16),j.Dc(8,Ia,6,2,"ng-container",17),j.Sb(),j.Tb(9,"div",18),j.Dc(10,Da,2,0,"button",19),j.Tb(11,"button",20),j.bc("click",function(){return j.xc(o),j.fc().imprimir()}),j.Fc(12,"PDF"),j.Sb(),j.Tb(13,"button",20),j.bc("click",function(){return j.xc(o),j.fc().imprimirXls()}),j.Fc(14,"Excel"),j.Sb(),j.Dc(15,Fa,2,0,"button",21),j.Sb(),j.Sb(),j.Dc(16,ka,1,0,"app-cargando",7),j.Sb(),j.Sb(),j.Sb(),j.Sb()}if(2&e){var n=j.fc();j.Cb(8),j.lc("ngForOf",n.articulos),j.Cb(2),j.lc("ngIf",0==n.inventario.confirmado),j.Cb(5),j.lc("ngIf",0==n.inventario.confirmado),j.Cb(1),j.lc("ngIf",n.cargando)}}var wa,Ea,Aa=((wa=function(){function e(t,o,n,i){var a=this;s(this,e),this.snackBar=t,this.pdfServicio=o,this.fisicoSrvc=n,this.dialog=i,this.showForm=!0,this.params={},this.cargando=!1,this.articulos=[],this.inventario={},this.titulo="Inventario_Fisico",this.resetDatos=function(){a.articulos=[],a.inventario={inventario_fisico:0,sede:null,usuario:null,categoria_grupo:null,fhcreacion:null,fecha:null,notas:null,confirmado:0}},this.buscar=function(){(""+a.params.numero).length<19?(a.resetDatos(),a.fisicoSrvc.getDetalle(a.params.numero).subscribe(function(e){e&&e.exito?(a.articulos=e.detalle,a.inventario=e.inventario):a.snackBar.open("ERROR: ".concat(e.mensaje),"Inventario",{duration:3e3})})):a.snackBar.open("ERROR: El texto sobrepasa la longitud permitida","Inventario",{duration:3e3})},this.actualizar=function(){a.fisicoSrvc.saveDetalle(a.articulos).subscribe(function(e){a.snackBar.open(e.exito?"Datos actualizados exitosamente":"ERROR: ".concat(e.mensaje),"Inventario",{duration:3e3})})},this.confirmar=function(){a.dialog.open(X.a,{maxWidth:"400px",data:new X.b("Confirmar Inventario Fisico","No podr\xe1 modificar los datos ingresados. \xbfDesea continuar?","S\xed","No")}).afterClosed().subscribe(function(e){e&&a.fisicoSrvc.confirmar(a.inventario).subscribe(function(e){e.exito?(a.inventario=e.inventario,a.snackBar.open("Inventario confirmado exitosamente","Inventario",{duration:3e3})):a.snackBar.open("ERROR: ".concat(e.mensaje),"Inventario",{duration:3e3})})})},this.imprimir=function(){a.pdfServicio.imprimirInventarioFisico(a.inventario.inventario_fisico,{existencia_fisica:!0}).subscribe(function(e){var t=new Blob([e],{type:"application/pdf"});Object(vn.saveAs)(t,"".concat(a.titulo,".pdf"))})},this.imprimirXls=function(){a.pdfServicio.imprimirInventarioFisico(a.inventario.inventario_fisico,{existencia_fisica:!0,_excel:!0}).subscribe(function(e){var t=new Blob([e],{type:"application/vnd.ms-excel"});Object(vn.saveAs)(t,"".concat(a.titulo,".xls"))})}}return u(e,[{key:"ngOnInit",value:function(){this.resetDatos()}}]),e}()).\u0275fac=function(e){return new(e||wa)(j.Nb(_.b),j.Nb(kn.a),j.Nb(ra),j.Nb(D.b))},wa.\u0275cmp=j.Hb({type:wa,selectors:[["app-form-inventario-fisico"]],decls:14,vars:4,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],[1,"col"],[1,"col",2,"float","right"],["mat-button","","type","button","color","accent",3,"click"],["class","iconFontSize",4,"ngIf"],[4,"ngIf"],["class","row",4,"ngIf"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],[1,"fullWidth"],["matInput","","type","number","maxlength","17","max","17","placeholder","N\xfamero","name","numero","required","",3,"ngModel","ngModelChange"],["mat-raised-button","","matSuffix","","color","accent","type","submit"],["novalidate","","autocomplete","off",3,"ngSubmit"],["frmConteoFisico","ngForm"],[1,"tbl"],[4,"ngFor","ngForOf"],["align","end"],["mat-button","","color","accent","type","submit",4,"ngIf"],["mat-button","","color","accent","type","button",3,"click"],["mat-button","","color","accent","type","button",3,"click",4,"ngIf"],["colspan","2",1,"brdTSingleBSingle"],["colspan","3",1,"brdTSingleBSingle"],[1,"brdTSingleBSingle"],["matInput","","type","number","step","0.01","placeholder","Existencia Sistema","disabled","",2,"color","black","-webkit-text-fill-color","black",3,"ngModel","ngModelOptions","ngModelChange"],["matInput","","type","number","step","0.01","placeholder","Cantidad","required","",3,"ngModel","ngModelOptions","ngModelChange"],["mat-button","","color","accent","type","submit"]],template:function(e,t){1&e&&(j.Tb(0,"div",0),j.Tb(1,"div",1),j.Tb(2,"mat-card",2),j.Tb(3,"mat-card-title"),j.Tb(4,"div",0),j.Tb(5,"div",3),j.Tb(6,"h4"),j.Fc(7,"Ingreso Inventario F\xedsico"),j.Sb(),j.Sb(),j.Tb(8,"div",4),j.Tb(9,"button",5),j.bc("click",function(){return t.showForm=!t.showForm}),j.Dc(10,Sa,2,0,"mat-icon",6),j.Dc(11,Ca,2,0,"mat-icon",6),j.Sb(),j.Sb(),j.Sb(),j.Sb(),j.Dc(12,_a,7,2,"mat-card-content",7),j.Sb(),j.Sb(),j.Sb(),j.Dc(13,Oa,17,4,"div",8)),2&e&&(j.Cb(10),j.lc("ngIf",t.showForm),j.Cb(1),j.lc("ngIf",!t.showForm),j.Cb(1),j.lc("ngIf",t.showForm),j.Cb(1),j.lc("ngIf",t.articulos.length>0))},directives:[p.a,p.h,T.a,i.m,b.a,p.c,c.r,c.l,c.m,g.b,f.b,c.o,c.c,c.f,c.p,c.k,c.n,g.g,Cn.a,i.l,g.f],styles:[""]}),wa),Ra=["rptInventario"],Ba=["frmInventario"],Ha=((Ea=function(){function e(){s(this,e)}return u(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Ea)},Ea.\u0275cmp=j.Hb({type:Ea,selectors:[["app-fisico"]],viewQuery:function(e,t){var o;1&e&&(j.Kc(Ra,1),j.Kc(Ba,1)),2&e&&(j.sc(o=j.cc())&&(t.rptInventarioComponent=o.first),j.sc(o=j.cc())&&(t.frmInventarioComponent=o.first))},decls:6,vars:0,consts:[[1,"row"],[1,"col","s12","m12"]],template:function(e,t){1&e&&(j.Tb(0,"div",0),j.Tb(1,"div",1),j.Ob(2,"app-reporte"),j.Sb(),j.Sb(),j.Tb(3,"div",0),j.Tb(4,"div",1),j.Ob(5,"app-form-inventario-fisico"),j.Sb(),j.Sb())},directives:[va,Aa],styles:[""]}),Ea),Pa=o("quSY");function ja(e,t){if(1&e&&(j.Tb(0,"mat-option",14),j.Fc(1),j.Sb()),2&e){var o=t.$implicit;j.lc("value",o.categoria_grupo),j.Cb(1),j.Hc(" ",o.descripcion," ")}}function Na(e,t){if(1&e){var o=j.Ub();j.Tb(0,"tr"),j.Tb(1,"td",3),j.Tb(2,"mat-form-field",1),j.Tb(3,"mat-select",8),j.bc("ngModelChange",function(e){return t.$implicit.categoria_grupo=e}),j.Dc(4,ja,2,2,"mat-option",9),j.Sb(),j.Sb(),j.Sb(),j.Tb(5,"td",4),j.Tb(6,"mat-form-field",1),j.Tb(7,"input",10),j.bc("ngModelChange",function(e){return t.$implicit.descripcion=e}),j.Sb(),j.Sb(),j.Sb(),j.Tb(8,"td",5),j.Tb(9,"mat-checkbox",11),j.bc("ngModelChange",function(e){return+(t.$implicit.mostrar_pos=e)}),j.Sb(),j.Sb(),j.Tb(10,"td",12),j.Tb(11,"button",13),j.bc("click",function(){j.xc(o);var e=t.$implicit;return j.fc().updArticulo(e)}),j.Fc(12," Guardar "),j.Sb(),j.Sb(),j.Sb()}if(2&e){var n=t.$implicit,i=j.fc();j.Cb(3),j.lc("ngModel",n.categoria_grupo),j.Cb(1),j.lc("ngForOf",i.categoriasGrupos),j.Cb(3),j.lc("ngModel",n.descripcion),j.Cb(2),j.lc("ngModel",+n.mostrar_pos),j.Cb(2),j.lc("disabled",i.cargando||!n.categoria_grupo||!n.descripcion)}}var Ua,Ga,za,qa=function(){return{standalone:!0}},La=[{path:"ingresos",component:ht,canActivate:[B.a]},{path:"egresos",component:Zo,canActivate:[B.a]},{path:"articulos",component:Ai,canActivate:[B.a]},{path:"transformaciones",component:Hi,canActivate:[B.a]},{path:"rptexistencia",component:qi,canActivate:[B.a]},{path:"rptkardex",component:Ji,canActivate:[B.a]},{path:"produccion",component:Yi,canActivate:[B.a]},{path:"rptvalorizado",component:ca,canActivate:[B.a]},{path:"fisico",component:Ha,canActivate:[B.a]},{path:"replicar_articulos_sedes",component:yn,canActivate:[B.a]},{path:"qeprod",component:(Ua=function(){function e(t,o,n,i){var a=this;s(this,e),this.dialog=t,this.snackBar=o,this.ls=n,this.articuloSrvc=i,this.categorias=[],this.categoriasGrupos=[],this.lstArticulos=[],this.lstArticulosFull=[],this.txtFiltro="",this.cargando=!1,this.endSubs=new Pa.a,this.loadCategorias=function(){return a.endSubs.add(a.articuloSrvc.getCategorias({sede:+a.ls.get(H.a.usrTokenVar).sede||0}).subscribe(function(e){return a.categorias=e}))},this.loadSubCategorias=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={_sede:+a.ls.get(H.a.usrTokenVar).sede||1,categoria:+e};e||delete t.categoria,a.endSubs.add(a.articuloSrvc.getCategoriasGrupos(t).subscribe(function(e){a.categoriasGrupos=a.articuloSrvc.adaptCategoriaGrupoResponse(e),a.categoriasGrupos.map(function(e){var t=a.categorias.find(function(t){return+t.categoria==+e.categoria});return t&&(e.descripcion="".concat(t.descripcion,"-").concat(e.descripcion)),e}),a.categoriasGrupos=Object(H.c)(a.categoriasGrupos,"descripcion")}))},this.loadArticulos=function(){a.endSubs.add(a.articuloSrvc.getArticulo({_sede:1}).subscribe(function(e){e.forEach(function(e){a.lstArticulosFull.push({articulo:e.articulo,categoria:e.categoria_grupo.categoria,categoria_grupo:+e.categoria_grupo.categoria_grupo,descripcion:e.descripcion,mostrar_pos:e.mostrar_pos})}),a.lstArticulos=JSON.parse(JSON.stringify(a.lstArticulosFull))}))},this.updArticulo=function(e){e.mostrar_pos=e.mostrar_pos?1:0;var t=a.dialog.open(X.a,{maxWidth:"400px",data:new X.b("Actualizar art\xedculo","Esto guardar\xe1 las modificaciones realizadas en ".concat(e.descripcion,". \xbfDesea continuar?"),"S\xed","No")});a.endSubs.add(t.afterClosed().subscribe(function(t){t&&(a.cargando=!0,a.endSubs.add(a.articuloSrvc.fastEdit(e).subscribe(function(e){e.exito?a.snackBar.open(e.mensaje,"Art\xedculo",{duration:3e3}):a.snackBar.open("ERROR: ".concat(e.mensaje),"Art\xedculo",{duration:7e3}),a.cargando=!1})))}))}}return u(e,[{key:"ngOnInit",value:function(){this.loadCategorias(),this.loadSubCategorias(),this.loadArticulos()}},{key:"ngOnDestroy",value:function(){this.endSubs.unsubscribe()}},{key:"applyFilter",value:function(){this.lstArticulos=this.txtFiltro.length>0?Object(H.b)(this.lstArticulosFull,this.txtFiltro):JSON.parse(JSON.stringify(this.lstArticulosFull))}}]),e}(),Ua.\u0275fac=function(e){return new(e||Ua)(j.Nb(D.b),j.Nb(_.b),j.Nb(N.a),j.Nb(ee.a))},Ua.\u0275cmp=j.Hb({type:Ua,selectors:[["app-quick-edit-producto"]],decls:17,vars:5,consts:[[3,"itemSize"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[2,"width","36%"],[2,"width","42%"],[2,"width","12%","text-align","center"],[2,"width","10%"],[4,"cdkVirtualFor","cdkVirtualForOf"],["name","categoria_grupo",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"ngModel","ngModelChange"],["name","mostrar_pos",3,"ngModel","ngModelChange"],[2,"width","10%","text-align","center"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[3,"value"]],template:function(e,t){1&e&&(j.Tb(0,"cdk-virtual-scroll-viewport",0),j.Tb(1,"table"),j.Tb(2,"caption"),j.Tb(3,"mat-form-field",1),j.Tb(4,"input",2),j.bc("keyup",function(){return t.applyFilter()})("ngModelChange",function(e){return t.txtFiltro=e}),j.Sb(),j.Sb(),j.Sb(),j.Tb(5,"thead"),j.Tb(6,"tr"),j.Tb(7,"th",3),j.Fc(8,"Subcategor\xeda"),j.Sb(),j.Tb(9,"th",4),j.Fc(10,"Art\xedculo"),j.Sb(),j.Tb(11,"th",5),j.Fc(12,"Mostrar en POS"),j.Sb(),j.Tb(13,"th",6),j.Fc(14,"\xa0"),j.Sb(),j.Sb(),j.Sb(),j.Tb(15,"tbody"),j.Dc(16,Na,13,5,"tr",7),j.Sb(),j.Sb(),j.Sb()),2&e&&(j.lc("itemSize",90),j.Cb(4),j.lc("ngModel",t.txtFiltro)("ngModelOptions",j.nc(4,qa)),j.Cb(12),j.lc("cdkVirtualForOf",t.lstArticulos))},directives:[E.e,E.a,g.b,f.b,c.c,c.k,c.n,E.d,S.a,i.l,c.p,C.a,T.a,$.m],styles:["table[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{height:720px}"]}),Ua),canActivate:[B.a]},{path:"**",redirectTo:"/admin/dashboard",pathMatch:"full"}],$a=((za=function e(){s(this,e)}).\u0275mod=j.Lb({type:za}),za.\u0275inj=j.Kb({factory:function(e){return new(e||za)},imports:[[R.d.forChild(La)],R.d]}),za),Wa=((Ga=function e(){s(this,e)}).\u0275mod=j.Lb({type:Ga}),Ga.\u0275inj=j.Kb({factory:function(e){return new(e||Ga)},providers:[],imports:[[i.c,$a,r.a,l.a,a.c,c.e,A.b,d.d,b.b,g.d,f.c,p.f,m.b,h.c,v.l,S.b,C.b,T.b,_.c,x.b,M.d,y.b,I.b,D.e,F.d,k.c,O.b,w.c,E.g]]}),Ga)}}])}();