!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{JbvS:function(e,n,c){"use strict";c.d(n,"a",function(){return v}),c.d(n,"b",function(){return F}),c.d(n,"c",function(){return _}),c.d(n,"d",function(){return S});var i=c("fXoL"),r=c("bTqV"),o=c("ofXK"),u=c("xgIS"),l=c("cp0P"),s=c("IzEk");function f(t,e){1&t&&i.jc(0,0,["*ngIf","miniFabVisible"])}var d=[[["","mat-mini-fab",""]]],b=["[mat-mini-fab]"],p=[[["eco-fab-speed-dial-trigger"]],[["eco-fab-speed-dial-actions"]]],m=["eco-fab-speed-dial-trigger","eco-fab-speed-dial-actions"],h=[[["","mat-fab",""]]],g=["[mat-fab]"],v=function(){var e=function(){function e(a,n){t(this,e),this.renderer=n,this.miniFabVisible=!1,this._parent=a.get(F)}return a(e,[{key:"ngAfterContentInit",value:function(){var t=this;this._buttons.changes.subscribe(function(){t.initButtonStates(),t._parent.setActionsVisibility()}),this.initButtonStates()}},{key:"initButtonStates",value:function(){var t=this;this._buttons.forEach(function(e,a){t.renderer.addClass(e._getHostElement(),"eco-fab-action-item"),t.changeElementStyle(e._getHostElement(),"z-index",""+(23-a))})}},{key:"show",value:function(){var t=this;this._buttons&&(this.resetAnimationState(),this.miniFabVisible=!0,this.showMiniFabAnimation=setTimeout(function(){t._buttons.forEach(function(e,a){var n,c=0;"scale"===t._parent.animationMode?(c=3+65*a,n="scale(1)"):n=t.getTranslateFunction("0");var i=e._getHostElement();t.changeElementStyle(i,"transition-delay",c+"ms"),t.changeElementStyle(i,"opacity","1"),t.changeElementStyle(i,"transform",n)})},50))}},{key:"resetAnimationState",value:function(){clearTimeout(this.showMiniFabAnimation),this.hideMiniFab&&(this.hideMiniFab.unsubscribe(),this.hideMiniFab=null)}},{key:"hide",value:function(){var t=this;if(this._buttons){this.resetAnimationState();var e=this._buttons.map(function(e,a){var n,c="1",i=0;"scale"===t._parent.animationMode?(i=3-65*a,n="scale(0)",c="0"):n=t.getTranslateFunction(55*(a+1)-5*a+"px");var r=e._getHostElement();return t.changeElementStyle(r,"transition-delay",i+"ms"),t.changeElementStyle(r,"opacity",c),t.changeElementStyle(r,"transform",n),Object(u.a)(r,"transitionend").pipe(Object(s.a)(1))});this.hideMiniFab=Object(l.a)(e).subscribe(function(){return t.miniFabVisible=!1})}}},{key:"getTranslateFunction",value:function(t){var e=this._parent.direction;return("up"===e||"down"===e?"translateY":"translateX")+"("+("down"===e||"right"===e?"-":"")+t+")"}},{key:"changeElementStyle",value:function(t,e,a){this.renderer.setStyle(t,e,a)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Nb(i.t),i.Nb(i.G))},e.\u0275cmp=i.Hb({type:e,selectors:[["eco-fab-speed-dial-actions"]],contentQueries:function(t,e,a){var n;(1&t&&i.Gb(a,r.a,0),2&t)&&(i.sc(n=i.cc())&&(e._buttons=n))},ngContentSelectors:b,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(t,e){1&t&&(i.kc(d),i.Dc(0,f,1,0,"ng-content",0)),2&t&&i.lc("ngIf",e.miniFabVisible)},directives:[o.m],encapsulation:2}),e}(),F=function(){var e=function(){function e(a,n,c){t(this,e),this.elementRef=a,this.renderer=n,this.document=c,this.isInitialized=!1,this._direction="up",this._open=!1,this._animationMode="fling",this._fixed=!1,this._documentClickUnlistener=null,this.openChange=new i.o}return a(e,[{key:"ngAfterContentInit",value:function(){this.isInitialized=!0,this.setActionsVisibility(),this._setElementClass(this.direction,!0),this._setElementClass(this.animationMode,!0)}},{key:"ngOnDestroy",value:function(){this._unsetDocumentClickListener()}},{key:"toggle",value:function(){this.open=!this.open}},{key:"_onClick",value:function(){!this.fixed&&this.open&&(this.open=!1)}},{key:"setActionsVisibility",value:function(){this._childActions&&(this.open?this._childActions.show():this._childActions.hide(),this._processOutsideClickState())}},{key:"_setElementClass",value:function(t,e){var a="eco-".concat(t);e?this.renderer.addClass(this.elementRef.nativeElement,a):this.renderer.removeClass(this.elementRef.nativeElement,a)}},{key:"_processOutsideClickState",value:function(){!this.fixed&&this.open?this._setDocumentClickListener():this._unsetDocumentClickListener()}},{key:"_setDocumentClickListener",value:function(){var t=this;this._documentClickUnlistener||(this._documentClickUnlistener=this.renderer.listen(this.document,"click",function(){t.open=!1}))}},{key:"_unsetDocumentClickListener",value:function(){this._documentClickUnlistener&&(this._documentClickUnlistener(),this._documentClickUnlistener=null)}},{key:"fixed",get:function(){return this._fixed},set:function(t){this._fixed=t,this._processOutsideClickState()}},{key:"open",get:function(){return this._open},set:function(t){var e=this._open;this._open=t,e!==this._open&&(this.openChange.emit(this._open),this.isInitialized&&this.setActionsVisibility())}},{key:"direction",get:function(){return this._direction},set:function(t){var e=this._direction;this._direction=t,e!==this.direction&&(this._setElementClass(e,!1),this._setElementClass(this.direction,!0),this.isInitialized&&this.setActionsVisibility())}},{key:"animationMode",get:function(){return this._animationMode},set:function(t){var e=this,a=this._animationMode;this._animationMode=t,a!==this._animationMode&&(this._setElementClass(a,!1),this._setElementClass(this.animationMode,!0),this.isInitialized&&Promise.resolve(null).then(function(){return e.open=!1}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Nb(i.l),i.Nb(i.G),i.Nb(o.d))},e.\u0275cmp=i.Hb({type:e,selectors:[["eco-fab-speed-dial"]],contentQueries:function(t,e,a){var n;(1&t&&i.Gb(a,v,1),2&t)&&(i.sc(n=i.cc())&&(e._childActions=n.first))},hostVars:2,hostBindings:function(t,e){1&t&&i.bc("click",function(){return e._onClick()}),2&t&&i.Fb("eco-opened",e.open)},inputs:{fixed:"fixed",open:"open",direction:"direction",animationMode:"animationMode"},outputs:{openChange:"openChange"},ngContentSelectors:m,decls:3,vars:0,consts:[[1,"eco-fab-speed-dial-container"]],template:function(t,e){1&t&&(i.kc(p),i.Tb(0,"div",0),i.jc(1),i.jc(2,1),i.Sb())},styles:["eco-fab-speed-dial{display:inline-block}eco-fab-speed-dial.eco-opened .eco-fab-speed-dial-container eco-fab-speed-dial-trigger.eco-spin .spin180{transform:rotate(180deg)}eco-fab-speed-dial.eco-opened .eco-fab-speed-dial-container eco-fab-speed-dial-trigger.eco-spin .spin360{transform:rotate(1turn)}eco-fab-speed-dial .eco-fab-speed-dial-container{align-items:center;display:flex;position:relative;z-index:20}eco-fab-speed-dial .eco-fab-speed-dial-container eco-fab-speed-dial-trigger{pointer-events:auto;z-index:24}eco-fab-speed-dial .eco-fab-speed-dial-container eco-fab-speed-dial-trigger.eco-spin .spin180,eco-fab-speed-dial .eco-fab-speed-dial-container eco-fab-speed-dial-trigger.eco-spin .spin360{transition:all .6s cubic-bezier(.4,0,.2,1)}eco-fab-speed-dial .eco-fab-speed-dial-container eco-fab-speed-dial-actions{display:flex;height:0;position:absolute;width:0}eco-fab-speed-dial.eco-fling .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{display:block;opacity:1;transition:all .3s cubic-bezier(.55,0,.55,.2)}eco-fab-speed-dial.eco-scale .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{transform:scale(0);transition:all .3s cubic-bezier(.55,0,.55,.2);transition-duration:.14286s}eco-fab-speed-dial.eco-down eco-fab-speed-dial-actions{bottom:2px;left:7px}eco-fab-speed-dial.eco-down .eco-fab-speed-dial-container{flex-direction:column}eco-fab-speed-dial.eco-down .eco-fab-speed-dial-container eco-fab-speed-dial-trigger{order:1}eco-fab-speed-dial.eco-down .eco-fab-speed-dial-container eco-fab-speed-dial-actions{flex-direction:column;order:2}eco-fab-speed-dial.eco-down .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{margin-top:10px}eco-fab-speed-dial.eco-up eco-fab-speed-dial-actions{left:7px;top:2px}eco-fab-speed-dial.eco-up .eco-fab-speed-dial-container{flex-direction:column}eco-fab-speed-dial.eco-up .eco-fab-speed-dial-container eco-fab-speed-dial-trigger{order:2}eco-fab-speed-dial.eco-up .eco-fab-speed-dial-container eco-fab-speed-dial-actions{flex-direction:column-reverse;order:1}eco-fab-speed-dial.eco-up .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{margin-bottom:10px}eco-fab-speed-dial.eco-left eco-fab-speed-dial-actions{left:2px;top:7px}eco-fab-speed-dial.eco-left .eco-fab-speed-dial-container{flex-direction:row}eco-fab-speed-dial.eco-left .eco-fab-speed-dial-container eco-fab-speed-dial-trigger{order:2}eco-fab-speed-dial.eco-left .eco-fab-speed-dial-container eco-fab-speed-dial-actions{flex-direction:row-reverse;order:1}eco-fab-speed-dial.eco-left .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{margin-right:10px}eco-fab-speed-dial.eco-right eco-fab-speed-dial-actions{right:2px;top:7px}eco-fab-speed-dial.eco-right .eco-fab-speed-dial-container{flex-direction:row}eco-fab-speed-dial.eco-right .eco-fab-speed-dial-container eco-fab-speed-dial-trigger{order:1}eco-fab-speed-dial.eco-right .eco-fab-speed-dial-container eco-fab-speed-dial-actions{flex-direction:row;order:2}eco-fab-speed-dial.eco-right .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{margin-left:10px}"],encapsulation:2}),e}(),S=function(){var e=function(){function e(a){t(this,e),this.spin=!1,this._parent=a.get(F)}return a(e,[{key:"_onClick",value:function(t){this._parent.fixed||(this._parent.toggle(),t.stopPropagation())}},{key:"sp",get:function(){return this.spin}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Nb(i.t))},e.\u0275cmp=i.Hb({type:e,selectors:[["eco-fab-speed-dial-trigger"]],hostVars:2,hostBindings:function(t,e){1&t&&i.bc("click",function(t){return e._onClick(t)}),2&t&&i.Fb("eco-spin",e.sp)},inputs:{spin:"spin"},ngContentSelectors:g,decls:1,vars:0,template:function(t,e){1&t&&(i.kc(h),i.jc(0))},encapsulation:2}),e}(),_=function(){var e=function e(){t(this,e)};return e.\u0275mod=i.Lb({type:e}),e.\u0275inj=i.Kb({factory:function(t){return new(t||e)},imports:[[o.c]]}),e}()},KFbY:function(e,n,c){"use strict";c.d(n,"a",function(){return d});var i=c("sKxO"),r=c("R5jZ"),o=c("un/a"),u=c("JIr8"),l=c("Qyje"),s=c("fXoL"),f=c("tk/3"),d=function(){var e=function(){function e(a){t(this,e),this.http=a,this.moduleUrl="factura",this.srvcErrHndl=new r.a}return a(e,[{key:"facturar",value:function(t){return this.http.post("".concat(i.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/guardar"),t).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}},{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(i.a.urlFacturacion,"/").concat(this.moduleUrl,"/buscar_factura?").concat(l.stringify(t))).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}},{key:"imprimir",value:function(t){return this.http.get("".concat(i.a.urlFacturacion,"/").concat(this.moduleUrl,"/imprimir/").concat(t)).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(t){return this.http.post("".concat(i.a.urlFacturacion,"/").concat(this.moduleUrl,"/guardar").concat(t.factura?"/"+t.factura:""),t).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}},{key:"refacturar",value:function(t){return this.http.post("".concat(i.a.urlFacturacion,"/").concat(this.moduleUrl,"/refacturar").concat(t.factura?"/"+t.factura:""),t).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}},{key:"firmar",value:function(t){return this.http.post("".concat(i.a.urlFacturacion,"/").concat(this.moduleUrl,"/facturar/").concat(t),{}).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}},{key:"anular",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.http.post("".concat(i.a.urlFacturacion,"/").concat(this.moduleUrl,"/anular/").concat(t),e).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}},{key:"getDetalle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.http.get("".concat(i.a.urlFacturacion,"/").concat(this.moduleUrl,"/buscar_detalle/").concat(t,"?").concat(l.stringify(e))).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}},{key:"saveDetalle",value:function(t){return this.http.post("".concat(i.a.urlFacturacion,"/").concat(this.moduleUrl,"/guardar_detalle/").concat(t.factura).concat(t.detalle_factura?"/"+t.detalle_factura:""),t).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}},{key:"getGrafo",value:function(t){return this.http.get("".concat(i.a.urlFacturacion,"/").concat(this.moduleUrl,"/get_grafo_factura/").concat(t)).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Xb(f.b))},e.\u0275prov=s.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},KZK3:function(e,n,c){"use strict";c.d(n,"a",function(){return d});var i=c("sKxO"),r=c("R5jZ"),o=c("un/a"),u=c("JIr8"),l=c("Qyje"),s=c("fXoL"),f=c("tk/3"),d=function(){var e=function(){function e(a){t(this,e),this.http=a,this.moduleUrl="catalogo",this.manteUrl="fpago",this.srvcErrHndl=new r.a}return a(e,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(i.a.url,"/").concat(this.moduleUrl,"/get_forma_pago?").concat(l.stringify(t))).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}},{key:"buscar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(i.a.urlMantenimientos,"/").concat(this.manteUrl,"/buscar?").concat(l.stringify(t))).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(t){return this.http.post("".concat(i.a.urlMantenimientos,"/").concat(this.manteUrl,"/guardar").concat(t.forma_pago?"/"+t.forma_pago:""),t).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Xb(f.b))},e.\u0275prov=s.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},qodq:function(e,n,c){"use strict";c.r(n),c.d(n,"PosModule",function(){return ie});var i=c("ofXK"),r=c("tk/3"),o=c("3Pt+"),u=c("PCNd"),l=c("jkDv"),s=c("MutI"),f=c("NFeN"),d=c("kmnG"),b=c("qFsG"),p=c("Wp6s"),m=c("f0Cb"),h=c("wZkO"),g=c("+0xr"),v=c("d3UM"),F=c("bSwM"),S=c("bTqV"),_=c("dNgK"),C=c("/t3+"),y=c("STbY"),k=c("zkoq"),T=c("M9IT"),x=c("0IaG"),M=c("XhcP"),D=c("/1cH"),I=c("uM5D"),w=c("JbvS"),O=c("tyNb"),P=c("0T/Q"),E=c("fXoL"),A=c("sKxO"),j=c("KZK3"),z=c("FKr1");function H(t,e){if(1&t){var a=E.Ub();E.Tb(0,"mat-list-item",5),E.bc("click",function(){E.xc(a);var t=e.$implicit;return E.fc().getFormaPago(t)}),E.Tb(1,"mat-icon",6),E.Fc(2,"account_balance_wallet"),E.Sb(),E.Tb(3,"h5",7),E.Fc(4),E.Sb(),E.Sb()}if(2&t){var n=e.$implicit;E.Cb(4),E.Gc(n.descripcion)}}var N,U=function(){return{standalone:!0}},L=((N=function(){function e(a){var n=this;t(this,e),this.formaPagoSrvc=a,this.getFormaPagoEv=new E.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadFormasPago=function(){n.formaPagoSrvc.buscar().subscribe(function(t){t&&t.length>0&&(n.lstFormasPago=t,n.applyFilter())})},this.getFormaPago=function(t){n.getFormaPagoEv.emit(t)},this.pageChange=function(t){n.pageSize=t.pageSize,n.pageIndex=t.pageIndex,n.applyFilter()}}return a(e,[{key:"ngOnInit",value:function(){this.loadFormasPago()}},{key:"applyFilter",value:function(){if(this.txtFiltro.length>0){var t=Object(A.b)(this.lstFormasPago,this.txtFiltro);this.length=t.length,this.lstFormasPagoPaged=Object(A.c)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstFormasPago.length,this.lstFormasPagoPaged=Object(A.c)(this.lstFormasPago,this.pageSize,this.pageIndex+1)}}]),e}()).\u0275fac=function(t){return new(t||N)(E.Nb(j.a))},N.\u0275cmp=E.Hb({type:N,selectors:[["app-lista-forma-pago"]],outputs:{getFormaPagoEv:"getFormaPagoEv"},decls:7,vars:7,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,e){1&t&&(E.Tb(0,"mat-card",0),E.Tb(1,"mat-card-content"),E.Tb(2,"mat-form-field",1),E.Tb(3,"input",2),E.bc("keyup",function(){return e.applyFilter()})("ngModelChange",function(t){return e.txtFiltro=t}),E.Sb(),E.Sb(),E.Tb(4,"mat-nav-list"),E.Dc(5,H,5,1,"mat-list-item",3),E.Sb(),E.Tb(6,"mat-paginator",4),E.bc("page",function(t){return e.pageChange(t)}),E.Sb(),E.Sb(),E.Sb()),2&t&&(E.Cb(3),E.lc("ngModel",e.txtFiltro)("ngModelOptions",E.nc(6,U)),E.Cb(2),E.lc("ngForOf",e.lstFormasPagoPaged),E.Cb(1),E.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[p.a,p.c,d.b,b.b,o.c,o.k,o.n,s.e,i.l,T.a,s.c,f.a,s.b,z.j],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),N),R=c("FY0D");function K(t,e){if(1&t){var a=E.Ub();E.Tb(0,"input",11),E.bc("ngModelChange",function(t){return E.xc(a),E.fc().formaPago.descripcion=t}),E.Sb()}if(2&t){var n=E.fc();E.lc("matKeyboard",n.keyboardLayout)("ngModel",n.formaPago.descripcion)}}function B(t,e){if(1&t){var a=E.Ub();E.Tb(0,"input",12),E.bc("ngModelChange",function(t){return E.xc(a),E.fc().formaPago.descripcion=t}),E.Sb()}if(2&t){var n=E.fc();E.lc("ngModel",n.formaPago.descripcion)}}function W(t,e){if(1&t){var a=E.Ub();E.Tb(0,"button",13),E.bc("click",function(){return E.xc(a),E.fc().resetFormaPago()}),E.Fc(1," Nueva "),E.Sb()}}var V,q,G=((V=function(){function e(a,n,c){var i=this;t(this,e),this.snackBar=a,this.formaPagoSrvc=n,this.ls=c,this.formaPagoSavedEv=new E.o,this.keyboardLayout=A.a.IDIOMA_TECLADO,this.esMovil=!1,this.resetFormaPago=function(){return i.formaPago={forma_pago:null,descripcion:null,activo:1}},this.onSubmit=function(){i.formaPagoSrvc.save(i.formaPago).subscribe(function(t){t.exito&&(i.formaPagoSavedEv.emit(),i.resetFormaPago(),i.snackBar.open("Forma de pago agregada...","Forma de pago",{duration:3e3}))})}}return a(e,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(A.a.usrTokenVar).enmovil||!1}}]),e}()).\u0275fac=function(t){return new(t||V)(E.Nb(_.b),E.Nb(j.a),E.Nb(R.a))},V.\u0275cmp=E.Hb({type:V,selectors:[["app-form-forma-pago"]],inputs:{formaPago:"formaPago"},outputs:{formaPagoSavedEv:"formaPagoSavedEv"},decls:18,vars:6,consts:[[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmFormaPago","ngForm"],[1,"form-group"],[1,"fullWidth"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"ngModel","ngModelChange",4,"ngIf"],["name","activo",1,"fullWidth",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"matKeyboard","ngModel","ngModelChange"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"ngModel","ngModelChange"],["mat-raised-button","","type","button","color","accent",3,"click"]],template:function(t,e){if(1&t){var a=E.Ub();E.Tb(0,"mat-card",0),E.Tb(1,"mat-card-title"),E.Tb(2,"h4"),E.Fc(3),E.Sb(),E.Sb(),E.Tb(4,"mat-card-content"),E.Tb(5,"form",1,2),E.bc("ngSubmit",function(){return E.xc(a),E.tc(6).form.valid&&e.onSubmit()}),E.Tb(7,"div",3),E.Tb(8,"mat-form-field",4),E.Dc(9,K,1,2,"input",5),E.Dc(10,B,1,1,"input",6),E.Sb(),E.Sb(),E.Tb(11,"div",3),E.Tb(12,"mat-checkbox",7),E.bc("ngModelChange",function(t){return+(e.formaPago.activo=t)}),E.Fc(13,"Activo"),E.Sb(),E.Sb(),E.Tb(14,"div",8),E.Tb(15,"button",9),E.Fc(16," Guardar "),E.Sb(),E.Dc(17,W,2,0,"button",10),E.Sb(),E.Sb(),E.Sb(),E.Sb()}if(2&t){var n=E.tc(6);E.Cb(3),E.Hc(" Forma de pago ",e.formaPago.forma_pago?e.formaPago.descripcion:""," "),E.Cb(6),E.lc("ngIf",!e.esMovil),E.Cb(1),E.lc("ngIf",e.esMovil),E.Cb(2),E.lc("ngModel",+e.formaPago.activo),E.Cb(3),E.lc("disabled",!n.form.valid),E.Cb(2),E.lc("ngIf",e.formaPago.forma_pago)}},directives:[p.a,p.h,p.c,o.r,o.l,o.m,d.b,i.m,F.a,o.k,o.n,S.a,b.b,I.a,o.c,o.p],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}"]}),V),J=["lstFormaPago"],Q=((q=function(){function e(){var a=this;t(this,e),this.setFormaPago=function(t){return a.formaPago=t},this.refreshFormaPagoList=function(){return a.lstFormaPagoComponent.loadFormasPago()},this.formaPago={forma_pago:null,descripcion:null,activo:1}}return a(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(t){return new(t||q)},q.\u0275cmp=E.Hb({type:q,selectors:[["app-forma-pago"]],viewQuery:function(t,e){var a;1&t&&E.Kc(J,1),2&t&&E.sc(a=E.cc())&&(e.lstFormaPagoComponent=a.first)},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getFormaPagoEv"],["lstFormaPago",""],[1,"col","m7","s12"],[3,"formaPago","formaPagoSavedEv"],["frmIngreso",""]],template:function(t,e){1&t&&(E.Tb(0,"div",0),E.Tb(1,"div",1),E.Tb(2,"app-lista-forma-pago",2,3),E.bc("getFormaPagoEv",function(t){return e.setFormaPago(t)}),E.Sb(),E.Sb(),E.Tb(4,"div",4),E.Tb(5,"app-form-forma-pago",5,6),E.bc("formaPagoSavedEv",function(){return e.refreshFormaPagoList()}),E.Sb(),E.Sb(),E.Sb()),2&t&&(E.Cb(5),E.lc("formaPago",e.formaPago))},directives:[L,G],styles:[""]}),q),X=c("wd/R"),$=c("KFbY"),Y=function(){return{standalone:!0}};function Z(t,e){if(1&t){var a=E.Ub();E.Tb(0,"input",7),E.bc("input",function(){return E.xc(a),E.fc().applyFilter()})("ngModelChange",function(t){return E.xc(a),E.fc().txtFiltro=t}),E.Sb()}if(2&t){var n=E.fc();E.lc("matKeyboard",n.keyboardLayout)("ngModel",n.txtFiltro)("ngModelOptions",E.nc(3,Y))}}function tt(t,e){if(1&t){var a=E.Ub();E.Tb(0,"input",8),E.bc("keyup",function(){return E.xc(a),E.fc().applyFilter()})("ngModelChange",function(t){return E.xc(a),E.fc().txtFiltro=t}),E.Sb()}if(2&t){var n=E.fc();E.lc("ngModel",n.txtFiltro)("ngModelOptions",E.nc(2,Y))}}function et(t,e){if(1&t){var a=E.Ub();E.Tb(0,"mat-list-item",9),E.bc("click",function(){E.xc(a);var t=e.$implicit;return E.fc().getFactura(t)}),E.Tb(1,"mat-icon",10),E.Fc(2,"receipt"),E.Sb(),E.Tb(3,"h5",11),E.Fc(4),E.Sb(),E.Tb(5,"span",11),E.Fc(6),E.gc(7,"date"),E.Sb(),E.Tb(8,"span",11),E.Fc(9),E.Sb(),E.Tb(10,"span",11),E.Fc(11),E.Sb(),E.Sb()}if(2&t){var n=e.$implicit;E.Cb(4),E.Ic("",n.serie_factura,"\xa0",n.numero_factura,""),E.Cb(2),E.Hc("Fecha: ",E.ic(7,5,n.fecha_factura,"dd/MM/yyyy"),""),E.Cb(3),E.Hc("Cliente: ",n.cliente.nombre,""),E.Cb(2),E.Hc("NIT: ",n.cliente.nit,"")}}var at,nt,ct,it=((at=function(){function e(a,n){var c=this;t(this,e),this.facturaSrvc=a,this.ls=n,this.esMovil=!1,this.keyboardLayout=A.a.IDIOMA_TECLADO,this.getFacturaEv=new E.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.verTodas=!1,this.loadFacturas=function(){var t={};c.verTodas&&(t._todas=!0),c.facturaSrvc.get(t).subscribe(function(t){t&&(c.lstFacturas=t.length>0?t:[],c.applyFilter())})},this.cargarFacturas=function(t){return c.loadFacturas()},this.getFactura=function(t){c.getFacturaEv.emit(t)},this.pageChange=function(t){c.pageSize=t.pageSize,c.pageIndex=t.pageIndex,c.applyFilter()}}return a(e,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(A.a.usrTokenVar).enmovil||!1,this.loadFacturas()}},{key:"applyFilter",value:function(){if(this.txtFiltro.length>0){var t=Object(A.b)(this.lstFacturas,this.txtFiltro);this.length=t.length,this.lstFacturasPaged=Object(A.c)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstFacturas.length,this.lstFacturasPaged=Object(A.c)(this.lstFacturas,this.pageSize,this.pageIndex+1)}}]),e}()).\u0275fac=function(t){return new(t||at)(E.Nb($.a),E.Nb(R.a))},at.\u0275cmp=E.Hb({type:at,selectors:[["app-lista-factura-manual"]],outputs:{getFacturaEv:"getFacturaEv"},decls:10,vars:9,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"matKeyboard","ngModel","ngModelOptions","input","ngModelChange",4,"ngIf"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange",4,"ngIf"],["name","pedirdocumento",1,"btnAccion",3,"ngModel","ngModelOptions","ngModelChange","change"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["matInput","","placeholder","Buscar...",3,"matKeyboard","ngModel","ngModelOptions","input","ngModelChange"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,e){1&t&&(E.Tb(0,"mat-card",0),E.Tb(1,"mat-card-content"),E.Tb(2,"mat-form-field",1),E.Dc(3,Z,1,4,"input",2),E.Dc(4,tt,1,3,"input",3),E.Sb(),E.Tb(5,"mat-checkbox",4),E.bc("ngModelChange",function(t){return e.verTodas=t})("change",function(t){return e.cargarFacturas(t)}),E.Fc(6,"Todas"),E.Sb(),E.Tb(7,"mat-nav-list"),E.Dc(8,et,12,8,"mat-list-item",5),E.Sb(),E.Tb(9,"mat-paginator",6),E.bc("page",function(t){return e.pageChange(t)}),E.Sb(),E.Sb(),E.Sb()),2&t&&(E.Cb(3),E.lc("ngIf",!e.esMovil),E.Cb(1),E.lc("ngIf",e.esMovil),E.Cb(1),E.lc("ngModel",e.verTodas)("ngModelOptions",E.nc(8,Y)),E.Cb(3),E.lc("ngForOf",e.lstFacturasPaged),E.Cb(1),E.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[p.a,p.c,d.b,i.m,F.a,o.k,o.n,s.e,i.l,T.a,b.b,I.a,o.c,s.c,f.a,s.b,z.j],pipes:[i.e],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),at),rt=c("IJgu"),ot=c("R5jZ"),ut=c("un/a"),lt=c("JIr8"),st=c("Qyje"),ft=((nt=function(){function e(a){t(this,e),this.http=a,this.srvcErrHndl=new ot.a}return a(e,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(A.a.urlCatalogos,"/get_factura_serie?").concat(st.stringify(t))).pipe(Object(ut.a)(A.a.reintentos),Object(lt.a)(this.srvcErrHndl.errorHandler))}}]),e}()).\u0275fac=function(t){return new(t||nt)(E.Xb(r.b))},nt.\u0275prov=E.Jb({token:nt,factory:nt.\u0275fac,providedIn:"root"}),nt),dt=c("M8s9"),bt=((ct=function(){function e(a){t(this,e),this.http=a,this.srvcErrHndl=new ot.a}return a(e,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(A.a.urlCatalogos,"/get_moneda?").concat(st.stringify(t))).pipe(Object(ut.a)(A.a.reintentos),Object(lt.a)(this.srvcErrHndl.errorHandler))}}]),e}()).\u0275fac=function(t){return new(t||ct)(E.Xb(r.b))},ct.\u0275prov=E.Jb({token:ct,factory:ct.\u0275fac,providedIn:"root"}),ct),pt=c("NGYs"),mt=c("X/K6"),ht=c("7JkF");function gt(t,e){1&t&&(E.Tb(0,"h4",6),E.Fc(1,"*** ANULADA ***"),E.Sb())}function vt(t,e){if(1&t){var a=E.Ub();E.Tb(0,"button",7),E.bc("click",function(){return E.xc(a),E.fc().showForm=!0}),E.Tb(1,"mat-icon",8),E.Fc(2,"expand_more"),E.Sb(),E.Sb()}}function Ft(t,e){if(1&t){var a=E.Ub();E.Tb(0,"button",7),E.bc("click",function(){return E.xc(a),E.fc().showForm=!1}),E.Tb(1,"mat-icon",8),E.Fc(2,"expand_less"),E.Sb(),E.Sb()}}function St(t,e){if(1&t&&(E.Tb(0,"mat-option",28),E.Fc(1),E.Sb()),2&t){var a=e.$implicit;E.lc("value",a.factura_serie),E.Cb(1),E.Ic(" ",a.serie," (",a.tipo,") ")}}function _t(t,e){if(1&t&&(E.Tb(0,"mat-option",28),E.Fc(1),E.Sb()),2&t){var a=e.$implicit;E.lc("value",a),E.Cb(1),E.Ic(" ",a.nombre," (",a.nit,") ")}}function Ct(t,e){if(1&t&&(E.Tb(0,"mat-option",28),E.Fc(1),E.Sb()),2&t){var a=e.$implicit;E.lc("value",a.moneda),E.Cb(1),E.Ic(" ",a.nombre," (",a.simbolo,") ")}}function yt(t,e){if(1&t){var a=E.Ub();E.Tb(0,"input",29),E.bc("ngModelChange",function(t){return E.xc(a),E.fc(2).factura.notas=t}),E.Sb()}if(2&t){var n=E.fc(2);E.lc("matKeyboard",n.keyboardLayout)("ngModel",n.factura.notas)}}function kt(t,e){if(1&t){var a=E.Ub();E.Tb(0,"input",30),E.bc("ngModelChange",function(t){return E.xc(a),E.fc(2).factura.notas=t}),E.Sb()}if(2&t){var n=E.fc(2);E.lc("ngModel",n.factura.notas)}}function Tt(t,e){if(1&t){var a=E.Ub();E.Tb(0,"button",31),E.bc("click",function(){return E.xc(a),E.fc(2).refacturar()}),E.Fc(1," Refacturar "),E.Sb()}}function xt(t,e){if(1&t){var a=E.Ub();E.Tb(0,"button",32),E.bc("click",function(){return E.xc(a),E.fc(2).resetFactura()}),E.Fc(1," Nueva "),E.Sb()}}var Mt=function(){return{standalone:!0}};function Dt(t,e){if(1&t){var a=E.Ub();E.Tb(0,"form",9,10),E.bc("ngSubmit",function(){E.xc(a);var t=E.tc(1),e=E.fc();return t.form.valid&&e.onSubmit()}),E.Tb(2,"div",11),E.Tb(3,"mat-form-field",12),E.Tb(4,"mat-label"),E.Fc(5,"Serie"),E.Sb(),E.Tb(6,"mat-select",13),E.bc("ngModelChange",function(t){return E.xc(a),E.fc().factura.factura_serie=t}),E.Dc(7,St,2,3,"mat-option",14),E.Sb(),E.Sb(),E.Sb(),E.Tb(8,"div",11),E.Tb(9,"mat-form-field",12),E.Tb(10,"mat-label"),E.Fc(11,"Cliente"),E.Sb(),E.Tb(12,"input",15),E.bc("ngModelChange",function(t){return E.xc(a),E.fc().clienteSelected=t})("keyup",function(){E.xc(a);var t=E.fc();return t.filtrar(t.clienteSelected)}),E.Sb(),E.Tb(13,"mat-autocomplete",16,17),E.Dc(15,_t,2,3,"mat-option",14),E.Sb(),E.Sb(),E.Sb(),E.Tb(16,"div",11),E.Tb(17,"mat-form-field",12),E.Tb(18,"input",18),E.bc("ngModelChange",function(t){return E.xc(a),E.fc().factura.fecha_factura=t}),E.Sb(),E.Sb(),E.Sb(),E.Tb(19,"div",11),E.Tb(20,"mat-form-field",12),E.Tb(21,"mat-label"),E.Fc(22,"Moneda"),E.Sb(),E.Tb(23,"mat-select",19),E.bc("ngModelChange",function(t){return E.xc(a),E.fc().factura.moneda=t}),E.Dc(24,Ct,2,3,"mat-option",14),E.Sb(),E.Sb(),E.Sb(),E.Tb(25,"div",11),E.Tb(26,"mat-checkbox",20),E.bc("ngModelChange",function(t){return E.xc(a),+(E.fc().factura.exenta=t)}),E.Fc(27,"Exenta"),E.Sb(),E.Sb(),E.Tb(28,"div",11),E.Tb(29,"mat-form-field",12),E.Dc(30,yt,1,2,"input",21),E.Dc(31,kt,1,1,"input",22),E.Sb(),E.Sb(),E.Tb(32,"div",23),E.Tb(33,"button",24),E.Fc(34," Guardar "),E.Sb(),E.Tb(35,"button",25),E.bc("click",function(){return E.xc(a),E.fc().firmarFactura()}),E.Fc(36," Firmar "),E.Sb(),E.Tb(37,"button",25),E.bc("click",function(){return E.xc(a),E.fc().imprimirFactura()}),E.Fc(38," Imprimir "),E.Sb(),E.Tb(39,"button",25),E.bc("click",function(){return E.xc(a),E.fc().representacionGrafica()}),E.Fc(40," PDF "),E.Sb(),E.Tb(41,"button",25),E.bc("click",function(){return E.xc(a),E.fc().anularFactura()}),E.Fc(42," Anular "),E.Sb(),E.Dc(43,Tt,2,0,"button",26),E.Dc(44,xt,2,0,"button",27),E.Sb(),E.Sb()}if(2&t){var n=E.tc(1),c=E.tc(14),i=E.fc();E.Cb(6),E.lc("ngModel",i.factura.factura_serie),E.Cb(1),E.lc("ngForOf",i.facturaSeries),E.Cb(5),E.lc("ngModel",i.clienteSelected)("ngModelOptions",E.nc(20,Mt))("matAutocomplete",c),E.Cb(1),E.lc("displayWith",i.displayCliente),E.Cb(2),E.lc("ngForOf",i.filteredClientes),E.Cb(3),E.lc("ngModel",i.factura.fecha_factura),E.Cb(5),E.lc("ngModel",i.factura.moneda),E.Cb(1),E.lc("ngForOf",i.monedas),E.Cb(2),E.lc("ngModel",+i.factura.exenta),E.Cb(4),E.lc("ngIf",!i.esMovil),E.Cb(1),E.lc("ngIf",i.esMovil),E.Cb(2),E.lc("disabled",!(n.form.valid&&!i.factura.fel_uuid&&!i.factura.fel_uuid_anulacion&&i.factura.cliente)),E.Cb(2),E.lc("disabled",!n.form.valid||!!i.factura.fel_uuid||!!i.factura.fel_uuid_anulacion||0===i.detallesFactura.length||i.refacturacion),E.Cb(2),E.lc("disabled",!n.form.valid||null==i.factura.fel_uuid||null==i.factura.fel_uuid||!!i.factura.fel_uuid_anulacion||0===i.detallesFactura.length||i.refacturacion),E.Cb(2),E.lc("disabled",!n.form.valid||null==i.factura.fel_uuid||null==i.factura.fel_uuid||0===i.detallesFactura.length||i.refacturacion),E.Cb(2),E.lc("disabled",!n.form.valid||null==i.factura.fel_uuid||null==i.factura.fel_uuid||!!i.factura.fel_uuid_anulacion||0===i.detallesFactura.length),E.Cb(2),E.lc("ngIf",!!i.factura.fel_uuid_anulacion),E.Cb(1),E.lc("ngIf",i.factura.factura)}}function It(t,e){1&t&&E.Ob(0,"hr")}function wt(t,e){if(1&t){var a=E.Ub();E.Tb(0,"button",7),E.bc("click",function(){return E.xc(a),E.fc(2).showFormDetalle=!0}),E.Tb(1,"mat-icon",8),E.Fc(2,"expand_more"),E.Sb(),E.Sb()}}function Ot(t,e){if(1&t){var a=E.Ub();E.Tb(0,"button",7),E.bc("click",function(){return E.xc(a),E.fc(2).showFormDetalle=!1}),E.Tb(1,"mat-icon",8),E.Fc(2,"expand_less"),E.Sb(),E.Sb()}}function Pt(t,e){if(1&t&&(E.Tb(0,"mat-option",28),E.Fc(1),E.Sb()),2&t){var a=e.$implicit;E.lc("value",a),E.Cb(1),E.Hc(" ",a.descripcion," ")}}function Et(t,e){if(1&t){var a=E.Ub();E.Tb(0,"button",32),E.bc("click",function(){return E.xc(a),E.fc(3).resetDetalleFactura()}),E.Fc(1," Nuevo "),E.Sb()}}function At(t,e){if(1&t){var a=E.Ub();E.Tb(0,"form",9,34),E.bc("ngSubmit",function(){E.xc(a);var t=E.tc(1),e=E.fc(2);return t.form.valid&&e.onSubmitDetail()}),E.Tb(2,"div",11),E.Tb(3,"mat-form-field",12),E.Tb(4,"mat-label"),E.Fc(5,"Art\xedculo"),E.Sb(),E.Tb(6,"input",35),E.bc("ngModelChange",function(t){return E.xc(a),E.fc(2).txtArticuloSelected=t})("keyup",function(){E.xc(a);var t=E.fc(2);return t.filtrarArticulos(t.txtArticuloSelected)}),E.Sb(),E.Tb(7,"mat-autocomplete",36,37),E.bc("optionSelected",function(t){return E.xc(a),E.fc(2).setPrecioUnitario(t)}),E.Dc(9,Pt,2,2,"mat-option",14),E.Sb(),E.Sb(),E.Sb(),E.Tb(10,"div",11),E.Tb(11,"mat-form-field",12),E.Tb(12,"input",38),E.bc("ngModelChange",function(t){return E.xc(a),E.fc(2).detalleFactura.cantidad=t})("change",function(){E.xc(a);var t=E.fc(2);return t.detalleFactura.total=+t.detalleFactura.precio_unitario*+t.detalleFactura.cantidad}),E.Sb(),E.Sb(),E.Sb(),E.Tb(13,"div",11),E.Tb(14,"mat-form-field",12),E.Tb(15,"input",39),E.bc("ngModelChange",function(t){return E.xc(a),E.fc(2).detalleFactura.precio_unitario=t})("change",function(){E.xc(a);var t=E.fc(2);return t.detalleFactura.total=+t.detalleFactura.precio_unitario*+t.detalleFactura.cantidad}),E.Sb(),E.Sb(),E.Sb(),E.Tb(16,"div",23),E.Tb(17,"button",24),E.Fc(18," Guardar "),E.Sb(),E.Dc(19,Et,2,0,"button",27),E.Sb(),E.Sb()}if(2&t){var n=E.tc(1),c=E.tc(8),i=E.fc(2);E.Cb(6),E.lc("ngModel",i.txtArticuloSelected)("ngModelOptions",E.nc(9,Mt))("matAutocomplete",c),E.Cb(1),E.lc("displayWith",i.displayArticulo),E.Cb(2),E.lc("ngForOf",i.filteredArticulos),E.Cb(3),E.lc("ngModel",i.detalleFactura.cantidad),E.Cb(3),E.lc("ngModel",i.detalleFactura.precio_unitario),E.Cb(2),E.lc("disabled",!n.form.valid||!!i.factura.fel_uuid||!!i.factura.fel_uuid_anulacion),E.Cb(2),E.lc("ngIf",i.detalleFactura.detalle_factura)}}function jt(t,e){1&t&&E.Ob(0,"hr")}function zt(t,e){1&t&&(E.Tb(0,"th",52),E.Fc(1,"Art\xedculo"),E.Sb())}function Ht(t,e){if(1&t&&(E.Tb(0,"td",53),E.Fc(1),E.Sb()),2&t){var a=e.$implicit;E.Cb(1),E.Gc(a.articulo.descripcion)}}function Nt(t,e){1&t&&(E.Tb(0,"th",54),E.Fc(1,"Cantidad"),E.Sb())}function Ut(t,e){if(1&t&&(E.Tb(0,"td",55),E.Fc(1),E.gc(2,"number"),E.Sb()),2&t){var a=e.$implicit;E.Cb(1),E.Gc(E.ic(2,1,a.cantidad,"1.2-2"))}}function Lt(t,e){1&t&&(E.Tb(0,"th",54),E.Fc(1,"Precio Unitario"),E.Sb())}function Rt(t,e){if(1&t&&(E.Tb(0,"td",55),E.Fc(1),E.gc(2,"number"),E.Sb()),2&t){var a=e.$implicit;E.Cb(1),E.Hc("",E.ic(2,1,a.precio_unitario,"1.2-2")," ")}}function Kt(t,e){1&t&&(E.Tb(0,"th",54),E.Fc(1,"Total"),E.Sb())}function Bt(t,e){if(1&t&&(E.Tb(0,"td",55),E.Fc(1),E.gc(2,"number"),E.Sb()),2&t){var a=e.$implicit;E.Cb(1),E.Gc(E.ic(2,1,a.total,"1.2-2"))}}function Wt(t,e){1&t&&(E.Tb(0,"th",52),E.Fc(1,"\xa0"),E.Sb())}function Vt(t,e){if(1&t){var a=E.Ub();E.Tb(0,"td",53),E.Tb(1,"button",56),E.bc("click",function(){E.xc(a);var t=e.$implicit;return E.fc(3).getDetalleFactura(t.factura,t.detalle_factura)}),E.Fc(2," Editar "),E.Sb(),E.Sb()}if(2&t){var n=E.fc(3);E.Cb(1),E.lc("disabled",!!n.factura.fel_uuid||!!n.factura.fel_uuid_anulacion||n.refacturacion)}}function qt(t,e){1&t&&E.Ob(0,"tr",57)}function Gt(t,e){1&t&&E.Ob(0,"tr",58)}function Jt(t,e){if(1&t&&(E.Tb(0,"table",40),E.Rb(1,41),E.Dc(2,zt,2,0,"th",42),E.Dc(3,Ht,2,1,"td",43),E.Qb(),E.Rb(4,44),E.Dc(5,Nt,2,0,"th",45),E.Dc(6,Ut,3,4,"td",46),E.Qb(),E.Rb(7,47),E.Dc(8,Lt,2,0,"th",45),E.Dc(9,Rt,3,4,"td",46),E.Qb(),E.Rb(10,48),E.Dc(11,Kt,2,0,"th",45),E.Dc(12,Bt,3,4,"td",46),E.Qb(),E.Rb(13,49),E.Dc(14,Wt,2,0,"th",42),E.Dc(15,Vt,3,1,"td",43),E.Qb(),E.Dc(16,qt,1,0,"tr",50),E.Dc(17,Gt,1,0,"tr",51),E.Sb()),2&t){var a=E.fc(2);E.lc("dataSource",a.dataSource),E.Cb(16),E.lc("matHeaderRowDef",a.displayedColumns),E.Cb(1),E.lc("matRowDefColumns",a.displayedColumns)}}function Qt(t,e){if(1&t&&(E.Tb(0,"mat-card",0),E.Tb(1,"mat-card-title"),E.Tb(2,"h4"),E.Fc(3),E.Dc(4,wt,3,0,"button",2),E.Dc(5,Ot,3,0,"button",2),E.Sb(),E.Sb(),E.Tb(6,"mat-card-content"),E.Dc(7,At,20,10,"form",3),E.Dc(8,jt,1,0,"hr",4),E.Dc(9,Jt,18,3,"table",33),E.Sb(),E.Sb()),2&t){var a=E.fc();E.Cb(3),E.Hc(" Detalle de factura No. ",a.factura.serie_factura?a.factura.serie_factura+" "+a.factura.numero_factura:"Pendiente de firmar."," "),E.Cb(1),E.lc("ngIf",!a.showFormDetalle),E.Cb(1),E.lc("ngIf",a.showFormDetalle),E.Cb(2),E.lc("ngIf",a.showFormDetalle),E.Cb(1),E.lc("ngIf",a.detallesFactura.length>0),E.Cb(1),E.lc("ngIf",a.detallesFactura.length>0)}}var Xt,$t,Yt,Zt,te=((Xt=function(){function e(a,n,c,i,r,o,u,l,s,f){var d=this;t(this,e),this.snackBar=a,this.dialog=n,this.facturaSrvc=c,this.facturaSerieSrvc=i,this.clienteSrvc=r,this.monedaSrvc=o,this.articuloSrvc=u,this.anulacionSrvc=l,this.socket=s,this.ls=f,this.facturaSavedEv=new E.o,this.showForm=!0,this.showFormDetalle=!0,this.facturaSeries=[],this.clientes=[],this.filteredClientes=[],this.monedas=[],this.detallesFactura=[],this.articulos=[],this.filteredArticulos=[],this.displayedColumns=["articulo","cantidad","precio_unitario","total","editItem"],this.keyboardLayout=A.a.IDIOMA_TECLADO,this.esMovil=!1,this.refacturacion=!1,this.txtArticuloSelected=void 0,this.clienteSelected=void 0,this.razonAnulacion=[],this.getRazonAnulacion=function(){d.anulacionSrvc.get().subscribe(function(t){d.razonAnulacion=t})},this.filtrar=function(t){if(t&&"string"==typeof t){var e=t.toLowerCase();d.filteredClientes=d.clientes.filter(function(t){return t.nombre.toLowerCase().includes(e)||t.nit.toLowerCase().includes(e)})}else d.filteredClientes=d.clientes},this.loadFacturaSeries=function(){d.facturaSerieSrvc.get().subscribe(function(t){t&&(d.facturaSeries=t)})},this.loadClientes=function(){d.clienteSrvc.get().subscribe(function(t){t&&(d.clientes=t,d.filteredClientes=d.clientes)})},this.loadMonedas=function(){d.monedaSrvc.get().subscribe(function(t){t&&(d.monedas=t)})},this.refacturar=function(){d.factura={factura:d.factura.factura,factura_serie:null,cliente:null,fecha_factura:X().format(A.a.dbDateFormat),moneda:null,exenta:0,notas:null,fel_uuid:null,fel_uuid_anulacion:null},d.refacturacion=!0},this.resetFactura=function(){d.factura={factura:null,factura_serie:null,cliente:null,fecha_factura:X().format(A.a.dbDateFormat),moneda:null,exenta:0,notas:null,fel_uuid:null,fel_uuid_anulacion:null},d.clienteSelected=void 0,d.resetDetalleFactura(),d.detallesFactura=[]},this.displayCliente=function(t){if(t)return d.factura.cliente=t.cliente,t.nombre},this.onSubmit=function(){d.refacturacion?d.facturaSrvc.refacturar(d.factura).subscribe(function(t){t.exito&&(d.facturaSavedEv.emit(),d.resetFactura(),d.refacturacion=!1,d.factura={factura:t.factura.factura,factura_serie:t.factura.factura_serie,cliente:t.factura.cliente,fecha_factura:t.factura.fecha_factura,moneda:t.factura.moneda,exenta:+t.factura.exenta,notas:t.factura.notas,fel_uuid:t.factura.fel_uuid},d.snackBar.open("Factura manual agregada...","Factura",{duration:3e3}))}):d.facturaSrvc.save(d.factura).subscribe(function(t){t.exito&&(d.facturaSavedEv.emit(),d.resetFactura(),d.factura={factura:t.factura.factura,factura_serie:t.factura.factura_serie,cliente:t.factura.cliente,fecha_factura:t.factura.fecha_factura,moneda:t.factura.moneda,exenta:+t.factura.exenta,notas:t.factura.notas,fel_uuid:t.factura.fel_uuid},d.snackBar.open("Factura manual agregada...","Factura",{duration:3e3}))})},this.firmarFactura=function(){d.dialog.open(rt.a,{maxWidth:"400px",data:new rt.b("Firmar factura","Luego de firmar la factura no podr\xe1 hacer ninguna modificaci\xf3n. \xbfDesea continuar?","S\xed","No")}).afterClosed().subscribe(function(t){t&&d.facturaSrvc.firmar(+d.factura.factura).subscribe(function(t){t.exito?(d.factura.numero_factura=t.factura.numero_factura,d.factura.serie_factura=t.factura.serie_factura,d.factura.certificador_fel=t.factura.certificador_fel,d.factura.fel_uuid=t.factura.fel_uuid,d.facturaSavedEv.emit(),d.snackBar.open("Factura firmada con \xe9xito...","Firmar",{duration:3e3})):d.snackBar.open("ERROR: ".concat(t.mensaje),"Firmar",{duration:3e3})})})},this.procesaDetalleFactura=function(t){var e=[];return t.forEach(function(t){return e.push({Cantidad:+t.cantidad,Descripcion:t.articulo.descripcion,Total:+t.total})}),e},this.getTotalDetalle=function(t){var e=0;return t.forEach(function(t){return e+=+t.total}),e},this.getTotalImpuestosAdicionales=function(t){var e=0;return t.forEach(function(t){return e+=+t.total}),e},this.imprimirFactura=function(){d.facturaSrvc.imprimir(+d.factura.factura).subscribe(function(t){t.factura?(console.log(t.factura),d.socket.emit("print:factura","".concat(JSON.stringify({NombreEmpresa:t.factura.empresa.nombre,NitEmpresa:t.factura.empresa.nit,SedeEmpresa:t.factura.sedeFactura.nombre,DireccionEmpresa:t.factura.empresa.direccion,Fecha:X(t.factura.fecha_factura).format(A.a.dateFormat),Nit:t.factura.receptor.nit,Nombre:t.factura.receptor.nombre,Direccion:t.factura.receptor.direccion,Serie:t.factura.serie_factura,Numero:t.factura.numero_factura,Total:d.getTotalDetalle(t.factura.detalle)+d.getTotalImpuestosAdicionales(t.factura.impuestos_adicionales||[]),NoAutorizacion:t.factura.fel_uuid,NombreCertificador:t.factura.certificador_fel.nombre,NitCertificador:t.factura.certificador_fel.nit,FechaDeAutorizacion:t.factura.fecha_autorizacion,NoOrdenEnLinea:"",FormaDePago:"",DetalleFactura:d.procesaDetalleFactura(t.factura.detalle),ImpuestosAdicionales:t.factura.impuestos_adicionales||[]}))),d.snackBar.open("Imprimiendo factura ".concat(d.factura.serie_factura,"-").concat(d.factura.numero_factura),"Impresi\xf3n",{duration:3e3})):d.snackBar.open("ERROR: ".concat(t.mensaje),"Impresi\xf3n",{duration:3e3})})},this.anularFactura=function(){d.dialog.open(rt.a,{maxWidth:"400px",data:new rt.b("Anular factura","Luego de anular la factura no podr\xe1 hacer ninguna modificaci\xf3n. \xbfDesea continuar?","S\xed","No",{input:[{select:!0,label:"Motivo",datos:d.razonAnulacion,valor:null,id:"razon_anulacion",descripcion:"descripcion",requerido:!0},{select:!1,label:"Comentario",valor:null,id:"comentario_anulacion",requerido:!1}]})}).afterClosed().subscribe(function(t){if(t.resultado){for(var e={},a=0;a<t.config.input.length;a++){var n=t.config.input[a];e[n.id]=n.valor}d.facturaSrvc.anular(+d.factura.factura,e).subscribe(function(t){t.exito?(d.factura.fel_uuid_anulacion=t.factura.fel_uuid_anulacion,d.facturaSavedEv.emit(),d.snackBar.open("Factura anulada con \xe9xito...","Firmar",{duration:3e3})):d.snackBar.open("ERROR: ".concat(t.mensaje),"Firmar",{duration:1e4})})}})},this.loadArticulos=function(){d.articuloSrvc.getArticulos().subscribe(function(t){t&&(d.articulos=t,d.filteredArticulos=d.articulos)})},this.displayArticulo=function(t){if(t)return d.detalleFactura.articulo=t.articulo,t.descripcion},this.filtrarArticulos=function(t){if(t&&"string"==typeof t){var e=t.toLowerCase();d.filteredArticulos=d.articulos.filter(function(t){return t.descripcion.toLowerCase().includes(e)})}else d.filteredArticulos=d.articulos},this.setPrecioUnitario=function(t){d.detalleFactura.precio_unitario=+t.option.value.precio,d.detalleFactura.total=+d.detalleFactura.precio_unitario*+d.detalleFactura.cantidad},this.resetDetalleFactura=function(){d.detalleFactura={detalle_factura:null,factura:d.factura.factura||0,articulo:null,cantidad:1,precio_unitario:null,total:null},d.txtArticuloSelected=void 0},this.loadDetalleFactura=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+d.factura.factura;d.facturaSrvc.getDetalle(t,{factura:t}).subscribe(function(t){t&&(d.detallesFactura=t,d.updateTableDataSource())})},this.getDetalleFactura=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+d.factura.factura,e=arguments.length>1?arguments[1]:void 0;d.facturaSrvc.getDetalle(t,{detalle_factura:e}).subscribe(function(t){t&&(d.detalleFactura={detalle_factura:t[0].detalle_factura,factura:t[0].factura,articulo:t[0].articulo.articulo,cantidad:+t[0].cantidad,precio_unitario:+t[0].precio_unitario,total:+t[0].total},d.txtArticuloSelected=t[0].articulo,d.showFormDetalle=!0)})},this.onSubmitDetail=function(){d.detalleFactura.factura=d.factura.factura,d.detalleFactura.total=+d.detalleFactura.precio_unitario*+d.detalleFactura.cantidad,d.facturaSrvc.saveDetalle(d.detalleFactura).subscribe(function(t){t&&(d.loadDetalleFactura(),d.resetDetalleFactura())})},this.updateTableDataSource=function(){return d.dataSource=new g.k(d.detallesFactura)},this.representacionGrafica=function(){d.facturaSrvc.getGrafo(d.factura.factura).subscribe(function(t){if(t.exito)switch(t.tipo){case"link":d.openLinkWindow(t.documento);break;case"pdf":d.openPdfDocument(t.documento)}})},this.openLinkWindow=function(t){return window.open(t,"winFactPdf","height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no")},this.openPdfDocument=function(t){window.open("","winFactPdf","height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no").document.write('<iframe width="100%" style="margin: -8px;border: none;" height="100%" src="data:application/pdf;base64, '+encodeURI(t)+'"></iframe>')}}return a(e,[{key:"ngOnInit",value:function(){var t=this;this.esMovil=this.ls.get(A.a.usrTokenVar).enmovil||!1,this.refacturacion=!1,this.resetFactura(),this.loadFacturaSeries(),this.loadClientes(),this.loadMonedas(),this.loadArticulos(),this.getRazonAnulacion(),this.ls.get(A.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(A.a.usrTokenVar).sede_uuid),this.socket.on("reconnect",function(){return t.socket.emit("joinRestaurant",t.ls.get(A.a.usrTokenVar).sede_uuid)}))}}]),e}()).\u0275fac=function(t){return new(t||Xt)(E.Nb(_.b),E.Nb(x.b),E.Nb($.a),E.Nb(ft),E.Nb(dt.a),E.Nb(bt),E.Nb(pt.a),E.Nb(mt.a),E.Nb(ht.a),E.Nb(R.a))},Xt.\u0275cmp=E.Hb({type:Xt,selectors:[["app-form-factura-manual"]],inputs:{factura:"factura"},outputs:{facturaSavedEv:"facturaSavedEv"},decls:11,vars:7,consts:[[1,"mat-elevation-z4","fullWidth"],["style","background-color: lightcoral;",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],[2,"background-color","lightcoral"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmFactura","ngForm"],[1,"form-group"],[1,"fullWidth"],["name","factura_serie","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Cliente","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith"],["auto","matAutocomplete"],["matInput","","type","date","placeholder","Fecha","name","fecha_factura","required","",3,"ngModel","ngModelChange"],["name","moneda","required","",3,"ngModel","ngModelChange"],["name","exenta",1,"fullWidth",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","Notas","name","notas",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text","placeholder","Notas","name","notas",3,"ngModel","ngModelChange",4,"ngIf"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],[3,"value"],["matInput","","type","text","placeholder","Notas","name","notas",3,"matKeyboard","ngModel","ngModelChange"],["matInput","","type","text","placeholder","Notas","name","notas",3,"ngModel","ngModelChange"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"click"],["mat-raised-button","","type","button","color","accent",3,"click"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleFactura","ngForm"],["type","text","placeholder","Art\xedculo","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith","optionSelected"],["autoArticulos","matAutocomplete"],["matInput","","placeholder","Cantidad","name","cantidad","required","",3,"ngModel","ngModelChange","change"],["matInput","","placeholder","Precio unitario","name","precio_unitario","required","",3,"ngModel","ngModelChange","change"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","articulo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","cantidad"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","precio_unitario"],["matColumnDef","total"],["matColumnDef","editItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(E.Tb(0,"mat-card",0),E.Tb(1,"mat-card-title"),E.Dc(2,gt,2,0,"h4",1),E.Tb(3,"h4"),E.Fc(4),E.Dc(5,vt,3,0,"button",2),E.Dc(6,Ft,3,0,"button",2),E.Sb(),E.Sb(),E.Tb(7,"mat-card-content"),E.Dc(8,Dt,45,21,"form",3),E.Sb(),E.Sb(),E.Dc(9,It,1,0,"hr",4),E.Dc(10,Qt,10,6,"mat-card",5)),2&t&&(E.Cb(2),E.lc("ngIf",!!e.factura.fel_uuid_anulacion),E.Cb(2),E.Hc(" Factura ",e.factura.factura?e.factura.serie_factura?e.factura.serie_factura+" "+e.factura.numero_factura:"Pendiente de firmar.":""," "),E.Cb(1),E.lc("ngIf",!e.showForm),E.Cb(1),E.lc("ngIf",e.showForm),E.Cb(2),E.lc("ngIf",e.showForm),E.Cb(1),E.lc("ngIf",e.factura.factura),E.Cb(1),E.lc("ngIf",e.factura.factura))},directives:[p.a,p.h,i.m,p.c,S.a,f.a,o.r,o.l,o.m,d.b,d.e,v.a,o.p,o.k,o.n,i.l,b.b,o.c,D.c,D.a,F.a,z.m,I.a,g.j,g.c,g.e,g.b,g.g,g.i,g.d,g.a,g.f,g.h],pipes:[i.f],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}"]}),Xt),ee=["lstFacturaManual"],ae=["frmFacturaManual"],ne=[{path:"fpago",component:Q,canActivate:[P.a]},{path:"factman",component:($t=function(){function e(){var a=this;t(this,e),this.setFactura=function(t){a.factura={factura:t.factura,factura_serie:t.factura_serie.factura_serie,cliente:t.cliente.cliente,fecha_factura:t.fecha_factura,moneda:t.moneda.moneda,exenta:t.exenta,notas:t.notas,usuario:t.usuario.usuario,numero_factura:t.numero_factura,serie_factura:t.serie_factura,fel_uuid:t.fel_uuid,fel_uuid_anulacion:t.fel_uuid_anulacion,certificador_fel:t.certificador_fel},a.frmFactura.clienteSelected=t.cliente,a.frmFactura.loadDetalleFactura(+a.factura.factura),a.frmFactura.resetDetalleFactura()},this.refreshFacturaList=function(){return a.lstFacturaComponent.loadFacturas()},this.factura={factura:null,factura_serie:null,cliente:null,fecha_factura:X().format(A.a.dbDateFormat),moneda:null,exenta:0,notas:null}}return a(e,[{key:"ngOnInit",value:function(){}}]),e}(),$t.\u0275fac=function(t){return new(t||$t)},$t.\u0275cmp=E.Hb({type:$t,selectors:[["app-factura-manual"]],viewQuery:function(t,e){var a;1&t&&(E.Kc(ee,1),E.Kc(ae,1)),2&t&&(E.sc(a=E.cc())&&(e.lstFacturaComponent=a.first),E.sc(a=E.cc())&&(e.frmFactura=a.first))},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getFacturaEv"],["lstFacturaManual",""],[1,"col","m7","s12"],[3,"factura","facturaSavedEv"],["frmFacturaManual",""]],template:function(t,e){1&t&&(E.Tb(0,"div",0),E.Tb(1,"div",1),E.Tb(2,"app-lista-factura-manual",2,3),E.bc("getFacturaEv",function(t){return e.setFactura(t)}),E.Sb(),E.Sb(),E.Tb(4,"div",4),E.Tb(5,"app-form-factura-manual",5,6),E.bc("facturaSavedEv",function(){return e.refreshFacturaList()}),E.Sb(),E.Sb(),E.Sb()),2&t&&(E.Cb(5),E.lc("factura",e.factura))},directives:[it,te],styles:[""]}),$t),canActivate:[P.a]},{path:"**",redirectTo:"/admin/dashboard",pathMatch:"full"}],ce=((Zt=function e(){t(this,e)}).\u0275mod=E.Lb({type:Zt}),Zt.\u0275inj=E.Kb({factory:function(t){return new(t||Zt)},imports:[[O.d.forChild(ne)],O.d]}),Zt),ie=((Yt=function e(){t(this,e)}).\u0275mod=E.Lb({type:Yt}),Yt.\u0275inj=E.Kb({factory:function(t){return new(t||Yt)},imports:[[i.c,ce,r.c,o.e,I.b,u.a,l.AdminModule,s.d,f.b,d.d,b.c,p.f,m.b,h.c,g.l,v.b,F.b,S.b,_.c,C.b,y.d,k.b,T.b,x.e,M.d,D.b,w.c]]}),Yt)}}])}();