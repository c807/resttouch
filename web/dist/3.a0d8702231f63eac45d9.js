(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{Dm0Z:function(t,a,e){"use strict";e.r(a),a.default='<mat-card class="mat-elevation-z4 fullWidth">\n    <mat-card-title>\n        <h4>\n            Forma de pago {{!!formaPago.forma_pago ? formaPago.descripcion : \'\'}}\n        </h4>\n    </mat-card-title>\n    <mat-card-content>\n        <form #frmFormaPago="ngForm" (ngSubmit)="frmFormaPago.form.valid && onSubmit()" novalidate>\n            <div class="form-group">\n                <mat-form-field class="fullWidth" *ngIf="esMovil">\n                    <input matInput type="text" placeholder="Descripción" name="descripcion" [(ngModel)]="formaPago.descripcion" required>\n                </mat-form-field>\n                <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                    <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="alphanumeric" ng-virtual-keyboard-placeholder="Descripcion" type="text" placeholder="Descripción" name="descripcion" [(ngModel)]="formaPago.descripcion" required>\n                </mat-form-field>\n            </div>\n            <div class="form-group">\n                <mat-checkbox name="activo" class="fullWidth" [(ngModel)]="+formaPago.activo">Activo</mat-checkbox>\n            </div>\n            <div align="end">\n                <button mat-raised-button type="submit" color="accent" class="btnAccion" [disabled]="!frmFormaPago.form.valid">\n                    Guardar\n                </button>\n                <button mat-raised-button type="button" color="accent" (click)="resetFormaPago()" *ngIf="formaPago.forma_pago">\n                    Nueva\n                </button>\n            </div>\n        </form>\n    </mat-card-content>\n</mat-card>'},ElJa:function(t,a,e){"use strict";e.r(a),a.default='<mat-card class="mat-elevation-z4 fullWidth">\n    <mat-card-title>\n        <h4 *ngIf="!!factura.fel_uuid_anulacion" style="background-color: lightcoral;">*** ANULADA ***</h4>\n        <h4>\n            Factura {{!!factura.factura ? (!!factura.serie_factura ? (factura.serie_factura + \' \' + factura.numero_factura) : \'Pendiente de firmar.\') : \'\'}}\n            <button mat-icon-button type="button" color="accent" (click)="showForm = true;" *ngIf="!showForm">\n                <mat-icon class="iconFontSize">expand_more</mat-icon>\n            </button>\n            <button mat-icon-button type="button" color="accent" (click)="showForm = false;" *ngIf="showForm">\n                <mat-icon class="iconFontSize">expand_less</mat-icon>\n            </button>\n        </h4>\n    </mat-card-title>\n    <mat-card-content>\n        <form #frmFactura="ngForm" *ngIf="showForm" (ngSubmit)="frmFactura.form.valid && onSubmit()" novalidate>\n            <div class="form-group">\n                <mat-form-field class="fullWidth">\n                    <mat-label>Serie</mat-label>\n                    <mat-select name="factura_serie" [(ngModel)]="factura.factura_serie" required>\n                        <mat-option *ngFor="let fs of facturaSeries" [value]="fs.factura_serie">\n                            {{fs.serie}} ({{fs.tipo}})\n                        </mat-option>\n                    </mat-select>\n                </mat-form-field>\n            </div>\n            <div class="form-group">\n                <mat-form-field class="fullWidth">\n                    <mat-label>Cliente</mat-label>\n                    <mat-select name="cliente" [(ngModel)]="factura.cliente" required>\n                        <mat-option *ngFor="let cli of clientes" [value]="cli.cliente">\n                            {{cli.nombre}} ({{cli.nit}})\n                        </mat-option>\n                    </mat-select>\n                </mat-form-field>\n            </div>\n            <div class="form-group">\n                <mat-form-field class="fullWidth">\n                    <input matInput type="date" placeholder="Fecha" name="fecha_factura" [(ngModel)]="factura.fecha_factura" required>\n                </mat-form-field>\n            </div>\n            <div class="form-group">\n                <mat-form-field class="fullWidth">\n                    <mat-label>Moneda</mat-label>\n                    <mat-select name="moneda" [(ngModel)]="factura.moneda" required>\n                        <mat-option *ngFor="let mon of monedas" [value]="mon.moneda">\n                            {{mon.nombre}} ({{mon.simbolo}})\n                        </mat-option>\n                    </mat-select>\n                </mat-form-field>\n            </div>\n            <div class="form-group">\n                <mat-checkbox name="exenta" class="fullWidth" [(ngModel)]="+factura.exenta">Exenta</mat-checkbox>\n            </div>\n            <div class="form-group">\n                <mat-form-field class="fullWidth" *ngIf="esMovil">\n                    <input matInput type="text" placeholder="Notas" name="notas" [(ngModel)]="factura.notas">\n                </mat-form-field>\n                <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                    <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="alphanumeric" ng-virtual-keyboard-placeholder="Notas" type="text" placeholder="Notas" name="notas" [(ngModel)]="factura.notas">\n                </mat-form-field>\n            </div>\n            <div align="end">\n                <button mat-raised-button type="submit" color="accent" class="btnAccion" [disabled]="!frmFactura.form.valid || !!factura.fel_uuid || !!factura.fel_uuid_anulacion">\n                    Guardar\n                </button>\n                <button mat-raised-button type="button" color="accent" class="btnAccion" [disabled]="!frmFactura.form.valid || !!factura.fel_uuid || !!factura.fel_uuid_anulacion || detallesFactura.length === 0 || refacturacion" (click)="firmarFactura()">\n                    Firmar\n                </button>\n                <button mat-raised-button type="button" color="accent" class="btnAccion" [disabled]="!frmFactura.form.valid || factura.fel_uuid == undefined || factura.fel_uuid == null || !!factura.fel_uuid_anulacion || detallesFactura.length === 0 || refacturacion" (click)="imprimirFactura()">\n                    Imprimir\n                </button>\n                <button mat-raised-button type="button" color="accent" class="btnAccion" [disabled]="!frmFactura.form.valid || factura.fel_uuid == undefined || factura.fel_uuid == null || detallesFactura.length === 0 || refacturacion" (click)="representacionGrafica()">\n                    PDF\n                </button>\n                <button mat-raised-button type="button" color="accent" class="btnAccion" [disabled]="!frmFactura.form.valid || factura.fel_uuid == undefined || factura.fel_uuid == null || !!factura.fel_uuid_anulacion || detallesFactura.length === 0" (click)="anularFactura()">\n                    Anular\n                </button>\n                <button mat-raised-button type="button" color="accent" class="btnAccion" *ngIf="!!factura.fel_uuid_anulacion" (click)="refacturar()">\n                    Refacturar\n                </button>\n                <button mat-raised-button type="button" color="accent" (click)="resetFactura()" *ngIf="factura.factura">\n                    Nueva\n                </button>\n\n            </div>\n        </form>\n    </mat-card-content>\n</mat-card>\n<hr *ngIf="factura.factura" />\n<mat-card class="mat-elevation-z4 fullWidth" *ngIf="factura.factura">\n    <mat-card-title>\n        <h4>\n            Detalle de factura No. {{(!!factura.serie_factura ? (factura.serie_factura + \' \' + factura.numero_factura) : \'Pendiente de firmar.\')}}\n            <button mat-icon-button type="button" color="accent" (click)="showFormDetalle = true;" *ngIf="!showFormDetalle">\n                <mat-icon class="iconFontSize">expand_more</mat-icon>\n            </button>\n            <button mat-icon-button type="button" color="accent" (click)="showFormDetalle = false;" *ngIf="showFormDetalle">\n                <mat-icon class="iconFontSize">expand_less</mat-icon>\n            </button>\n        </h4>\n    </mat-card-title>\n    <mat-card-content>\n        <form #frmDetalleFactura="ngForm" *ngIf="showFormDetalle" (ngSubmit)="frmDetalleFactura.form.valid && onSubmitDetail()" novalidate>\n            <div class="form-group">\n                <mat-form-field class="fullWidth">\n                    <mat-label>Artículo</mat-label>\n                    <mat-select name="articulo" [(ngModel)]="detalleFactura.articulo" (selectionChange)="setPrecioUnitario($event)" required>\n                        <mat-option *ngFor="let a of articulos" [value]="a.articulo">\n                            {{a.descripcion}}\n                        </mat-option>\n                    </mat-select>\n                </mat-form-field>\n            </div>\n            <div class="form-group">\n                <mat-form-field class="fullWidth" *ngIf="esMovil">\n                    <input matInput placeholder="Cantidad" name="cantidad" [(ngModel)]="detalleFactura.cantidad"\n                        (change)="detalleFactura.total = +detalleFactura.precio_unitario * +detalleFactura.cantidad"\n                        required>\n                </mat-form-field>\n                <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                    <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="numeric" ng-virtual-keyboard-placeholder="Cantidad" placeholder="Cantidad" name="cantidad" [(ngModel)]="detalleFactura.cantidad"\n                        (change)="detalleFactura.total = +detalleFactura.precio_unitario * +detalleFactura.cantidad"\n                        required>\n                </mat-form-field>\n            </div>\n            <div class="form-group">\n                <mat-form-field class="fullWidth" *ngIf="esMovil">\n                    <input matInput placeholder="Precio unitario" name="precio_unitario"\n                        [(ngModel)]="detalleFactura.precio_unitario"\n                        (change)="detalleFactura.total = +detalleFactura.precio_unitario * +detalleFactura.cantidad"\n                        required>\n                </mat-form-field>\n                <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                    <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="numeric" ng-virtual-keyboard-placeholder="Precio unitario" placeholder="Precio unitario" name="precio_unitario"\n                        [(ngModel)]="detalleFactura.precio_unitario"\n                        (change)="detalleFactura.total = +detalleFactura.precio_unitario * +detalleFactura.cantidad"\n                        required>\n                </mat-form-field>\n            </div>\n            <div align="end">\n                <button mat-raised-button type="submit" color="accent" class="btnAccion" [disabled]="!frmDetalleFactura.form.valid || !!factura.fel_uuid || !!factura.fel_uuid_anulacion">\n                    Guardar\n                </button>\n                <button mat-raised-button type="button" color="accent" (click)="resetDetalleFactura()" *ngIf="detalleFactura.detalle_factura">\n                    Nuevo\n                </button>\n            </div>\n        </form>\n        <hr *ngIf="detallesFactura.length > 0"/>\n        <table mat-table [dataSource]="dataSource" class="mat-elevation-z4 full-width" *ngIf="detallesFactura.length > 0">\n            <ng-container matColumnDef="articulo">\n                <th mat-header-cell *matHeaderCellDef>Artículo</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">{{element.articulo.descripcion}}</td>\n            </ng-container>\n            <ng-container matColumnDef="cantidad">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Cantidad</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.cantidad | number:\'1.2-2\'}}</td>\n            </ng-container>\n            <ng-container matColumnDef="precio_unitario">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Precio Unitario</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.precio_unitario | number:\'1.2-2\'}}</td>\n            </ng-container>\n            <ng-container matColumnDef="total">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Total</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.total | number:\'1.2-2\'}}</td>\n            </ng-container>\n            <ng-container matColumnDef="editItem">\n                <th mat-header-cell *matHeaderCellDef>&nbsp;</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">\n                    <button mat-raised-button type="button" color="accent" (click)="getDetalleFactura(element.factura, element.detalle_factura)" [disabled]="!!factura.fel_uuid || !!factura.fel_uuid_anulacion || refacturacion">\n                        Editar\n                    </button>\n                </td>\n            </ng-container>\n            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>\n            <tr mat-row *matRowDef="let row; columns: displayedColumns;">\n            </tr>\n        </table>\n    </mat-card-content>\n</mat-card>'},Ff2I:function(t,a,e){"use strict";e.r(a),a.default='<div class="row">\n    <div class="col m5 s12">\n        <app-lista-factura-manual #lstFacturaManual (getFacturaEv)="setFactura($event)"></app-lista-factura-manual>\n    </div>\n    <div class="col m7 s12">\n        <app-form-factura-manual #frmFacturaManual [factura]="factura" (facturaSavedEv)="refreshFacturaList()">\n        </app-form-factura-manual>\n    </div>\n</div>'},KFbY:function(t,a,e){"use strict";e.d(a,"a",(function(){return f}));var n=e("mrSG"),r=e("CcnG"),o=e("t/Na"),i=e("sKxO"),c=e("R5jZ"),l=e("FY0D"),s=e("5tAl"),u=e("9Z1F"),d=e("Qyje"),f=function(){function t(t,a){this.http=t,this.ls=a,this.moduleUrl="factura",this.usrToken=null,this.srvcErrHndl=new c.a,this.usrToken=this.ls.get(i.a.usrTokenVar)?this.ls.get(i.a.usrTokenVar).token:null}return t.prototype.facturar=function(t){var a={headers:new o.c({Authorization:this.usrToken})};return this.http.post(i.a.urlAppRestaurante+"/"+this.moduleUrl+"/guardar",t,a).pipe(Object(s.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))},t.prototype.get=function(t){void 0===t&&(t={});var a={headers:new o.c({Authorization:this.usrToken})};return this.http.get(i.a.urlFacturacion+"/"+this.moduleUrl+"/buscar_factura?"+d.stringify(t),a).pipe(Object(s.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))},t.prototype.imprimir=function(t){var a={headers:new o.c({Authorization:this.usrToken})};return this.http.get(i.a.urlFacturacion+"/"+this.moduleUrl+"/imprimir/"+t,a).pipe(Object(s.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))},t.prototype.save=function(t){var a={headers:new o.c({Authorization:this.usrToken})};return this.http.post(i.a.urlFacturacion+"/"+this.moduleUrl+"/guardar"+(t.factura?"/"+t.factura:""),t,a).pipe(Object(s.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))},t.prototype.refacturar=function(t){var a={headers:new o.c({Authorization:this.usrToken})};return this.http.post(i.a.urlFacturacion+"/"+this.moduleUrl+"/refacturar"+(t.factura?"/"+t.factura:""),t,a).pipe(Object(s.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))},t.prototype.firmar=function(t){var a={headers:new o.c({Authorization:this.usrToken})};return this.http.post(i.a.urlFacturacion+"/"+this.moduleUrl+"/facturar/"+t,{},a).pipe(Object(s.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))},t.prototype.anular=function(t){var a={headers:new o.c({Authorization:this.usrToken})};return this.http.post(i.a.urlFacturacion+"/"+this.moduleUrl+"/anular/"+t,{},a).pipe(Object(s.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))},t.prototype.getDetalle=function(t,a){void 0===a&&(a={});var e={headers:new o.c({Authorization:this.usrToken})};return this.http.get(i.a.urlFacturacion+"/"+this.moduleUrl+"/buscar_detalle/"+t+"?"+d.stringify(a),e).pipe(Object(s.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))},t.prototype.saveDetalle=function(t){var a={headers:new o.c({Authorization:this.usrToken})};return this.http.post(i.a.urlFacturacion+"/"+this.moduleUrl+"/guardar_detalle/"+t.factura+(t.detalle_factura?"/"+t.detalle_factura:""),t,a).pipe(Object(s.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))},t.ctorParameters=function(){return[{type:o.a},{type:l.a}]},t=n.c([Object(r.Injectable)({providedIn:"root"})],t)}()},KZK3:function(t,a,e){"use strict";e.d(a,"a",(function(){return f}));var n=e("mrSG"),r=e("CcnG"),o=e("t/Na"),i=e("sKxO"),c=e("R5jZ"),l=e("FY0D"),s=e("5tAl"),u=e("9Z1F"),d=e("Qyje"),f=function(){function t(t,a){this.http=t,this.ls=a,this.moduleUrl="catalogo",this.manteUrl="fpago",this.usrToken=null,this.srvcErrHndl=new c.a,this.usrToken=this.ls.get(i.a.usrTokenVar)?this.ls.get(i.a.usrTokenVar).token:null}return t.prototype.get=function(t){void 0===t&&(t={});var a={headers:new o.c({Authorization:this.usrToken})};return this.http.get(i.a.url+"/"+this.moduleUrl+"/get_forma_pago?"+d.stringify(t),a).pipe(Object(s.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))},t.prototype.buscar=function(t){void 0===t&&(t={});var a={headers:new o.c({Authorization:this.usrToken})};return this.http.get(i.a.urlMantenimientos+"/"+this.manteUrl+"/buscar?"+d.stringify(t),a).pipe(Object(s.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))},t.prototype.save=function(t){var a={headers:new o.c({Authorization:this.usrToken})};return this.http.post(i.a.urlMantenimientos+"/"+this.manteUrl+"/guardar"+(t.forma_pago?"/"+t.forma_pago:""),t,a).pipe(Object(s.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))},t.ctorParameters=function(){return[{type:o.a},{type:l.a}]},t=n.c([Object(r.Injectable)({providedIn:"root"})],t)}()},Ma74:function(t,a,e){"use strict";e.r(a),a.default=".full-width {\n    width: 100%;\n}\n\n.iconFontSize {\n    font-size: 24pt;\n}"},QbRZ:function(t,a,e){"use strict";e.r(a),a.default='<h1 mat-dialog-title>\n  Cobrar cuenta de {{data.cuenta}}\n  <small *ngIf="clienteSelected && !!clienteSelected.cliente">\n     - Factura a nombre de {{clienteSelected.nombre}}\n  </small>\n</h1>\n<div mat-dialog-content style="height: 650px;">\n  <div class="row">\n    <div class="col m5 s12 mat-elevation-z4 colHeight" style="overflow-y: auto;">\n      <app-lista-cliente #lstClientes (getClienteEv)="setClienteFacturar($event)" [showAddButton]="true"></app-lista-cliente>\n    </div>\n    <div class="col m3 s12 mat-elevation-z4 colHeight" style="overflow-y: auto;">\n      <table class="table table-sm table-borderless table-striped">\n        <tbody>\n          <tr *ngFor="let p of inputData.productosACobrar; let i = index;">\n            <td>{{p.cantidad}}&nbsp;{{p.nombre || p.articulo.descripcion}}</td>\n            <td class="text-right">{{(p.cantidad * p.precio) | number: \'1.2-2\'}}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class="col m4 s12 mat-elevation-z4 colHeight" style="overflow-y: auto;">\n      <form #frmFormasPago="ngForm" novalidate>\n        <mat-form-field class="fullWidth">\n          <mat-label>Forma de pago</mat-label>\n          <mat-select name="forma_pago" [(ngModel)]="formaPago.forma_pago" cdkFocusInitial (selectionChange)="onSelectionChangeFP($event)" required>\n            <mat-option *ngFor="let fp of lstFormasPago" [value]="fp.forma_pago">\n              {{fp.descripcion}}\n            </mat-option>\n          </mat-select>\n        </mat-form-field>\n        \x3c!--Inicia input de monto por forma de pago--\x3e\n        <mat-form-field class="fullWidth" *ngIf="esMovil">\n          <input matInput placeholder="monto" name="monto" [(ngModel)]="formaPago.monto" required>\n        </mat-form-field>\n        <mat-form-field class="fullWidth" *ngIf="!esMovil">\n          <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="numeric" ng-virtual-keyboard-placeholder="Monto" placeholder="monto" name="monto" [(ngModel)]="formaPago.monto" required>\n        </mat-form-field>\n        \x3c!--Fin de input de monto por forma de pago--\x3e\n        \x3c!--Inicia input de propina por forma de pago--\x3e\n        <mat-form-field class="fullWidth" *ngIf="esMovil">\n          <input matInput placeholder="Propina" name="propina" [(ngModel)]="formaPago.propina">\n        </mat-form-field>\n        <mat-form-field class="fullWidth" *ngIf="!esMovil">\n          <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="numeric" ng-virtual-keyboard-placeholder="Propina" placeholder="Propina" name="propina" [(ngModel)]="formaPago.propina">\n        </mat-form-field>\n        \x3c!--Fin de input de propina por forma de pago--\x3e\n        \x3c!-- Inicia input de documento --\x3e\n        <mat-form-field class="fullWidth" *ngIf="esMovil && pideDocumento">\n          <input matInput placeholder="Documento" name="documento" [(ngModel)]="formaPago.documento" [required]="pideDocumento">\n        </mat-form-field>\n        <mat-form-field class="fullWidth" *ngIf="!esMovil && pideDocumento">\n          <input matInput ng-virtual-keyboard ng-virtual-keyboard-placeholder="Documento" placeholder="Documento" name="documento" [(ngModel)]="formaPago.documento" [required]="pideDocumento">\n        </mat-form-field>\n        \x3c!-- Fin de input de documento --\x3e\n        <div align="end">\n          <button mat-raised-button type="button" color="accent" (click)="addFormaPago()" [disabled]="!frmFormasPago.form.valid || inputData.saldo <= 0">\n            Agregar\n          </button>\n        </div>\n      </form>\n      <hr />\n      <table class="table table-sm">\n        <thead>\n          <tr>\n            <th class="text-left">FP</th>\n            <th class="text-right">Mon</th>\n            <th class="text-right">Prop</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor="let fpCta of formasPagoDeCuenta; let i = index">\n            <td>{{fpCta.forma_pago.descripcion}}</td>\n            <td class="text-right">{{fpCta.monto | number:\'1.2-2\'}}</td>\n            <td class="text-right">{{fpCta.propina | number:\'1.2-2\'}}</td>\n            <td class="text-center">\n              <button mat-icon-button type="button" color="warn" (click)="delFormaPago(i)">\n                <mat-icon>delete_forever</mat-icon>\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col m12 s12 overflow-auto d-flex justify-content-end">\n      <table class="table table-sm table-borderless">\n        <tbody>\n          <tr>\n            <td class="text-right font-weight-bold">TOTAL DE CUENTA:</td>\n            <td class="text-right font-weight-bold totalCuenta" style="max-width: 15%;">{{inputData.totalDeCuenta | number:\'1.2-2\'}}</td>\n          </tr>\n          <tr>\n            <td class="text-right font-weight-bold">PENDIENTE:</td>\n            <td class="text-right font-weight-bold" style="max-width: 15%;">\n              <span\n                [ngClass]="{\'saldo-pendiente\': +inputData.saldo > 0, \'saldo-exacto\': +inputData.saldo == 0, \'saldo-extra\': +inputData.saldo < 0 }">{{inputData.saldo | number:\'1.2-2\'}}</span>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>  \n</div>\n<div mat-dialog-actions align="end">\n  <app-cargando *ngIf="facturando" [configuracion]="cargandoConf"></app-cargando>\n  <button mat-raised-button color="accent" (click)="cancelar()" [disabled]="facturando">Cancelar</button>\n  <button mat-raised-button color="accent" (click)="cobrar()" [disabled]="formasPagoDeCuenta.length == 0 || +inputData.saldo > 0 || !factReq.cliente || facturando">Facturar</button>  \n</div>'},"V+uF":function(t,a,e){"use strict";e.r(a),a.default=".fullWidth {\n    width: 100% !important;\n}\n\ntable {\n    width: 100% !important;\n}"},VHZL:function(t,a,e){"use strict";e.r(a),a.default=".fullWidth {\n    width: 100% !important;\n}\n\ntable {\n    width: 100% !important;\n}"},VLua:function(t,a,e){"use strict";e.r(a),a.default='<mat-card class="mat-elevation-z4 fullWidth">\n    <mat-card-content>\n        <mat-form-field class="fullWidth">\n            <input matInput (keyup)="applyFilter()" placeholder="Buscar..." [(ngModel)]="txtFiltro" [ngModelOptions]="{standalone: true}">\n        </mat-form-field>\n        <mat-nav-list>\n            <mat-list-item *ngFor="let element of lstFormasPagoPaged" (click)="getFormaPago(element)">\n                <mat-icon mat-list-icon>account_balance_wallet</mat-icon>\n                <h5 mat-line>{{element.descripcion}}</h5>\n            </mat-list-item>            \n        </mat-nav-list>\n        <mat-paginator [length]="length" [pageSize]="pageSize" [pageSizeOptions]="pageSizeOptions" (page)="pageChange($event)" showFirstLastButtons>\n        </mat-paginator>\n    </mat-card-content>\n</mat-card>\n'},XaST:function(t,a,e){"use strict";e.r(a),a.default=""},aIz7:function(t,a,e){"use strict";e.r(a),a.default=".full-width {\n    width: 100%;\n}\n\n.iconFontSize {\n    font-size: 24pt;\n}"},fn6i:function(t,a,e){"use strict";var n=e("mrSG"),r=e("CcnG"),o=e("o3x0"),i=e("vARd"),c=e("sKxO"),l=e("FY0D"),s=e("wd/R"),u=e("IJgu"),d=e("mTQG"),f=e("92vz"),p=e("KZK3"),m=e("t/Na"),h=e("R5jZ"),g=e("5tAl"),b=e("9Z1F"),v=function(){function t(t,a){this.http=t,this.ls=a,this.moduleUrl="cuenta",this.usrToken=null,this.srvcErrHndl=new h.a,this.usrToken=this.ls.get(c.a.usrTokenVar)?this.ls.get(c.a.usrTokenVar).token:null}return t.prototype.save=function(t){var a={headers:new m.c({Authorization:this.usrToken})};return this.http.post(c.a.urlAppRestaurante+"/"+this.moduleUrl+"/cobrar/"+t.cuenta,t,a).pipe(Object(g.a)(c.a.reintentos),Object(b.a)(this.srvcErrHndl.errorHandler))},t.ctorParameters=function(){return[{type:m.a},{type:l.a}]},t=n.c([Object(r.Injectable)({providedIn:"root"})],t)}(),F=e("KFbY");e.d(a,"a",(function(){return y}));var y=function(){function t(t,a,e,r,o,i,l,f,p){var m=this;this.dialog=t,this.dialogRef=a,this.data=e,this.snackBar=r,this.formaPagoSrvc=o,this.cobroSrvc=i,this.facturaSrvc=l,this.ls=f,this.socket=p,this.inputData={},this.lstFormasPago=[],this.formaPago={},this.formasPagoDeCuenta=[],this.esMovil=!1,this.facturando=!1,this.cargandoConf={w:75,h:75},this.pideDocumento=!1,this.resetFactReq=function(){m.factReq={cuentas:[],factura_serie:1,cliente:null,fecha_factura:s().format(c.a.dbDateFormat),moneda:1}},this.processData=function(){m.data?m.inputData=m.data:m.data=m.inputData,m.inputData.totalDeCuenta=0,m.inputData.productosACobrar.forEach((function(t){m.inputData.totalDeCuenta+=t.precio*t.cantidad})),m.calculaPropina(),m.actualizaSaldo(),m.formaPago.monto=parseFloat(m.inputData.saldo).toFixed(2)},this.calculaPropina=function(){m.inputData.montoPropina=parseFloat((m.inputData.porcentajePropina*m.inputData.totalDeCuenta/100).toFixed(2)),m.actualizaSaldo()},this.loadFormasPago=function(){m.formaPagoSrvc.get({activo:1}).subscribe((function(t){t&&t.length>0&&(m.lstFormasPago=t)}))},this.addFormaPago=function(){var t=m.lstFormasPago.filter((function(t){return+t.forma_pago==+m.formaPago.forma_pago}))[0];1==+t.pedirautorizacion?m.dialog.open(d.a,{width:"40%",disableClose:!0,data:new d.b(1)}).afterClosed().subscribe((function(a){a?m.agregaFormaPago(t):m.snackBar.open("La contraseña no es correcta","Formas de pago",{duration:5e3})})):m.agregaFormaPago(t)},this.agregaFormaPago=function(t){m.formasPagoDeCuenta.push({forma_pago:t,monto:parseFloat(m.formaPago.monto).toFixed(2),propina:m.formaPago.propina||0,documento:m.formaPago.documento||null}),m.actualizaSaldo(),m.pideDocumento=!1},this.delFormaPago=function(t){m.formasPagoDeCuenta.splice(t,1),m.actualizaSaldo()},this.actualizaSaldo=function(){var t=0;m.formasPagoDeCuenta.forEach((function(a){return t+=+a.monto})),m.inputData.saldo=(+m.inputData.totalDeCuenta-t).toFixed(2),m.formaPago={monto:m.inputData.saldo}},this.cancelar=function(){return m.dialogRef.close()},this.setClienteFacturar=function(t){m.clienteSelected=t,m.factReq.cliente=+t.cliente},this.cobrar=function(){var t,a;m.facturando=!0;var e={cuenta:m.inputData.idcuenta,forma_pago:[],total:m.inputData.totalDeCuenta+m.inputData.montoPropina,propina_monto:m.inputData.montoPropina,propina_porcentaje:m.inputData.porcentajePropina};try{for(var r=n.k(m.formasPagoDeCuenta),o=r.next();!o.done;o=r.next()){var i=o.value;e.forma_pago.push({forma_pago:+i.forma_pago.forma_pago,monto:i.monto,propina:i.propina||0,documento:i.documento})}}catch(c){t={error:c}}finally{try{o&&!o.done&&(a=r.return)&&a.call(r)}finally{if(t)throw t.error}}m.factReq.cuentas.push({cuenta:+m.inputData.idcuenta}),m.cobroSrvc.save(e).subscribe((function(t){t.exito&&!t.facturada?(m.snackBar.open("Cobro",""+t.mensaje,{duration:3e3}),m.facturaSrvc.facturar(m.factReq).subscribe((function(a){a.exito?m.dialog.open(u.a,{maxWidth:"400px",data:new u.b("Imprimir factura","¿Desea imprimir la factura?","Sí","No")}).afterClosed().subscribe((function(e){e&&m.printFactura(a.factura),m.resetFactReq(),m.snackBar.open("Factura",""+a.mensaje,{duration:3e3}),m.facturando=!1,m.dialogRef.close(t.cuenta),m.socket.emit("refrescar:mesa",{mesaenuso:m.data.mesaenuso})})):(m.facturando=!1,m.snackBar.open("Factura","ERROR: "+t.mensaje,{duration:7e3}),m.dialogRef.close(t.cuenta))}))):(m.facturando=!1,m.snackBar.open("Cobro","ERROR: "+t.mensaje,{duration:7e3}),m.dialogRef.close("closePanel"))}))},this.procesaDetalleFactura=function(t){var a=[];return t.forEach((function(t){return a.push({Cantidad:+t.cantidad,Descripcion:t.articulo.descripcion,Total:+t.total})})),a},this.getTotalDetalle=function(t){var a=0;return t.forEach((function(t){return a+=+t.total})),a},this.printFactura=function(t){m.facturaSrvc.imprimir(+t.factura).subscribe((function(t){if(t.factura){var a={NombreEmpresa:t.factura.empresa.nombre,NitEmpresa:t.factura.empresa.nit,SedeEmpresa:t.factura.sedeFactura.nombre,DireccionEmpresa:t.factura.empresa.direccion,Fecha:s(t.factura.fecha_factura).format(c.a.dateFormat),Nit:t.factura.receptor.nit,Nombre:t.factura.receptor.nombre,Direccion:t.factura.receptor.direccion,Serie:t.factura.serie_factura,Numero:t.factura.numero_factura,Total:m.getTotalDetalle(t.factura.detalle),NoAutorizacion:t.factura.fel_uuid,NombreCertificador:t.factura.certificador_fel.nombre,NitCertificador:t.factura.certificador_fel.nit,FechaDeAutorizacion:t.factura.fecha_autorizacion,NoOrdenEnLinea:"",FormaDePago:"",DetalleFactura:m.procesaDetalleFactura(t.factura.detalle),Impresora:m.data.impresora};m.data.impresora?0==+m.data.impresora.bluetooth?m.socket.emit("print:factura",""+JSON.stringify(a)):m.printToBT(JSON.stringify(a)):m.socket.emit("print:factura",""+JSON.stringify(a)),m.snackBar.open("Imprimiendo factura "+t.factura.serie_factura+"-"+t.factura.numero_factura,"Impresión",{duration:3e3})}else m.snackBar.open("ERROR: "+t.mensaje,"Impresión",{duration:7e3})}))},this.printToBT=function(t){void 0===t&&(t="");var a="com.restouch.impresion://impresion/"+t,e=window.open(a,"PrntBT","height=200,width=200,menubar=no,location=no,resizable=no,scrollbars=no,status=no");setTimeout((function(){return e.close()}),1e3)},this.onSelectionChangeFP=function(t){var a=m.lstFormasPago.findIndex((function(a){return+a.forma_pago==+t.value}));a>-1&&(m.pideDocumento=1==+m.lstFormasPago[a].pedirdocumento)}}return t.prototype.ngOnInit=function(){this.esMovil=this.ls.get(c.a.usrTokenVar).enmovil||!1,this.processData(),this.loadFormasPago(),this.resetFactReq(),this.ls.get(c.a.usrTokenVar).sede_uuid&&this.socket.emit("joinRestaurant",this.ls.get(c.a.usrTokenVar).sede_uuid)},t.prototype.calculaPorcentajePropina=function(){this.inputData.porcentajePropina=parseFloat((100*this.inputData.montoPropina/this.inputData.totalDeCuenta).toFixed(2)),this.actualizaSaldo()},t.ctorParameters=function(){return[{type:o.b},{type:o.d},{type:void 0,decorators:[{type:r.Inject,args:[o.a]}]},{type:i.a},{type:p.a},{type:v},{type:F.a},{type:l.a},{type:f.a}]},n.c([Object(r.Input)()],t.prototype,"inputData",void 0),t=n.c([Object(r.Component)({selector:"app-cobrar-pedido",template:n.f(e("QbRZ")).default,styles:[n.f(e("id0f")).default]}),n.h(2,Object(r.Inject)(o.a))],t)}()},fraS:function(t,a,e){"use strict";e.r(a),a.default='<div class="row">\n    <div class="col m5 s12">\n        <app-lista-forma-pago #lstFormaPago (getFormaPagoEv)="setFormaPago($event)"></app-lista-forma-pago>\n    </div>\n    <div class="col m7 s12">\n        <app-form-forma-pago #frmIngreso [formaPago]="formaPago" (formaPagoSavedEv)="refreshFormaPagoList()">\n        </app-form-forma-pago>\n    </div>\n</div>'},id0f:function(t,a,e){"use strict";e.r(a),a.default=".spacer {\n    flex: 1 1 auto;\n}\n\n.totalCuenta {\n    border-top: solid 1px black;\n    border-bottom: double 5px black;\n}\n\n.colHeight {\n    height: 400px;\n}\n\n.saldo-pendiente {\n    color: #DA332D;\n    border-bottom: double 5px #DA332D;\n}\n\n.saldo-extra {\n    color: skyblue;\n    border-bottom: double 5px skyblue;\n}\n\n.saldo-exacto {\n    color: green;\n    border-bottom: double 5px green;\n}\n\n.propina {\n    font-style: italic;\n}"},"k5u/":function(t,a,e){"use strict";e.d(a,"a",(function(){return f}));var n=e("CcnG"),r=e("Ip0R"),o=e("UodH"),i=e("bne5"),c=e("VNr4"),l=e("t9fZ"),s=function(){function t(t,a){this.renderer=a,this.miniFabVisible=!1,this._parent=t.get(u)}return t.prototype.ngAfterContentInit=function(){var t=this;this._buttons.changes.subscribe((function(){t.initButtonStates(),t._parent.setActionsVisibility()})),this.initButtonStates()},t.prototype.initButtonStates=function(){var t=this;this._buttons.forEach((function(a,e){t.renderer.addClass(a._getHostElement(),"eco-fab-action-item"),t.changeElementStyle(a._getHostElement(),"z-index",""+(23-e))}))},t.prototype.show=function(){var t=this;this._buttons&&(this.resetAnimationState(),this.miniFabVisible=!0,this.showMiniFabAnimation=setTimeout((function(){t._buttons.forEach((function(a,e){var n,r=0;"scale"===t._parent.animationMode?(r=3+65*e,n="scale(1)"):n=t.getTranslateFunction("0");var o=a._getHostElement();t.changeElementStyle(o,"transition-delay",r+"ms"),t.changeElementStyle(o,"opacity","1"),t.changeElementStyle(o,"transform",n)}))}),50))},t.prototype.resetAnimationState=function(){clearTimeout(this.showMiniFabAnimation),this.hideMiniFab&&(this.hideMiniFab.unsubscribe(),this.hideMiniFab=null)},t.prototype.hide=function(){var t=this;if(this._buttons){this.resetAnimationState();var a=this._buttons.map((function(a,e){var n,r="1",o=0;"scale"===t._parent.animationMode?(o=3-65*e,n="scale(0)",r="0"):n=t.getTranslateFunction(55*(e+1)-5*e+"px");var c=a._getHostElement();return t.changeElementStyle(c,"transition-delay",o+"ms"),t.changeElementStyle(c,"opacity",r),t.changeElementStyle(c,"transform",n),Object(i.a)(c,"transitionend").pipe(Object(l.a)(1))}));this.hideMiniFab=Object(c.a)(a).subscribe((function(){return t.miniFabVisible=!1}))}},t.prototype.getTranslateFunction=function(t){var a=this._parent.direction;return("up"===a||"down"===a?"translateY":"translateX")+"("+("down"===a||"right"===a?"-":"")+t+")"},t.prototype.changeElementStyle=function(t,a,e){this.renderer.setStyle(t,a,e)},t.decorators=[{type:n.Component,args:[{selector:"eco-fab-speed-dial-actions",template:'\n        <ng-content select="[mat-mini-fab]" *ngIf="miniFabVisible"></ng-content>'}]}],t.ctorParameters=function(){return[{type:n.Injector},{type:n.Renderer2}]},t.propDecorators={_buttons:[{type:n.ContentChildren,args:[o.a]}]},t}(),u=function(){function t(t,a,e){this.elementRef=t,this.renderer=a,this.document=e,this.isInitialized=!1,this._direction="up",this._open=!1,this._animationMode="fling",this._fixed=!1,this._documentClickUnlistener=null,this.openChange=new n.EventEmitter}return Object.defineProperty(t.prototype,"fixed",{get:function(){return this._fixed},set:function(t){this._fixed=t,this._processOutsideClickState()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"open",{get:function(){return this._open},set:function(t){var a=this._open;this._open=t,a!==this._open&&(this.openChange.emit(this._open),this.isInitialized&&this.setActionsVisibility())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(t){var a=this._direction;this._direction=t,a!==this.direction&&(this._setElementClass(a,!1),this._setElementClass(this.direction,!0),this.isInitialized&&this.setActionsVisibility())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animationMode",{get:function(){return this._animationMode},set:function(t){var a=this,e=this._animationMode;this._animationMode=t,e!==this._animationMode&&(this._setElementClass(e,!1),this._setElementClass(this.animationMode,!0),this.isInitialized&&Promise.resolve(null).then((function(){return a.open=!1})))},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){this.isInitialized=!0,this.setActionsVisibility(),this._setElementClass(this.direction,!0),this._setElementClass(this.animationMode,!0)},t.prototype.ngOnDestroy=function(){this._unsetDocumentClickListener()},t.prototype.toggle=function(){this.open=!this.open},t.prototype._onClick=function(){!this.fixed&&this.open&&(this.open=!1)},t.prototype.setActionsVisibility=function(){this._childActions&&(this.open?this._childActions.show():this._childActions.hide(),this._processOutsideClickState())},t.prototype._setElementClass=function(t,a){var e="eco-"+t;a?this.renderer.addClass(this.elementRef.nativeElement,e):this.renderer.removeClass(this.elementRef.nativeElement,e)},t.prototype._processOutsideClickState=function(){!this.fixed&&this.open?this._setDocumentClickListener():this._unsetDocumentClickListener()},t.prototype._setDocumentClickListener=function(){var t=this;this._documentClickUnlistener||(this._documentClickUnlistener=this.renderer.listen(this.document,"click",(function(){t.open=!1})))},t.prototype._unsetDocumentClickListener=function(){this._documentClickUnlistener&&(this._documentClickUnlistener(),this._documentClickUnlistener=null)},t.decorators=[{type:n.Component,args:[{selector:"eco-fab-speed-dial",template:'\n        <div class="eco-fab-speed-dial-container">\n            <ng-content select="eco-fab-speed-dial-trigger"></ng-content>\n            <ng-content select="eco-fab-speed-dial-actions"></ng-content>\n        </div>\n    ',encapsulation:n.ViewEncapsulation.None,styles:["eco-fab-speed-dial{display:inline-block}eco-fab-speed-dial.eco-opened .eco-fab-speed-dial-container eco-fab-speed-dial-trigger.eco-spin .spin180{transform:rotate(180deg)}eco-fab-speed-dial.eco-opened .eco-fab-speed-dial-container eco-fab-speed-dial-trigger.eco-spin .spin360{transform:rotate(360deg)}eco-fab-speed-dial .eco-fab-speed-dial-container{position:relative;display:flex;align-items:center;z-index:20}eco-fab-speed-dial .eco-fab-speed-dial-container eco-fab-speed-dial-trigger{pointer-events:auto;z-index:24}eco-fab-speed-dial .eco-fab-speed-dial-container eco-fab-speed-dial-trigger.eco-spin .spin180,eco-fab-speed-dial .eco-fab-speed-dial-container eco-fab-speed-dial-trigger.eco-spin .spin360{transition:.6s cubic-bezier(.4,0,.2,1)}eco-fab-speed-dial .eco-fab-speed-dial-container eco-fab-speed-dial-actions{display:flex;position:absolute;height:0;width:0}eco-fab-speed-dial.eco-fling .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{display:block;opacity:1;transition:.3s cubic-bezier(.55,0,.55,.2)}eco-fab-speed-dial.eco-scale .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{transform:scale(0);transition:.3s cubic-bezier(.55,0,.55,.2);transition-duration:.14286s}eco-fab-speed-dial.eco-down eco-fab-speed-dial-actions{bottom:2px;left:7px}eco-fab-speed-dial.eco-down .eco-fab-speed-dial-container{flex-direction:column}eco-fab-speed-dial.eco-down .eco-fab-speed-dial-container eco-fab-speed-dial-trigger{order:1}eco-fab-speed-dial.eco-down .eco-fab-speed-dial-container eco-fab-speed-dial-actions{flex-direction:column;order:2}eco-fab-speed-dial.eco-down .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{margin-top:10px}eco-fab-speed-dial.eco-up eco-fab-speed-dial-actions{top:2px;left:7px}eco-fab-speed-dial.eco-up .eco-fab-speed-dial-container{flex-direction:column}eco-fab-speed-dial.eco-up .eco-fab-speed-dial-container eco-fab-speed-dial-trigger{order:2}eco-fab-speed-dial.eco-up .eco-fab-speed-dial-container eco-fab-speed-dial-actions{flex-direction:column-reverse;order:1}eco-fab-speed-dial.eco-up .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{margin-bottom:10px}eco-fab-speed-dial.eco-left eco-fab-speed-dial-actions{top:7px;left:2px}eco-fab-speed-dial.eco-left .eco-fab-speed-dial-container{flex-direction:row}eco-fab-speed-dial.eco-left .eco-fab-speed-dial-container eco-fab-speed-dial-trigger{order:2}eco-fab-speed-dial.eco-left .eco-fab-speed-dial-container eco-fab-speed-dial-actions{flex-direction:row-reverse;order:1}eco-fab-speed-dial.eco-left .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{margin-right:10px}eco-fab-speed-dial.eco-right eco-fab-speed-dial-actions{top:7px;right:2px}eco-fab-speed-dial.eco-right .eco-fab-speed-dial-container{flex-direction:row}eco-fab-speed-dial.eco-right .eco-fab-speed-dial-container eco-fab-speed-dial-trigger{order:1}eco-fab-speed-dial.eco-right .eco-fab-speed-dial-container eco-fab-speed-dial-actions{flex-direction:row;order:2}eco-fab-speed-dial.eco-right .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{margin-left:10px}"]}]}],t.ctorParameters=function(){return[{type:n.ElementRef},{type:n.Renderer2},{type:Document,decorators:[{type:n.Inject,args:[r.DOCUMENT]}]}]},t.propDecorators={fixed:[{type:n.Input}],open:[{type:n.HostBinding,args:["class.eco-opened"]},{type:n.Input}],direction:[{type:n.Input}],animationMode:[{type:n.Input}],openChange:[{type:n.Output}],_childActions:[{type:n.ContentChild,args:[s,{static:!1}]}],_onClick:[{type:n.HostListener,args:["click"]}]},t}(),d=function(){function t(t){this.spin=!1,this._parent=t.get(u)}return Object.defineProperty(t.prototype,"sp",{get:function(){return this.spin},enumerable:!0,configurable:!0}),t.prototype._onClick=function(t){this._parent.fixed||(this._parent.toggle(),t.stopPropagation())},t.decorators=[{type:n.Component,args:[{selector:"eco-fab-speed-dial-trigger",template:'\n        <ng-content select="[mat-fab]"></ng-content>'}]}],t.ctorParameters=function(){return[{type:n.Injector}]},t.propDecorators={sp:[{type:n.HostBinding,args:["class.eco-spin"]}],spin:[{type:n.Input}],_onClick:[{type:n.HostListener,args:["click",["$event"]]}]},t}(),f=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{imports:[r.CommonModule],declarations:[s,u,d],exports:[s,u,d]}]}],t}()},naO8:function(t,a,e){"use strict";e.r(a),a.default='<mat-card class="mat-elevation-z4 fullWidth">\n    <mat-card-content>\n        <mat-form-field class="fullWidth" *ngIf="esMovil">\n            <input matInput (keyup)="applyFilter()" (change)="applyFilter($event.target.value)" placeholder="Buscar..." [(ngModel)]="txtFiltro" [ngModelOptions]="{standalone: true}">\n        </mat-form-field>\n        <mat-form-field class="fullWidth" *ngIf="!esMovil">\n            <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="alphanumeric" ng-virtual-keyboard-placeholder="Buscar..." (keyup)="applyFilter()" placeholder="Buscar..." [(ngModel)]="txtFiltro" [ngModelOptions]="{standalone: true}">\n        </mat-form-field>\n        <mat-nav-list>\n            <mat-list-item *ngFor="let element of lstFacturasPaged" (click)="getFactura(element)">\n                <mat-icon mat-list-icon>receipt</mat-icon>\n                <h5 mat-line>{{element.serie_factura}}&nbsp;{{element.numero_factura}}</h5>\n                <span mat-line>Fecha: {{element.fecha_factura | date:\'dd/MM/yyyy\'}}</span>\n                <span mat-line>Cliente: {{element.cliente.nombre}}</span>\n                <span mat-line>NIT: {{element.cliente.nit}}</span>\n            </mat-list-item>\n        </mat-nav-list>\n        <mat-paginator [length]="length" [pageSize]="pageSize" [pageSizeOptions]="pageSizeOptions" (page)="pageChange($event)" showFirstLastButtons>\n        </mat-paginator>        \n        \x3c!--\n        <table mat-table [dataSource]="dataSource">\n            <ng-container matColumnDef="factura">                \n                <td mat-cell *matCellDef="let element" (click)="getFactura(element)">\n                    <mat-list>\n                        <mat-list-item>\n                            <mat-icon mat-list-icon>receipt</mat-icon>\n                            <h5 mat-line>{{element.serie_factura}}&nbsp;{{element.numero_factura}}</h5>\n                            <span mat-line>Fecha: {{element.fecha_factura | date:\'dd/MM/yyyy\'}}</span>\n                            <span mat-line>Cliente: {{element.cliente.nombre}}</span>\n                            <span mat-line>NIT: {{element.cliente.nit}}</span>\n                            <button mat-icon-button type="button" color="accent">\n                                <mat-icon>arrow_right_alt</mat-icon>\n                            </button>\n                        </mat-list-item>\n                    </mat-list>\n                </td>\n            </ng-container>            \n            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>\n        </table>\n        <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>\n        --\x3e\n    </mat-card-content>\n</mat-card>\n'},qodq:function(t,a,e){"use strict";e.r(a);var n=e("mrSG"),r=e("CcnG"),o=e("Ip0R"),i=e("t/Na"),c=e("gIcY"),l=e("PCNd"),s=e("jkDv"),u=e("0/Q6"),d=e("SMsm"),f=e("seP3"),p=e("b716"),m=e("FVSy"),h=e("LC5p"),g=e("La40"),b=e("BHnd"),v=e("uGex"),F=e("de3e"),y=e("UodH"),_=e("vARd"),D=e("8mMr"),x=e("mVsa"),k=e("r43C"),P=e("4epT"),C=e("o3x0"),S=e("Nsh5"),I=e("vnWn"),w=e("k5u/"),O=e("drcI"),E=e("ZYCi"),j=e("0T/Q"),M=function(){function t(){var t=this;this.setFormaPago=function(a){return t.formaPago=a},this.refreshFormaPagoList=function(){return t.lstFormaPagoComponent.loadFormasPago()},this.formaPago={forma_pago:null,descripcion:null,activo:1}}return t.prototype.ngOnInit=function(){},n.c([Object(r.ViewChild)("lstFormaPago",{static:!1})],t.prototype,"lstFormaPagoComponent",void 0),t=n.c([Object(r.Component)({selector:"app-forma-pago",template:n.f(e("fraS")).default,styles:[n.f(e("XaST")).default]})],t)}(),z=e("sKxO"),T=e("wd/R"),A=function(){function t(){var t=this;this.setFactura=function(a){t.factura={factura:a.factura,factura_serie:a.factura_serie.factura_serie,cliente:a.cliente.cliente,fecha_factura:a.fecha_factura,moneda:a.moneda.moneda,exenta:a.exenta,notas:a.notas,usuario:a.usuario.usuario,numero_factura:a.numero_factura,serie_factura:a.serie_factura,fel_uuid:a.fel_uuid,fel_uuid_anulacion:a.fel_uuid_anulacion,certificador_fel:a.certificador_fel},t.frmFactura.loadDetalleFactura(+t.factura.factura),t.frmFactura.resetDetalleFactura()},this.refreshFacturaList=function(){return t.lstFacturaComponent.loadFacturas()},this.factura={factura:null,factura_serie:null,cliente:null,fecha_factura:T().format(z.a.dbDateFormat),moneda:null,exenta:0,notas:null}}return t.prototype.ngOnInit=function(){},n.c([Object(r.ViewChild)("lstFacturaManual",{static:!1})],t.prototype,"lstFacturaComponent",void 0),n.c([Object(r.ViewChild)("frmFacturaManual",{static:!1})],t.prototype,"frmFactura",void 0),t=n.c([Object(r.Component)({selector:"app-factura-manual",template:n.f(e("Ff2I")).default,styles:[n.f(e("rgcp")).default]})],t)}(),H=[{path:"fpago",component:M,canActivate:[j.a]},{path:"factman",component:A,canActivate:[j.a]},{path:"**",redirectTo:"/admin/dashboard",pathMatch:"full"}],R=function(){function t(){}return t=n.c([Object(r.NgModule)({imports:[E.b.forChild(H)],exports:[E.b]})],t)}(),N=e("fn6i"),V=e("KZK3"),B=function(){function t(t){var a=this;this.formaPagoSrvc=t,this.getFormaPagoEv=new r.EventEmitter,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadFormasPago=function(){a.formaPagoSrvc.buscar().subscribe((function(t){t&&t.length>0&&(a.lstFormasPago=t,a.applyFilter())}))},this.getFormaPago=function(t){a.getFormaPagoEv.emit(t)},this.pageChange=function(t){a.pageSize=t.pageSize,a.pageIndex=t.pageIndex,a.applyFilter()}}return t.prototype.ngOnInit=function(){this.loadFormasPago()},t.prototype.applyFilter=function(){if(this.txtFiltro.length>0){var t=Object(z.b)(this.lstFormasPago,this.txtFiltro);this.length=t.length,this.lstFormasPagoPaged=Object(z.c)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstFormasPago.length,this.lstFormasPagoPaged=Object(z.c)(this.lstFormasPago,this.pageSize,this.pageIndex+1)},t.ctorParameters=function(){return[{type:V.a}]},n.c([Object(r.Output)()],t.prototype,"getFormaPagoEv",void 0),t=n.c([Object(r.Component)({selector:"app-lista-forma-pago",template:n.f(e("VLua")).default,styles:[n.f(e("VHZL")).default]})],t)}(),W=e("FY0D"),U=function(){function t(t,a,e){var n=this;this._snackBar=t,this.formaPagoSrvc=a,this.ls=e,this.formaPagoSavedEv=new r.EventEmitter,this.esMovil=!1,this.resetFormaPago=function(){return n.formaPago={forma_pago:null,descripcion:null,activo:1}},this.onSubmit=function(){n.formaPagoSrvc.save(n.formaPago).subscribe((function(t){t.exito&&(n.formaPagoSavedEv.emit(),n.resetFormaPago(),n._snackBar.open("Forma de pago agregada...","Forma de pago",{duration:3e3}))}))}}return t.prototype.ngOnInit=function(){this.esMovil=this.ls.get(z.a.usrTokenVar).enmovil||!1},t.ctorParameters=function(){return[{type:_.a},{type:V.a},{type:W.a}]},n.c([Object(r.Input)()],t.prototype,"formaPago",void 0),n.c([Object(r.Output)()],t.prototype,"formaPagoSavedEv",void 0),t=n.c([Object(r.Component)({selector:"app-form-forma-pago",template:n.f(e("Dm0Z")).default,styles:[n.f(e("Ma74")).default]})],t)}(),L=e("KFbY"),q=function(){function t(t,a){var e=this;this.facturaSrvc=t,this.ls=a,this.esMovil=!1,this.getFacturaEv=new r.EventEmitter,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadFacturas=function(){e.facturaSrvc.get().subscribe((function(t){t&&t.length>0&&(e.lstFacturas=t,e.applyFilter())}))},this.getFactura=function(t){e.getFacturaEv.emit(t)},this.pageChange=function(t){e.pageSize=t.pageSize,e.pageIndex=t.pageIndex,e.applyFilter()}}return t.prototype.ngOnInit=function(){this.esMovil=this.ls.get(z.a.usrTokenVar).enmovil||!1,this.loadFacturas()},t.prototype.applyFilter=function(){if(this.txtFiltro.length>0){var t=Object(z.b)(this.lstFacturas,this.txtFiltro);this.length=t.length,this.lstFacturasPaged=Object(z.c)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstFacturas.length,this.lstFacturasPaged=Object(z.c)(this.lstFacturas,this.pageSize,this.pageIndex+1)},t.ctorParameters=function(){return[{type:L.a},{type:W.a}]},n.c([Object(r.Output)()],t.prototype,"getFacturaEv",void 0),t=n.c([Object(r.Component)({selector:"app-lista-factura-manual",template:n.f(e("naO8")).default,styles:[n.f(e("V+uF")).default]})],t)}(),Z=e("IJgu"),G=e("92vz"),K=e("R5jZ"),Y=e("5tAl"),J=e("9Z1F"),$=e("Qyje"),Q=function(){function t(t,a){this.http=t,this.ls=a,this.usrToken=null,this.srvcErrHndl=new K.a,this.usrToken=this.ls.get(z.a.usrTokenVar)?this.ls.get(z.a.usrTokenVar).token:null}return t.prototype.get=function(t){void 0===t&&(t={});var a={headers:new i.c({Authorization:this.usrToken})};return this.http.get(z.a.urlCatalogos+"/get_factura_serie?"+$.stringify(t),a).pipe(Object(Y.a)(z.a.reintentos),Object(J.a)(this.srvcErrHndl.errorHandler))},t.ctorParameters=function(){return[{type:i.a},{type:W.a}]},t=n.c([Object(r.Injectable)({providedIn:"root"})],t)}(),X=e("M8s9"),tt=function(){function t(t,a){this.http=t,this.ls=a,this.usrToken=null,this.srvcErrHndl=new K.a,this.usrToken=this.ls.get(z.a.usrTokenVar)?this.ls.get(z.a.usrTokenVar).token:null}return t.prototype.get=function(t){void 0===t&&(t={});var a={headers:new i.c({Authorization:this.usrToken})};return this.http.get(z.a.urlCatalogos+"/get_moneda?"+$.stringify(t),a).pipe(Object(Y.a)(z.a.reintentos),Object(J.a)(this.srvcErrHndl.errorHandler))},t.ctorParameters=function(){return[{type:i.a},{type:W.a}]},t=n.c([Object(r.Injectable)({providedIn:"root"})],t)}(),at=e("NGYs"),et=function(){function t(t,a,e,n,o,i,c,l,s){var u=this;this._snackBar=t,this.dialog=a,this.facturaSrvc=e,this.facturaSerieSrvc=n,this.clienteSrvc=o,this.monedaSrvc=i,this.articuloSrvc=c,this.socket=l,this.ls=s,this.facturaSavedEv=new r.EventEmitter,this.showForm=!0,this.showFormDetalle=!0,this.facturaSeries=[],this.clientes=[],this.monedas=[],this.detallesFactura=[],this.articulos=[],this.displayedColumns=["articulo","cantidad","precio_unitario","total","editItem"],this.esMovil=!1,this.refacturacion=!1,this.loadFacturaSeries=function(){u.facturaSerieSrvc.get().subscribe((function(t){t&&(u.facturaSeries=t)}))},this.loadClientes=function(){u.clienteSrvc.get().subscribe((function(t){t&&(u.clientes=t)}))},this.loadMonedas=function(){u.monedaSrvc.get().subscribe((function(t){t&&(u.monedas=t)}))},this.refacturar=function(){u.factura={factura:u.factura.factura,factura_serie:null,cliente:null,fecha_factura:T().format(z.a.dbDateFormat),moneda:null,exenta:0,notas:null,fel_uuid:null,fel_uuid_anulacion:null},u.refacturacion=!0},this.resetFactura=function(){u.factura={factura:null,factura_serie:null,cliente:null,fecha_factura:T().format(z.a.dbDateFormat),moneda:null,exenta:0,notas:null,fel_uuid:null,fel_uuid_anulacion:null},u.resetDetalleFactura(),u.detallesFactura=[]},this.onSubmit=function(){u.refacturacion?u.facturaSrvc.refacturar(u.factura).subscribe((function(t){t.exito&&(u.facturaSavedEv.emit(),u.resetFactura(),u.refacturacion=!1,u.factura={factura:t.factura.factura,factura_serie:t.factura.factura_serie,cliente:t.factura.cliente,fecha_factura:t.factura.fecha_factura,moneda:t.factura.moneda,exenta:+t.factura.exenta,notas:t.factura.notas,fel_uuid:t.factura.fel_uuid},u._snackBar.open("Factura manual agregada...","Factura",{duration:3e3}))})):u.facturaSrvc.save(u.factura).subscribe((function(t){t.exito&&(u.facturaSavedEv.emit(),u.resetFactura(),u.factura={factura:t.factura.factura,factura_serie:t.factura.factura_serie,cliente:t.factura.cliente,fecha_factura:t.factura.fecha_factura,moneda:t.factura.moneda,exenta:+t.factura.exenta,notas:t.factura.notas,fel_uuid:t.factura.fel_uuid},u._snackBar.open("Factura manual agregada...","Factura",{duration:3e3}))}))},this.firmarFactura=function(){u.dialog.open(Z.a,{maxWidth:"400px",data:new Z.b("Firmar factura","Luego de firmar la factura no podrá hacer ninguna modificación. ¿Desea continuar?","Sí","No")}).afterClosed().subscribe((function(t){t&&u.facturaSrvc.firmar(+u.factura.factura).subscribe((function(t){t.exito?(u.factura.numero_factura=t.factura.numero_factura,u.factura.serie_factura=t.factura.serie_factura,u.factura.certificador_fel=t.factura.certificador_fel,u.factura.fel_uuid=t.factura.fel_uuid,u.facturaSavedEv.emit(),u._snackBar.open("Factura firmada con éxito...","Firmar",{duration:3e3})):u._snackBar.open("ERROR: "+t.mensaje,"Firmar",{duration:3e3})}))}))},this.procesaDetalleFactura=function(t){var a=[];return t.forEach((function(t){return a.push({Cantidad:+t.cantidad,Descripcion:t.articulo.descripcion,Total:+t.total})})),a},this.getTotalDetalle=function(t){var a=0;return t.forEach((function(t){return a+=+t.total})),a},this.imprimirFactura=function(){u.facturaSrvc.imprimir(+u.factura.factura).subscribe((function(t){t.factura?(u.socket.emit("print:factura",""+JSON.stringify({NombreEmpresa:t.factura.empresa.nombre,NitEmpresa:t.factura.empresa.nit,SedeEmpresa:t.factura.sedeFactura.nombre,DireccionEmpresa:t.factura.empresa.direccion,Fecha:T(t.factura.fecha_factura).format(z.a.dateFormat),Nit:t.factura.receptor.nit,Nombre:t.factura.receptor.nombre,Direccion:t.factura.receptor.direccion,Serie:t.factura.serie_factura,Numero:t.factura.numero_factura,Total:u.getTotalDetalle(t.factura.detalle),NoAutorizacion:t.factura.fel_uuid,NombreCertificador:t.factura.certificador_fel.nombre,NitCertificador:t.factura.certificador_fel.nit,FechaDeAutorizacion:t.factura.fecha_autorizacion,NoOrdenEnLinea:"",FormaDePago:"",DetalleFactura:u.procesaDetalleFactura(t.factura.detalle)})),u._snackBar.open("Imprimiendo factura "+u.factura.serie_factura+"-"+u.factura.numero_factura,"Impresión",{duration:3e3})):u._snackBar.open("ERROR: "+t.mensaje,"Impresión",{duration:3e3})}))},this.anularFactura=function(){u.dialog.open(Z.a,{maxWidth:"400px",data:new Z.b("Anular factura","Luego de anular la factura no podrá hacer ninguna modificación. ¿Desea continuar?","Sí","No")}).afterClosed().subscribe((function(t){t&&u.facturaSrvc.anular(+u.factura.factura).subscribe((function(t){t.exito?(u.factura.fel_uuid_anulacion=t.factura.fel_uuid_anulacion,u.facturaSavedEv.emit(),u._snackBar.open("Factura anulada con éxito...","Firmar",{duration:3e3})):u._snackBar.open("ERROR: "+t.mensaje,"Firmar",{duration:1e4})}))}))},this.loadArticulos=function(){u.articuloSrvc.getArticulos().subscribe((function(t){t&&(u.articulos=t)}))},this.setPrecioUnitario=function(t){var a=u.articulos.findIndex((function(a){return+a.articulo==+t.value}));a>-1&&(u.detalleFactura.precio_unitario=+u.articulos[a].precio,u.detalleFactura.total=+u.detalleFactura.precio_unitario*+u.detalleFactura.cantidad)},this.resetDetalleFactura=function(){return u.detalleFactura={detalle_factura:null,factura:u.factura.factura||0,articulo:null,cantidad:1,precio_unitario:null,total:null}},this.loadDetalleFactura=function(t){void 0===t&&(t=+u.factura.factura),u.facturaSrvc.getDetalle(t,{factura:t}).subscribe((function(t){t&&(u.detallesFactura=t,u.updateTableDataSource())}))},this.getDetalleFactura=function(t,a){void 0===t&&(t=+u.factura.factura),u.facturaSrvc.getDetalle(t,{detalle_factura:a}).subscribe((function(t){t&&(u.detalleFactura={detalle_factura:t[0].detalle_factura,factura:t[0].factura,articulo:t[0].articulo.articulo,cantidad:+t[0].cantidad,precio_unitario:+t[0].precio_unitario,total:+t[0].total},u.showFormDetalle=!0)}))},this.onSubmitDetail=function(){u.detalleFactura.factura=u.factura.factura,u.detalleFactura.total=+u.detalleFactura.precio_unitario*+u.detalleFactura.cantidad,u.facturaSrvc.saveDetalle(u.detalleFactura).subscribe((function(t){t&&(u.loadDetalleFactura(),u.resetDetalleFactura())}))},this.updateTableDataSource=function(){return u.dataSource=new b.a(u.detallesFactura)},this.representacionGrafica=function(){window.open(""+z.a.infilePdfUrl+u.factura.fel_uuid,"winFactPdf","height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no")}}return t.prototype.ngOnInit=function(){this.esMovil=this.ls.get(z.a.usrTokenVar).enmovil||!1,this.refacturacion=!1,this.resetFactura(),this.loadFacturaSeries(),this.loadClientes(),this.loadMonedas(),this.loadArticulos(),this.ls.get(z.a.usrTokenVar).sede_uuid&&this.socket.emit("joinRestaurant",this.ls.get(z.a.usrTokenVar).sede_uuid)},t.ctorParameters=function(){return[{type:_.a},{type:C.b},{type:L.a},{type:Q},{type:X.a},{type:tt},{type:at.a},{type:G.a},{type:W.a}]},n.c([Object(r.Input)()],t.prototype,"factura",void 0),n.c([Object(r.Output)()],t.prototype,"facturaSavedEv",void 0),t=n.c([Object(r.Component)({selector:"app-form-factura-manual",template:n.f(e("ElJa")).default,styles:[n.f(e("aIz7")).default]})],t)}();e.d(a,"PosModule",(function(){return nt}));var nt=function(){function t(){}return t=n.c([Object(r.NgModule)({declarations:[N.a,M,B,U,A,q,et],entryComponents:[N.a],imports:[o.CommonModule,R,i.b,c.FormsModule,l.a,s.AdminModule,u.a,d.a,f.c,p.b,m.a,h.a,g.a,b.b,v.a,F.a,y.b,_.b,D.a,x.a,k.a,P.b,C.c,I.a,S.a,w.a,O.NgVirtualKeyboardModule],exports:[N.a]})],t)}()},rgcp:function(t,a,e){"use strict";e.r(a),a.default=""}}]);