(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{k2MF:function(t,e,a){"use strict";a.r(e),a.d(e,"RestauranteModule",function(){return xr});var i=a("ofXK"),n=a("tk/3"),o=a("3Pt+"),s=a("PCNd"),r=a("vtFA"),c=a("qodq"),l=a("jkDv"),d=a("YUcS"),u=a("MutI"),h=a("NFeN"),b=a("kmnG"),m=a("qFsG"),p=a("Wp6s"),g=a("f0Cb"),f=a("wZkO"),C=a("+0xr"),S=a("d3UM"),v=a("bSwM"),_=a("bTqV"),T=a("dNgK"),D=a("/t3+"),w=a("STbY"),E=a("zkoq"),x=a("M9IT"),P=a("0IaG"),k=a("XhcP"),O=a("u47x"),y=a("rDax"),M=a("+rOU"),R=a("fXoL"),I=a("vxfF"),F=a("FKr1"),A=a("XNiG"),N=a("quSY"),U=a("VRyK"),j=(a("LRne"),a("FtGj")),$=a("IzEk"),B=a("JX91"),L=(a("pLZG"),a("8LU1")),H=a("R0Ic"),z=a("cH1L");let q=(()=>{class t{constructor(){this.changes=new A.a,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 20 years",this.nextMultiYearLabel="Next 20 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(t,e){return`${t} \u2013 ${e}`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(R.Jb)({factory:function(){return new t},token:t,providedIn:"root"}),t})();const V={provide:new R.s("mat-datepicker-scroll-strategy"),deps:[y.c],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let W=(()=>{class t{}return t.\u0275mod=R.Lb({type:t}),t.\u0275inj=R.Kb({factory:function(e){return new(e||t)},providers:[q,V],imports:[[i.c,_.b,P.e,y.f,O.a,M.f,F.g],I.b]}),t})();var G=a("nLfN"),Q=a("HDdC"),J=a("D0XW"),X=a("Y7HM");function Z(t){const{subscriber:e,counter:a,period:i}=t;e.next(a),this.schedule({subscriber:e,counter:a+1,period:i},i)}var K=a("eNwd"),Y=a("1G5W"),tt=a("lJxs"),et=a("vkgz"),at=a("eIep");function it(t,e){for(let a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t}function nt(t,e){const a=e?"":"none";it(t.style,{touchAction:e?"":"none",webkitUserDrag:e?"":"none",webkitTapHighlightColor:e?"":"transparent",userSelect:a,msUserSelect:a,webkitUserSelect:a,MozUserSelect:a})}function ot(t,e){const a=t.style;a.position=e?"":"fixed",a.top=a.opacity=e?"":"0",a.left=e?"":"-999em"}function st(t){const e=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*e}function rt(t,e){return t.getPropertyValue(e).split(",").map(t=>t.trim())}function ct(t){const e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}function lt(t,e,a){const{top:i,bottom:n,left:o,right:s}=t;return a>=i&&a<=n&&e>=o&&e<=s}function dt(t,e,a){t.top+=e,t.bottom=t.top+t.height,t.left+=a,t.right=t.left+t.width}function ut(t,e,a,i){const{top:n,right:o,bottom:s,left:r,width:c,height:l}=t,d=c*e,u=l*e;return i>n-u&&i<s+u&&a>r-d&&a<o+d}class ht{constructor(t,e){this._document=t,this._viewportRuler=e,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),t.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:ct(t)})})}handleScroll(t){const e=t.target,a=this.positions.get(e);if(!a)return null;const i=e===this._document?e.documentElement:e,n=a.scrollPosition;let o,s;if(e===this._document){const t=this._viewportRuler.getViewportScrollPosition();o=t.top,s=t.left}else o=e.scrollTop,s=e.scrollLeft;const r=n.top-o,c=n.left-s;return this.positions.forEach((t,a)=>{t.clientRect&&e!==a&&i.contains(a)&&dt(t.clientRect,r,c)}),n.top=o,n.left=s,{top:r,left:c}}}function bt(t){const e=t.cloneNode(!0),a=e.querySelectorAll("[id]"),i=t.nodeName.toLowerCase();e.removeAttribute("id");for(let n=0;n<a.length;n++)a[n].removeAttribute("id");return"canvas"===i?ft(t,e):"input"!==i&&"select"!==i&&"textarea"!==i||gt(t,e),mt("canvas",t,e,ft),mt("input, textarea, select",t,e,gt),e}function mt(t,e,a,i){const n=e.querySelectorAll(t);if(n.length){const e=a.querySelectorAll(t);for(let t=0;t<n.length;t++)i(n[t],e[t])}}let pt=0;function gt(t,e){"file"!==e.type&&(e.value=t.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${pt++}`)}function ft(t,e){const a=e.getContext("2d");if(a)try{a.drawImage(t,0,0)}catch(i){}}const Ct=Object(G.f)({passive:!0}),St=Object(G.f)({passive:!1});class vt{constructor(t,e,a,i,n,o){this._config=e,this._document=a,this._ngZone=i,this._viewportRuler=n,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new A.a,this._pointerMoveSubscription=N.a.EMPTY,this._pointerUpSubscription=N.a.EMPTY,this._scrollSubscription=N.a.EMPTY,this._resizeSubscription=N.a.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new A.a,this.started=new A.a,this.released=new A.a,this.ended=new A.a,this.entered=new A.a,this.exited=new A.a,this.dropped=new A.a,this.moved=this._moveEvents,this._pointerDown=t=>{if(this.beforeStarted.next(),this._handles.length){const e=this._handles.find(e=>{const a=t.target;return!!a&&(a===e||e.contains(a))});!e||this._disabledHandles.has(e)||this.disabled||this._initializeDragSequence(e,t)}else this.disabled||this._initializeDragSequence(this._rootElement,t)},this._pointerMove=t=>{const e=this._getPointerPositionOnPage(t);if(!this._hasStartedDragging){if(Math.abs(e.x-this._pickupPositionOnPage.x)+Math.abs(e.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const e=Date.now()>=this._dragStartTime+this._getDragStartDelay(t),a=this._dropContainer;if(!e)return void this._endDragSequence(t);a&&(a.isDragging()||a.isReceiving())||(this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(t)))}return}this._boundaryElement&&(this._previewRect&&(this._previewRect.width||this._previewRect.height)||(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect())),t.preventDefault();const a=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._lastKnownPointerPosition=e,this._updatePointerDirectionDelta(a),this._dropContainer)this._updateActiveDropContainer(a,e);else{const t=this._activeTransform;t.x=a.x-this._pickupPositionOnPage.x+this._passiveTransform.x,t.y=a.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(t.x,t.y),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&this._rootElement.setAttribute("transform",`translate(${t.x} ${t.y})`)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:a,event:t,distance:this._getDragDistance(a),delta:this._pointerDirectionDelta})})},this._pointerUp=t=>{this._endDragSequence(t)},this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new ht(a,n),o.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const e=Object(L.c)(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>nt(t,e)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(t=>Object(L.e)(t)),this._handles.forEach(t=>nt(t,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(t=>{this._handles.indexOf(t)>-1&&e.add(t)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const e=Object(L.e)(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,St),e.addEventListener("touchstart",this._pointerDown,Ct)}),this._initialTransform=void 0,this._rootElement=e),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?Object(L.e)(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&Dt(this._rootElement),Dt(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),nt(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),nt(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){const t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}_sortFromLastPointerPosition(){const t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview&&Dt(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder&&Dt(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging&&(this.released.next({source:this}),this._dropContainer?(this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)})):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(this._getPointerPositionOnPage(t))})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this))))}_startDragSequence(t){wt(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const t=this._rootElement,a=t.parentNode,i=this._preview=this._createPreviewElement(),n=this._placeholder=this._createPlaceholderElement(),o=this._anchor=this._anchor||this._document.createComment(""),s=this._getShadowRoot();a.insertBefore(o,t),ot(t,!1),this._document.body.appendChild(a.replaceChild(n,t)),function(t,e){return e||t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement||t.body}(this._document,s).appendChild(i),this.started.next({source:this}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();const a=this.isDragging(),i=wt(e),n=!i&&0!==e.button,o=this._rootElement,s=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(e.target&&e.target.draggable&&"mousedown"===e.type&&e.preventDefault(),a||n||s)return;this._handles.length&&(this._rootElementTapHighlight=o.style.webkitTapHighlightColor||"",o.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scroll.subscribe(t=>{this._updateOnScroll(t)}),this._boundaryElement&&(this._boundaryRect=ct(this._boundaryElement));const r=this._previewTemplate;this._pickupPositionInElement=r&&r.template&&!r.matchSize?{x:0,y:0}:this._getPointerPositionInElement(t,e);const c=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:c.x,y:c.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){ot(this._rootElement,!0),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(()=>{const e=this._dropContainer,a=e.getItemIndex(this),i=this._getPointerPositionOnPage(t),n=this._getDragDistance(this._getPointerPositionOnPage(t)),o=e._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:n}),this.dropped.next({item:this,currentIndex:a,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:n}),e.drop(this,a,this._initialIndex,this._initialContainer,o,n),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:a,y:i}){let n=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!n&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(n=this._initialContainer),n&&n!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=n,this._dropContainer.enter(this,t,e,n===this._initialContainer&&n.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:n,currentIndex:n.getItemIndex(this)})}),this._dropContainer._startScrollingIfNecessary(a,i),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this._preview.style.transform=_t(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y)}_createPreviewElement(){const t=this._previewTemplate,e=this.previewClass,a=t?t.template:null;let i;if(a&&t){const e=t.matchSize?this._rootElement.getBoundingClientRect():null,n=t.viewContainer.createEmbeddedView(a,t.context);n.detectChanges(),i=Et(n,this._document),this._previewRef=n,t.matchSize?xt(i,e):i.style.transform=_t(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const t=this._rootElement;i=bt(t),xt(i,t.getBoundingClientRect())}return it(i.style,{pointerEvents:"none",margin:"0",position:"fixed",top:"0",left:"0",zIndex:`${this._config.zIndex||1e3}`}),nt(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(t=>i.classList.add(t)):i.classList.add(e)),i}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=_t(t.left,t.top);const e=function(t){const e=getComputedStyle(t),a=rt(e,"transition-property"),i=a.find(t=>"transform"===t||"all"===t);if(!i)return 0;const n=a.indexOf(i),o=rt(e,"transition-duration"),s=rt(e,"transition-delay");return st(o[n])+st(s[n])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(t=>{const a=e=>{(!e||e.target===this._preview&&"transform"===e.propertyName)&&(this._preview.removeEventListener("transitionend",a),t(),clearTimeout(i))},i=setTimeout(a,1.5*e);this._preview.addEventListener("transitionend",a)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,e=t?t.template:null;let a;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),a=Et(this._placeholderRef,this._document)):a=bt(this._rootElement),a.classList.add("cdk-drag-placeholder"),a}_getPointerPositionInElement(t,e){const a=this._rootElement.getBoundingClientRect(),i=t===this._rootElement?null:t,n=i?i.getBoundingClientRect():a,o=wt(e)?e.targetTouches[0]:e,s=this._getViewportScrollPosition();return{x:n.left-a.left+(o.pageX-n.left-s.left),y:n.top-a.top+(o.pageY-n.top-s.top)}}_getPointerPositionOnPage(t){const e=this._getViewportScrollPosition(),a=wt(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,i=a.pageX-e.left,n=a.pageY-e.top;if(this._ownerSVGElement){const t=this._ownerSVGElement.getScreenCTM();if(t){const e=this._ownerSVGElement.createSVGPoint();return e.x=i,e.y=n,e.matrixTransform(t.inverse())}}return{x:i,y:n}}_getConstrainedPointerPosition(t){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:a,y:i}=this.constrainPosition?this.constrainPosition(t,this):t;if("x"===this.lockAxis||"x"===e?i=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==e||(a=this._pickupPositionOnPage.x),this._boundaryRect){const{x:t,y:e}=this._pickupPositionInElement,n=this._boundaryRect,o=this._previewRect,s=n.top+e,r=n.bottom-(o.height-e);a=Tt(a,n.left+t,n.right-(o.width-t)),i=Tt(i,s,r)}return{x:a,y:i}}_updatePointerDirectionDelta(t){const{x:e,y:a}=t,i=this._pointerDirectionDelta,n=this._pointerPositionAtLastDirectionChange,o=Math.abs(e-n.x),s=Math.abs(a-n.y);return o>this._config.pointerDirectionChangeThreshold&&(i.x=e>n.x?1:-1,n.x=e),s>this._config.pointerDirectionChangeThreshold&&(i.y=a>n.y?1:-1,n.y=a),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,nt(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,St),t.removeEventListener("touchstart",this._pointerDown,Ct)}_applyRootElementTransform(t,e){const a=_t(t,e);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?a+" "+this._initialTransform:a}_getDragDistance(t){const e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(0===t&&0===e||this.isDragging()||!this._boundaryElement)return;const a=this._boundaryElement.getBoundingClientRect(),i=this._rootElement.getBoundingClientRect();if(0===a.width&&0===a.height||0===i.width&&0===i.height)return;const n=a.left-i.left,o=i.right-a.right,s=a.top-i.top,r=i.bottom-a.bottom;a.width>i.width?(n>0&&(t+=n),o>0&&(t-=o)):t=0,a.height>i.height?(s>0&&(e+=s),r>0&&(e-=r)):e=0,t===this._passiveTransform.x&&e===this._passiveTransform.y||this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){const e=this.dragStartDelay;return"number"==typeof e?e:wt(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){const e=this._parentPositions.handleScroll(t);if(e){const a=t.target;this._boundaryRect&&(a===this._document||a!==this._boundaryElement&&a.contains(this._boundaryElement))&&dt(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){const t=this._parentPositions.positions.get(this._document);return t?t.scrollPosition:this._viewportRuler.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=Object(G.c)(this._rootElement)),this._cachedShadowRoot}}function _t(t,e){return`translate3d(${Math.round(t)}px, ${Math.round(e)}px, 0)`}function Tt(t,e,a){return Math.max(e,Math.min(a,t))}function Dt(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function wt(t){return"t"===t.type[0]}function Et(t,e){const a=t.rootNodes;if(1===a.length&&a[0].nodeType===e.ELEMENT_NODE)return a[0];const i=e.createElement("div");return a.forEach(t=>i.appendChild(t)),i}function xt(t,e){t.style.width=`${e.width}px`,t.style.height=`${e.height}px`,t.style.transform=_t(e.left,e.top)}function Pt(t,e){return Math.max(0,Math.min(e,t))}class kt{constructor(t,e,a,i,n){this._dragDropRegistry=e,this._ngZone=i,this._viewportRuler=n,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new A.a,this.entered=new A.a,this.exited=new A.a,this.dropped=new A.a,this.sorted=new A.a,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=N.a.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new A.a,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function(t=0,e=J.a){return(!Object(X.a)(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=J.a),new Q.a(a=>(a.add(e.schedule(Z,t,{subscriber:a,counter:0,period:t})),a))}(0,K.a).pipe(Object(Y.a)(this._stopScrollTimers)).subscribe(()=>{const t=this._scrollNode,e=this.autoScrollStep;1===this._verticalScrollDirection?yt(t,-e):2===this._verticalScrollDirection&&yt(t,e),1===this._horizontalScrollDirection?Mt(t,-e):2===this._horizontalScrollDirection&&Mt(t,e)})},this.element=Object(L.e)(t),this._document=a,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new ht(a,n)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,a,i){let n;this._draggingStarted(),null==i?(n=this.sortingDisabled?this._draggables.indexOf(t):-1,-1===n&&(n=this._getItemIndexFromPointerPosition(t,e,a))):n=i;const o=this._activeDraggables,s=o.indexOf(t),r=t.getPlaceholderElement();let c=o[n];if(c===t&&(c=o[n+1]),s>-1&&o.splice(s,1),c&&!this._dragDropRegistry.isDragging(c)){const e=c.getRootElement();e.parentElement.insertBefore(r,e),o.splice(n,0,t)}else if(this._shouldEnterAsFirstChild(e,a)){const e=o[0].getRootElement();e.parentNode.insertBefore(r,e),o.unshift(t)}else Object(L.e)(this.element).appendChild(r),o.push(t);r.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,a,i,n,o){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:a,container:this,previousContainer:i,isPointerOverContainer:n,distance:o})}withItems(t){const e=this._draggables;return this._draggables=t,t.forEach(t=>t._withDropContainer(this)),this.isDragging()&&(e.filter(t=>t.isDragging()).every(e=>-1===t.indexOf(e))?this._reset():this._cacheItems()),this}withDirection(t){return this._direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._orientation=t,this}withScrollableParents(t){const e=Object(L.e)(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e,...t]:t.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?Ot("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,e=>e.drag===t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,a,i){if(this.sortingDisabled||!this._clientRect||!ut(this._clientRect,.05,e,a))return;const n=this._itemPositions,o=this._getItemIndexFromPointerPosition(t,e,a,i);if(-1===o&&n.length>0)return;const s="horizontal"===this._orientation,r=Ot(n,e=>e.drag===t),c=n[o],l=c.clientRect,d=r>o?1:-1,u=this._getItemOffsetPx(n[r].clientRect,l,d),h=this._getSiblingOffsetPx(r,n,d),b=n.slice();!function(t,e,a){const i=Pt(e,t.length-1),n=Pt(a,t.length-1);if(i===n)return;const o=t[i],s=n<i?-1:1;for(let r=i;r!==n;r+=s)t[r]=t[r+s];t[n]=o}(n,r,o),this.sorted.next({previousIndex:r,currentIndex:o,container:this,item:t}),n.forEach((e,a)=>{if(b[a]===e)return;const i=e.drag===t,n=i?u:h,o=i?t.getPlaceholderElement():e.drag.getRootElement();e.offset+=n,s?(o.style.transform=`translate3d(${Math.round(e.offset)}px, 0, 0)`,dt(e.clientRect,0,n)):(o.style.transform=`translate3d(0, ${Math.round(e.offset)}px, 0)`,dt(e.clientRect,n,0))}),this._previousSwap.overlaps=lt(l,e,a),this._previousSwap.drag=c.drag,this._previousSwap.delta=s?i.x:i.y}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let a,i=0,n=0;if(this._parentPositions.positions.forEach((o,s)=>{s!==this._document&&o.clientRect&&!a&&ut(o.clientRect,.05,t,e)&&([i,n]=function(t,e,a,i){const n=Rt(e,i),o=It(e,a);let s=0,r=0;if(n){const e=t.scrollTop;1===n?e>0&&(s=1):t.scrollHeight-e>t.clientHeight&&(s=2)}if(o){const e=t.scrollLeft;1===o?e>0&&(r=1):t.scrollWidth-e>t.clientWidth&&(r=2)}return[s,r]}(s,o.clientRect,t,e),(i||n)&&(a=s))}),!i&&!n){const{width:o,height:s}=this._viewportRuler.getViewportSize(),r={width:o,height:s,top:0,right:o,bottom:s,left:0};i=Rt(r,e),n=It(r,t),a=window}!a||i===this._verticalScrollDirection&&n===this._horizontalScrollDirection&&a===this._scrollNode||(this._verticalScrollDirection=i,this._horizontalScrollDirection=n,this._scrollNode=a,(i||n)&&a?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const t=Object(L.e)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const t=Object(L.e)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}_cacheItemPositions(){const t="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(t=>{const e=t.getVisibleElement();return{drag:t,offset:0,clientRect:ct(e)}}).sort((e,a)=>t?e.clientRect.left-a.clientRect.left:e.clientRect.top-a.clientRect.top)}_reset(){this._isDragging=!1;const t=Object(L.e)(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(t=>{const e=t.getRootElement();e&&(e.style.transform="")}),this._siblings.forEach(t=>t._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(t,e,a){const i="horizontal"===this._orientation,n=e[t].clientRect,o=e[t+-1*a];let s=n[i?"width":"height"]*a;if(o){const t=i?"left":"top",e=i?"right":"bottom";-1===a?s-=o.clientRect[t]-n[e]:s+=n[t]-o.clientRect[e]}return s}_getItemOffsetPx(t,e,a){const i="horizontal"===this._orientation;let n=i?e.left-t.left:e.top-t.top;return-1===a&&(n+=i?e.width-t.width:e.height-t.height),n}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;const a=this._itemPositions,i="horizontal"===this._orientation;if(a[0].drag!==this._activeDraggables[0]){const n=a[a.length-1].clientRect;return i?t>=n.right:e>=n.bottom}{const n=a[0].clientRect;return i?t<=n.left:e<=n.top}}_getItemIndexFromPointerPosition(t,e,a,i){const n="horizontal"===this._orientation,o=Ot(this._itemPositions,({drag:o,clientRect:s},r,c)=>{if(o===t)return c.length<2;if(i){const t=n?i.x:i.y;if(o===this._previousSwap.drag&&this._previousSwap.overlaps&&t===this._previousSwap.delta)return!1}return n?e>=Math.floor(s.left)&&e<Math.floor(s.right):a>=Math.floor(s.top)&&a<Math.floor(s.bottom)});return-1!==o&&this.sortPredicate(o,t,this)?o:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(t,e){return null!=this._clientRect&&lt(this._clientRect,t,e)}_getSiblingContainerFromPosition(t,e,a){return this._siblings.find(i=>i._canReceive(t,e,a))}_canReceive(t,e,a){if(!this._clientRect||!lt(this._clientRect,e,a)||!this.enterPredicate(t,this))return!1;const i=this._getShadowRoot().elementFromPoint(e,a);if(!i)return!1;const n=Object(L.e)(this.element);return i===n||n.contains(i)}_startReceiving(t,e){const a=this._activeSiblings;!a.has(t)&&e.every(t=>this.enterPredicate(t,this)||this._draggables.indexOf(t)>-1)&&(a.add(t),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scroll.subscribe(t=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(t);e&&(this._itemPositions.forEach(({clientRect:t})=>{dt(t,e.top,e.left)}),this._itemPositions.forEach(({drag:t})=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const t=Object(G.c)(Object(L.e)(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const t=this._activeDraggables.filter(t=>t.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}}function Ot(t,e){for(let a=0;a<t.length;a++)if(e(t[a],a,t))return a;return-1}function yt(t,e){t===window?t.scrollBy(0,e):t.scrollTop+=e}function Mt(t,e){t===window?t.scrollBy(e,0):t.scrollLeft+=e}function Rt(t,e){const{top:a,bottom:i,height:n}=t,o=.05*n;return e>=a-o&&e<=a+o?1:e>=i-o&&e<=i+o?2:0}function It(t,e){const{left:a,right:i,width:n}=t,o=.05*n;return e>=a-o&&e<=a+o?1:e>=i-o&&e<=i+o?2:0}const Ft=Object(G.f)({passive:!1,capture:!0});let At=(()=>{class t{constructor(t,e){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=t=>t.isDragging(),this.pointerMove=new A.a,this.pointerUp=new A.a,this.scroll=new A.a,this._preventDefaultWhileDragging=t=>{this._activeDragInstances.length>0&&t.preventDefault()},this._persistentTouchmoveListener=t=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))},this._document=e}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Ft)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Ft)}startDragging(t,e){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const t=e.type.startsWith("touch");this._globalListeners.set(t?"touchend":"mouseup",{handler:t=>this.pointerUp.next(t),options:!0}).set("scroll",{handler:t=>this.scroll.next(t),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Ft}),t||this._globalListeners.set("mousemove",{handler:t=>this.pointerMove.next(t),options:Ft}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((t,e)=>{this._document.addEventListener(e,t.handler,t.options)})})}}stopDragging(t){const e=this._activeDragInstances.indexOf(t);e>-1&&(this._activeDragInstances.splice(e,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,e)=>{this._document.removeEventListener(e,t.handler,t.options)}),this._globalListeners.clear()}}return t.\u0275fac=function(e){return new(e||t)(R.Xb(R.B),R.Xb(i.d))},t.\u0275prov=Object(R.Jb)({factory:function(){return new t(Object(R.Xb)(R.B),Object(R.Xb)(i.d))},token:t,providedIn:"root"}),t})();const Nt={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let Ut=(()=>{class t{constructor(t,e,a,i){this._document=t,this._ngZone=e,this._viewportRuler=a,this._dragDropRegistry=i}createDrag(t,e=Nt){return new vt(t,e,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new kt(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return t.\u0275fac=function(e){return new(e||t)(R.Xb(i.d),R.Xb(R.B),R.Xb(I.e),R.Xb(At))},t.\u0275prov=Object(R.Jb)({factory:function(){return new t(Object(R.Xb)(i.d),Object(R.Xb)(R.B),Object(R.Xb)(I.e),Object(R.Xb)(At))},token:t,providedIn:"root"}),t})();const jt=new R.s("CDK_DRAG_PARENT"),$t=new R.s("CDK_DRAG_CONFIG"),Bt=new R.s("CdkDropList"),Lt=new R.s("CdkDragHandle"),Ht=new R.s("CdkDragPlaceholder"),zt=new R.s("CdkDragPreview");let qt=(()=>{class t{constructor(e,a,i,n,o,s,r,c,l,d,u){this.element=e,this.dropContainer=a,this._ngZone=n,this._viewContainerRef=o,this._dir=r,this._changeDetectorRef=l,this._selfHandle=d,this._parentDrag=u,this._destroyed=new A.a,this.started=new R.o,this.released=new R.o,this.ended=new R.o,this.entered=new R.o,this.exited=new R.o,this.dropped=new R.o,this.moved=new Q.a(t=>{const e=this._dragRef.moved.pipe(Object(tt.a)(t=>({source:this,pointerPosition:t.pointerPosition,event:t.event,delta:t.delta,distance:t.distance}))).subscribe(t);return()=>{e.unsubscribe()}}),this._dragRef=c.createDrag(e,{dragStartThreshold:s&&null!=s.dragStartThreshold?s.dragStartThreshold:5,pointerDirectionChangeThreshold:s&&null!=s.pointerDirectionChangeThreshold?s.pointerDirectionChangeThreshold:5,zIndex:null==s?void 0:s.zIndex}),this._dragRef.data=this,t._dragInstances.push(this),s&&this._assignDefaults(s),a&&(this._dragRef._withDropContainer(a._dropListRef),a.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=Object(L.c)(t),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.onStable.pipe(Object($.a)(1),Object(Y.a)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._handles.changes.pipe(Object(B.a)(this._handles),Object(et.a)(t=>{const e=t.filter(t=>t._parentDrag===this).map(t=>t.element);this._selfHandle&&this.rootElementSelector&&e.push(this.element),this._dragRef.withHandles(e)}),Object(at.a)(t=>Object(U.a)(...t.map(t=>t._stateChanges.pipe(Object(B.a)(t))))),Object(Y.a)(this._destroyed)).subscribe(t=>{const e=this._dragRef,a=t.element.nativeElement;t.disabled?e.disableHandle(a):e.enableHandle(a)}),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})}ngOnChanges(t){const e=t.rootElementSelector,a=t.freeDragPosition;e&&!e.firstChange&&this._updateRootElement(),a&&!a.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const e=t._dragInstances.indexOf(this);e>-1&&t._dragInstances.splice(e,-1),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}_updateRootElement(){const t=this.element.nativeElement,e=this.rootElementSelector?Vt(t,this.rootElementSelector):t;this._dragRef.withRootElement(e||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?Vt(this.element.nativeElement,t):Object(L.e)(t):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){const t=this._dir,a=this.dragStartDelay,i=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,n=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.dragStartDelay="object"==typeof a&&a?a:Object(L.f)(a),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(i).withPreviewTemplate(n),t&&e.withDirection(t.value)}}),e.beforeStarted.pipe(Object($.a)(1)).subscribe(()=>{var a,i;if(this._parentDrag)return void e.withParent(this._parentDrag._dragRef);let n=this.element.nativeElement.parentElement;for(;n;){if(null===(a=n.classList)||void 0===a?void 0:a.contains("cdk-drag")){e.withParent((null===(i=t._dragInstances.find(t=>t.element.nativeElement===n))||void 0===i?void 0:i._dragRef)||null);break}n=n.parentElement}})}_handleEvents(t){t.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(()=>{this.released.emit({source:this})}),t.ended.subscribe(t=>{this.ended.emit({source:this,distance:t.distance}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(t=>{this.entered.emit({container:t.container.data,item:this,currentIndex:t.currentIndex})}),t.exited.subscribe(t=>{this.exited.emit({container:t.container.data,item:this})}),t.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,isPointerOverContainer:t.isPointerOverContainer,item:this,distance:t.distance})})}_assignDefaults(t){const{lockAxis:e,dragStartDelay:a,constrainPosition:i,previewClass:n,boundaryElement:o,draggingDisabled:s,rootElementSelector:r}=t;this.disabled=null!=s&&s,this.dragStartDelay=a||0,e&&(this.lockAxis=e),i&&(this.constrainPosition=i),n&&(this.previewClass=n),o&&(this.boundaryElement=o),r&&(this.rootElementSelector=r)}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(R.l),R.Nb(Bt,12),R.Nb(i.d),R.Nb(R.B),R.Nb(R.R),R.Nb($t,8),R.Nb(z.b,8),R.Nb(Ut),R.Nb(R.h),R.Nb(Lt,10),R.Nb(jt,12))},t.\u0275dir=R.Ib({type:t,selectors:[["","cdkDrag",""]],contentQueries:function(t,e,a){if(1&t&&(R.Gb(a,zt,1),R.Gb(a,Ht,1),R.Gb(a,Lt,1)),2&t){let t;R.sc(t=R.cc())&&(e._previewTemplate=t.first),R.sc(t=R.cc())&&(e._placeholderTemplate=t.first),R.sc(t=R.cc())&&(e._handles=t)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,e){2&t&&R.Fb("cdk-drag-disabled",e.disabled)("cdk-drag-dragging",e._dragRef.isDragging())},inputs:{disabled:["cdkDragDisabled","disabled"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],lockAxis:["cdkDragLockAxis","lockAxis"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],boundaryElement:["cdkDragBoundary","boundaryElement"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],data:["cdkDragData","data"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[R.Bb([{provide:jt,useExisting:t}]),R.Ab]}),t._dragInstances=[],t})();function Vt(t,e){let a=t.parentElement;for(;a;){if(a.matches?a.matches(e):a.msMatchesSelector(e))return a;a=a.parentElement}return null}let Wt=(()=>{class t{}return t.\u0275mod=R.Lb({type:t}),t.\u0275inj=R.Kb({factory:function(e){return new(e||t)},providers:[Ut],imports:[I.b]}),t})();var Gt=a("R1ws");let Qt=0;class Jt{}const Xt=Object(F.w)(Jt);let Zt=(()=>{class t extends Xt{constructor(t,e,a,i,n){super(),this._ngZone=t,this._elementRef=e,this._ariaDescriber=a,this._renderer=i,this._animationMode=n,this._hasContent=!1,this._color="primary",this._overlap=!0,this.position="above after",this.size="medium",this._id=Qt++}get color(){return this._color}set color(t){this._setColor(t),this._color=t}get overlap(){return this._overlap}set overlap(t){this._overlap=Object(L.c)(t)}get description(){return this._description}set description(t){if(t!==this._description){const e=this._badgeElement;this._updateHostAriaDescription(t,this._description),this._description=t,e&&(t?e.setAttribute("aria-label",t):e.removeAttribute("aria-label"))}}get hidden(){return this._hidden}set hidden(t){this._hidden=Object(L.c)(t)}isAbove(){return-1===this.position.indexOf("below")}isAfter(){return-1===this.position.indexOf("before")}ngOnChanges(t){const e=t.content;if(e){const t=e.currentValue;this._hasContent=null!=t&&`${t}`.trim().length>0,this._updateTextContent()}}ngOnDestroy(){const t=this._badgeElement;t&&(this.description&&this._ariaDescriber.removeDescription(t,this.description),this._renderer.destroyNode&&this._renderer.destroyNode(t))}getBadgeElement(){return this._badgeElement}_updateTextContent(){return this._badgeElement?this._badgeElement.textContent=this._stringifyContent():this._badgeElement=this._createBadgeElement(),this._badgeElement}_createBadgeElement(){const t=this._renderer.createElement("span");return this._clearExistingBadges("mat-badge-content"),t.setAttribute("id",`mat-badge-content-${this._id}`),t.classList.add("mat-badge-content"),t.textContent=this._stringifyContent(),"NoopAnimations"===this._animationMode&&t.classList.add("_mat-animation-noopable"),this.description&&t.setAttribute("aria-label",this.description),this._elementRef.nativeElement.appendChild(t),"function"==typeof requestAnimationFrame&&"NoopAnimations"!==this._animationMode?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{t.classList.add("mat-badge-active")})}):t.classList.add("mat-badge-active"),t}_updateHostAriaDescription(t,e){const a=this._updateTextContent();e&&this._ariaDescriber.removeDescription(a,e),t&&this._ariaDescriber.describe(a,t)}_setColor(t){if(t!==this._color){const e=this._elementRef.nativeElement.classList;this._color&&e.remove(`mat-badge-${this._color}`),t&&e.add(`mat-badge-${t}`)}}_clearExistingBadges(t){const e=this._elementRef.nativeElement;let a=e.children.length;for(;a--;){const i=e.children[a];i.classList.contains(t)&&e.removeChild(i)}}_stringifyContent(){const t=this.content;return null==t?"":`${t}`}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(R.B),R.Nb(R.l),R.Nb(O.c),R.Nb(R.G),R.Nb(Gt.a,8))},t.\u0275dir=R.Ib({type:t,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(t,e){2&t&&R.Fb("mat-badge-overlap",e.overlap)("mat-badge-above",e.isAbove())("mat-badge-below",!e.isAbove())("mat-badge-before",!e.isAfter())("mat-badge-after",e.isAfter())("mat-badge-small","small"===e.size)("mat-badge-medium","medium"===e.size)("mat-badge-large","large"===e.size)("mat-badge-hidden",e.hidden||!e._hasContent)("mat-badge-disabled",e.disabled)},inputs:{disabled:["matBadgeDisabled","disabled"],position:["matBadgePosition","position"],size:["matBadgeSize","size"],color:["matBadgeColor","color"],overlap:["matBadgeOverlap","overlap"],description:["matBadgeDescription","description"],hidden:["matBadgeHidden","hidden"],content:["matBadge","content"]},features:[R.zb,R.Ab]}),t})(),Kt=(()=>{class t{}return t.\u0275mod=R.Lb({type:t}),t.\u0275inj=R.Kb({factory:function(e){return new(e||t)},imports:[[O.a,F.g],F.g]}),t})();var Yt=a("tyNb");const te=[];let ee=(()=>{class t{}return t.\u0275mod=R.Lb({type:t}),t.\u0275inj=R.Kb({factory:function(e){return new(e||t)},imports:[[Yt.d.forChild(te)],Yt.d]}),t})(),ae=(()=>{class t{}return t.\u0275mod=R.Lb({type:t}),t.\u0275inj=R.Kb({factory:function(e){return new(e||t)},imports:[[i.c,ee,n.c,o.e,s.a,l.AdminModule,d.a,u.d,h.b,b.d,m.c,p.f,g.b,f.c,C.l,S.b,v.b,_.b,T.b,D.b,w.d,E.b,x.b,P.e,k.d,W,F.j,Wt,Kt]]}),t})();var ie=a("0EQZ");const ne=["*"],oe=new R.s("MatChipRemove"),se=new R.s("MatChipAvatar"),re=new R.s("MatChipTrailingIcon");class ce{constructor(t){this._elementRef=t}}const le=Object(F.z)(Object(F.u)(Object(F.v)(ce),"primary"),-1);let de=(()=>{class t extends le{constructor(t,e,a,i,n,o,s,r){super(t),this._elementRef=t,this._ngZone=e,this._changeDetectorRef=n,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListDisabled=!1,this._selected=!1,this._selectable=!0,this._disabled=!1,this._removable=!0,this._onFocus=new A.a,this._onBlur=new A.a,this.selectionChange=new R.o,this.destroyed=new R.o,this.removed=new R.o,this._addHostClassName(),this._chipRippleTarget=o.createElement("div"),this._chipRippleTarget.classList.add("mat-chip-ripple"),this._elementRef.nativeElement.appendChild(this._chipRippleTarget),this._chipRipple=new F.r(this,e,this._chipRippleTarget,a),this._chipRipple.setupTriggerEvents(t),this.rippleConfig=i||{},this._animationsDisabled="NoopAnimations"===s,this.tabIndex=null!=r&&parseInt(r)||-1}get rippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(t){const e=Object(L.c)(t);e!==this._selected&&(this._selected=e,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(t){this._value=t}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(t){this._selectable=Object(L.c)(t)}get disabled(){return this._chipListDisabled||this._disabled}set disabled(t){this._disabled=Object(L.c)(t)}get removable(){return this._removable}set removable(t){this._removable=Object(L.c)(t)}get ariaSelected(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const t=this._elementRef.nativeElement;t.hasAttribute("mat-basic-chip")||"mat-basic-chip"===t.tagName.toLowerCase()?t.classList.add("mat-basic-chip"):t.classList.add("mat-standard-chip")}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}deselect(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}toggleSelected(t=!1){return this._selected=!this.selected,this._dispatchSelectionChange(t),this._changeDetectorRef.markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&&this.removed.emit({chip:this})}_handleClick(t){this.disabled?t.preventDefault():t.stopPropagation()}_handleKeydown(t){if(!this.disabled)switch(t.keyCode){case j.c:case j.b:this.remove(),t.preventDefault();break;case j.n:this.selectable&&this.toggleSelected(!0),t.preventDefault()}}_blur(){this._ngZone.onStable.pipe(Object($.a)(1)).subscribe(()=>{this._ngZone.run(()=>{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(t=!1){this.selectionChange.emit({source:this,isUserInput:t,selected:this._selected})}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(R.l),R.Nb(R.B),R.Nb(G.a),R.Nb(F.f,8),R.Nb(R.h),R.Nb(i.d),R.Nb(Gt.a,8),R.Yb("tabindex"))},t.\u0275dir=R.Ib({type:t,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(t,e,a){if(1&t&&(R.Gb(a,se,1),R.Gb(a,re,1),R.Gb(a,oe,1)),2&t){let t;R.sc(t=R.cc())&&(e.avatar=t.first),R.sc(t=R.cc())&&(e.trailingIcon=t.first),R.sc(t=R.cc())&&(e.removeIcon=t.first)}},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(t,e){1&t&&R.bc("click",function(t){return e._handleClick(t)})("keydown",function(t){return e._handleKeydown(t)})("focus",function(){return e.focus()})("blur",function(){return e._blur()}),2&t&&(R.Db("tabindex",e.disabled?null:e.tabIndex)("disabled",e.disabled||null)("aria-disabled",e.disabled.toString())("aria-selected",e.ariaSelected),R.Fb("mat-chip-selected",e.selected)("mat-chip-with-avatar",e.avatar)("mat-chip-with-trailing-icon",e.trailingIcon||e.removeIcon)("mat-chip-disabled",e.disabled)("_mat-animation-noopable",e._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[R.zb]}),t})();const ue=new R.s("mat-chips-default-options");class he{constructor(t,e,a,i){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=a,this.ngControl=i}}const be=Object(F.x)(he);let me=0;class pe{constructor(t,e){this.source=t,this.value=e}}let ge=(()=>{class t extends be{constructor(t,e,a,i,n,o,s){super(o,i,n,s),this._elementRef=t,this._changeDetectorRef=e,this._dir=a,this.ngControl=s,this.controlType="mat-chip-list",this._lastDestroyedChipIndex=null,this._destroyed=new A.a,this._uid="mat-chip-list-"+me++,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=>{},this._onChange=()=>{},this._multiple=!1,this._compareWith=(t,e)=>t===e,this._required=!1,this._disabled=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.change=new R.o,this.valueChange=new R.o,this.ngControl&&(this.ngControl.valueAccessor=this)}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get role(){return this.empty?null:"listbox"}get multiple(){return this._multiple}set multiple(t){this._multiple=Object(L.c)(t),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this.writeValue(t),this._value=t}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){return this._required}set required(t){this._required=Object(L.c)(t),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get focused(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Object(L.c)(t),this._syncChipsState()}get selectable(){return this._selectable}set selectable(t){this._selectable=Object(L.c)(t),this.chips&&this.chips.forEach(t=>t.chipListSelectable=this._selectable)}set tabIndex(t){this._userTabIndex=t,this._tabIndex=t}get chipSelectionChanges(){return Object(U.a)(...this.chips.map(t=>t.selectionChange))}get chipFocusChanges(){return Object(U.a)(...this.chips.map(t=>t._onFocus))}get chipBlurChanges(){return Object(U.a)(...this.chips.map(t=>t._onBlur))}get chipRemoveChanges(){return Object(U.a)(...this.chips.map(t=>t.destroyed))}ngAfterContentInit(){this._keyManager=new O.g(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(Object(Y.a)(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.tabOut.pipe(Object(Y.a)(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.chips.changes.pipe(Object(B.a)(null),Object(Y.a)(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new ie.c(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(t){this._chipInput=t,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",t.id)}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}writeValue(t){this.chips&&this._setSelectionByValue(t,!1)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this.stateChanges.next()}onContainerClick(t){this._originatesFromChip(t)||this.focus()}focus(t){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(t),this.stateChanges.next()))}_focusInput(t){this._chipInput&&this._chipInput.focus(t)}_keydown(t){const e=t.target;t.keyCode===j.b&&this._isInputEmpty(e)?(this._keyManager.setLastItemActive(),t.preventDefault()):e&&e.classList.contains("mat-chip")&&(this._keyManager.onKeydown(t),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const t=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(t)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(t){return t>=0&&t<this.chips.length}_isInputEmpty(t){return!(!t||"input"!==t.nodeName.toLowerCase()||t.value)}_setSelectionByValue(t,e=!0){if(this._clearSelection(),this.chips.forEach(t=>t.deselect()),Array.isArray(t))t.forEach(t=>this._selectValue(t,e)),this._sortValues();else{const a=this._selectValue(t,e);a&&e&&this._keyManager.setActiveItem(a)}}_selectValue(t,e=!0){const a=this.chips.find(e=>null!=e.value&&this._compareWith(e.value,t));return a&&(e?a.selectViaInteraction():a.select(),this._selectionModel.select(a)),a}_initializeSelection(){Promise.resolve().then(()=>{(this.ngControl||this._value)&&(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(t){this._selectionModel.clear(),this.chips.forEach(e=>{e!==t&&e.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&&(this._selectionModel.clear(),this.chips.forEach(t=>{t.selected&&this._selectionModel.select(t)}),this.stateChanges.next())}_propagateChanges(t){let e=null;e=Array.isArray(this.selected)?this.selected.map(t=>t.value):this.selected?this.selected.value:t,this._value=e,this.change.emit(new pe(this,e)),this.valueChange.emit(e),this._onChange(e),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=>{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(()=>{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(t=>{t.source.selected?this._selectionModel.select(t.source):this._selectionModel.deselect(t.source),this.multiple||this.chips.forEach(t=>{!this._selectionModel.isSelected(t)&&t.selected&&t.deselect()}),t.isUserInput&&this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(t=>{let e=this.chips.toArray().indexOf(t.chip);this._isValidIndex(e)&&this._keyManager.updateActiveItem(e),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=>{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(t=>{const e=t.chip,a=this.chips.toArray().indexOf(t.chip);this._isValidIndex(a)&&e._hasFocus&&(this._lastDestroyedChipIndex=a)})}_originatesFromChip(t){let e=t.target;for(;e&&e!==this._elementRef.nativeElement;){if(e.classList.contains("mat-chip"))return!0;e=e.parentElement}return!1}_hasFocusedChip(){return this.chips&&this.chips.some(t=>t._hasFocus)}_syncChipsState(){this.chips&&this.chips.forEach(t=>{t._chipListDisabled=this._disabled,t._chipListMultiple=this.multiple})}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(R.l),R.Nb(R.h),R.Nb(z.b,8),R.Nb(o.m,8),R.Nb(o.d,8),R.Nb(F.b),R.Nb(o.j,10))},t.\u0275cmp=R.Hb({type:t,selectors:[["mat-chip-list"]],contentQueries:function(t,e,a){if(1&t&&R.Gb(a,de,1),2&t){let t;R.sc(t=R.cc())&&(e.chips=t)}},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(t,e){1&t&&R.bc("focus",function(){return e.focus()})("blur",function(){return e._blur()})("keydown",function(t){return e._keydown(t)}),2&t&&(R.Wb("id",e._uid),R.Db("tabindex",e.disabled?null:e._tabIndex)("aria-describedby",e._ariaDescribedby||null)("aria-required",e.role?e.required:null)("aria-disabled",e.disabled.toString())("aria-invalid",e.errorState)("aria-multiselectable",e.multiple)("role",e.role)("aria-orientation",e.ariaOrientation),R.Fb("mat-chip-list-disabled",e.disabled)("mat-chip-list-invalid",e.errorState)("mat-chip-list-required",e.required))},inputs:{ariaOrientation:["aria-orientation","ariaOrientation"],multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",selectable:"selectable",tabIndex:"tabIndex",errorStateMatcher:"errorStateMatcher"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[R.Bb([{provide:b.c,useExisting:t}]),R.zb],ngContentSelectors:ne,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(t,e){1&t&&(R.kc(),R.Tb(0,"div",0),R.jc(1),R.Sb())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;transform:translateZ(0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove.mat-icon{width:18px;height:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),t})();const fe={separatorKeyCodes:[j.f]};let Ce=(()=>{class t{}return t.\u0275mod=R.Lb({type:t}),t.\u0275inj=R.Kb({factory:function(e){return new(e||t)},providers:[F.b,{provide:ue,useValue:fe}],imports:[[F.g]]}),t})();var Se=a("JbvS"),ve=a("0T/Q"),_e=a("sKxO"),Te=a("R5jZ"),De=a("un/a"),we=a("JIr8"),Ee=a("Qyje");let xe=(()=>{class t{constructor(t){this.http=t,this.moduleUrl="mante/area",this.srvcErrHndl=new Te.a}get(t={}){return this.http.get(`${_e.a.url}/${this.moduleUrl}/get_areas?${Ee.stringify(t)}`).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}save(t){return this.http.post(`${_e.a.url}/${this.moduleUrl}/guardar${t.area?"/"+t.area:""}`,t).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(R.Xb(n.b))},t.\u0275prov=R.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Pe=a("FY0D");function ke(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-list-item",5),R.bc("click",function(){R.wc(t);const a=e.$implicit;return R.fc().getEntidad(a.area)}),R.Tb(1,"mat-icon",6),R.Dc(2,"settings"),R.Sb(),R.Tb(3,"h5",7),R.Dc(4),R.Sb(),R.Sb()}if(2&t){const t=e.$implicit;R.Cb(4),R.Ec(t.nombre)}}const Oe=function(){return{standalone:!0}};let ye=(()=>{class t{constructor(t,e){this.areaSrvc=t,this.ls=e,this.getEntidadEv=new R.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadEntidades=()=>{this.areaSrvc.get({sede:this.ls.get(_e.a.usrTokenVar).sede||0,debaja:1}).subscribe(t=>{t&&t.length>0&&(this.lstEntidades=t,this.applyFilter())})},this.getEntidad=t=>{this.areaSrvc.get({area:t,debaja:1}).subscribe(t=>{t&&t.length>0&&this.getEntidadEv.emit(t[0])})},this.pageChange=t=>{this.pageSize=t.pageSize,this.pageIndex=t.pageIndex,this.applyFilter()}}ngOnInit(){this.loadEntidades()}applyFilter(){if(this.txtFiltro.length>0){const t=Object(_e.b)(this.lstEntidades,this.txtFiltro);this.length=t.length,this.lstEntidadesPaged=Object(_e.c)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstEntidades.length,this.lstEntidadesPaged=Object(_e.c)(this.lstEntidades,this.pageSize,this.pageIndex+1)}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(xe),R.Nb(Pe.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-lista-area"]],outputs:{getEntidadEv:"getEntidadEv"},decls:7,vars:7,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],["matRipple","",3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["matRipple","",3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,e){1&t&&(R.Tb(0,"mat-card",0),R.Tb(1,"mat-card-content"),R.Tb(2,"mat-form-field",1),R.Tb(3,"input",2),R.bc("keyup",function(){return e.applyFilter()})("ngModelChange",function(t){return e.txtFiltro=t}),R.Sb(),R.Sb(),R.Tb(4,"mat-nav-list"),R.Cc(5,ke,5,1,"mat-list-item",3),R.Sb(),R.Tb(6,"mat-paginator",4),R.bc("page",function(t){return e.pageChange(t)}),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(3),R.lc("ngModel",e.txtFiltro)("ngModelOptions",R.nc(6,Oe)),R.Cb(2),R.lc("ngForOf",e.lstEntidadesPaged),R.Cb(1),R.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[p.a,p.c,b.b,m.b,o.c,o.k,o.n,u.e,i.l,x.a,u.c,h.a,u.b,F.h],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),t})(),Me=(()=>{class t{constructor(t){this.http=t,this.moduleUrl="mesa",this.srvcErrHndl=new Te.a}get(t={}){return this.http.get(`${_e.a.urlMantenimientos}/${this.moduleUrl}/buscar?${Ee.stringify(t)}`).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}save(t){return this.http.post(`${_e.a.urlMantenimientos}/mesa/guardar${t.mesa?"/"+t.mesa:""}`,t).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}getDisponibles(){return this.http.get(`${_e.a.urlMantenimientos}/area/get_mesas_disponibles?`).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(R.Xb(n.b))},t.\u0275prov=R.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Re=a("qMXL");function Ie(t,e){if(1&t&&(R.Tb(0,"mat-option",12),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.impresora),R.Cb(1),R.Fc(" ",t.nombre," ")}}function Fe(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",4),R.Tb(1,"mat-label"),R.Dc(2,"Impresora"),R.Sb(),R.Tb(3,"mat-select",10),R.bc("ngModelChange",function(e){return R.wc(t),R.fc().mesa.impresora=e}),R.Cc(4,Ie,2,2,"mat-option",11),R.Sb(),R.Sb()}if(2&t){const t=R.fc();R.Cb(3),R.lc("ngModel",t.mesa.impresora),R.Cb(1),R.lc("ngForOf",t.impresoras)}}let Ae=(()=>{class t{constructor(t,e,a,i,n){this.mesaSrvc=t,this.impresoraSrvc=e,this.snackBar=a,this.dialogRef=i,this.data=n,this.impresoras=[],this.mesa={},this.loadImpresoras=()=>this.impresoraSrvc.get().subscribe(t=>this.impresoras=t),this.cancelar=()=>this.dialogRef.close(!1),this.guardarConfiguracion=()=>{this.mesaSrvc.save(this.mesa).subscribe(t=>{t.exito?this.snackBar.open(t.mesa?`Mesa #${t.mesa.numero} actualizada...`:`Mesa #${this.mesa.numero} actualizada...`,"Configuraci\xf3n de mesa",{duration:3e3}):this.snackBar.open(`ERROR:${t.mensaje}.`,"Configuraci\xf3n de mesa",{duration:7e3}),this.dialogRef.close(!0)})}}ngOnInit(){this.mesa=this.data.mesa,this.loadImpresoras()}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(Me),R.Nb(Re.a),R.Nb(T.a),R.Nb(P.f),R.Nb(P.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-configura-mesa"]],decls:13,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate",""],["frmConfigMesa","ngForm"],[1,"fullWidth"],["type","text","matInput","","placeholder","Etiqueta","name","etiqueta","maxlength","3",3,"ngModel","ngModelChange"],["class","fullWidth",4,"ngIf"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],["name","impresora",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){if(1&t&&(R.Tb(0,"h1",0),R.Dc(1),R.Sb(),R.Tb(2,"div",1),R.Tb(3,"form",2,3),R.Tb(5,"mat-form-field",4),R.Tb(6,"input",5),R.bc("ngModelChange",function(t){return e.mesa.etiqueta=t}),R.Sb(),R.Sb(),R.Cc(7,Fe,5,2,"mat-form-field",6),R.Sb(),R.Sb(),R.Tb(8,"div",7),R.Tb(9,"button",8),R.bc("click",function(){return e.cancelar()}),R.Dc(10," Cancelar "),R.Sb(),R.Tb(11,"button",9),R.bc("click",function(){return e.guardarConfiguracion()}),R.Dc(12," Guardar "),R.Sb(),R.Sb()),2&t){const t=R.tc(4);R.Cb(1),R.Fc("Configuraci\xf3n de mesa ",e.mesa.numero,""),R.Cb(5),R.lc("ngModel",e.mesa.etiqueta),R.Cb(1),R.lc("ngIf",1==+e.mesa.esmostrador),R.Cb(4),R.lc("disabled",!t.form.valid)}},directives:[P.g,P.d,o.r,o.l,o.m,b.b,m.b,o.c,o.f,o.k,o.n,i.m,P.c,_.a,b.e,S.a,i.l,F.k],styles:[""]}),t})();var Ne=a("IJgu"),Ue=a("znSr");const je=["divMesa"],$e=function(t,e,a,i,n){return{disponible:t,ocupada:e,debaja:a,"call-center-ocupado":i,"call-center-disponible":n}};let Be=(()=>{class t{constructor(t,e){this.snackBar=t,this.mesaSrvc=e,this.configuracion={mesa:0,area:0,numero:0,posx:0,posy:0,tamanio:48,estatus:1,ancho:null,alto:null,esmostrador:0,vertical:0,etiqueta:null,escallcenter:0},this.dontAllowDrag=!0,this.isDisabled=!1,this.onClickMesa=new R.o,this.urlImage="/assets/img/mesas/",this.ngAfterViewInit=()=>this.objMesa=this.divMesa.nativeElement,this.clickMesa=()=>this.onClickMesa.emit({mesaSelected:this.configuracion}),this.getAncho=()=>this.configuracion.ancho&&+this.configuracion.ancho>0?this.configuracion.ancho:this.configuracion.tamanio,this.getAlto=()=>this.configuracion.alto&&+this.configuracion.alto>0?this.configuracion.alto:this.configuracion.tamanio,this.dragEnded=t=>{const e=t.source.element.nativeElement,a=e.offsetParent.scrollHeight,i=t.distance,n={mesa:this.configuracion.mesa,area:this.configuracion.area,numero:this.configuracion.numero,posx:Math.abs(100*(e.offsetLeft+i.x)/e.offsetParent.scrollWidth),posy:Math.abs(100*(e.offsetTop+i.y)/a),tamanio:this.configuracion.tamanio,estatus:this.configuracion.estatus};this.mesaSrvc.save(n).subscribe(t=>{t.exito?t.mesa?(this.configuracion.mesa=t.mesa.mesa,this.snackBar.open(`Mesa #${t.mesa.numero} actualizada...`,"Dise\xf1o de \xe1rea",{duration:3e3})):this.snackBar.open(`Mesa #${this.configuracion.numero} actualizada...`,"Dise\xf1o de \xe1rea",{duration:3e3}):this.snackBar.open(`ERROR:${t.mensaje}.`,"Dise\xf1o de \xe1rea",{duration:3e3})})},this.moviendo=t=>{}}ngOnInit(){this.urlImage+=0==+this.configuracion.esmostrador?"table_03.svg":0==+this.configuracion.escallcenter?0==+this.configuracion.vertical?"mostrador_horizontal.svg":"mostrador_vertical.svg":"callcenter.svg"}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(T.a),R.Nb(Me))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-mesa"]],viewQuery:function(t,e){if(1&t&&R.Ic(je,1),2&t){let t;R.sc(t=R.cc())&&(e.divMesa=t.first)}},inputs:{configuracion:"configuracion",dontAllowDrag:"dontAllowDrag",isDisabled:"isDisabled"},outputs:{onClickMesa:"onClickMesa"},decls:4,vars:20,consts:[["cdkDrag","","cdkDragBoundary",".areaPosicionamiento",1,"divMesa","mat-elevation-z6",3,"cdkDragDisabled","ngClass","cdkDragEnded","cdkDragMoved","click"],["divMesa",""]],template:function(t,e){1&t&&(R.Tb(0,"div",0,1),R.bc("cdkDragEnded",function(t){return e.dragEnded(t)})("cdkDragMoved",function(t){return e.moviendo(t)})("click",function(){return e.clickMesa()}),R.Tb(2,"span"),R.Dc(3),R.Sb(),R.Sb()),2&t&&(R.zc("width",e.getAncho(),"px")("height",e.getAlto(),"px")("left",e.configuracion.posx,"%")("top",e.configuracion.posy,"%")("background-image","url("+e.urlImage+")"),R.lc("cdkDragDisabled",e.dontAllowDrag)("ngClass",R.rc(14,$e,1==+e.configuracion.estatus&&0==+e.configuracion.debaja,2==+e.configuracion.estatus&&0==+e.configuracion.debaja,1==+e.configuracion.debaja,2==+e.configuracion.estatus&&1==+e.configuracion.escallcenter,1==+e.configuracion.estatus&&1==+e.configuracion.escallcenter)),R.Db("disabled",!!e.isDisabled||null),R.Cb(3),R.Ec(e.configuracion.etiqueta||e.configuracion.numero))},directives:[qt,i.k,Ue.a],styles:[".divMesa[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:50%;position:absolute;text-align:right;padding-top:0;background-size:90% 90%}span[_ngcontent-%COMP%]{font-size:12pt;font-weight:700;text-shadow:-1px 0 #fff,0 1px #fff,1px 0 #fff,0 -1px #fff}.disponible[_ngcontent-%COMP%]{background-color:#90ee90}.ocupada[_ngcontent-%COMP%]{background-color:#da332d}.debaja[_ngcontent-%COMP%]{background-color:#000}.call-center-ocupado[_ngcontent-%COMP%]{background-color:#da332d;background-image:url(/assets/img/mesas/callcenter_alt.svg)}.call-center-disponible[_ngcontent-%COMP%]{background-color:#90ee90;background-image:url(/assets/img/mesas/callcenter.svg)}"]}),t})();function Le(t,e){if(1&t){const t=R.Ub();R.Tb(0,"app-mesa",11),R.bc("onClickMesa",function(e){return R.wc(t),R.fc().onClickMesa(e)})("contextmenu",function(a){R.wc(t);const i=e.$implicit;return R.fc().onContextMenu(a,i)}),R.Sb()}2&t&&R.lc("configuracion",e.$implicit)("dontAllowDrag",!1)}function He(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",16),R.bc("click",function(){R.wc(t);const e=R.fc().item;return R.fc().configurarMesa(e)}),R.Tb(1,"mat-icon",3),R.Dc(2,"settings"),R.Sb(),R.Dc(3,"Configuracion "),R.Sb()}}function ze(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",17),R.bc("click",function(){R.wc(t);const e=R.fc().item;return R.fc().toggleDeBaja(e)}),R.Tb(1,"mat-icon",3),R.Dc(2,"thumb_down"),R.Sb(),R.Dc(3,"Dar de baja "),R.Sb()}if(2&t){const t=R.fc().item;R.lc("disabled",2==+t.estatus)}}function qe(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",18),R.bc("click",function(){R.wc(t);const e=R.fc().item;return R.fc().toggleDeBaja(e,0)}),R.Tb(1,"mat-icon",3),R.Dc(2,"thumb_up"),R.Sb(),R.Dc(3,"Habilitar "),R.Sb()}if(2&t){const t=R.fc().item;R.lc("disabled",2==+t.estatus)}}function Ve(t,e){if(1&t&&(R.Tb(0,"span",12),R.Dc(1),R.Sb(),R.Ob(2,"mat-divider"),R.Cc(3,He,4,0,"button",13),R.Cc(4,ze,4,1,"button",14),R.Cc(5,qe,4,1,"button",15)),2&t){const t=e.item;R.Cb(1),R.Gc("Mesa #",t.numero," (",t.mesa,")"),R.Cb(2),R.lc("ngIf",0==+t.debaja),R.Cb(1),R.lc("ngIf",0==+t.debaja),R.Cb(1),R.lc("ngIf",1==+t.debaja)}}let We=(()=>{class t{constructor(t,e,a,i,n){this.snackBar=t,this.mesaSrvc=e,this.dialogRef=a,this.dialog=i,this.data=n,this.mesas=[],this.contextMenuPosition={x:"0px",y:"0px"},this.getNextTableNumber=()=>this.mesas.length>0?this.mesas.reduce((t,e)=>+e.numero>t?+e.numero:t,this.mesas[0].numero?+this.mesas[0].numero:0)+1:1,this.addTable=(t=72,e=72,a=0,i=0,n=0)=>{this.mesas.push({mesa:null,area:this.data.area,numero:this.getNextTableNumber(),posx:1,posy:1,tamanio:72,estatus:1,ancho:t,alto:e,esmostrador:a,vertical:i,escallcenter:n}),this.saveNewMesa(this.mesas[this.mesas.length-1],this.mesas.length-1)},this.addMostrador=(t=!1)=>this.addTable(t?72:144,t?144:72,1,t?1:0),this.addCallCenter=()=>this.addTable(72,72,1,0,1),this.saveNewMesa=(t,e)=>{this.mesaSrvc.save(t).subscribe(t=>{t.exito?t.mesa&&(this.mesas[e]=t.mesa):this.snackBar.open(`ERROR: ${t.mensaje}`,"Mesa",{duration:7e3})})},this.onClickMesa=t=>{},this.terminar=()=>this.dialogRef.close(this.mesas),this.configurarMesa=t=>{this.dialog.open(Ae,{width:"50%",data:{mesa:t}}).afterClosed().subscribe(t=>{})},this.toggleDeBaja=(t,e=1)=>{this.dialog.open(Ne.a,{maxWidth:"400px",data:new Ne.b(0==+t.esmostrador?"Mesa":"Mostrador",`\xbfSeguro que desea ${1===e?"dar de baja":"habilitar"} ${0==+t.esmostrador?"la mesa":"el mostrador"} #${t.numero}?`,"S\xed","No")}).afterClosed().subscribe(a=>{a&&(t.debaja=e,this.mesaSrvc.save(t).subscribe(t=>{if(t.exito){if(t.mesa){const e=this.mesas.findIndex(e=>+e.mesa==+t.mesa.mesa);e>-1&&(this.mesas[e]=t.mesa),this.snackBar.open(t.mensaje,"Mesa",{duration:3e3})}}else this.snackBar.open(`ERROR: ${t.mensaje}`,"Mesa",{duration:7e3})}))})}}ngOnInit(){this.mesas=this.data.mesas}onContextMenu(t,e){t.preventDefault(),this.contextMenuPosition.x=t.clientX+"px",this.contextMenuPosition.y=t.clientY+"px",this.contextMenu.menuData={item:e},this.contextMenu.menu.focusFirstItem("mouse"),this.contextMenu.openMenu()}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(T.a),R.Nb(Me),R.Nb(P.f),R.Nb(P.b),R.Nb(P.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-area-designer"]],viewQuery:function(t,e){if(1&t&&R.Ic(w.e,1),2&t){let t;R.sc(t=R.cc())&&(e.contextMenu=t.first)}},decls:27,vars:6,consts:[[1,"diseniador"],["align","center",2,"height","55px"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"click"],[1,"btnIconSize"],["mat-raised-button","","type","button","color","accent",3,"click"],[2,"height","5px","width","100%"],["id","divAreaPosicionamiento",1,"areaPosicionamiento"],[3,"configuracion","dontAllowDrag","onClickMesa","contextmenu",4,"ngFor","ngForOf"],[2,"visibility","hidden","position","fixed",3,"matMenuTriggerFor"],["contextMenu","matMenu"],["matMenuContent",""],[3,"configuracion","dontAllowDrag","onClickMesa","contextmenu"],["mat-menu-item","","disableRipple","true",1,"mesaTitle"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","","class","customize",3,"disabled","click",4,"ngIf"],["mat-menu-item","","class","customizeUp",3,"disabled","click",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-menu-item","",1,"customize",3,"disabled","click"],["mat-menu-item","",1,"customizeUp",3,"disabled","click"]],template:function(t,e){if(1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"button",2),R.bc("click",function(){return e.addTable()}),R.Tb(3,"mat-icon",3),R.Dc(4,"add"),R.Sb(),R.Dc(5,"\xa0Mesa "),R.Sb(),R.Tb(6,"button",2),R.bc("click",function(){return e.addMostrador()}),R.Tb(7,"mat-icon",3),R.Dc(8,"add"),R.Sb(),R.Dc(9,"\xa0Mostrador "),R.Sb(),R.Tb(10,"button",2),R.bc("click",function(){return e.addMostrador(!0)}),R.Tb(11,"mat-icon",3),R.Dc(12,"add"),R.Sb(),R.Dc(13,"\xa0Mostrador vertical "),R.Sb(),R.Tb(14,"button",2),R.bc("click",function(){return e.addCallCenter()}),R.Tb(15,"mat-icon",3),R.Dc(16,"add"),R.Sb(),R.Dc(17,"\xa0Call center "),R.Sb(),R.Tb(18,"button",4),R.bc("click",function(){return e.terminar()}),R.Dc(19," Terminar "),R.Sb(),R.Sb(),R.Ob(20,"div",5),R.Tb(21,"div",6),R.Cc(22,Le,1,2,"app-mesa",7),R.Sb(),R.Ob(23,"div",8),R.Tb(24,"mat-menu",null,9),R.Cc(26,Ve,6,5,"ng-template",10),R.Sb(),R.Sb()),2&t){const t=R.tc(25);R.Cb(22),R.lc("ngForOf",e.mesas),R.Cb(1),R.zc("left",e.contextMenuPosition.x)("top",e.contextMenuPosition.y),R.lc("matMenuTriggerFor",t)}},directives:[_.a,h.a,i.l,w.e,w.a,w.b,Be,w.c,g.a,i.m],styles:[".diseniador[_ngcontent-%COMP%]{width:750px;height:650px}.areaPosicionamiento[_ngcontent-%COMP%], .diseniador[_ngcontent-%COMP%]{overflow:hidden!important;padding:0!important}.areaPosicionamiento[_ngcontent-%COMP%]{width:100%;height:600px;background-color:hsla(0,0%,78%,.28627450980392155);position:relative}.btnIconSize[_ngcontent-%COMP%]{font-size:17pt!important}  .customize{background:#ffffe0}  .customizeUp{background:#90ee90}.mesaTitle[_ngcontent-%COMP%]{font-weight:700}"]}),t})();function Ge(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",4),R.Tb(1,"input",13),R.bc("ngModelChange",function(e){return R.wc(t),R.fc().entidad.nombre=e}),R.Sb(),R.Sb()}if(2&t){const t=R.fc();R.Cb(1),R.lc("ngModel",t.entidad.nombre)}}function Qe(t,e){if(1&t&&(R.Tb(0,"mat-option",14),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.area),R.Cb(1),R.Fc(" ",t.nombre," ")}}function Je(t,e){if(1&t&&(R.Tb(0,"mat-option",14),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.impresora),R.Cb(1),R.Fc(" ",t.nombre," ")}}function Xe(t,e){if(1&t&&(R.Tb(0,"mat-option",14),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.impresora),R.Cb(1),R.Fc(" ",t.nombre," ")}}function Ze(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",15),R.bc("click",function(){return R.wc(t),R.fc().openDesigner()}),R.Dc(1," Dise\xf1ar "),R.Sb()}}function Ke(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",16),R.bc("click",function(){return R.wc(t),R.fc().resetEntidad()}),R.Dc(1," Nuevo "),R.Sb()}}let Ye=(()=>{class t{constructor(t,e,a,i,n){this.snackBar=t,this.dialog=e,this.entidadSrvc=a,this.impresoraSrvc=i,this.ls=n,this.entidadSavedEv=new R.o,this.sedeUsr=0,this.lstAreas=[],this.esMovil=!1,this.impresoras=[],this.loadAreas=()=>this.entidadSrvc.get({sede:this.sedeUsr,debaja:1}).subscribe(t=>this.lstAreas=t),this.loadImpresoras=()=>this.impresoraSrvc.get().subscribe(t=>this.impresoras=t),this.resetEntidad=()=>this.entidad={area:null,sede:this.sedeUsr,nombre:null,mesas:[],impresora_factura:null,impresora:null},this.onSubmit=()=>{this.entidadSrvc.save(this.entidad).subscribe(t=>{t.exito?(this.snackBar.open(`${t.mensaje}`,"\xc1rea",{duration:3e3}),this.resetEntidad(),this.loadAreas(),this.entidadSavedEv.emit()):this.snackBar.open(`ERROR: ${t.mensaje}`,"\xc1rea",{duration:3e3})})},this.openDesigner=()=>{this.dialog.open(We,{width:"800px",disableClose:!1,data:{area:+this.entidad.area,mesas:this.entidad.mesas||[]}}).afterClosed().subscribe(t=>{t&&(this.entidadSavedEv.emit(),this.entidadSrvc.get({area:+this.entidad.area,debaja:1}).subscribe(t=>{t&&t.length>0&&(this.entidad=t[0])}))})}}ngOnInit(){this.sedeUsr=this.ls.get(_e.a.usrTokenVar).sede||0,this.esMovil=this.ls.get(_e.a.usrTokenVar).enmovil||!1,this.resetEntidad(),this.loadAreas(),this.loadImpresoras()}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(T.a),R.Nb(P.b),R.Nb(xe),R.Nb(Re.a),R.Nb(Pe.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-form-area"]],inputs:{entidad:"entidad"},outputs:{entidadSavedEv:"entidadSavedEv"},decls:30,vars:11,consts:[[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmEntidad","ngForm"],["class","fullWidth",4,"ngIf"],[1,"fullWidth"],["name","area_padre",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","impresora","required","",3,"ngModel","ngModelChange"],["name","impresora_factura",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["type","text","matInput","","placeholder","Nombre","name","nombre","required","",3,"ngModel","ngModelChange"],[3,"value"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"click"],["mat-raised-button","","type","button","color","accent",3,"click"]],template:function(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-card",0),R.Tb(1,"mat-card-title"),R.Tb(2,"h4"),R.Dc(3,"\xc1rea"),R.Sb(),R.Sb(),R.Tb(4,"mat-card-content"),R.Tb(5,"form",1,2),R.bc("ngSubmit",function(){return R.wc(t),R.tc(6).form.valid&&e.onSubmit()}),R.Cc(7,Ge,2,1,"mat-form-field",3),R.Tb(8,"mat-form-field",4),R.Tb(9,"mat-label"),R.Dc(10,"\xc1rea padre"),R.Sb(),R.Tb(11,"mat-select",5),R.bc("ngModelChange",function(t){return e.entidad.area_padre=t}),R.Cc(12,Qe,2,2,"mat-option",6),R.Sb(),R.Sb(),R.Tb(13,"mat-form-field",4),R.Tb(14,"mat-label"),R.Dc(15,"Impresora"),R.Sb(),R.Tb(16,"mat-select",7),R.bc("ngModelChange",function(t){return e.entidad.impresora=t}),R.Cc(17,Je,2,2,"mat-option",6),R.Sb(),R.Sb(),R.Tb(18,"mat-form-field",4),R.Tb(19,"mat-label"),R.Dc(20,"Impresora de factura"),R.Sb(),R.Tb(21,"mat-select",8),R.bc("ngModelChange",function(t){return e.entidad.impresora_factura=t}),R.Cc(22,Xe,2,2,"mat-option",6),R.Sb(),R.Sb(),R.Tb(23,"h5"),R.Dc(24),R.Sb(),R.Tb(25,"div",9),R.Tb(26,"button",10),R.Dc(27," Guardar "),R.Sb(),R.Cc(28,Ze,2,0,"button",11),R.Cc(29,Ke,2,0,"button",12),R.Sb(),R.Sb(),R.Sb(),R.Sb()}if(2&t){const t=R.tc(6);R.Cb(7),R.lc("ngIf",e.esMovil),R.Cb(4),R.lc("ngModel",e.entidad.area_padre),R.Cb(1),R.lc("ngForOf",e.lstAreas),R.Cb(4),R.lc("ngModel",e.entidad.impresora),R.Cb(1),R.lc("ngForOf",e.impresoras),R.Cb(4),R.lc("ngModel",e.entidad.impresora_factura),R.Cb(1),R.lc("ngForOf",e.impresoras),R.Cb(2),R.Fc("Mesas en el \xe1rea: ",e.entidad.mesas.length,""),R.Cb(2),R.lc("disabled",!t.form.valid),R.Cb(2),R.lc("ngIf",e.entidad.area),R.Cb(1),R.lc("ngIf",e.entidad.area)}},directives:[p.a,p.h,p.c,o.r,o.l,o.m,i.m,b.b,b.e,S.a,o.k,o.n,i.l,o.p,_.a,m.b,o.c,F.k],styles:[".full-width[_ngcontent-%COMP%]{width:100%}"]}),t})();const ta=["listaAreas"];let ea=(()=>{class t{constructor(){this.setArea=t=>this.area=t,this.refreshAreaList=()=>{this.lstAreasComponent.loadEntidades()},this.area={area:null,sede:null,nombre:null,impresora:null,impresora_factura:null}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=R.Hb({type:t,selectors:[["app-area"]],viewQuery:function(t,e){if(1&t&&R.Ic(ta,1),2&t){let t;R.sc(t=R.cc())&&(e.lstAreasComponent=t.first)}},decls:6,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getEntidadEv"],["listaAreas",""],[1,"col","m7","s12"],[3,"entidad","entidadSavedEv"]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"app-lista-area",2,3),R.bc("getEntidadEv",function(t){return e.setArea(t)}),R.Sb(),R.Sb(),R.Tb(4,"div",4),R.Tb(5,"app-form-area",5),R.bc("entidadSavedEv",function(){return e.refreshAreaList()}),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(5),R.lc("entidad",e.area))},directives:[ye,Ye],styles:[""]}),t})();var aa=a("u01r"),ia=a("M8s9");function na(t,e){if(1&t){const t=R.Ub();R.Tb(0,"tr"),R.Tb(1,"td"),R.Dc(2),R.Sb(),R.Tb(3,"td",9),R.Tb(4,"button",10),R.bc("click",function(){R.wc(t);const a=e.$implicit;return R.fc(2).seleccionarCliente(a)}),R.Dc(5," Seleccionar "),R.Sb(),R.Sb(),R.Sb()}if(2&t){const t=e.$implicit;R.Cb(2),R.Ec(t.nombre)}}function oa(t,e){if(1&t&&(R.Tb(0,"table"),R.Tb(1,"thead"),R.Tb(2,"tr"),R.Tb(3,"td"),R.Dc(4,"\xbfQui\xe9n est\xe1 llamando?"),R.Sb(),R.Ob(5,"td"),R.Sb(),R.Sb(),R.Tb(6,"tbody"),R.Cc(7,na,6,1,"tr",8),R.Sb(),R.Sb()),2&t){const t=R.fc();R.Cb(7),R.lc("ngForOf",t.clientes)}}const sa=function(){return{standalone:!0}};let ra=(()=>{class t{constructor(t,e,a,i,n){this.dialogRef=t,this.snackBar=e,this.data=a,this.clienteSrvc=i,this.dialog=n,this.telefonoPedido=null,this.clientes=[],this.validateKey=t=>{const e=String.fromCharCode(t.keyCode);return!!/[0-9]/.test(e)||(t.preventDefault(),!1)},this.cancelar=()=>this.dialogRef.close(),this.buscar=()=>{this.telefonoPedido&&this.telefonoPedido.length>=8?this.clienteSrvc.get({telefono:this.telefonoPedido}).subscribe(t=>{t&&t.length>0?this.clientes=t:this.dialog.open(aa.a,{width:"50%",disableClose:!0,data:{cliente:{cliente:null,nombre:null,nit:null,telefono:this.telefonoPedido}}}).afterClosed().subscribe(t=>{(null==t?void 0:t.cliente)&&this.dialogRef.close(t)})}):this.snackBar.open("Favor ingresar un n\xfamero de tel\xe9fono v\xe1lido.","Pedido",{duration:5e3})},this.seleccionarCliente=t=>{this.dialogRef.close(t)}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(P.f),R.Nb(T.a),R.Nb(P.a),R.Nb(ia.a),R.Nb(P.b))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-pide-telefono-dialog"]],decls:11,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"fullWidth"],["matInput","","type","text","placeholder","Tel\xe9fono","minlength","8","maxlength","25","required","",3,"ngModel","ngModelOptions","keypress","ngModelChange"],[4,"ngIf"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[4,"ngFor","ngForOf"],["align","center",2,"width","15%"],["mat-raised-button","","type","button","color","accent",3,"click"]],template:function(t,e){1&t&&(R.Tb(0,"h1",0),R.Dc(1,"Tel\xe9fono"),R.Sb(),R.Tb(2,"div",1),R.Tb(3,"mat-form-field",2),R.Tb(4,"input",3),R.bc("keypress",function(t){return e.validateKey(t)})("ngModelChange",function(t){return e.telefonoPedido=t}),R.Sb(),R.Sb(),R.Cc(5,oa,8,1,"table",4),R.Sb(),R.Tb(6,"div",5),R.Tb(7,"button",6),R.bc("click",function(){return e.cancelar()}),R.Dc(8," Cancelar "),R.Sb(),R.Tb(9,"button",7),R.bc("click",function(){return e.buscar()}),R.Dc(10," Buscar "),R.Sb(),R.Sb()),2&t&&(R.Cb(4),R.lc("ngModel",e.telefonoPedido)("ngModelOptions",R.nc(4,sa)),R.Cb(1),R.lc("ngIf",e.clientes.length>0),R.Cb(4),R.lc("disabled",!(e.telefonoPedido&&e.telefonoPedido.length>=8)))},directives:[P.g,P.d,b.b,m.b,o.c,o.g,o.f,o.p,o.k,o.n,i.m,P.c,_.a,i.l],styles:[""]}),t})();function ca(t,e){1&t&&(R.Tb(0,"th",12),R.Dc(1,"No."),R.Sb())}function la(t,e){if(1&t&&(R.Tb(0,"td",13),R.Tb(1,"span"),R.Dc(2),R.Sb(),R.Sb()),2&t){const t=e.$implicit;R.Cb(2),R.Ec(t.numero)}}function da(t,e){1&t&&(R.Tb(0,"th",12),R.Dc(1,"Nombre"),R.Sb())}function ua(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",15),R.Tb(1,"input",16),R.bc("ngModelChange",function(e){return R.wc(t),R.fc().$implicit.nombre=e}),R.Sb(),R.Tb(2,"button",17),R.bc("click",function(){R.wc(t);const e=R.fc().$implicit;return R.fc().eliminarFila(e)}),R.Tb(3,"mat-icon",18),R.Dc(4,"close"),R.Sb(),R.Sb(),R.Sb()}if(2&t){const t=R.fc().$implicit;R.Cb(1),R.lc("ngModel",t.nombre)}}function ha(t,e){if(1&t&&(R.Tb(0,"td",13),R.Cc(1,ua,5,1,"mat-form-field",14),R.Sb()),2&t){const t=R.fc();R.Cb(1),R.lc("ngIf",t.esMovil)}}function ba(t,e){1&t&&R.Ob(0,"tr",19)}function ma(t,e){1&t&&R.Ob(0,"tr",20)}let pa=(()=>{class t{constructor(t,e,a,i){this.dialogRef=t,this.data=e,this.snackBar=a,this.ls=i,this.displayedColumns=["numero","nombre"],this.esMovil=!1,this.terminar=()=>{const t=this.todosConNombre(this.data.cuentas);t<0?this.dialogRef.close(this.data.cuentas):this.snackBar.open(`Favor ingresar nombre a la cuenta #${this.data.cuentas[t].cuenta}...`,"Cuentas",{duration:5e3})},this.setTableDataSource=()=>this.dataSource=new C.k(this.data.cuentas),this.eliminarFila=t=>{const e=this.data.cuentas.findIndex(e=>+e.numero==+t.numero);e>0?(this.data.cuentas.splice(e,1),this.data.cuentas.map((t,e)=>t.numero=e+1),this.dataSource.data=this.data.cuentas):console.log("No se encuentra esta cuenta...")}}ngOnInit(){this.esMovil=this.ls.get(_e.a.usrTokenVar).enmovil||!1,this.setTableDataSource();for(let t=0;t<+this.data.comensales-1;t++)this.agregarFila()}todosConNombre(t){for(let e=0;e<t.length;e++)if(!t[e].nombre)return e;return-1}agregarFila(){this.data.cuentas.push({cuenta:0,numero:this.data.cuentas.length+1,nombre:null,productos:[]}),this.dataSource.data=this.data.cuentas}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(P.f),R.Nb(P.a),R.Nb(T.a),R.Nb(Pe.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-pide-datos-cuentas"]],decls:18,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-table","",1,"fullWidth",3,"dataSource"],["tblCuentas",""],["matColumnDef","numero"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-header-cell",""],["mat-cell",""],["class","fullWidth",4,"ngIf"],[1,"fullWidth"],["type","text","matInput","","name","nombre","required","",3,"ngModel","ngModelChange"],["type","button","mat-button","","matSuffix","","mat-icon-button","",3,"click"],[1,"iconFontSize"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(R.Tb(0,"h1",0),R.Dc(1,"Ingreso de datos de cuentas"),R.Sb(),R.Tb(2,"div",1),R.Tb(3,"table",2,3),R.Rb(5,4),R.Cc(6,ca,2,0,"th",5),R.Cc(7,la,3,1,"td",6),R.Qb(),R.Rb(8,7),R.Cc(9,da,2,0,"th",5),R.Cc(10,ha,2,1,"td",6),R.Qb(),R.Cc(11,ba,1,0,"tr",8),R.Cc(12,ma,1,0,"tr",9),R.Sb(),R.Sb(),R.Tb(13,"div",10),R.Tb(14,"button",11),R.bc("click",function(){return e.agregarFila()}),R.Dc(15," Agregar "),R.Sb(),R.Tb(16,"button",11),R.bc("click",function(){return e.terminar()}),R.Dc(17," Terminar "),R.Sb(),R.Sb()),2&t&&(R.Cb(3),R.lc("dataSource",e.dataSource),R.Cb(8),R.lc("matHeaderRowDef",e.displayedColumns),R.Cb(1),R.lc("matRowDefColumns",e.displayedColumns),R.Cb(2),R.lc("disabled",e.data.cuentas.length===+e.data.comensales),R.Cb(2),R.lc("disabled",e.data.cuentas.length!==+e.data.comensales))},directives:[P.g,P.d,C.j,C.c,C.e,C.b,C.g,C.i,P.c,_.a,C.d,C.a,i.m,b.b,m.b,o.c,o.p,o.k,o.n,b.f,h.a,C.f,C.h],styles:[".fullWidth[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:34pt!important}"]}),t})();var ga=a("K9lQ");function fa(t,e){if(1&t&&(R.Tb(0,"mat-option",12),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.usuario.usuario),R.Cb(1),R.Gc(" ",t.usuario.nombres," ",t.usuario.apellidos," ")}}function Ca(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",3),R.Tb(1,"input",13),R.bc("ngModelChange",function(e){return R.wc(t),R.fc().data.comensales=e}),R.Sb(),R.Sb()}if(2&t){const t=R.fc();R.Cb(1),R.lc("ngModel",t.data.comensales)}}let Sa=(()=>{class t{constructor(t,e,a,i,n){this.dialogRef=t,this.data=e,this.dialogDatosCuentas=a,this.usuarioSrvc=i,this.ls=n,this.lstMeseros=[],this.esMovil=!1,this.loadMeseros=()=>{this.usuarioSrvc.getMeserosTurno().subscribe(t=>{t&&(this.lstMeseros=t)})},this.toNumber=t=>+t}ngOnInit(){this.esMovil=this.ls.get(_e.a.usrTokenVar).enmovil||!1,this.loadMeseros()}pedirDatosDeCuentas(t){this.dialogDatosCuentas.open(pa,{width:"50%",disableClose:!0,data:{cuentas:t.cuentas,comensales:this.data.comensales}}).afterClosed().subscribe(e=>{t.cuentas=e,this.dialogRef.close(t)})}terminar(t=null){t?t.dividirCuentasPorSillas?this.pedirDatosDeCuentas(t):this.dialogRef.close(t):this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(P.f),R.Nb(P.a),R.Nb(P.b),R.Nb(ga.a),R.Nb(Pe.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-abrir-mesa"]],decls:20,vars:7,consts:[["mat-dialog-title",""],["novalidate","",3,"ngSubmit"],["frmAbrirMesa","ngForm"],[1,"separatorMargin"],["name","mesero",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","separatorMargin",4,"ngIf"],["name","esEvento",1,"separatorMargin",3,"ngModel","ngModelChange"],["name","dividirCuentasPorSillas",1,"separatorMargin",3,"ngModel","disabled","ngModelChange"],["align","end"],["mat-raised-button","","color","secondary",1,"btnAccion",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],[3,"value"],["type","text","matInput","","placeholder","# Comensales","name","comensales","required","",3,"ngModel","ngModelChange"]],template:function(t,e){if(1&t){const t=R.Ub();R.Tb(0,"h1",0),R.Dc(1,"Abrir mesa"),R.Sb(),R.Tb(2,"mat-dialog-content"),R.Tb(3,"form",1,2),R.bc("ngSubmit",function(){return R.wc(t),R.tc(4).form.valid}),R.Tb(5,"mat-form-field",3),R.Tb(6,"mat-label"),R.Dc(7,"Mesero"),R.Sb(),R.Tb(8,"mat-select",4),R.bc("ngModelChange",function(t){return e.data.mesero=t}),R.Cc(9,fa,2,3,"mat-option",5),R.Sb(),R.Sb(),R.Cc(10,Ca,2,1,"mat-form-field",6),R.Tb(11,"mat-checkbox",7),R.bc("ngModelChange",function(t){return+(e.data.esEvento=t)}),R.Dc(12,"\xbfEs evento?"),R.Sb(),R.Tb(13,"mat-checkbox",8),R.bc("ngModelChange",function(t){return+(e.data.dividirCuentasPorSillas=t)}),R.Dc(14,"\xbfDividir cuentas?"),R.Sb(),R.Sb(),R.Sb(),R.Tb(15,"mat-dialog-actions",9),R.Tb(16,"button",10),R.bc("click",function(){return e.terminar()}),R.Dc(17," Cancelar "),R.Sb(),R.Tb(18,"button",11),R.bc("click",function(){return e.terminar(e.data)}),R.Dc(19," Abrir mesa "),R.Sb(),R.Sb()}if(2&t){const t=R.tc(4);R.Cb(8),R.lc("ngModel",e.data.mesero),R.Cb(1),R.lc("ngForOf",e.lstMeseros),R.Cb(1),R.lc("ngIf",e.esMovil),R.Cb(1),R.lc("ngModel",+e.data.esEvento),R.Cb(2),R.lc("ngModel",+e.data.dividirCuentasPorSillas)("disabled",+e.data.comensales<=1),R.Cb(5),R.lc("disabled",!t.form.valid)}},directives:[P.g,P.d,o.r,o.l,o.m,b.b,b.e,S.a,o.k,o.n,i.l,i.m,v.a,P.c,_.a,F.k,m.b,o.c,o.p],styles:[".contenido[_ngcontent-%COMP%]{height:50%!important}.separatorMargin[_ngcontent-%COMP%]{margin-right:8px}"]}),t})(),va=(()=>{class t{constructor(t){this.http=t,this.moduleUrl="comanda",this.srvcErrHndl=new Te.a}get(t={}){return this.http.get(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/buscar?${Ee.stringify(t)}`).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}getComandaDeMesa(t){return this.http.get(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/get_comanda/${t}`).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}save(t){return this.http.post(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/guardar${t.comanda?"/"+t.comanda:""}`,t).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}enviarPedido(t,e){return this.http.post(`${_e.a.urlAppRestaurante}/callcenter/guardar_pedido/${t}`,e).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}saveDetalleCombo(t,e,a){return this.http.post(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/guardar_detalle_combo/${t}/${e}`,a).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}saveNotasGenerales(t){return this.http.post(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/guardar_notas_generales/${t.comanda}`,t).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}saveNotasProducto(t){return this.http.post(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/guardar_notas_producto/${t.detalle_comanda}`,t).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}saveDetalle(t,e,a){return this.http.post(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/guardar_detalle/${t}/${e}`,a).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}setProductoImpreso(t=0){return this.http.get(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/imprimir/${t}`).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}cerrarMesa(t){return this.http.post(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/cerrar_mesa/${t}`,null).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}getComandasOnLIne(){return this.http.get(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/get_comanda`).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}validaPwdGerenteTurno(t){return this.http.post(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/validapwdgerenteturno`,{pwd:t}).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}cerrarEstacion(t){return this.http.get(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/cerrar_estacion/${t}`).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}getCuenta(t){return this.http.get(`${_e.a.urlAppRestaurante}/cuenta/get_cuenta/${t}`).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}unificarCuentas(t,e){return this.http.get(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/unir_cuentas/${t}/${e}`).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}trasladarMesa(t,e,a){return this.http.get(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/trasladar_mesa/${t}/${e}/${a}`).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}getComandasCocina(){return this.http.get(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/get_comanda_cocina`).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}setComandaCocinada(t,e){return this.http.post(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/set_cocinado/${t}`,e).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}distribuirCuentas(t){return this.http.post(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/distribuir_cuentas`,t).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}cancelarPedido(t,e){return this.http.post(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/anular_pedido/${t}`,e).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}getComandasOnLine_Test(){return[{comanda:37,total:8,usuario:6,sede:1,estatus:1,turno:2,mesa:{mesa:1,area:{area:1,sede:1,area_padre:null,nombre:"Bar"},numero:1,posx:23.8667,posy:18.8333,tamanio:72,estatus:2},cuentas:[{cuenta:31,comanda:37,nombre:"\xdanica",numero:1,propina_monto:.8,propina_porcentaje:10,cerrada:1,productos:[{detalle_cuenta:75,cuenta_cuenta:31,detalle_comanda:79,comanda:37,articulo:{articulo:1,categoria_grupo:21,presentacion:null,descripcion:"Original",precio:8,bien_servicio:"B",existencias:969,impresora:{impresora:1,sede:1,nombre:"EPSON L120 Series",direccion_ip:null,ubicacion:null,bluetooth:0}},cantidad:1,precio:8,impreso:1,total:8,notas:"",numero_cuenta:1}]}]},{comanda:45,total:76,usuario:2,sede:1,estatus:1,turno:2,mesa:{mesa:3,area:{area:1,sede:1,area_padre:null,nombre:"Bar"},numero:3,posx:11.0667,posy:41.5,tamanio:72,estatus:2},cuentas:[{cuenta:39,comanda:45,nombre:"uno",numero:1,propina_monto:.8,propina_porcentaje:10,cerrada:1,productos:[{detalle_cuenta:84,cuenta_cuenta:39,detalle_comanda:88,comanda:45,articulo:{articulo:1,categoria_grupo:21,presentacion:null,descripcion:"Original",precio:8,bien_servicio:"B",existencias:969,impresora:{impresora:1,sede:1,nombre:"EPSON L120 Series",direccion_ip:null,ubicacion:null,bluetooth:0}},cantidad:1,precio:8,impreso:1,total:8,notas:"",numero_cuenta:1},{detalle_cuenta:85,cuenta_cuenta:40,detalle_comanda:89,comanda:45,articulo:{articulo:2,categoria_grupo:21,presentacion:null,descripcion:"Zero",precio:8,bien_servicio:"B",existencias:984,impresora:{impresora:1,sede:1,nombre:"EPSON L120 Series",direccion_ip:null,ubicacion:null,bluetooth:0}},cantidad:1,precio:8,impreso:1,total:8,notas:"",numero_cuenta:1},{detalle_cuenta:86,cuenta_cuenta:40,detalle_comanda:90,comanda:45,articulo:{articulo:6,categoria_grupo:23,presentacion:null,descripcion:"Fettuccine",precio:60,bien_servicio:"B",existencias:995,impresora:{impresora:2,sede:1,nombre:"EPSON L120 Series",direccion_ip:null,ubicacion:null,bluetooth:0}},cantidad:1,precio:60,impreso:1,total:60,notas:"",numero_cuenta:1}]}]}]}}return t.\u0275fac=function(e){return new(e||t)(R.Xb(n.b))},t.\u0275prov=R.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function _a(t,e){if(1&t&&(R.Tb(0,"mat-option",10),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t)("disabled",1==+t.cerrada),R.Cb(1),R.Fc(" ",t.nombre," ")}}function Ta(t,e){if(1&t&&(R.Tb(0,"mat-option",10),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t)("disabled",1==+t.cerrada),R.Cb(1),R.Fc(" ",t.nombre," ")}}let Da=(()=>{class t{constructor(t,e,a,i){this.dialogRef=t,this.comandaSrvc=e,this.snackBar=a,this.data=i}ngOnInit(){}cancelar(){this.dialogRef.close(!1)}unirCuentas(t,e){this.comandaSrvc.unificarCuentas(t.cuenta,e.cuenta).subscribe(t=>{t.exito?(this.snackBar.open(t.mensaje,"Cuentas",{duration:3e3}),this.dialogRef.close(!0)):this.snackBar.open(`ERROR:${t.mensaje}`,"Cuentas",{duration:7e3})})}unirTodas(){}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(P.f),R.Nb(va),R.Nb(T.a),R.Nb(P.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-unir-cuenta"]],decls:20,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate",""],["frmUnirCuenta","ngForm"],["name","cuentaDe","required","",3,"ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],["name","cuentaA","required","",3,"ngModel","ngModelChange"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[3,"value","disabled"]],template:function(t,e){if(1&t&&(R.Tb(0,"h1",0),R.Dc(1,"Unir cuentas"),R.Sb(),R.Tb(2,"div",1),R.Tb(3,"form",2,3),R.Tb(5,"mat-form-field"),R.Tb(6,"mat-label"),R.Dc(7,"Unir cuenta de"),R.Sb(),R.Tb(8,"mat-select",4),R.bc("ngModelChange",function(t){return e.cuentaDe=t}),R.Cc(9,_a,2,3,"mat-option",5),R.Sb(),R.Sb(),R.Tb(10,"mat-form-field"),R.Tb(11,"mat-label"),R.Dc(12,"con la cuenta de"),R.Sb(),R.Tb(13,"mat-select",6),R.bc("ngModelChange",function(t){return e.cuentaA=t}),R.Cc(14,Ta,2,3,"mat-option",5),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Tb(15,"div",7),R.Tb(16,"button",8),R.bc("click",function(){return e.cancelar()}),R.Dc(17," Cancelar "),R.Sb(),R.Tb(18,"button",9),R.bc("click",function(){return e.unirCuentas(e.cuentaDe,e.cuentaA)}),R.Dc(19," Unir cuentas "),R.Sb(),R.Sb()),2&t){const t=R.tc(4);R.Cb(8),R.lc("ngModel",e.cuentaDe),R.Cb(1),R.lc("ngForOf",e.data.mesaEnUso.cuentas),R.Cb(4),R.lc("ngModel",e.cuentaA),R.Cb(1),R.lc("ngForOf",e.data.mesaEnUso.cuentas),R.Cb(4),R.lc("disabled",!t.form.valid||+e.cuentaDe.numero==+e.cuentaA.numero)}},directives:[P.g,P.d,o.r,o.l,o.m,b.b,b.e,S.a,o.p,o.k,o.n,i.l,P.c,_.a,F.k],styles:[""]}),t})();function wa(t,e){if(1&t&&(R.Tb(0,"mat-option",10),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t),R.Cb(1),R.Gc(" ",t.area.nombre," - ",t.etiqueta||t.numero," ")}}let Ea=(()=>{class t{constructor(t,e,a,i,n){this.dialogRef=t,this.snackBar=e,this.mesaSrvc=a,this.comandaSrvc=i,this.data=n,this.mesasDisponibles=[],this.loadMesasDisponibles=()=>this.mesaSrvc.getDisponibles().subscribe(t=>this.mesasDisponibles=t),this.cancelar=()=>this.dialogRef.close(!1),this.trasladar=()=>{this.comandaSrvc.trasladarMesa(+this.data.mesaEnUso.comanda,+this.data.mesaEnUso.mesa.mesa,+this.destino.mesa).subscribe(t=>{t.exito?(this.snackBar.open(t.mensaje,"Traslado de mesa",{duration:3e3}),this.dialogRef.close(!0)):this.snackBar.open(`ERROR:${t.mensaje}`,"Traslado de mesa",{duration:7e3})})}}ngOnInit(){this.loadMesasDisponibles()}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(P.f),R.Nb(T.a),R.Nb(Me),R.Nb(va),R.Nb(P.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-traslado-mesa"]],decls:15,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate",""],["frmTrasladarMesa","ngForm"],[1,"fullWidth"],["name","destino","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[3,"value"]],template:function(t,e){if(1&t&&(R.Tb(0,"h1",0),R.Dc(1,"Trasladar a otra mesa"),R.Sb(),R.Tb(2,"div",1),R.Tb(3,"form",2,3),R.Tb(5,"mat-form-field",4),R.Tb(6,"mat-label"),R.Dc(7,"Trasladar a mesa:"),R.Sb(),R.Tb(8,"mat-select",5),R.bc("ngModelChange",function(t){return e.destino=t}),R.Cc(9,wa,2,3,"mat-option",6),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Tb(10,"div",7),R.Tb(11,"button",8),R.bc("click",function(){return e.cancelar()}),R.Dc(12," Cancelar "),R.Sb(),R.Tb(13,"button",9),R.bc("click",function(){return e.trasladar()}),R.Dc(14," Trasladar "),R.Sb(),R.Sb()),2&t){const t=R.tc(4);R.Cb(8),R.lc("ngModel",e.destino),R.Cb(1),R.lc("ngForOf",e.mesasDisponibles),R.Cb(4),R.lc("disabled",!t.form.valid)}},directives:[P.g,P.d,o.r,o.l,o.m,b.b,b.e,S.a,o.p,o.k,o.n,i.l,P.c,_.a,F.k],styles:[""]}),t})();var xa=a("wd/R");class Pa{constructor(t,e,a){this.tipo=t,this.subtitulo=e,this.etiquetaAceptar=a}}let ka=(()=>{class t{constructor(t,e,a){this.comandaSrvc=t,this.dialogRef=e,this.data=a,this.pwd=void 0,this.cancelar=()=>this.dialogRef.close(),this.terminar=()=>{switch(+this.data.tipo){case 1:this.validarPwdGerenteTurno()}},this.validarPwdGerenteTurno=()=>{this.comandaSrvc.validaPwdGerenteTurno(this.pwd).subscribe(t=>{this.dialogRef.close(!!t.exito&&t.esgerente)})}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(va),R.Nb(P.f),R.Nb(P.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-check-password"]],decls:14,vars:4,consts:[["mat-dialog-title",""],["novalidate","",3,"ngSubmit"],["frmValidaPwd","ngForm"],[1,"fullWidth"],["type","password","matInput","","placeholder","Contrase\xf1a","name","pwd","required","",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","color","secondary",1,"btnAccion",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"]],template:function(t,e){if(1&t){const t=R.Ub();R.Tb(0,"h1",0),R.Dc(1," Validar contrase\xf1a"),R.Ob(2,"br"),R.Dc(3),R.Sb(),R.Tb(4,"mat-dialog-content"),R.Tb(5,"form",1,2),R.bc("ngSubmit",function(){return R.wc(t),R.tc(6).form.valid}),R.Tb(7,"mat-form-field",3),R.Tb(8,"input",4),R.bc("ngModelChange",function(t){return e.pwd=t}),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Tb(9,"mat-dialog-actions",5),R.Tb(10,"button",6),R.bc("click",function(){return e.cancelar()}),R.Dc(11," Cancelar "),R.Sb(),R.Tb(12,"button",7),R.bc("click",function(){return e.terminar()}),R.Dc(13),R.Sb(),R.Sb()}if(2&t){const t=R.tc(6);R.Cb(3),R.Fc(" ",e.data.subtitulo||"Gerente de turno","\n"),R.Cb(5),R.lc("ngModel",e.pwd),R.Cb(4),R.lc("disabled",!t.form.valid),R.Cb(1),R.Fc(" ",e.data.etiquetaAceptar||"Validar"," ")}},directives:[P.g,P.d,o.r,o.l,o.m,b.b,m.b,o.c,o.p,o.k,o.n,P.c,_.a],styles:[""]}),t})();var Oa=a("KZK3");let ya=(()=>{class t{constructor(t){this.http=t,this.moduleUrl="cuenta",this.srvcErrHndl=new Te.a}save(t){return this.http.post(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/cobrar/${t.cuenta}`,t).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(R.Xb(n.b))},t.\u0275prov=R.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Ma=a("KFbY"),Ra=a("7JkF"),Ia=a("IHy4"),Fa=a("FjVI"),Aa=a("TOq3");function Na(t,e){if(1&t&&(R.Tb(0,"small"),R.Dc(1),R.Sb()),2&t){const t=R.fc();R.Cb(1),R.Fc(" - Factura a nombre de ",t.clienteSelected.nombre," ")}}function Ua(t,e){if(1&t&&(R.Tb(0,"tr"),R.Tb(1,"td"),R.Dc(2),R.Sb(),R.Tb(3,"td",21),R.Dc(4),R.gc(5,"number"),R.Sb(),R.Sb()),2&t){const t=e.$implicit;R.Cb(2),R.Gc("",t.cantidad,"\xa0",t.nombre||t.articulo.descripcion,""),R.Cb(2),R.Ec(R.ic(5,3,t.cantidad*t.precio+t.monto_extra,"1.2-2"))}}function ja(t,e){if(1&t&&(R.Tb(0,"mat-option",34),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.forma_pago),R.Cb(1),R.Fc(" ",t.descripcion," ")}}function $a(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",13),R.Tb(1,"input",35),R.bc("ngModelChange",function(e){return R.wc(t),R.fc().formaPago.monto=e}),R.Sb(),R.Sb()}if(2&t){const t=R.fc();R.Cb(1),R.lc("ngModel",t.formaPago.monto)}}function Ba(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",13),R.Tb(1,"input",36),R.bc("ngModelChange",function(e){return R.wc(t),R.fc().formaPago.propina=e}),R.Sb(),R.Sb()}if(2&t){const t=R.fc();R.Cb(1),R.lc("ngModel",t.formaPago.propina)}}function La(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",13),R.Tb(1,"input",37),R.bc("ngModelChange",function(e){return R.wc(t),R.fc().formaPago.documento=e}),R.Sb(),R.Sb()}if(2&t){const t=R.fc();R.Cb(1),R.lc("ngModel",t.formaPago.documento)("required",t.pideDocumento)}}function Ha(t,e){if(1&t){const t=R.Ub();R.Tb(0,"tr"),R.Tb(1,"td"),R.Dc(2),R.Sb(),R.Tb(3,"td",21),R.Dc(4),R.gc(5,"number"),R.Sb(),R.Tb(6,"td",21),R.Dc(7),R.gc(8,"number"),R.Sb(),R.Tb(9,"td",38),R.Tb(10,"button",39),R.bc("click",function(){R.wc(t);const a=e.index;return R.fc().delFormaPago(a)}),R.Tb(11,"mat-icon"),R.Dc(12,"delete_forever"),R.Sb(),R.Sb(),R.Sb(),R.Sb()}if(2&t){const t=e.$implicit;R.Cb(2),R.Ec(t.forma_pago.descripcion),R.Cb(2),R.Ec(R.ic(5,3,t.monto,"1.2-2")),R.Cb(3),R.Ec(R.ic(8,6,t.propina,"1.2-2"))}}function za(t,e){if(1&t&&(R.Tb(0,"mat-option",34),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.sede),R.Cb(1),R.Fc(" ",t.nombre," ")}}function qa(t,e){if(1&t){const t=R.Ub();R.Tb(0,"table",25),R.Tb(1,"caption"),R.Tb(2,"strong"),R.Dc(3,"Datos de env\xedo"),R.Sb(),R.Sb(),R.Tb(4,"tbody"),R.Tb(5,"tr"),R.Tb(6,"td"),R.Tb(7,"mat-form-field",13),R.Tb(8,"mat-label"),R.Dc(9,"Atiende:"),R.Sb(),R.Tb(10,"mat-select",40),R.bc("ngModelChange",function(e){return R.wc(t),R.fc().datosPedido.sede=e}),R.Cc(11,za,2,2,"mat-option",15),R.Sb(),R.Sb(),R.Sb(),R.Tb(12,"td"),R.Tb(13,"mat-form-field",13),R.Tb(14,"input",41),R.bc("ngModelChange",function(e){return R.wc(t),R.fc().datosPedido.direccion_entrega=e}),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Tb(15,"tr"),R.Tb(16,"td"),R.Tb(17,"mat-form-field",13),R.Tb(18,"input",42),R.bc("ngModelChange",function(e){return R.wc(t),R.fc().datosPedido.nombre=e}),R.Sb(),R.Sb(),R.Sb(),R.Tb(19,"td"),R.Tb(20,"mat-form-field",13),R.Tb(21,"input",43),R.bc("ngModelChange",function(e){return R.wc(t),R.fc().datosPedido.telefono=e}),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Sb()}if(2&t){const t=R.fc();R.Cb(10),R.lc("ngModel",t.datosPedido.sede),R.Cb(1),R.lc("ngForOf",t.sedes),R.Cb(3),R.lc("ngModel",t.datosPedido.direccion_entrega),R.Cb(4),R.lc("ngModel",t.datosPedido.nombre),R.Cb(3),R.lc("ngModel",t.datosPedido.telefono)}}function Va(t,e){if(1&t&&R.Ob(0,"app-cargando",44),2&t){const t=R.fc();R.lc("configuracion",t.cargandoConf)}}function Wa(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",32),R.bc("click",function(){return R.wc(t),R.fc().cobrar()}),R.Dc(1,"Facturar"),R.Sb()}if(2&t){const t=R.fc();R.lc("disabled",0==t.formasPagoDeCuenta.length||+t.inputData.saldo>0||!t.factReq.cliente||t.facturando)}}function Ga(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",32),R.bc("click",function(){return R.wc(t),R.fc().cobrar()}),R.Dc(1," Enviar "),R.Sb()}if(2&t){const t=R.fc();R.lc("disabled",0==t.formasPagoDeCuenta.length||+t.inputData.saldo>0||!t.factReq.cliente||t.facturando||!t.datosPedido.sede)}}const Qa=function(t,e,a){return{"saldo-pendiente":t,"saldo-exacto":e,"saldo-extra":a}};let Ja=(()=>{class t{constructor(t,e,a,i,n,o,s,r,c,l,d){this.dialog=t,this.dialogRef=e,this.data=a,this.snackBar=i,this.formaPagoSrvc=n,this.cobroSrvc=o,this.facturaSrvc=s,this.ls=r,this.socket=c,this.sedeSrvc=l,this.comandaSrvc=d,this.inputData={},this.lstFormasPago=[],this.formaPago={},this.formasPagoDeCuenta=[],this.esMovil=!1,this.facturando=!1,this.cargandoConf={w:75,h:75},this.pideDocumento=!1,this.sedes=[],this.datosPedido={sede:null,direccion_entrega:null,telefono:null,nombre:null,cliente:null},this.resetFactReq=()=>{this.factReq={cuentas:[],factura_serie:1,cliente:null,fecha_factura:xa().format(_e.a.dbDateFormat),moneda:1}},this.processData=()=>{this.data?this.inputData=this.data:this.data=this.inputData,this.inputData.totalDeCuenta=0,this.inputData.productosACobrar.forEach(t=>{this.inputData.totalDeCuenta+=t.precio*t.cantidad+t.monto_extra}),this.calculaPropina(),this.actualizaSaldo(),this.formaPago.monto=parseFloat(this.inputData.saldo).toFixed(2),this.inputData.clientePedido&&this.setClienteFacturar(this.inputData.clientePedido)},this.loadSedes=()=>{this.sedeSrvc.get().subscribe(t=>{t&&(this.sedes=t)})},this.calculaPropina=()=>{this.inputData.montoPropina=parseFloat((this.inputData.porcentajePropina*this.inputData.totalDeCuenta/100).toFixed(2)),this.actualizaSaldo()},this.loadFormasPago=()=>{this.formaPagoSrvc.get({activo:1}).subscribe(t=>{t&&t.length>0&&(this.lstFormasPago=t)})},this.addFormaPago=()=>{const t=this.lstFormasPago.filter(t=>+t.forma_pago==+this.formaPago.forma_pago)[0];1==+t.pedirautorizacion?this.dialog.open(ka,{width:"40%",disableClose:!0,data:new Pa(1)}).afterClosed().subscribe(e=>{e?this.agregaFormaPago(t):this.snackBar.open("La contrase\xf1a no es correcta","Formas de pago",{duration:5e3})}):this.agregaFormaPago(t)},this.agregaFormaPago=t=>{this.formasPagoDeCuenta.push({forma_pago:t,monto:parseFloat(this.formaPago.monto).toFixed(2),propina:this.formaPago.propina||0,documento:this.formaPago.documento||null,comision_monto:+this.formaPago.monto*+t.comision_porcentaje/100}),this.actualizaSaldo(),this.pideDocumento=!1},this.delFormaPago=t=>{this.formasPagoDeCuenta.splice(t,1),this.actualizaSaldo()},this.actualizaSaldo=()=>{let t=0;this.formasPagoDeCuenta.forEach(e=>t+=+e.monto),this.inputData.saldo=(+this.inputData.totalDeCuenta-t).toFixed(2),this.formaPago={monto:this.inputData.saldo}},this.cancelar=()=>this.dialogRef.close(),this.setClienteFacturar=t=>{this.clienteSelected=t,this.factReq.cliente=+t.cliente,1==+this.data.mesaenuso.mesa.escallcenter&&(this.datosPedido.nombre=t.nombre,this.datosPedido.direccion_entrega=t.direccion,this.datosPedido.telefono=t.telefono)},this.cobrar=()=>{this.facturando=!0;const t={cuenta:this.inputData.idcuenta,forma_pago:[],total:this.inputData.totalDeCuenta+this.inputData.montoPropina,propina_monto:this.inputData.montoPropina,propina_porcentaje:this.inputData.porcentajePropina,comision_monto:0};let e=0;for(const a of this.formasPagoDeCuenta)e+=a.comision_monto||0,t.forma_pago.push({forma_pago:+a.forma_pago.forma_pago,monto:+a.monto+ +a.comision_monto,propina:a.propina||0,documento:a.documento,comision_monto:a.comision_monto});t.comision_monto=e,t.total+=e,1!=+this.data.mesaenuso.mesa.escallcenter?(this.factReq.cuentas.push({cuenta:+this.inputData.idcuenta}),this.cobroSrvc.save(t).subscribe(t=>{t.exito&&!t.facturada?(this.snackBar.open("Cobro",`${t.mensaje}`,{duration:3e3}),t.facturar?this.facturaSrvc.facturar(this.factReq).subscribe(e=>{e.exito?this.dialog.open(Ne.a,{maxWidth:"400px",data:new Ne.b("Imprimir factura","\xbfDesea imprimir la factura?","S\xed","No")}).afterClosed().subscribe(a=>{a&&this.printFactura(e.factura),this.resetFactReq(),this.snackBar.open("Factura",`${e.mensaje}`,{duration:3e3}),this.facturando=!1,this.dialogRef.close(t.cuenta),this.socket.emit("refrescar:mesa",{mesaenuso:this.data.mesaenuso})}):(this.facturando=!1,this.snackBar.open("Factura",`ERROR: ${t.mensaje}`,{duration:7e3}),this.socket.emit("refrescar:mesa",{mesaenuso:this.data.mesaenuso}),this.dialogRef.close(t.cuenta))}):(this.socket.emit("refrescar:mesa",{mesaenuso:this.data.mesaenuso}),this.dialogRef.close(t.cuenta))):(this.facturando=!1,this.snackBar.open("Cobro",`ERROR: ${t.mensaje}`,{duration:7e3}),this.socket.emit("refrescar:mesa",{mesaenuso:this.data.mesaenuso}),this.dialogRef.close("closePanel"))})):this.enviarPedido(t)},this.enviarPedido=t=>{this.datosPedido.cliente={nombre:this.clienteSelected.nombre,apellidos:"",correo:this.clienteSelected.correo,telefono:this.datosPedido.telefono,nit:this.clienteSelected.nit,direccion:this.datosPedido.direccion_entrega};const e={cobro:t,pedido:this.datosPedido,factura:{cuentas:[{cuenta:t.cuenta}],factura_serie:1,cliente:this.clienteSelected.cliente,fecha_factura:xa().format(_e.a.dbDateFormat),moneda:1}};this.comandaSrvc.enviarPedido(+this.data.mesaenuso.comanda,e).subscribe(t=>{t.exito?(this.snackBar.open("Pedido",`#${t.pedido}. ${t.mensaje}`,{duration:3e3}),this.dialogRef.close("closePanel")):this.snackBar.open("Pedido",`ERROR: ${t.mensaje}`,{duration:7e3}),this.facturando=!1,this.socket.emit("refrescar:mesa",{mesaenuso:this.data.mesaenuso})})},this.procesaDetalleFactura=t=>{const e=[];return t.forEach(t=>e.push({Cantidad:+t.cantidad,Descripcion:t.articulo.descripcion,Total:+t.total})),e},this.getTotalDetalle=t=>{let e=0;return t.forEach(t=>e+=+t.total),e},this.getTotalImpuestosAdicionales=t=>{let e=0;return t.forEach(t=>e+=+t.total),e},this.printFactura=t=>{this.facturaSrvc.imprimir(+t.factura).subscribe(t=>{if(t.factura){const e={NombreEmpresa:t.factura.empresa.nombre,NitEmpresa:t.factura.empresa.nit,SedeEmpresa:t.factura.sedeFactura.nombre,DireccionEmpresa:t.factura.empresa.direccion,Fecha:xa(t.factura.fecha_factura).format(_e.a.dateFormat),Nit:t.factura.receptor.nit,Nombre:t.factura.receptor.nombre,Direccion:t.factura.receptor.direccion,Serie:t.factura.serie_factura,Numero:t.factura.numero_factura,Total:this.getTotalDetalle(t.factura.detalle)+this.getTotalImpuestosAdicionales(t.factura.impuestos_adicionales||[]),NoAutorizacion:t.factura.fel_uuid,NombreCertificador:t.factura.certificador_fel.nombre,NitCertificador:t.factura.certificador_fel.nit,FechaDeAutorizacion:t.factura.fecha_autorizacion,NoOrdenEnLinea:"",FormaDePago:"",DetalleFactura:this.procesaDetalleFactura(t.factura.detalle),Impresora:this.data.impresora,ImpuestosAdicionales:t.factura.impuestos_adicionales||[]};this.data.impresora?0==+this.data.impresora.bluetooth?this.socket.emit("print:factura",`${JSON.stringify(e)}`):(e.Fecha=xa(t.factura.fecha_factura).format(_e.a.dateFormatBT),this.printToBT(JSON.stringify(e))):this.socket.emit("print:factura",`${JSON.stringify(e)}`),this.snackBar.open(`Imprimiendo factura ${t.factura.serie_factura}-${t.factura.numero_factura}`,"Impresi\xf3n",{duration:3e3})}else this.snackBar.open(`ERROR: ${t.mensaje}`,"Impresi\xf3n",{duration:7e3})})},this.printToBT=(t="")=>{const e=window.open(`com.restouch.impresion://impresion/${t}`,"PrntBT","height=200,width=200,menubar=no,location=no,resizable=no,scrollbars=no,status=no");setTimeout(()=>e.close(),1e3)},this.onSelectionChangeFP=t=>{const e=this.lstFormasPago.findIndex(e=>+e.forma_pago==+t.value);e>-1&&(this.pideDocumento=1==+this.lstFormasPago[e].pedirdocumento)}}ngOnInit(){this.esMovil=this.ls.get(_e.a.usrTokenVar).enmovil||!1,this.resetFactReq(),this.processData(),this.loadFormasPago(),this.ls.get(_e.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(_e.a.usrTokenVar).sede_uuid),this.socket.on("reconnect",()=>this.socket.emit("joinRestaurant",this.ls.get(_e.a.usrTokenVar).sede_uuid))),this.loadSedes()}calculaPorcentajePropina(){this.inputData.porcentajePropina=parseFloat((100*this.inputData.montoPropina/this.inputData.totalDeCuenta).toFixed(2)),this.actualizaSaldo()}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(P.b),R.Nb(P.f),R.Nb(P.a),R.Nb(T.a),R.Nb(Oa.a),R.Nb(ya),R.Nb(Ma.a),R.Nb(Pe.a),R.Nb(Ra.a),R.Nb(Ia.a),R.Nb(va))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-cobrar-pedido"]],inputs:{inputData:"inputData"},decls:63,vars:29,consts:[["mat-dialog-title",""],[4,"ngIf"],["mat-dialog-content","",2,"height","650px"],[1,"row"],[1,"col","m5","s12","mat-elevation-z4","colHeight",2,"overflow-y","auto"],[3,"showAddButton","getClienteEv"],["lstClientes",""],[1,"col","m3","s12","mat-elevation-z4","colHeight",2,"overflow-y","auto"],[1,"table","table-sm","table-borderless","table-striped"],[4,"ngFor","ngForOf"],[1,"col","m4","s12","mat-elevation-z4","colHeight",2,"overflow-y","auto"],["novalidate",""],["frmFormasPago","ngForm"],[1,"fullWidth"],["name","forma_pago","cdkFocusInitial","","required","",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["class","fullWidth",4,"ngIf"],["align","end"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[1,"table","table-sm"],[1,"text-left"],[1,"text-right"],[1,"col","m8","s8"],["class","table table-sm table-borderless",4,"ngIf"],[1,"col","m4","s4"],[1,"table","table-sm","table-borderless"],[1,"text-right","font-weight-bold"],[1,"text-right","font-weight-bold","totalCuenta",2,"max-width","15%"],[1,"text-right","font-weight-bold",2,"max-width","15%"],[3,"ngClass"],["mat-dialog-actions","","align","end"],[3,"configuracion",4,"ngIf"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-raised-button","","color","accent",3,"disabled","click",4,"ngIf"],[3,"value"],["matInput","","placeholder","monto","name","monto","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Propina","name","propina",3,"ngModel","ngModelChange"],["matInput","","placeholder","Documento","name","documento",3,"ngModel","required","ngModelChange"],[1,"text-center"],["mat-icon-button","","type","button","color","warn",3,"click"],["name","sede","required","",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","Direcci\xf3n de entrega","name","direccion_entrega","maxlength","1000","required","",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","Nombre","name","nombre","maxlength","1000",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","Tel\xe9fono","name","telefono","maxlength","1000",3,"ngModel","ngModelChange"],[3,"configuracion"]],template:function(t,e){if(1&t&&(R.Tb(0,"h1",0),R.Dc(1),R.Cc(2,Na,2,1,"small",1),R.Sb(),R.Tb(3,"div",2),R.Tb(4,"div",3),R.Tb(5,"div",4),R.Tb(6,"app-lista-cliente",5,6),R.bc("getClienteEv",function(t){return e.setClienteFacturar(t)}),R.Sb(),R.Sb(),R.Tb(8,"div",7),R.Tb(9,"table",8),R.Tb(10,"tbody"),R.Cc(11,Ua,6,6,"tr",9),R.Sb(),R.Sb(),R.Sb(),R.Tb(12,"div",10),R.Tb(13,"form",11,12),R.Tb(15,"mat-form-field",13),R.Tb(16,"mat-label"),R.Dc(17,"Forma de pago"),R.Sb(),R.Tb(18,"mat-select",14),R.bc("ngModelChange",function(t){return e.formaPago.forma_pago=t})("selectionChange",function(t){return e.onSelectionChangeFP(t)}),R.Cc(19,ja,2,2,"mat-option",15),R.Sb(),R.Sb(),R.Cc(20,$a,2,1,"mat-form-field",16),R.Cc(21,Ba,2,1,"mat-form-field",16),R.Cc(22,La,2,2,"mat-form-field",16),R.Tb(23,"div",17),R.Tb(24,"button",18),R.bc("click",function(){return e.addFormaPago()}),R.Dc(25," Agregar "),R.Sb(),R.Sb(),R.Sb(),R.Ob(26,"hr"),R.Tb(27,"table",19),R.Tb(28,"thead"),R.Tb(29,"tr"),R.Tb(30,"th",20),R.Dc(31,"FP"),R.Sb(),R.Tb(32,"th",21),R.Dc(33,"Mon"),R.Sb(),R.Tb(34,"th",21),R.Dc(35,"Prop"),R.Sb(),R.Sb(),R.Sb(),R.Tb(36,"tbody"),R.Cc(37,Ha,13,9,"tr",9),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Tb(38,"div",3),R.Tb(39,"div",22),R.Cc(40,qa,22,5,"table",23),R.Sb(),R.Tb(41,"div",24),R.Tb(42,"table",25),R.Tb(43,"tbody"),R.Tb(44,"tr"),R.Tb(45,"td",26),R.Dc(46,"TOTAL DE CUENTA:"),R.Sb(),R.Tb(47,"td",27),R.Dc(48),R.gc(49,"number"),R.Sb(),R.Sb(),R.Tb(50,"tr"),R.Tb(51,"td",26),R.Dc(52,"PENDIENTE:"),R.Sb(),R.Tb(53,"td",28),R.Tb(54,"span",29),R.Dc(55),R.gc(56,"number"),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Tb(57,"div",30),R.Cc(58,Va,1,1,"app-cargando",31),R.Tb(59,"button",32),R.bc("click",function(){return e.cancelar()}),R.Dc(60,"Cancelar"),R.Sb(),R.Cc(61,Wa,2,1,"button",33),R.Cc(62,Ga,2,1,"button",33),R.Sb()),2&t){const t=R.tc(14);R.Cb(1),R.Fc(" Cobrar cuenta de ",e.data.cuenta," "),R.Cb(1),R.lc("ngIf",e.clienteSelected&&!!e.clienteSelected.cliente),R.Cb(4),R.lc("showAddButton",!0),R.Cb(5),R.lc("ngForOf",e.inputData.productosACobrar),R.Cb(7),R.lc("ngModel",e.formaPago.forma_pago),R.Cb(1),R.lc("ngForOf",e.lstFormasPago),R.Cb(1),R.lc("ngIf",e.esMovil),R.Cb(1),R.lc("ngIf",e.esMovil),R.Cb(1),R.lc("ngIf",e.esMovil&&e.pideDocumento),R.Cb(2),R.lc("disabled",!t.form.valid||e.inputData.saldo<=0),R.Cb(13),R.lc("ngForOf",e.formasPagoDeCuenta),R.Cb(3),R.lc("ngIf",1==+e.data.mesaenuso.mesa.escallcenter),R.Cb(8),R.Ec(R.ic(49,19,e.inputData.totalDeCuenta,"1.2-2")),R.Cb(6),R.lc("ngClass",R.qc(25,Qa,+e.inputData.saldo>0,0==+e.inputData.saldo,+e.inputData.saldo<0)),R.Cb(1),R.Ec(R.ic(56,22,e.inputData.saldo,"1.2-2")),R.Cb(3),R.lc("ngIf",e.facturando),R.Cb(1),R.lc("disabled",e.facturando),R.Cb(2),R.lc("ngIf",0==+e.data.mesaenuso.mesa.escallcenter),R.Cb(1),R.lc("ngIf",1==+e.data.mesaenuso.mesa.escallcenter)}},directives:[P.g,i.m,P.d,Fa.a,i.l,o.r,o.l,o.m,b.b,b.e,S.a,o.p,o.k,o.n,_.a,i.k,P.c,F.k,m.b,o.c,h.a,o.f,Aa.a],pipes:[i.f],styles:[".spacer[_ngcontent-%COMP%]{flex:1 1 auto}.totalCuenta[_ngcontent-%COMP%]{border-top:1px solid #000;border-bottom:5px double #000}.colHeight[_ngcontent-%COMP%]{height:400px}.saldo-pendiente[_ngcontent-%COMP%]{color:#da332d;border-bottom:5px double #da332d}.saldo-extra[_ngcontent-%COMP%]{color:#87ceeb;border-bottom:5px double #87ceeb}.saldo-exacto[_ngcontent-%COMP%]{color:green;border-bottom:5px double green}.propina[_ngcontent-%COMP%]{font-style:italic}"]}),t})();var Xa=a("XiUz");function Za(t,e){if(1&t){const t=R.Ub();R.Tb(0,"div",6),R.Tb(1,"mat-card",7),R.Ob(2,"mat-card-header"),R.Tb(3,"mat-card-content"),R.Rb(4),R.Tb(5,"div",0),R.Tb(6,"div",8),R.Tb(7,"button",9),R.bc("click",function(){R.wc(t);const a=e.$implicit;return R.fc().onConfirm(a.numero)}),R.Dc(8),R.Sb(),R.Sb(),R.Sb(),R.Qb(),R.Sb(),R.Sb(),R.Sb()}if(2&t){const t=e.$implicit;R.Cb(8),R.Ec(t.numero)}}class Ka{constructor(t,e,a,i){this.titlew=t,this.cantidadPedido=e,this.lblBtnConfirm=a,this.lblBtnDeny=i}}let Ya=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.pedidos=[],this.datos={respuesta:!1,pedido:""},this.title=e.titlew,this.lblBtnConfirm=e.lblBtnConfirm,this.lblBtnDeny=e.lblBtnDeny,this.cantidadPedido=e.cantidadPedido,console.log(+this.cantidadPedido);for(let a=0;a<+this.cantidadPedido;a++)console.log("asdf"),this.pedidos.push({numero:a+1});console.log(this.pedidos)}ngOnInit(){}onConfirm(t){this.datos.respuesta=!0,this.datos.pedido=t,this.dialogRef.close(this.datos)}onDismiss(){this.datos.respuesta=!1,this.dialogRef.close(this.datos)}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(P.f),R.Nb(P.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-dialog-pedido"]],decls:9,vars:2,consts:[[1,"row"],["mat-dialog-title",""],["fxFlex","100%","fxFlex.xs","100%",1,"bordeRght"],["fxLayout","row wrap","fxLayoutGap","10px grid","fxFlexFill","","fxLayoutAlign","start start",1,"divContenedor"],["fxFlex","100%","fxLayoutAlign","center start"],["fxFlex","20%","fxFlex.xs","100%","fxFlex.sm","100%","fxFlex.md","50%",4,"ngFor","ngForOf"],["fxFlex","20%","fxFlex.xs","100%","fxFlex.sm","100%","fxFlex.md","50%"],[1,"mat-elevation-z4"],[1,"col"],["mat-raised-button","","color","accent","type","button",3,"click"]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"h1",1),R.Dc(2),R.Sb(),R.Sb(),R.Tb(3,"mat-dialog-content"),R.Tb(4,"div",2),R.Tb(5,"div",3),R.Ob(6,"div",4),R.Cc(7,Za,9,1,"div",5),R.Sb(),R.Sb(),R.Ob(8,"mat-dialog-content"),R.Sb()),2&t&&(R.Cb(2),R.Fc(" ",e.title," "),R.Cb(5),R.lc("ngForOf",e.pedidos))},directives:[P.g,P.d,Xa.a,Xa.c,Xa.d,Xa.e,Xa.b,i.l,p.a,p.d,p.c,_.a],styles:[""]}),t})();var ti=a("NGYs");function ei(t,e){if(1&t&&(R.Tb(0,"div"),R.Tb(1,"h5"),R.Dc(2),R.Sb(),R.Sb()),2&t){const t=R.fc().$implicit;R.Cb(2),R.Fc(" ",t.descripcion," ")}}function ai(t,e){if(1&t&&(R.Tb(0,"mat-option",12),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t),R.Cb(1),R.Fc(" ",t.descripcion," ")}}const ii=function(){return{standalone:!0}};function ni(t,e){if(1&t&&(R.Rb(0),R.Tb(1,"mat-select",10),R.bc("ngModelChange",function(t){return e.$implicit.seleccion=t}),R.Cc(2,ai,2,2,"mat-option",11),R.Sb(),R.Ob(3,"mat-divider"),R.Ob(4,"br"),R.Qb()),2&t){const t=e.$implicit,a=R.fc(2).$implicit;R.Cb(1),R.lc("ngModel",t.seleccion)("ngModelOptions",R.nc(3,ii)),R.Cb(1),R.lc("ngForOf",a.receta)}}function oi(t,e){if(1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Cc(2,ni,5,4,"ng-container",5),R.Sb(),R.Sb()),2&t){const t=R.fc().$implicit;R.Cb(2),R.lc("ngForOf",t.input)}}function si(t,e){if(1&t&&(R.Tb(0,"div"),R.Cc(1,ei,3,1,"div",8),R.Cc(2,oi,3,1,"div",9),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.lc("ngIf",t.receta.length>0),R.Cb(1),R.lc("ngIf",t.receta.length>0)}}class ri{constructor(t,e,a){this.producto=t,this.lblBtnConfirm=e,this.lblBtnDeny=a}}let ci=(()=>{class t{constructor(t,e,a,i){this.dialogRef=t,this.data=e,this.articuloSvr=a,this.snackBar=i,this.getArticulos=()=>{this.articuloSvr.getArticuloCombo({articulo:this.producto.id}).subscribe(t=>{this.combo=t;for(let e=0;e<this.combo.receta.length;e++){const t=this.combo.receta[e];if(this.combo.receta[e].seleccionado=!1,1==+t.multiple){const t=[];for(let a=0;a<+this.combo.receta[e].cantidad_maxima;a++)t.push({id:a,seleccion:{}});this.combo.receta[e].input=t}else this.seleccion.receta.push(this.combo.receta[e])}})},this.setCantidad=()=>{for(let t=0;t<this.combo.receta.length;t++)if(1==+this.combo.receta[t].multiple){const e=[];for(let a=0;a<+this.combo.receta[t].cantidad_maxima*this.seleccion.cantidad;a++)e.push({id:a,seleccion:{}});this.combo.receta[t].input=e}},this.todosSeleccionados=t=>{let e=!0;t:for(const a of t)for(const t of a.input)if(void 0===t.seleccion.articulo){e=!1;break t}return e},this.datos={respuesta:!1,seleccion:[]},this.lblBtnConfirm=e.lblBtnConfirm,this.lblBtnDeny=e.lblBtnDeny,this.producto=e.producto,this.seleccion={cantidad:1,articulo:this.producto.id,descripcion:this.producto.nombre,receta:[]}}ngOnInit(){this.combo=[],this.getArticulos()}onConfirm(){const t=this.combo.receta.filter(t=>1==+t.multiple);if(this.todosSeleccionados(t)){for(const e of t){this.seleccion.receta.push({articulo:e.articulo,descripcion:e.descripcion,receta:[]});const t=this.seleccion.receta.findIndex(t=>+t.articulo==+e.articulo);for(const a of e.input)this.seleccion.receta[t].receta.push(a.seleccion)}this.datos.respuesta=!0,this.datos.seleccion=this.seleccion,this.dialogRef.close(this.datos)}else this.snackBar.open("Por favor seleccione todas las opciones para completar.","Combos",{duration:7e3})}onDismiss(){this.datos.respuesta=!1,this.dialogRef.close(this.datos)}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(P.f),R.Nb(P.a),R.Nb(ti.a),R.Nb(T.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-dialog-combo"]],decls:16,vars:4,consts:[[1,"row"],[1,"col","m12","s12"],[1,"fullWidth"],["type","number","matInput","","placeholder","Cantidad","min","1","step","1",3,"ngModel","ngModelOptions","change","ngModelChange"],[1,"col-sm-12"],[4,"ngFor","ngForOf"],["align","right",1,"row","text-right"],["mat-raised-button","","color","accent",1,"btnAccion",3,"click"],[4,"ngIf"],["class","row",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(R.Tb(0,"mat-dialog-content"),R.Tb(1,"div",0),R.Tb(2,"div",1),R.Tb(3,"h5"),R.Dc(4,"Cantidad"),R.Sb(),R.Tb(5,"mat-form-field",2),R.Tb(6,"input",3),R.bc("change",function(){return e.setCantidad()})("ngModelChange",function(t){return e.seleccion.cantidad=t}),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Tb(7,"div",0),R.Tb(8,"div",4),R.Cc(9,si,3,2,"div",5),R.Sb(),R.Sb(),R.Tb(10,"div",6),R.Tb(11,"div",1),R.Tb(12,"button",7),R.bc("click",function(){return e.onDismiss()}),R.Dc(13," Cancelar "),R.Sb(),R.Tb(14,"button",7),R.bc("click",function(){return e.onConfirm()}),R.Dc(15," Aceptar "),R.Sb(),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(6),R.lc("ngModel",e.seleccion.cantidad)("ngModelOptions",R.nc(3,ii)),R.Cb(3),R.lc("ngForOf",e.combo.receta))},directives:[P.d,b.b,o.o,m.b,o.c,o.k,o.n,i.l,_.a,i.m,S.a,g.a,F.k],styles:[""]}),t})(),li=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.terminar=(t=null)=>this.dialogRef.close(t)}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(P.f),R.Nb(P.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-notas-generales-comanda"]],decls:12,vars:1,consts:[["mat-dialog-title",""],["novalidate",""],["frmNotasGenCom","ngForm"],[1,"fullWidth"],["matInput","","placeholder","Notas generales","name","notasGenerales","maxlength","1000",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","color","secondary",1,"btnAccion",3,"click"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(R.Tb(0,"h1",0),R.Dc(1,"Notas generales de comanda"),R.Sb(),R.Tb(2,"mat-dialog-content"),R.Tb(3,"form",1,2),R.Tb(5,"mat-form-field",3),R.Tb(6,"textarea",4),R.bc("ngModelChange",function(t){return e.data.notasGenerales=t}),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Tb(7,"mat-dialog-actions",5),R.Tb(8,"button",6),R.bc("click",function(){return e.terminar()}),R.Dc(9," Cancelar "),R.Sb(),R.Tb(10,"button",7),R.bc("click",function(){return e.terminar(e.data.notasGenerales)}),R.Dc(11," Guardar "),R.Sb(),R.Sb()),2&t&&(R.Cb(6),R.lc("ngModel",e.data.notasGenerales))},directives:[P.g,P.d,o.r,o.l,o.m,b.b,m.b,o.c,o.f,o.k,o.n,P.c,_.a],styles:[""]}),t})(),di=(()=>{class t{constructor(t,e,a,i){this.dialogRef=t,this.snackBar=e,this.comandaSrvc=a,this.data=i,this.cancelar=()=>this.dialogRef.close(!1),this.guardar=()=>{this.nuevaCuenta.nombre&&(this.comanda.cuentas.findIndex(t=>t.nombre.toUpperCase().trim()===this.nuevaCuenta.nombre.toUpperCase().trim())<0?(this.comanda.cuentas.push(this.nuevaCuenta),this.comandaSrvc.save(this.comanda).subscribe(t=>{t.exito?(this.snackBar.open("Cuenta agregada con \xe9xito","Cuentas",{duration:3e3}),this.dialogRef.close(!0)):this.snackBar.open(`ERROR: ${t.mensaje}`,"Cuentas",{duration:7e3})})):this.snackBar.open("Ya existe una cuenta con ese nombre. Por favor ingrese otro nombre.","Cuentas",{duration:7e3}))}}ngOnInit(){if(+this.data.mesaEnUso.comanda>0){const t=this.data.mesaEnUso;this.comanda={area:+t.mesa.area.area,mesa:+t.mesa.mesa,mesero:+t.mesero.usuario,comensales:t.cuentas.length+1,dividirCuentasPorSillas:1,comanda:+t.comanda,cuentas:t.cuentas,replaceUnica:!1},this.nuevaCuenta={cuenta:0,numero:this.comanda.cuentas.length+1,nombre:void 0,productos:[]}}}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(P.f),R.Nb(T.a),R.Nb(va),R.Nb(P.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-nueva-cuenta"]],decls:12,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate",""],["frmNuevaCuenta","ngForm"],[1,"fullWidth"],["type","text","matInput","","placeholder","Nombre","name","nombre","required","",3,"ngModel","ngModelChange"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"]],template:function(t,e){if(1&t&&(R.Tb(0,"h1",0),R.Dc(1),R.Sb(),R.Tb(2,"div",1),R.Tb(3,"form",2,3),R.Tb(5,"mat-form-field",4),R.Tb(6,"input",5),R.bc("ngModelChange",function(t){return e.nuevaCuenta.nombre=t}),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Tb(7,"div",6),R.Tb(8,"button",7),R.bc("click",function(){return e.cancelar()}),R.Dc(9," Cancelar "),R.Sb(),R.Tb(10,"button",8),R.bc("click",function(){return e.guardar()}),R.Dc(11," Guardar "),R.Sb(),R.Sb()),2&t){const t=R.tc(4);R.Cb(1),R.Fc("Nueva cuenta - Comanda #",e.data.mesaEnUso.comanda,""),R.Cb(5),R.lc("ngModel",e.nuevaCuenta.nombre),R.Cb(4),R.lc("disabled",!t.form.valid)}},directives:[P.g,P.d,o.r,o.l,o.m,b.b,m.b,o.c,o.p,o.k,o.n,P.c,_.a],styles:[""]}),t})();function ui(t,e){if(1&t&&(R.Tb(0,"mat-option",12),R.Dc(1),R.Sb()),2&t){const t=e.$implicit,a=R.fc().$implicit;R.lc("value",+t.cuenta)("disabled",1==+t.cerrada||+a.idcuenta==+t.cuenta),R.Cb(1),R.Fc(" ",t.nombre," ")}}function hi(t,e){if(1&t&&(R.Tb(0,"tr"),R.Tb(1,"td"),R.Dc(2),R.Sb(),R.Tb(3,"td",7),R.Tb(4,"mat-form-field",8),R.Tb(5,"input",9),R.bc("ngModelChange",function(t){return e.$implicit.cantidad=t}),R.Sb(),R.Sb(),R.Sb(),R.Tb(6,"td"),R.Tb(7,"mat-select",10),R.bc("ngModelChange",function(t){return e.$implicit.idcuenta=t}),R.Cc(8,ui,2,3,"mat-option",11),R.Sb(),R.Sb(),R.Sb()),2&t){const t=e.$implicit,a=e.index,i=R.fc();R.Cb(2),R.Ec(t.nombre),R.Cb(3),R.lc("max",i.cantidadProducto[a])("ngModel",t.cantidad)("disabled",1==+t.combo),R.Cb(2),R.lc("ngModel",t.idcuenta),R.Cb(1),R.lc("ngForOf",i.comanda.cuentas)}}let bi=(()=>{class t{constructor(t,e,a,i){this.dialogRef=t,this.snackBar=e,this.comandaSrvc=a,this.data=i,this.cantidadProducto=[],this.cpLstProductos=[],this.compLstProductos=[],this.cancelar=()=>this.dialogRef.close(!1),this.guardar=()=>{const t=[];let e=0;for(const a of this.cpLstProductos)+a.idcuenta!=+this.compLstProductos[e].idcuenta&&t.push({detalle_comanda:+a.detalle_comanda,cuenta:+a.idcuenta,cantidad:+a.cantidad}),e++;t.length>0?this.comandaSrvc.distribuirCuentas(t).subscribe(t=>{t.exito?(this.snackBar.open("Productos redistribuidos","Cuentas",{duration:3e3}),this.dialogRef.close(!0)):(this.snackBar.open(`ERROR: ${t.mensaje}`,"Cuentas",{duration:7e3}),this.cancelar())}):(this.snackBar.open("Sin cambios en las cuentas.","Cuentas",{duration:7e3}),this.dialogRef.close(!0))}}ngOnInit(){if(+this.data.mesaEnUso.comanda>0){const t=this.data.mesaEnUso;this.comanda={area:+t.mesa.area.area,mesa:+t.mesa.mesa,mesero:+t.mesero.usuario,comensales:t.cuentas.length+1,dividirCuentasPorSillas:1,comanda:+t.comanda,cuentas:t.cuentas,replaceUnica:!1}}this.cpLstProductos=[],this.data.lstProductos.length>0&&(this.data.lstProductos.forEach(t=>{0==+this.data.mesaEnUso.cuentas.find(e=>+e.cuenta==+t.idcuenta).cerrada&&(this.cpLstProductos.push(t),this.cantidadProducto.push(+t.cantidad))}),this.cpLstProductos=JSON.parse(JSON.stringify(this.cpLstProductos)),this.compLstProductos=JSON.parse(JSON.stringify(this.cpLstProductos)))}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(P.f),R.Nb(T.a),R.Nb(va),R.Nb(P.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-distribuir-productos-cuentas"]],decls:17,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"rtxt","size-cantidad"],[4,"ngFor","ngForOf"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","type","button","color","accent",3,"click"],[1,"rtxt"],[1,"size-cantidad"],["type","number","matInput","","name","cantidad","min","1","required","",3,"max","ngModel","disabled","ngModelChange"],["name","cuenta","required","",3,"ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"]],template:function(t,e){1&t&&(R.Tb(0,"h1",0),R.Dc(1),R.Sb(),R.Tb(2,"div",1),R.Tb(3,"table"),R.Tb(4,"tr"),R.Tb(5,"th"),R.Dc(6,"Art\xedculo"),R.Sb(),R.Tb(7,"th",2),R.Dc(8,"Cantidad"),R.Sb(),R.Tb(9,"th"),R.Dc(10,"Cuenta"),R.Sb(),R.Sb(),R.Cc(11,hi,9,6,"tr",3),R.Sb(),R.Sb(),R.Tb(12,"div",4),R.Tb(13,"button",5),R.bc("click",function(){return e.cancelar()}),R.Dc(14," Cancelar "),R.Sb(),R.Tb(15,"button",6),R.bc("click",function(){return e.guardar()}),R.Dc(16," Guardar "),R.Sb(),R.Sb()),2&t&&(R.Cb(1),R.Fc("Distribuci\xf3n de productos - Comanda #",e.data.mesaEnUso.comanda,""),R.Cb(10),R.lc("ngForOf",e.cpLstProductos))},directives:[P.g,P.d,i.l,P.c,_.a,b.b,o.o,m.b,o.c,o.p,o.k,o.n,S.a,F.k],styles:[".size-cantidad[_ngcontent-%COMP%]{width:25%}"]}),t})();var mi=a("FHMA"),pi=a("qXgu");const gi=["txtCodigoBarras"];function fi(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-chip",13),R.bc("click",function(){R.wc(t);const a=e.$implicit;return R.fc().setSelectedCuenta(a.numero)}),R.Dc(1),R.Sb()}if(2&t){const t=e.$implicit,a=R.fc();R.lc("disabled",1==+t.cerrada||a.bloqueoBotones),R.Cb(1),R.Fc(" ",t.nombre," ")}}function Ci(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-chip",14),R.bc("click",function(){R.wc(t);const a=e.$implicit;return R.fc().loadSubcategorias(a)}),R.Dc(1),R.Sb()}if(2&t){const t=e.$implicit,a=R.fc();R.lc("disabled",a.bloqueoBotones),R.Cb(1),R.Fc(" ",t.descripcion," ")}}function Si(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-chip",17),R.bc("click",function(){R.wc(t);const a=e.$implicit,i=R.fc().index;return R.fc().loadSubcategorias({categoria:a.categoria},a,i)}),R.Dc(1),R.Sb()}if(2&t){const t=e.$implicit,a=R.fc(2);R.lc("disabled",a.bloqueoBotones),R.Cb(1),R.Fc(" ",t.descripcion," ")}}function vi(t,e){if(1&t&&(R.Tb(0,"div",15),R.Tb(1,"mat-chip-list"),R.Cc(2,Si,2,2,"mat-chip",16),R.Sb(),R.Sb()),2&t){const t=e.$implicit;R.Cb(2),R.lc("ngForOf",t)}}function _i(t,e){if(1&t){const t=R.Ub();R.Tb(0,"div",18),R.Tb(1,"mat-card",19),R.bc("click",function(){R.wc(t);const a=e.$implicit;return R.fc().addArticulo(a)}),R.Tb(2,"mat-card-content"),R.Tb(3,"p"),R.Dc(4),R.Sb(),R.Sb(),R.Tb(5,"mat-card-actions",20),R.Tb(6,"span",21),R.Dc(7,"Por comandar"),R.Sb(),R.Tb(8,"span",21),R.Dc(9,"Comandados"),R.Sb(),R.Sb(),R.Sb(),R.Sb()}if(2&t){const t=e.$implicit;R.Cb(4),R.Ec(t.descripcion)}}let Ti=(()=>{class t extends class{constructor(t,e,a,i,n,o,s,r){this.dialog=t,this.snackBar=e,this.comandaSrvc=a,this.socket=i,this.ls=n,this.pdfServicio=o,this.configSrvc=s,this.articuloSrvc=r,this.clientePedido=null,this.closeSideNavEv=new R.o,this.mesaSavedEv=new R.o,this.showPortalComanda=!1,this.showPortalCuenta=!1,this.noComanda=0,this.sumCuenta=0,this.categorias=[],this.bloqueoBotones=!1,this.rolesUsuario=[],this.impreso=0,this.usaCodigoBarras=!1,this.codigoBarras=null,this.alIniciar=()=>{this.resetMesaEnUso(),this.resetLstProductosSeleccionados(),this.resetLstProductosDeCuenta(),this.resetCuentaActiva(),this.impreso=0,this.noComanda=this.mesaEnUso.comanda||0,this.llenaProductosSeleccionados(),this.ls.get(_e.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(_e.a.usrTokenVar).sede_uuid),this.socket.on("reconnect",()=>this.socket.emit("joinRestaurant",this.ls.get(_e.a.usrTokenVar).sede_uuid))),this.usaCodigoBarras=this.configSrvc.getConfig(_e.a.CONSTANTES.RT_USA_CODIGO_BARRAS)||!1},this.resetMesaEnUso=()=>this.mesaEnUso={exito:!0,comanda:null,usuario:null,sede:null,estatus:null,mesa:{mesa:null,area:{area:null,sede:null,area_padre:null,nombre:null},numero:null,posx:null,posy:null,tamanio:null,estatus:null},numero_pedido:null,cuentas:[]},this.resetLstProductosSeleccionados=()=>this.lstProductosSeleccionados=[],this.resetLstProductosDeCuenta=()=>this.lstProductosDeCuenta=[],this.resetCuentaActiva=()=>this.cuentaActiva={cuenta:null,numero:null,nombre:null,productos:[]},this.resetListadoArticulos=()=>this.appLstProdAlt.loadArbolArticulos(),this.setListaCategorias=(t=[])=>this.categorias=this.setVerBotones(t),this.setVerBotones=t=>{for(const e of t)t:for(const t of e.categoria_grupo)for(const a of t.articulo)if(1==+a.mostrar_pos){t.mostrarEnPos=!0,e.mostrarEnPos=!0;continue t}return t},this.clickOnCategoria=t=>this.appLstProdAlt.fillSubCategorias(t.categoria_grupo),this.buscarArticulo=()=>{this.codigoBarras&&this.codigoBarras.trim().length>0&&this.articuloSrvc.getArticulos({codigo:this.codigoBarras.trim()}).subscribe(t=>{if(t&&t.length>0){const e=t[0];this.agregarProductos({id:+e.articulo,nombre:e.descripcion,precio:+e.precio,impresora:e.impresora,presentacion:e.presentacion,codigo:e.codigo,combo:e.combo,multiple:e.multiple}),this.codigoBarras=null,this.txtCodigoBarras.focus()}})},this.llenaProductosSeleccionados=(t=this.mesaEnUso)=>{null==this.mesaEnUso.comanda&&(this.mesaEnUso=t),this.lstProductosSeleccionados=[];for(const e of t.cuentas)for(const t of e.productos)this.lstProductosSeleccionados.push({id:+t.articulo.articulo,nombre:t.articulo.descripcion,cuenta:+t.numero_cuenta||1,idcuenta:+e.cuenta,cantidad:+t.cantidad,impreso:+t.impreso,precio:parseFloat(t.precio)||10,total:parseFloat(t.total)||parseFloat(t.cantidad)*parseFloat(t.precio),notas:t.notas||"",showInputNotas:!1,itemListHeight:"70px",detalle_comanda:+t.detalle_comanda,detalle_cuenta:+t.detalle_cuenta,impresora:t.articulo.impresora,detalle:t.detalle,monto_extra:+t.monto_extra||0,multiple:+t.articulo.multiple,combo:+t.articulo.combo})},this.cerrarMesa=()=>{this.comandaSrvc.cerrarMesa(this.mesaEnUso.mesa.mesa).subscribe(t=>{t.exito?(this.snackBar.open(t.mensaje,"Comanda",{duration:3e3}),this.mesaEnUso.mesa.estatus=1,this.mesaSavedEv.emit(),this.socket.emit("refrescar:mesa",{mesaenuso:this.mesaEnUso})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Comanda",{duration:7e3})})},this.printToBT=(t="")=>{const e=window.open(`com.restouch.impresion://impresion/${t}`,"PrntBT","height=200,width=200,menubar=no,location=no,resizable=no,scrollbars=no,status=no");setTimeout(()=>e.close(),1e3),this.bloqueoBotones=!1},this.printComandaPDF=()=>{const t=+this.cuentaActiva.cuenta;this.pdfServicio.getComanda(t).subscribe(e=>{if(e){const a=new Blob([e],{type:"application/pdf"}),i=window.URL.createObjectURL(a);window.open(i,`cuenta_${t}`,"height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no")}else this.snackBar.open("No se pudo generar la comanda...","Comanda",{duration:3e3})})},this.sumaDetalle=t=>{let e=0;for(const a of t)e+=+a.total||0,e+=+a.monto_extra||0;return e},this.enviarPedido=()=>{const t=this.mesaEnUso.cuentas[0];this.cuentaActiva=this.mesaEnUso.cuentas.find(e=>+e.numero==+t.numero);const e=this.lstProductosSeleccionados.filter(t=>+t.cuenta==+this.cuentaActiva.numero);e.map(t=>t.impreso=1),this.noComanda=this.mesaEnUso.comanda,this.cuentaActiva.productos=this.prepProductosComanda(e),this.mesaEnUso.cuentas.findIndex(t=>+t.cuenta==+this.cuentaActiva.cuenta)>-1&&this.comandaSrvc.save({area:this.mesaEnUso.mesa.area.area,mesa:this.mesaEnUso.mesa.mesa,mesero:this.mesaEnUso.usuario,comanda:this.mesaEnUso.comanda,cuentas:this.mesaEnUso.cuentas,numero_pedido:this.mesaEnUso.numero_pedido}).subscribe(e=>{e.exito&&(this.mesaEnUso.numero_pedido=e.comanda.numero_pedido,this.comandaSrvc.setProductoImpreso(t.cuenta).subscribe(e=>{this.llenaProductosSeleccionados(e.comanda),this.setSelectedCuenta(t.numero),this.cobrarCuenta()}))})},this.cambiarEstatusCuenta=t=>{const e=this.mesaEnUso.cuentas.findIndex(e=>+e.cuenta==+t.cuenta);this.mesaEnUso.cuentas[e].cerrada=+t.cerrada},this.esCajero=()=>!1,this.trasladoMesa=()=>{this.dialog.open(Ea,{width:"55%",data:{mesaEnUso:this.mesaEnUso}}).afterClosed().subscribe(t=>{t&&(this.socket.emit("refrescar:mesa",{mesaenuso:this.mesaEnUso}),this.closeSideNavEv.emit(this.mesaEnUso))})},this.getNotasGenerales=()=>{this.dialog.open(li,{width:"50%",data:{notasGenerales:this.mesaEnUso.notas_generales||""}}).afterClosed().subscribe(t=>{null!==t&&t.trim().length>0&&this.comandaSrvc.saveNotasGenerales({comanda:this.mesaEnUso.comanda,notas_generales:t}).subscribe(e=>{e.exito?(this.mesaEnUso.notas_generales=t,this.snackBar.open(e.mensaje,"Comanda",{duration:3e3})):this.snackBar.open(`ERROR: ${e.mensaje}`,"Comanda",{duration:7e3})})})},this.nuevaCuenta=()=>{this.dialog.open(di,{width:"50%",data:{mesaEnUso:this.mesaEnUso}}).afterClosed().subscribe(t=>{t&&this.closeSideNavEv.emit()})},this.distribuirProductos=()=>{this.dialog.open(bi,{width:"50%",data:{mesaEnUso:this.mesaEnUso,lstProductos:this.lstProductosSeleccionados||[]}}).afterClosed().subscribe(t=>{t&&this.closeSideNavEv.emit()})}}setSelectedCuenta(t){this.bloqueoBotones=!0,this.cuentaActiva=this.mesaEnUso.cuentas.find(e=>+e.numero==+t),this.setLstProductosDeCuenta(),this.bloqueoBotones=!1}setSumaCuenta(t){let e=0;for(const a of t)e+=a.precio*a.cantidad;this.sumCuenta=e}setLstProductosDeCuenta(){this.lstProductosDeCuenta=this.lstProductosSeleccionados.filter(t=>+t.cuenta==+this.cuentaActiva.numero)}agregarProductos(t){1==+t.combo||1==+t.multiple?(this.bloqueoBotones=!0,this.dialog.open(ci,{maxWidth:"50%",data:new ri(t,"S\xed","No")}).afterClosed().subscribe(t=>{t&&t.respuesta&&t.seleccion.receta.length>0?this.comandaSrvc.saveDetalleCombo(this.mesaEnUso.comanda,this.cuentaActiva.cuenta,t.seleccion).subscribe(t=>{t.exito?(this.mesaEnUso=t.comanda,this.llenaProductosSeleccionados(this.mesaEnUso),this.setSelectedCuenta(+this.cuentaActiva.numero)):this.snackBar.open(`ERROR:${t.mensaje}`,"Comanda",{duration:3e3}),this.bloqueoBotones=!1}):(this.bloqueoBotones=!1,this.snackBar.open("Error, Debe seleccionar los productos del combo","Comanda",{duration:7e3}))})):this.addProductoSelected(t)}addProductoSelected(t){if(this.bloqueoBotones=!0,+this.cuentaActiva.numero){const e=this.lstProductosSeleccionados.findIndex(e=>+e.id==+t.id&&+e.cuenta==+this.cuentaActiva.numero&&0==+e.impreso);if(e<0)this.detalleComanda={articulo:t.id,cantidad:1,precio:+t.precio,total:1*+t.precio,notas:""},this.comandaSrvc.saveDetalle(this.mesaEnUso.comanda,this.cuentaActiva.cuenta,this.detalleComanda).subscribe(t=>{t.exito?(this.mesaEnUso=t.comanda,this.llenaProductosSeleccionados(this.mesaEnUso),this.setSelectedCuenta(+this.cuentaActiva.numero)):this.snackBar.open(`ERROR:${t.mensaje}`,"Comanda",{duration:3e3}),this.bloqueoBotones=!1});else{const t=this.lstProductosSeleccionados[e];this.detalleComanda={detalle_cuenta:t.detalle_cuenta,detalle_comanda:t.detalle_comanda,articulo:t.id,cantidad:+t.cantidad+1,precio:+t.precio,total:(+t.cantidad+1)*+t.precio,notas:t.notas},this.comandaSrvc.saveDetalle(this.mesaEnUso.comanda,this.cuentaActiva.cuenta,this.detalleComanda).subscribe(t=>{t.exito?(this.mesaEnUso=t.comanda,this.llenaProductosSeleccionados(this.mesaEnUso),this.setSelectedCuenta(+this.cuentaActiva.numero)):this.snackBar.open(`ERROR:${t.mensaje}`,"Comanda",{duration:3e3}),this.bloqueoBotones=!1})}this.setLstProductosDeCuenta()}}updProductosCuenta(t){const e=t.listaProductos||[],a=this.lstProductosSeleccionados.filter(t=>+t.cuenta!=+this.cuentaActiva.numero);this.lstProductosSeleccionados=e.length>0?a.concat(e):a,t.comanda&&(this.mesaEnUso=t.comanda,this.llenaProductosSeleccionados(this.mesaEnUso),this.setSelectedCuenta(+this.cuentaActiva.numero))}prepProductosComanda(t){const e=[];for(const a of t)e.push({articulo:a.id,cantidad:a.cantidad,precio:a.precio,total:a.total,notas:a.notas,impreso:1,detalle_comanda:a.detalle_comanda,detalle_cuenta:a.detalle_cuenta});return e}validarImpresion(t=!1){const e=this.configSrvc.getConfig(_e.a.CONSTANTES.RT_INGRESO_NUMERO_PEDIDO);if(1==+this.mesaEnUso.mesa.esmostrador&&e&&!this.mesaEnUso.numero_pedido){let e=this.configSrvc.getConfig(_e.a.CONSTANTES.RT_TOTAL_NUMEROS_PEDIDO);(!e||e<=0)&&(e=30),this.dialog.open(Ya,{maxWidth:"50%",data:new Ka("Numero de Pedido",e,"S\xed","No")}).afterClosed().subscribe(e=>{e&&e.respuesta&&e.pedido?(this.mesaEnUso.numero_pedido=e.pedido,this.printComanda(t)):this.snackBar.open("Error, Debe seleccionar un numero de pedido","Comanda",{duration:7e3})})}else this.printComanda(t)}printComanda(t=!1){this.bloqueoBotones=!0,this.impreso=0;const e=this.configSrvc.getConfig(_e.a.CONSTANTES.RT_MODO_COMANDA)||1;for(let a=0;a<this.mesaEnUso.cuentas.length;a++){const i=this.mesaEnUso.cuentas[a];this.cuentaActiva=this.mesaEnUso.cuentas.find(t=>+t.numero==+i.numero);const n=this.lstProductosSeleccionados.filter(t=>+t.cuenta==+this.cuentaActiva.numero),o=n.filter(t=>0==+t.impreso&&+t.cantidad>0);o.length>0?(n.map(t=>t.impreso=1),this.noComanda=this.mesaEnUso.comanda,this.cuentaActiva.productos=this.prepProductosComanda(n),this.mesaEnUso.cuentas.findIndex(t=>+t.cuenta==+this.cuentaActiva.cuenta)>-1&&this.comandaSrvc.save({area:this.mesaEnUso.mesa.area.area,mesa:this.mesaEnUso.mesa.mesa,mesero:this.mesaEnUso.usuario,comanda:this.mesaEnUso.comanda,cuentas:this.mesaEnUso.cuentas,numero_pedido:this.mesaEnUso.numero_pedido}).subscribe(a=>{a.exito?(this.mesaEnUso.numero_pedido=a.comanda.numero_pedido,this.comandaSrvc.setProductoImpreso(i.cuenta).subscribe(a=>{a.exito&&this.impreso++,this.llenaProductosSeleccionados(a.comanda),this.setSelectedCuenta(i.numero),this.snackBar.open("Cuenta actualizada",`Cuenta #${i.numero}`,{duration:3e3});let n=[],s=[];try{n=o.filter(t=>0==+t.impresora.bluetooth),s=o.filter(t=>1==+t.impresora.bluetooth)}catch(r){console.log("PRODUCTOS A IMPRIMIR = ",o),console.log("NORMAL = ",n),console.log("BT = ",s),console.log(r)}t?this.printComandaPDF():(n.length>0&&(3!==e?(this.socket.emit("print:comanda",`${JSON.stringify({Tipo:"Comanda",Nombre:this.cuentaActiva.nombre,Numero:this.noComanda,DetalleCuenta:n,Ubicacion:`${this.mesaEnUso.mesa.area.nombre} - Mesa ${this.mesaEnUso.mesa.etiqueta||this.mesaEnUso.mesa.numero}`,Mesero:`${this.mesaEnUso.mesero.nombres} ${this.mesaEnUso.mesero.apellidos}`,Total:null,NumeroPedido:this.mesaEnUso.numero_pedido,NotasGenerales:this.mesaEnUso.notas_generales||""})}`),this.snackBar.open(`Imprimiendo comanda #${this.noComanda}`,"Comanda",{duration:7e3})):this.snackBar.open(`Comanda #${this.noComanda} enviada a cocina`,"Comanda",{duration:7e3}),this.bloqueoBotones=!1),s.length>0&&3!==e&&this.printToBT(JSON.stringify({Tipo:"Comanda",Nombre:this.cuentaActiva.nombre,Numero:this.noComanda,DetalleCuenta:s,Ubicacion:`${this.mesaEnUso.mesa.area.nombre} - Mesa ${this.mesaEnUso.mesa.etiqueta||this.mesaEnUso.mesa.numero}`,Mesero:`${this.mesaEnUso.mesero.nombres} ${this.mesaEnUso.mesero.apellidos}`,Total:null,NumeroPedido:this.mesaEnUso.numero_pedido}))),+this.impreso===this.mesaEnUso.cuentas.length&&(this.impreso=0,this.socket.emit("refrescar:mesa",{mesaenuso:this.mesaEnUso}),this.socket.emit("refrescar:listaCocina",{mesaenuso:this.mesaEnUso}),0==+this.mesaEnUso.mesa.esmostrador?this.closeSideNavEv.emit():this.cobrarCuenta())})):this.snackBar.open(`ERROR: ${a.mensaje}`,`Cuenta #${this.cuentaActiva.numero}`,{duration:3e3}),this.bloqueoBotones=!1})):(this.impreso++,this.bloqueoBotones=!1)}}printCuenta(){this.bloqueoBotones=!0,this.lstProductosAImprimir=this.lstProductosDeCuenta.filter(t=>1==+t.impreso),this.setSumaCuenta(this.lstProductosAImprimir);const t=this.sumaDetalle(this.lstProductosAImprimir),e=this.mesaEnUso.mesa.impresora||this.mesaEnUso.mesa.area.impresora,a=this.configSrvc.getConfig(_e.a.CONSTANTES.RT_IMPRIME_PROPINA_SUGERIDA),i={Tipo:"Cuenta",Nombre:this.cuentaActiva.nombre,Numero:null,DetalleCuenta:this.lstProductosAImprimir,Total:t,Empresa:this.ls.get(_e.a.usrTokenVar).empresa,Restaurante:this.ls.get(_e.a.usrTokenVar).restaurante,PropinaSugerida:a?(.1*t).toFixed(2):null,Impresora:e,Ubicacion:`${this.mesaEnUso.mesa.area.nombre} - Mesa ${this.mesaEnUso.mesa.etiqueta||this.mesaEnUso.mesa.numero} - Comanda ${this.mesaEnUso.comanda}`,Mesero:`${this.mesaEnUso.mesero.nombres} ${this.mesaEnUso.mesero.apellidos}`};0==+e.bluetooth?this.socket.emit("print:cuenta",`${JSON.stringify(i)}`):this.printToBT(JSON.stringify(i)),this.snackBar.open(`Imprimiendo cuenta de ${this.cuentaActiva.nombre}`,"Cuenta",{duration:7e3}),this.bloqueoBotones=!1,this.closeSideNavEv.emit()}unirCuentas(){this.dialog.open(Da,{width:"55%",data:{lstProductosSeleccionados:this.lstProductosSeleccionados,mesaEnUso:this.mesaEnUso}}).afterClosed().subscribe(t=>{t&&this.closeSideNavEv.emit()})}cobrarCuenta(){this.comandaSrvc.getCuenta(this.cuentaActiva.cuenta).subscribe(t=>{if(t.pendiente.length>0)this.snackBar.open("Cobro","Tiene productos sin comandar",{duration:3e3});else{const t=this.lstProductosDeCuenta.filter(t=>1==+t.impreso);t.length>0?this.dialog.open(Ja,{width:"95%",data:{mesaenuso:this.mesaEnUso,cuenta:this.cuentaActiva.nombre,idcuenta:this.cuentaActiva.cuenta,productosACobrar:t,porcentajePropina:0,impresora:0==+this.mesaEnUso.mesa.esmostrador?this.mesaEnUso.mesa.area.impresora_factura||null:this.mesaEnUso.mesa.impresora||this.mesaEnUso.mesa.area.impresora,clientePedido:this.clientePedido}}).afterClosed().subscribe(t=>{t&&"closePanel"!==t?(this.cambiarEstatusCuenta(t),this.closeSideNavEv.emit()):"closePanel"===t&&this.closeSideNavEv.emit()}):this.snackBar.open("Cobro","Sin productos a cobrar.",{duration:3e3})}})}}{constructor(t,e,a,i,n,o,s,r,c,l){super(a,i,n,o,s,r,c,l),this.dialogRef=t,this.data=e,this.dialog=a,this.snackBar=i,this.comandaSrvc=n,this.socket=o,this.ls=s,this.pdfServicio=r,this.configSrvc=c,this.articuloSrvc=l,this.closeSideNavEv=new R.o,this.mesaSavedEv=new R.o,this.subCategorias=[],this.listaSubCategorias=[],this.articulos=[],this.fullListArticulos=[],this.setDatos=()=>{this.data&&this.data.mesa&&(this.mesaEnUso=this.data.mesa,this.setSelectedCuenta(this.mesaEnUso.cuentas[0].numero))},this.cerrar=()=>this.dialogRef.close(),this.resetArticulos=()=>this.articulos=[],this.resetListaSubCategorias=()=>this.listaSubCategorias=[],this.loadArticulosDePOS=()=>{this.articuloSrvc.getArticulosDePOS().subscribe(t=>{t&&(this.categorias=t.categorias,this.subCategorias=t.subcategorias,this.articulos=t.articulos,this.fullListArticulos=JSON.parse(JSON.stringify(this.articulos)))})},this.loadSubcategorias=(t,e=null,a=0)=>{if(!this.bloqueoBotones){const i={categoria:t.categoria};e?i.categoria_grupo_grupo=e.categoria_grupo:this.resetListaSubCategorias(),this.listaSubCategorias.length>0&&this.listaSubCategorias.splice(a+1),e||(this.listaSubCategorias=this.subCategorias.filter(e=>+e.categoria==+t.categoria)),this.articuloSrvc.getCategoriaGrupoImpresora(i).subscribe(t=>{t.length>0?this.listaSubCategorias.push(t):this.filterArticulos(+e.categoria_grupo)})}},this.loadArticulos=(t=null)=>{if(!this.bloqueoBotones){const e={mostrar_pos:1,categoria_grupo:null};t?e.categoria_grupo=t:delete e.categoria_grupo,this.articuloSrvc.getArticulos(e).subscribe(t=>{this.articulos=t})}},this.filterArticulos=(t=null)=>{this.bloqueoBotones||(this.articulos=t?this.fullListArticulos.filter(e=>+e.categoria_grupo==+t):this.fullListArticulos)},this.addArticulo=t=>{this.bloqueoBotones||this.agregarProductos({id:+t.articulo,nombre:t.descripcion,precio:+t.precio,impresora:t.impresora,presentacion:t.presentacion,codigo:t.codigo,combo:t.combo,multiple:t.multiple})}}ngOnInit(){this.alIniciar(),this.loadArticulosDePOS(),this.loadArticulos(),this.setDatos()}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(P.f),R.Nb(P.a),R.Nb(P.b),R.Nb(T.a),R.Nb(va),R.Nb(Ra.a),R.Nb(Pe.a),R.Nb(mi.a),R.Nb(pi.a),R.Nb(ti.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-tran-comanda-alt"]],viewQuery:function(t,e){if(1&t&&R.Ic(gi,1),2&t){let t;R.sc(t=R.cc())&&(e.txtCodigoBarras=t.first)}},outputs:{closeSideNavEv:"closeSideNavEv",mesaSavedEv:"mesaSavedEv"},features:[R.zb],decls:19,vars:8,consts:[["fxLayout","row","fxLayout.xs","column"],["fxFlex","50%","fxFelx.xs","100%","fxLayoutAlign","start start"],[1,"bld",2,"font-size","16pt","margin-left","10px"],["fxFlex","50%","fxFelx.xs","100%","fxLayoutAlign","end start"],["mat-raised-button","","type","button","color","accent",2,"margin-left","8px",3,"disabled","click"],["mat-dialog-content","",1,"contenido","bordeTest"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","center center"],["color","accent","selected","",3,"disabled","click",4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","start center"],["selected","","color","accent",3,"disabled","click",4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","start center","class","divSubCategorias",4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayoutGap","8px grid",1,"divArticulos"],["fxFlex","20%","fxFlex.xs","100%","fxFlex.sm","33%","fxFlex.md","25%",4,"ngFor","ngForOf"],["color","accent","selected","",3,"disabled","click"],["selected","","color","accent",3,"disabled","click"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","start center",1,"divSubCategorias"],["selected","","color","warn","class","btnAccion",3,"disabled","click",4,"ngFor","ngForOf"],["selected","","color","warn",1,"btnAccion",3,"disabled","click"],["fxFlex","20%","fxFlex.xs","100%","fxFlex.sm","33%","fxFlex.md","25%"],[1,"mat-elevation-z4",3,"click"],["align","around"],["matBadge","4","matBadgeOverlap","false"]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"span",2),R.Dc(3),R.Sb(),R.Sb(),R.Tb(4,"div",3),R.Tb(5,"button",4),R.bc("click",function(){return e.cerrar()}),R.Dc(6," Cerrar "),R.Sb(),R.Sb(),R.Sb(),R.Tb(7,"div",5),R.Tb(8,"div",6),R.Tb(9,"mat-chip-list"),R.Cc(10,fi,2,2,"mat-chip",7),R.Sb(),R.Sb(),R.Ob(11,"mat-divider"),R.Tb(12,"div",8),R.Tb(13,"mat-chip-list"),R.Cc(14,Ci,2,2,"mat-chip",9),R.Sb(),R.Sb(),R.Ob(15,"mat-divider"),R.Cc(16,vi,3,1,"div",10),R.Tb(17,"div",11),R.Cc(18,_i,10,1,"div",12),R.Sb(),R.Sb()),2&t&&(R.Cb(3),R.Hc(" ",e.mesaEnUso.mesa.area.nombre," - Mesa",e.mesaEnUso.mesa.numero," - Comanda ",e.mesaEnUso.comanda," "),R.Cb(2),R.lc("disabled",e.bloqueoBotones),R.Cb(5),R.lc("ngForOf",e.mesaEnUso.cuentas),R.Cb(4),R.lc("ngForOf",e.categorias),R.Cb(2),R.lc("ngForOf",e.listaSubCategorias),R.Cb(2),R.lc("ngForOf",e.articulos))},directives:[Xa.c,Xa.a,Xa.b,_.a,P.d,ge,i.l,g.a,Xa.d,de,p.a,p.c,p.b,Zt],styles:[".contenido[_ngcontent-%COMP%]{max-height:85vh!important;height:100%}.lnkCategorias[_ngcontent-%COMP%]{margin-right:8px;text-decoration:underline}.divSubCategorias[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0;padding-top:2px;padding-bottom:2px}.divArticulos[_ngcontent-%COMP%]{padding:16px}.divArticulos[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]{width:200px}"]}),t})();function Di(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",6),R.bc("click",function(){R.wc(t);const e=R.fc().$implicit;return R.fc().clickOnSubCategoria(e)}),R.Dc(1),R.Sb()}if(2&t){const t=R.fc().$implicit,e=R.fc();R.lc("disabled",e.bloqueoBotones),R.Cb(1),R.Fc(" ",t.descripcion," ")}}function wi(t,e){if(1&t&&(R.Rb(0),R.Cc(1,Di,2,2,"button",5),R.Qb()),2&t){const t=e.$implicit;R.Cb(1),R.lc("ngIf",t.mostrarEnPos)}}function Ei(t,e){1&t&&R.Ob(0,"hr")}function xi(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",7),R.bc("click",function(){R.wc(t);const a=e.$implicit;return R.fc().clickOnArticulo(a)}),R.Dc(1),R.Sb()}if(2&t){const t=e.$implicit,a=R.fc();R.lc("disabled",a.bloqueoBotones),R.Cb(1),R.Fc(" ",t.descripcion," ")}}let Pi=(()=>{class t{constructor(t,e){this.articuloSrvc=t,this.ls=e,this.bloqueoBotones=!1,this.productoClickedEv=new R.o,this.categoriasFilledEv=new R.o,this.categorias=[],this.subcategorias=[],this.articulos=[],this.loadArbolArticulos=()=>{this.articuloSrvc.getArbolArticulos(this.ls.get(_e.a.usrTokenVar).sede||0).subscribe(t=>{this.fillCategorias(t)})},this.fillCategorias=t=>{this.categorias=[],this.subcategorias=[],this.articulos=[];for(const e of t)this.categorias.push(e);this.categoriasFilledEv.emit(this.categorias)},this.fillSubCategorias=t=>{this.subcategorias=[],this.articulos=[];for(const e of t)this.subcategorias.push(e)},this.fillArticulos=t=>{this.articulos=[];for(const e of t)this.articulos.push(e)},this.clickOnCategoria=t=>{t.categoria_grupo.length>0&&this.fillSubCategorias(t.categoria_grupo)},this.clickOnSubCategoria=t=>{t.articulo.length>0&&this.fillArticulos(t.articulo)},this.clickOnArticulo=t=>{this.productoClickedEv.emit({id:+t.articulo,nombre:t.descripcion,precio:+t.precio,impresora:t.impresora,presentacion:t.presentacion,codigo:t.codigo,combo:t.combo,multiple:t.multiple})}}ngOnInit(){this.loadArbolArticulos()}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(ti.a),R.Nb(Pe.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-lista-producto-alt"]],inputs:{bloqueoBotones:"bloqueoBotones"},outputs:{productoClickedEv:"productoClickedEv",categoriasFilledEv:"categoriasFilledEv"},decls:7,vars:3,consts:[[1,"row"],[1,"col","m12","s12"],[4,"ngFor","ngForOf"],[4,"ngIf"],["mat-raised-button","","class","btnAccion","color","warn",3,"disabled","click",4,"ngFor","ngForOf"],["mat-raised-button","","class","btnAccion","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","color","warn",1,"btnAccion",3,"disabled","click"]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Cc(2,wi,2,1,"ng-container",2),R.Sb(),R.Sb(),R.Cc(3,Ei,1,0,"hr",3),R.Tb(4,"div",0),R.Tb(5,"div",1),R.Cc(6,xi,2,2,"button",4),R.Sb(),R.Sb()),2&t&&(R.Cb(2),R.lc("ngForOf",e.subcategorias),R.Cb(1),R.lc("ngIf",e.articulos.length>0),R.Cb(3),R.lc("ngForOf",e.articulos))},directives:[i.l,i.m,_.a],styles:[""]}),t})(),ki=(()=>{class t{constructor(t,e){this.dialogRef=t,this.comandaSrvc=e,this.data={pwd:void 0},this.cancelar=()=>this.dialogRef.close(),this.terminar=()=>{this.comandaSrvc.validaPwdGerenteTurno(this.data.pwd).subscribe(t=>{this.dialogRef.close(!!t.exito&&t.esgerente)})}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(P.f),R.Nb(va))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-valida-pwd-gerente-turno"]],decls:12,vars:2,consts:[["mat-dialog-title",""],["novalidate","",3,"ngSubmit"],["frmValidarPwdGerenteTurno","ngForm"],[1,"fullWidth"],["type","password","matInput","","placeholder","Contrase\xf1a del gerente de turno","name","pwd","required","",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","color","secondary",1,"btnAccion",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"]],template:function(t,e){if(1&t){const t=R.Ub();R.Tb(0,"h1",0),R.Dc(1,"Contrase\xf1a del gerente de turno"),R.Sb(),R.Tb(2,"mat-dialog-content"),R.Tb(3,"form",1,2),R.bc("ngSubmit",function(){return R.wc(t),R.tc(4).form.valid}),R.Tb(5,"mat-form-field",3),R.Tb(6,"input",4),R.bc("ngModelChange",function(t){return e.data.pwd=t}),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Tb(7,"mat-dialog-actions",5),R.Tb(8,"button",6),R.bc("click",function(){return e.cancelar()}),R.Dc(9," Cancelar "),R.Sb(),R.Tb(10,"button",7),R.bc("click",function(){return e.terminar()}),R.Dc(11," Eliminar producto "),R.Sb(),R.Sb()}if(2&t){const t=R.tc(4);R.Cb(6),R.lc("ngModel",e.data.pwd),R.Cb(4),R.lc("disabled",!t.form.valid)}},directives:[P.g,P.d,o.r,o.l,o.m,b.b,m.b,o.c,o.p,o.k,o.n,P.c,_.a],styles:[""]}),t})();function Oi(t,e){if(1&t&&(R.Rb(0),R.Dc(1),R.Qb()),2&t){const t=R.fc(2).$implicit;R.Cb(1),R.Fc(" ",t.cantidad," ")}}function yi(t,e){if(1&t&&(R.Tb(0,"div",7),R.Tb(1,"span",12),R.Dc(2),R.Sb(),R.Sb()),2&t){const t=e.$implicit;R.Cb(2),R.Ec(t)}}function Mi(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",16),R.bc("click",function(){R.wc(t);const e=R.fc(3),a=e.$implicit,i=e.index;return R.fc().removeProducto(a,i)}),R.Tb(1,"mat-icon",17),R.Dc(2,"remove_circle"),R.Sb(),R.Sb()}if(2&t){const t=R.fc(4);R.lc("disabled",t.bloqueoBotones)}}function Ri(t,e){if(1&t){const t=R.Ub();R.Tb(0,"eco-fab-speed-dial",13),R.Tb(1,"eco-fab-speed-dial-trigger"),R.Tb(2,"button",14),R.Tb(3,"mat-icon",15),R.Dc(4,"keyboard_arrow_left"),R.Sb(),R.Sb(),R.Sb(),R.Tb(5,"eco-fab-speed-dial-actions"),R.Tb(6,"button",16),R.bc("click",function(){R.wc(t);const e=R.fc(2),a=e.$implicit,i=e.index;return R.fc().deleteProductoFromList(a,i)}),R.Tb(7,"mat-icon",17),R.Dc(8,"delete_forever"),R.Sb(),R.Sb(),R.Cc(9,Mi,3,1,"button",18),R.Tb(10,"button",19),R.bc("click",function(){R.wc(t);const e=R.fc(2).$implicit;return R.fc().toggleShowInputNotas(e)}),R.Tb(11,"mat-icon",17),R.Dc(12,"notes"),R.Sb(),R.Sb(),R.Sb(),R.Sb()}if(2&t){const t=R.fc(2).$implicit,e=R.fc();R.Cb(6),R.lc("disabled",e.bloqueoBotones),R.Cb(3),R.lc("ngIf",t.detalle.length<=1),R.Cb(1),R.lc("disabled",e.bloqueoBotones)}}function Ii(t,e){if(1&t){const t=R.Ub();R.Tb(0,"eco-fab-speed-dial",13),R.Tb(1,"eco-fab-speed-dial-trigger"),R.Tb(2,"button",14),R.Tb(3,"mat-icon",15),R.Dc(4,"keyboard_arrow_left"),R.Sb(),R.Sb(),R.Sb(),R.Tb(5,"eco-fab-speed-dial-actions"),R.Tb(6,"button",16),R.bc("click",function(){R.wc(t);const e=R.fc(2),a=e.$implicit,i=e.index;return R.fc().deleteProductoFromListAfterPrinted(a,i)}),R.Tb(7,"mat-icon",17),R.Dc(8,"delete_forever"),R.Sb(),R.Sb(),R.Sb(),R.Sb()}if(2&t){const t=R.fc(3);R.Cb(6),R.lc("disabled",t.bloqueoBotones)}}function Fi(t,e){if(1&t&&(R.Tb(0,"div",4),R.Tb(1,"div",5),R.Tb(2,"div",6),R.Tb(3,"span",7),R.Cc(4,Oi,2,1,"ng-container",8),R.Dc(5),R.Sb(),R.Cc(6,yi,3,1,"div",9),R.Sb(),R.Tb(7,"div",10),R.Tb(8,"span"),R.Dc(9),R.gc(10,"number"),R.Sb(),R.Dc(11,"\xa0 "),R.Cc(12,Ri,13,3,"eco-fab-speed-dial",11),R.Cc(13,Ii,9,1,"eco-fab-speed-dial",11),R.Sb(),R.Sb(),R.Sb()),2&t){const t=R.fc().$implicit;R.Cb(4),R.lc("ngIf",0==+t.multiple),R.Cb(1),R.Fc(" ",t.nombre," "),R.Cb(1),R.lc("ngForOf",t.detalle),R.Cb(3),R.Ec(R.ic(10,6,t.cantidad*t.precio+t.monto_extra,"1.2-2")),R.Cb(3),R.lc("ngIf",0==+t.impreso),R.Cb(1),R.lc("ngIf",1==+t.impreso)}}function Ai(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",0),R.Tb(1,"input",21),R.bc("ngModelChange",function(e){return R.wc(t),R.fc(2).$implicit.notas=e})("keyup.enter",function(){R.wc(t);const e=R.fc(2).$implicit;return R.fc().toggleShowInputNotas(e)})("blur",function(){R.wc(t);const e=R.fc(2).$implicit;return R.fc().saveNotasProducto(e)}),R.Sb(),R.Sb()}if(2&t){const t=R.fc(2).$implicit;R.Cb(1),R.lc("ngModel",t.notas)}}function Ni(t,e){if(1&t&&(R.Tb(0,"div",4),R.Cc(1,Ai,2,1,"mat-form-field",20),R.Sb()),2&t){const t=R.fc().$implicit,e=R.fc();R.Cb(1),R.lc("ngIf",t.showInputNotas&&e.esMovil)}}const Ui=function(t){return{noImpreso:t}};function ji(t,e){if(1&t&&(R.Tb(0,"mat-list-item",2),R.Cc(1,Fi,14,9,"div",3),R.Cc(2,Ni,2,1,"div",3),R.Sb()),2&t){const t=e.$implicit;R.lc("ngClass",R.oc(3,Ui,0==+t.impreso)),R.Cb(1),R.lc("ngIf",+t.cantidad>0),R.Cb(1),R.lc("ngIf",+t.cantidad>0)}}let $i=(()=>{class t{constructor(t,e,a,i,n){this.snackBar=t,this.ls=e,this.comandaSrvc=a,this.socket=i,this.dialog=n,this.listaProductos=[],this.noCuenta=null,this.listHeight="450px",this.IdComanda=0,this.IdCuenta=0,this.bloqueoBotones=!1,this.mesaEnUso={},this.productoRemovedEv=new R.o,this.esMovil=!1,this.removeProducto=(t,e,a=!1)=>{this.bloqueoBotones=!0,this.detalleComanda={detalle_cuenta:t.detalle_cuenta,detalle_comanda:t.detalle_comanda,articulo:t.id,cantidad:+t.cantidad>1?+t.cantidad-1:0,precio:+t.precio,total:+t.cantidad>1?(+t.cantidad-1)*+t.precio:0,notas:t.notas,autorizado:a},this.comandaSrvc.saveDetalle(this.IdComanda,this.IdCuenta,this.detalleComanda).subscribe(e=>{e.exito?(t.cantidad=this.detalleComanda.cantidad,this.productoRemovedEv.emit({listaProductos:this.listaProductos,comanda:e.comanda}),0==+t.cantidad&&(this.socket.emit("refrescar:mesa",{mesaenuso:this.mesaEnUso}),this.socket.emit("refrescar:listaCocina",{mesaenuso:this.mesaEnUso}))):this.snackBar.open(`ERROR: ${e.mensaje}`,"Comanda",{duration:3e3}),this.bloqueoBotones=!1})},this.deleteProductoFromList=(t,e,a=!1)=>{t.cantidad=0,t.notas="",this.removeProducto(t,e,a)},this.deleteProductoFromListAfterPrinted=(t,e)=>{this.bloqueoBotones=!0,this.dialog.open(ki,{width:"40%",disableClose:!0}).afterClosed().subscribe(a=>{a?(this.deleteProductoFromList(t,e,!0),this.snackBar.open("Se eliminar\xe1 el producto seleccionado.","Comanda",{duration:5e3})):this.snackBar.open("La contrase\xf1a no es correcta","Comanda",{duration:5e3}),this.bloqueoBotones=!1})},this.saveNotasProducto=t=>{this.comandaSrvc.saveNotasProducto({detalle_comanda:t.detalle_comanda,notas:t.notas}).subscribe(t=>{t.exito&&this.snackBar.open("Notas de producto guardadas con \xe9xito...","Producto",{duration:3e3})})}}ngOnInit(){this.esMovil=this.ls.get(_e.a.usrTokenVar).enmovil||!1}toggleShowInputNotas(t){console.log("ARTICULO = ",t),t.showInputNotas=!t.showInputNotas,t.showInputNotas?t.itemListHeight="140px":(t.itemListHeight="70px",this.saveNotasProducto(t))}doAction(t){console.log(t)}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(T.a),R.Nb(Pe.a),R.Nb(va),R.Nb(Ra.a),R.Nb(P.b))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-lista-productos-comanda"]],inputs:{listaProductos:"listaProductos",noCuenta:"noCuenta",listHeight:"listHeight",IdComanda:"IdComanda",IdCuenta:"IdCuenta",bloqueoBotones:"bloqueoBotones",mesaEnUso:"mesaEnUso"},outputs:{productoRemovedEv:"productoRemovedEv"},decls:2,vars:3,consts:[[1,"fullWidth"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["matLine","","class","fullWidth",4,"ngIf"],["matLine","",1,"fullWidth"],[1,"row"],[1,"col","m6","s12"],["matLine",""],[4,"ngIf"],["matLine","",4,"ngFor","ngForOf"],["align","end",1,"col","m6","s12"],["direction","left",4,"ngIf"],[1,"tabulador"],["direction","left"],["mat-fab",""],[2,"font-size","18pt !important"],["mat-mini-fab","","color","warn",3,"disabled","click"],[2,"font-size","16pt !important"],["mat-mini-fab","","color","warn",3,"disabled","click",4,"ngIf"],["mat-mini-fab","","color","accent",3,"disabled","click"],["class","fullWidth",4,"ngIf"],["matInput","","placeholder","Notas de producto","maxlength","1000",3,"ngModel","ngModelChange","keyup.enter","blur"]],template:function(t,e){1&t&&(R.Tb(0,"mat-list",0),R.Cc(1,ji,3,5,"mat-list-item",1),R.Sb()),2&t&&(R.zc("height",e.listHeight),R.Cb(1),R.lc("ngForOf",e.listaProductos))},directives:[u.a,i.l,u.c,i.k,Ue.a,i.m,F.h,Se.b,Se.d,_.a,h.a,Se.a,b.b,m.b,o.c,o.f,o.k,o.n],pipes:[i.f],styles:[".fullWidth[_ngcontent-%COMP%]{width:100%!important}.spacer[_ngcontent-%COMP%]{flex:1 1 auto!important}.noImpreso[_ngcontent-%COMP%]{background-color:#c7c7c7}.text-pre-wrap[_ngcontent-%COMP%]{white-space:pre-wrap!important}"]}),t})();const Bi=["appLstProdAlt"],Li=["txtCodigoBarras"];function Hi(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",27),R.bc("click",function(){R.wc(t);const a=e.$implicit;return R.fc().setSelectedCuenta(a.numero)}),R.Dc(1),R.Sb()}if(2&t){const t=e.$implicit;R.lc("disabled",1==+t.cerrada),R.Cb(1),R.Fc(" ",t.nombre," ")}}function zi(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",28),R.bc("click",function(){return R.wc(t),R.fc().nuevaCuenta()}),R.Dc(1," Nueva "),R.Sb()}}const qi=function(){return{standalone:!0}};function Vi(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",29),R.Tb(1,"input",30,31),R.bc("ngModelChange",function(e){return R.wc(t),R.fc().codigoBarras=e})("keyup.enter",function(){return R.wc(t),R.fc().buscarArticulo()}),R.Sb(),R.Sb()}if(2&t){const t=R.fc();R.Cb(1),R.lc("ngModel",t.codigoBarras)("ngModelOptions",R.nc(2,qi))}}function Wi(t,e){1&t&&R.Ob(0,"br")}function Gi(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",33),R.bc("click",function(){R.wc(t);const e=R.fc().$implicit;return R.fc().clickOnCategoria(e)}),R.Dc(1),R.Sb()}if(2&t){const t=R.fc().$implicit,e=R.fc();R.lc("disabled",e.bloqueoBotones||!e.cuentaActiva.cuenta),R.Cb(1),R.Fc(" ",t.descripcion," ")}}function Qi(t,e){if(1&t&&(R.Rb(0),R.Cc(1,Gi,2,2,"button",32),R.Qb()),2&t){const t=e.$implicit;R.Cb(1),R.lc("ngIf",t.mostrarEnPos)}}function Ji(t,e){if(1&t&&(R.Tb(0,"span",11),R.Dc(1),R.Sb()),2&t){const t=R.fc();R.Cb(1),R.Fc("Cuenta de ",t.cuentaActiva.nombre,"")}}function Xi(t,e){1&t&&(R.Tb(0,"span",11),R.Dc(1,"Por favor seleccione una cuenta. Gracias."),R.Sb())}function Zi(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",20),R.bc("click",function(){return R.wc(t),R.fc().validarImpresion()}),R.Dc(1," Comanda "),R.Sb()}if(2&t){const t=R.fc();R.lc("disabled",!t.cuentaActiva.nombre||t.bloqueoBotones)}}function Ki(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",20),R.bc("click",function(){return R.wc(t),R.fc().printCuenta()}),R.Dc(1," Cuenta "),R.Sb()}if(2&t){const t=R.fc();R.lc("disabled",!t.cuentaActiva.nombre||t.bloqueoBotones)}}function Yi(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",20),R.bc("click",function(){return R.wc(t),R.fc().distribuirProductos()}),R.Dc(1," Distribuir "),R.Sb()}if(2&t){const t=R.fc();R.lc("disabled",t.mesaEnUso.cuentas.length<2||t.bloqueoBotones)}}function tn(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",20),R.bc("click",function(){return R.wc(t),R.fc().unirCuentas()}),R.Dc(1," Unir cuentas "),R.Sb()}if(2&t){const t=R.fc();R.lc("disabled",t.mesaEnUso.cuentas.length<2||t.bloqueoBotones)}}function en(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",20),R.bc("click",function(){return R.wc(t),R.fc().cobrarCuenta()}),R.Dc(1," Cobrar cuenta "),R.Sb()}if(2&t){const t=R.fc();R.lc("disabled",!t.cuentaActiva.nombre||t.esCajero()||t.bloqueoBotones)}}function an(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",20),R.bc("click",function(){return R.wc(t),R.fc().enviarPedido()}),R.Dc(1," Enviar pedido "),R.Sb()}if(2&t){const t=R.fc();R.lc("disabled",!t.cuentaActiva.nombre||t.esCajero()||t.bloqueoBotones)}}function nn(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",20),R.bc("click",function(){return R.wc(t),R.fc().trasladoMesa()}),R.Dc(1," Trasladar "),R.Sb()}if(2&t){const t=R.fc();R.lc("disabled",t.bloqueoBotones)}}function on(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",34),R.bc("click",function(){return R.wc(t),R.fc().cerrarMesa()}),R.Dc(1),R.Sb()}if(2&t){const t=R.fc();R.Cb(1),R.Fc(" Cerrar ",0==+t.mesaEnUso.mesa.esmostrador?"Mesa":0==+t.mesaEnUso.mesa.escallcenter?"Mostrador":"Pedido"," ")}}let sn=(()=>{class t{constructor(t,e,a,i,n,o,s,r){this.dialog=t,this.snackBar=e,this.comandaSrvc=a,this.socket=i,this.ls=n,this.pdfServicio=o,this.configSrvc=s,this.articuloSrvc=r,this.clientePedido=null,this.closeSideNavEv=new R.o,this.mesaSavedEv=new R.o,this.showPortalComanda=!1,this.showPortalCuenta=!1,this.noComanda=0,this.sumCuenta=0,this.categorias=[],this.bloqueoBotones=!1,this.rolesUsuario=[],this.impreso=0,this.usaCodigoBarras=!1,this.codigoBarras=null,this.resetMesaEnUso=()=>this.mesaEnUso={exito:!0,comanda:null,usuario:null,sede:null,estatus:null,mesa:{mesa:null,area:{area:null,sede:null,area_padre:null,nombre:null},numero:null,posx:null,posy:null,tamanio:null,estatus:null},numero_pedido:null,cuentas:[]},this.resetLstProductosSeleccionados=()=>this.lstProductosSeleccionados=[],this.resetLstProductosDeCuenta=()=>this.lstProductosDeCuenta=[],this.resetCuentaActiva=()=>this.cuentaActiva={cuenta:null,numero:null,nombre:null,productos:[]},this.resetListadoArticulos=()=>this.appLstProdAlt.loadArbolArticulos(),this.setListaCategorias=(t=[])=>this.categorias=this.setVerBotones(t),this.setVerBotones=t=>{for(const e of t)t:for(const t of e.categoria_grupo)for(const a of t.articulo)if(1==+a.mostrar_pos){t.mostrarEnPos=!0,e.mostrarEnPos=!0;continue t}return t},this.clickOnCategoria=t=>this.appLstProdAlt.fillSubCategorias(t.categoria_grupo),this.buscarArticulo=()=>{this.codigoBarras&&this.codigoBarras.trim().length>0&&this.articuloSrvc.getArticulos({codigo:this.codigoBarras.trim()}).subscribe(t=>{if(t&&t.length>0){const e=t[0];this.agregarProductos({id:+e.articulo,nombre:e.descripcion,precio:+e.precio,impresora:e.impresora,presentacion:e.presentacion,codigo:e.codigo,combo:e.combo,multiple:e.multiple}),this.codigoBarras=null,this.txtCodigoBarras.focus()}})},this.llenaProductosSeleccionados=(t=this.mesaEnUso)=>{null==this.mesaEnUso.comanda&&(this.mesaEnUso=t),this.lstProductosSeleccionados=[];for(const e of t.cuentas)for(const t of e.productos)this.lstProductosSeleccionados.push({id:+t.articulo.articulo,nombre:t.articulo.descripcion,cuenta:+t.numero_cuenta||1,idcuenta:+e.cuenta,cantidad:+t.cantidad,impreso:+t.impreso,precio:parseFloat(t.precio)||10,total:parseFloat(t.total)||parseFloat(t.cantidad)*parseFloat(t.precio),notas:t.notas||"",showInputNotas:!1,itemListHeight:"70px",detalle_comanda:+t.detalle_comanda,detalle_cuenta:+t.detalle_cuenta,impresora:t.articulo.impresora,detalle:t.detalle,monto_extra:+t.monto_extra||0,multiple:+t.articulo.multiple,combo:+t.articulo.combo})},this.cerrarMesa=()=>{this.comandaSrvc.cerrarMesa(this.mesaEnUso.mesa.mesa).subscribe(t=>{t.exito?(this.snackBar.open(t.mensaje,"Comanda",{duration:3e3}),this.mesaEnUso.mesa.estatus=1,this.mesaSavedEv.emit(),this.socket.emit("refrescar:mesa",{mesaenuso:this.mesaEnUso})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Comanda",{duration:7e3})})},this.printToBT=(t="")=>{const e=window.open(`com.restouch.impresion://impresion/${t}`,"PrntBT","height=200,width=200,menubar=no,location=no,resizable=no,scrollbars=no,status=no");setTimeout(()=>e.close(),1e3),this.bloqueoBotones=!1},this.printComandaPDF=()=>{const t=+this.cuentaActiva.cuenta;this.pdfServicio.getComanda(t).subscribe(e=>{if(e){const a=new Blob([e],{type:"application/pdf"}),i=window.URL.createObjectURL(a);window.open(i,`cuenta_${t}`,"height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no")}else this.snackBar.open("No se pudo generar la comanda...","Comanda",{duration:3e3})})},this.sumaDetalle=t=>{let e=0;for(const a of t)e+=+a.total||0,e+=+a.monto_extra||0;return e},this.enviarPedido=()=>{const t=this.mesaEnUso.cuentas[0];this.cuentaActiva=this.mesaEnUso.cuentas.find(e=>+e.numero==+t.numero);const e=this.lstProductosSeleccionados.filter(t=>+t.cuenta==+this.cuentaActiva.numero);e.map(t=>t.impreso=1),this.noComanda=this.mesaEnUso.comanda,this.cuentaActiva.productos=this.prepProductosComanda(e),this.mesaEnUso.cuentas.findIndex(t=>+t.cuenta==+this.cuentaActiva.cuenta)>-1&&this.comandaSrvc.save({area:this.mesaEnUso.mesa.area.area,mesa:this.mesaEnUso.mesa.mesa,mesero:this.mesaEnUso.usuario,comanda:this.mesaEnUso.comanda,cuentas:this.mesaEnUso.cuentas,numero_pedido:this.mesaEnUso.numero_pedido}).subscribe(e=>{e.exito&&(this.mesaEnUso.numero_pedido=e.comanda.numero_pedido,this.comandaSrvc.setProductoImpreso(t.cuenta).subscribe(e=>{this.llenaProductosSeleccionados(e.comanda),this.setSelectedCuenta(t.numero),this.cobrarCuenta()}))})},this.cambiarEstatusCuenta=t=>{const e=this.mesaEnUso.cuentas.findIndex(e=>+e.cuenta==+t.cuenta);this.mesaEnUso.cuentas[e].cerrada=+t.cerrada},this.esCajero=()=>!1,this.trasladoMesa=()=>{this.dialog.open(Ea,{width:"55%",data:{mesaEnUso:this.mesaEnUso}}).afterClosed().subscribe(t=>{t&&(this.socket.emit("refrescar:mesa",{mesaenuso:this.mesaEnUso}),this.closeSideNavEv.emit(this.mesaEnUso))})},this.getNotasGenerales=()=>{this.dialog.open(li,{width:"50%",data:{notasGenerales:this.mesaEnUso.notas_generales||""}}).afterClosed().subscribe(t=>{null!==t&&t.trim().length>0&&this.comandaSrvc.saveNotasGenerales({comanda:this.mesaEnUso.comanda,notas_generales:t}).subscribe(e=>{e.exito?(this.mesaEnUso.notas_generales=t,this.snackBar.open(e.mensaje,"Comanda",{duration:3e3})):this.snackBar.open(`ERROR: ${e.mensaje}`,"Comanda",{duration:7e3})})})},this.nuevaCuenta=()=>{this.dialog.open(di,{width:"50%",data:{mesaEnUso:this.mesaEnUso}}).afterClosed().subscribe(t=>{t&&this.closeSideNavEv.emit()})},this.distribuirProductos=()=>{this.dialog.open(bi,{width:"50%",data:{mesaEnUso:this.mesaEnUso,lstProductos:this.lstProductosSeleccionados||[]}}).afterClosed().subscribe(t=>{t&&this.closeSideNavEv.emit()})}}ngOnInit(){this.resetMesaEnUso(),this.resetLstProductosSeleccionados(),this.resetLstProductosDeCuenta(),this.resetCuentaActiva(),this.impreso=0,this.noComanda=this.mesaEnUso.comanda||0,this.llenaProductosSeleccionados(),this.ls.get(_e.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(_e.a.usrTokenVar).sede_uuid),this.socket.on("reconnect",()=>this.socket.emit("joinRestaurant",this.ls.get(_e.a.usrTokenVar).sede_uuid))),this.usaCodigoBarras=this.configSrvc.getConfig(_e.a.CONSTANTES.RT_USA_CODIGO_BARRAS)||!1}setSelectedCuenta(t){this.bloqueoBotones=!0,this.cuentaActiva=this.mesaEnUso.cuentas.find(e=>+e.numero==+t),this.setLstProductosDeCuenta(),this.bloqueoBotones=!1}setSumaCuenta(t){let e=0;for(const a of t)e+=a.precio*a.cantidad;this.sumCuenta=e}setLstProductosDeCuenta(){this.lstProductosDeCuenta=this.lstProductosSeleccionados.filter(t=>+t.cuenta==+this.cuentaActiva.numero)}agregarProductos(t){1==+t.combo||1==+t.multiple?(this.bloqueoBotones=!0,this.dialog.open(ci,{maxWidth:"50%",data:new ri(t,"S\xed","No")}).afterClosed().subscribe(t=>{t&&t.respuesta&&t.seleccion.receta.length>0?this.comandaSrvc.saveDetalleCombo(this.mesaEnUso.comanda,this.cuentaActiva.cuenta,t.seleccion).subscribe(t=>{t.exito?(this.mesaEnUso=t.comanda,this.llenaProductosSeleccionados(this.mesaEnUso),this.setSelectedCuenta(+this.cuentaActiva.numero)):this.snackBar.open(`ERROR:${t.mensaje}`,"Comanda",{duration:3e3}),this.bloqueoBotones=!1}):(this.bloqueoBotones=!1,this.snackBar.open("Error, Debe seleccionar los productos del combo","Comanda",{duration:7e3}))})):this.addProductoSelected(t)}addProductoSelected(t){if(this.bloqueoBotones=!0,+this.cuentaActiva.numero){const e=this.lstProductosSeleccionados.findIndex(e=>+e.id==+t.id&&+e.cuenta==+this.cuentaActiva.numero&&0==+e.impreso);if(e<0)this.detalleComanda={articulo:t.id,cantidad:1,precio:+t.precio,total:1*+t.precio,notas:""},this.comandaSrvc.saveDetalle(this.mesaEnUso.comanda,this.cuentaActiva.cuenta,this.detalleComanda).subscribe(t=>{t.exito?(this.mesaEnUso=t.comanda,this.llenaProductosSeleccionados(this.mesaEnUso),this.setSelectedCuenta(+this.cuentaActiva.numero)):this.snackBar.open(`ERROR:${t.mensaje}`,"Comanda",{duration:3e3}),this.bloqueoBotones=!1});else{const t=this.lstProductosSeleccionados[e];this.detalleComanda={detalle_cuenta:t.detalle_cuenta,detalle_comanda:t.detalle_comanda,articulo:t.id,cantidad:+t.cantidad+1,precio:+t.precio,total:(+t.cantidad+1)*+t.precio,notas:t.notas},this.comandaSrvc.saveDetalle(this.mesaEnUso.comanda,this.cuentaActiva.cuenta,this.detalleComanda).subscribe(t=>{t.exito?(this.mesaEnUso=t.comanda,this.llenaProductosSeleccionados(this.mesaEnUso),this.setSelectedCuenta(+this.cuentaActiva.numero)):this.snackBar.open(`ERROR:${t.mensaje}`,"Comanda",{duration:3e3}),this.bloqueoBotones=!1})}this.setLstProductosDeCuenta()}}updProductosCuenta(t){const e=t.listaProductos||[],a=this.lstProductosSeleccionados.filter(t=>+t.cuenta!=+this.cuentaActiva.numero);this.lstProductosSeleccionados=e.length>0?a.concat(e):a,t.comanda&&(this.mesaEnUso=t.comanda,this.llenaProductosSeleccionados(this.mesaEnUso),this.setSelectedCuenta(+this.cuentaActiva.numero))}prepProductosComanda(t){const e=[];for(let a=0;a<t.length;a++)e.push({articulo:t[a].id,cantidad:t[a].cantidad,precio:t[a].precio,total:t[a].total,notas:t[a].notas,impreso:1,detalle_comanda:t[a].detalle_comanda,detalle_cuenta:t[a].detalle_cuenta});return e}validarImpresion(t=!1){const e=this.configSrvc.getConfig(_e.a.CONSTANTES.RT_INGRESO_NUMERO_PEDIDO);if(1==+this.mesaEnUso.mesa.esmostrador&&e&&!this.mesaEnUso.numero_pedido){let e=this.configSrvc.getConfig(_e.a.CONSTANTES.RT_TOTAL_NUMEROS_PEDIDO);(!e||e<=0)&&(e=30),this.dialog.open(Ya,{maxWidth:"50%",data:new Ka("Numero de Pedido",e,"S\xed","No")}).afterClosed().subscribe(e=>{e&&e.respuesta&&e.pedido?(this.mesaEnUso.numero_pedido=e.pedido,this.printComanda(t)):this.snackBar.open("Error, Debe seleccionar un numero de pedido","Comanda",{duration:7e3})})}else this.printComanda(t)}printComanda(t=!1){this.bloqueoBotones=!0,this.impreso=0;const e=this.configSrvc.getConfig(_e.a.CONSTANTES.RT_MODO_COMANDA)||1;for(let a=0;a<this.mesaEnUso.cuentas.length;a++){const i=this.mesaEnUso.cuentas[a];this.cuentaActiva=this.mesaEnUso.cuentas.find(t=>+t.numero==+i.numero);const n=this.lstProductosSeleccionados.filter(t=>+t.cuenta==+this.cuentaActiva.numero),o=n.filter(t=>0==+t.impreso&&+t.cantidad>0);o.length>0?(n.map(t=>t.impreso=1),this.noComanda=this.mesaEnUso.comanda,this.cuentaActiva.productos=this.prepProductosComanda(n),this.mesaEnUso.cuentas.findIndex(t=>+t.cuenta==+this.cuentaActiva.cuenta)>-1&&this.comandaSrvc.save({area:this.mesaEnUso.mesa.area.area,mesa:this.mesaEnUso.mesa.mesa,mesero:this.mesaEnUso.mesero.usuario,comanda:this.mesaEnUso.comanda,cuentas:this.mesaEnUso.cuentas,numero_pedido:this.mesaEnUso.numero_pedido}).subscribe(a=>{a.exito?(this.mesaEnUso.numero_pedido=a.comanda.numero_pedido,this.comandaSrvc.setProductoImpreso(i.cuenta).subscribe(a=>{a.exito&&this.impreso++,this.llenaProductosSeleccionados(a.comanda),this.setSelectedCuenta(i.numero),this.snackBar.open("Cuenta actualizada",`Cuenta #${i.numero}`,{duration:3e3});let n=[],s=[];try{n=o.filter(t=>0==+t.impresora.bluetooth),s=o.filter(t=>1==+t.impresora.bluetooth)}catch(r){console.log("PRODUCTOS A IMPRIMIR = ",o),console.log("NORMAL = ",n),console.log("BT = ",s),console.log(r)}t?this.printComandaPDF():(n.length>0&&(3!==e?(this.socket.emit("print:comanda",`${JSON.stringify({Tipo:"Comanda",Nombre:this.cuentaActiva.nombre,Numero:this.noComanda,DetalleCuenta:n,Ubicacion:`${this.mesaEnUso.mesa.area.nombre} - Mesa ${this.mesaEnUso.mesa.etiqueta||this.mesaEnUso.mesa.numero}`,Mesero:`${this.mesaEnUso.mesero.nombres} ${this.mesaEnUso.mesero.apellidos}`,Total:null,NumeroPedido:this.mesaEnUso.numero_pedido,NotasGenerales:this.mesaEnUso.notas_generales||""})}`),this.snackBar.open(`Imprimiendo comanda #${this.noComanda}`,"Comanda",{duration:7e3})):this.snackBar.open(`Comanda #${this.noComanda} enviada a cocina`,"Comanda",{duration:7e3}),this.bloqueoBotones=!1),s.length>0&&3!==e&&this.printToBT(JSON.stringify({Tipo:"Comanda",Nombre:this.cuentaActiva.nombre,Numero:this.noComanda,DetalleCuenta:s,Ubicacion:`${this.mesaEnUso.mesa.area.nombre} - Mesa ${this.mesaEnUso.mesa.etiqueta||this.mesaEnUso.mesa.numero}`,Mesero:`${this.mesaEnUso.mesero.nombres} ${this.mesaEnUso.mesero.apellidos}`,Total:null,NumeroPedido:this.mesaEnUso.numero_pedido}))),+this.impreso===this.mesaEnUso.cuentas.length&&(this.impreso=0,this.socket.emit("refrescar:mesa",{mesaenuso:this.mesaEnUso}),this.socket.emit("refrescar:listaCocina",{mesaenuso:this.mesaEnUso}),0==+this.mesaEnUso.mesa.esmostrador?this.closeSideNavEv.emit():this.cobrarCuenta())})):this.snackBar.open(`ERROR: ${a.mensaje}`,`Cuenta #${this.cuentaActiva.numero}`,{duration:3e3}),this.bloqueoBotones=!1})):(this.impreso++,this.bloqueoBotones=!1)}}printCuenta(){this.bloqueoBotones=!0,this.lstProductosAImprimir=this.lstProductosDeCuenta.filter(t=>1==+t.impreso),this.setSumaCuenta(this.lstProductosAImprimir);const t=this.sumaDetalle(this.lstProductosAImprimir),e=this.mesaEnUso.mesa.impresora||this.mesaEnUso.mesa.area.impresora,a=this.configSrvc.getConfig(_e.a.CONSTANTES.RT_IMPRIME_PROPINA_SUGERIDA),i={Tipo:"Cuenta",Nombre:this.cuentaActiva.nombre,Numero:null,DetalleCuenta:this.lstProductosAImprimir,Total:t,Empresa:this.ls.get(_e.a.usrTokenVar).empresa,Restaurante:this.ls.get(_e.a.usrTokenVar).restaurante,PropinaSugerida:a?(.1*t).toFixed(2):null,Impresora:e,Ubicacion:`${this.mesaEnUso.mesa.area.nombre} - Mesa ${this.mesaEnUso.mesa.etiqueta||this.mesaEnUso.mesa.numero} - Comanda ${this.mesaEnUso.comanda}`,Mesero:`${this.mesaEnUso.mesero.nombres} ${this.mesaEnUso.mesero.apellidos}`};0==+e.bluetooth?this.socket.emit("print:cuenta",`${JSON.stringify(i)}`):this.printToBT(JSON.stringify(i)),this.snackBar.open(`Imprimiendo cuenta de ${this.cuentaActiva.nombre}`,"Cuenta",{duration:7e3}),this.bloqueoBotones=!1,this.closeSideNavEv.emit()}unirCuentas(){this.dialog.open(Da,{width:"55%",data:{lstProductosSeleccionados:this.lstProductosSeleccionados,mesaEnUso:this.mesaEnUso}}).afterClosed().subscribe(t=>{t&&this.closeSideNavEv.emit()})}cobrarCuenta(){this.comandaSrvc.getCuenta(this.cuentaActiva.cuenta).subscribe(t=>{if(t.pendiente.length>0)this.snackBar.open("Cobro","Tiene productos sin comandar",{duration:3e3});else{const t=this.lstProductosDeCuenta.filter(t=>1==+t.impreso);t.length>0?this.dialog.open(Ja,{width:"95%",data:{mesaenuso:this.mesaEnUso,cuenta:this.cuentaActiva.nombre,idcuenta:this.cuentaActiva.cuenta,productosACobrar:t,porcentajePropina:0,impresora:0==+this.mesaEnUso.mesa.esmostrador?this.mesaEnUso.mesa.area.impresora_factura||null:this.mesaEnUso.mesa.impresora||this.mesaEnUso.mesa.area.impresora,clientePedido:this.clientePedido}}).afterClosed().subscribe(t=>{t&&"closePanel"!==t?(this.cambiarEstatusCuenta(t),this.closeSideNavEv.emit()):"closePanel"===t&&this.closeSideNavEv.emit()}):this.snackBar.open("Cobro","Sin productos a cobrar.",{duration:3e3})}})}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(P.b),R.Nb(T.a),R.Nb(va),R.Nb(Ra.a),R.Nb(Pe.a),R.Nb(mi.a),R.Nb(pi.a),R.Nb(ti.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-tran-comanda"]],viewQuery:function(t,e){if(1&t&&(R.Ic(Bi,1),R.Ic(Li,1)),2&t){let t;R.sc(t=R.cc())&&(e.appLstProdAlt=t.first),R.sc(t=R.cc())&&(e.txtCodigoBarras=t.first)}},inputs:{mesaEnUso:"mesaEnUso",clientePedido:"clientePedido"},outputs:{closeSideNavEv:"closeSideNavEv",mesaSavedEv:"mesaSavedEv"},decls:46,vars:26,consts:[["fxLayout","row","fxLayout.xs","column"],["fxFlex","50%","fxFelx.xs","100%","fxLayoutAlign","center start"],[1,"bld",2,"font-size","16pt","margin-left","10px"],["fxFlex","50%","fxFelx.xs","100%","fxLayoutAlign","end start"],["mat-raised-button","","type","button","color","accent",2,"margin-left","8px",3,"click"],[1,"divFullSize"],[1,"row"],["align","center",1,"col","m12","s12",2,"padding","0 !important"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"disabled","click",4,"ngFor","ngForOf"],["mat-raised-button","","type","button","class","btnAccion",3,"click",4,"ngIf"],["align","center",1,"col","m6","s12",2,"padding","0 !important"],[1,"bld"],["class","fullWidth","style","margin-left: 10px; margin-right: 10px;",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","bld",4,"ngIf"],["align","center"],["direction","down"],["mat-fab","","color","warn"],[2,"font-size","18pt !important"],["mat-mini-fab","","type","button","color","warn",1,"btnAccion","btnAccionComanda",3,"disabled","click"],["mat-mini-fab","","type","button","color","warn","class","btnAccion btnAccionComanda",3,"disabled","click",4,"ngIf"],["mat-mini-fab","","type","button","color","warn","class","btnAccionComanda",3,"click",4,"ngIf"],[1,"col","m6","s12","mat-elevation-z3","colProductos"],[3,"bloqueoBotones","productoClickedEv","categoriasFilledEv"],["appLstProdAlt",""],[3,"listaProductos","noCuenta","IdComanda","IdCuenta","bloqueoBotones","mesaEnUso","productoRemovedEv"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button",1,"btnAccion",3,"click"],[1,"fullWidth",2,"margin-left","10px","margin-right","10px"],["matInput","","cdkFocusInitial","","type","text","placeholder","C\xf3digo","name","codigoBarras",3,"ngModel","ngModelOptions","ngModelChange","keyup.enter"],["txtCodigoBarras","matInput"],["mat-raised-button","","class","btnAccion","color","accent",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","accent",1,"btnAccion",3,"disabled","click"],["mat-mini-fab","","type","button","color","warn",1,"btnAccionComanda",3,"click"]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"span",2),R.Dc(3),R.Sb(),R.Sb(),R.Tb(4,"div",3),R.Tb(5,"button",4),R.bc("click",function(){return e.closeSideNavEv.emit()}),R.Dc(6," Cerrar Panel "),R.Sb(),R.Sb(),R.Sb(),R.Tb(7,"div",5),R.Tb(8,"div",6),R.Tb(9,"div",7),R.Cc(10,Hi,2,2,"button",8),R.Cc(11,zi,2,0,"button",9),R.Sb(),R.Sb(),R.Tb(12,"div",6),R.Tb(13,"div",10),R.Tb(14,"span",11),R.Dc(15,"Productos"),R.Sb(),R.Ob(16,"br"),R.Cc(17,Vi,3,3,"mat-form-field",12),R.Cc(18,Wi,1,0,"br",13),R.Cc(19,Qi,2,1,"ng-container",14),R.Sb(),R.Tb(20,"div",10),R.Cc(21,Ji,2,1,"span",15),R.Cc(22,Xi,2,0,"span",15),R.Tb(23,"div",16),R.Tb(24,"eco-fab-speed-dial",17),R.Tb(25,"eco-fab-speed-dial-trigger"),R.Tb(26,"button",18),R.Tb(27,"mat-icon",19),R.Dc(28,"keyboard_arrow_down"),R.Sb(),R.Sb(),R.Sb(),R.Tb(29,"eco-fab-speed-dial-actions"),R.Tb(30,"button",20),R.bc("click",function(){return e.getNotasGenerales()}),R.Dc(31," Notas "),R.Sb(),R.Cc(32,Zi,2,1,"button",21),R.Cc(33,Ki,2,1,"button",21),R.Cc(34,Yi,2,1,"button",21),R.Cc(35,tn,2,1,"button",21),R.Cc(36,en,2,1,"button",21),R.Cc(37,an,2,1,"button",21),R.Cc(38,nn,2,1,"button",21),R.Cc(39,on,2,1,"button",22),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Tb(40,"div",6),R.Tb(41,"div",23),R.Tb(42,"app-lista-producto-alt",24,25),R.bc("productoClickedEv",function(t){return e.agregarProductos(t)})("categoriasFilledEv",function(t){return e.setListaCategorias(t)}),R.Sb(),R.Sb(),R.Tb(44,"div",23),R.Tb(45,"app-lista-productos-comanda",26),R.bc("productoRemovedEv",function(t){return e.updProductosCuenta(t)}),R.Sb(),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(3),R.Hc(" ",e.mesaEnUso.mesa.area.nombre," - Mesa ",e.mesaEnUso.mesa.etiqueta||e.mesaEnUso.mesa.numero," - Comanda ",e.mesaEnUso.comanda," "),R.Cb(7),R.lc("ngForOf",e.mesaEnUso.cuentas),R.Cb(1),R.lc("ngIf",0==+e.mesaEnUso.mesa.esmostrador&&0==+e.mesaEnUso.mesa.escallcenter),R.Cb(6),R.lc("ngIf",e.usaCodigoBarras),R.Cb(1),R.lc("ngIf",e.usaCodigoBarras),R.Cb(1),R.lc("ngForOf",e.categorias),R.Cb(2),R.lc("ngIf",e.cuentaActiva.nombre),R.Cb(1),R.lc("ngIf",!e.cuentaActiva.nombre),R.Cb(8),R.lc("disabled",e.bloqueoBotones),R.Cb(2),R.lc("ngIf",0==+e.mesaEnUso.mesa.escallcenter),R.Cb(1),R.lc("ngIf",0==+e.mesaEnUso.mesa.esmostrador),R.Cb(1),R.lc("ngIf",0==+e.mesaEnUso.mesa.esmostrador),R.Cb(1),R.lc("ngIf",0==+e.mesaEnUso.mesa.esmostrador),R.Cb(1),R.lc("ngIf",0==+e.mesaEnUso.mesa.escallcenter),R.Cb(1),R.lc("ngIf",1==+e.mesaEnUso.mesa.escallcenter),R.Cb(1),R.lc("ngIf",0==+e.mesaEnUso.mesa.esmostrador),R.Cb(1),R.lc("ngIf",e.lstProductosSeleccionados.length<=0),R.Cb(3),R.lc("bloqueoBotones",e.bloqueoBotones),R.Cb(3),R.lc("listaProductos",e.lstProductosDeCuenta)("noCuenta",+e.cuentaActiva.numero)("IdComanda",e.mesaEnUso.comanda)("IdCuenta",e.cuentaActiva.cuenta)("bloqueoBotones",e.bloqueoBotones)("mesaEnUso",e.mesaEnUso))},directives:[Xa.c,Xa.a,Xa.b,_.a,i.l,i.m,Se.b,Se.d,h.a,Se.a,Pi,$i,b.b,m.b,o.c,o.k,o.n],styles:[".divFullSize[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:hidden}.col[_ngcontent-%COMP%]{padding-top:1px;padding-bottom:1px}.btnAccionComanda[_ngcontent-%COMP%]{width:135px}.colProductos[_ngcontent-%COMP%]{overflow-y:auto;height:450px!important}@media (max-width:400px){.colProductos[_ngcontent-%COMP%]{height:300px!important}}@media (min-width:401px) and (max-width:1024px){.colProductos[_ngcontent-%COMP%]{height:450px!important}}@media (min-height:985px){.colProductos[_ngcontent-%COMP%]{height:600px!important}}@media (max-height:768px){.colProductos[_ngcontent-%COMP%]{height:400px!important}}"]}),t})();const rn=["matTabArea"],cn=["rightSidenav"],ln=["tabArea"],dn=["snTranComanda"];function un(t,e){if(1&t){const t=R.Ub();R.Tb(0,"app-mesa",12),R.bc("onClickMesa",function(e){return R.wc(t),R.fc(2).onClickMesa(e)}),R.Sb()}if(2&t){const t=e.$implicit,a=R.fc(2);R.lc("configuracion",t)("isDisabled",a.cargando)}}function hn(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-tab",7,8),R.Tb(2,"div",9,10),R.bc("resize",function(e){return R.wc(t),R.fc().onResize(e)},!1,R.vc),R.Cc(4,un,1,2,"app-mesa",11),R.Sb(),R.Sb()}if(2&t){const t=e.$implicit;R.mc("label",t.nombre),R.Cb(4),R.lc("ngForOf",t.mesas)}}let bn=(()=>{class t{constructor(t,e,a,i,n,o,s){this.dialog=t,this.snackBar=e,this.ls=a,this.areaSrvc=i,this.comandaSrvc=n,this.configSrvc=o,this.socket=s,this.divSize={h:0,w:0},this.cargando=!1,this.lstTabsAreas=[],this.lstTabsAreasForUpdate=[],this.configTipoPantalla=1,this.clientePedido=null,this.actualizar=()=>{const t=this.lstTabsAreas.find(t=>+t.area==+this.mesaSeleccionada.mesa.area.area),e=this.lstTabsAreas.findIndex(t=>+t.area==+this.mesaSeleccionada.mesa.area.area),a=t.mesas.findIndex(t=>+t.mesa==+this.mesaSeleccionada.mesa.mesa);this.lstTabsAreas[e].mesas[a].estatus=1,this.toggleRightSidenav()},this.resetMesaSeleccionada=()=>this.mesaSeleccionada={comanda:null,usuario:null,sede:null,estatus:null,mesa:{mesa:null,area:{area:null,sede:null,area_padre:null,nombre:null},numero:null,posx:null,posy:null,tamanio:null,estatus:null},cuentas:[]},this.loadAreas=(t=!1,e={})=>{this.cargando=!0,this.areaSrvc.get({sede:+this.ls.get(_e.a.usrTokenVar).sede||0}).subscribe(a=>{t?(this.lstTabsAreasForUpdate=a,this.updateTableStatus(e.mesaenuso)):(this.lstTabsAreas=a,this.cargando=!1)})},this.updateTableStatus=(t={})=>{for(const e of this.lstTabsAreasForUpdate)for(const t of e.mesas)this.setEstatusMesa({area:+e.area,mesa:+t.mesa},+t.estatus);this.cargando=!1,this.rightSidenav.opened&&+this.mesaSeleccionada.comanda==+t.comanda&&this.toggleRightSidenav()},this.onResize=t=>this.setDivSize(),this.aperturaCargaMesa=t=>{switch(+t.mesaSelected.estatus){case 1:this.openAbrirMesaDialog(t.mesaSelected);break;case 2:this.loadComandaMesa(t.mesaSelected)}},this.setEstatusMesa=(t,e)=>{const a=this.lstTabsAreas.findIndex(e=>+e.area==+t.area);if(a>-1){const i=this.lstTabsAreas[a].mesas.findIndex(e=>+e.mesa==+t.mesa);i>-1&&(this.lstTabsAreas[a].mesas[i].estatus=e)}},this.guardarMesa=t=>{this.comandaSrvc.save(this.mesaSeleccionadaToOpen).subscribe(e=>{e.exito?(this.socket.emit("refrescar:mesa",{}),this.mesaSeleccionada=e.comanda,this.setEstatusMesa(t,+e.comanda.mesa.estatus),this.snTrancomanda.llenaProductosSeleccionados(this.mesaSeleccionada),this.snTrancomanda.setSelectedCuenta(this.mesaSeleccionada.cuentas[0].numero),this.snTrancomanda.rolesUsuario=this.mesaSeleccionada.turno_rol,this.toggleRightSidenav()):this.snackBar.open(`${e.mensaje}`,"ERROR",{duration:5e3})})},this.toggleRightSidenav=(t=null)=>{this.rightSidenav.toggle().then(e=>{"close"===e?(this.checkEstatusMesa(),t&&this.loadAreas(!0,{mesaenuso:t})):"open"===e&&1===this.mesaSeleccionada.cuentas.length&&this.snTrancomanda.setSelectedCuenta(this.mesaSeleccionada.cuentas[0].numero)})},this.cerrandoRightSideNav=()=>{this.snTrancomanda.resetMesaEnUso(),this.snTrancomanda.resetLstProductosDeCuenta(),this.snTrancomanda.resetLstProductosSeleccionados(),this.snTrancomanda.resetCuentaActiva(),this.snTrancomanda.resetListadoArticulos(),this.fuerzaCierreComanda(!1)},this.checkEstatusMesa=()=>{this.mesaSeleccionada&&this.mesaSeleccionada.cuentas&&this.mesaSeleccionada.cuentas.length>0&&0===(this.mesaSeleccionada.cuentas.filter(t=>0==+t.cerrada).length||0)&&this.setEstatusMesa({area:this.mesaSeleccionada.mesa.area.area,mesa:this.mesaSeleccionada.mesa.mesa},1)},this.fuerzaCierreComanda=t=>{this.comandaSrvc.cerrarEstacion(this.mesaSeleccionada.comanda).subscribe(e=>{this.loadComandaMesa(this.mesaSeleccionada.mesa,t)})},this.openTranComandaAlt=()=>{this.dialog.open(Ti,{maxWidth:"100vw",maxHeight:"100vh",width:"99vw",height:"99vh",disableClose:!0,data:{mesa:this.mesaSeleccionada}}).afterClosed().subscribe(t=>{console.log(t)})},this.loadComandaMesa=(t,e=!0)=>{this.comandaSrvc.getComandaDeMesa(t.mesa).subscribe(t=>{if(t.exito)if(Array.isArray(t)?(0===t.length&&(this.mesaSeleccionada={mesa:this.mesaSeleccionada.mesa,cuentas:[{cerrada:1}]}),this.checkEstatusMesa()):(this.mesaSeleccionada=t,this.snTrancomanda.rolesUsuario=this.mesaSeleccionada.turno_rol),this.checkEstatusMesa(),e)switch(this.snTrancomanda.llenaProductosSeleccionados(this.mesaSeleccionada),this.configTipoPantalla){case 1:this.toggleRightSidenav();break;case 2:this.openTranComandaAlt();break;default:this.toggleRightSidenav()}else this.checkEstatusMesa();else t.mensaje&&this.snackBar.open(`${t.mensaje}`,"ERROR",{duration:5e3}),Array.isArray(t)&&0===t.length&&(this.mesaSeleccionada={mesa:this.mesaSeleccionada.mesa,cuentas:[{cerrada:1}]}),this.checkEstatusMesa();this.checkEstatusMesa()})}}ngOnInit(){this.loadAreas(),this.resetMesaSeleccionada(),this.ls.get(_e.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(_e.a.usrTokenVar).sede_uuid),this.socket.on("reconnect",()=>this.socket.emit("joinRestaurant",this.ls.get(_e.a.usrTokenVar).sede_uuid)),this.socket.on("refrescar:mesa",t=>{this.loadAreas(!0,t)})),this.configTipoPantalla=this.configSrvc.getConfig(_e.a.CONSTANTES.RT_PANTALLA_TOMA_COMANDA)}ngAfterViewInit(){setTimeout(()=>{this.setDivSize(),this.snTrancomanda.resetMesaEnUso()},600)}setDivSize(){}onClickMesa(t){if(0==+t.mesaSelected.escallcenter)this.aperturaCargaMesa(t);else{const e=`${_e.a.rtClientePedido}_${t.mesaSelected.mesa}`;1==+t.mesaSelected.estatus?(this.ls.clear(e),this.dialog.open(ra,{width:"50%",disableClose:!0,data:{mesa:t.mesaSelected}}).afterClosed().subscribe(a=>{a&&(this.clientePedido=a,this.ls.set(e,this.clientePedido),this.aperturaCargaMesa(t))})):(this.clientePedido=this.ls.get(e),this.aperturaCargaMesa(t))}}openAbrirMesaDialog(t){var e;this.mesaSeleccionadaToOpen={nombreArea:this.tabArea.textLabel,area:+t.area,mesa:+t.mesa,numero:+t.numero,mesero:"",comensales:"1",comanda:0,esEvento:!1,dividirCuentasPorSillas:!1,estatus:1,clientePedido:this.clientePedido||null,cuentas:[{numero:1,nombre:(null===(e=this.clientePedido)||void 0===e?void 0:e.nombre)||"\xdanica",productos:[]}]},0==+t.esmostrador?this.dialog.open(Sa,{width:"50%",height:"auto",disableClose:!0,data:this.mesaSeleccionadaToOpen}).afterClosed().subscribe(e=>{e&&(this.mesaSeleccionadaToOpen=e,this.guardarMesa(t))}):(this.mesaSeleccionadaToOpen.mesero=this.ls.get(_e.a.usrTokenVar).idusr,this.guardarMesa(t))}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(P.b),R.Nb(T.a),R.Nb(Pe.a),R.Nb(xe),R.Nb(va),R.Nb(pi.a),R.Nb(Ra.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-tran-areas"]],viewQuery:function(t,e){if(1&t&&(R.Ic(rn,1),R.Ic(cn,1),R.Ic(ln,1),R.Ic(dn,1)),2&t){let t;R.sc(t=R.cc())&&(e.pestania=t.first),R.sc(t=R.cc())&&(e.rightSidenav=t.first),R.sc(t=R.cc())&&(e.tabArea=t.first),R.sc(t=R.cc())&&(e.snTrancomanda=t.first)}},decls:8,vars:4,consts:[[1,"matSideNavContainer"],["mode","over","position","end","disableClose","",3,"opened","openedChange","closedStart"],["rightSidenav",""],[3,"mesaEnUso","clientePedido","mesaSavedEv","closeSideNavEv"],["snTranComanda",""],["dynamicHeight","","backgroundColor","primary"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],["tabArea",""],[1,"divAreaMesa",3,"resize"],["matTabArea",""],[3,"configuracion","isDisabled","onClickMesa",4,"ngFor","ngForOf"],[3,"configuracion","isDisabled","onClickMesa"]],template:function(t,e){1&t&&(R.Tb(0,"mat-sidenav-container",0),R.Tb(1,"mat-sidenav",1,2),R.bc("openedChange",function(t){return e.openedRightPanel=t})("closedStart",function(){return e.cerrandoRightSideNav()}),R.Tb(3,"app-tran-comanda",3,4),R.bc("mesaSavedEv",function(){return e.actualizar()})("closeSideNavEv",function(t){return e.toggleRightSidenav(t)}),R.Sb(),R.Sb(),R.Tb(5,"mat-sidenav-content"),R.Tb(6,"mat-tab-group",5),R.Cc(7,hn,5,2,"mat-tab",6),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(1),R.lc("opened",e.openedRightPanel),R.Cb(2),R.lc("mesaEnUso",e.mesaSeleccionada)("clientePedido",e.clientePedido),R.Cb(4),R.lc("ngForOf",e.lstTabsAreas))},directives:[k.b,k.a,sn,k.c,f.b,i.l,f.a,Be],styles:[".matSideNavContainer[_ngcontent-%COMP%]{height:90%;overflow:hidden!important}.divAreaMesa[_ngcontent-%COMP%]{width:100vw;height:90vh;background-color:hsla(0,0%,78%,.28627450980392155)}mat-sidenav[_ngcontent-%COMP%]{width:97vw}  .mat-drawer-inner-container{overflow-y:auto!important;overflow-x:hidden!important}"]}),t})(),mn=(()=>{class t{constructor(t){this.http=t,this.moduleUrl="turno",this.srvcErrHndl=new Te.a}get(t={}){return this.http.get(`${_e.a.urlMantenimientos}/${this.moduleUrl}/buscar?${Ee.stringify(t)}`).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}save(t){return this.http.post(`${_e.a.urlMantenimientos}/${this.moduleUrl}/guardar${t.turno?"/"+t.turno:""}`,t).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}getDetalle(t,e={}){return this.http.get(`${_e.a.urlMantenimientos}/${this.moduleUrl}/buscar_usuario/${t}?${Ee.stringify(e)}`).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}saveDetalle(t){return this.http.post(`${_e.a.urlMantenimientos}/${this.moduleUrl}/agregar_usuario/${t.turno}`,t).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}anularDetalle(t){return this.http.post(`${_e.a.urlMantenimientos}/${this.moduleUrl}/anular_usuario/${t.turno}`,t).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(R.Xb(n.b))},t.\u0275prov=R.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function pn(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-list-item",5),R.bc("click",function(){R.wc(t);const a=e.$implicit;return R.fc().getTurno(a)}),R.Tb(1,"mat-icon",6),R.Dc(2,"schedule"),R.Sb(),R.Tb(3,"h5",7),R.Dc(4),R.gc(5,"date"),R.Sb(),R.Ob(6,"br"),R.Tb(7,"p",7),R.Dc(8),R.gc(9,"date"),R.Sb(),R.Sb()}if(2&t){const t=e.$implicit;R.Cb(4),R.Fc("Inicio: ",R.ic(5,2,t.inicio,"dd/MM/yyyy HH:mm:ss"),""),R.Cb(4),R.Fc(" Fin: ",R.ic(9,5,t.fin,"dd/MM/yyyy")," ")}}const gn=function(){return{standalone:!0}};let fn=(()=>{class t{constructor(t,e){this.ls=t,this.turnoSrvc=e,this.getTurnoEv=new R.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadTurnos=()=>{this.turnoSrvc.get({sede:+this.ls.get(_e.a.usrTokenVar).sede||0}).subscribe(t=>{t&&t.length>0&&(this.lstTurnos=t,this.applyFilter())})},this.getTurno=t=>{this.getTurnoEv.emit({turno:t.turno,turno_tipo:t.turno_tipo.turno_tipo,fecha:t.fecha,inicio:t.inicio,fin:t.fin})},this.pageChange=t=>{this.pageSize=t.pageSize,this.pageIndex=t.pageIndex,this.applyFilter()}}ngOnInit(){this.loadTurnos()}applyFilter(){if(this.txtFiltro.length>0){const t=Object(_e.b)(this.lstTurnos,this.txtFiltro);this.length=t.length,this.lstTurnosPaged=Object(_e.c)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstTurnos.length,this.lstTurnosPaged=Object(_e.c)(this.lstTurnos,this.pageSize,this.pageIndex+1)}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(Pe.a),R.Nb(mn))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-lista-turno"]],outputs:{getTurnoEv:"getTurnoEv"},decls:7,vars:7,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,e){1&t&&(R.Tb(0,"mat-card",0),R.Tb(1,"mat-card-content"),R.Tb(2,"mat-form-field",1),R.Tb(3,"input",2),R.bc("keyup",function(){return e.applyFilter()})("ngModelChange",function(t){return e.txtFiltro=t}),R.Sb(),R.Sb(),R.Tb(4,"mat-nav-list"),R.Cc(5,pn,10,8,"mat-list-item",3),R.Sb(),R.Tb(6,"mat-paginator",4),R.bc("page",function(t){return e.pageChange(t)}),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(3),R.lc("ngModel",e.txtFiltro)("ngModelOptions",R.nc(6,gn)),R.Cb(2),R.lc("ngForOf",e.lstTurnosPaged),R.Cb(1),R.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[p.a,p.c,b.b,m.b,o.c,o.k,o.n,u.e,i.l,x.a,u.c,h.a,u.b,F.h],pipes:[i.e],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),t})(),Cn=(()=>{class t{constructor(t){this.http=t,this.moduleUrl="turno",this.srvcErrHndl=new Te.a}get(t={}){return this.http.get(`${_e.a.urlMantenimientos}/${this.moduleUrl}/get_turno_tipo?${Ee.stringify(t)}`).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}save(t){return this.http.post(`${_e.a.urlMantenimientos}/${this.moduleUrl}/guardar_turno_tipo${t.turno_tipo?"/"+t.turno_tipo:""}`,t).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(R.Xb(n.b))},t.\u0275prov=R.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Sn=(()=>{class t{constructor(t){this.http=t,this.srvcErrHndl=new Te.a}get(t={}){return this.http.get(`${_e.a.urlCatalogos}/get_tipo_usuario?${Ee.stringify(t)}`).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(R.Xb(n.b))},t.\u0275prov=R.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function vn(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",5),R.bc("click",function(){return R.wc(t),R.fc().showTurnoForm=!0}),R.Tb(1,"mat-icon",6),R.Dc(2,"expand_more"),R.Sb(),R.Sb()}}function _n(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",5),R.bc("click",function(){return R.wc(t),R.fc().showTurnoForm=!1}),R.Tb(1,"mat-icon",6),R.Dc(2,"expand_less"),R.Sb(),R.Sb()}}function Tn(t,e){if(1&t&&(R.Tb(0,"mat-option",17),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.turno_tipo),R.Cb(1),R.Fc(" ",t.descripcion," ")}}function Dn(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",21),R.bc("click",function(){R.wc(t);const e=R.fc(3);return e.turno.inicio=e.getNow()}),R.Tb(1,"mat-icon",6),R.Dc(2,"query_builder"),R.Sb(),R.Sb()}}function wn(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",22),R.bc("click",function(){return R.wc(t),R.fc(3).turno.inicio=null}),R.Tb(1,"mat-icon",6),R.Dc(2,"close"),R.Sb(),R.Sb()}}function En(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",10),R.Tb(1,"input",18),R.bc("ngModelChange",function(e){return R.wc(t),R.fc(2).turno.inicio=e}),R.Sb(),R.Cc(2,Dn,3,0,"button",19),R.Cc(3,wn,3,0,"button",20),R.Sb()}if(2&t){const t=R.fc(2);R.Cb(1),R.lc("ngModel",t.turno.inicio),R.Cb(1),R.lc("ngIf",!t.turno.inicio),R.Cb(1),R.lc("ngIf",t.turno.inicio)}}function xn(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",21),R.bc("click",function(){R.wc(t);const e=R.fc(3);return e.turno.fin=e.getNow()}),R.Tb(1,"mat-icon",6),R.Dc(2,"query_builder"),R.Sb(),R.Sb()}}function Pn(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",22),R.bc("click",function(){return R.wc(t),R.fc(3).turno.fin=null}),R.Tb(1,"mat-icon",6),R.Dc(2,"close"),R.Sb(),R.Sb()}}function kn(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",10),R.Tb(1,"input",23),R.bc("ngModelChange",function(e){return R.wc(t),R.fc(2).turno.fin=e}),R.Sb(),R.Cc(2,xn,3,0,"button",19),R.Cc(3,Pn,3,0,"button",20),R.Sb()}if(2&t){const t=R.fc(2);R.Cb(1),R.lc("ngModel",t.turno.fin),R.Cb(1),R.lc("ngIf",!t.turno.fin),R.Cb(1),R.lc("ngIf",t.turno.fin)}}function On(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",24),R.bc("click",function(){return R.wc(t),R.fc(2).resetTurno()}),R.Dc(1," Nuevo "),R.Sb()}}function yn(t,e){if(1&t&&(R.Tb(0,"li"),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.Ec(t)}}function Mn(t,e){if(1&t&&(R.Tb(0,"li"),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.Ec(t)}}function Rn(t,e){if(1&t&&(R.Tb(0,"div"),R.Tb(1,"h6"),R.Dc(2,"Documentos Pendientes"),R.Sb(),R.Tb(3,"div",25),R.Tb(4,"div",26),R.Tb(5,"label"),R.Tb(6,"b"),R.Dc(7,"Comandas sin facturar"),R.Sb(),R.Sb(),R.Tb(8,"ul"),R.Cc(9,yn,2,1,"li",27),R.Sb(),R.Sb(),R.Tb(10,"div",26),R.Tb(11,"label"),R.Tb(12,"b"),R.Dc(13,"Facturas sin firmar"),R.Sb(),R.Sb(),R.Tb(14,"ul"),R.Cc(15,Mn,2,1,"li",27),R.Sb(),R.Sb(),R.Sb(),R.Sb()),2&t){const t=R.fc(2);R.Cb(9),R.lc("ngForOf",t.comandas),R.Cb(6),R.lc("ngForOf",t.facturas)}}function In(t,e){if(1&t){const t=R.Ub();R.Tb(0,"form",7,8),R.bc("ngSubmit",function(){R.wc(t);const e=R.tc(1),a=R.fc();return e.form.valid&&a.onSubmit()}),R.Tb(2,"div",9),R.Tb(3,"mat-form-field",10),R.Tb(4,"mat-label"),R.Dc(5,"Tipo de turno"),R.Sb(),R.Tb(6,"mat-select",11),R.bc("ngModelChange",function(e){return R.wc(t),R.fc().turno.turno_tipo=e}),R.Cc(7,Tn,2,2,"mat-option",12),R.Sb(),R.Sb(),R.Sb(),R.Tb(8,"div",9),R.Cc(9,En,4,3,"mat-form-field",13),R.Sb(),R.Tb(10,"div",9),R.Cc(11,kn,4,3,"mat-form-field",13),R.Sb(),R.Tb(12,"div",14),R.Tb(13,"button",15),R.Dc(14," Guardar "),R.Sb(),R.Cc(15,On,2,0,"button",16),R.Sb(),R.Cc(16,Rn,16,2,"div",3),R.Sb()}if(2&t){const t=R.tc(1),e=R.fc();R.Cb(6),R.lc("ngModel",e.turno.turno_tipo),R.Cb(1),R.lc("ngForOf",e.tiposTurno),R.Cb(2),R.lc("ngIf",e.esMovil),R.Cb(2),R.lc("ngIf",e.esMovil),R.Cb(2),R.lc("disabled",!t.form.valid),R.Cb(2),R.lc("ngIf",e.turno.turno),R.Cb(1),R.lc("ngIf",e.pendientes)}}function Fn(t,e){1&t&&R.Ob(0,"hr")}function An(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",5),R.bc("click",function(){return R.wc(t),R.fc(2).showDetalleTurnoForm=!0}),R.Tb(1,"mat-icon",6),R.Dc(2,"expand_more"),R.Sb(),R.Sb()}}function Nn(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",5),R.bc("click",function(){return R.wc(t),R.fc(2).showDetalleTurnoForm=!1}),R.Tb(1,"mat-icon",6),R.Dc(2,"expand_less"),R.Sb(),R.Sb()}}function Un(t,e){if(1&t&&(R.Tb(0,"mat-option",17),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.usuario_tipo),R.Cb(1),R.Fc(" ",t.descripcion," ")}}function jn(t,e){if(1&t&&(R.Tb(0,"mat-option",17),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.usuario),R.Cb(1),R.Gc(" ",t.nombres," ",t.apellidos," ")}}function $n(t,e){if(1&t){const t=R.Ub();R.Tb(0,"form",7,29),R.bc("ngSubmit",function(){R.wc(t);const e=R.tc(1),a=R.fc(2);return e.form.valid&&a.onSubmitDetail()}),R.Tb(2,"div",9),R.Tb(3,"mat-form-field",10),R.Tb(4,"mat-label"),R.Dc(5,"Tipo"),R.Sb(),R.Tb(6,"mat-select",30),R.bc("ngModelChange",function(e){return R.wc(t),R.fc(2).detalleTurno.usuario_tipo=e}),R.Cc(7,Un,2,2,"mat-option",12),R.Sb(),R.Sb(),R.Sb(),R.Tb(8,"div",9),R.Tb(9,"mat-form-field",10),R.Tb(10,"mat-label"),R.Dc(11,"Usuario"),R.Sb(),R.Tb(12,"mat-select",31),R.bc("ngModelChange",function(e){return R.wc(t),R.fc(2).detalleTurno.usuario=e}),R.Cc(13,jn,2,3,"mat-option",12),R.Sb(),R.Sb(),R.Sb(),R.Tb(14,"div",32),R.Tb(15,"button",15),R.Dc(16," Guardar "),R.Sb(),R.Sb(),R.Sb()}if(2&t){const t=R.tc(1),e=R.fc(2);R.Cb(6),R.lc("ngModel",e.detalleTurno.usuario_tipo),R.Cb(1),R.lc("ngForOf",e.tiposUsuario),R.Cb(5),R.lc("ngModel",e.detalleTurno.usuario),R.Cb(1),R.lc("ngForOf",e.usuarios),R.Cb(2),R.lc("disabled",!t.form.valid||!!e.turno.fin)}}function Bn(t,e){1&t&&R.Ob(0,"hr")}function Ln(t,e){1&t&&(R.Tb(0,"th",43),R.Dc(1,"Tipo"),R.Sb())}function Hn(t,e){if(1&t&&(R.Tb(0,"td",44),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.Ec(t.usuario_tipo.descripcion)}}function zn(t,e){1&t&&(R.Tb(0,"th",45),R.Dc(1,"Usuario"),R.Sb())}function qn(t,e){if(1&t&&(R.Tb(0,"td",46),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.Gc("",t.usuario.nombres," ",t.usuario.apellidos,"")}}function Vn(t,e){1&t&&(R.Tb(0,"th",43),R.Dc(1,"\xa0"),R.Sb())}function Wn(t,e){if(1&t){const t=R.Ub();R.Tb(0,"td",44),R.Tb(1,"button",47),R.bc("click",function(){R.wc(t);const a=e.$implicit;return R.fc(3).anularDetalleTurno(a)}),R.Dc(2," Anular "),R.Sb(),R.Sb()}if(2&t){const t=R.fc(3);R.Cb(1),R.lc("disabled",!!t.turno.fin)}}function Gn(t,e){1&t&&R.Ob(0,"tr",48)}function Qn(t,e){1&t&&R.Ob(0,"tr",49)}function Jn(t,e){if(1&t&&(R.Tb(0,"table",33),R.Rb(1,34),R.Cc(2,Ln,2,0,"th",35),R.Cc(3,Hn,2,1,"td",36),R.Qb(),R.Rb(4,37),R.Cc(5,zn,2,0,"th",38),R.Cc(6,qn,2,2,"td",39),R.Qb(),R.Rb(7,40),R.Cc(8,Vn,2,0,"th",35),R.Cc(9,Wn,3,1,"td",36),R.Qb(),R.Cc(10,Gn,1,0,"tr",41),R.Cc(11,Qn,1,0,"tr",42),R.Sb()),2&t){const t=R.fc(2);R.lc("dataSource",t.dataSource),R.Cb(10),R.lc("matHeaderRowDef",t.displayedColumns),R.Cb(1),R.lc("matRowDefColumns",t.displayedColumns)}}function Xn(t,e){if(1&t&&(R.Tb(0,"mat-card",0),R.Tb(1,"mat-card-title"),R.Tb(2,"h4"),R.Dc(3),R.gc(4,"date"),R.Cc(5,An,3,0,"button",1),R.Cc(6,Nn,3,0,"button",1),R.Sb(),R.Sb(),R.Tb(7,"mat-card-content"),R.Cc(8,$n,17,5,"form",2),R.Cc(9,Bn,1,0,"hr",3),R.Cc(10,Jn,12,3,"table",28),R.Sb(),R.Sb()),2&t){const t=R.fc();R.Cb(3),R.Fc(" Detalle del turno ",R.ic(4,6,t.turno.inicio,"dd/MM/yyyy HH:mm:ss")," "),R.Cb(2),R.lc("ngIf",!t.showDetalleTurnoForm),R.Cb(1),R.lc("ngIf",t.showDetalleTurnoForm),R.Cb(2),R.lc("ngIf",t.showDetalleTurnoForm),R.Cb(1),R.lc("ngIf",t.detallesTurno.length>0),R.Cb(1),R.lc("ngIf",t.detallesTurno.length>0)}}let Zn=(()=>{class t{constructor(t,e,a,i,n,o,s){this.snackBar=t,this.ls=e,this.tipoTurnoSrvc=a,this.turnoSrvc=i,this.usuarioTipoSrvc=n,this.usuarioSrvc=o,this.dialog=s,this.turnoSavedEv=new R.o,this.showTurnoForm=!0,this.showDetalleTurnoForm=!0,this.detallesTurno=[],this.displayedColumns=["usuario_tipo","usuario","editItem"],this.tiposTurno=[],this.tiposUsuario=[],this.usuarios=[],this.esMovil=!1,this.comandas=[],this.facturas=[],this.pendientes=!1,this.loadTiposTurno=()=>{this.tipoTurnoSrvc.get().subscribe(t=>{t&&(this.tiposTurno=t)})},this.loadTiposUsuario=()=>{this.usuarioTipoSrvc.get().subscribe(t=>{t&&(this.tiposUsuario=t)})},this.loadUsuarios=()=>{this.usuarioSrvc.get({sede:this.ls.get(_e.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.usuarios=t)})},this.resetTurno=()=>{this.pendientes=!1,this.comandas=[],this.facturas=[],this.turno={turno:null,turno_tipo:null,inicio:xa().format(_e.a.dbDateTimeFormat),fin:null},this.resetDetalleTurno()},this.saveInfoTurno=()=>{this.pendientes=!1,this.turnoSrvc.save(this.turno).subscribe(t=>{t.exito?(this.turnoSavedEv.emit(),this.resetTurno(),this.turno=t.turno,this.snackBar.open("Turno modificado con \xe9xito...","Turno",{duration:3e3})):(t.pendientes&&(this.snackBar.open("ERROR: Error al cerrar el turno","Turno",{duration:3e3}),this.pendientes=!0,this.comandas=t.comandas,this.facturas=t.facturas),this.snackBar.open(`ERROR: ${t.mensaje}`,"Turno",{duration:3e3}))})},this.onSubmit=()=>{xa(this.turno.fin).isValid()?this.dialog.open(Ne.a,{maxWidth:"400px",data:new Ne.b("Cerrar turno","La fecha de finalizaci\xf3n cerrar\xe1 el turno. \xbfDesea continuar?","S\xed","No")}).afterClosed().subscribe(t=>{t&&this.saveInfoTurno()}):this.saveInfoTurno()},this.resetDetalleTurno=()=>this.detalleTurno={turno:this.turno.turno?this.turno.turno:null,usuario:null,usuario_tipo:null},this.loadDetalleTurno=(t=+this.turno.turno)=>{this.turnoSrvc.getDetalle(t,{turno:t}).subscribe(t=>{t&&(this.detallesTurno=t,this.updateTableDataSource())})},this.onSubmitDetail=()=>{this.detalleTurno.turno=this.turno.turno,this.turnoSrvc.saveDetalle(this.detalleTurno).subscribe(t=>{t.exito?(this.loadDetalleTurno(),this.resetDetalleTurno(),this.snackBar.open("Usuario agregado al turno...","Turno",{duration:3e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Turno",{duration:3e3})})},this.anularDetalleTurno=t=>{this.turnoSrvc.anularDetalle({turno:t.turno,usuario:t.usuario.usuario,usuario_tipo:t.usuario_tipo.usuario_tipo}).subscribe(t=>{t.exito?(this.loadDetalleTurno(),this.resetDetalleTurno(),this.snackBar.open("Se quit\xf3 al usuario del turno...","Turno",{duration:3e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Turno",{duration:3e3})})},this.updateTableDataSource=()=>this.dataSource=new C.k(this.detallesTurno),this.getNow=()=>xa().format(_e.a.dbDateTimeFormat)}ngOnInit(){this.esMovil=this.ls.get(_e.a.usrTokenVar).enmovil||!1,this.resetTurno(),this.loadTiposTurno(),this.loadTiposUsuario(),this.loadUsuarios()}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(T.a),R.Nb(Pe.a),R.Nb(Cn),R.Nb(mn),R.Nb(Sn),R.Nb(ga.a),R.Nb(P.b))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-form-turno"]],inputs:{turno:"turno"},outputs:{turnoSavedEv:"turnoSavedEv"},decls:11,vars:9,consts:[[1,"mat-elevation-z4","fullWidth"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmTurno","ngForm"],[1,"form-group"],[1,"fullWidth"],["name","turno_tipo","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","fullWidth",4,"ngIf"],["role","group","align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],[3,"value"],["matInput","","type","datetime-locale","placeholder","Inicio","name","inicio","required","",3,"ngModel","ngModelChange"],["type","button","mat-button","","matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],["type","button","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["type","button","mat-button","","matSuffix","","mat-icon-button","",3,"click"],["type","button","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["matInput","","type","datetime-locale","placeholder","Fin","name","fin",3,"ngModel","ngModelChange"],["mat-raised-button","","type","button","color","accent",3,"click"],[1,"row"],[1,"col"],[4,"ngFor","ngForOf"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleTurno","ngForm"],["name","usuario_tipo","required","",3,"ngModel","ngModelChange"],["name","usuario","required","",3,"ngModel","ngModelChange"],["role","group",1,"btn-group","d-flex","justify-content-end"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","usuario_tipo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","usuario"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","editItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(R.Tb(0,"mat-card",0),R.Tb(1,"mat-card-title"),R.Tb(2,"h4"),R.Dc(3),R.gc(4,"date"),R.Cc(5,vn,3,0,"button",1),R.Cc(6,_n,3,0,"button",1),R.Sb(),R.Sb(),R.Tb(7,"mat-card-content"),R.Cc(8,In,17,7,"form",2),R.Sb(),R.Sb(),R.Cc(9,Fn,1,0,"hr",3),R.Cc(10,Xn,11,9,"mat-card",4)),2&t&&(R.Cb(3),R.Fc(" Turno ",e.turno.turno?R.ic(4,6,e.turno.inicio,"dd/MM/yyyy HH:mm:ss"):""," "),R.Cb(2),R.lc("ngIf",!e.showTurnoForm),R.Cb(1),R.lc("ngIf",e.showTurnoForm),R.Cb(2),R.lc("ngIf",e.showTurnoForm),R.Cb(1),R.lc("ngIf",e.turno.turno),R.Cb(1),R.lc("ngIf",e.turno.turno))},directives:[p.a,p.h,i.m,p.c,_.a,h.a,o.r,o.l,o.m,b.b,b.e,S.a,o.p,o.k,o.n,i.l,F.k,m.b,o.c,b.f,C.j,C.c,C.e,C.b,C.g,C.i,C.d,C.a,C.f,C.h],pipes:[i.e],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:34pt!important}"]}),t})();const Kn=["lstTurno"],Yn=["frmTurno"];let to=(()=>{class t{constructor(){this.setTurno=t=>{this.turno=t,this.frmTurno.loadDetalleTurno(+this.turno.turno),this.frmTurno.pendientes=!1,this.frmTurno.comandas=[],this.frmTurno.facturas=[]},this.refreshTurnoList=()=>this.lstTurnoComponent.loadTurnos(),this.turno={turno:null,turno_tipo:null,inicio:xa().format(_e.a.dbDateTimeFormat),fin:null}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=R.Hb({type:t,selectors:[["app-turno"]],viewQuery:function(t,e){if(1&t&&(R.Ic(Kn,1),R.Ic(Yn,1)),2&t){let t;R.sc(t=R.cc())&&(e.lstTurnoComponent=t.first),R.sc(t=R.cc())&&(e.frmTurno=t.first)}},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getTurnoEv"],["lstTurno",""],[1,"col","m7","s12"],[3,"turno","turnoSavedEv"],["frmTurno",""]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"app-lista-turno",2,3),R.bc("getTurnoEv",function(t){return e.setTurno(t)}),R.Sb(),R.Sb(),R.Tb(4,"div",4),R.Tb(5,"app-form-turno",5,6),R.bc("turnoSavedEv",function(){return e.refreshTurnoList()}),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(5),R.lc("turno",e.turno))},directives:[fn,Zn],styles:[""]}),t})();var eo=a("Iab2");let ao=(()=>{class t{constructor(t){this.http=t,this.moduleUrl="reporte/venta",this.srvcErrHndl=new Te.a}porCategoria(t){return this.http.get(`${_e.a.urlFacturacion}/${this.moduleUrl}/categoria?${Ee.stringify(t)}`).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}porArticulo(t){return this.http.get(`${_e.a.urlFacturacion}/${this.moduleUrl}/articulo?${Ee.stringify(t)}`).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}porCategoriaPdf(t){const e={headers:new n.d({Accept:"application/pdf"}),responseType:"blob"};return this.http.get(`${_e.a.urlFacturacion}/${this.moduleUrl}/categoriapdf/1?${Ee.stringify(t)}`,e).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}porArticuloPdf(t){const e={headers:new n.d({Accept:"application/pdf"}),responseType:"blob"};return this.http.get(`${_e.a.urlFacturacion}/${this.moduleUrl}/articulopdf/1?${Ee.stringify(t)}`,e).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(R.Xb(n.b))},t.\u0275prov=R.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var io=a("2qVp"),no=a("NU9O");function oo(t,e){if(1&t&&(R.Rb(0),R.Tb(1,"tr"),R.Tb(2,"td",10),R.Dc(3),R.Sb(),R.Tb(4,"td",11),R.Dc(5),R.gc(6,"number"),R.Sb(),R.Tb(7,"td",11),R.Dc(8),R.gc(9,"number"),R.Sb(),R.Tb(10,"td",11),R.Dc(11),R.gc(12,"number"),R.Sb(),R.Tb(13,"td",11),R.Dc(14),R.gc(15,"number"),R.Sb(),R.Sb(),R.Qb()),2&t){const t=e.$implicit;R.Cb(3),R.Ec(t.descripcion),R.Cb(2),R.Ec(R.ic(6,5,t.cantidad,"1.2-2")),R.Cb(3),R.Ec(R.ic(9,8,t.porcentaje,"1.2-2")),R.Cb(3),R.Ec(R.ic(12,11,t.precio_unitario,"1.2-2")),R.Cb(3),R.Ec(R.ic(15,14,t.total,"1.2-2"))}}function so(t,e){if(1&t&&(R.Rb(0),R.Tb(1,"tr"),R.Tb(2,"th",7),R.Dc(3),R.Sb(),R.Sb(),R.Cc(4,oo,16,17,"ng-container",4),R.Tb(5,"tr"),R.Tb(6,"th",8),R.Dc(7,"Total de subcategor\xeda:"),R.Sb(),R.Tb(8,"th",9),R.Dc(9),R.gc(10,"number"),R.Sb(),R.Sb(),R.Qb()),2&t){const t=R.fc().$implicit;R.Cb(3),R.Ec(t.descripcion),R.Cb(1),R.lc("ngForOf",t.articulos),R.Cb(5),R.Ec(R.ic(10,3,t.total,"1.2-2"))}}function ro(t,e){if(1&t&&(R.Rb(0),R.Cc(1,so,11,6,"ng-container",5),R.Qb()),2&t){const t=e.$implicit;R.Cb(1),R.lc("ngIf",t.articulos.length>0)}}function co(t,e){if(1&t&&(R.Rb(0),R.Tb(1,"tr"),R.Tb(2,"th",6),R.Dc(3),R.Sb(),R.Sb(),R.Cc(4,ro,2,1,"ng-container",4),R.Qb()),2&t){const t=R.fc().$implicit;R.Cb(3),R.Ec(t.descripcion),R.Cb(1),R.lc("ngForOf",t.subcategoria)}}function lo(t,e){if(1&t&&(R.Rb(0),R.Cc(1,co,5,2,"ng-container",5),R.Qb()),2&t){const t=e.$implicit;R.Cb(1),R.lc("ngIf",t.subcategoria.length>0)}}let uo=(()=>{class t{constructor(){this.params={},this.data=[]}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=R.Hb({type:t,selectors:[["app-por-categoria"]],inputs:{params:"params",data:"data"},decls:26,vars:9,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"tbl"],[1,"brdTSingleBSingle"],[1,"rtxt","numWidth","brdTSingleBSingle"],[4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","5"],["colspan","5",1,"tab"],["colspan","4",1,"rtxt"],[1,"rtxt","brdTSingleBDouble","numWidth"],[1,"doubleTab","brdBSingle"],[1,"rtxt","numWidth","brdBSingle"]],template:function(t,e){1&t&&(R.Tb(0,"mat-card",0),R.Tb(1,"mat-card-header"),R.Tb(2,"mat-card-title"),R.Dc(3,"Reporte de ventas"),R.Sb(),R.Tb(4,"mat-card-subtitle"),R.Dc(5," Por categor\xeda"),R.Ob(6,"br"),R.Dc(7),R.gc(8,"date"),R.gc(9,"date"),R.Sb(),R.Sb(),R.Tb(10,"mat-card-content"),R.Tb(11,"table",1),R.Tb(12,"thead"),R.Tb(13,"tr"),R.Tb(14,"th",2),R.Dc(15,"Descripci\xf3n"),R.Sb(),R.Tb(16,"th",3),R.Dc(17,"Cantidad"),R.Sb(),R.Tb(18,"th",3),R.Dc(19,"Porcentaje"),R.Sb(),R.Tb(20,"th",3),R.Dc(21,"Precio unitario"),R.Sb(),R.Tb(22,"th",3),R.Dc(23,"Total"),R.Sb(),R.Sb(),R.Sb(),R.Tb(24,"tbody"),R.Cc(25,lo,2,1,"ng-container",4),R.Sb(),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(7),R.Gc(" Del ",R.ic(8,3,e.params.fdel,"dd/MM/yyyy")," al ",R.ic(9,6,e.params.fal,"dd/MM/yyyy")," "),R.Cb(18),R.lc("ngForOf",e.data))},directives:[p.a,p.d,p.h,p.g,p.c,i.l,i.m],pipes:[i.e,i.f],styles:[".numWidth[_ngcontent-%COMP%]{width:10%}tr[_ngcontent-%COMP%]{border:none}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-top:.25em;padding-bottom:.25em}"]}),t})();function ho(t,e){if(1&t&&(R.Rb(0),R.Tb(1,"tr"),R.Tb(2,"td",6),R.Dc(3),R.Sb(),R.Tb(4,"td",7),R.Dc(5),R.gc(6,"number"),R.Sb(),R.Tb(7,"td",7),R.Dc(8),R.gc(9,"number"),R.Sb(),R.Sb(),R.Qb()),2&t){const t=e.$implicit;R.Cb(3),R.Ec(t.articulo.descripcion),R.Cb(2),R.Ec(R.ic(6,3,t.cantidad,"1.2-2")),R.Cb(3),R.Ec(R.ic(9,6,t.total,"1.2-2"))}}function bo(t,e){if(1&t&&(R.Tb(0,"mat-card-content"),R.Tb(1,"table",2),R.Tb(2,"thead"),R.Tb(3,"tr"),R.Tb(4,"th",3),R.Dc(5,"Descripci\xf3n"),R.Sb(),R.Tb(6,"th",4),R.Dc(7,"Cantidad"),R.Sb(),R.Tb(8,"th",4),R.Dc(9,"Total"),R.Sb(),R.Sb(),R.Sb(),R.Tb(10,"tbody"),R.Cc(11,ho,10,9,"ng-container",5),R.Sb(),R.Sb(),R.Sb()),2&t){const t=R.fc();R.Cb(11),R.lc("ngForOf",t.data.datos)}}function mo(t,e){if(1&t&&(R.Tb(0,"tr"),R.Tb(1,"td",6),R.Dc(2),R.Sb(),R.Tb(3,"td",7),R.Dc(4),R.gc(5,"number"),R.Sb(),R.Tb(6,"td",7),R.Dc(7),R.gc(8,"number"),R.Sb(),R.Sb()),2&t){const t=e.$implicit;R.Cb(2),R.Ec(t.articulo.descripcion),R.Cb(2),R.Ec(R.ic(5,3,t.cantidad,"1.2-2")),R.Cb(3),R.Ec(R.ic(8,6,t.total,"1.2-2"))}}function po(t,e){if(1&t&&(R.Rb(0),R.Tb(1,"tr"),R.Tb(2,"th",8),R.Dc(3),R.Sb(),R.Sb(),R.Cc(4,mo,9,9,"tr",5),R.Qb()),2&t){const t=e.$implicit;R.Cb(3),R.Ec(t.sede),R.Cb(1),R.lc("ngForOf",t.articulos)}}function go(t,e){if(1&t&&(R.Tb(0,"mat-card-content"),R.Tb(1,"table",2),R.Tb(2,"thead"),R.Tb(3,"tr"),R.Tb(4,"th",3),R.Dc(5,"Descripci\xf3n"),R.Sb(),R.Tb(6,"th",4),R.Dc(7,"Cantidad"),R.Sb(),R.Tb(8,"th",4),R.Dc(9,"Total"),R.Sb(),R.Sb(),R.Sb(),R.Tb(10,"tbody"),R.Cc(11,po,5,2,"ng-container",5),R.Sb(),R.Sb(),R.Sb()),2&t){const t=R.fc();R.Cb(11),R.lc("ngForOf",t.data.datos)}}let fo=(()=>{class t{constructor(){this.params={},this.data={}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=R.Hb({type:t,selectors:[["app-por-articulo"]],inputs:{params:"params",data:"data"},decls:12,vars:10,consts:[[1,"mat-elevation-z4","fullWidth"],[4,"ngIf"],[1,"tbl"],[1,"brdTSingleBSingle"],[1,"rtxt","numWidth","brdTSingleBSingle"],[4,"ngFor","ngForOf"],[1,"doubleTab","brdBSingle"],[1,"rtxt","numWidth","brdBSingle"],["colspan","3",1,"brdTSingleBSingle"]],template:function(t,e){1&t&&(R.Tb(0,"mat-card",0),R.Tb(1,"mat-card-header"),R.Tb(2,"mat-card-title"),R.Dc(3,"Reporte de ventas"),R.Sb(),R.Tb(4,"mat-card-subtitle"),R.Dc(5," Por art\xedculo"),R.Ob(6,"br"),R.Dc(7),R.gc(8,"date"),R.gc(9,"date"),R.Sb(),R.Sb(),R.Cc(10,bo,12,1,"mat-card-content",1),R.Cc(11,go,12,1,"mat-card-content",1),R.Sb()),2&t&&(R.Cb(7),R.Gc(" Del ",R.ic(8,4,e.params.fdel,"dd/MM/yyyy")," al ",R.ic(9,7,e.params.fal,"dd/MM/yyyy")," "),R.Cb(3),R.lc("ngIf",1==e.data.grupo),R.Cb(1),R.lc("ngIf",2==e.data.grupo))},directives:[p.a,p.d,p.h,p.g,i.m,p.c,i.l],pipes:[i.e,i.f],styles:[".numWidth[_ngcontent-%COMP%]{width:10%}tr[_ngcontent-%COMP%]{border:none}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-top:.25em;padding-bottom:.25em}"]}),t})();function Co(t,e){if(1&t&&(R.Tb(0,"mat-option",16),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.tipo_reporte),R.Cb(1),R.Fc(" ",t.descripcion," ")}}function So(t,e){if(1&t&&(R.Tb(0,"mat-option",16),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.turno_tipo),R.Cb(1),R.Fc(" ",t.descripcion," ")}}function vo(t,e){if(1&t&&(R.Tb(0,"mat-option",16),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.sede.sede),R.Cb(1),R.Fc(" ",t.sede.nombre," ")}}function _o(t,e){if(1&t&&(R.Tb(0,"mat-option",16),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.id),R.Cb(1),R.Fc(" ",t.descripcion," ")}}function To(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",5),R.Tb(1,"mat-label"),R.Dc(2,"Agrupar por"),R.Sb(),R.Tb(3,"mat-select",17),R.bc("ngModelChange",function(e){return R.wc(t),R.fc().params._grupo=e}),R.Cc(4,_o,2,2,"mat-option",7),R.Sb(),R.Sb()}if(2&t){const t=R.fc();R.Cb(3),R.lc("ngModel",t.params._grupo),R.Cb(1),R.lc("ngForOf",t.grupos)}}function Do(t,e){1&t&&R.Ob(0,"app-cargando")}function wo(t,e){if(1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Ob(2,"app-por-categoria",18),R.Sb(),R.Sb()),2&t){const t=R.fc();R.Cb(2),R.lc("params",t.params)("data",t.porCategoria)}}function Eo(t,e){if(1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Ob(2,"app-por-articulo",18),R.Sb(),R.Sb()),2&t){const t=R.fc();R.Cb(2),R.lc("params",t.params)("data",t.porArticulo)}}let xo=(()=>{class t{constructor(t,e,a,i){this.snackBar=t,this.rptVentasSrvc=e,this.tipoTurnoSrvc=a,this.sedeSrvc=i,this.tiposReporte=[],this.params={},this.paramsToSend={},this.msgGenerandoReporte=null,this.porCategoria=[],this.porArticulo={datos:[]},this.tiposTurno=[],this.sedes=[],this.grupos=_e.a.grupos,this.tituloCategoria="Ventas por categoria",this.tituloArticulo="Ventas por articulo",this.cargando=!1,this.configBotones={showPdf:!0,showHtml:!0,showExcel:!0},this.loadSedes=()=>{this.sedeSrvc.getSedes({reporte:!0}).subscribe(t=>{t&&(this.sedes=t)})},this.loadTiposTurno=()=>{this.tipoTurnoSrvc.get().subscribe(t=>{t&&(this.tiposTurno=t)})},this.loadTiposReporte=()=>{this.tiposReporte=[{tipo_reporte:1,descripcion:"Por categor\xeda"},{tipo_reporte:2,descripcion:"Por art\xedculo"}]},this.resetParams=()=>{this.porCategoria=[],this.porArticulo=[],this.msgGenerandoReporte=null,this.params={tipo_reporte:void 0,fdel:xa().startOf("week").format(_e.a.dbDateFormat),fal:xa().endOf("week").format(_e.a.dbDateFormat)},this.cargando=!1},this.getReporte=(t=1)=>{switch(this.paramsToSend=JSON.parse(JSON.stringify(this.params)),this.msgGenerandoReporte="GENERANDO REPORTE EN ",t){case 1:this.getEnPantalla();break;case 2:this.getPdf();break;case 3:this.getExcel()}},this.getPdf=()=>{switch(this.params.tipo_reporte){case 1:this.getPorCategoriaPdf();break;case 2:this.getPorArticuloPdf()}},this.getExcel=()=>{switch(this.params.tipo_reporte){case 1:this.getPorCategoriaExcel();break;case 2:this.getPorArticuloExcel()}},this.getPorCategoriaExcel=()=>{this.paramsToSend._excel=1,this.cargando=!0,this.cleanParams(),this.rptVentasSrvc.porCategoriaPdf(this.paramsToSend).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/vnd.ms-excel"});Object(eo.saveAs)(e,`${this.tituloCategoria}.xls`)}else this.snackBar.open("No se pudo generar el reporte...",this.tituloCategoria,{duration:3e3})})},this.getPorCategoriaPdf=()=>{this.paramsToSend._excel=0,this.cargando=!0,this.cleanParams(),this.rptVentasSrvc.porCategoriaPdf(this.paramsToSend).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/pdf"});Object(eo.saveAs)(e,`${this.tituloCategoria}.pdf`)}else this.snackBar.open("No se pudo generar el reporte...",this.tituloCategoria,{duration:3e3})})},this.getPorArticuloPdf=()=>{this.paramsToSend._excel=0,this.cargando=!0,this.cleanParams(),this.rptVentasSrvc.porArticuloPdf(this.paramsToSend).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/pdf"});Object(eo.saveAs)(e,`${this.tituloArticulo}.pdf`)}else this.snackBar.open("No se pudo generar el reporte...",this.tituloArticulo,{duration:3e3})})},this.getPorArticuloExcel=()=>{this.paramsToSend._excel=1,this.cargando=!0,this.cleanParams(),this.rptVentasSrvc.porArticuloPdf(this.paramsToSend).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/vnd.ms-excel"});Object(eo.saveAs)(e,`${this.tituloArticulo}.xls`)}else this.snackBar.open("No se pudo generar el reporte...",this.tituloArticulo,{duration:3e3})})},this.getEnPantalla=()=>{switch(this.params.tipo_reporte){case 1:this.getPorCategoriaEnPantalla();break;case 2:this.getPorArticuloEnPantalla()}},this.cleanParams=()=>delete this.paramsToSend.tipo_reporte,this.getPorCategoriaEnPantalla=()=>{this.cargando=!0,this.cleanParams(),this.rptVentasSrvc.porCategoria(this.paramsToSend).subscribe(t=>{this.cargando=!1,t?this.porCategoria=t:this.snackBar.open("No se pudo generar el reporte...","Ventas por categor\xeda",{duration:3e3})})},this.getPorArticuloEnPantalla=()=>{this.cargando=!0,this.cleanParams(),this.rptVentasSrvc.porArticulo(this.paramsToSend).subscribe(t=>{this.cargando=!1,t?this.porArticulo=t:this.snackBar.open("No se pudo generar el reporte...","Ventas por art\xedculo",{duration:3e3})})}}ngOnInit(){this.resetParams(),this.loadTiposReporte(),this.loadTiposTurno(),this.loadSedes()}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(T.a),R.Nb(ao),R.Nb(Cn),R.Nb(io.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-rpt-ventas"]],decls:33,vars:13,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmEntidad","ngForm"],[1,"fullWidth"],["name","tipo_reporte","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","turno_tipo",3,"ngModel","ngModelChange"],["type","date","matInput","","placeholder","Del","name","fdel","required","",3,"ngModel","ngModelChange"],["type","date","matInput","","placeholder","Al","name","fal","required","",3,"ngModel","ngModelChange"],["name","sede","multiple","",3,"ngModel","ngModelChange"],["class","fullWidth",4,"ngIf"],[3,"configuracion","excelClick","htmlClick","pdfClick","resetParamsClick"],[4,"ngIf"],["class","row",4,"ngIf"],[3,"value"],["name","grupo",3,"ngModel","ngModelChange"],[3,"params","data"]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"mat-card",2),R.Tb(3,"mat-card-title"),R.Tb(4,"h4"),R.Dc(5,"Reporte de ventas"),R.Sb(),R.Sb(),R.Tb(6,"mat-card-content"),R.Tb(7,"form",3,4),R.Tb(9,"mat-form-field",5),R.Tb(10,"mat-label"),R.Dc(11,"Tipo"),R.Sb(),R.Tb(12,"mat-select",6),R.bc("ngModelChange",function(t){return e.params.tipo_reporte=t}),R.Cc(13,Co,2,2,"mat-option",7),R.Sb(),R.Sb(),R.Tb(14,"mat-form-field",5),R.Tb(15,"mat-label"),R.Dc(16,"Tipo de turno"),R.Sb(),R.Tb(17,"mat-select",8),R.bc("ngModelChange",function(t){return e.params.turno_tipo=t}),R.Cc(18,So,2,2,"mat-option",7),R.Sb(),R.Sb(),R.Tb(19,"mat-form-field",5),R.Tb(20,"input",9),R.bc("ngModelChange",function(t){return e.params.fdel=t}),R.Sb(),R.Sb(),R.Tb(21,"mat-form-field",5),R.Tb(22,"input",10),R.bc("ngModelChange",function(t){return e.params.fal=t}),R.Sb(),R.Sb(),R.Tb(23,"mat-form-field",5),R.Tb(24,"mat-label"),R.Dc(25,"Sede"),R.Sb(),R.Tb(26,"mat-select",11),R.bc("ngModelChange",function(t){return e.params.sede=t}),R.Cc(27,vo,2,2,"mat-option",7),R.Sb(),R.Sb(),R.Cc(28,To,5,2,"mat-form-field",12),R.Tb(29,"app-rpt-botones",13),R.bc("excelClick",function(){return e.getReporte(3)})("htmlClick",function(){return e.getReporte(1)})("pdfClick",function(){return e.getReporte(2)})("resetParamsClick",function(){return e.resetParams()}),R.Sb(),R.Sb(),R.Cc(30,Do,1,0,"app-cargando",14),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Cc(31,wo,3,2,"div",15),R.Cc(32,Eo,3,2,"div",15)),2&t&&(R.Cb(12),R.lc("ngModel",e.params.tipo_reporte),R.Cb(1),R.lc("ngForOf",e.tiposReporte),R.Cb(4),R.lc("ngModel",e.params.turno_tipo),R.Cb(1),R.lc("ngForOf",e.tiposTurno),R.Cb(2),R.lc("ngModel",e.params.fdel),R.Cb(2),R.lc("ngModel",e.params.fal),R.Cb(4),R.lc("ngModel",e.params.sede),R.Cb(1),R.lc("ngForOf",e.sedes),R.Cb(1),R.lc("ngIf",e.params.sede&&e.params.sede.length>1),R.Cb(1),R.lc("configuracion",e.configBotones),R.Cb(1),R.lc("ngIf",e.cargando),R.Cb(1),R.lc("ngIf",1===e.params.tipo_reporte&&e.porCategoria.length>0),R.Cb(1),R.lc("ngIf",2===e.params.tipo_reporte))},directives:[p.a,p.h,p.c,o.r,o.l,o.m,b.b,b.e,S.a,o.p,o.k,o.n,i.l,m.b,o.c,i.m,no.a,F.k,Aa.a,uo,fo],styles:[""]}),t})(),Po=(()=>{class t{constructor(){this.fdel=xa().format(_e.a.dbDateFormat),this.fdelChange=new R.o,this.fal=xa().format(_e.a.dbDateFormat),this.falChange=new R.o,this.configuracion={isRequiredFDel:!0,isRequiredFAl:!0},this.onFDelChange=()=>this.fdelChange.emit(this.fdel),this.onFAlChange=()=>this.falChange.emit(this.fal)}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=R.Hb({type:t,selectors:[["app-rpt-fechas"]],inputs:{fdel:"fdel",fal:"fal",configuracion:"configuracion"},outputs:{fdelChange:"fdelChange",falChange:"falChange"},decls:4,vars:4,consts:[[1,"fullWidth"],["type","date","matInput","","placeholder","Del","name","fdel",3,"ngModel","required","ngModelChange","change"],["type","date","matInput","","placeholder","Al","name","fal",3,"ngModel","required","ngModelChange","change"]],template:function(t,e){1&t&&(R.Tb(0,"mat-form-field",0),R.Tb(1,"input",1),R.bc("ngModelChange",function(t){return e.fdel=t})("change",function(){return e.onFDelChange()}),R.Sb(),R.Sb(),R.Tb(2,"mat-form-field",0),R.Tb(3,"input",2),R.bc("ngModelChange",function(t){return e.fal=t})("change",function(){return e.onFAlChange()}),R.Sb(),R.Sb()),2&t&&(R.Cb(1),R.lc("ngModel",e.fdel)("required",e.configuracion.isRequiredFDel),R.Cb(2),R.lc("ngModel",e.fal)("required",e.configuracion.isRequiredFAl))},directives:[b.b,m.b,o.c,o.k,o.n,o.p],styles:[""]}),t})();function ko(t,e){1&t&&R.Ob(0,"app-cargando")}let Oo=(()=>{class t{constructor(){this.params={},this.configParams={isRequiredFDel:!0,isRequiredFAl:!0},this.configBotones={isHtmlDisabled:!1,isPdfDisabled:!1,isExcelDisabled:!1},this.cargando=!1,this.resetParams=()=>{this.params={fdel:xa().startOf("week").format(_e.a.dbDateFormat),fal:xa().endOf("week").format(_e.a.dbDateFormat)}},this.getReporte=()=>{console.log("GENERANDO CON PARAMETROS = ",this.params)}}ngOnInit(){this.resetParams()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=R.Hb({type:t,selectors:[["app-turnos"]],decls:12,vars:5,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmEntidad","ngForm"],[3,"fdel","fal","configuracion","fdelChange","falChange"],[3,"configuracion","htmlClick","pdfClick","excelClick","resetParamsClick"],[4,"ngIf"]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"mat-card",2),R.Tb(3,"mat-card-title"),R.Tb(4,"h4"),R.Dc(5,"Reporte de Turnos"),R.Sb(),R.Sb(),R.Tb(6,"mat-card-content"),R.Tb(7,"form",3,4),R.Tb(9,"app-rpt-fechas",5),R.bc("fdelChange",function(t){return e.params.fdel=t})("falChange",function(t){return e.params.fal=t}),R.Sb(),R.Tb(10,"app-rpt-botones",6),R.bc("htmlClick",function(){return e.getReporte()})("pdfClick",function(){return e.getReporte()})("excelClick",function(){return e.getReporte()})("resetParamsClick",function(){return e.resetParams()}),R.Sb(),R.Sb(),R.Cc(11,ko,1,0,"app-cargando",7),R.Sb(),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(9),R.lc("fdel",e.params.fdel)("fal",e.params.fal)("configuracion",e.configParams),R.Cb(1),R.lc("configuracion",e.configBotones),R.Cb(1),R.lc("ngIf",e.cargando))},directives:[p.a,p.h,p.c,o.r,o.l,o.m,Po,no.a,i.m,Aa.a],styles:[""]}),t})();function yo(t,e){1&t&&R.Ob(0,"app-cargando")}const Mo=function(){return{standalone:!0}};let Ro=(()=>{class t{constructor(t,e){this.snackBar=t,this.pdfServicio=e,this.params={},this.titulo="Propinas",this.configBotones={isHtmlDisabled:!0,isPdfDisabled:!1,isExcelDisabled:!1,showHtml:!1,showExcel:!0,showPdf:!0},this.cargando=!1,this.resetParams=()=>{this.params={},this.cargando=!1}}ngOnInit(){}onSubmit(){this.params._excel=0,this.cargando=!0,this.pdfServicio.getReportePropina(this.params).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/pdf"});Object(eo.saveAs)(e,`${this.titulo}.pdf`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})}excelClick(){this.params._excel=1,this.cargando=!0,this.pdfServicio.getReportePropina(this.params).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/vnd.ms-excel"});Object(eo.saveAs)(e,`${this.titulo}.xls`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(T.a),R.Nb(mi.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-propinas"]],decls:17,vars:9,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmRptPropinas","ngForm"],[1,"fullWidth"],["matInput","","type","date","placeholder","Del","required","",3,"ngModel","ngModelOptions","ngModelChange"],["matInput","","type","date","placeholder","Al","required","",3,"ngModel","ngModelOptions","ngModelChange"],["name","mostrar_detalle",1,"fullWidth",3,"ngModel","ngModelChange"],[3,"configuracion","pdfClick","resetParamsClick","excelClick"],[4,"ngIf"]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"mat-card",2),R.Tb(3,"mat-card-title"),R.Tb(4,"h4"),R.Dc(5,"Reporte de propinas"),R.Sb(),R.Sb(),R.Tb(6,"mat-card-content"),R.Tb(7,"form",3,4),R.Tb(9,"mat-form-field",5),R.Tb(10,"input",6),R.bc("ngModelChange",function(t){return e.params.fdel=t}),R.Sb(),R.Sb(),R.Tb(11,"mat-form-field",5),R.Tb(12,"input",7),R.bc("ngModelChange",function(t){return e.params.fal=t}),R.Sb(),R.Sb(),R.Tb(13,"mat-checkbox",8),R.bc("ngModelChange",function(t){return+(e.params._detalle=t)}),R.Dc(14,"Mostrar Detalle"),R.Sb(),R.Tb(15,"app-rpt-botones",9),R.bc("pdfClick",function(){return e.onSubmit()})("resetParamsClick",function(){return e.resetParams()})("excelClick",function(){return e.excelClick()}),R.Sb(),R.Sb(),R.Cc(16,yo,1,0,"app-cargando",10),R.Sb(),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(10),R.lc("ngModel",e.params.fdel)("ngModelOptions",R.nc(7,Mo)),R.Cb(2),R.lc("ngModel",e.params.fal)("ngModelOptions",R.nc(8,Mo)),R.Cb(1),R.lc("ngModel",+e.params._detalle),R.Cb(2),R.lc("configuracion",e.configBotones),R.Cb(1),R.lc("ngIf",e.cargando))},directives:[p.a,p.h,p.c,o.r,o.l,o.m,b.b,m.b,o.c,o.p,o.k,o.n,v.a,no.a,i.m,Aa.a],styles:[""]}),t})();var Io=a("+iZS");function Fo(t,e){1&t&&(R.Tb(0,"th",19),R.Dc(1,"No."),R.Sb())}function Ao(t,e){if(1&t&&(R.Tb(0,"td",20),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.Fc("",t.comanda," ")}}function No(t,e){1&t&&(R.Tb(0,"th",19),R.Dc(1,"Orden"),R.Sb())}function Uo(t,e){if(1&t&&(R.Tb(0,"td",20),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.Ec(t.origen_datos.numero_orden||"")}}function jo(t,e){1&t&&(R.Tb(0,"th",19),R.Dc(1,"Fecha/Hora"),R.Sb())}function $o(t,e){if(1&t&&(R.Tb(0,"td",20),R.Dc(1),R.gc(2,"date"),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.Ec(R.ic(2,1,t.fhcreacion,"dd/MM/yyyy HH:mm:ss")||"")}}function Bo(t,e){1&t&&(R.Tb(0,"th",19),R.Dc(1,"Cliente"),R.Sb())}function Lo(t,e){if(1&t&&(R.Tb(0,"td",20),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.Ec(t.cuentas[0].nombre)}}function Ho(t,e){1&t&&(R.Tb(0,"th",19),R.Dc(1,"Total"),R.Sb())}function zo(t,e){if(1&t&&(R.Tb(0,"td",20),R.Dc(1),R.gc(2,"number"),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.Ec(R.ic(2,1,t.total,"1.2-2"))}}function qo(t,e){1&t&&(R.Tb(0,"th",21),R.Dc(1,"Imprimir"),R.Sb())}function Vo(t,e){if(1&t){const t=R.Ub();R.Tb(0,"td",22),R.Tb(1,"button",23),R.bc("click",function(){R.wc(t);const a=e.$implicit;return R.fc().imprimir(a)}),R.Dc(2," Imprimir "),R.Sb(),R.Sb()}}function Wo(t,e){1&t&&(R.Tb(0,"th",21),R.Dc(1,"Cancelar"),R.Sb())}function Go(t,e){if(1&t){const t=R.Ub();R.Tb(0,"td",22),R.Tb(1,"button",23),R.bc("click",function(){R.wc(t);const a=e.$implicit;return R.fc().cancelarPedido(a)}),R.Dc(2," Cancelar "),R.Sb(),R.Sb()}}function Qo(t,e){1&t&&(R.Tb(0,"th",21),R.Dc(1,"Facturar"),R.Sb())}function Jo(t,e){if(1&t){const t=R.Ub();R.Tb(0,"td",22),R.Tb(1,"button",23),R.bc("click",function(){R.wc(t);const a=e.$implicit;return R.fc().firmar(a)}),R.Dc(2," Facturar "),R.Sb(),R.Sb()}}function Xo(t,e){if(1&t&&(R.Tb(0,"h6"),R.Dc(1),R.Sb()),2&t){const t=R.fc().$implicit;R.Cb(1),R.Fc("Orden #",t.origen_datos.numero_orden,"")}}function Zo(t,e){if(1&t&&(R.Tb(0,"tr"),R.Tb(1,"td",29),R.Tb(2,"p",30),R.Dc(3),R.Sb(),R.Sb(),R.Sb()),2&t){const t=R.fc().$implicit;R.Cb(3),R.Ec(t.notas_generales)}}function Ko(t,e){1&t&&R.Ob(0,"br")}function Yo(t,e){if(1&t&&(R.Tb(0,"span"),R.Dc(1),R.Sb()),2&t){const t=R.fc().$implicit;R.Cb(1),R.Fc("\xa0\xa0\xa0",t.notas,"")}}function ts(t,e){if(1&t&&(R.Tb(0,"tr"),R.Tb(1,"td",31),R.Dc(2),R.Sb(),R.Sb()),2&t){const t=R.fc().$implicit;R.Cb(2),R.Fc(" ",t," ")}}function es(t,e){if(1&t&&(R.Rb(0),R.Cc(1,ts,3,1,"tr",26),R.Qb()),2&t){const t=e.$implicit;R.Cb(1),R.lc("ngIf",t.length>0)}}function as(t,e){if(1&t&&(R.Rb(0),R.Tb(1,"tr"),R.Tb(2,"td"),R.Dc(3),R.Cc(4,Ko,1,0,"br",26),R.Cc(5,Yo,2,1,"span",26),R.Sb(),R.Tb(6,"td",27),R.Dc(7),R.gc(8,"number"),R.Sb(),R.Sb(),R.Cc(9,es,2,1,"ng-container",28),R.Qb()),2&t){const t=e.$implicit;R.Cb(3),R.Gc(" ",t.cantidad," ",t.articulo.descripcion,""),R.Cb(1),R.lc("ngIf",t.notas.length>0),R.Cb(1),R.lc("ngIf",t.notas.length>0),R.Cb(2),R.Ec(R.ic(8,6,+t.precio*+t.cantidad+ +t.monto_extra,"1.2-2")),R.Cb(2),R.lc("ngForOf",t.detalle)}}function is(t,e){if(1&t&&(R.Tb(0,"td",20),R.Tb(1,"div",24),R.Tb(2,"table",25),R.Tb(3,"caption"),R.Tb(4,"h5"),R.Dc(5),R.Sb(),R.Cc(6,Xo,2,1,"h6",26),R.Sb(),R.Tb(7,"thead"),R.Tb(8,"th"),R.Dc(9,"Producto"),R.Sb(),R.Tb(10,"th",27),R.Dc(11,"Total"),R.Sb(),R.Sb(),R.Tb(12,"tbody"),R.Cc(13,Zo,4,1,"tr",26),R.Cc(14,as,10,9,"ng-container",28),R.Sb(),R.Sb(),R.Sb(),R.Sb()),2&t){const t=e.$implicit,a=R.fc();R.Db("colspan",a.columnsToDisplay.length),R.Cb(1),R.lc("@detailExpand",t==a.expandedElement?"expanded":"collapsed"),R.Cb(4),R.Fc("Detalle del pedido #",t.comanda,""),R.Cb(1),R.lc("ngIf",t.origen_datos.numero_orden),R.Cb(7),R.lc("ngIf",t.notas_generales),R.Cb(1),R.lc("ngForOf",t.cuentas[0].productos)}}function ns(t,e){1&t&&R.Ob(0,"tr",32)}function os(t,e){if(1&t){const t=R.Ub();R.Tb(0,"tr",33),R.bc("click",function(){R.wc(t);const a=e.$implicit,i=R.fc();return i.expandedElement=i.expandedElement===a?null:a}),R.Sb()}if(2&t){const t=e.$implicit,a=R.fc();R.Fb("example-expanded-row",a.expandedElement===t)}}function ss(t,e){1&t&&R.Ob(0,"tr",34)}const rs=function(){return["expandedDetail"]};let cs=(()=>{class t{constructor(t,e,a,i,n,o,s,r,c){this.dialog=t,this.snackBar=e,this.socket=a,this.ls=i,this.comandaSrvc=n,this.facturaSrvc=o,this.dns=s,this.pdfServicio=r,this.configSrvc=c,this.dataSource=[],this.columnsToDisplay=["comanda","orden","fechahora","nombre","total","imprimir","cancelar","facturar"],this.comandasEnLinea=[],this.params={de:0,a:99},this.avisoSocketIOEvent=(t="")=>{this.dialog.open(Ne.a,{maxWidth:"400px",data:new Ne.b("Socket.IO",t,"Aceptar","Cancelar")}).afterClosed().subscribe(t=>{})},this.notificarUsuario=()=>{const t={icon:"assets/img/minilogo.png",body:`Se recibi\xf3 una nueva orden a las ${xa().format(_e.a.dateTimeFormat)}.`,dir:"auto"};this.dns.createNotification("Rest-Touch Pro",1e4,t)},this.loadComandasEnLinea=()=>{this.comandaSrvc.getComandasOnLIne().subscribe(t=>{this.comandasEnLinea=t,this.dataSource=this.comandasEnLinea})},this.setToPrint=t=>{const e=[];return t.forEach(t=>{e.push({id:+t.articulo.articulo,nombre:t.articulo.descripcion,cantidad:+t.cantidad,total:+t.total,notas:t.notas||"",impresora:{bluetooth:+t.articulo.impresora.bluetooth,direccion_ip:t.articulo.impresora.direccion_ip||"",impresora:+t.articulo.impresora.impresora,nombre:t.articulo.impresora.nombre||"",sede:+t.articulo.impresora.sede,ubicacion:t.articulo.impresora.ubicacion||""},detalle:t.detalle})}),e},this.getPdf=t=>{const e=+t.cuentas[0].cuenta;this.pdfServicio.getComanda(e).subscribe(t=>{if(t){const a=new Blob([t],{type:"application/pdf"}),i=window.URL.createObjectURL(a);window.open(i,`cuenta_${e}`,"height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no")}else this.snackBar.open("No se pudo generar la comanda...","Comanda",{duration:3e3})})},this.imprimir=(t,e=0)=>{const a=this.setToPrint(t.cuentas[0].productos),i=a.filter(t=>0==+t.impresora.bluetooth),n=a.filter(t=>1==+t.impresora.bluetooth);let o={};i.length>0&&(o={Indice:e+1,Tipo:"Comanda",Nombre:t.cuentas[0].nombre,Numero:t.comanda,NoOrdenEnLinea:t.origen_datos.numero_orden,DireccionEntrega:t.origen_datos.direccion_entrega,DetalleCuenta:i,Total:0,NotasGenerales:t.notas_generales||""},this.socket.emit("print:comanda",`${JSON.stringify(o)}`)),n.length>0&&(o={Tipo:"Comanda",Nombre:t.cuentas[0].nombre,Numero:t.comanda,NoOrdenEnLinea:t.origen_datos.numero_orden,DireccionEntrega:t.origen_datos.direccion_entrega,DetalleCuenta:n,Total:0},this.printToBT(JSON.stringify(o)))},this.printToBT=(t="")=>{const e=window.open(`com.restouch.impresion://impresion/${t}`,"PrntBT","height=200,width=200,menubar=no,location=no,resizable=no,scrollbars=no,status=no");setTimeout(()=>e.close(),1e3)},this.firmar=t=>{this.facturaSrvc.firmar(+t.factura.factura).subscribe(e=>{e.exito&&(this.loadComandasEnLinea(),this.dialog.open(Ne.a,{maxWidth:"400px",data:new Ne.b("Imprimir factura","\xbfDesea imprimir la factura?","S\xed","No")}).afterClosed().subscribe(a=>{a&&(1===(this.configSrvc.getConfig(_e.a.CONSTANTES.RT_MODO_FACTURA)||1)?this.printFactura(e.factura,t.origen_datos):this.representacionGrafica(+t.factura.factura))})),this.snackBar.open(e.mensaje,"Facturaci\xf3n",{duration:e.exito?3e3:1e4})})},this.printFactura=(t,e={})=>{const a={NombreEmpresa:t.empresa.nombre_comercial,NitEmpresa:t.empresa.nit,SedeEmpresa:t.sedeFactura.nombre,DireccionEmpresa:t.empresa.direccion,Fecha:xa(t.fecha_factura).format(_e.a.dateFormat),Nit:t.receptor.nit,Nombre:t.receptor.nombre,Direccion:t.receptor.direccion,Serie:t.serie_factura,Numero:t.numero_factura,Total:0,NoAutorizacion:t.fel_uuid,NombreCertificador:t.certificador_fel.nombre,NitCertificador:t.certificador_fel.nit,FechaDeAutorizacion:t.fecha_autorizacion,NoOrdenEnLinea:e.numero_orden,FormaDePago:e.metodo_pago&&e.metodo_pago.length>0?e.metodo_pago.join(", "):"",DetalleFactura:[]};for(const i of t.detalle)a.DetalleFactura.push({Cantidad:i.cantidad,Descripcion:i.articulo.descripcion,Total:parseFloat(i.total)}),a.Total+=parseFloat(i.total);this.socket.emit("print:factura",JSON.stringify(a))},this.representacionGrafica=t=>{this.facturaSrvc.getGrafo(t).subscribe(t=>{if(t.exito)switch(t.tipo){case"link":this.openLinkWindow(t.documento);break;case"pdf":this.openPdfDocument(t.documento)}})},this.openLinkWindow=t=>window.open(t,"winFactPdf","height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no"),this.openPdfDocument=t=>{window.open("","winFactPdf","height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no").document.write('<iframe width="100%" style="margin: -8px;border: none;" height="100%" src="data:application/pdf;base64, '+encodeURI(t)+'"></iframe>')},this.imprimirLote=()=>{for(let t=this.params.de;t<=this.params.a;t++)this.imprimir(this.comandasEnLinea[t],t)},this.cancelarPedido=t=>{this.dialog.open(Ne.a,{maxWidth:"400px",data:new Ne.b("Cancelar pedido","Si cancela el pedido, ser\xe1 necesario volver a ingresarlo. \xbfDesea continuar?","S\xed","No",{input:[{select:!1,label:"Comentario",valor:null,id:"comentario",requerido:!1}]})}).afterClosed().subscribe(e=>{if(e.resultado){const a={};for(const t of e.config.input)a[t.id]=t.valor;this.comandaSrvc.cancelarPedido(t.comanda,a).subscribe(t=>{t.exito?this.snackBar.open("Pedido cancelado con \xe9xito...","Pedido",{duration:3e3}):this.snackBar.open(`ERROR: ${t.mensaje}`,"Pedido",{duration:7e3}),this.loadComandasEnLinea()})}})}}ngOnInit(){this.ls.get(_e.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(_e.a.usrTokenVar).sede_uuid),this.socket.on("shopify:updlist",()=>{this.loadComandasEnLinea(),this.notificarUsuario()}),this.socket.on("reconnect",()=>this.socket.emit("joinRestaurant",this.ls.get(_e.a.usrTokenVar).sede_uuid)),this.socket.on("connect_timeout",()=>{const t="DESCONECTADO DEL SERVIDOR (TIMEOUT)";this.snackBar.open(t,"ERROR",{duration:5e3}),this.avisoSocketIOEvent(t)}),this.socket.on("reconnect_attempt",t=>this.snackBar.open(`INTENTO DE RECONEXI\xd3N #${t}`,"ERROR",{duration:1e4})),this.socket.on("shopify:error",t=>{this.loadComandasEnLinea(),this.snackBar.open(`ERROR: ${t}`,"Firmar",{duration:1e4})})),this.loadComandasEnLinea()}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(P.b),R.Nb(T.a),R.Nb(Ra.a),R.Nb(Pe.a),R.Nb(va),R.Nb(Ma.a),R.Nb(Io.a),R.Nb(mi.a),R.Nb(pi.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-comanda-en-linea"]],decls:32,vars:5,consts:[[1,"row"],[1,"col","m12","s12"],["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","comanda"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","orden"],["matColumnDef","fechahora"],["matColumnDef","nombre"],["matColumnDef","total"],["matColumnDef","imprimir"],["mat-header-cell","","style","width: 10%;",4,"matHeaderCellDef"],["mat-cell","","class","tamanioAmigable","style","width: 10%;",4,"matCellDef"],["matColumnDef","cancelar"],["matColumnDef","facturar"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",3,"example-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",2,"width","10%"],["mat-cell","",1,"tamanioAmigable",2,"width","10%"],["mat-flat-button","","type","button","color","accent",1,"btnCelSize",3,"click"],[1,"example-element-detail"],[2,"width","75%","background-color","#f5f5f5","table-layout","fixed"],[4,"ngIf"],[1,"rtxt"],[4,"ngFor","ngForOf"],["colspan","2"],[1,"long-notes"],["colspan","2",1,"tabulador-doble"],["mat-header-row",""],["mat-row","",1,"example-element-row",3,"click"],["mat-row","",1,"example-detail-row"]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"table",2),R.Rb(3,3),R.Cc(4,Fo,2,0,"th",4),R.Cc(5,Ao,2,1,"td",5),R.Qb(),R.Rb(6,6),R.Cc(7,No,2,0,"th",4),R.Cc(8,Uo,2,1,"td",5),R.Qb(),R.Rb(9,7),R.Cc(10,jo,2,0,"th",4),R.Cc(11,$o,3,4,"td",5),R.Qb(),R.Rb(12,8),R.Cc(13,Bo,2,0,"th",4),R.Cc(14,Lo,2,1,"td",5),R.Qb(),R.Rb(15,9),R.Cc(16,Ho,2,0,"th",4),R.Cc(17,zo,3,4,"td",5),R.Qb(),R.Rb(18,10),R.Cc(19,qo,2,0,"th",11),R.Cc(20,Vo,3,0,"td",12),R.Qb(),R.Rb(21,13),R.Cc(22,Wo,2,0,"th",11),R.Cc(23,Go,3,0,"td",12),R.Qb(),R.Rb(24,14),R.Cc(25,Qo,2,0,"th",11),R.Cc(26,Jo,3,0,"td",12),R.Qb(),R.Rb(27,15),R.Cc(28,is,15,6,"td",5),R.Qb(),R.Cc(29,ns,1,0,"tr",16),R.Cc(30,os,1,2,"tr",17),R.Cc(31,ss,1,0,"tr",18),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(2),R.lc("dataSource",e.dataSource),R.Cb(27),R.lc("matHeaderRowDef",e.columnsToDisplay),R.Cb(1),R.lc("matRowDefColumns",e.columnsToDisplay),R.Cb(1),R.lc("matRowDefColumns",R.nc(4,rs)))},directives:[C.j,C.c,C.e,C.b,C.g,C.i,C.d,C.a,_.a,i.m,i.l,C.f,C.h],pipes:[i.e,i.f],styles:["table[_ngcontent-%COMP%]{width:100%}tr.example-detail-row[_ngcontent-%COMP%]{height:0}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):hover{background:#777}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):active{background:#efefef}.tamanioAmigable[_ngcontent-%COMP%]{padding:5px;width:10%!important;min-height:55px}.btnCelSize[_ngcontent-%COMP%]{min-width:55px;width:100%}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.example-element-diagram[_ngcontent-%COMP%]{min-width:80px;border:2px solid #000;padding:8px;font-weight:lighter;margin:8px 0;height:104px}.example-element-symbol[_ngcontent-%COMP%]{font-weight:700;font-size:40px;line-height:normal}.example-element-description[_ngcontent-%COMP%]{padding:16px}.example-element-description-attribution[_ngcontent-%COMP%]{opacity:.5}.long-notes[_ngcontent-%COMP%]{overflow-wrap:break-word}"],data:{animation:[Object(H.m)("detailExpand",[Object(H.j)("collapsed",Object(H.k)({height:"0px",minHeight:"0"})),Object(H.j)("expanded",Object(H.k)({height:"*"})),Object(H.l)("expanded <=> collapsed",Object(H.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),t})();var ls=a("roIu");function ds(t,e){if(1&t&&(R.Tb(0,"mat-option",17),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.turno_tipo),R.Cb(1),R.Fc(" ",t.descripcion," ")}}function us(t,e){if(1&t&&(R.Tb(0,"mat-option",17),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.sede.sede),R.Cb(1),R.Fc(" ",t.sede.nombre," ")}}function hs(t,e){if(1&t&&(R.Tb(0,"mat-option",17),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.id),R.Cb(1),R.Fc(" ",t.descripcion," ")}}function bs(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",5),R.Tb(1,"mat-label"),R.Dc(2,"Agrupar por"),R.Sb(),R.Tb(3,"mat-select",18),R.bc("ngModelChange",function(e){return R.wc(t),R.fc().params._grupo=e}),R.Cc(4,hs,2,2,"mat-option",7),R.Sb(),R.Sb()}if(2&t){const t=R.fc();R.Cb(3),R.lc("ngModel",t.params._grupo),R.Cb(1),R.lc("ngForOf",t.grupos)}}function ms(t,e){1&t&&R.Ob(0,"hr")}const ps=function(){return{standalone:!0}};function gs(t,e){if(1&t&&(R.Tb(0,"div"),R.Tb(1,"mat-form-field",5),R.Tb(2,"input",20),R.bc("ngModelChange",function(t){return e.$implicit.monto=t}),R.Sb(),R.Sb(),R.Sb()),2&t){const t=e.$implicit;R.Cb(2),R.mc("placeholder",t.descripcion),R.lc("ngModel",t.monto)("ngModelOptions",R.nc(3,ps))}}function fs(t,e){if(1&t&&(R.Tb(0,"form"),R.Cc(1,gs,3,4,"div",19),R.Sb()),2&t){const t=R.fc();R.Cb(1),R.lc("ngForOf",t.fpagos)}}function Cs(t,e){1&t&&R.Ob(0,"app-cargando")}let Ss=(()=>{class t{constructor(t,e,a,i,n){this.snackBar=t,this.pdfServicio=e,this.tipoTurnoSrvc=a,this.fpagoSrvc=i,this.sedeSrvc=n,this.params={_validar:!1,sede:[]},this.titulo="Resumen de caja",this.tiposTurno=[],this.cargando=!1,this.fpagos=[],this.sedes=[],this.grupos=_e.a.grupos,this.configBotones={showPdf:!0,showHtml:!1,showExcel:!0},this.loadFormaPago=()=>{this.fpagoSrvc.get().subscribe(t=>{t&&(this.fpagos=t)})},this.loadSedes=()=>{this.sedeSrvc.getSedes({reporte:!0}).subscribe(t=>{t&&(this.sedes=t)})},this.loadTiposTurno=()=>{this.tipoTurnoSrvc.get().subscribe(t=>{t&&(this.tiposTurno=t)})},this.resetParams=()=>{this.params={},this.cargando=!1},this.excelClick=()=>{this.cargando=!0,this.params._pagos=this.fpagos,this.params._excel=1,this.pdfServicio.getReporteCaja(this.params).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/vnd.ms-excel"});Object(eo.saveAs)(e,`${this.titulo}.xls`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})}}ngOnInit(){this.loadTiposTurno(),this.loadFormaPago(),this.loadSedes()}onSubmit(){this.cargando=!0,this.params._pagos=this.fpagos,this.params._excel=0,this.pdfServicio.getReporteCaja(this.params).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/pdf"});Object(eo.saveAs)(e,`${this.titulo}.pdf`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(T.a),R.Nb(mi.a),R.Nb(Cn),R.Nb(ls.a),R.Nb(io.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-caja"]],decls:35,vars:17,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmRptCaja","ngForm"],[1,"fullWidth"],["name","turno_tipo",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","date","placeholder","Del","required","",3,"ngModel","ngModelOptions","ngModelChange"],["matInput","","type","date","placeholder","Al","required","",3,"ngModel","ngModelOptions","ngModelChange"],["name","sede","multiple","",3,"ngModel","ngModelChange"],["class","fullWidth",4,"ngIf"],[1,"col"],["name","mostrar_detalle",1,"fullWidth",3,"ngModel","ngModelChange"],["name","validar",1,"fullWidth",3,"ngModel","ngModelChange"],[4,"ngIf"],[3,"configuracion","excelClick","pdfClick","resetParamsClick"],[3,"value"],["name","grupo",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["matInput","","type","number","step","0.01",3,"placeholder","ngModel","ngModelOptions","ngModelChange"]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"mat-card",2),R.Tb(3,"mat-card-title"),R.Tb(4,"h4"),R.Dc(5,"Reporte de caja"),R.Sb(),R.Sb(),R.Tb(6,"mat-card-content"),R.Tb(7,"form",3,4),R.Tb(9,"mat-form-field",5),R.Tb(10,"mat-label"),R.Dc(11,"Tipo de turno"),R.Sb(),R.Tb(12,"mat-select",6),R.bc("ngModelChange",function(t){return e.params.turno_tipo=t}),R.Cc(13,ds,2,2,"mat-option",7),R.Sb(),R.Sb(),R.Tb(14,"mat-form-field",5),R.Tb(15,"input",8),R.bc("ngModelChange",function(t){return e.params.fdel=t}),R.Sb(),R.Sb(),R.Tb(16,"mat-form-field",5),R.Tb(17,"input",9),R.bc("ngModelChange",function(t){return e.params.fal=t}),R.Sb(),R.Sb(),R.Tb(18,"mat-form-field",5),R.Tb(19,"mat-label"),R.Dc(20,"Sede"),R.Sb(),R.Tb(21,"mat-select",10),R.bc("ngModelChange",function(t){return e.params.sede=t}),R.Cc(22,us,2,2,"mat-option",7),R.Sb(),R.Sb(),R.Cc(23,bs,5,2,"mat-form-field",11),R.Tb(24,"div",0),R.Tb(25,"div",12),R.Tb(26,"mat-checkbox",13),R.bc("ngModelChange",function(t){return+(e.params._detalle=t)}),R.Dc(27,"Mostrar Detalle"),R.Sb(),R.Sb(),R.Tb(28,"div",12),R.Tb(29,"mat-checkbox",14),R.bc("ngModelChange",function(t){return+(e.params._validar=t)}),R.Dc(30,"Validar Montos"),R.Sb(),R.Sb(),R.Sb(),R.Cc(31,ms,1,0,"hr",15),R.Cc(32,fs,2,1,"form",15),R.Tb(33,"app-rpt-botones",16),R.bc("excelClick",function(){return e.excelClick()})("pdfClick",function(){return e.onSubmit()})("resetParamsClick",function(){return e.resetParams()}),R.Sb(),R.Sb(),R.Cc(34,Cs,1,0,"app-cargando",15),R.Sb(),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(12),R.lc("ngModel",e.params.turno_tipo),R.Cb(1),R.lc("ngForOf",e.tiposTurno),R.Cb(2),R.lc("ngModel",e.params.fdel)("ngModelOptions",R.nc(15,ps)),R.Cb(2),R.lc("ngModel",e.params.fal)("ngModelOptions",R.nc(16,ps)),R.Cb(4),R.lc("ngModel",e.params.sede),R.Cb(1),R.lc("ngForOf",e.sedes),R.Cb(1),R.lc("ngIf",e.params.sede&&e.params.sede.length>1),R.Cb(3),R.lc("ngModel",+e.params._detalle),R.Cb(3),R.lc("ngModel",+e.params._validar),R.Cb(2),R.lc("ngIf",e.params._validar),R.Cb(1),R.lc("ngIf",e.params._validar),R.Cb(1),R.lc("configuracion",e.configBotones),R.Cb(1),R.lc("ngIf",e.cargando))},directives:[p.a,p.h,p.c,o.r,o.l,o.m,b.b,b.e,S.a,o.k,o.n,i.l,m.b,o.c,o.p,i.m,v.a,no.a,F.k,o.o,Aa.a],styles:[""]}),t})();function vs(t,e){1&t&&R.Ob(0,"app-cargando")}let _s=(()=>{class t{constructor(t,e){this.snackBar=t,this.pdfServicio=e,this.params={},this.titulo="Facturas",this.cargando=!1,this.configBotones={showPdf:!0,showHtml:!1,showExcel:!0,isPdfDisabled:!1,isExcelDisabled:!1},this.resetParams=()=>{this.params={fdel:xa().startOf("month").format(_e.a.dbDateFormat),fal:xa().format(_e.a.dbDateFormat)},this.cargando=!1},this.chkDates=()=>{this.configBotones.isPdfDisabled=!this.params.fdel||!this.params.fal,this.configBotones.isExcelDisabled=!this.params.fdel||!this.params.fal}}ngOnInit(){this.resetParams()}onSubmit(){this.cargando=!0,this.params._excel=0,this.pdfServicio.getReporteFactura(this.params).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/pdf"});Object(eo.saveAs)(e,`${this.titulo}.pdf`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})}excelClick(){this.cargando=!0,this.params._excel=1,this.pdfServicio.getReporteFactura(this.params).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/vnd.ms-excel"});Object(eo.saveAs)(e,`${this.titulo}.xls`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(T.a),R.Nb(mi.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-factura"]],decls:22,vars:6,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmRptFactura","ngForm"],[1,"fullWidth"],["matInput","","type","date","placeholder","Del","name","fdel","required","",3,"ngModel","ngModelChange","change"],["matInput","","type","date","placeholder","Al","name","fal","required","",3,"ngModel","ngModelChange","change"],[1,"col"],["name","detalle",1,"fullWidth",3,"ngModel","ngModelChange"],["name","anuladas",1,"fullWidth",3,"ngModel","ngModelChange"],[3,"configuracion","excelClick","pdfClick","resetParamsClick"],[4,"ngIf"]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"mat-card",2),R.Tb(3,"mat-card-title"),R.Tb(4,"h4"),R.Dc(5,"Reporte de facturas"),R.Sb(),R.Sb(),R.Tb(6,"mat-card-content"),R.Tb(7,"form",3,4),R.Tb(9,"mat-form-field",5),R.Tb(10,"input",6),R.bc("ngModelChange",function(t){return e.params.fdel=t})("change",function(){return e.chkDates()}),R.Sb(),R.Sb(),R.Tb(11,"mat-form-field",5),R.Tb(12,"input",7),R.bc("ngModelChange",function(t){return e.params.fal=t})("change",function(){return e.chkDates()}),R.Sb(),R.Sb(),R.Tb(13,"div",0),R.Tb(14,"div",8),R.Tb(15,"mat-checkbox",9),R.bc("ngModelChange",function(t){return+(e.params._detalle=t)}),R.Dc(16,"Mostrar Detalle"),R.Sb(),R.Sb(),R.Tb(17,"div",8),R.Tb(18,"mat-checkbox",10),R.bc("ngModelChange",function(t){return+(e.params._anuladas=t)}),R.Dc(19,"Mostrar \xdanicamente Anuladas"),R.Sb(),R.Sb(),R.Sb(),R.Tb(20,"app-rpt-botones",11),R.bc("excelClick",function(){return e.excelClick()})("pdfClick",function(){return e.onSubmit()})("resetParamsClick",function(){return e.resetParams()}),R.Sb(),R.Sb(),R.Cc(21,vs,1,0,"app-cargando",12),R.Sb(),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(10),R.lc("ngModel",e.params.fdel),R.Cb(2),R.lc("ngModel",e.params.fal),R.Cb(3),R.lc("ngModel",+e.params._detalle),R.Cb(3),R.lc("ngModel",+e.params._anuladas),R.Cb(2),R.lc("configuracion",e.configBotones),R.Cb(1),R.lc("ngIf",e.cargando))},directives:[p.a,p.h,p.c,o.r,o.l,o.m,b.b,m.b,o.c,o.p,o.k,o.n,v.a,no.a,i.m,Aa.a],styles:[""]}),t})();function Ts(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-list-item",5),R.bc("click",function(){R.wc(t);const a=e.$implicit;return R.fc().getTurno(a)}),R.Tb(1,"mat-icon",6),R.Dc(2,"line_weight"),R.Sb(),R.Tb(3,"h5",7),R.Dc(4),R.Sb(),R.Sb()}if(2&t){const t=e.$implicit;R.Cb(4),R.Ec(t.descripcion)}}const Ds=function(){return{standalone:!0}};let ws=(()=>{class t{constructor(t){this.turnoSrvc=t,this.getTurnoEv=new R.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadTurnos=()=>{this.turnoSrvc.get().subscribe(t=>{t&&t.length>0&&(this.lstTurnos=t,this.applyFilter())})},this.getTurno=t=>{this.getTurnoEv.emit(t)},this.pageChange=t=>{this.pageSize=t.pageSize,this.pageIndex=t.pageIndex,this.applyFilter()}}ngOnInit(){this.loadTurnos()}applyFilter(){if(this.txtFiltro.length>0){const t=Object(_e.b)(this.lstTurnos,this.txtFiltro);this.length=t.length,this.lstTurnosPaged=Object(_e.c)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstTurnos.length,this.lstTurnosPaged=Object(_e.c)(this.lstTurnos,this.pageSize,this.pageIndex+1)}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(Cn))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-lista-turno-tipo"]],outputs:{getTurnoEv:"getTurnoEv"},decls:7,vars:7,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,e){1&t&&(R.Tb(0,"mat-card",0),R.Tb(1,"mat-card-content"),R.Tb(2,"mat-form-field",1),R.Tb(3,"input",2),R.bc("keyup",function(){return e.applyFilter()})("ngModelChange",function(t){return e.txtFiltro=t}),R.Sb(),R.Sb(),R.Tb(4,"mat-nav-list"),R.Cc(5,Ts,5,1,"mat-list-item",3),R.Sb(),R.Tb(6,"mat-paginator",4),R.bc("page",function(t){return e.pageChange(t)}),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(3),R.lc("ngModel",e.txtFiltro)("ngModelOptions",R.nc(6,Ds)),R.Cb(2),R.lc("ngForOf",e.lstTurnosPaged),R.Cb(1),R.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[p.a,p.c,b.b,m.b,o.c,o.k,o.n,u.e,i.l,x.a,u.c,h.a,u.b,F.h],styles:[""]}),t})();function Es(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",9),R.bc("click",function(){return R.wc(t),R.fc().resetTurno()}),R.Dc(1," Nuevo "),R.Sb()}}let xs=(()=>{class t{constructor(t,e){this._snackBar=t,this.turnoSrvc=e,this.turnoSavedEv=new R.o,this.resetTurno=()=>this.turno={turno_tipo:null,descripcion:null,activo:1},this.onSubmit=()=>{this.turnoSrvc.save(this.turno).subscribe(t=>{t.exito?(this.turnoSavedEv.emit(),this.resetTurno(),this._snackBar.open("Tipo de Turno agregado...","Turno",{duration:3e3})):this._snackBar.open(`ERROR: ${t.mensaje}`,"Turno",{duration:3e3})})}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(T.a),R.Nb(Cn))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-form-turno-tipo"]],inputs:{turno:"turno"},outputs:{turnoSavedEv:"turnoSavedEv"},decls:15,vars:5,consts:[[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmTurno","ngForm"],[1,"fullWidth"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"ngModel","ngModelChange"],["name","activo",1,"fullWidth",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click"]],template:function(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-card",0),R.Tb(1,"mat-card-title"),R.Tb(2,"h4"),R.Dc(3),R.Sb(),R.Sb(),R.Tb(4,"mat-card-content"),R.Tb(5,"form",1,2),R.bc("ngSubmit",function(){return R.wc(t),R.tc(6).form.valid&&e.onSubmit()}),R.Tb(7,"mat-form-field",3),R.Tb(8,"input",4),R.bc("ngModelChange",function(t){return e.turno.descripcion=t}),R.Sb(),R.Sb(),R.Tb(9,"mat-checkbox",5),R.bc("ngModelChange",function(t){return+(e.turno.activo=t)}),R.Dc(10,"Activo"),R.Sb(),R.Tb(11,"div",6),R.Tb(12,"button",7),R.Dc(13," Guardar "),R.Sb(),R.Cc(14,Es,2,0,"button",8),R.Sb(),R.Sb(),R.Sb(),R.Sb()}if(2&t){const t=R.tc(6);R.Cb(3),R.Fc(" Tipo de Turno ",e.turno.turno_tipo?e.turno.descripcion:""," "),R.Cb(5),R.lc("ngModel",e.turno.descripcion),R.Cb(1),R.lc("ngModel",+e.turno.activo),R.Cb(3),R.lc("disabled",!t.form.valid),R.Cb(2),R.lc("ngIf",e.turno.turno_tipo)}},directives:[p.a,p.h,p.c,o.r,o.l,o.m,b.b,m.b,o.c,o.p,o.k,o.n,v.a,_.a,i.m],styles:[""]}),t})();const Ps=["lstTurno"];let ks=(()=>{class t{constructor(){this.setTurno=t=>this.turno=t,this.refreshTurnoList=()=>this.lstTurnoComponent.loadTurnos(),this.turno={turno_tipo:null,descripcion:null,activo:1}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=R.Hb({type:t,selectors:[["app-turno-tipo"]],viewQuery:function(t,e){if(1&t&&R.Ic(Ps,1),2&t){let t;R.sc(t=R.cc())&&(e.lstTurnoComponent=t.first)}},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getTurnoEv"],["lstTurno",""],[1,"col","m7","s12"],[3,"turno","turnoSavedEv"],["frmTurno",""]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"app-lista-turno-tipo",2,3),R.bc("getTurnoEv",function(t){return e.setTurno(t)}),R.Sb(),R.Sb(),R.Tb(4,"div",4),R.Tb(5,"app-form-turno-tipo",5,6),R.bc("turnoSavedEv",function(){return e.refreshTurnoList()}),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(5),R.lc("turno",e.turno))},directives:[ws,xs],styles:[""]}),t})(),Os=(()=>{class t{constructor(t){this.http=t,this.moduleUrl="propina",this.srvcErrHndl=new Te.a}get(t={}){return this.http.get(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/buscar?${Ee.stringify(t)}`).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}save(t){return this.http.post(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/guardar${t.propina_distribucion?"/"+t.propina_distribucion:""}`,t).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(R.Xb(n.b))},t.\u0275prov=R.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ys(t,e){if(1&t){const t=R.Ub();R.Tb(0,"td",7),R.bc("click",function(){R.wc(t);const a=e.$implicit;return R.fc().getPropina(a)}),R.Tb(1,"mat-list"),R.Tb(2,"mat-list-item"),R.Tb(3,"mat-icon",8),R.Dc(4,"line_weight"),R.Sb(),R.Tb(5,"h5",9),R.Dc(6),R.Sb(),R.Tb(7,"span",9),R.Dc(8),R.Sb(),R.Tb(9,"button",10),R.Tb(10,"mat-icon"),R.Dc(11,"arrow_right_alt"),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Sb()}if(2&t){const t=e.$implicit;R.Cb(6),R.Fc("",t.porcentaje,"%"),R.Cb(2),R.Ec(t.usuario_tipo.descripcion)}}function Ms(t,e){1&t&&R.Ob(0,"tr",11)}const Rs=function(){return[5,10,20]};let Is=(()=>{class t{constructor(t){this.propinaSrvc=t,this.displayedColumns=["propina"],this.getPropinaEv=new R.o,this.loadPropinas=()=>{this.propinaSrvc.get().subscribe(t=>{t&&t.length>0&&(this.lstPropinas=t,this.dataSource=new C.k(this.lstPropinas),this.dataSource.paginator=this.paginator)})},this.getPropina=t=>{this.getPropinaEv.emit(t)}}ngOnInit(){this.loadPropinas()}applyFilter(t){this.dataSource.filter=t.trim().toLowerCase()}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(Os))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-lista-propina"]],viewQuery:function(t,e){if(1&t&&R.Ic(x.a,3),2&t){let t;R.sc(t=R.cc())&&(e.paginator=t.first)}},outputs:{getPropinaEv:"getPropinaEv"},decls:9,vars:4,consts:[[1,"mat-elevation-z4","fullWidth"],["matInput","","placeholder","Buscar...",3,"keyup"],["mat-table","",3,"dataSource"],["matColumnDef","propina"],["mat-cell","",3,"click",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-cell","",3,"click"],["mat-list-icon",""],["mat-line",""],["mat-icon-button","","type","button","color","accent"],["mat-row",""]],template:function(t,e){1&t&&(R.Tb(0,"mat-card",0),R.Tb(1,"mat-card-content"),R.Tb(2,"mat-form-field"),R.Tb(3,"input",1),R.bc("keyup",function(t){return e.applyFilter(t.target.value)}),R.Sb(),R.Sb(),R.Tb(4,"table",2),R.Rb(5,3),R.Cc(6,ys,12,2,"td",4),R.Qb(),R.Cc(7,Ms,1,0,"tr",5),R.Sb(),R.Ob(8,"mat-paginator",6),R.Sb(),R.Sb()),2&t&&(R.Cb(4),R.lc("dataSource",e.dataSource),R.Cb(3),R.lc("matRowDefColumns",e.displayedColumns),R.Cb(1),R.lc("pageSizeOptions",R.nc(3,Rs)))},directives:[p.a,p.c,b.b,m.b,C.j,C.c,C.b,C.i,x.a,C.a,u.a,u.c,h.a,u.b,F.h,_.a,C.h],styles:[""]}),t})();function Fs(t,e){if(1&t&&(R.Tb(0,"mat-option",14),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.usuario_tipo),R.Cb(1),R.Fc(" ",t.descripcion," ")}}function As(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",15),R.bc("click",function(){return R.wc(t),R.fc().resetPropina()}),R.Tb(1,"mat-icon"),R.Dc(2,"add"),R.Sb(),R.Sb()}}let Ns=(()=>{class t{constructor(t,e,a){this.snackBar=t,this.propinaSrvc=e,this.usuarioSrvc=a,this.propinaSavedEv=new R.o,this.usuarios=[],this.loadUsuario=()=>{this.usuarioSrvc.get().subscribe(t=>{this.usuarios=t})},this.resetPropina=()=>this.propina={propina_distribucion:null,usuario_tipo:null,porcentaje:null,anulado:0,sede:null,grupal:0},this.onSubmit=()=>{this.propinaSrvc.save(this.propina).subscribe(t=>{t.exito?(this.propinaSavedEv.emit(),this.resetPropina(),this.snackBar.open("Propina agregada...","Distribucion de propinas",{duration:3e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Distribucion de propinas",{duration:3e3})})}}ngOnInit(){this.resetPropina(),this.loadUsuario()}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(T.a),R.Nb(Os),R.Nb(Sn))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-form-propina"]],inputs:{propina:"propina"},outputs:{propinaSavedEv:"propinaSavedEv"},decls:24,vars:7,consts:[[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmPropina","ngForm"],[1,"fullWidth"],["name","usuario","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","step","0.01","placeholder","Porcentaje","name","porcentaje","required","",3,"ngModel","ngModelChange"],[1,"row"],[1,"col","m6","s6"],["name","grupal",1,"fullWidth",3,"ngModel","ngModelChange"],["name","anulado",1,"fullWidth",3,"ngModel","ngModelChange"],["align","end"],["mat-icon-button","","type","submit","color","accent",3,"disabled"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],[3,"value"],["mat-icon-button","","type","button","color","accent",3,"click"]],template:function(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-card",0),R.Ob(1,"mat-card-title"),R.Tb(2,"mat-card-content"),R.Tb(3,"form",1,2),R.bc("ngSubmit",function(){return R.wc(t),R.tc(4).form.valid&&e.onSubmit()}),R.Tb(5,"mat-form-field",3),R.Tb(6,"mat-label"),R.Dc(7,"Tipo Usuario"),R.Sb(),R.Tb(8,"mat-select",4),R.bc("ngModelChange",function(t){return e.propina.usuario_tipo=t}),R.Cc(9,Fs,2,2,"mat-option",5),R.Sb(),R.Sb(),R.Tb(10,"mat-form-field",3),R.Tb(11,"input",6),R.bc("ngModelChange",function(t){return e.propina.porcentaje=t}),R.Sb(),R.Sb(),R.Tb(12,"div",7),R.Tb(13,"div",8),R.Tb(14,"mat-checkbox",9),R.bc("ngModelChange",function(t){return+(e.propina.grupal=t)}),R.Dc(15,"Propina Grupal"),R.Sb(),R.Sb(),R.Tb(16,"div",8),R.Tb(17,"mat-checkbox",10),R.bc("ngModelChange",function(t){return+(e.propina.anulado=t)}),R.Dc(18,"Anulado"),R.Sb(),R.Sb(),R.Sb(),R.Tb(19,"div",11),R.Tb(20,"button",12),R.Tb(21,"mat-icon"),R.Dc(22,"save"),R.Sb(),R.Sb(),R.Cc(23,As,3,0,"button",13),R.Sb(),R.Sb(),R.Sb(),R.Sb()}if(2&t){const t=R.tc(4);R.Cb(8),R.lc("ngModel",e.propina.usuario_tipo),R.Cb(1),R.lc("ngForOf",e.usuarios),R.Cb(2),R.lc("ngModel",e.propina.porcentaje),R.Cb(3),R.lc("ngModel",+e.propina.grupal),R.Cb(3),R.lc("ngModel",+e.propina.anulado),R.Cb(3),R.lc("disabled",!t.form.valid),R.Cb(3),R.lc("ngIf",e.propina.propina_distribucion)}},directives:[p.a,p.h,p.c,o.r,o.l,o.m,b.b,b.e,S.a,o.p,o.k,o.n,i.l,m.b,o.o,o.c,v.a,_.a,h.a,i.m,F.k],styles:[""]}),t})();const Us=["lstPropina"];let js=(()=>{class t{constructor(){this.setPropina=t=>this.propina={propina_distribucion:t.propina_distribucion,usuario_tipo:t.usuario_tipo.usuario_tipo,porcentaje:t.porcentaje,anulado:t.anulado,sede:t.sede,grupal:t.grupal},this.refreshPropinaList=()=>this.lstPropinaComponent.loadPropinas(),this.propina={propina_distribucion:null,usuario_tipo:null,porcentaje:null,anulado:null,sede:null,grupal:null}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=R.Hb({type:t,selectors:[["app-propina"]],viewQuery:function(t,e){if(1&t&&R.Ic(Us,1),2&t){let t;R.sc(t=R.cc())&&(e.lstPropinaComponent=t.first)}},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getPropinaEv"],["lstPropina",""],[1,"col","m7","s12"],[3,"propina","propinaSavedEv"],["frmPropina",""]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"app-lista-propina",2,3),R.bc("getPropinaEv",function(t){return e.setPropina(t)}),R.Sb(),R.Sb(),R.Tb(4,"div",4),R.Tb(5,"app-form-propina",5,6),R.bc("propinaSavedEv",function(){return e.refreshPropinaList()}),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(5),R.lc("propina",e.propina))},directives:[Is,Ns],styles:[""]}),t})(),$s=(()=>{class t{constructor(t){this.http=t,this.srvcErrHndl=new Te.a}getCampos(t={}){return this.http.get(`${_e.a.urlCatalogos}/get_campos?${Ee.stringify(t)}`).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}getReporte(t={}){const e={headers:new n.d({Accept:"application/vnd.ms-excel"}),responseType:"blob"};return this.http.post(`${_e.a.urlAppRestaurante}/reporte/autoconsulta`,t,e).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(R.Xb(n.b))},t.\u0275prov=R.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Bs(t,e){if(1&t&&(R.Tb(0,"mat-option",14),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.tabla_campo),R.Cb(1),R.Fc(" ",t.descripcion," ")}}function Ls(t,e){if(1&t&&(R.Tb(0,"mat-option",14),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.tabla_campo),R.Cb(1),R.Fc(" ",t.descripcion," ")}}function Hs(t,e){if(1&t&&(R.Tb(0,"mat-option",14),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.tabla_campo),R.Cb(1),R.Fc(" ",t.descripcion," ")}}function zs(t,e){1&t&&R.Ob(0,"app-cargando")}let qs=(()=>{class t{constructor(t,e){this.snackBar=t,this.autoconsultaSrvc=e,this.params={campos:[],datos:[]},this.titulo="Autoconsulta",this.campos=[],this.fechas=[],this.orden=[],this.cargando=!1,this.configBotones={showPdf:!1,showHtml:!1,showExcel:!0},this.resetParams=()=>{this.params={campos:[],datos:[]},this.cargando=!1},this.getReporte=()=>{this.cargando=!0;for(const t in this.params.campos)this.params.datos.push(this.params.campos[t]);this.autoconsultaSrvc.getReporte(this.params).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/vnd.ms-excel"});Object(eo.saveAs)(e,`${this.titulo}.xls`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})},this.getCampos=(t={},e=1)=>{this.cargando=!0,this.autoconsultaSrvc.getCampos(t).subscribe(t=>{switch(this.cargando=!1,e){case 1:this.campos=t;break;case 2:this.fechas=t;break;case 3:this.orden=t}})}}ngOnInit(){this.getCampos(),this.getCampos({por_fecha:1},2),this.getCampos({ordenar_por:1},3)}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(T.a),R.Nb($s))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-autoconsulta"]],decls:30,vars:10,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmEntidad","ngForm"],[1,"fullWidth"],["name","campos","multiple","multiple","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","date","matInput","","placeholder","Del","name","fdel","required","",3,"ngModel","ngModelChange"],["type","date","matInput","","placeholder","Al","name","fal","required","",3,"ngModel","ngModelChange"],["name","campos","required","",3,"ngModel","ngModelChange"],["name","campos",3,"ngModel","ngModelChange"],[3,"configuracion","excelClick","resetParamsClick"],[4,"ngIf"],[3,"value"]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"mat-card",2),R.Tb(3,"mat-card-title"),R.Tb(4,"h4"),R.Dc(5,"Autoconsulta"),R.Sb(),R.Sb(),R.Tb(6,"mat-card-content"),R.Tb(7,"form",3,4),R.Tb(9,"mat-form-field",5),R.Tb(10,"mat-label"),R.Dc(11,"Campos"),R.Sb(),R.Tb(12,"mat-select",6),R.bc("ngModelChange",function(t){return e.params.campos=t}),R.Cc(13,Bs,2,2,"mat-option",7),R.Sb(),R.Sb(),R.Tb(14,"mat-form-field",5),R.Tb(15,"input",8),R.bc("ngModelChange",function(t){return e.params.fdel=t}),R.Sb(),R.Sb(),R.Tb(16,"mat-form-field",5),R.Tb(17,"input",9),R.bc("ngModelChange",function(t){return e.params.fal=t}),R.Sb(),R.Sb(),R.Tb(18,"mat-form-field",5),R.Tb(19,"mat-label"),R.Dc(20,"Filtrar Por"),R.Sb(),R.Tb(21,"mat-select",10),R.bc("ngModelChange",function(t){return e.params.fecha=t}),R.Cc(22,Ls,2,2,"mat-option",7),R.Sb(),R.Sb(),R.Tb(23,"mat-form-field",5),R.Tb(24,"mat-label"),R.Dc(25,"Ordenar Por"),R.Sb(),R.Tb(26,"mat-select",11),R.bc("ngModelChange",function(t){return e.params.orden=t}),R.Cc(27,Hs,2,2,"mat-option",7),R.Sb(),R.Sb(),R.Tb(28,"app-rpt-botones",12),R.bc("excelClick",function(){return e.getReporte()})("resetParamsClick",function(){return e.resetParams()}),R.Sb(),R.Sb(),R.Cc(29,zs,1,0,"app-cargando",13),R.Sb(),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(12),R.lc("ngModel",e.params.campos),R.Cb(1),R.lc("ngForOf",e.campos),R.Cb(2),R.lc("ngModel",e.params.fdel),R.Cb(2),R.lc("ngModel",e.params.fal),R.Cb(4),R.lc("ngModel",e.params.fecha),R.Cb(1),R.lc("ngForOf",e.fechas),R.Cb(4),R.lc("ngModel",e.params.orden),R.Cb(1),R.lc("ngForOf",e.orden),R.Cb(1),R.lc("configuracion",e.configBotones),R.Cb(1),R.lc("ngIf",e.cargando))},directives:[p.a,p.h,p.c,o.r,o.l,o.m,b.b,b.e,S.a,o.p,o.k,o.n,i.l,m.b,o.c,no.a,i.m,F.k,Aa.a],styles:[""]}),t})(),Vs=(()=>{class t{constructor(t){this.http=t,this.moduleUrl="cajacorte",this.srvcErrHndl=new Te.a}buscar(t={}){return this.http.get(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/buscar?${Ee.stringify(t)}`).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}getCajaCorteTipo(t={}){return this.http.get(`${_e.a.urlCatalogos}/get_caja_corte_tipo?${Ee.stringify(t)}`).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}getCajaCorteNominacion(t={}){return this.http.get(`${_e.a.urlCatalogos}/get_caja_corte_nominacion?${Ee.stringify(t)}`).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}guardar(t){return this.http.post(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/guardar`,t).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}anularCorte(t){return this.http.post(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/anular_caja`,t).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}anularDetalle(t){return this.http.post(`${_e.a.urlAppRestaurante}/${this.moduleUrl}/anular_caja_detalle`,t).pipe(Object(De.a)(_e.a.reintentos),Object(we.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(R.Xb(n.b))},t.\u0275prov=R.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Ws(t,e){if(1&t){const t=R.Ub();R.Tb(0,"td",7),R.Tb(1,"mat-list"),R.Tb(2,"mat-list-item"),R.Tb(3,"mat-icon",8),R.bc("click",function(){R.wc(t);const a=e.$implicit;return R.fc().anularCaja(a)}),R.Dc(4,"close"),R.Sb(),R.Tb(5,"h5",9),R.Dc(6),R.Sb(),R.Tb(7,"span",9),R.Dc(8),R.Sb(),R.Tb(9,"span",9),R.Dc(10),R.Sb(),R.Tb(11,"button",10),R.bc("click",function(){R.wc(t);const a=e.$implicit;return R.fc().getCajacorte(a)}),R.Tb(12,"mat-icon"),R.Dc(13,"arrow_right_alt"),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Sb()}if(2&t){const t=e.$implicit;R.Cb(6),R.Ec(t.descripcion),R.Cb(2),R.Ec(t.creacion),R.Cb(2),R.Fc("Total: ",t.total,"")}}function Gs(t,e){1&t&&R.Ob(0,"tr",11)}const Qs=function(){return[5,10,20]};let Js=(()=>{class t{constructor(t,e){this.ccorteSrvc=t,this._snackBar=e,this.displayedColumns=["ccGeneral"],this.getCajacorteEv=new R.o,this.getCajascortes=()=>{this.ccorteSrvc.buscar().subscribe(t=>{this.listacc=t,this.dataSource=new C.k(this.listacc),this.dataSource.paginator=this.paginator})},this.anularCaja=t=>{confirm("\xbfSi anula este corte, se anular\xe1 tambi\xe9n las nominaciones.?")&&this.ccorteSrvc.anularCorte(t).subscribe(t=>{t.exito&&this.getCajascortes(),this._snackBar.open(`${t.mensaje}`,"Corte de caja",{duration:3e3})})},this.getCajacorte=t=>{this.getCajacorteEv.emit(t)}}ngOnInit(){this.getCajascortes()}filtrar(t){this.dataSource.filter=t.trim().toLowerCase()}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(Vs),R.Nb(T.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-cajacorte-lista"]],viewQuery:function(t,e){if(1&t&&R.Ic(x.a,3),2&t){let t;R.sc(t=R.cc())&&(e.paginator=t.first)}},outputs:{getCajacorteEv:"getCajacorteEv"},decls:9,vars:4,consts:[[1,"mat-elevation-z4","fullWidth"],["matInput","","placeholder","Buscar...",3,"keyup"],["mat-table","",3,"dataSource"],["matColumnDef","ccGeneral"],["mat-cell","",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-cell",""],["mat-list-icon","",1,"anulaicon",3,"click"],["mat-line",""],["mat-icon-button","","type","button","color","accent",3,"click"],["mat-row",""]],template:function(t,e){1&t&&(R.Tb(0,"mat-card",0),R.Tb(1,"mat-card-content"),R.Tb(2,"mat-form-field"),R.Tb(3,"input",1),R.bc("keyup",function(t){return e.filtrar(t.target.value)}),R.Sb(),R.Sb(),R.Tb(4,"table",2),R.Rb(5,3),R.Cc(6,Ws,14,3,"td",4),R.Qb(),R.Cc(7,Gs,1,0,"tr",5),R.Sb(),R.Ob(8,"mat-paginator",6),R.Sb(),R.Sb()),2&t&&(R.Cb(4),R.lc("dataSource",e.dataSource),R.Cb(3),R.lc("matRowDefColumns",e.displayedColumns),R.Cb(1),R.lc("pageSizeOptions",R.nc(3,Qs)))},directives:[p.a,p.c,b.b,m.b,C.j,C.c,C.b,C.i,x.a,C.a,u.a,u.c,h.a,u.b,F.h,_.a,C.h],styles:[".anulaicon[_ngcontent-%COMP%]{cursor:pointer}"]}),t})();function Xs(t,e){if(1&t&&(R.Tb(0,"mat-option",16),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.caja_corte_tipo),R.Cb(1),R.Fc(" ",t.descripcion," ")}}function Zs(t,e){if(1&t&&(R.Tb(0,"mat-option",16),R.Dc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.caja_corte_nominacion),R.Cb(1),R.Fc(" ",t.nombre," ")}}function Ks(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-grid-list",11),R.Tb(1,"mat-grid-tile"),R.Dc(2),R.Sb(),R.Tb(3,"mat-grid-tile"),R.Dc(4),R.Sb(),R.Tb(5,"mat-grid-tile"),R.Dc(6),R.Sb(),R.Tb(7,"mat-grid-tile"),R.Tb(8,"mat-icon",17),R.bc("click",function(){R.wc(t);const a=e.$implicit;return R.fc().anularCajaDetalle(a)}),R.Dc(9,"close"),R.Sb(),R.Sb(),R.Sb()}if(2&t){const t=e.$implicit;R.Cb(2),R.Ec(t.nombre),R.Cb(2),R.Ec(t.cantidad),R.Cb(2),R.Ec(t.total)}}function Ys(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",18),R.bc("click",function(){return R.wc(t),R.fc().reseteGeneral()}),R.Tb(1,"mat-icon"),R.Dc(2,"add"),R.Sb(),R.Sb()}}let tr=(()=>{class t{constructor(t,e){this._snackBar=t,this.cajacorteSrvc=e,this.cajacorteSavedEv=new R.o,this.ccorteTipo=[],this.ccorteNomi=[],this.detalle={caja_corte_detalle:0,caja_corte:0,cantidad:0,total:0,anulado:0,caja_corte_nominacion:0,nombre:null},this.getCajaCorteTipo=()=>{this.cajacorteSrvc.getCajaCorteTipo().subscribe(t=>{this.ccorteTipo=t})},this.getCajaCorteNominacion=()=>{this.cajacorteSrvc.getCajaCorteNominacion().subscribe(t=>{this.ccorteNomi=t})},this.setTotal=()=>{if(this.detalle.caja_corte_nominacion){let t=this.ccorteNomi.filter(t=>t.caja_corte_nominacion==this.detalle.caja_corte_nominacion)[0];this.detalle.total=1==t.calcula?this.detalle.cantidad*t.valor:this.detalle.cantidad}},this.setNamenomi=()=>{let t=this.ccorteNomi.filter(t=>t.caja_corte_nominacion==this.detalle.caja_corte_nominacion)[0];console.log(t,this.detalle.caja_corte_nominacion),this.detalle.nombre=t.nombre},this.setNameTipo=()=>{let t=this.ccorteTipo.filter(t=>t.caja_corte_tipo==this.ccorte.caja_corte_tipo)[0];console.log(t,this.ccorte.caja_corte_tipo),this.ccorte.descripcion=t.descripcion},this.reseteGeneral=()=>this.ccorte={caja_corte:0,creacion:null,usuario:0,turno:0,confirmado:null,anulado:0,caja_corte_tipo:0,descripcion:null,detalle:[]},this.resetDetalle=()=>this.detalle={caja_corte_detalle:0,caja_corte:0,cantidad:0,total:0,anulado:0,caja_corte_nominacion:0,nombre:null},this.agregarDetalle=()=>{this.detalle.caja_corte_nominacion&&this.detalle.cantidad&&this.detalle.total?(this.ccorte.detalle.push(this.detalle),this.resetDetalle()):this._snackBar.open("Complete los datos de nominaciones","Corte de caja",{duration:3e3})},this.guardar=()=>{if(confirm("\xbfEst\xe1 seguro?")){if(0==this.ccorte.detalle.length)return this._snackBar.open("Por favor agregue las nominaciones","Corte de caja",{duration:3e3}),!1;if(!this.ccorte.caja_corte_tipo)return this._snackBar.open("Seleccione el tipo de corte de caja.","Corte de caja",{duration:3e3}),!1;this.cajacorteSrvc.guardar(this.ccorte).subscribe(t=>{t.exito&&(this.cajacorteSavedEv.emit(),this.reseteGeneral()),this._snackBar.open(`${t.mensaje}`,"Corte de caja",{duration:3e3})})}},this.anularCajaDetalle=t=>{if(confirm("\xbfEst\xe1 seguro.?"))if(t.caja_corte_detalle)this.cajacorteSrvc.anularDetalle(t).subscribe(e=>{if(e.exito){let e=this.ccorte.detalle.indexOf(t);this.ccorte.detalle.splice(e,1)}this._snackBar.open(`${e.mensaje}`,"Corte de caja",{duration:3e3})});else{let e=this.ccorte.detalle.indexOf(t);this.ccorte.detalle.splice(e,1)}}}ngOnInit(){this.getCajaCorteTipo(),this.getCajaCorteNominacion()}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(T.a),R.Nb(Vs))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-cajacorte-form"]],inputs:{ccorte:"ccorte"},outputs:{cajacorteSavedEv:"cajacorteSavedEv"},decls:49,vars:9,consts:[[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmcc","ngForm"],[1,"fullWidth"],["name","tipo","required","",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"example-container"],["name","nominacion",3,"ngModel","ngModelChange","selectionChange"],["matInput","","type","number","step","0.01","name","cantidad",3,"ngModel","ngModelChange","blur"],["matInput","","type","number","step","0.01","name","total","readonly","",3,"ngModel","ngModelChange"],["mat-icon-button","","type","button","color","accent","title","Agregar el detalle",3,"click"],["cols","4","rowHeight","7:1"],["cols","4","rowHeight","7:1",4,"ngFor","ngForOf"],["align","end"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["mat-icon-button","","type","submit","color","accent","title","Guardar corte de caja",3,"disabled"],[3,"value"],["mat-list-icon","",1,"anulacion",3,"click"],["mat-icon-button","","type","button","color","accent",3,"click"]],template:function(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-card",0),R.Tb(1,"mat-card-title"),R.Tb(2,"h5"),R.Dc(3,"Corte de caja"),R.Sb(),R.Sb(),R.Tb(4,"mat-card-content"),R.Tb(5,"form",1,2),R.bc("ngSubmit",function(){return R.wc(t),R.tc(6).form.valid&&e.guardar()}),R.Tb(7,"mat-form-field",3),R.Tb(8,"mat-label"),R.Dc(9,"Tipo de Corte"),R.Sb(),R.Tb(10,"mat-select",4),R.bc("ngModelChange",function(t){return e.ccorte.caja_corte_tipo=t})("selectionChange",function(){return e.setNameTipo()}),R.Cc(11,Xs,2,2,"mat-option",5),R.Sb(),R.Sb(),R.Tb(12,"p"),R.Dc(13,"Agregar nominaciones"),R.Sb(),R.Tb(14,"div",6),R.Tb(15,"mat-form-field"),R.Tb(16,"mat-label"),R.Dc(17,"Nominaci\xf3n:"),R.Sb(),R.Tb(18,"mat-select",7),R.bc("ngModelChange",function(t){return e.detalle.caja_corte_nominacion=t})("selectionChange",function(){return e.setNamenomi()}),R.Cc(19,Zs,2,2,"mat-option",5),R.Sb(),R.Sb(),R.Tb(20,"mat-form-field"),R.Tb(21,"mat-label"),R.Dc(22,"Cantidad:"),R.Sb(),R.Tb(23,"input",8),R.bc("ngModelChange",function(t){return e.detalle.cantidad=t})("blur",function(){return e.setTotal()}),R.Sb(),R.Sb(),R.Tb(24,"mat-form-field"),R.Tb(25,"mat-label"),R.Dc(26,"Total:"),R.Sb(),R.Tb(27,"input",9),R.bc("ngModelChange",function(t){return e.detalle.total=t}),R.Sb(),R.Sb(),R.Tb(28,"button",10),R.bc("click",function(){return e.agregarDetalle()}),R.Tb(29,"mat-icon"),R.Dc(30,"add"),R.Sb(),R.Sb(),R.Sb(),R.Tb(31,"mat-grid-list",11),R.Tb(32,"mat-grid-tile"),R.Tb(33,"b"),R.Dc(34,"Nominaci\xf3n"),R.Sb(),R.Sb(),R.Tb(35,"mat-grid-tile"),R.Tb(36,"b"),R.Dc(37,"Cantidad"),R.Sb(),R.Sb(),R.Tb(38,"mat-grid-tile"),R.Tb(39,"b"),R.Dc(40,"Total"),R.Sb(),R.Sb(),R.Ob(41,"mat-grid-tile"),R.Sb(),R.Cc(42,Ks,10,3,"mat-grid-list",12),R.Ob(43,"hr"),R.Tb(44,"div",13),R.Cc(45,Ys,3,0,"button",14),R.Tb(46,"button",15),R.Tb(47,"mat-icon"),R.Dc(48,"save"),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Sb()}if(2&t){const t=R.tc(6);R.Cb(10),R.lc("ngModel",e.ccorte.caja_corte_tipo),R.Cb(1),R.lc("ngForOf",e.ccorteTipo),R.Cb(7),R.lc("ngModel",e.detalle.caja_corte_nominacion),R.Cb(1),R.lc("ngForOf",e.ccorteNomi),R.Cb(4),R.lc("ngModel",e.detalle.cantidad),R.Cb(4),R.lc("ngModel",e.detalle.total),R.Cb(15),R.lc("ngForOf",e.ccorte.detalle),R.Cb(3),R.lc("ngIf",e.ccorte.caja_corte),R.Cb(1),R.lc("disabled",!t.form.valid)}},directives:[p.a,p.h,p.c,o.r,o.l,o.m,b.b,b.e,S.a,o.p,o.k,o.n,i.l,m.b,o.o,o.c,_.a,h.a,E.a,E.c,i.m,F.k,u.b],styles:[".example-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}mat-grid-tile[_ngcontent-%COMP%]{text-align:left}.anulacion[_ngcontent-%COMP%]{cursor:pointer}"]}),t})();const er=["lstCortecaja"];let ar=(()=>{class t{constructor(){this.editarCajaCorte=t=>this.ccorte=t,this.actualizaLista=()=>this.lstCajacorteComponent.getCajascortes(),this.ccorte={caja_corte:0,creacion:null,usuario:0,turno:0,confirmado:null,anulado:0,caja_corte_tipo:0,descripcion:null,detalle:[]}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=R.Hb({type:t,selectors:[["app-cajacorte"]],viewQuery:function(t,e){if(1&t&&R.Ic(er,1),2&t){let t;R.sc(t=R.cc())&&(e.lstCajacorteComponent=t.first)}},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getCajacorteEv"],["lstCortecaja",""],[1,"col","m7","s12"],[3,"ccorte","cajacorteSavedEv"],["frmCortecaja",""]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"app-cajacorte-lista",2,3),R.bc("getCajacorteEv",function(t){return e.editarCajaCorte(t)}),R.Sb(),R.Sb(),R.Tb(4,"div",4),R.Tb(5,"app-cajacorte-form",5,6),R.bc("cajacorteSavedEv",function(){return e.actualizaLista()}),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(5),R.lc("ccorte",e.ccorte))},directives:[Js,tr],styles:[""]}),t})();const ir=function(){return{standalone:!0}};function nr(t,e){if(1&t){const t=R.Ub();R.Tb(0,"form"),R.Tb(1,"mat-form-field",6),R.Tb(2,"input",7),R.bc("ngModelChange",function(e){return R.wc(t),R.fc().datos.tiempo=e}),R.Sb(),R.Sb(),R.Sb()}if(2&t){const t=R.fc();R.Cb(2),R.lc("ngModel",t.datos.tiempo)("ngModelOptions",R.nc(2,ir))}}class or{constructor(t,e,a,i,n,o){this.title=t,this.message=e,this.lblBtnConfirm=a,this.lblBtnDeny=i,this.datos=n,this.showTimer=o}}let sr=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.title=e.title,this.message=e.message,this.lblBtnConfirm=e.lblBtnConfirm,this.lblBtnDeny=e.lblBtnDeny,this.datos={respuesta:!1,tiempo:"00:00"}}ngOnInit(){}onConfirm(t){this.datos.respuesta=!0,this.datos.tiempo=t.tiempo,this.dialogRef.close(this.datos)}onDismiss(){this.datos.respuesta=!1,this.dialogRef.close(this.datos)}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(P.f),R.Nb(P.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-dialog-cocina"]],decls:11,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[4,"ngIf"],["mat-dialog-actions","","align","center"],["mat-raised-button","",1,"btnConfig",3,"click"],["mat-raised-button","","color","accent",1,"btnConfig",3,"click"],[1,"fullWidth"],["type","number","matInput","","placeholder","Minutos","min","0","max","59","step","1",3,"ngModel","ngModelOptions","ngModelChange"]],template:function(t,e){1&t&&(R.Tb(0,"h1",0),R.Dc(1),R.Sb(),R.Tb(2,"div",1),R.Tb(3,"p"),R.Dc(4),R.Sb(),R.Sb(),R.Cc(5,nr,3,3,"form",2),R.Tb(6,"div",3),R.Tb(7,"button",4),R.bc("click",function(){return e.onDismiss()}),R.Dc(8),R.Sb(),R.Tb(9,"button",5),R.bc("click",function(){return e.onConfirm(e.datos)}),R.Dc(10),R.Sb(),R.Sb()),2&t&&(R.Cb(1),R.Fc(" ",e.title," "),R.Cb(3),R.Ec(e.message),R.Cb(1),R.lc("ngIf",e.data.showTimer),R.Cb(3),R.Ec(e.lblBtnDeny),R.Cb(2),R.Ec(e.lblBtnConfirm))},directives:[P.g,P.d,i.m,P.c,_.a,o.r,o.l,o.m,b.b,o.o,m.b,o.c,o.k,o.n],styles:[""]}),t})();function rr(t,e){1&t&&R.Ob(0,"br")}function cr(t,e){if(1&t&&(R.Rb(0),R.Tb(1,"span"),R.Dc(2),R.Sb(),R.Ob(3,"br"),R.Qb()),2&t){const t=e.$implicit;R.Cb(2),R.Ec(t.trim())}}function lr(t,e){1&t&&R.Ob(0,"br")}function dr(t,e){if(1&t&&(R.Tb(0,"span"),R.Tb(1,"strong"),R.Dc(2,"Notas:"),R.Sb(),R.Dc(3),R.Sb()),2&t){const t=R.fc().$implicit;R.Cb(3),R.Fc(" ",t.notas," ")}}function ur(t,e){if(1&t&&(R.Tb(0,"tr"),R.Tb(1,"td"),R.Dc(2),R.Cc(3,rr,1,0,"br",11),R.Cc(4,cr,4,1,"ng-container",8),R.Cc(5,lr,1,0,"br",11),R.Cc(6,dr,4,1,"span",11),R.Sb(),R.Sb()),2&t){const t=e.$implicit;R.Cb(2),R.Gc(" ",t.cantidad," ",t.articulo.descripcion," "),R.Cb(1),R.lc("ngIf",t.detalle.length>0),R.Cb(1),R.lc("ngForOf",t.detalle),R.Cb(1),R.lc("ngIf",!!t.notas&&t.notas.length>0&&!t.detalle),R.Cb(1),R.lc("ngIf",!!t.notas&&t.notas.length>0)}}function hr(t,e){if(1&t&&(R.Tb(0,"table"),R.Cc(1,ur,7,6,"tr",8),R.Sb()),2&t){const t=R.fc().$implicit;R.Cb(1),R.lc("ngForOf",t.productos)}}function br(t,e){if(1&t&&(R.Rb(0),R.Cc(1,hr,2,1,"table",11),R.Qb()),2&t){const t=e.$implicit;R.Cb(1),R.lc("ngIf",t.productos.length>0)}}function mr(t,e){if(1&t){const t=R.Ub();R.Tb(0,"div",6),R.Tb(1,"mat-card",7),R.Tb(2,"mat-card-header"),R.Tb(3,"mat-card-title"),R.Dc(4),R.Sb(),R.Tb(5,"mat-card-subtitle"),R.Dc(6),R.Ob(7,"br"),R.Dc(8),R.Sb(),R.Sb(),R.Tb(9,"mat-card-content"),R.Cc(10,br,2,1,"ng-container",8),R.Sb(),R.Tb(11,"mat-card-actions",9),R.Tb(12,"button",10),R.bc("click",function(){R.wc(t);const a=e.$implicit;return R.fc().setCocinado(a,1)}),R.Dc(13,"Vista"),R.Sb(),R.Sb(),R.Sb(),R.Sb()}if(2&t){const t=e.$implicit;R.Cb(4),R.Gc("Comanda #",t.comanda," - ",t.numero,""),R.Cb(2),R.Gc(" Area ",t.mesa.area.nombre," - Mesa #",t.mesa.etiqueta||t.mesa.numero,""),R.Cb(2),R.Gc(" Atiende: ",t.mesero.nombres," ",t.mesero.apellidos," "),R.Cb(2),R.lc("ngForOf",t.cuentas)}}function pr(t,e){1&t&&R.Ob(0,"br")}function gr(t,e){if(1&t&&(R.Rb(0),R.Tb(1,"span"),R.Dc(2),R.Sb(),R.Ob(3,"br"),R.Qb()),2&t){const t=e.$implicit;R.Cb(2),R.Ec(t.trim())}}function fr(t,e){1&t&&R.Ob(0,"br")}function Cr(t,e){if(1&t&&(R.Tb(0,"span"),R.Tb(1,"strong"),R.Dc(2,"Notas:"),R.Sb(),R.Dc(3),R.Sb()),2&t){const t=R.fc().$implicit;R.Cb(3),R.Fc(" ",t.notas," ")}}function Sr(t,e){if(1&t&&(R.Tb(0,"tr"),R.Tb(1,"td"),R.Dc(2),R.Cc(3,pr,1,0,"br",11),R.Cc(4,gr,4,1,"ng-container",8),R.Cc(5,fr,1,0,"br",11),R.Cc(6,Cr,4,1,"span",11),R.Sb(),R.Sb()),2&t){const t=e.$implicit;R.Cb(2),R.Gc(" ",t.cantidad," ",t.articulo.descripcion," "),R.Cb(1),R.lc("ngIf",t.detalle.length>0),R.Cb(1),R.lc("ngForOf",t.detalle),R.Cb(1),R.lc("ngIf",!!t.notas&&t.notas.length>0&&!t.detalle),R.Cb(1),R.lc("ngIf",!!t.notas&&t.notas.length>0)}}function vr(t,e){if(1&t&&(R.Tb(0,"table"),R.Cc(1,Sr,7,6,"tr",8),R.Sb()),2&t){const t=R.fc().$implicit;R.Cb(1),R.lc("ngForOf",t.productos)}}function _r(t,e){if(1&t&&(R.Rb(0),R.Cc(1,vr,2,1,"table",11),R.Qb()),2&t){const t=e.$implicit;R.Cb(1),R.lc("ngIf",t.productos.length>0)}}const Tr=function(t){return{"text-danger":t}};function Dr(t,e){if(1&t){const t=R.Ub();R.Tb(0,"div",6),R.Tb(1,"mat-card",7),R.Tb(2,"mat-card-header"),R.Tb(3,"mat-card-title"),R.Dc(4),R.Sb(),R.Tb(5,"mat-card-subtitle"),R.Dc(6),R.Ob(7,"br"),R.Dc(8),R.Sb(),R.Sb(),R.Tb(9,"mat-card-content"),R.Tb(10,"div",12),R.Tb(11,"h6",13),R.Dc(12),R.gc(13,"date"),R.Sb(),R.Sb(),R.Cc(14,_r,2,1,"ng-container",8),R.Sb(),R.Tb(15,"mat-card-actions",9),R.Tb(16,"button",10),R.bc("click",function(){R.wc(t);const a=e.$implicit;return R.fc().setCocinado(a)}),R.Dc(17,"Cocinado"),R.Sb(),R.Sb(),R.Sb(),R.Sb()}if(2&t){const t=e.$implicit,a=R.fc();R.Cb(4),R.Gc("Comanda #",t.comanda," - ",t.numero,""),R.Cb(2),R.Gc(" Area ",t.mesa.area.nombre," - Mesa #",t.mesa.etiqueta||t.mesa.numero,""),R.Cb(2),R.Gc(" Atiende: ",t.mesero.nombres," ",t.mesero.apellidos," "),R.Cb(3),R.lc("ngClass",R.oc(12,Tr,a.comparaFecha(t))),R.Cb(1),R.Fc(" ",R.ic(13,9,t.tiempo_transcurrido,"HH:mm:ss")," "),R.Cb(2),R.lc("ngForOf",t.cuentas)}}const wr=[{path:"mantareas",component:ea,canActivate:[ve.a]},{path:"tranareas",component:bn,canActivate:[ve.a]},{path:"turno",component:to,canActivate:[ve.a]},{path:"rptvtascat",component:xo,canActivate:[ve.a]},{path:"rptturnos",component:Oo,canActivate:[ve.a]},{path:"rptpropinas",component:Ro,canActivate:[ve.a]},{path:"rptcaja",component:Ss,canActivate:[ve.a]},{path:"rptfactura",component:_s,canActivate:[ve.a]},{path:"cmdonline",component:cs,canActivate:[ve.a]},{path:"tipoturno",component:ks,canActivate:[ve.a]},{path:"propina",component:js,canActivate:[ve.a]},{path:"autoconsulta",component:qs,canActivate:[ve.a]},{path:"cajacorte",component:ar,canActivate:[ve.a]},{path:"trancocina",component:(()=>{class t{constructor(t,e,a,i,n,o){this.ls=t,this.comandaSrvc=e,this.socket=a,this.dns=i,this.snackBar=n,this.dialog=o,this.lstComandasCocina=[],this.lstComandasCocinaEnProceso=[],this.notificarUsuario=()=>{const t={icon:"assets/img/minilogo.png",body:`Se recibi\xf3 una nueva orden a las ${xa().format(_e.a.dateTimeFormat)}.`,dir:"auto"};this.dns.createNotification("Rest-Touch Pro",1e4,t)},this.loadComandasCocina=()=>this.comandaSrvc.getComandasCocina().subscribe(t=>{this.lstComandasCocina=t.pendientes,this.lstComandasCocinaEnProceso=t.enproceso,this.setTiempo()}),this.setTiempo=()=>{if(this.lstComandasCocinaEnProceso)for(let t=0;t<this.lstComandasCocinaEnProceso.length;t++){const e=this.lstComandasCocinaEnProceso[t],a=6e4,i=60*a,n=24*i;let o=new Date(e.fecha_proceso);this.lstComandasCocinaEnProceso[t].inicio_proceso=o,e.inicio=o;const s=o.getTime();o=new Date;let r=o.getTime()-s;r-=Math.floor(r/n)*n;const c=Math.floor(r/i);r-=c*i;const l=Math.floor(r/a);r-=l*a;const d=Math.floor(r/1e3),u=new Date;if(u.setHours(c),u.setMinutes(l),u.setSeconds(d),this.lstComandasCocinaEnProceso[t].tiempo_transcurrido=u,e.tiempo_preparacion){const a=e.tiempo_preparacion.split(":");e.inicio.setHours(e.inicio.getHours()+ +a[0]),e.inicio.setMinutes(e.inicio.getMinutes()+ +a[1]),this.lstComandasCocinaEnProceso[t].fin_proceso=e.inicio}else this.lstComandasCocinaEnProceso[t].fin_proceso=o}},this.comparaFecha=t=>new Date>t.fin_proceso,this.setCocinado=(t,e=2)=>{this.dialog.open(sr,{maxWidth:"400px",data:new or("Cocina",`\xbfSeguro de marcar como '${1==+e?"vista":"cocinada"}' la comanda #${t.comanda}?`,"S\xed","No",{respuesta:!1,tiempo:""},1==+e)}).afterClosed().subscribe(a=>{a&&a.respuesta&&a.tiempo&&this.comandaSrvc.setComandaCocinada(+t.comanda,{numero:+t.numero,estatus:e,tiempo:a.tiempo}).subscribe(t=>{t.exito?this.snackBar.open(t.mensaje,"Cocina",{duration:3e3}):this.snackBar.open(`ERROR: ${t.mensaje}`,"Cocina",{duration:7e3}),this.loadComandasCocina()})})}}ngOnInit(){this.ls.get(_e.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(_e.a.usrTokenVar).sede_uuid),this.socket.on("refrescar:listaCocina",()=>{this.loadComandasCocina(),this.notificarUsuario()}),setInterval(()=>{this.setTiempo()},1e3)),this.loadComandasCocina()}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(Pe.a),R.Nb(va),R.Nb(Ra.a),R.Nb(Io.a),R.Nb(T.a),R.Nb(P.b))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-tran-cocina"]],decls:13,vars:2,consts:[["fxLayout","row","fxLayout.xs","column","fxFlexFill",""],["fxFlex","50%","fxFlex.xs","100%",1,"bordeRght"],["fxLayout","row wrap","fxLayoutGap","10px grid","fxFlexFill","","fxLayoutAlign","start start",1,"divContenedor"],["fxFlex","100%","fxLayoutAlign","center start"],["fxFlex","33%","fxFlex.xs","100%","fxFlex.sm","100%","fxFlex.md","50%",4,"ngFor","ngForOf"],["fxFlex","50%","fxFlex.xs","100%",1,"bordeLft"],["fxFlex","33%","fxFlex.xs","100%","fxFlex.sm","100%","fxFlex.md","50%"],[1,"mat-elevation-z4"],[4,"ngFor","ngForOf"],["align","end"],["mat-raised-button","","color","accent","type","button",3,"click"],[4,"ngIf"],["align","center"],[3,"ngClass"]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"div",2),R.Tb(3,"div",3),R.Tb(4,"h4"),R.Dc(5,"Pendientes"),R.Sb(),R.Sb(),R.Cc(6,mr,14,7,"div",4),R.Sb(),R.Sb(),R.Tb(7,"div",5),R.Tb(8,"div",2),R.Tb(9,"div",3),R.Tb(10,"h4"),R.Dc(11,"En Proceso"),R.Sb(),R.Sb(),R.Cc(12,Dr,18,14,"div",4),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(6),R.lc("ngForOf",e.lstComandasCocina),R.Cb(6),R.lc("ngForOf",e.lstComandasCocinaEnProceso))},directives:[Xa.c,Xa.e,Xa.a,Xa.d,Xa.b,i.l,p.a,p.d,p.h,p.g,p.c,p.b,_.a,i.m,i.k,Ue.a],pipes:[i.e],styles:[".divContenedor[_ngcontent-%COMP%]{margin-left:5px!important}.bordeRght[_ngcontent-%COMP%]{border-right:1.5px solid #000}.bordeLft[_ngcontent-%COMP%]{border-left:1.5px solid #000}.text-danger[_ngcontent-%COMP%]{color:#dc143c}.item[_ngcontent-%COMP%]{display:block;height:auto;white-space:nowrap;word-wrap:break-word}"]}),t})(),canActivate:[ve.a]},{path:"**",redirectTo:"/admin/dashboard",pathMatch:"full"}];let Er=(()=>{class t{}return t.\u0275mod=R.Lb({type:t}),t.\u0275inj=R.Kb({factory:function(e){return new(e||t)},imports:[[Yt.d.forChild(wr)],Yt.d]}),t})(),xr=(()=>{class t{}return t.\u0275mod=R.Lb({type:t}),t.\u0275inj=R.Kb({factory:function(e){return new(e||t)},providers:[F.j],imports:[[i.c,Er,n.c,o.e,s.a,r.WmsModule,c.PosModule,ae,d.a,u.d,h.b,b.d,m.c,p.f,g.b,f.c,C.l,S.b,v.b,_.b,T.b,D.b,w.d,E.b,x.b,P.e,k.d,W,F.j,Se.c,Wt,Kt,Ce]]}),t})()}}]);