!function(){function t(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function a(t,a){for(var e=0;e<a.length;e++){var n=a[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{JbvS:function(a,n,c){"use strict";c.d(n,"a",function(){return v}),c.d(n,"b",function(){return S}),c.d(n,"c",function(){return C}),c.d(n,"d",function(){return F});var i=c("fXoL"),r=c("bTqV"),o=c("ofXK"),u=c("xgIS"),l=c("cp0P"),s=c("IzEk");function f(t,a){1&t&&i.jc(0,0,["*ngIf","miniFabVisible"])}var d=[[["","mat-mini-fab",""]]],b=["[mat-mini-fab]"],p=[[["eco-fab-speed-dial-trigger"]],[["eco-fab-speed-dial-actions"]]],m=["eco-fab-speed-dial-trigger","eco-fab-speed-dial-actions"],h=[[["","mat-fab",""]]],g=["[mat-fab]"],v=function(){var a=function(){function a(e,n){t(this,a),this.renderer=n,this.miniFabVisible=!1,this._parent=e.get(S)}return e(a,[{key:"ngAfterContentInit",value:function(){var t=this;this._buttons.changes.subscribe(function(){t.initButtonStates(),t._parent.setActionsVisibility()}),this.initButtonStates()}},{key:"initButtonStates",value:function(){var t=this;this._buttons.forEach(function(a,e){t.renderer.addClass(a._getHostElement(),"eco-fab-action-item"),t.changeElementStyle(a._getHostElement(),"z-index",""+(23-e))})}},{key:"show",value:function(){var t=this;this._buttons&&(this.resetAnimationState(),this.miniFabVisible=!0,this.showMiniFabAnimation=setTimeout(function(){t._buttons.forEach(function(a,e){var n,c=0;"scale"===t._parent.animationMode?(c=3+65*e,n="scale(1)"):n=t.getTranslateFunction("0");var i=a._getHostElement();t.changeElementStyle(i,"transition-delay",c+"ms"),t.changeElementStyle(i,"opacity","1"),t.changeElementStyle(i,"transform",n)})},50))}},{key:"resetAnimationState",value:function(){clearTimeout(this.showMiniFabAnimation),this.hideMiniFab&&(this.hideMiniFab.unsubscribe(),this.hideMiniFab=null)}},{key:"hide",value:function(){var t=this;if(this._buttons){this.resetAnimationState();var a=this._buttons.map(function(a,e){var n,c="1",i=0;"scale"===t._parent.animationMode?(i=3-65*e,n="scale(0)",c="0"):n=t.getTranslateFunction(55*(e+1)-5*e+"px");var r=a._getHostElement();return t.changeElementStyle(r,"transition-delay",i+"ms"),t.changeElementStyle(r,"opacity",c),t.changeElementStyle(r,"transform",n),Object(u.a)(r,"transitionend").pipe(Object(s.a)(1))});this.hideMiniFab=Object(l.a)(a).subscribe(function(){return t.miniFabVisible=!1})}}},{key:"getTranslateFunction",value:function(t){var a=this._parent.direction;return("up"===a||"down"===a?"translateY":"translateX")+"("+("down"===a||"right"===a?"-":"")+t+")"}},{key:"changeElementStyle",value:function(t,a,e){this.renderer.setStyle(t,a,e)}}]),a}();return a.\u0275fac=function(t){return new(t||a)(i.Nb(i.t),i.Nb(i.G))},a.\u0275cmp=i.Hb({type:a,selectors:[["eco-fab-speed-dial-actions"]],contentQueries:function(t,a,e){var n;(1&t&&i.Gb(e,r.a,0),2&t)&&(i.sc(n=i.cc())&&(a._buttons=n))},ngContentSelectors:b,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(t,a){1&t&&(i.kc(d),i.Cc(0,f,1,0,"ng-content",0)),2&t&&i.lc("ngIf",a.miniFabVisible)},directives:[o.m],encapsulation:2}),a}(),S=function(){var a=function(){function a(e,n,c){t(this,a),this.elementRef=e,this.renderer=n,this.document=c,this.isInitialized=!1,this._direction="up",this._open=!1,this._animationMode="fling",this._fixed=!1,this._documentClickUnlistener=null,this.openChange=new i.o}return e(a,[{key:"ngAfterContentInit",value:function(){this.isInitialized=!0,this.setActionsVisibility(),this._setElementClass(this.direction,!0),this._setElementClass(this.animationMode,!0)}},{key:"ngOnDestroy",value:function(){this._unsetDocumentClickListener()}},{key:"toggle",value:function(){this.open=!this.open}},{key:"_onClick",value:function(){!this.fixed&&this.open&&(this.open=!1)}},{key:"setActionsVisibility",value:function(){this._childActions&&(this.open?this._childActions.show():this._childActions.hide(),this._processOutsideClickState())}},{key:"_setElementClass",value:function(t,a){var e="eco-".concat(t);a?this.renderer.addClass(this.elementRef.nativeElement,e):this.renderer.removeClass(this.elementRef.nativeElement,e)}},{key:"_processOutsideClickState",value:function(){!this.fixed&&this.open?this._setDocumentClickListener():this._unsetDocumentClickListener()}},{key:"_setDocumentClickListener",value:function(){var t=this;this._documentClickUnlistener||(this._documentClickUnlistener=this.renderer.listen(this.document,"click",function(){t.open=!1}))}},{key:"_unsetDocumentClickListener",value:function(){this._documentClickUnlistener&&(this._documentClickUnlistener(),this._documentClickUnlistener=null)}},{key:"fixed",get:function(){return this._fixed},set:function(t){this._fixed=t,this._processOutsideClickState()}},{key:"open",get:function(){return this._open},set:function(t){var a=this._open;this._open=t,a!==this._open&&(this.openChange.emit(this._open),this.isInitialized&&this.setActionsVisibility())}},{key:"direction",get:function(){return this._direction},set:function(t){var a=this._direction;this._direction=t,a!==this.direction&&(this._setElementClass(a,!1),this._setElementClass(this.direction,!0),this.isInitialized&&this.setActionsVisibility())}},{key:"animationMode",get:function(){return this._animationMode},set:function(t){var a=this,e=this._animationMode;this._animationMode=t,e!==this._animationMode&&(this._setElementClass(e,!1),this._setElementClass(this.animationMode,!0),this.isInitialized&&Promise.resolve(null).then(function(){return a.open=!1}))}}]),a}();return a.\u0275fac=function(t){return new(t||a)(i.Nb(i.l),i.Nb(i.G),i.Nb(o.d))},a.\u0275cmp=i.Hb({type:a,selectors:[["eco-fab-speed-dial"]],contentQueries:function(t,a,e){var n;(1&t&&i.Gb(e,v,1),2&t)&&(i.sc(n=i.cc())&&(a._childActions=n.first))},hostVars:2,hostBindings:function(t,a){1&t&&i.bc("click",function(){return a._onClick()}),2&t&&i.Fb("eco-opened",a.open)},inputs:{fixed:"fixed",open:"open",direction:"direction",animationMode:"animationMode"},outputs:{openChange:"openChange"},ngContentSelectors:m,decls:3,vars:0,consts:[[1,"eco-fab-speed-dial-container"]],template:function(t,a){1&t&&(i.kc(p),i.Tb(0,"div",0),i.jc(1),i.jc(2,1),i.Sb())},styles:["eco-fab-speed-dial{display:inline-block}eco-fab-speed-dial.eco-opened .eco-fab-speed-dial-container eco-fab-speed-dial-trigger.eco-spin .spin180{transform:rotate(180deg)}eco-fab-speed-dial.eco-opened .eco-fab-speed-dial-container eco-fab-speed-dial-trigger.eco-spin .spin360{transform:rotate(1turn)}eco-fab-speed-dial .eco-fab-speed-dial-container{align-items:center;display:flex;position:relative;z-index:20}eco-fab-speed-dial .eco-fab-speed-dial-container eco-fab-speed-dial-trigger{pointer-events:auto;z-index:24}eco-fab-speed-dial .eco-fab-speed-dial-container eco-fab-speed-dial-trigger.eco-spin .spin180,eco-fab-speed-dial .eco-fab-speed-dial-container eco-fab-speed-dial-trigger.eco-spin .spin360{transition:all .6s cubic-bezier(.4,0,.2,1)}eco-fab-speed-dial .eco-fab-speed-dial-container eco-fab-speed-dial-actions{display:flex;height:0;position:absolute;width:0}eco-fab-speed-dial.eco-fling .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{display:block;opacity:1;transition:all .3s cubic-bezier(.55,0,.55,.2)}eco-fab-speed-dial.eco-scale .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{transform:scale(0);transition:all .3s cubic-bezier(.55,0,.55,.2);transition-duration:.14286s}eco-fab-speed-dial.eco-down eco-fab-speed-dial-actions{bottom:2px;left:7px}eco-fab-speed-dial.eco-down .eco-fab-speed-dial-container{flex-direction:column}eco-fab-speed-dial.eco-down .eco-fab-speed-dial-container eco-fab-speed-dial-trigger{order:1}eco-fab-speed-dial.eco-down .eco-fab-speed-dial-container eco-fab-speed-dial-actions{flex-direction:column;order:2}eco-fab-speed-dial.eco-down .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{margin-top:10px}eco-fab-speed-dial.eco-up eco-fab-speed-dial-actions{left:7px;top:2px}eco-fab-speed-dial.eco-up .eco-fab-speed-dial-container{flex-direction:column}eco-fab-speed-dial.eco-up .eco-fab-speed-dial-container eco-fab-speed-dial-trigger{order:2}eco-fab-speed-dial.eco-up .eco-fab-speed-dial-container eco-fab-speed-dial-actions{flex-direction:column-reverse;order:1}eco-fab-speed-dial.eco-up .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{margin-bottom:10px}eco-fab-speed-dial.eco-left eco-fab-speed-dial-actions{left:2px;top:7px}eco-fab-speed-dial.eco-left .eco-fab-speed-dial-container{flex-direction:row}eco-fab-speed-dial.eco-left .eco-fab-speed-dial-container eco-fab-speed-dial-trigger{order:2}eco-fab-speed-dial.eco-left .eco-fab-speed-dial-container eco-fab-speed-dial-actions{flex-direction:row-reverse;order:1}eco-fab-speed-dial.eco-left .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{margin-right:10px}eco-fab-speed-dial.eco-right eco-fab-speed-dial-actions{right:2px;top:7px}eco-fab-speed-dial.eco-right .eco-fab-speed-dial-container{flex-direction:row}eco-fab-speed-dial.eco-right .eco-fab-speed-dial-container eco-fab-speed-dial-trigger{order:1}eco-fab-speed-dial.eco-right .eco-fab-speed-dial-container eco-fab-speed-dial-actions{flex-direction:row;order:2}eco-fab-speed-dial.eco-right .eco-fab-speed-dial-container eco-fab-speed-dial-actions .eco-fab-action-item{margin-left:10px}"],encapsulation:2}),a}(),F=function(){var a=function(){function a(e){t(this,a),this.spin=!1,this._parent=e.get(S)}return e(a,[{key:"_onClick",value:function(t){this._parent.fixed||(this._parent.toggle(),t.stopPropagation())}},{key:"sp",get:function(){return this.spin}}]),a}();return a.\u0275fac=function(t){return new(t||a)(i.Nb(i.t))},a.\u0275cmp=i.Hb({type:a,selectors:[["eco-fab-speed-dial-trigger"]],hostVars:2,hostBindings:function(t,a){1&t&&i.bc("click",function(t){return a._onClick(t)}),2&t&&i.Fb("eco-spin",a.sp)},inputs:{spin:"spin"},ngContentSelectors:g,decls:1,vars:0,template:function(t,a){1&t&&(i.kc(h),i.jc(0))},encapsulation:2}),a}(),C=function(){var a=function a(){t(this,a)};return a.\u0275mod=i.Lb({type:a}),a.\u0275inj=i.Kb({factory:function(t){return new(t||a)},imports:[[o.c]]}),a}()},KFbY:function(a,n,c){"use strict";c.d(n,"a",function(){return d});var i=c("sKxO"),r=c("R5jZ"),o=c("un/a"),u=c("JIr8"),l=c("Qyje"),s=c("fXoL"),f=c("tk/3"),d=function(){var a=function(){function a(e){t(this,a),this.http=e,this.moduleUrl="factura",this.srvcErrHndl=new r.a}return e(a,[{key:"facturar",value:function(t){return this.http.post("".concat(i.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/guardar"),t).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}},{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(i.a.urlFacturacion,"/").concat(this.moduleUrl,"/buscar_factura?").concat(l.stringify(t))).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}},{key:"imprimir",value:function(t){return this.http.get("".concat(i.a.urlFacturacion,"/").concat(this.moduleUrl,"/imprimir/").concat(t)).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(t){return this.http.post("".concat(i.a.urlFacturacion,"/").concat(this.moduleUrl,"/guardar").concat(t.factura?"/"+t.factura:""),t).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}},{key:"refacturar",value:function(t){return this.http.post("".concat(i.a.urlFacturacion,"/").concat(this.moduleUrl,"/refacturar").concat(t.factura?"/"+t.factura:""),t).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}},{key:"firmar",value:function(t){return this.http.post("".concat(i.a.urlFacturacion,"/").concat(this.moduleUrl,"/facturar/").concat(t),{}).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}},{key:"anular",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.http.post("".concat(i.a.urlFacturacion,"/").concat(this.moduleUrl,"/anular/").concat(t),a).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}},{key:"getDetalle",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.http.get("".concat(i.a.urlFacturacion,"/").concat(this.moduleUrl,"/buscar_detalle/").concat(t,"?").concat(l.stringify(a))).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}},{key:"saveDetalle",value:function(t){return this.http.post("".concat(i.a.urlFacturacion,"/").concat(this.moduleUrl,"/guardar_detalle/").concat(t.factura).concat(t.detalle_factura?"/"+t.detalle_factura:""),t).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}},{key:"getGrafo",value:function(t){return this.http.get("".concat(i.a.urlFacturacion,"/").concat(this.moduleUrl,"/get_grafo_factura/").concat(t)).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}}]),a}();return a.\u0275fac=function(t){return new(t||a)(s.Xb(f.b))},a.\u0275prov=s.Jb({token:a,factory:a.\u0275fac,providedIn:"root"}),a}()},KZK3:function(a,n,c){"use strict";c.d(n,"a",function(){return d});var i=c("sKxO"),r=c("R5jZ"),o=c("un/a"),u=c("JIr8"),l=c("Qyje"),s=c("fXoL"),f=c("tk/3"),d=function(){var a=function(){function a(e){t(this,a),this.http=e,this.moduleUrl="catalogo",this.manteUrl="fpago",this.srvcErrHndl=new r.a}return e(a,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(i.a.url,"/").concat(this.moduleUrl,"/get_forma_pago?").concat(l.stringify(t))).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}},{key:"buscar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(i.a.urlMantenimientos,"/").concat(this.manteUrl,"/buscar?").concat(l.stringify(t))).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(t){return this.http.post("".concat(i.a.urlMantenimientos,"/").concat(this.manteUrl,"/guardar").concat(t.forma_pago?"/"+t.forma_pago:""),t).pipe(Object(o.a)(i.a.reintentos),Object(u.a)(this.srvcErrHndl.errorHandler))}}]),a}();return a.\u0275fac=function(t){return new(t||a)(s.Xb(f.b))},a.\u0275prov=s.Jb({token:a,factory:a.\u0275fac,providedIn:"root"}),a}()},qodq:function(a,n,c){"use strict";c.r(n),c.d(n,"PosModule",function(){return na});var i=c("ofXK"),r=c("tk/3"),o=c("3Pt+"),u=c("PCNd"),l=c("jkDv"),s=c("MutI"),f=c("NFeN"),d=c("kmnG"),b=c("qFsG"),p=c("Wp6s"),m=c("f0Cb"),h=c("wZkO"),g=c("+0xr"),v=c("d3UM"),S=c("bSwM"),F=c("bTqV"),C=c("dNgK"),_=c("/t3+"),y=c("STbY"),k=c("zkoq"),T=c("M9IT"),w=c("0IaG"),M=c("XhcP"),D=c("/1cH"),x=c("JbvS"),O=c("tyNb"),I=c("0T/Q"),P=c("fXoL"),E=c("sKxO"),A=c("KZK3"),j=c("FKr1");function z(t,a){if(1&t){var e=P.Ub();P.Tb(0,"mat-list-item",5),P.bc("click",function(){P.wc(e);var t=a.$implicit;return P.fc().getFormaPago(t)}),P.Tb(1,"mat-icon",6),P.Dc(2,"account_balance_wallet"),P.Sb(),P.Tb(3,"h5",7),P.Dc(4),P.Sb(),P.Sb()}if(2&t){var n=a.$implicit;P.Cb(4),P.Ec(n.descripcion)}}var H,N=function(){return{standalone:!0}},U=((H=function(){function a(e){var n=this;t(this,a),this.formaPagoSrvc=e,this.getFormaPagoEv=new P.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadFormasPago=function(){n.formaPagoSrvc.buscar().subscribe(function(t){t&&t.length>0&&(n.lstFormasPago=t,n.applyFilter())})},this.getFormaPago=function(t){n.getFormaPagoEv.emit(t)},this.pageChange=function(t){n.pageSize=t.pageSize,n.pageIndex=t.pageIndex,n.applyFilter()}}return e(a,[{key:"ngOnInit",value:function(){this.loadFormasPago()}},{key:"applyFilter",value:function(){if(this.txtFiltro.length>0){var t=Object(E.b)(this.lstFormasPago,this.txtFiltro);this.length=t.length,this.lstFormasPagoPaged=Object(E.c)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstFormasPago.length,this.lstFormasPagoPaged=Object(E.c)(this.lstFormasPago,this.pageSize,this.pageIndex+1)}}]),a}()).\u0275fac=function(t){return new(t||H)(P.Nb(A.a))},H.\u0275cmp=P.Hb({type:H,selectors:[["app-lista-forma-pago"]],outputs:{getFormaPagoEv:"getFormaPagoEv"},decls:7,vars:7,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,a){1&t&&(P.Tb(0,"mat-card",0),P.Tb(1,"mat-card-content"),P.Tb(2,"mat-form-field",1),P.Tb(3,"input",2),P.bc("keyup",function(){return a.applyFilter()})("ngModelChange",function(t){return a.txtFiltro=t}),P.Sb(),P.Sb(),P.Tb(4,"mat-nav-list"),P.Cc(5,z,5,1,"mat-list-item",3),P.Sb(),P.Tb(6,"mat-paginator",4),P.bc("page",function(t){return a.pageChange(t)}),P.Sb(),P.Sb(),P.Sb()),2&t&&(P.Cb(3),P.lc("ngModel",a.txtFiltro)("ngModelOptions",P.nc(6,N)),P.Cb(2),P.lc("ngForOf",a.lstFormasPagoPaged),P.Cb(1),P.lc("length",a.length)("pageSize",a.pageSize)("pageSizeOptions",a.pageSizeOptions))},directives:[p.a,p.c,d.b,b.b,o.c,o.k,o.n,s.e,i.l,T.a,s.c,f.a,s.b,j.j],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),H),R=c("FY0D");function L(t,a){if(1&t){var e=P.Ub();P.Tb(0,"mat-form-field",9),P.Tb(1,"input",10),P.bc("ngModelChange",function(t){return P.wc(e),P.fc().formaPago.descripcion=t}),P.Sb(),P.Sb()}if(2&t){var n=P.fc();P.Cb(1),P.lc("ngModel",n.formaPago.descripcion)}}function W(t,a){if(1&t){var e=P.Ub();P.Tb(0,"button",11),P.bc("click",function(){return P.wc(e),P.fc().resetFormaPago()}),P.Dc(1," Nueva "),P.Sb()}}var B,V,G=((B=function(){function a(e,n,c){var i=this;t(this,a),this._snackBar=e,this.formaPagoSrvc=n,this.ls=c,this.formaPagoSavedEv=new P.o,this.esMovil=!1,this.resetFormaPago=function(){return i.formaPago={forma_pago:null,descripcion:null,activo:1}},this.onSubmit=function(){i.formaPagoSrvc.save(i.formaPago).subscribe(function(t){t.exito&&(i.formaPagoSavedEv.emit(),i.resetFormaPago(),i._snackBar.open("Forma de pago agregada...","Forma de pago",{duration:3e3}))})}}return e(a,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(E.a.usrTokenVar).enmovil||!1}}]),a}()).\u0275fac=function(t){return new(t||B)(P.Nb(C.a),P.Nb(A.a),P.Nb(R.a))},B.\u0275cmp=P.Hb({type:B,selectors:[["app-form-forma-pago"]],inputs:{formaPago:"formaPago"},outputs:{formaPagoSavedEv:"formaPagoSavedEv"},decls:16,vars:5,consts:[[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmFormaPago","ngForm"],[1,"form-group"],["class","fullWidth",4,"ngIf"],["name","activo",1,"fullWidth",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],[1,"fullWidth"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"ngModel","ngModelChange"],["mat-raised-button","","type","button","color","accent",3,"click"]],template:function(t,a){if(1&t){var e=P.Ub();P.Tb(0,"mat-card",0),P.Tb(1,"mat-card-title"),P.Tb(2,"h4"),P.Dc(3),P.Sb(),P.Sb(),P.Tb(4,"mat-card-content"),P.Tb(5,"form",1,2),P.bc("ngSubmit",function(){return P.wc(e),P.tc(6).form.valid&&a.onSubmit()}),P.Tb(7,"div",3),P.Cc(8,L,2,1,"mat-form-field",4),P.Sb(),P.Tb(9,"div",3),P.Tb(10,"mat-checkbox",5),P.bc("ngModelChange",function(t){return+(a.formaPago.activo=t)}),P.Dc(11,"Activo"),P.Sb(),P.Sb(),P.Tb(12,"div",6),P.Tb(13,"button",7),P.Dc(14," Guardar "),P.Sb(),P.Cc(15,W,2,0,"button",8),P.Sb(),P.Sb(),P.Sb(),P.Sb()}if(2&t){var n=P.tc(6);P.Cb(3),P.Fc(" Forma de pago ",a.formaPago.forma_pago?a.formaPago.descripcion:""," "),P.Cb(5),P.lc("ngIf",a.esMovil),P.Cb(2),P.lc("ngModel",+a.formaPago.activo),P.Cb(3),P.lc("disabled",!n.form.valid),P.Cb(2),P.lc("ngIf",a.formaPago.forma_pago)}},directives:[p.a,p.h,p.c,o.r,o.l,o.m,i.m,S.a,o.k,o.n,F.a,d.b,b.b,o.c,o.p],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}"]}),B),K=["lstFormaPago"],q=((V=function(){function a(){var e=this;t(this,a),this.setFormaPago=function(t){return e.formaPago=t},this.refreshFormaPagoList=function(){return e.lstFormaPagoComponent.loadFormasPago()},this.formaPago={forma_pago:null,descripcion:null,activo:1}}return e(a,[{key:"ngOnInit",value:function(){}}]),a}()).\u0275fac=function(t){return new(t||V)},V.\u0275cmp=P.Hb({type:V,selectors:[["app-forma-pago"]],viewQuery:function(t,a){var e;1&t&&P.Ic(K,1),2&t&&P.sc(e=P.cc())&&(a.lstFormaPagoComponent=e.first)},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getFormaPagoEv"],["lstFormaPago",""],[1,"col","m7","s12"],[3,"formaPago","formaPagoSavedEv"],["frmIngreso",""]],template:function(t,a){1&t&&(P.Tb(0,"div",0),P.Tb(1,"div",1),P.Tb(2,"app-lista-forma-pago",2,3),P.bc("getFormaPagoEv",function(t){return a.setFormaPago(t)}),P.Sb(),P.Sb(),P.Tb(4,"div",4),P.Tb(5,"app-form-forma-pago",5,6),P.bc("formaPagoSavedEv",function(){return a.refreshFormaPagoList()}),P.Sb(),P.Sb(),P.Sb()),2&t&&(P.Cb(5),P.lc("formaPago",a.formaPago))},directives:[U,G],styles:[""]}),V),J=c("wd/R"),Q=c("KFbY"),X=function(){return{standalone:!0}};function $(t,a){if(1&t){var e=P.Ub();P.Tb(0,"mat-form-field",5),P.Tb(1,"input",6),P.bc("keyup",function(){return P.wc(e),P.fc().applyFilter()})("ngModelChange",function(t){return P.wc(e),P.fc().txtFiltro=t}),P.Sb(),P.Sb()}if(2&t){var n=P.fc();P.Cb(1),P.lc("ngModel",n.txtFiltro)("ngModelOptions",P.nc(2,X))}}function Y(t,a){if(1&t){var e=P.Ub();P.Tb(0,"mat-list-item",7),P.bc("click",function(){P.wc(e);var t=a.$implicit;return P.fc().getFactura(t)}),P.Tb(1,"mat-icon",8),P.Dc(2,"receipt"),P.Sb(),P.Tb(3,"h5",9),P.Dc(4),P.Sb(),P.Tb(5,"span",9),P.Dc(6),P.gc(7,"date"),P.Sb(),P.Tb(8,"span",9),P.Dc(9),P.Sb(),P.Tb(10,"span",9),P.Dc(11),P.Sb(),P.Sb()}if(2&t){var n=a.$implicit;P.Cb(4),P.Gc("",n.serie_factura,"\xa0",n.numero_factura,""),P.Cb(2),P.Fc("Fecha: ",P.ic(7,5,n.fecha_factura,"dd/MM/yyyy"),""),P.Cb(3),P.Fc("Cliente: ",n.cliente.nombre,""),P.Cb(2),P.Fc("NIT: ",n.cliente.nit,"")}}var Z,tt,at,et=((Z=function(){function a(e,n){var c=this;t(this,a),this.facturaSrvc=e,this.ls=n,this.esMovil=!1,this.getFacturaEv=new P.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.verTodas=!1,this.loadFacturas=function(){var t={};c.verTodas&&(t._todas=!0),c.facturaSrvc.get(t).subscribe(function(t){t&&(c.lstFacturas=t.length>0?t:[],c.applyFilter())})},this.cargarFacturas=function(t){return c.loadFacturas()},this.getFactura=function(t){c.getFacturaEv.emit(t)},this.pageChange=function(t){c.pageSize=t.pageSize,c.pageIndex=t.pageIndex,c.applyFilter()}}return e(a,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(E.a.usrTokenVar).enmovil||!1,this.loadFacturas()}},{key:"applyFilter",value:function(){if(this.txtFiltro.length>0){var t=Object(E.b)(this.lstFacturas,this.txtFiltro);this.length=t.length,this.lstFacturasPaged=Object(E.c)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstFacturas.length,this.lstFacturasPaged=Object(E.c)(this.lstFacturas,this.pageSize,this.pageIndex+1)}}]),a}()).\u0275fac=function(t){return new(t||Z)(P.Nb(Q.a),P.Nb(R.a))},Z.\u0275cmp=P.Hb({type:Z,selectors:[["app-lista-factura-manual"]],outputs:{getFacturaEv:"getFacturaEv"},decls:8,vars:8,consts:[[1,"mat-elevation-z4","fullWidth"],["class","fullWidth",4,"ngIf"],["name","pedirdocumento",1,"btnAccion",3,"ngModel","ngModelOptions","ngModelChange","change"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,a){1&t&&(P.Tb(0,"mat-card",0),P.Tb(1,"mat-card-content"),P.Cc(2,$,2,3,"mat-form-field",1),P.Tb(3,"mat-checkbox",2),P.bc("ngModelChange",function(t){return a.verTodas=t})("change",function(t){return a.cargarFacturas(t)}),P.Dc(4,"Todas"),P.Sb(),P.Tb(5,"mat-nav-list"),P.Cc(6,Y,12,8,"mat-list-item",3),P.Sb(),P.Tb(7,"mat-paginator",4),P.bc("page",function(t){return a.pageChange(t)}),P.Sb(),P.Sb(),P.Sb()),2&t&&(P.Cb(2),P.lc("ngIf",a.esMovil),P.Cb(1),P.lc("ngModel",a.verTodas)("ngModelOptions",P.nc(7,X)),P.Cb(3),P.lc("ngForOf",a.lstFacturasPaged),P.Cb(1),P.lc("length",a.length)("pageSize",a.pageSize)("pageSizeOptions",a.pageSizeOptions))},directives:[p.a,p.c,i.m,S.a,o.k,o.n,s.e,i.l,T.a,d.b,b.b,o.c,s.c,f.a,s.b,j.j],pipes:[i.e],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),Z),nt=c("IJgu"),ct=c("R5jZ"),it=c("un/a"),rt=c("JIr8"),ot=c("Qyje"),ut=((tt=function(){function a(e){t(this,a),this.http=e,this.srvcErrHndl=new ct.a}return e(a,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(E.a.urlCatalogos,"/get_factura_serie?").concat(ot.stringify(t))).pipe(Object(it.a)(E.a.reintentos),Object(rt.a)(this.srvcErrHndl.errorHandler))}}]),a}()).\u0275fac=function(t){return new(t||tt)(P.Xb(r.b))},tt.\u0275prov=P.Jb({token:tt,factory:tt.\u0275fac,providedIn:"root"}),tt),lt=c("M8s9"),st=((at=function(){function a(e){t(this,a),this.http=e,this.srvcErrHndl=new ct.a}return e(a,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(E.a.urlCatalogos,"/get_moneda?").concat(ot.stringify(t))).pipe(Object(it.a)(E.a.reintentos),Object(rt.a)(this.srvcErrHndl.errorHandler))}}]),a}()).\u0275fac=function(t){return new(t||at)(P.Xb(r.b))},at.\u0275prov=P.Jb({token:at,factory:at.\u0275fac,providedIn:"root"}),at),ft=c("NGYs"),dt=c("X/K6"),bt=c("7JkF");function pt(t,a){1&t&&(P.Tb(0,"h4",6),P.Dc(1,"*** ANULADA ***"),P.Sb())}function mt(t,a){if(1&t){var e=P.Ub();P.Tb(0,"button",7),P.bc("click",function(){return P.wc(e),P.fc().showForm=!0}),P.Tb(1,"mat-icon",8),P.Dc(2,"expand_more"),P.Sb(),P.Sb()}}function ht(t,a){if(1&t){var e=P.Ub();P.Tb(0,"button",7),P.bc("click",function(){return P.wc(e),P.fc().showForm=!1}),P.Tb(1,"mat-icon",8),P.Dc(2,"expand_less"),P.Sb(),P.Sb()}}function gt(t,a){if(1&t&&(P.Tb(0,"mat-option",27),P.Dc(1),P.Sb()),2&t){var e=a.$implicit;P.lc("value",e.factura_serie),P.Cb(1),P.Gc(" ",e.serie," (",e.tipo,") ")}}function vt(t,a){if(1&t&&(P.Tb(0,"mat-option",27),P.Dc(1),P.Sb()),2&t){var e=a.$implicit;P.lc("value",e),P.Cb(1),P.Gc(" ",e.nombre," (",e.nit,") ")}}function St(t,a){if(1&t&&(P.Tb(0,"mat-option",27),P.Dc(1),P.Sb()),2&t){var e=a.$implicit;P.lc("value",e.moneda),P.Cb(1),P.Gc(" ",e.nombre," (",e.simbolo,") ")}}function Ft(t,a){if(1&t){var e=P.Ub();P.Tb(0,"mat-form-field",12),P.Tb(1,"input",28),P.bc("ngModelChange",function(t){return P.wc(e),P.fc(2).factura.notas=t}),P.Sb(),P.Sb()}if(2&t){var n=P.fc(2);P.Cb(1),P.lc("ngModel",n.factura.notas)}}function Ct(t,a){if(1&t){var e=P.Ub();P.Tb(0,"button",29),P.bc("click",function(){return P.wc(e),P.fc(2).refacturar()}),P.Dc(1," Refacturar "),P.Sb()}}function _t(t,a){if(1&t){var e=P.Ub();P.Tb(0,"button",30),P.bc("click",function(){return P.wc(e),P.fc(2).resetFactura()}),P.Dc(1," Nueva "),P.Sb()}}var yt=function(){return{standalone:!0}};function kt(t,a){if(1&t){var e=P.Ub();P.Tb(0,"form",9,10),P.bc("ngSubmit",function(){P.wc(e);var t=P.tc(1),a=P.fc();return t.form.valid&&a.onSubmit()}),P.Tb(2,"div",11),P.Tb(3,"mat-form-field",12),P.Tb(4,"mat-label"),P.Dc(5,"Serie"),P.Sb(),P.Tb(6,"mat-select",13),P.bc("ngModelChange",function(t){return P.wc(e),P.fc().factura.factura_serie=t}),P.Cc(7,gt,2,3,"mat-option",14),P.Sb(),P.Sb(),P.Sb(),P.Tb(8,"div",11),P.Tb(9,"mat-form-field",12),P.Tb(10,"mat-label"),P.Dc(11,"Cliente"),P.Sb(),P.Tb(12,"input",15),P.bc("ngModelChange",function(t){return P.wc(e),P.fc().clienteSelected=t})("keyup",function(){P.wc(e);var t=P.fc();return t.filtrar(t.clienteSelected)}),P.Sb(),P.Tb(13,"mat-autocomplete",16,17),P.Cc(15,vt,2,3,"mat-option",14),P.Sb(),P.Sb(),P.Sb(),P.Tb(16,"div",11),P.Tb(17,"mat-form-field",12),P.Tb(18,"input",18),P.bc("ngModelChange",function(t){return P.wc(e),P.fc().factura.fecha_factura=t}),P.Sb(),P.Sb(),P.Sb(),P.Tb(19,"div",11),P.Tb(20,"mat-form-field",12),P.Tb(21,"mat-label"),P.Dc(22,"Moneda"),P.Sb(),P.Tb(23,"mat-select",19),P.bc("ngModelChange",function(t){return P.wc(e),P.fc().factura.moneda=t}),P.Cc(24,St,2,3,"mat-option",14),P.Sb(),P.Sb(),P.Sb(),P.Tb(25,"div",11),P.Tb(26,"mat-checkbox",20),P.bc("ngModelChange",function(t){return P.wc(e),+(P.fc().factura.exenta=t)}),P.Dc(27,"Exenta"),P.Sb(),P.Sb(),P.Tb(28,"div",11),P.Cc(29,Ft,2,1,"mat-form-field",21),P.Sb(),P.Tb(30,"div",22),P.Tb(31,"button",23),P.Dc(32," Guardar "),P.Sb(),P.Tb(33,"button",24),P.bc("click",function(){return P.wc(e),P.fc().firmarFactura()}),P.Dc(34," Firmar "),P.Sb(),P.Tb(35,"button",24),P.bc("click",function(){return P.wc(e),P.fc().imprimirFactura()}),P.Dc(36," Imprimir "),P.Sb(),P.Tb(37,"button",24),P.bc("click",function(){return P.wc(e),P.fc().representacionGrafica()}),P.Dc(38," PDF "),P.Sb(),P.Tb(39,"button",24),P.bc("click",function(){return P.wc(e),P.fc().anularFactura()}),P.Dc(40," Anular "),P.Sb(),P.Cc(41,Ct,2,0,"button",25),P.Cc(42,_t,2,0,"button",26),P.Sb(),P.Sb()}if(2&t){var n=P.tc(1),c=P.tc(14),i=P.fc();P.Cb(6),P.lc("ngModel",i.factura.factura_serie),P.Cb(1),P.lc("ngForOf",i.facturaSeries),P.Cb(5),P.lc("ngModel",i.clienteSelected)("ngModelOptions",P.nc(19,yt))("matAutocomplete",c),P.Cb(1),P.lc("displayWith",i.displayCliente),P.Cb(2),P.lc("ngForOf",i.filteredClientes),P.Cb(3),P.lc("ngModel",i.factura.fecha_factura),P.Cb(5),P.lc("ngModel",i.factura.moneda),P.Cb(1),P.lc("ngForOf",i.monedas),P.Cb(2),P.lc("ngModel",+i.factura.exenta),P.Cb(3),P.lc("ngIf",i.esMovil),P.Cb(2),P.lc("disabled",!(n.form.valid&&!i.factura.fel_uuid&&!i.factura.fel_uuid_anulacion&&i.factura.cliente)),P.Cb(2),P.lc("disabled",!n.form.valid||!!i.factura.fel_uuid||!!i.factura.fel_uuid_anulacion||0===i.detallesFactura.length||i.refacturacion),P.Cb(2),P.lc("disabled",!n.form.valid||null==i.factura.fel_uuid||null==i.factura.fel_uuid||!!i.factura.fel_uuid_anulacion||0===i.detallesFactura.length||i.refacturacion),P.Cb(2),P.lc("disabled",!n.form.valid||null==i.factura.fel_uuid||null==i.factura.fel_uuid||0===i.detallesFactura.length||i.refacturacion),P.Cb(2),P.lc("disabled",!n.form.valid||null==i.factura.fel_uuid||null==i.factura.fel_uuid||!!i.factura.fel_uuid_anulacion||0===i.detallesFactura.length),P.Cb(2),P.lc("ngIf",!!i.factura.fel_uuid_anulacion),P.Cb(1),P.lc("ngIf",i.factura.factura)}}function Tt(t,a){1&t&&P.Ob(0,"hr")}function wt(t,a){if(1&t){var e=P.Ub();P.Tb(0,"button",7),P.bc("click",function(){return P.wc(e),P.fc(2).showFormDetalle=!0}),P.Tb(1,"mat-icon",8),P.Dc(2,"expand_more"),P.Sb(),P.Sb()}}function Mt(t,a){if(1&t){var e=P.Ub();P.Tb(0,"button",7),P.bc("click",function(){return P.wc(e),P.fc(2).showFormDetalle=!1}),P.Tb(1,"mat-icon",8),P.Dc(2,"expand_less"),P.Sb(),P.Sb()}}function Dt(t,a){if(1&t&&(P.Tb(0,"mat-option",27),P.Dc(1),P.Sb()),2&t){var e=a.$implicit;P.lc("value",e),P.Cb(1),P.Fc(" ",e.descripcion," ")}}function xt(t,a){if(1&t){var e=P.Ub();P.Tb(0,"mat-form-field",12),P.Tb(1,"input",36),P.bc("ngModelChange",function(t){return P.wc(e),P.fc(3).detalleFactura.cantidad=t})("change",function(){P.wc(e);var t=P.fc(3);return t.detalleFactura.total=+t.detalleFactura.precio_unitario*+t.detalleFactura.cantidad}),P.Sb(),P.Sb()}if(2&t){var n=P.fc(3);P.Cb(1),P.lc("ngModel",n.detalleFactura.cantidad)}}function Ot(t,a){if(1&t){var e=P.Ub();P.Tb(0,"mat-form-field",12),P.Tb(1,"input",37),P.bc("ngModelChange",function(t){return P.wc(e),P.fc(3).detalleFactura.precio_unitario=t})("change",function(){P.wc(e);var t=P.fc(3);return t.detalleFactura.total=+t.detalleFactura.precio_unitario*+t.detalleFactura.cantidad}),P.Sb(),P.Sb()}if(2&t){var n=P.fc(3);P.Cb(1),P.lc("ngModel",n.detalleFactura.precio_unitario)}}function It(t,a){if(1&t){var e=P.Ub();P.Tb(0,"button",30),P.bc("click",function(){return P.wc(e),P.fc(3).resetDetalleFactura()}),P.Dc(1," Nuevo "),P.Sb()}}function Pt(t,a){if(1&t){var e=P.Ub();P.Tb(0,"form",9,32),P.bc("ngSubmit",function(){P.wc(e);var t=P.tc(1),a=P.fc(2);return t.form.valid&&a.onSubmitDetail()}),P.Tb(2,"div",11),P.Tb(3,"mat-form-field",12),P.Tb(4,"mat-label"),P.Dc(5,"Art\xedculo"),P.Sb(),P.Tb(6,"input",33),P.bc("ngModelChange",function(t){return P.wc(e),P.fc(2).txtArticuloSelected=t})("keyup",function(){P.wc(e);var t=P.fc(2);return t.filtrarArticulos(t.txtArticuloSelected)}),P.Sb(),P.Tb(7,"mat-autocomplete",34,35),P.bc("optionSelected",function(t){return P.wc(e),P.fc(2).setPrecioUnitario(t)}),P.Cc(9,Dt,2,2,"mat-option",14),P.Sb(),P.Sb(),P.Sb(),P.Tb(10,"div",11),P.Cc(11,xt,2,1,"mat-form-field",21),P.Sb(),P.Tb(12,"div",11),P.Cc(13,Ot,2,1,"mat-form-field",21),P.Sb(),P.Tb(14,"div",22),P.Tb(15,"button",23),P.Dc(16," Guardar "),P.Sb(),P.Cc(17,It,2,0,"button",26),P.Sb(),P.Sb()}if(2&t){var n=P.tc(1),c=P.tc(8),i=P.fc(2);P.Cb(6),P.lc("ngModel",i.txtArticuloSelected)("ngModelOptions",P.nc(9,yt))("matAutocomplete",c),P.Cb(1),P.lc("displayWith",i.displayArticulo),P.Cb(2),P.lc("ngForOf",i.filteredArticulos),P.Cb(2),P.lc("ngIf",i.esMovil),P.Cb(2),P.lc("ngIf",i.esMovil),P.Cb(2),P.lc("disabled",!n.form.valid||!!i.factura.fel_uuid||!!i.factura.fel_uuid_anulacion),P.Cb(2),P.lc("ngIf",i.detalleFactura.detalle_factura)}}function Et(t,a){1&t&&P.Ob(0,"hr")}function At(t,a){1&t&&(P.Tb(0,"th",50),P.Dc(1,"Art\xedculo"),P.Sb())}function jt(t,a){if(1&t&&(P.Tb(0,"td",51),P.Dc(1),P.Sb()),2&t){var e=a.$implicit;P.Cb(1),P.Ec(e.articulo.descripcion)}}function zt(t,a){1&t&&(P.Tb(0,"th",52),P.Dc(1,"Cantidad"),P.Sb())}function Ht(t,a){if(1&t&&(P.Tb(0,"td",53),P.Dc(1),P.gc(2,"number"),P.Sb()),2&t){var e=a.$implicit;P.Cb(1),P.Ec(P.ic(2,1,e.cantidad,"1.2-2"))}}function Nt(t,a){1&t&&(P.Tb(0,"th",52),P.Dc(1,"Precio Unitario"),P.Sb())}function Ut(t,a){if(1&t&&(P.Tb(0,"td",53),P.Dc(1),P.gc(2,"number"),P.Sb()),2&t){var e=a.$implicit;P.Cb(1),P.Fc("",P.ic(2,1,e.precio_unitario,"1.2-2")," ")}}function Rt(t,a){1&t&&(P.Tb(0,"th",52),P.Dc(1,"Total"),P.Sb())}function Lt(t,a){if(1&t&&(P.Tb(0,"td",53),P.Dc(1),P.gc(2,"number"),P.Sb()),2&t){var e=a.$implicit;P.Cb(1),P.Ec(P.ic(2,1,e.total,"1.2-2"))}}function Wt(t,a){1&t&&(P.Tb(0,"th",50),P.Dc(1,"\xa0"),P.Sb())}function Bt(t,a){if(1&t){var e=P.Ub();P.Tb(0,"td",51),P.Tb(1,"button",54),P.bc("click",function(){P.wc(e);var t=a.$implicit;return P.fc(3).getDetalleFactura(t.factura,t.detalle_factura)}),P.Dc(2," Editar "),P.Sb(),P.Sb()}if(2&t){var n=P.fc(3);P.Cb(1),P.lc("disabled",!!n.factura.fel_uuid||!!n.factura.fel_uuid_anulacion||n.refacturacion)}}function Vt(t,a){1&t&&P.Ob(0,"tr",55)}function Gt(t,a){1&t&&P.Ob(0,"tr",56)}function Kt(t,a){if(1&t&&(P.Tb(0,"table",38),P.Rb(1,39),P.Cc(2,At,2,0,"th",40),P.Cc(3,jt,2,1,"td",41),P.Qb(),P.Rb(4,42),P.Cc(5,zt,2,0,"th",43),P.Cc(6,Ht,3,4,"td",44),P.Qb(),P.Rb(7,45),P.Cc(8,Nt,2,0,"th",43),P.Cc(9,Ut,3,4,"td",44),P.Qb(),P.Rb(10,46),P.Cc(11,Rt,2,0,"th",43),P.Cc(12,Lt,3,4,"td",44),P.Qb(),P.Rb(13,47),P.Cc(14,Wt,2,0,"th",40),P.Cc(15,Bt,3,1,"td",41),P.Qb(),P.Cc(16,Vt,1,0,"tr",48),P.Cc(17,Gt,1,0,"tr",49),P.Sb()),2&t){var e=P.fc(2);P.lc("dataSource",e.dataSource),P.Cb(16),P.lc("matHeaderRowDef",e.displayedColumns),P.Cb(1),P.lc("matRowDefColumns",e.displayedColumns)}}function qt(t,a){if(1&t&&(P.Tb(0,"mat-card",0),P.Tb(1,"mat-card-title"),P.Tb(2,"h4"),P.Dc(3),P.Cc(4,wt,3,0,"button",2),P.Cc(5,Mt,3,0,"button",2),P.Sb(),P.Sb(),P.Tb(6,"mat-card-content"),P.Cc(7,Pt,18,10,"form",3),P.Cc(8,Et,1,0,"hr",4),P.Cc(9,Kt,18,3,"table",31),P.Sb(),P.Sb()),2&t){var e=P.fc();P.Cb(3),P.Fc(" Detalle de factura No. ",e.factura.serie_factura?e.factura.serie_factura+" "+e.factura.numero_factura:"Pendiente de firmar."," "),P.Cb(1),P.lc("ngIf",!e.showFormDetalle),P.Cb(1),P.lc("ngIf",e.showFormDetalle),P.Cb(2),P.lc("ngIf",e.showFormDetalle),P.Cb(1),P.lc("ngIf",e.detallesFactura.length>0),P.Cb(1),P.lc("ngIf",e.detallesFactura.length>0)}}var Jt,Qt,Xt,$t,Yt=((Jt=function(){function a(e,n,c,i,r,o,u,l,s,f){var d=this;t(this,a),this.snackBar=e,this.dialog=n,this.facturaSrvc=c,this.facturaSerieSrvc=i,this.clienteSrvc=r,this.monedaSrvc=o,this.articuloSrvc=u,this.anulacionSrvc=l,this.socket=s,this.ls=f,this.facturaSavedEv=new P.o,this.showForm=!0,this.showFormDetalle=!0,this.facturaSeries=[],this.clientes=[],this.filteredClientes=[],this.monedas=[],this.detallesFactura=[],this.articulos=[],this.filteredArticulos=[],this.displayedColumns=["articulo","cantidad","precio_unitario","total","editItem"],this.esMovil=!1,this.refacturacion=!1,this.txtArticuloSelected=void 0,this.clienteSelected=void 0,this.razonAnulacion=[],this.getRazonAnulacion=function(){d.anulacionSrvc.get().subscribe(function(t){d.razonAnulacion=t})},this.filtrar=function(t){if(t&&"string"==typeof t){var a=t.toLowerCase();d.filteredClientes=d.clientes.filter(function(t){return t.nombre.toLowerCase().includes(a)||t.nit.toLowerCase().includes(a)})}else d.filteredClientes=d.clientes},this.loadFacturaSeries=function(){d.facturaSerieSrvc.get().subscribe(function(t){t&&(d.facturaSeries=t)})},this.loadClientes=function(){d.clienteSrvc.get().subscribe(function(t){t&&(d.clientes=t,d.filteredClientes=d.clientes)})},this.loadMonedas=function(){d.monedaSrvc.get().subscribe(function(t){t&&(d.monedas=t)})},this.refacturar=function(){d.factura={factura:d.factura.factura,factura_serie:null,cliente:null,fecha_factura:J().format(E.a.dbDateFormat),moneda:null,exenta:0,notas:null,fel_uuid:null,fel_uuid_anulacion:null},d.refacturacion=!0},this.resetFactura=function(){d.factura={factura:null,factura_serie:null,cliente:null,fecha_factura:J().format(E.a.dbDateFormat),moneda:null,exenta:0,notas:null,fel_uuid:null,fel_uuid_anulacion:null},d.clienteSelected=void 0,d.resetDetalleFactura(),d.detallesFactura=[]},this.displayCliente=function(t){if(t)return d.factura.cliente=t.cliente,t.nombre},this.onSubmit=function(){d.refacturacion?d.facturaSrvc.refacturar(d.factura).subscribe(function(t){t.exito&&(d.facturaSavedEv.emit(),d.resetFactura(),d.refacturacion=!1,d.factura={factura:t.factura.factura,factura_serie:t.factura.factura_serie,cliente:t.factura.cliente,fecha_factura:t.factura.fecha_factura,moneda:t.factura.moneda,exenta:+t.factura.exenta,notas:t.factura.notas,fel_uuid:t.factura.fel_uuid},d.snackBar.open("Factura manual agregada...","Factura",{duration:3e3}))}):d.facturaSrvc.save(d.factura).subscribe(function(t){t.exito&&(d.facturaSavedEv.emit(),d.resetFactura(),d.factura={factura:t.factura.factura,factura_serie:t.factura.factura_serie,cliente:t.factura.cliente,fecha_factura:t.factura.fecha_factura,moneda:t.factura.moneda,exenta:+t.factura.exenta,notas:t.factura.notas,fel_uuid:t.factura.fel_uuid},d.snackBar.open("Factura manual agregada...","Factura",{duration:3e3}))})},this.firmarFactura=function(){d.dialog.open(nt.a,{maxWidth:"400px",data:new nt.b("Firmar factura","Luego de firmar la factura no podr\xe1 hacer ninguna modificaci\xf3n. \xbfDesea continuar?","S\xed","No")}).afterClosed().subscribe(function(t){t&&d.facturaSrvc.firmar(+d.factura.factura).subscribe(function(t){t.exito?(d.factura.numero_factura=t.factura.numero_factura,d.factura.serie_factura=t.factura.serie_factura,d.factura.certificador_fel=t.factura.certificador_fel,d.factura.fel_uuid=t.factura.fel_uuid,d.facturaSavedEv.emit(),d.snackBar.open("Factura firmada con \xe9xito...","Firmar",{duration:3e3})):d.snackBar.open("ERROR: ".concat(t.mensaje),"Firmar",{duration:3e3})})})},this.procesaDetalleFactura=function(t){var a=[];return t.forEach(function(t){return a.push({Cantidad:+t.cantidad,Descripcion:t.articulo.descripcion,Total:+t.total})}),a},this.getTotalDetalle=function(t){var a=0;return t.forEach(function(t){return a+=+t.total}),a},this.getTotalImpuestosAdicionales=function(t){var a=0;return t.forEach(function(t){return a+=+t.total}),a},this.imprimirFactura=function(){d.facturaSrvc.imprimir(+d.factura.factura).subscribe(function(t){t.factura?(console.log(t.factura),d.socket.emit("print:factura","".concat(JSON.stringify({NombreEmpresa:t.factura.empresa.nombre,NitEmpresa:t.factura.empresa.nit,SedeEmpresa:t.factura.sedeFactura.nombre,DireccionEmpresa:t.factura.empresa.direccion,Fecha:J(t.factura.fecha_factura).format(E.a.dateFormat),Nit:t.factura.receptor.nit,Nombre:t.factura.receptor.nombre,Direccion:t.factura.receptor.direccion,Serie:t.factura.serie_factura,Numero:t.factura.numero_factura,Total:d.getTotalDetalle(t.factura.detalle)+d.getTotalImpuestosAdicionales(t.factura.impuestos_adicionales||[]),NoAutorizacion:t.factura.fel_uuid,NombreCertificador:t.factura.certificador_fel.nombre,NitCertificador:t.factura.certificador_fel.nit,FechaDeAutorizacion:t.factura.fecha_autorizacion,NoOrdenEnLinea:"",FormaDePago:"",DetalleFactura:d.procesaDetalleFactura(t.factura.detalle),ImpuestosAdicionales:t.factura.impuestos_adicionales||[]}))),d.snackBar.open("Imprimiendo factura ".concat(d.factura.serie_factura,"-").concat(d.factura.numero_factura),"Impresi\xf3n",{duration:3e3})):d.snackBar.open("ERROR: ".concat(t.mensaje),"Impresi\xf3n",{duration:3e3})})},this.anularFactura=function(){d.dialog.open(nt.a,{maxWidth:"400px",data:new nt.b("Anular factura","Luego de anular la factura no podr\xe1 hacer ninguna modificaci\xf3n. \xbfDesea continuar?","S\xed","No",{input:[{select:!0,label:"Motivo",datos:d.razonAnulacion,valor:null,id:"razon_anulacion",descripcion:"descripcion",requerido:!0},{select:!1,label:"Comentario",valor:null,id:"comentario_anulacion",requerido:!1}]})}).afterClosed().subscribe(function(t){if(t.resultado){for(var a={},e=0;e<t.config.input.length;e++){var n=t.config.input[e];a[n.id]=n.valor}d.facturaSrvc.anular(+d.factura.factura,a).subscribe(function(t){t.exito?(d.factura.fel_uuid_anulacion=t.factura.fel_uuid_anulacion,d.facturaSavedEv.emit(),d.snackBar.open("Factura anulada con \xe9xito...","Firmar",{duration:3e3})):d.snackBar.open("ERROR: ".concat(t.mensaje),"Firmar",{duration:1e4})})}})},this.loadArticulos=function(){d.articuloSrvc.getArticulos().subscribe(function(t){t&&(d.articulos=t,d.filteredArticulos=d.articulos)})},this.displayArticulo=function(t){if(t)return d.detalleFactura.articulo=t.articulo,t.descripcion},this.filtrarArticulos=function(t){if(t&&"string"==typeof t){var a=t.toLowerCase();d.filteredArticulos=d.articulos.filter(function(t){return t.descripcion.toLowerCase().includes(a)})}else d.filteredArticulos=d.articulos},this.setPrecioUnitario=function(t){d.detalleFactura.precio_unitario=+t.option.value.precio,d.detalleFactura.total=+d.detalleFactura.precio_unitario*+d.detalleFactura.cantidad},this.resetDetalleFactura=function(){d.detalleFactura={detalle_factura:null,factura:d.factura.factura||0,articulo:null,cantidad:1,precio_unitario:null,total:null},d.txtArticuloSelected=void 0},this.loadDetalleFactura=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+d.factura.factura;d.facturaSrvc.getDetalle(t,{factura:t}).subscribe(function(t){t&&(d.detallesFactura=t,d.updateTableDataSource())})},this.getDetalleFactura=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+d.factura.factura,a=arguments.length>1?arguments[1]:void 0;d.facturaSrvc.getDetalle(t,{detalle_factura:a}).subscribe(function(t){t&&(d.detalleFactura={detalle_factura:t[0].detalle_factura,factura:t[0].factura,articulo:t[0].articulo.articulo,cantidad:+t[0].cantidad,precio_unitario:+t[0].precio_unitario,total:+t[0].total},d.txtArticuloSelected=t[0].articulo,d.showFormDetalle=!0)})},this.onSubmitDetail=function(){d.detalleFactura.factura=d.factura.factura,d.detalleFactura.total=+d.detalleFactura.precio_unitario*+d.detalleFactura.cantidad,d.facturaSrvc.saveDetalle(d.detalleFactura).subscribe(function(t){t&&(d.loadDetalleFactura(),d.resetDetalleFactura())})},this.updateTableDataSource=function(){return d.dataSource=new g.k(d.detallesFactura)},this.representacionGrafica=function(){d.facturaSrvc.getGrafo(d.factura.factura).subscribe(function(t){if(t.exito)switch(t.tipo){case"link":d.openLinkWindow(t.documento);break;case"pdf":d.openPdfDocument(t.documento)}})},this.openLinkWindow=function(t){return window.open(t,"winFactPdf","height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no")},this.openPdfDocument=function(t){window.open("","winFactPdf","height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no").document.write('<iframe width="100%" style="margin: -8px;border: none;" height="100%" src="data:application/pdf;base64, '+encodeURI(t)+'"></iframe>')}}return e(a,[{key:"ngOnInit",value:function(){var t=this;this.esMovil=this.ls.get(E.a.usrTokenVar).enmovil||!1,this.refacturacion=!1,this.resetFactura(),this.loadFacturaSeries(),this.loadClientes(),this.loadMonedas(),this.loadArticulos(),this.getRazonAnulacion(),this.ls.get(E.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(E.a.usrTokenVar).sede_uuid),this.socket.on("reconnect",function(){return t.socket.emit("joinRestaurant",t.ls.get(E.a.usrTokenVar).sede_uuid)}))}}]),a}()).\u0275fac=function(t){return new(t||Jt)(P.Nb(C.a),P.Nb(w.b),P.Nb(Q.a),P.Nb(ut),P.Nb(lt.a),P.Nb(st),P.Nb(ft.a),P.Nb(dt.a),P.Nb(bt.a),P.Nb(R.a))},Jt.\u0275cmp=P.Hb({type:Jt,selectors:[["app-form-factura-manual"]],inputs:{factura:"factura"},outputs:{facturaSavedEv:"facturaSavedEv"},decls:11,vars:7,consts:[[1,"mat-elevation-z4","fullWidth"],["style","background-color: lightcoral;",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],[2,"background-color","lightcoral"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmFactura","ngForm"],[1,"form-group"],[1,"fullWidth"],["name","factura_serie","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Cliente","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith"],["auto","matAutocomplete"],["matInput","","type","date","placeholder","Fecha","name","fecha_factura","required","",3,"ngModel","ngModelChange"],["name","moneda","required","",3,"ngModel","ngModelChange"],["name","exenta",1,"fullWidth",3,"ngModel","ngModelChange"],["class","fullWidth",4,"ngIf"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],[3,"value"],["matInput","","type","text","placeholder","Notas","name","notas",3,"ngModel","ngModelChange"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"click"],["mat-raised-button","","type","button","color","accent",3,"click"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleFactura","ngForm"],["type","text","placeholder","Art\xedculo","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith","optionSelected"],["autoArticulos","matAutocomplete"],["matInput","","placeholder","Cantidad","name","cantidad","required","",3,"ngModel","ngModelChange","change"],["matInput","","placeholder","Precio unitario","name","precio_unitario","required","",3,"ngModel","ngModelChange","change"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","articulo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","cantidad"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","precio_unitario"],["matColumnDef","total"],["matColumnDef","editItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(t,a){1&t&&(P.Tb(0,"mat-card",0),P.Tb(1,"mat-card-title"),P.Cc(2,pt,2,0,"h4",1),P.Tb(3,"h4"),P.Dc(4),P.Cc(5,mt,3,0,"button",2),P.Cc(6,ht,3,0,"button",2),P.Sb(),P.Sb(),P.Tb(7,"mat-card-content"),P.Cc(8,kt,43,20,"form",3),P.Sb(),P.Sb(),P.Cc(9,Tt,1,0,"hr",4),P.Cc(10,qt,10,6,"mat-card",5)),2&t&&(P.Cb(2),P.lc("ngIf",!!a.factura.fel_uuid_anulacion),P.Cb(2),P.Fc(" Factura ",a.factura.factura?a.factura.serie_factura?a.factura.serie_factura+" "+a.factura.numero_factura:"Pendiente de firmar.":""," "),P.Cb(1),P.lc("ngIf",!a.showForm),P.Cb(1),P.lc("ngIf",a.showForm),P.Cb(2),P.lc("ngIf",a.showForm),P.Cb(1),P.lc("ngIf",a.factura.factura),P.Cb(1),P.lc("ngIf",a.factura.factura))},directives:[p.a,p.h,i.m,p.c,F.a,f.a,o.r,o.l,o.m,d.b,d.e,v.a,o.p,o.k,o.n,i.l,b.b,o.c,D.c,D.a,S.a,j.m,g.j,g.c,g.e,g.b,g.g,g.i,g.d,g.a,g.f,g.h],pipes:[i.f],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}"]}),Jt),Zt=["lstFacturaManual"],ta=["frmFacturaManual"],aa=[{path:"fpago",component:q,canActivate:[I.a]},{path:"factman",component:(Qt=function(){function a(){var e=this;t(this,a),this.setFactura=function(t){e.factura={factura:t.factura,factura_serie:t.factura_serie.factura_serie,cliente:t.cliente.cliente,fecha_factura:t.fecha_factura,moneda:t.moneda.moneda,exenta:t.exenta,notas:t.notas,usuario:t.usuario.usuario,numero_factura:t.numero_factura,serie_factura:t.serie_factura,fel_uuid:t.fel_uuid,fel_uuid_anulacion:t.fel_uuid_anulacion,certificador_fel:t.certificador_fel},e.frmFactura.clienteSelected=t.cliente,e.frmFactura.loadDetalleFactura(+e.factura.factura),e.frmFactura.resetDetalleFactura()},this.refreshFacturaList=function(){return e.lstFacturaComponent.loadFacturas()},this.factura={factura:null,factura_serie:null,cliente:null,fecha_factura:J().format(E.a.dbDateFormat),moneda:null,exenta:0,notas:null}}return e(a,[{key:"ngOnInit",value:function(){}}]),a}(),Qt.\u0275fac=function(t){return new(t||Qt)},Qt.\u0275cmp=P.Hb({type:Qt,selectors:[["app-factura-manual"]],viewQuery:function(t,a){var e;1&t&&(P.Ic(Zt,1),P.Ic(ta,1)),2&t&&(P.sc(e=P.cc())&&(a.lstFacturaComponent=e.first),P.sc(e=P.cc())&&(a.frmFactura=e.first))},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getFacturaEv"],["lstFacturaManual",""],[1,"col","m7","s12"],[3,"factura","facturaSavedEv"],["frmFacturaManual",""]],template:function(t,a){1&t&&(P.Tb(0,"div",0),P.Tb(1,"div",1),P.Tb(2,"app-lista-factura-manual",2,3),P.bc("getFacturaEv",function(t){return a.setFactura(t)}),P.Sb(),P.Sb(),P.Tb(4,"div",4),P.Tb(5,"app-form-factura-manual",5,6),P.bc("facturaSavedEv",function(){return a.refreshFacturaList()}),P.Sb(),P.Sb(),P.Sb()),2&t&&(P.Cb(5),P.lc("factura",a.factura))},directives:[et,Yt],styles:[""]}),Qt),canActivate:[I.a]},{path:"**",redirectTo:"/admin/dashboard",pathMatch:"full"}],ea=(($t=function a(){t(this,a)}).\u0275mod=P.Lb({type:$t}),$t.\u0275inj=P.Kb({factory:function(t){return new(t||$t)},imports:[[O.d.forChild(aa)],O.d]}),$t),na=((Xt=function a(){t(this,a)}).\u0275mod=P.Lb({type:Xt}),Xt.\u0275inj=P.Kb({factory:function(t){return new(t||Xt)},imports:[[i.c,ea,r.c,o.e,u.a,l.AdminModule,s.d,f.b,d.d,b.c,p.f,m.b,h.c,g.l,v.b,S.b,F.b,C.b,_.b,y.d,k.b,T.b,w.e,M.d,D.b,x.c]]}),Xt)}}])}();