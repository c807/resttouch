!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"3e6T":function(e,n,r){"use strict";r.d(n,"a",function(){return s});var a=r("sKxO"),c=r("R5jZ"),i=r("un/a"),l=r("JIr8"),d=r("Qyje"),m=r("fXoL"),b=r("tk/3"),s=function(){var e=function(){function e(o){t(this,e),this.http=o,this.srvcErrHndl=new c.a}return o(e,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(a.a.urlCatalogos,"/get_tipo_movimiento?").concat(d.stringify(t))).pipe(Object(i.a)(a.a.reintentos),Object(l.a)(this.srvcErrHndl.errorHandler))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(m.Xb(b.b))},e.\u0275prov=m.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"Wc/8":function(e,n,r){"use strict";r.r(n),r.d(n,"OrdenCompraModule",function(){return Ut});var a,c=r("ofXK"),i=r("tk/3"),l=r("3Pt+"),d=r("PCNd"),m=r("MutI"),b=r("NFeN"),s=r("kmnG"),p=r("qFsG"),u=r("Wp6s"),f=r("f0Cb"),C=r("wZkO"),h=r("+0xr"),g=r("d3UM"),v=r("bSwM"),O=r("bTqV"),S=r("dNgK"),T=r("/t3+"),_=r("STbY"),D=r("zkoq"),w=r("M9IT"),M=r("0IaG"),y=r("XhcP"),I=r("8yBR"),F=r("tyNb"),k=r("0T/Q"),x=r("sKxO"),E=r("fXoL"),z=r("FY0D"),j=r("R5jZ"),N=r("un/a"),U=r("JIr8"),H=r("Qyje"),P=((a=function(){function e(o){t(this,e),this.http=o,this.ordenCompraUrl="compra",this.srvcErrHndl=new j.a}return o(e,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(x.a.urlWms,"/").concat(this.ordenCompraUrl,"/buscar?").concat(H.stringify(t))).pipe(Object(N.a)(x.a.reintentos),Object(U.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(t){return this.http.post("".concat(x.a.urlWms,"/").concat(this.ordenCompraUrl,"/guardar").concat(+t.orden_compra>0?"/"+t.orden_compra:""),t).pipe(Object(N.a)(x.a.reintentos),Object(U.a)(this.srvcErrHndl.errorHandler))}},{key:"getDetalle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.http.get("".concat(x.a.urlWms,"/").concat(this.ordenCompraUrl,"/buscar_detalle/").concat(t,"?").concat(H.stringify(e))).pipe(Object(N.a)(x.a.reintentos),Object(U.a)(this.srvcErrHndl.errorHandler))}},{key:"saveDetalle",value:function(t){return this.http.post("".concat(x.a.urlWms,"/").concat(this.ordenCompraUrl,"/guardar_detalle/").concat(t.orden_compra).concat(+t.orden_compra_detalle>0?"/"+t.orden_compra_detalle:""),t).pipe(Object(N.a)(x.a.reintentos),Object(U.a)(this.srvcErrHndl.errorHandler))}}]),e}()).\u0275fac=function(t){return new(t||a)(E.Xb(i.b))},a.\u0275prov=E.Jb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),R=r("FKr1");function W(t,e){if(1&t){var o=E.Ub();E.Tb(0,"mat-list-item",5),E.bc("click",function(){E.wc(o);var t=e.$implicit;return E.fc().getOrdenCompra(t)}),E.Tb(1,"mat-icon",6),E.Dc(2,"description"),E.Sb(),E.Tb(3,"h5",7),E.Dc(4),E.Sb(),E.Ob(5,"br"),E.Tb(6,"p",7),E.Dc(7),E.gc(8,"date"),E.Sb(),E.Sb()}if(2&t){var n=e.$implicit;E.Cb(4),E.Fc("No. ",n.orden_compra,""),E.Cb(3),E.Fc(" Fecha: ",E.ic(8,2,n.fecha,"dd/MM/yyyy")," ")}}var $,A=function(){return{standalone:!0}},Q=(($=function(){function e(o){var n=this;t(this,e),this.ordenCompraSrvc=o,this.getOrdenCompraEv=new E.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadOrdenesCompra=function(){n.ordenCompraSrvc.get().subscribe(function(t){t&&t.length>0&&(n.lstOrdenesCompra=t,n.applyFilter())})},this.getOrdenCompra=function(t){n.getOrdenCompraEv.emit({orden_compra:t.orden_compra,proveedor:t.proveedor||0,fecha:t.fecha,usuario:t.usuario||0,notas:t.notas,estatus_movimiento:t.estatus_movimiento||1})},this.pageChange=function(t){n.pageSize=t.pageSize,n.pageIndex=t.pageIndex,n.applyFilter()}}return o(e,[{key:"ngOnInit",value:function(){this.loadOrdenesCompra()}},{key:"applyFilter",value:function(){if(this.txtFiltro.length>0){var t=Object(x.b)(this.lstOrdenesCompra,this.txtFiltro);this.length=t.length,this.lstOrdenesCompraPaged=Object(x.c)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstOrdenesCompra.length,this.lstOrdenesCompraPaged=Object(x.c)(this.lstOrdenesCompra,this.pageSize,this.pageIndex+1)}}]),e}()).\u0275fac=function(t){return new(t||$)(E.Nb(P))},$.\u0275cmp=E.Hb({type:$,selectors:[["app-lista-orden-compra"]],outputs:{getOrdenCompraEv:"getOrdenCompraEv"},decls:7,vars:7,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,e){1&t&&(E.Tb(0,"mat-card",0),E.Tb(1,"mat-card-content"),E.Tb(2,"mat-form-field",1),E.Tb(3,"input",2),E.bc("keyup",function(){return e.applyFilter()})("ngModelChange",function(t){return e.txtFiltro=t}),E.Sb(),E.Sb(),E.Tb(4,"mat-nav-list"),E.Cc(5,W,9,5,"mat-list-item",3),E.Sb(),E.Tb(6,"mat-paginator",4),E.bc("page",function(t){return e.pageChange(t)}),E.Sb(),E.Sb(),E.Sb()),2&t&&(E.Cb(3),E.lc("ngModel",e.txtFiltro)("ngModelOptions",E.nc(6,A)),E.Cb(2),E.lc("ngForOf",e.lstOrdenesCompraPaged),E.Cb(1),E.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[u.a,u.c,s.b,p.b,l.c,l.k,l.n,m.e,c.l,w.a,m.c,b.a,m.b,R.h],pipes:[c.e],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),$),G=r("50cD"),q=r("NGYs"),B=r("3e6T"),K=r("u5dX");function L(t,e){if(1&t){var o=E.Ub();E.Tb(0,"button",5),E.bc("click",function(){return E.wc(o),E.fc().showOrdenCompraForm=!0}),E.Tb(1,"mat-icon",6),E.Dc(2,"expand_more"),E.Sb(),E.Sb()}}function X(t,e){if(1&t){var o=E.Ub();E.Tb(0,"button",5),E.bc("click",function(){return E.wc(o),E.fc().showOrdenCompraForm=!1}),E.Tb(1,"mat-icon",6),E.Dc(2,"expand_less"),E.Sb(),E.Sb()}}function J(t,e){if(1&t&&(E.Tb(0,"mat-option",19),E.Dc(1),E.Sb()),2&t){var o=e.$implicit;E.lc("value",o.proveedor),E.Cb(1),E.Gc(" (",o.nit,") ",o.razon_social," ")}}function V(t,e){if(1&t){var o=E.Ub();E.Tb(0,"mat-form-field",9),E.Tb(1,"input",20),E.bc("ngModelChange",function(t){return E.wc(o),E.fc(2).ordenCompra.notas=t}),E.Sb(),E.Sb()}if(2&t){var n=E.fc(2);E.Cb(1),E.lc("ngModel",n.ordenCompra.notas)}}function Y(t,e){if(1&t&&(E.Tb(0,"mat-option",19),E.Dc(1),E.Sb()),2&t){var o=e.$implicit;E.lc("value",o.tipo_movimiento),E.Cb(1),E.Fc(" ",o.descripcion," ")}}function Z(t,e){if(1&t&&(E.Tb(0,"mat-option",19),E.Dc(1),E.Sb()),2&t){var o=e.$implicit;E.lc("value",o.bodega),E.Cb(1),E.Fc(" ",o.descripcion," ")}}var tt=function(){return[2,3]};function et(t,e){if(1&t){var o=E.Ub();E.Tb(0,"button",21),E.bc("click",function(){return E.wc(o),E.fc(2).generarIngreso()}),E.Dc(1," Generar ingreso "),E.Sb()}if(2&t){E.fc();var n=E.tc(1),r=E.fc();E.lc("disabled",!n.form.valid||E.nc(1,tt).indexOf(+r.ordenCompra.estatus_movimiento)>=0||!r.ordenCompra.bodega||!r.ordenCompra.tipo_movimiento)}}function ot(t,e){if(1&t){var o=E.Ub();E.Tb(0,"button",22),E.bc("click",function(){return E.wc(o),E.fc(2).resetOrdenCompra()}),E.Dc(1," Nueva "),E.Sb()}}function nt(t,e){if(1&t){var o=E.Ub();E.Tb(0,"form",7,8),E.bc("ngSubmit",function(){E.wc(o);var t=E.tc(1),e=E.fc();return t.form.valid&&e.onSubmit()}),E.Tb(2,"mat-form-field",9),E.Tb(3,"mat-label"),E.Dc(4,"Proveedor"),E.Sb(),E.Tb(5,"mat-select",10),E.bc("ngModelChange",function(t){return E.wc(o),E.fc().ordenCompra.proveedor=t}),E.Cc(6,J,2,3,"mat-option",11),E.Sb(),E.Sb(),E.Cc(7,V,2,1,"mat-form-field",12),E.Tb(8,"mat-form-field",9),E.Tb(9,"mat-label"),E.Dc(10,"Tipo de movimiento"),E.Sb(),E.Tb(11,"mat-select",13),E.bc("ngModelChange",function(t){return E.wc(o),E.fc().ordenCompra.tipo_movimiento=t}),E.Cc(12,Y,2,2,"mat-option",11),E.Sb(),E.Sb(),E.Tb(13,"mat-form-field",9),E.Tb(14,"mat-label"),E.Dc(15,"Bodega"),E.Sb(),E.Tb(16,"mat-select",14),E.bc("ngModelChange",function(t){return E.wc(o),E.fc().ordenCompra.bodega=t}),E.Cc(17,Z,2,2,"mat-option",11),E.Sb(),E.Sb(),E.Tb(18,"div",15),E.Tb(19,"button",16),E.Dc(20," Guardar "),E.Sb(),E.Cc(21,et,2,2,"button",17),E.Cc(22,ot,2,0,"button",18),E.Sb(),E.Sb()}if(2&t){var n=E.tc(1),r=E.fc();E.Cb(5),E.lc("ngModel",r.ordenCompra.proveedor),E.Cb(1),E.lc("ngForOf",r.proveedores),E.Cb(1),E.lc("ngIf",r.esMovil),E.Cb(4),E.lc("ngModel",r.ordenCompra.tipo_movimiento),E.Cb(1),E.lc("ngForOf",r.tiposMovimiento),E.Cb(4),E.lc("ngModel",r.ordenCompra.bodega),E.Cb(1),E.lc("ngForOf",r.bodegas),E.Cb(2),E.lc("disabled",!n.form.valid||E.nc(10,tt).indexOf(+r.ordenCompra.estatus_movimiento)>=0),E.Cb(2),E.lc("ngIf",r.ordenCompra.orden_compra&&r.detallesOrdenCompra.length>0),E.Cb(1),E.lc("ngIf",r.ordenCompra.orden_compra)}}function rt(t,e){1&t&&E.Ob(0,"hr")}function at(t,e){if(1&t){var o=E.Ub();E.Tb(0,"button",5),E.bc("click",function(){return E.wc(o),E.fc(2).showDetalleOrdenCompraForm=!0}),E.Tb(1,"mat-icon",6),E.Dc(2,"expand_more"),E.Sb(),E.Sb()}}function ct(t,e){if(1&t){var o=E.Ub();E.Tb(0,"button",5),E.bc("click",function(){return E.wc(o),E.fc(2).showDetalleOrdenCompraForm=!1}),E.Tb(1,"mat-icon",6),E.Dc(2,"expand_less"),E.Sb(),E.Sb()}}function it(t,e){if(1&t&&(E.Tb(0,"mat-option",19),E.Dc(1),E.Sb()),2&t){var o=e.$implicit;E.lc("value",o.articulo),E.Cb(1),E.Fc(" ",o.descripcion," ")}}function lt(t,e){if(1&t){var o=E.Ub();E.Tb(0,"mat-form-field",9),E.Tb(1,"input",26),E.bc("ngModelChange",function(t){return E.wc(o),E.fc(3).detalleOrdenCompra.cantidad=t})("change",function(){E.wc(o);var t=E.fc(3);return t.detalleOrdenCompra.total=+t.detalleOrdenCompra.monto*+t.detalleOrdenCompra.cantidad}),E.Sb(),E.Sb()}if(2&t){var n=E.fc(3);E.Cb(1),E.lc("ngModel",n.detalleOrdenCompra.cantidad)}}function dt(t,e){if(1&t){var o=E.Ub();E.Tb(0,"mat-form-field",9),E.Tb(1,"input",27),E.bc("ngModelChange",function(t){return E.wc(o),E.fc(3).detalleOrdenCompra.monto=t})("change",function(){E.wc(o);var t=E.fc(3);return t.detalleOrdenCompra.total=+t.detalleOrdenCompra.monto*+t.detalleOrdenCompra.cantidad}),E.Sb(),E.Sb()}if(2&t){var n=E.fc(3);E.Cb(1),E.lc("ngModel",n.detalleOrdenCompra.monto)}}function mt(t,e){if(1&t){var o=E.Ub();E.Tb(0,"button",22),E.bc("click",function(){return E.wc(o),E.fc(3).resetDetalleOrdenCompra()}),E.Dc(1," Nuevo "),E.Sb()}}function bt(t,e){if(1&t){var o=E.Ub();E.Tb(0,"form",7,24),E.bc("ngSubmit",function(){E.wc(o);var t=E.tc(1),e=E.fc(2);return t.form.valid&&e.onSubmitDetail()}),E.Tb(2,"mat-form-field",9),E.Tb(3,"mat-label"),E.Dc(4,"Art\xedculo"),E.Sb(),E.Tb(5,"mat-select",25),E.bc("ngModelChange",function(t){return E.wc(o),E.fc(2).detalleOrdenCompra.articulo=t}),E.Cc(6,it,2,2,"mat-option",11),E.Sb(),E.Sb(),E.Cc(7,lt,2,1,"mat-form-field",12),E.Cc(8,dt,2,1,"mat-form-field",12),E.Tb(9,"div",15),E.Tb(10,"button",16),E.Dc(11," Guardar "),E.Sb(),E.Cc(12,mt,2,0,"button",18),E.Sb(),E.Sb()}if(2&t){var n=E.tc(1),r=E.fc(2);E.Cb(5),E.lc("ngModel",r.detalleOrdenCompra.articulo),E.Cb(1),E.lc("ngForOf",r.articulos),E.Cb(1),E.lc("ngIf",r.esMovil),E.Cb(1),E.lc("ngIf",r.esMovil),E.Cb(2),E.lc("disabled",!n.form.valid||E.nc(6,tt).indexOf(+r.ordenCompra.estatus_movimiento)>=0),E.Cb(2),E.lc("ngIf",r.detalleOrdenCompra.orden_compra_detalle)}}function st(t,e){1&t&&E.Ob(0,"hr")}function pt(t,e){1&t&&(E.Tb(0,"th",40),E.Dc(1,"Art\xedculo"),E.Sb())}function ut(t,e){if(1&t&&(E.Tb(0,"td",41),E.Dc(1),E.Sb()),2&t){var o=e.$implicit;E.Cb(1),E.Ec(o.articulo.descripcion)}}function ft(t,e){1&t&&(E.Tb(0,"th",42),E.Dc(1,"Cantidad"),E.Sb())}function Ct(t,e){if(1&t&&(E.Tb(0,"td",43),E.Dc(1),E.gc(2,"number"),E.Sb()),2&t){var o=e.$implicit;E.Cb(1),E.Ec(E.ic(2,1,o.cantidad,"1.2-2"))}}function ht(t,e){1&t&&(E.Tb(0,"th",42),E.Dc(1,"Monto"),E.Sb())}function gt(t,e){if(1&t&&(E.Tb(0,"td",43),E.Dc(1),E.gc(2,"number"),E.Sb()),2&t){var o=e.$implicit;E.Cb(1),E.Ec(E.ic(2,1,o.monto,"1.2-2"))}}function vt(t,e){1&t&&(E.Tb(0,"th",42),E.Dc(1,"Total"),E.Sb())}function Ot(t,e){if(1&t&&(E.Tb(0,"td",43),E.Dc(1),E.gc(2,"number"),E.Sb()),2&t){var o=e.$implicit;E.Cb(1),E.Ec(E.ic(2,1,o.total,"1.2-2"))}}function St(t,e){1&t&&(E.Tb(0,"th",40),E.Dc(1,"\xa0"),E.Sb())}function Tt(t,e){if(1&t){var o=E.Ub();E.Tb(0,"td",41),E.Tb(1,"button",44),E.bc("click",function(){E.wc(o);var t=e.$implicit;return E.fc(3).getDetalleOrdenCompra(t.orden_compra,t.orden_compra_detalle)}),E.Dc(2," Editar "),E.Sb(),E.Sb()}if(2&t){var n=E.fc(3);E.Cb(1),E.lc("disabled",E.nc(1,tt).indexOf(+n.ordenCompra.estatus_movimiento)>=0)}}function _t(t,e){1&t&&E.Ob(0,"tr",45)}function Dt(t,e){1&t&&E.Ob(0,"tr",46)}function wt(t,e){if(1&t&&(E.Tb(0,"table",28),E.Rb(1,29),E.Cc(2,pt,2,0,"th",30),E.Cc(3,ut,2,1,"td",31),E.Qb(),E.Rb(4,32),E.Cc(5,ft,2,0,"th",33),E.Cc(6,Ct,3,4,"td",34),E.Qb(),E.Rb(7,35),E.Cc(8,ht,2,0,"th",33),E.Cc(9,gt,3,4,"td",34),E.Qb(),E.Rb(10,36),E.Cc(11,vt,2,0,"th",33),E.Cc(12,Ot,3,4,"td",34),E.Qb(),E.Rb(13,37),E.Cc(14,St,2,0,"th",30),E.Cc(15,Tt,3,2,"td",31),E.Qb(),E.Cc(16,_t,1,0,"tr",38),E.Cc(17,Dt,1,0,"tr",39),E.Sb()),2&t){var o=E.fc(2);E.lc("dataSource",o.dataSource),E.Cb(16),E.lc("matHeaderRowDef",o.displayedColumns),E.Cb(1),E.lc("matRowDefColumns",o.displayedColumns)}}function Mt(t,e){if(1&t&&(E.Tb(0,"mat-card",0),E.Tb(1,"mat-card-title"),E.Tb(2,"h4"),E.Dc(3),E.Cc(4,at,3,0,"button",1),E.Cc(5,ct,3,0,"button",1),E.Sb(),E.Sb(),E.Tb(6,"mat-card-content"),E.Cc(7,bt,13,7,"form",2),E.Cc(8,st,1,0,"hr",3),E.Cc(9,wt,18,3,"table",23),E.Sb(),E.Sb()),2&t){var o=E.fc();E.Cb(3),E.Fc(" Detalle de orden de compra No. ",o.ordenCompra.orden_compra," "),E.Cb(1),E.lc("ngIf",!o.showDetalleOrdenCompraForm),E.Cb(1),E.lc("ngIf",o.showDetalleOrdenCompraForm),E.Cb(2),E.lc("ngIf",o.showDetalleOrdenCompraForm),E.Cb(1),E.lc("ngIf",o.detallesOrdenCompra.length>0),E.Cb(1),E.lc("ngIf",o.detallesOrdenCompra.length>0)}}var yt,It,Ft,kt,xt=((yt=function(){function e(o,n,r,a,c,i,l){var d=this;t(this,e),this._snackBar=o,this.ls=n,this.ordenCompraSrvc=r,this.proveedorSrvc=a,this.articuloSrvc=c,this.tipoMovimientoSrvc=i,this.bodegaSrvc=l,this.ordenCompraSavedEv=new E.o,this.showOrdenCompraForm=!0,this.showDetalleOrdenCompraForm=!0,this.detallesOrdenCompra=[],this.displayedColumns=["articulo","cantidad","monto","total","editItem"],this.proveedores=[],this.articulos=[],this.tiposMovimiento=[],this.bodegas=[],this.esMovil=!1,this.loadProveedores=function(){d.proveedorSrvc.get().subscribe(function(t){t&&(d.proveedores=t)})},this.loadTiposMovimiento=function(){d.tipoMovimientoSrvc.get().subscribe(function(t){t&&(d.tiposMovimiento=t)})},this.loadBodegas=function(){d.bodegaSrvc.get().subscribe(function(t){t&&(d.bodegas=t)})},this.resetOrdenCompra=function(){d.ordenCompra={orden_compra:null,proveedor:null,usuario:d.ls.get(x.a.usrTokenVar).idusr||0,notas:null,estatus_movimiento:1,bodega:null,tipo_movimiento:null},d.resetDetalleOrdenCompra()},this.onSubmit=function(){d.ordenCompraSrvc.save(d.ordenCompra).subscribe(function(t){t.exito&&(d.ordenCompraSavedEv.emit(),d.resetOrdenCompra(),d.ordenCompra={orden_compra:+t.compra.orden_compra,proveedor:t.compra.proveedor,fecha:t.compra.fecha,usuario:t.compra.usuario,notas:t.compra.notas,estatus_movimiento:1},d.loadDetalleOrdenCompra(d.ordenCompra.orden_compra))})},this.loadArticulos=function(){d.articuloSrvc.getArticulos().subscribe(function(t){t&&(d.articulos=t)})},this.resetDetalleOrdenCompra=function(){return d.detalleOrdenCompra={orden_compra_detalle:null,orden_compra:d.ordenCompra.orden_compra?d.ordenCompra.orden_compra:null,articulo:null,cantidad:null,monto:null,total:null}},this.loadDetalleOrdenCompra=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+d.ordenCompra.orden_compra;d.ordenCompraSrvc.getDetalle(t,{orden_compra:t}).subscribe(function(t){t&&(d.detallesOrdenCompra=t,d.updateTableDataSource())})},this.getDetalleOrdenCompra=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+d.ordenCompra.orden_compra,e=arguments.length>1?arguments[1]:void 0;d.ordenCompraSrvc.getDetalle(t,{orden_compra_detalle:e}).subscribe(function(t){t&&(d.detalleOrdenCompra={orden_compra_detalle:t[0].orden_compra_detalle,orden_compra:t[0].orden_compra,articulo:t[0].articulo.articulo,cantidad:+t[0].cantidad,monto:+t[0].monto,total:+t[0].total},d.showDetalleOrdenCompraForm=!0)})},this.onSubmitDetail=function(){d.detalleOrdenCompra.orden_compra=d.ordenCompra.orden_compra,d.ordenCompraSrvc.saveDetalle(d.detalleOrdenCompra).subscribe(function(t){t&&(d.loadDetalleOrdenCompra(),d.resetDetalleOrdenCompra())})},this.updateTableDataSource=function(){return d.dataSource=new h.k(d.detallesOrdenCompra)},this.generarIngreso=function(){d.ordenCompra.estatus_movimiento=2,d.onSubmit()}}return o(e,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(x.a.usrTokenVar).enmovil||!1,this.resetOrdenCompra(),this.loadProveedores(),this.loadArticulos(),this.loadBodegas(),this.loadTiposMovimiento()}}]),e}()).\u0275fac=function(t){return new(t||yt)(E.Nb(S.a),E.Nb(z.a),E.Nb(P),E.Nb(G.a),E.Nb(q.a),E.Nb(B.a),E.Nb(K.a))},yt.\u0275cmp=E.Hb({type:yt,selectors:[["app-form-orden-compra"]],inputs:{ordenCompra:"ordenCompra"},outputs:{ordenCompraSavedEv:"ordenCompraSavedEv"},decls:10,vars:6,consts:[[1,"mat-elevation-z4","fullWidth"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmOrdenCompra","ngForm"],[1,"fullWidth"],["name","proveedor","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","fullWidth",4,"ngIf"],["name","tipo_movimiento",3,"ngModel","ngModelChange"],["name","bodega",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"disabled","click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],[3,"value"],["matInput","","placeholder","Notas","name","notas",3,"ngModel","ngModelChange"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button","color","accent",3,"click"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleOrdenCompra","ngForm"],["name","articulo","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Cantidad","name","cantidad","required","",3,"ngModel","ngModelChange","change"],["matInput","","placeholder","Monto","name","monto","required","",3,"ngModel","ngModelChange","change"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","articulo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","cantidad"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","monto"],["matColumnDef","total"],["matColumnDef","editItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(E.Tb(0,"mat-card",0),E.Tb(1,"mat-card-title"),E.Tb(2,"h4"),E.Dc(3),E.Cc(4,L,3,0,"button",1),E.Cc(5,X,3,0,"button",1),E.Sb(),E.Sb(),E.Tb(6,"mat-card-content"),E.Cc(7,nt,23,11,"form",2),E.Sb(),E.Sb(),E.Cc(8,rt,1,0,"hr",3),E.Cc(9,Mt,10,6,"mat-card",4)),2&t&&(E.Cb(3),E.Fc(" Orden de compra",e.ordenCompra.orden_compra?" No. "+e.ordenCompra.orden_compra:""," "),E.Cb(1),E.lc("ngIf",!e.showOrdenCompraForm),E.Cb(1),E.lc("ngIf",e.showOrdenCompraForm),E.Cb(2),E.lc("ngIf",e.showOrdenCompraForm),E.Cb(1),E.lc("ngIf",e.ordenCompra.orden_compra),E.Cb(1),E.lc("ngIf",e.ordenCompra.orden_compra))},directives:[u.a,u.h,c.m,u.c,O.a,b.a,l.r,l.l,l.m,s.b,s.e,g.a,l.p,l.k,l.n,c.l,R.k,p.b,l.c,h.j,h.c,h.e,h.b,h.g,h.i,h.d,h.a,h.f,h.h],pipes:[c.f],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}"]}),yt),Et=["lstOrdenCompra"],zt=["frmOrdenCompra"],jt=[{path:"ordcomp",component:(It=function(){function e(o){var n=this;t(this,e),this.ls=o,this.setOrdenCompra=function(t){n.ordenCompra=t,n.frmOrdenCompra.loadDetalleOrdenCompra(+n.ordenCompra.orden_compra)},this.refreshOrdenCompraList=function(){n.lstOrdenCompraComponent.loadOrdenesCompra()},this.ordenCompra={orden_compra:null,proveedor:null,usuario:this.ls.get(x.a.usrTokenVar).idusr||0,notas:null,estatus_movimiento:1,bodega:null,tipo_movimiento:null}}return o(e,[{key:"ngOnInit",value:function(){}}]),e}(),It.\u0275fac=function(t){return new(t||It)(E.Nb(z.a))},It.\u0275cmp=E.Hb({type:It,selectors:[["app-orden-compra"]],viewQuery:function(t,e){var o;1&t&&(E.Ic(Et,1),E.Ic(zt,1)),2&t&&(E.sc(o=E.cc())&&(e.lstOrdenCompraComponent=o.first),E.sc(o=E.cc())&&(e.frmOrdenCompra=o.first))},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getOrdenCompraEv"],["lstOrdenCompra",""],[1,"col","m7","s12"],[3,"ordenCompra","ordenCompraSavedEv"],["frmOrdenCompra",""]],template:function(t,e){1&t&&(E.Tb(0,"div",0),E.Tb(1,"div",1),E.Tb(2,"app-lista-orden-compra",2,3),E.bc("getOrdenCompraEv",function(t){return e.setOrdenCompra(t)}),E.Sb(),E.Sb(),E.Tb(4,"div",4),E.Tb(5,"app-form-orden-compra",5,6),E.bc("ordenCompraSavedEv",function(){return e.refreshOrdenCompraList()}),E.Sb(),E.Sb(),E.Sb()),2&t&&(E.Cb(5),E.lc("ordenCompra",e.ordenCompra))},directives:[Q,xt],styles:[""]}),It),canActivate:[k.a]},{path:"**",redirectTo:"/admin/dashboard",pathMatch:"full"}],Nt=((kt=function e(){t(this,e)}).\u0275mod=E.Lb({type:kt}),kt.\u0275inj=E.Kb({factory:function(t){return new(t||kt)},imports:[[F.d.forChild(jt)],F.d]}),kt),Ut=((Ft=function e(){t(this,e)}).\u0275mod=E.Lb({type:Ft}),Ft.\u0275inj=E.Kb({factory:function(t){return new(t||Ft)},imports:[[c.c,Nt,d.a,i.c,l.e,m.d,b.b,s.d,p.c,u.f,f.b,C.c,h.l,g.b,v.b,O.b,S.b,T.b,_.d,D.b,w.b,M.e,y.d,I.c]]}),Ft)}}])}();