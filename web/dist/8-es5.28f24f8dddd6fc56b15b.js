!function(){function t(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=s(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){c=!0,i=t},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw i}}}}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,a=i(t);if(e){var r=i(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return o(this,n)}}function o(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,o=!1,i=void 0;try{for(var r,c=t[Symbol.iterator]();!(a=(r=c.next()).done)&&(n.push(r.value),!e||n.length!==e);a=!0);}catch(s){o=!0,i=s}finally{try{a||null==c.return||c.return()}finally{if(o)throw i}}return n}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function b(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{k2MF:function(n,o,i){"use strict";i.r(o),i.d(o,"RestauranteModule",function(){return xl});var s,l,d=i("ofXK"),m=i("tk/3"),f=i("3Pt+"),p=i("PCNd"),h=i("vtFA"),g=i("qodq"),v=i("jkDv"),S=i("YUcS"),C=i("uM5D"),T=i("MutI"),_=i("NFeN"),y=i("kmnG"),k=i("qFsG"),x=i("Wp6s"),D=i("f0Cb"),P=i("wZkO"),E=i("+0xr"),F=i("d3UM"),M=i("bSwM"),w=i("bTqV"),O=i("dNgK"),I=i("/t3+"),R=i("STbY"),A=i("zkoq"),U=i("M9IT"),N=i("0IaG"),j=i("XhcP"),B=i("u47x"),H=i("rDax"),L=i("+rOU"),q=i("fXoL"),z=i("vxfF"),$=i("FKr1"),G=i("XNiG"),W=i("quSY"),V=i("VRyK"),K=i("LRne"),Q=i("FtGj"),X=i("IzEk"),J=i("JX91"),Y=i("pLZG"),Z=i("8LU1"),tt=i("R0Ic"),et=i("cH1L"),nt=((s=function(){function t(){u(this,t),this.changes=new G.a,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 20 years",this.nextMultiYearLabel="Next 20 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}return b(t,[{key:"formatYearRange",value:function(t,e){return"".concat(t," \u2013 ").concat(e)}}]),t}()).\u0275fac=function(t){return new(t||s)},s.\u0275prov=Object(q.Jb)({factory:function(){return new s},token:s,providedIn:"root"}),s),at={provide:new q.s("mat-datepicker-scroll-strategy"),deps:[H.c],useFactory:function(t){return function(){return t.scrollStrategies.reposition()}}},ot=((l=function t(){u(this,t)}).\u0275mod=q.Lb({type:l}),l.\u0275inj=q.Kb({factory:function(t){return new(t||l)},providers:[nt,at],imports:[[d.c,w.b,N.e,H.f,B.a,L.g,$.i],z.b]}),l),it=i("nLfN"),rt=i("HDdC"),ct=i("D0XW"),st=i("Y7HM");function lt(t){var e=t.subscriber,n=t.counter,a=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:a},a)}var ut=i("eNwd"),dt=i("1G5W"),bt=i("lJxs"),mt=i("vkgz"),ft=i("eIep");function pt(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function ht(t,e){var n=e?"":"none";pt(t.style,{touchAction:e?"":"none",webkitUserDrag:e?"":"none",webkitTapHighlightColor:e?"":"transparent",userSelect:n,msUserSelect:n,webkitUserSelect:n,MozUserSelect:n})}function gt(t,e){var n=t.style;n.position=e?"":"fixed",n.top=n.opacity=e?"":"0",n.left=e?"":"-999em"}function vt(t){var e=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*e}function St(t,e){return t.getPropertyValue(e).split(",").map(function(t){return t.trim()})}function Ct(t){var e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}function Tt(t,e,n){var a=t.top,o=t.bottom,i=t.left,r=t.right;return n>=a&&n<=o&&e>=i&&e<=r}function _t(t,e,n){t.top+=e,t.bottom=t.top+t.height,t.left+=n,t.right=t.left+t.width}function yt(t,e,n,a){var o=t.top,i=t.right,r=t.bottom,c=t.left,s=t.width*e,l=t.height*e;return a>o-l&&a<r+l&&n>c-s&&n<i+s}var kt=function(){function t(e,n){u(this,t),this._document=e,this._viewportRuler=n,this.positions=new Map}return b(t,[{key:"clear",value:function(){this.positions.clear()}},{key:"cache",value:function(t){var e=this;this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),t.forEach(function(t){e.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:Ct(t)})})}},{key:"handleScroll",value:function(t){var e=t.target,n=this.positions.get(e);if(!n)return null;var a,o,i=e===this._document?e.documentElement:e,r=n.scrollPosition;if(e===this._document){var c=this._viewportRuler.getViewportScrollPosition();a=c.top,o=c.left}else a=e.scrollTop,o=e.scrollLeft;var s=r.top-a,l=r.left-o;return this.positions.forEach(function(t,n){t.clientRect&&e!==n&&i.contains(n)&&_t(t.clientRect,s,l)}),r.top=a,r.left=o,{top:s,left:l}}}]),t}();function xt(t){var e=t.cloneNode(!0),n=e.querySelectorAll("[id]"),a=t.nodeName.toLowerCase();e.removeAttribute("id");for(var o=0;o<n.length;o++)n[o].removeAttribute("id");return"canvas"===a?Ft(t,e):"input"!==a&&"select"!==a&&"textarea"!==a||Et(t,e),Dt("canvas",t,e,Ft),Dt("input, textarea, select",t,e,Et),e}function Dt(t,e,n,a){var o=e.querySelectorAll(t);if(o.length)for(var i=n.querySelectorAll(t),r=0;r<o.length;r++)a(o[r],i[r])}var Pt=0;function Et(t,e){"file"!==e.type&&(e.value=t.value),"radio"===e.type&&e.name&&(e.name="mat-clone-".concat(e.name,"-").concat(Pt++))}function Ft(t,e){var n=e.getContext("2d");if(n)try{n.drawImage(t,0,0)}catch(a){}}var Mt=Object(it.f)({passive:!0}),wt=Object(it.f)({passive:!1}),Ot=function(){function t(e,n,a,o,i,r){var c=this;u(this,t),this._config=n,this._document=a,this._ngZone=o,this._viewportRuler=i,this._dragDropRegistry=r,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new G.a,this._pointerMoveSubscription=W.a.EMPTY,this._pointerUpSubscription=W.a.EMPTY,this._scrollSubscription=W.a.EMPTY,this._resizeSubscription=W.a.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new G.a,this.started=new G.a,this.released=new G.a,this.ended=new G.a,this.entered=new G.a,this.exited=new G.a,this.dropped=new G.a,this.moved=this._moveEvents,this._pointerDown=function(t){if(c.beforeStarted.next(),c._handles.length){var e=c._handles.find(function(e){var n=t.target;return!!n&&(n===e||e.contains(n))});!e||c._disabledHandles.has(e)||c.disabled||c._initializeDragSequence(e,t)}else c.disabled||c._initializeDragSequence(c._rootElement,t)},this._pointerMove=function(t){var e=c._getPointerPositionOnPage(t);if(c._hasStartedDragging){c._boundaryElement&&(c._previewRect&&(c._previewRect.width||c._previewRect.height)||(c._previewRect=(c._preview||c._rootElement).getBoundingClientRect())),t.preventDefault();var n=c._getConstrainedPointerPosition(e);if(c._hasMoved=!0,c._lastKnownPointerPosition=e,c._updatePointerDirectionDelta(n),c._dropContainer)c._updateActiveDropContainer(n,e);else{var a=c._activeTransform;a.x=n.x-c._pickupPositionOnPage.x+c._passiveTransform.x,a.y=n.y-c._pickupPositionOnPage.y+c._passiveTransform.y,c._applyRootElementTransform(a.x,a.y),"undefined"!=typeof SVGElement&&c._rootElement instanceof SVGElement&&c._rootElement.setAttribute("transform","translate(".concat(a.x," ").concat(a.y,")"))}c._moveEvents.observers.length&&c._ngZone.run(function(){c._moveEvents.next({source:c,pointerPosition:n,event:t,distance:c._getDragDistance(n),delta:c._pointerDirectionDelta})})}else if(Math.abs(e.x-c._pickupPositionOnPage.x)+Math.abs(e.y-c._pickupPositionOnPage.y)>=c._config.dragStartThreshold){var o=Date.now()>=c._dragStartTime+c._getDragStartDelay(t),i=c._dropContainer;if(!o)return void c._endDragSequence(t);i&&(i.isDragging()||i.isReceiving())||(c._hasStartedDragging=!0,c._ngZone.run(function(){return c._startDragSequence(t)}))}},this._pointerUp=function(t){c._endDragSequence(t)},this.withRootElement(e).withParent(n.parentDragRef||null),this._parentPositions=new kt(a,i),r.registerDragItem(this)}return b(t,[{key:"getPlaceholderElement",value:function(){return this._placeholder}},{key:"getRootElement",value:function(){return this._rootElement}},{key:"getVisibleElement",value:function(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}},{key:"withHandles",value:function(t){var e=this;this._handles=t.map(function(t){return Object(Z.e)(t)}),this._handles.forEach(function(t){return ht(t,e.disabled)}),this._toggleNativeDragInteractions();var n=new Set;return this._disabledHandles.forEach(function(t){e._handles.indexOf(t)>-1&&n.add(t)}),this._disabledHandles=n,this}},{key:"withPreviewTemplate",value:function(t){return this._previewTemplate=t,this}},{key:"withPlaceholderTemplate",value:function(t){return this._placeholderTemplate=t,this}},{key:"withRootElement",value:function(t){var e=this,n=Object(Z.e)(t);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(function(){n.addEventListener("mousedown",e._pointerDown,wt),n.addEventListener("touchstart",e._pointerDown,Mt)}),this._initialTransform=void 0,this._rootElement=n),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}},{key:"withBoundaryElement",value:function(t){var e=this;return this._boundaryElement=t?Object(Z.e)(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(function(){return e._containInsideBoundaryOnResize()})),this}},{key:"withParent",value:function(t){return this._parentDragRef=t,this}},{key:"dispose",value:function(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&At(this._rootElement),At(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}},{key:"isDragging",value:function(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}},{key:"reset",value:function(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}},{key:"disableHandle",value:function(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),ht(t,!0))}},{key:"enableHandle",value:function(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),ht(t,this.disabled))}},{key:"withDirection",value:function(t){return this._direction=t,this}},{key:"_withDropContainer",value:function(t){this._dropContainer=t}},{key:"getFreeDragPosition",value:function(){var t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}},{key:"setFreeDragPosition",value:function(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}},{key:"_sortFromLastPointerPosition",value:function(){var t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}},{key:"_removeSubscriptions",value:function(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}},{key:"_destroyPreview",value:function(){this._preview&&At(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}},{key:"_destroyPlaceholder",value:function(){this._placeholder&&At(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}},{key:"_endDragSequence",value:function(t){var e=this;this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging&&(this.released.next({source:this}),this._dropContainer?(this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(function(){e._cleanupDragArtifacts(t),e._cleanupCachedDimensions(),e._dragDropRegistry.stopDragging(e)})):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(function(){e.ended.next({source:e,distance:e._getDragDistance(e._getPointerPositionOnPage(t))})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this))))}},{key:"_startDragSequence",value:function(t){Ut(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();var e=this._dropContainer;if(e){var n=this._rootElement,a=n.parentNode,o=this._preview=this._createPreviewElement(),i=this._placeholder=this._createPlaceholderElement(),r=this._anchor=this._anchor||this._document.createComment(""),c=this._getShadowRoot();a.insertBefore(r,n),gt(n,!1),this._document.body.appendChild(a.replaceChild(i,n)),function(t,e){return e||t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement||t.body}(this._document,c).appendChild(o),this.started.next({source:this}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}},{key:"_initializeDragSequence",value:function(t,e){var n=this;this._parentDragRef&&e.stopPropagation();var a=this.isDragging(),o=Ut(e),i=!o&&0!==e.button,r=this._rootElement,c=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(e.target&&e.target.draggable&&"mousedown"===e.type&&e.preventDefault(),!(a||i||c)){this._handles.length&&(this._rootElementTapHighlight=r.style.webkitTapHighlightColor||"",r.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scroll.subscribe(function(t){n._updateOnScroll(t)}),this._boundaryElement&&(this._boundaryRect=Ct(this._boundaryElement));var s=this._previewTemplate;this._pickupPositionInElement=s&&s.template&&!s.matchSize?{x:0,y:0}:this._getPointerPositionInElement(t,e);var l=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:l.x,y:l.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}}},{key:"_cleanupDragArtifacts",value:function(t){var e=this;gt(this._rootElement,!0),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(function(){var n=e._dropContainer,a=n.getItemIndex(e),o=e._getPointerPositionOnPage(t),i=e._getDragDistance(e._getPointerPositionOnPage(t)),r=n._isOverContainer(o.x,o.y);e.ended.next({source:e,distance:i}),e.dropped.next({item:e,currentIndex:a,previousIndex:e._initialIndex,container:n,previousContainer:e._initialContainer,isPointerOverContainer:r,distance:i}),n.drop(e,a,e._initialIndex,e._initialContainer,r,i),e._dropContainer=e._initialContainer})}},{key:"_updateActiveDropContainer",value:function(t,e){var n=this,a=t.x,o=t.y,i=e.x,r=e.y,c=this._initialContainer._getSiblingContainerFromPosition(this,a,o);!c&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(a,o)&&(c=this._initialContainer),c&&c!==this._dropContainer&&this._ngZone.run(function(){n.exited.next({item:n,container:n._dropContainer}),n._dropContainer.exit(n),n._dropContainer=c,n._dropContainer.enter(n,a,o,c===n._initialContainer&&c.sortingDisabled?n._initialIndex:void 0),n.entered.next({item:n,container:c,currentIndex:c.getItemIndex(n)})}),this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,a,o,this._pointerDirectionDelta),this._preview.style.transform=It(a-this._pickupPositionInElement.x,o-this._pickupPositionInElement.y)}},{key:"_createPreviewElement",value:function(){var t,e=this._previewTemplate,n=this.previewClass,a=e?e.template:null;if(a&&e){var o=e.matchSize?this._rootElement.getBoundingClientRect():null,i=e.viewContainer.createEmbeddedView(a,e.context);i.detectChanges(),t=Nt(i,this._document),this._previewRef=i,e.matchSize?jt(t,o):t.style.transform=It(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{var r=this._rootElement;jt(t=xt(r),r.getBoundingClientRect())}return pt(t.style,{pointerEvents:"none",margin:"0",position:"fixed",top:"0",left:"0",zIndex:"".concat(this._config.zIndex||1e3)}),ht(t,!1),t.classList.add("cdk-drag-preview"),t.setAttribute("dir",this._direction),n&&(Array.isArray(n)?n.forEach(function(e){return t.classList.add(e)}):t.classList.add(n)),t}},{key:"_animatePreviewToPlaceholder",value:function(){var t=this;if(!this._hasMoved)return Promise.resolve();var e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=It(e.left,e.top);var n=function(t){var e=getComputedStyle(t),n=St(e,"transition-property"),a=n.find(function(t){return"transform"===t||"all"===t});if(!a)return 0;var o=n.indexOf(a),i=St(e,"transition-duration"),r=St(e,"transition-delay");return vt(i[o])+vt(r[o])}(this._preview);return 0===n?Promise.resolve():this._ngZone.runOutsideAngular(function(){return new Promise(function(e){var a=function n(a){(!a||a.target===t._preview&&"transform"===a.propertyName)&&(t._preview.removeEventListener("transitionend",n),e(),clearTimeout(o))},o=setTimeout(a,1.5*n);t._preview.addEventListener("transitionend",a)})})}},{key:"_createPlaceholderElement",value:function(){var t,e=this._placeholderTemplate,n=e?e.template:null;return n?(this._placeholderRef=e.viewContainer.createEmbeddedView(n,e.context),this._placeholderRef.detectChanges(),t=Nt(this._placeholderRef,this._document)):t=xt(this._rootElement),t.classList.add("cdk-drag-placeholder"),t}},{key:"_getPointerPositionInElement",value:function(t,e){var n=this._rootElement.getBoundingClientRect(),a=t===this._rootElement?null:t,o=a?a.getBoundingClientRect():n,i=Ut(e)?e.targetTouches[0]:e,r=this._getViewportScrollPosition();return{x:o.left-n.left+(i.pageX-o.left-r.left),y:o.top-n.top+(i.pageY-o.top-r.top)}}},{key:"_getPointerPositionOnPage",value:function(t){var e=this._getViewportScrollPosition(),n=Ut(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,a=n.pageX-e.left,o=n.pageY-e.top;if(this._ownerSVGElement){var i=this._ownerSVGElement.getScreenCTM();if(i){var r=this._ownerSVGElement.createSVGPoint();return r.x=a,r.y=o,r.matrixTransform(i.inverse())}}return{x:a,y:o}}},{key:"_getConstrainedPointerPosition",value:function(t){var e=this._dropContainer?this._dropContainer.lockAxis:null,n=this.constrainPosition?this.constrainPosition(t,this):t,a=n.x,o=n.y;if("x"===this.lockAxis||"x"===e?o=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==e||(a=this._pickupPositionOnPage.x),this._boundaryRect){var i=this._pickupPositionInElement,r=i.x,c=i.y,s=this._boundaryRect,l=this._previewRect,u=s.top+c,d=s.bottom-(l.height-c);a=Rt(a,s.left+r,s.right-(l.width-r)),o=Rt(o,u,d)}return{x:a,y:o}}},{key:"_updatePointerDirectionDelta",value:function(t){var e=t.x,n=t.y,a=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,i=Math.abs(e-o.x),r=Math.abs(n-o.y);return i>this._config.pointerDirectionChangeThreshold&&(a.x=e>o.x?1:-1,o.x=e),r>this._config.pointerDirectionChangeThreshold&&(a.y=n>o.y?1:-1,o.y=n),a}},{key:"_toggleNativeDragInteractions",value:function(){if(this._rootElement&&this._handles){var t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,ht(this._rootElement,t))}}},{key:"_removeRootElementListeners",value:function(t){t.removeEventListener("mousedown",this._pointerDown,wt),t.removeEventListener("touchstart",this._pointerDown,Mt)}},{key:"_applyRootElementTransform",value:function(t,e){var n=It(t,e);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?n+" "+this._initialTransform:n}},{key:"_getDragDistance",value:function(t){var e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}},{key:"_cleanupCachedDimensions",value:function(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}},{key:"_containInsideBoundaryOnResize",value:function(){var t=this._passiveTransform,e=t.x,n=t.y;if(!(0===e&&0===n||this.isDragging())&&this._boundaryElement){var a=this._boundaryElement.getBoundingClientRect(),o=this._rootElement.getBoundingClientRect();if(!(0===a.width&&0===a.height||0===o.width&&0===o.height)){var i=a.left-o.left,r=o.right-a.right,c=a.top-o.top,s=o.bottom-a.bottom;a.width>o.width?(i>0&&(e+=i),r>0&&(e-=r)):e=0,a.height>o.height?(c>0&&(n+=c),s>0&&(n-=s)):n=0,e===this._passiveTransform.x&&n===this._passiveTransform.y||this.setFreeDragPosition({y:n,x:e})}}}},{key:"_getDragStartDelay",value:function(t){var e=this.dragStartDelay;return"number"==typeof e?e:Ut(t)?e.touch:e?e.mouse:0}},{key:"_updateOnScroll",value:function(t){var e=this._parentPositions.handleScroll(t);if(e){var n=t.target;this._boundaryRect&&(n===this._document||n!==this._boundaryElement&&n.contains(this._boundaryElement))&&_t(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}},{key:"_getViewportScrollPosition",value:function(){var t=this._parentPositions.positions.get(this._document);return t?t.scrollPosition:this._viewportRuler.getViewportScrollPosition()}},{key:"_getShadowRoot",value:function(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=Object(it.c)(this._rootElement)),this._cachedShadowRoot}},{key:"disabled",get:function(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)},set:function(t){var e=Object(Z.c)(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(function(t){return ht(t,e)}))}}]),t}();function It(t,e){return"translate3d(".concat(Math.round(t),"px, ").concat(Math.round(e),"px, 0)")}function Rt(t,e,n){return Math.max(e,Math.min(n,t))}function At(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Ut(t){return"t"===t.type[0]}function Nt(t,e){var n=t.rootNodes;if(1===n.length&&n[0].nodeType===e.ELEMENT_NODE)return n[0];var a=e.createElement("div");return n.forEach(function(t){return a.appendChild(t)}),a}function jt(t,e){t.style.width="".concat(e.width,"px"),t.style.height="".concat(e.height,"px"),t.style.transform=It(e.left,e.top)}function Bt(t,e){return Math.max(0,Math.min(e,t))}var Ht=function(){function t(e,n,a,o,i){var r=this;u(this,t),this._dragDropRegistry=n,this._ngZone=o,this._viewportRuler=i,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=function(){return!0},this.sortPredicate=function(){return!0},this.beforeStarted=new G.a,this.entered=new G.a,this.exited=new G.a,this.dropped=new G.a,this.sorted=new G.a,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=W.a.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new G.a,this._cachedShadowRoot=null,this._startScrollInterval=function(){r._stopScrolling(),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct.a;return(!Object(st.a)(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=ct.a),new rt.a(function(n){return n.add(e.schedule(lt,t,{subscriber:n,counter:0,period:t})),n})}(0,ut.a).pipe(Object(dt.a)(r._stopScrollTimers)).subscribe(function(){var t=r._scrollNode,e=r.autoScrollStep;1===r._verticalScrollDirection?qt(t,-e):2===r._verticalScrollDirection&&qt(t,e),1===r._horizontalScrollDirection?zt(t,-e):2===r._horizontalScrollDirection&&zt(t,e)})},this.element=Object(Z.e)(e),this._document=a,this.withScrollableParents([this.element]),n.registerDropContainer(this),this._parentPositions=new kt(a,i)}return b(t,[{key:"dispose",value:function(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}},{key:"isDragging",value:function(){return this._isDragging}},{key:"start",value:function(){this._draggingStarted(),this._notifyReceivingSiblings()}},{key:"enter",value:function(t,e,n,a){var o;this._draggingStarted(),null==a?-1===(o=this.sortingDisabled?this._draggables.indexOf(t):-1)&&(o=this._getItemIndexFromPointerPosition(t,e,n)):o=a;var i=this._activeDraggables,r=i.indexOf(t),c=t.getPlaceholderElement(),s=i[o];if(s===t&&(s=i[o+1]),r>-1&&i.splice(r,1),s&&!this._dragDropRegistry.isDragging(s)){var l=s.getRootElement();l.parentElement.insertBefore(c,l),i.splice(o,0,t)}else if(this._shouldEnterAsFirstChild(e,n)){var u=i[0].getRootElement();u.parentNode.insertBefore(c,u),i.unshift(t)}else Object(Z.e)(this.element).appendChild(c),i.push(t);c.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}},{key:"exit",value:function(t){this._reset(),this.exited.next({item:t,container:this})}},{key:"drop",value:function(t,e,n,a,o,i){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:n,container:this,previousContainer:a,isPointerOverContainer:o,distance:i})}},{key:"withItems",value:function(t){var e=this,n=this._draggables;return this._draggables=t,t.forEach(function(t){return t._withDropContainer(e)}),this.isDragging()&&(n.filter(function(t){return t.isDragging()}).every(function(e){return-1===t.indexOf(e)})?this._reset():this._cacheItems()),this}},{key:"withDirection",value:function(t){return this._direction=t,this}},{key:"connectedTo",value:function(t){return this._siblings=t.slice(),this}},{key:"withOrientation",value:function(t){return this._orientation=t,this}},{key:"withScrollableParents",value:function(t){var e=Object(Z.e)(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e].concat(c(t)):t.slice(),this}},{key:"getScrollableParents",value:function(){return this._scrollableElements}},{key:"getItemIndex",value:function(t){return this._isDragging?Lt("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,function(e){return e.drag===t}):this._draggables.indexOf(t)}},{key:"isReceiving",value:function(){return this._activeSiblings.size>0}},{key:"_sortItem",value:function(t,e,n,a){if(!this.sortingDisabled&&this._clientRect&&yt(this._clientRect,.05,e,n)){var o=this._itemPositions,i=this._getItemIndexFromPointerPosition(t,e,n,a);if(!(-1===i&&o.length>0)){var r="horizontal"===this._orientation,c=Lt(o,function(e){return e.drag===t}),s=o[i],l=s.clientRect,u=c>i?1:-1,d=this._getItemOffsetPx(o[c].clientRect,l,u),b=this._getSiblingOffsetPx(c,o,u),m=o.slice();!function(t,e,n){var a=Bt(e,t.length-1),o=Bt(n,t.length-1);if(a!==o){for(var i=t[a],r=o<a?-1:1,c=a;c!==o;c+=r)t[c]=t[c+r];t[o]=i}}(o,c,i),this.sorted.next({previousIndex:c,currentIndex:i,container:this,item:t}),o.forEach(function(e,n){if(m[n]!==e){var a=e.drag===t,o=a?d:b,i=a?t.getPlaceholderElement():e.drag.getRootElement();e.offset+=o,r?(i.style.transform="translate3d(".concat(Math.round(e.offset),"px, 0, 0)"),_t(e.clientRect,0,o)):(i.style.transform="translate3d(0, ".concat(Math.round(e.offset),"px, 0)"),_t(e.clientRect,o,0))}}),this._previousSwap.overlaps=Tt(l,e,n),this._previousSwap.drag=s.drag,this._previousSwap.delta=r?a.x:a.y}}}},{key:"_startScrollingIfNecessary",value:function(t,e){var n=this;if(!this.autoScrollDisabled){var a,o=0,i=0;if(this._parentPositions.positions.forEach(function(c,s){var l;s!==n._document&&c.clientRect&&!a&&yt(c.clientRect,.05,t,e)&&(l=r(function(t,e,n,a){var o=$t(e,a),i=Gt(e,n),r=0,c=0;if(o){var s=t.scrollTop;1===o?s>0&&(r=1):t.scrollHeight-s>t.clientHeight&&(r=2)}if(i){var l=t.scrollLeft;1===i?l>0&&(c=1):t.scrollWidth-l>t.clientWidth&&(c=2)}return[r,c]}(s,c.clientRect,t,e),2),o=l[0],i=l[1],(o||i)&&(a=s))}),!o&&!i){var c=this._viewportRuler.getViewportSize(),s=c.width,l=c.height,u={width:s,height:l,top:0,right:s,bottom:l,left:0};o=$t(u,e),i=Gt(u,t),a=window}!a||o===this._verticalScrollDirection&&i===this._horizontalScrollDirection&&a===this._scrollNode||(this._verticalScrollDirection=o,this._horizontalScrollDirection=i,this._scrollNode=a,(o||i)&&a?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}}},{key:"_stopScrolling",value:function(){this._stopScrollTimers.next()}},{key:"_draggingStarted",value:function(){var t=Object(Z.e)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}},{key:"_cacheParentPositions",value:function(){var t=Object(Z.e)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}},{key:"_cacheItemPositions",value:function(){var t="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(function(t){var e=t.getVisibleElement();return{drag:t,offset:0,clientRect:Ct(e)}}).sort(function(e,n){return t?e.clientRect.left-n.clientRect.left:e.clientRect.top-n.clientRect.top})}},{key:"_reset",value:function(){var t=this;this._isDragging=!1;var e=Object(Z.e)(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(function(t){var e=t.getRootElement();e&&(e.style.transform="")}),this._siblings.forEach(function(e){return e._stopReceiving(t)}),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}},{key:"_getSiblingOffsetPx",value:function(t,e,n){var a="horizontal"===this._orientation,o=e[t].clientRect,i=e[t+-1*n],r=o[a?"width":"height"]*n;if(i){var c=a?"left":"top",s=a?"right":"bottom";-1===n?r-=i.clientRect[c]-o[s]:r+=o[c]-i.clientRect[s]}return r}},{key:"_getItemOffsetPx",value:function(t,e,n){var a="horizontal"===this._orientation,o=a?e.left-t.left:e.top-t.top;return-1===n&&(o+=a?e.width-t.width:e.height-t.height),o}},{key:"_shouldEnterAsFirstChild",value:function(t,e){if(!this._activeDraggables.length)return!1;var n=this._itemPositions,a="horizontal"===this._orientation;if(n[0].drag!==this._activeDraggables[0]){var o=n[n.length-1].clientRect;return a?t>=o.right:e>=o.bottom}var i=n[0].clientRect;return a?t<=i.left:e<=i.top}},{key:"_getItemIndexFromPointerPosition",value:function(t,e,n,a){var o=this,i="horizontal"===this._orientation,r=Lt(this._itemPositions,function(r,c,s){var l=r.drag,u=r.clientRect;if(l===t)return s.length<2;if(a){var d=i?a.x:a.y;if(l===o._previousSwap.drag&&o._previousSwap.overlaps&&d===o._previousSwap.delta)return!1}return i?e>=Math.floor(u.left)&&e<Math.floor(u.right):n>=Math.floor(u.top)&&n<Math.floor(u.bottom)});return-1!==r&&this.sortPredicate(r,t,this)?r:-1}},{key:"_cacheItems",value:function(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}},{key:"_isOverContainer",value:function(t,e){return null!=this._clientRect&&Tt(this._clientRect,t,e)}},{key:"_getSiblingContainerFromPosition",value:function(t,e,n){return this._siblings.find(function(a){return a._canReceive(t,e,n)})}},{key:"_canReceive",value:function(t,e,n){if(!this._clientRect||!Tt(this._clientRect,e,n)||!this.enterPredicate(t,this))return!1;var a=this._getShadowRoot().elementFromPoint(e,n);if(!a)return!1;var o=Object(Z.e)(this.element);return a===o||o.contains(a)}},{key:"_startReceiving",value:function(t,e){var n=this,a=this._activeSiblings;!a.has(t)&&e.every(function(t){return n.enterPredicate(t,n)||n._draggables.indexOf(t)>-1})&&(a.add(t),this._cacheParentPositions(),this._listenToScrollEvents())}},{key:"_stopReceiving",value:function(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe()}},{key:"_listenToScrollEvents",value:function(){var t=this;this._viewportScrollSubscription=this._dragDropRegistry.scroll.subscribe(function(e){if(t.isDragging()){var n=t._parentPositions.handleScroll(e);n&&(t._itemPositions.forEach(function(t){_t(t.clientRect,n.top,n.left)}),t._itemPositions.forEach(function(e){var n=e.drag;t._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()}))}else t.isReceiving()&&t._cacheParentPositions()})}},{key:"_getShadowRoot",value:function(){if(!this._cachedShadowRoot){var t=Object(it.c)(Object(Z.e)(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}},{key:"_notifyReceivingSiblings",value:function(){var t=this,e=this._activeDraggables.filter(function(t){return t.isDragging()});this._siblings.forEach(function(n){return n._startReceiving(t,e)})}}]),t}();function Lt(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return n;return-1}function qt(t,e){t===window?t.scrollBy(0,e):t.scrollTop+=e}function zt(t,e){t===window?t.scrollBy(e,0):t.scrollLeft+=e}function $t(t,e){var n=t.top,a=t.bottom,o=.05*t.height;return e>=n-o&&e<=n+o?1:e>=a-o&&e<=a+o?2:0}function Gt(t,e){var n=t.left,a=t.right,o=.05*t.width;return e>=n-o&&e<=n+o?1:e>=a-o&&e<=a+o?2:0}var Wt,Vt,Kt,Qt=Object(it.f)({passive:!1,capture:!0}),Xt=((Wt=function(){function t(e,n){var a=this;u(this,t),this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=function(t){return t.isDragging()},this.pointerMove=new G.a,this.pointerUp=new G.a,this.scroll=new G.a,this._preventDefaultWhileDragging=function(t){a._activeDragInstances.length>0&&t.preventDefault()},this._persistentTouchmoveListener=function(t){a._activeDragInstances.length>0&&(a._activeDragInstances.some(a._draggingPredicate)&&t.preventDefault(),a.pointerMove.next(t))},this._document=n}return b(t,[{key:"registerDropContainer",value:function(t){this._dropInstances.has(t)||this._dropInstances.add(t)}},{key:"registerDragItem",value:function(t){var e=this;this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(function(){e._document.addEventListener("touchmove",e._persistentTouchmoveListener,Qt)})}},{key:"removeDropContainer",value:function(t){this._dropInstances.delete(t)}},{key:"removeDragItem",value:function(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Qt)}},{key:"startDragging",value:function(t,e){var n=this;if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){var a=e.type.startsWith("touch");this._globalListeners.set(a?"touchend":"mouseup",{handler:function(t){return n.pointerUp.next(t)},options:!0}).set("scroll",{handler:function(t){return n.scroll.next(t)},options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Qt}),a||this._globalListeners.set("mousemove",{handler:function(t){return n.pointerMove.next(t)},options:Qt}),this._ngZone.runOutsideAngular(function(){n._globalListeners.forEach(function(t,e){n._document.addEventListener(e,t.handler,t.options)})})}}},{key:"stopDragging",value:function(t){var e=this._activeDragInstances.indexOf(t);e>-1&&(this._activeDragInstances.splice(e,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}},{key:"isDragging",value:function(t){return this._activeDragInstances.indexOf(t)>-1}},{key:"ngOnDestroy",value:function(){var t=this;this._dragInstances.forEach(function(e){return t.removeDragItem(e)}),this._dropInstances.forEach(function(e){return t.removeDropContainer(e)}),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}},{key:"_clearGlobalListeners",value:function(){var t=this;this._globalListeners.forEach(function(e,n){t._document.removeEventListener(n,e.handler,e.options)}),this._globalListeners.clear()}}]),t}()).\u0275fac=function(t){return new(t||Wt)(q.Xb(q.B),q.Xb(d.d))},Wt.\u0275prov=Object(q.Jb)({factory:function(){return new Wt(Object(q.Xb)(q.B),Object(q.Xb)(d.d))},token:Wt,providedIn:"root"}),Wt),Jt={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Yt=((Vt=function(){function t(e,n,a,o){u(this,t),this._document=e,this._ngZone=n,this._viewportRuler=a,this._dragDropRegistry=o}return b(t,[{key:"createDrag",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jt;return new Ot(t,e,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}},{key:"createDropList",value:function(t){return new Ht(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}]),t}()).\u0275fac=function(t){return new(t||Vt)(q.Xb(d.d),q.Xb(q.B),q.Xb(z.e),q.Xb(Xt))},Vt.\u0275prov=Object(q.Jb)({factory:function(){return new Vt(Object(q.Xb)(d.d),Object(q.Xb)(q.B),Object(q.Xb)(z.e),Object(q.Xb)(Xt))},token:Vt,providedIn:"root"}),Vt),Zt=new q.s("CDK_DRAG_PARENT"),te=new q.s("CDK_DRAG_CONFIG"),ee=new q.s("CdkDropList"),ne=new q.s("CdkDragHandle"),ae=new q.s("CdkDragPlaceholder"),oe=new q.s("CdkDragPreview"),ie=((Kt=function(){function t(e,n,a,o,i,r,c,s,l,d,b){var m=this;u(this,t),this.element=e,this.dropContainer=n,this._ngZone=o,this._viewContainerRef=i,this._dir=c,this._changeDetectorRef=l,this._selfHandle=d,this._parentDrag=b,this._destroyed=new G.a,this.started=new q.o,this.released=new q.o,this.ended=new q.o,this.entered=new q.o,this.exited=new q.o,this.dropped=new q.o,this.moved=new rt.a(function(t){var e=m._dragRef.moved.pipe(Object(bt.a)(function(t){return{source:m,pointerPosition:t.pointerPosition,event:t.event,delta:t.delta,distance:t.distance}})).subscribe(t);return function(){e.unsubscribe()}}),this._dragRef=s.createDrag(e,{dragStartThreshold:r&&null!=r.dragStartThreshold?r.dragStartThreshold:5,pointerDirectionChangeThreshold:r&&null!=r.pointerDirectionChangeThreshold?r.pointerDirectionChangeThreshold:5,zIndex:null==r?void 0:r.zIndex}),this._dragRef.data=this,t._dragInstances.push(this),r&&this._assignDefaults(r),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}return b(t,[{key:"getPlaceholderElement",value:function(){return this._dragRef.getPlaceholderElement()}},{key:"getRootElement",value:function(){return this._dragRef.getRootElement()}},{key:"reset",value:function(){this._dragRef.reset()}},{key:"getFreeDragPosition",value:function(){return this._dragRef.getFreeDragPosition()}},{key:"ngAfterViewInit",value:function(){var t=this;this._ngZone.onStable.pipe(Object(X.a)(1),Object(dt.a)(this._destroyed)).subscribe(function(){t._updateRootElement(),t._handles.changes.pipe(Object(J.a)(t._handles),Object(mt.a)(function(e){var n=e.filter(function(e){return e._parentDrag===t}).map(function(t){return t.element});t._selfHandle&&t.rootElementSelector&&n.push(t.element),t._dragRef.withHandles(n)}),Object(ft.a)(function(t){return Object(V.a).apply(void 0,c(t.map(function(t){return t._stateChanges.pipe(Object(J.a)(t))})))}),Object(dt.a)(t._destroyed)).subscribe(function(e){var n=t._dragRef,a=e.element.nativeElement;e.disabled?n.disableHandle(a):n.enableHandle(a)}),t.freeDragPosition&&t._dragRef.setFreeDragPosition(t.freeDragPosition)})}},{key:"ngOnChanges",value:function(t){var e=t.rootElementSelector,n=t.freeDragPosition;e&&!e.firstChange&&this._updateRootElement(),n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}},{key:"ngOnDestroy",value:function(){this.dropContainer&&this.dropContainer.removeItem(this);var e=t._dragInstances.indexOf(this);e>-1&&t._dragInstances.splice(e,-1),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}},{key:"_updateRootElement",value:function(){var t=this.element.nativeElement,e=this.rootElementSelector?re(t,this.rootElementSelector):t;this._dragRef.withRootElement(e||t)}},{key:"_getBoundaryElement",value:function(){var t=this.boundaryElement;return t?"string"==typeof t?re(this.element.nativeElement,t):Object(Z.e)(t):null}},{key:"_syncInputs",value:function(e){var n=this;e.beforeStarted.subscribe(function(){if(!e.isDragging()){var t=n._dir,a=n.dragStartDelay,o=n._placeholderTemplate?{template:n._placeholderTemplate.templateRef,context:n._placeholderTemplate.data,viewContainer:n._viewContainerRef}:null,i=n._previewTemplate?{template:n._previewTemplate.templateRef,context:n._previewTemplate.data,matchSize:n._previewTemplate.matchSize,viewContainer:n._viewContainerRef}:null;e.disabled=n.disabled,e.lockAxis=n.lockAxis,e.dragStartDelay="object"==typeof a&&a?a:Object(Z.f)(a),e.constrainPosition=n.constrainPosition,e.previewClass=n.previewClass,e.withBoundaryElement(n._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(i),t&&e.withDirection(t.value)}}),e.beforeStarted.pipe(Object(X.a)(1)).subscribe(function(){var a,o;if(n._parentDrag)e.withParent(n._parentDrag._dragRef);else for(var i=n.element.nativeElement.parentElement;i;){if(null===(a=i.classList)||void 0===a?void 0:a.contains("cdk-drag")){e.withParent((null===(o=t._dragInstances.find(function(t){return t.element.nativeElement===i}))||void 0===o?void 0:o._dragRef)||null);break}i=i.parentElement}})}},{key:"_handleEvents",value:function(t){var e=this;t.started.subscribe(function(){e.started.emit({source:e}),e._changeDetectorRef.markForCheck()}),t.released.subscribe(function(){e.released.emit({source:e})}),t.ended.subscribe(function(t){e.ended.emit({source:e,distance:t.distance}),e._changeDetectorRef.markForCheck()}),t.entered.subscribe(function(t){e.entered.emit({container:t.container.data,item:e,currentIndex:t.currentIndex})}),t.exited.subscribe(function(t){e.exited.emit({container:t.container.data,item:e})}),t.dropped.subscribe(function(t){e.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,isPointerOverContainer:t.isPointerOverContainer,item:e,distance:t.distance})})}},{key:"_assignDefaults",value:function(t){var e=t.lockAxis,n=t.dragStartDelay,a=t.constrainPosition,o=t.previewClass,i=t.boundaryElement,r=t.draggingDisabled,c=t.rootElementSelector;this.disabled=null!=r&&r,this.dragStartDelay=n||0,e&&(this.lockAxis=e),a&&(this.constrainPosition=a),o&&(this.previewClass=o),i&&(this.boundaryElement=i),c&&(this.rootElementSelector=c)}},{key:"disabled",get:function(){return this._disabled||this.dropContainer&&this.dropContainer.disabled},set:function(t){this._disabled=Object(Z.c)(t),this._dragRef.disabled=this._disabled}}]),t}()).\u0275fac=function(t){return new(t||Kt)(q.Nb(q.l),q.Nb(ee,12),q.Nb(d.d),q.Nb(q.B),q.Nb(q.R),q.Nb(te,8),q.Nb(et.b,8),q.Nb(Yt),q.Nb(q.h),q.Nb(ne,10),q.Nb(Zt,12))},Kt.\u0275dir=q.Ib({type:Kt,selectors:[["","cdkDrag",""]],contentQueries:function(t,e,n){var a;1&t&&(q.Gb(n,oe,1),q.Gb(n,ae,1),q.Gb(n,ne,1)),2&t&&(q.sc(a=q.cc())&&(e._previewTemplate=a.first),q.sc(a=q.cc())&&(e._placeholderTemplate=a.first),q.sc(a=q.cc())&&(e._handles=a))},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,e){2&t&&q.Fb("cdk-drag-disabled",e.disabled)("cdk-drag-dragging",e._dragRef.isDragging())},inputs:{disabled:["cdkDragDisabled","disabled"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],lockAxis:["cdkDragLockAxis","lockAxis"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],boundaryElement:["cdkDragBoundary","boundaryElement"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],data:["cdkDragData","data"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[q.Bb([{provide:Zt,useExisting:Kt}]),q.Ab]}),Kt._dragInstances=[],Kt);function re(t,e){for(var n=t.parentElement;n;){if(n.matches?n.matches(e):n.msMatchesSelector(e))return n;n=n.parentElement}return null}var ce,se=((ce=function t(){u(this,t)}).\u0275mod=q.Lb({type:ce}),ce.\u0275inj=q.Kb({factory:function(t){return new(t||ce)},providers:[Yt],imports:[z.b]}),ce);i("R1ws");var le,ue,de,be=((le=function t(){u(this,t)}).\u0275mod=q.Lb({type:le}),le.\u0275inj=q.Kb({factory:function(t){return new(t||le)},imports:[[B.a,$.i],$.i]}),le),me=i("tyNb"),fe=[],pe=((de=function t(){u(this,t)}).\u0275mod=q.Lb({type:de}),de.\u0275inj=q.Kb({factory:function(t){return new(t||de)},imports:[[me.d.forChild(fe)],me.d]}),de),he=((ue=function t(){u(this,t)}).\u0275mod=q.Lb({type:ue}),ue.\u0275inj=q.Kb({factory:function(t){return new(t||ue)},imports:[[d.c,pe,m.c,f.e,C.b,p.a,v.AdminModule,S.a,T.d,_.b,y.d,k.c,x.f,D.b,P.c,E.l,F.b,M.b,w.b,O.c,I.b,R.d,A.b,U.b,N.e,j.d,ot,$.l,se,be]]}),ue),ge=i("A5z7"),ve=i("0MNC");function Se(t,e){}var Ce,Te,_e,ye,ke=new q.s("MatBottomSheetData"),xe=function t(){u(this,t),this.data=null,this.hasBackdrop=!0,this.disableClose=!1,this.ariaLabel=null,this.closeOnNavigation=!0,this.autoFocus=!1,this.restoreFocus=!0},De={bottomSheetState:Object(tt.m)("state",[Object(tt.j)("void, hidden",Object(tt.k)({transform:"translateY(100%)"})),Object(tt.j)("visible",Object(tt.k)({transform:"translateY(0%)"})),Object(tt.l)("visible => void, visible => hidden",Object(tt.e)("".concat($.b.COMPLEX," ").concat($.a.ACCELERATION_CURVE))),Object(tt.l)("void => visible",Object(tt.e)("".concat($.b.EXITING," ").concat($.a.DECELERATION_CURVE)))])},Pe=((Te=function(t){e(o,t);var n=a(o);function o(t,e,a,i,r,c){var s;return u(this,o),(s=n.call(this))._elementRef=t,s._changeDetectorRef=e,s._focusTrapFactory=a,s.bottomSheetConfig=c,s._animationState="void",s._animationStateChanged=new q.o,s._elementFocusedBeforeOpened=null,s.attachDomPortal=function(t){return s._validatePortalAttached(),s._setPanelClass(),s._savePreviouslyFocusedElement(),s._portalOutlet.attachDomPortal(t)},s._document=r,s._breakpointSubscription=i.observe([ve.b.Medium,ve.b.Large,ve.b.XLarge]).subscribe(function(){s._toggleClass("mat-bottom-sheet-container-medium",i.isMatched(ve.b.Medium)),s._toggleClass("mat-bottom-sheet-container-large",i.isMatched(ve.b.Large)),s._toggleClass("mat-bottom-sheet-container-xlarge",i.isMatched(ve.b.XLarge))}),s}return b(o,[{key:"attachComponentPortal",value:function(t){return this._validatePortalAttached(),this._setPanelClass(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachComponentPortal(t)}},{key:"attachTemplatePortal",value:function(t){return this._validatePortalAttached(),this._setPanelClass(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachTemplatePortal(t)}},{key:"enter",value:function(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges())}},{key:"exit",value:function(){this._destroyed||(this._animationState="hidden",this._changeDetectorRef.markForCheck())}},{key:"ngOnDestroy",value:function(){this._breakpointSubscription.unsubscribe(),this._destroyed=!0}},{key:"_onAnimationDone",value:function(t){"hidden"===t.toState?this._restoreFocus():"visible"===t.toState&&this._trapFocus(),this._animationStateChanged.emit(t)}},{key:"_onAnimationStart",value:function(t){this._animationStateChanged.emit(t)}},{key:"_toggleClass",value:function(t,e){var n=this._elementRef.nativeElement.classList;e?n.add(t):n.remove(t)}},{key:"_validatePortalAttached",value:function(){this._portalOutlet.hasAttached()}},{key:"_setPanelClass",value:function(){var t=this._elementRef.nativeElement,e=this.bottomSheetConfig.panelClass;Array.isArray(e)?e.forEach(function(e){return t.classList.add(e)}):e&&t.classList.add(e)}},{key:"_trapFocus",value:function(){var t=this._elementRef.nativeElement;if(this._focusTrap||(this._focusTrap=this._focusTrapFactory.create(t)),this.bottomSheetConfig.autoFocus)this._focusTrap.focusInitialElementWhenReady();else{var e=this._document.activeElement;e===t||t.contains(e)||t.focus()}}},{key:"_restoreFocus",value:function(){var t=this._elementFocusedBeforeOpened;if(this.bottomSheetConfig.restoreFocus&&t&&"function"==typeof t.focus){var e=this._document.activeElement,n=this._elementRef.nativeElement;e&&e!==this._document.body&&e!==n&&!n.contains(e)||t.focus()}this._focusTrap&&this._focusTrap.destroy()}},{key:"_savePreviouslyFocusedElement",value:function(){var t=this;this._elementFocusedBeforeOpened=this._document.activeElement,this._elementRef.nativeElement.focus&&Promise.resolve().then(function(){return t._elementRef.nativeElement.focus()})}}]),o}(L.a)).\u0275fac=function(t){return new(t||Te)(q.Nb(q.l),q.Nb(q.h),q.Nb(B.i),q.Nb(ve.a),q.Nb(d.d,8),q.Nb(xe))},Te.\u0275cmp=q.Hb({type:Te,selectors:[["mat-bottom-sheet-container"]],viewQuery:function(t,e){var n;1&t&&q.Kc(L.c,3),2&t&&q.sc(n=q.cc())&&(e._portalOutlet=n.first)},hostAttrs:["tabindex","-1","role","dialog","aria-modal","true",1,"mat-bottom-sheet-container"],hostVars:2,hostBindings:function(t,e){1&t&&q.Bc("@state.start",function(t){return e._onAnimationStart(t)})("@state.done",function(t){return e._onAnimationDone(t)}),2&t&&(q.Db("aria-label",null==e.bottomSheetConfig?null:e.bottomSheetConfig.ariaLabel),q.Cc("@state",e._animationState))},features:[q.zb],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,e){1&t&&q.Dc(0,Se,0,0,"ng-template",0)},directives:[L.c],styles:[".mat-bottom-sheet-container{padding:8px 16px;min-width:100vw;box-sizing:border-box;display:block;outline:0;max-height:80vh;overflow:auto}.cdk-high-contrast-active .mat-bottom-sheet-container{outline:1px solid}.mat-bottom-sheet-container-xlarge,.mat-bottom-sheet-container-large,.mat-bottom-sheet-container-medium{border-top-left-radius:4px;border-top-right-radius:4px}.mat-bottom-sheet-container-medium{min-width:384px;max-width:calc(100vw - 128px)}.mat-bottom-sheet-container-large{min-width:512px;max-width:calc(100vw - 256px)}.mat-bottom-sheet-container-xlarge{min-width:576px;max-width:calc(100vw - 384px)}\n"],encapsulation:2,data:{animation:[De.bottomSheetState]}}),Te),Ee=((Ce=function t(){u(this,t)}).\u0275mod=q.Lb({type:Ce}),Ce.\u0275inj=q.Kb({factory:function(t){return new(t||Ce)},imports:[[H.f,$.i,L.g],$.i]}),Ce),Fe=function(){function t(e,n){var a=this;u(this,t),this._overlayRef=n,this._afterDismissed=new G.a,this._afterOpened=new G.a,this.containerInstance=e,this.disableClose=e.bottomSheetConfig.disableClose,e._animationStateChanged.pipe(Object(Y.a)(function(t){return"done"===t.phaseName&&"visible"===t.toState}),Object(X.a)(1)).subscribe(function(){a._afterOpened.next(),a._afterOpened.complete()}),e._animationStateChanged.pipe(Object(Y.a)(function(t){return"done"===t.phaseName&&"hidden"===t.toState}),Object(X.a)(1)).subscribe(function(){clearTimeout(a._closeFallbackTimeout),n.dispose()}),n.detachments().pipe(Object(X.a)(1)).subscribe(function(){a._afterDismissed.next(a._result),a._afterDismissed.complete()}),Object(V.a)(n.backdropClick(),n.keydownEvents().pipe(Object(Y.a)(function(t){return t.keyCode===Q.g}))).subscribe(function(t){a.disableClose||"keydown"===t.type&&Object(Q.s)(t)||(t.preventDefault(),a.dismiss())})}return b(t,[{key:"dismiss",value:function(t){var e=this;this._afterDismissed.closed||(this.containerInstance._animationStateChanged.pipe(Object(Y.a)(function(t){return"start"===t.phaseName}),Object(X.a)(1)).subscribe(function(t){e._closeFallbackTimeout=setTimeout(function(){e._overlayRef.dispose()},t.totalTime+100),e._overlayRef.detachBackdrop()}),this._result=t,this.containerInstance.exit())}},{key:"afterDismissed",value:function(){return this._afterDismissed}},{key:"afterOpened",value:function(){return this._afterOpened}},{key:"backdropClick",value:function(){return this._overlayRef.backdropClick()}},{key:"keydownEvents",value:function(){return this._overlayRef.keydownEvents()}}]),t}(),Me=new q.s("mat-bottom-sheet-default-options"),we=((_e=function(){function t(e,n,a,o){u(this,t),this._overlay=e,this._injector=n,this._parentBottomSheet=a,this._defaultOptions=o,this._bottomSheetRefAtThisLevel=null}return b(t,[{key:"open",value:function(t,e){var n=this,a=function(t,e){return Object.assign(Object.assign({},t),e)}(this._defaultOptions||new xe,e),o=this._createOverlay(a),i=this._attachContainer(o,a),r=new Fe(i,o);if(t instanceof q.N)i.attachTemplatePortal(new L.h(t,null,{$implicit:a.data,bottomSheetRef:r}));else{var c=new L.d(t,void 0,this._createInjector(a,r)),s=i.attachComponentPortal(c);r.instance=s.instance}return r.afterDismissed().subscribe(function(){n._openedBottomSheetRef==r&&(n._openedBottomSheetRef=null)}),this._openedBottomSheetRef?(this._openedBottomSheetRef.afterDismissed().subscribe(function(){return r.containerInstance.enter()}),this._openedBottomSheetRef.dismiss()):r.containerInstance.enter(),this._openedBottomSheetRef=r,r}},{key:"dismiss",value:function(t){this._openedBottomSheetRef&&this._openedBottomSheetRef.dismiss(t)}},{key:"ngOnDestroy",value:function(){this._bottomSheetRefAtThisLevel&&this._bottomSheetRefAtThisLevel.dismiss()}},{key:"_attachContainer",value:function(t,e){var n=q.t.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:xe,useValue:e}]}),a=new L.d(Pe,e.viewContainerRef,n);return t.attach(a).instance}},{key:"_createOverlay",value:function(t){var e=new H.d({direction:t.direction,hasBackdrop:t.hasBackdrop,disposeOnNavigation:t.closeOnNavigation,maxWidth:"100%",scrollStrategy:t.scrollStrategy||this._overlay.scrollStrategies.block(),positionStrategy:this._overlay.position().global().centerHorizontally().bottom("0")});return t.backdropClass&&(e.backdropClass=t.backdropClass),this._overlay.create(e)}},{key:"_createInjector",value:function(t,e){var n=t&&t.viewContainerRef&&t.viewContainerRef.injector,a=[{provide:Fe,useValue:e},{provide:ke,useValue:t.data}];return!t.direction||n&&n.get(et.b,null)||a.push({provide:et.b,useValue:{value:t.direction,change:Object(K.a)()}}),q.t.create({parent:n||this._injector,providers:a})}},{key:"_openedBottomSheetRef",get:function(){var t=this._parentBottomSheet;return t?t._openedBottomSheetRef:this._bottomSheetRefAtThisLevel},set:function(t){this._parentBottomSheet?this._parentBottomSheet._openedBottomSheetRef=t:this._bottomSheetRefAtThisLevel=t}}]),t}()).\u0275fac=function(t){return new(t||_e)(q.Xb(H.c),q.Xb(q.t),q.Xb(_e,12),q.Xb(Me,8))},_e.\u0275prov=Object(q.Jb)({factory:function(){return new _e(Object(q.Xb)(H.c),Object(q.Xb)(q.p),Object(q.Xb)(_e,12),Object(q.Xb)(Me,8))},token:_e,providedIn:Ee}),_e),Oe=i("JbvS"),Ie=i("0T/Q"),Re=i("sKxO"),Ae=i("R5jZ"),Ue=i("un/a"),Ne=i("JIr8"),je=i("Qyje"),Be=((ye=function(){function t(e){u(this,t),this.http=e,this.moduleUrl="mante/area",this.srvcErrHndl=new Ae.a}return b(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Re.a.url,"/").concat(this.moduleUrl,"/get_areas?").concat(je.stringify(t))).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(t){return this.http.post("".concat(Re.a.url,"/").concat(this.moduleUrl,"/guardar").concat(t.area?"/"+t.area:""),t).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||ye)(q.Xb(m.b))},ye.\u0275prov=q.Jb({token:ye,factory:ye.\u0275fac,providedIn:"root"}),ye),He=i("FY0D");function Le(t,e){if(1&t){var n=q.Ub();q.Tb(0,"mat-list-item",5),q.bc("click",function(){q.xc(n);var t=e.$implicit;return q.fc().getEntidad(t.area)}),q.Tb(1,"mat-icon",6),q.Fc(2,"settings"),q.Sb(),q.Tb(3,"h5",7),q.Fc(4),q.Sb(),q.Sb()}if(2&t){var a=e.$implicit;q.Cb(4),q.Gc(a.nombre)}}var qe,ze,$e=function(){return{standalone:!0}},Ge=((ze=function(){function t(e,n){var a=this;u(this,t),this.areaSrvc=e,this.ls=n,this.getEntidadEv=new q.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadEntidades=function(){a.areaSrvc.get({sede:a.ls.get(Re.a.usrTokenVar).sede||0,debaja:1}).subscribe(function(t){t&&t.length>0&&(a.lstEntidades=t,a.applyFilter())})},this.getEntidad=function(t){a.areaSrvc.get({area:t,debaja:1}).subscribe(function(t){t&&t.length>0&&a.getEntidadEv.emit(t[0])})},this.pageChange=function(t){a.pageSize=t.pageSize,a.pageIndex=t.pageIndex,a.applyFilter()}}return b(t,[{key:"ngOnInit",value:function(){this.loadEntidades()}},{key:"applyFilter",value:function(){if(this.txtFiltro.length>0){var t=Object(Re.b)(this.lstEntidades,this.txtFiltro);this.length=t.length,this.lstEntidadesPaged=Object(Re.c)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstEntidades.length,this.lstEntidadesPaged=Object(Re.c)(this.lstEntidades,this.pageSize,this.pageIndex+1)}}]),t}()).\u0275fac=function(t){return new(t||ze)(q.Nb(Be),q.Nb(He.a))},ze.\u0275cmp=q.Hb({type:ze,selectors:[["app-lista-area"]],outputs:{getEntidadEv:"getEntidadEv"},decls:7,vars:7,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],["matRipple","",3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["matRipple","",3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,e){1&t&&(q.Tb(0,"mat-card",0),q.Tb(1,"mat-card-content"),q.Tb(2,"mat-form-field",1),q.Tb(3,"input",2),q.bc("keyup",function(){return e.applyFilter()})("ngModelChange",function(t){return e.txtFiltro=t}),q.Sb(),q.Sb(),q.Tb(4,"mat-nav-list"),q.Dc(5,Le,5,1,"mat-list-item",3),q.Sb(),q.Tb(6,"mat-paginator",4),q.bc("page",function(t){return e.pageChange(t)}),q.Sb(),q.Sb(),q.Sb()),2&t&&(q.Cb(3),q.lc("ngModel",e.txtFiltro)("ngModelOptions",q.nc(6,$e)),q.Cb(2),q.lc("ngForOf",e.lstEntidadesPaged),q.Cb(1),q.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[x.a,x.c,y.b,k.b,f.c,f.k,f.n,T.e,d.l,U.a,T.c,_.a,T.b,$.j],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),ze),We=((qe=function(){function t(e){u(this,t),this.http=e,this.moduleUrl="mesa",this.srvcErrHndl=new Ae.a}return b(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Re.a.urlMantenimientos,"/").concat(this.moduleUrl,"/buscar?").concat(je.stringify(t))).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(t){return this.http.post("".concat(Re.a.urlMantenimientos,"/mesa/guardar").concat(t.mesa?"/"+t.mesa:""),t).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"getDisponibles",value:function(){return this.http.get("".concat(Re.a.urlMantenimientos,"/area/get_mesas_disponibles?")).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||qe)(q.Xb(m.b))},qe.\u0275prov=q.Jb({token:qe,factory:qe.\u0275fac,providedIn:"root"}),qe),Ve=i("qMXL");function Ke(t,e){if(1&t&&(q.Tb(0,"mat-option",12),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n.impresora),q.Cb(1),q.Hc(" ",n.nombre," ")}}function Qe(t,e){if(1&t){var n=q.Ub();q.Tb(0,"mat-form-field",4),q.Tb(1,"mat-label"),q.Fc(2,"Impresora"),q.Sb(),q.Tb(3,"mat-select",10),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().mesa.impresora=t}),q.Dc(4,Ke,2,2,"mat-option",11),q.Sb(),q.Sb()}if(2&t){var a=q.fc();q.Cb(3),q.lc("ngModel",a.mesa.impresora),q.Cb(1),q.lc("ngForOf",a.impresoras)}}var Xe,Je,Ye=((Xe=function(){function t(e,n,a,o,i){var r=this;u(this,t),this.mesaSrvc=e,this.impresoraSrvc=n,this.snackBar=a,this.dialogRef=o,this.data=i,this.impresoras=[],this.mesa={},this.loadImpresoras=function(){return r.impresoraSrvc.get().subscribe(function(t){return r.impresoras=t})},this.cancelar=function(){return r.dialogRef.close(!1)},this.guardarConfiguracion=function(){r.mesaSrvc.save(r.mesa).subscribe(function(t){t.exito?r.snackBar.open(t.mesa?"Mesa #".concat(t.mesa.numero," actualizada..."):"Mesa #".concat(r.mesa.numero," actualizada..."),"Configuraci\xf3n de mesa",{duration:3e3}):r.snackBar.open("ERROR:".concat(t.mensaje,"."),"Configuraci\xf3n de mesa",{duration:7e3}),r.dialogRef.close(!0)})}}return b(t,[{key:"ngOnInit",value:function(){this.mesa=this.data.mesa,this.loadImpresoras()}}]),t}()).\u0275fac=function(t){return new(t||Xe)(q.Nb(We),q.Nb(Ve.a),q.Nb(O.b),q.Nb(N.f),q.Nb(N.a))},Xe.\u0275cmp=q.Hb({type:Xe,selectors:[["app-configura-mesa"]],decls:13,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate",""],["frmConfigMesa","ngForm"],[1,"fullWidth"],["type","text","matInput","","placeholder","Etiqueta","name","etiqueta","maxlength","3",3,"ngModel","ngModelChange"],["class","fullWidth",4,"ngIf"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],["name","impresora",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){if(1&t&&(q.Tb(0,"h1",0),q.Fc(1),q.Sb(),q.Tb(2,"div",1),q.Tb(3,"form",2,3),q.Tb(5,"mat-form-field",4),q.Tb(6,"input",5),q.bc("ngModelChange",function(t){return e.mesa.etiqueta=t}),q.Sb(),q.Sb(),q.Dc(7,Qe,5,2,"mat-form-field",6),q.Sb(),q.Sb(),q.Tb(8,"div",7),q.Tb(9,"button",8),q.bc("click",function(){return e.cancelar()}),q.Fc(10," Cancelar "),q.Sb(),q.Tb(11,"button",9),q.bc("click",function(){return e.guardarConfiguracion()}),q.Fc(12," Guardar "),q.Sb(),q.Sb()),2&t){var n=q.tc(4);q.Cb(1),q.Hc("Configuraci\xf3n de mesa ",e.mesa.numero,""),q.Cb(5),q.lc("ngModel",e.mesa.etiqueta),q.Cb(1),q.lc("ngIf",1==+e.mesa.esmostrador),q.Cb(4),q.lc("disabled",!n.form.valid)}},directives:[N.g,N.d,f.r,f.l,f.m,y.b,k.b,f.c,f.f,f.k,f.n,d.m,N.c,w.a,y.e,F.a,d.l,$.m],styles:[""]}),Xe),Ze=i("IJgu"),tn=i("znSr"),en=["divMesa"],nn=function(t,e,n,a,o){return{disponible:t,ocupada:e,debaja:n,"call-center-ocupado":a,"call-center-disponible":o}},an=((Je=function(){function t(e,n){var a=this;u(this,t),this.snackBar=e,this.mesaSrvc=n,this.configuracion={mesa:0,area:0,numero:0,posx:0,posy:0,tamanio:48,estatus:1,ancho:null,alto:null,esmostrador:0,vertical:0,etiqueta:null,escallcenter:0},this.dontAllowDrag=!0,this.isDisabled=!1,this.onClickMesa=new q.o,this.urlImage="/assets/img/mesas/",this.ngAfterViewInit=function(){return a.objMesa=a.divMesa.nativeElement},this.clickMesa=function(){return a.onClickMesa.emit({mesaSelected:a.configuracion})},this.getAncho=function(){return a.configuracion.ancho&&+a.configuracion.ancho>0?a.configuracion.ancho:a.configuracion.tamanio},this.getAlto=function(){return a.configuracion.alto&&+a.configuracion.alto>0?a.configuracion.alto:a.configuracion.tamanio},this.dragEnded=function(t){var e=t.source.element.nativeElement,n=e.offsetParent.scrollHeight,o=t.distance,i={mesa:a.configuracion.mesa,area:a.configuracion.area,numero:a.configuracion.numero,posx:Math.abs(100*(e.offsetLeft+o.x)/e.offsetParent.scrollWidth),posy:Math.abs(100*(e.offsetTop+o.y)/n),tamanio:a.configuracion.tamanio,estatus:a.configuracion.estatus};a.mesaSrvc.save(i).subscribe(function(t){t.exito?t.mesa?(a.configuracion.mesa=t.mesa.mesa,a.snackBar.open("Mesa #".concat(t.mesa.numero," actualizada..."),"Dise\xf1o de \xe1rea",{duration:3e3})):a.snackBar.open("Mesa #".concat(a.configuracion.numero," actualizada..."),"Dise\xf1o de \xe1rea",{duration:3e3}):a.snackBar.open("ERROR:".concat(t.mensaje,"."),"Dise\xf1o de \xe1rea",{duration:3e3})})},this.moviendo=function(t){}}return b(t,[{key:"ngOnInit",value:function(){this.urlImage+=0==+this.configuracion.esmostrador?"table_03.svg":0==+this.configuracion.escallcenter?0==+this.configuracion.vertical?"mostrador_horizontal.svg":"mostrador_vertical.svg":"callcenter.svg"}}]),t}()).\u0275fac=function(t){return new(t||Je)(q.Nb(O.b),q.Nb(We))},Je.\u0275cmp=q.Hb({type:Je,selectors:[["app-mesa"]],viewQuery:function(t,e){var n;1&t&&q.Kc(en,1),2&t&&q.sc(n=q.cc())&&(e.divMesa=n.first)},inputs:{configuracion:"configuracion",dontAllowDrag:"dontAllowDrag",isDisabled:"isDisabled"},outputs:{onClickMesa:"onClickMesa"},decls:4,vars:20,consts:[["cdkDrag","","cdkDragBoundary",".areaPosicionamiento",1,"divMesa","mat-elevation-z6",3,"cdkDragDisabled","ngClass","cdkDragEnded","cdkDragMoved","click"],["divMesa",""]],template:function(t,e){1&t&&(q.Tb(0,"div",0,1),q.bc("cdkDragEnded",function(t){return e.dragEnded(t)})("cdkDragMoved",function(t){return e.moviendo(t)})("click",function(){return e.clickMesa()}),q.Tb(2,"span"),q.Fc(3),q.Sb(),q.Sb()),2&t&&(q.Ac("width",e.getAncho(),"px")("height",e.getAlto(),"px")("left",e.configuracion.posx,"%")("top",e.configuracion.posy,"%")("background-image","url("+e.urlImage+")"),q.lc("cdkDragDisabled",e.dontAllowDrag)("ngClass",q.rc(14,nn,1==+e.configuracion.estatus&&0==+e.configuracion.debaja,2==+e.configuracion.estatus&&0==+e.configuracion.debaja,1==+e.configuracion.debaja,2==+e.configuracion.estatus&&1==+e.configuracion.escallcenter,1==+e.configuracion.estatus&&1==+e.configuracion.escallcenter)),q.Db("disabled",!!e.isDisabled||null),q.Cb(3),q.Gc(e.configuracion.etiqueta||e.configuracion.numero))},directives:[ie,d.k,tn.a],styles:[".divMesa[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:50%;position:absolute;text-align:right;padding-top:0;background-size:90% 90%}span[_ngcontent-%COMP%]{font-size:12pt;font-weight:700;text-shadow:-1px 0 #fff,0 1px #fff,1px 0 #fff,0 -1px #fff}.disponible[_ngcontent-%COMP%]{background-color:#90ee90}.ocupada[_ngcontent-%COMP%]{background-color:#da332d}.debaja[_ngcontent-%COMP%]{background-color:#000}.call-center-ocupado[_ngcontent-%COMP%]{background-color:#da332d;background-image:url(/assets/img/mesas/callcenter_alt.svg)}.call-center-disponible[_ngcontent-%COMP%]{background-color:#90ee90;background-image:url(/assets/img/mesas/callcenter.svg)}"]}),Je);function on(t,e){if(1&t){var n=q.Ub();q.Tb(0,"app-mesa",11),q.bc("onClickMesa",function(t){return q.xc(n),q.fc().onClickMesa(t)})("contextmenu",function(t){q.xc(n);var a=e.$implicit;return q.fc().onContextMenu(t,a)}),q.Sb()}2&t&&q.lc("configuracion",e.$implicit)("dontAllowDrag",!1)}function rn(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",16),q.bc("click",function(){q.xc(n);var t=q.fc().item;return q.fc().configurarMesa(t)}),q.Tb(1,"mat-icon",3),q.Fc(2,"settings"),q.Sb(),q.Fc(3,"Configuracion "),q.Sb()}}function cn(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",17),q.bc("click",function(){q.xc(n);var t=q.fc().item;return q.fc().toggleDeBaja(t)}),q.Tb(1,"mat-icon",3),q.Fc(2,"thumb_down"),q.Sb(),q.Fc(3,"Dar de baja "),q.Sb()}if(2&t){var a=q.fc().item;q.lc("disabled",2==+a.estatus)}}function sn(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",18),q.bc("click",function(){q.xc(n);var t=q.fc().item;return q.fc().toggleDeBaja(t,0)}),q.Tb(1,"mat-icon",3),q.Fc(2,"thumb_up"),q.Sb(),q.Fc(3,"Habilitar "),q.Sb()}if(2&t){var a=q.fc().item;q.lc("disabled",2==+a.estatus)}}function ln(t,e){if(1&t&&(q.Tb(0,"span",12),q.Fc(1),q.Sb(),q.Ob(2,"mat-divider"),q.Dc(3,rn,4,0,"button",13),q.Dc(4,cn,4,1,"button",14),q.Dc(5,sn,4,1,"button",15)),2&t){var n=e.item;q.Cb(1),q.Ic("Mesa #",n.numero," (",n.mesa,")"),q.Cb(2),q.lc("ngIf",0==+n.debaja),q.Cb(1),q.lc("ngIf",0==+n.debaja),q.Cb(1),q.lc("ngIf",1==+n.debaja)}}var un,dn=((un=function(){function t(e,n,a,o,i){var r=this;u(this,t),this.snackBar=e,this.mesaSrvc=n,this.dialogRef=a,this.dialog=o,this.data=i,this.mesas=[],this.contextMenuPosition={x:"0px",y:"0px"},this.getNextTableNumber=function(){return r.mesas.length>0?r.mesas.reduce(function(t,e){return+e.numero>t?+e.numero:t},r.mesas[0].numero?+r.mesas[0].numero:0)+1:1},this.addTable=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:72,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:72,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;r.mesas.push({mesa:null,area:r.data.area,numero:r.getNextTableNumber(),posx:1,posy:1,tamanio:72,estatus:1,ancho:t,alto:e,esmostrador:n,vertical:a,escallcenter:o}),r.saveNewMesa(r.mesas[r.mesas.length-1],r.mesas.length-1)},this.addMostrador=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return r.addTable(t?72:144,t?144:72,1,t?1:0)},this.addCallCenter=function(){return r.addTable(72,72,1,0,1)},this.saveNewMesa=function(t,e){r.mesaSrvc.save(t).subscribe(function(t){t.exito?t.mesa&&(r.mesas[e]=t.mesa):r.snackBar.open("ERROR: ".concat(t.mensaje),"Mesa",{duration:7e3})})},this.onClickMesa=function(t){},this.terminar=function(){return r.dialogRef.close(r.mesas)},this.configurarMesa=function(t){r.dialog.open(Ye,{width:"50%",data:{mesa:t}}).afterClosed().subscribe(function(t){})},this.toggleDeBaja=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;r.dialog.open(Ze.a,{maxWidth:"400px",data:new Ze.b(0==+t.esmostrador?"Mesa":"Mostrador","\xbfSeguro que desea ".concat(1===e?"dar de baja":"habilitar"," ").concat(0==+t.esmostrador?"la mesa":"el mostrador"," #").concat(t.numero,"?"),"S\xed","No")}).afterClosed().subscribe(function(n){n&&(t.debaja=e,r.mesaSrvc.save(t).subscribe(function(t){if(t.exito){if(t.mesa){var e=r.mesas.findIndex(function(e){return+e.mesa==+t.mesa.mesa});e>-1&&(r.mesas[e]=t.mesa),r.snackBar.open(t.mensaje,"Mesa",{duration:3e3})}}else r.snackBar.open("ERROR: ".concat(t.mensaje),"Mesa",{duration:7e3})}))})}}return b(t,[{key:"ngOnInit",value:function(){this.mesas=this.data.mesas}},{key:"onContextMenu",value:function(t,e){t.preventDefault(),this.contextMenuPosition.x=t.clientX+"px",this.contextMenuPosition.y=t.clientY+"px",this.contextMenu.menuData={item:e},this.contextMenu.menu.focusFirstItem("mouse"),this.contextMenu.openMenu()}}]),t}()).\u0275fac=function(t){return new(t||un)(q.Nb(O.b),q.Nb(We),q.Nb(N.f),q.Nb(N.b),q.Nb(N.a))},un.\u0275cmp=q.Hb({type:un,selectors:[["app-area-designer"]],viewQuery:function(t,e){var n;1&t&&q.Kc(R.e,1),2&t&&q.sc(n=q.cc())&&(e.contextMenu=n.first)},decls:27,vars:6,consts:[[1,"diseniador"],["align","center",2,"height","55px"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"click"],[1,"btnIconSize"],["mat-raised-button","","type","button","color","accent",3,"click"],[2,"height","5px","width","100%"],["id","divAreaPosicionamiento",1,"areaPosicionamiento"],[3,"configuracion","dontAllowDrag","onClickMesa","contextmenu",4,"ngFor","ngForOf"],[2,"visibility","hidden","position","fixed",3,"matMenuTriggerFor"],["contextMenu","matMenu"],["matMenuContent",""],[3,"configuracion","dontAllowDrag","onClickMesa","contextmenu"],["mat-menu-item","","disableRipple","true",1,"mesaTitle"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","","class","customize",3,"disabled","click",4,"ngIf"],["mat-menu-item","","class","customizeUp",3,"disabled","click",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-menu-item","",1,"customize",3,"disabled","click"],["mat-menu-item","",1,"customizeUp",3,"disabled","click"]],template:function(t,e){if(1&t&&(q.Tb(0,"div",0),q.Tb(1,"div",1),q.Tb(2,"button",2),q.bc("click",function(){return e.addTable()}),q.Tb(3,"mat-icon",3),q.Fc(4,"add"),q.Sb(),q.Fc(5,"\xa0Mesa "),q.Sb(),q.Tb(6,"button",2),q.bc("click",function(){return e.addMostrador()}),q.Tb(7,"mat-icon",3),q.Fc(8,"add"),q.Sb(),q.Fc(9,"\xa0Mostrador "),q.Sb(),q.Tb(10,"button",2),q.bc("click",function(){return e.addMostrador(!0)}),q.Tb(11,"mat-icon",3),q.Fc(12,"add"),q.Sb(),q.Fc(13,"\xa0Mostrador vertical "),q.Sb(),q.Tb(14,"button",2),q.bc("click",function(){return e.addCallCenter()}),q.Tb(15,"mat-icon",3),q.Fc(16,"add"),q.Sb(),q.Fc(17,"\xa0Call center "),q.Sb(),q.Tb(18,"button",4),q.bc("click",function(){return e.terminar()}),q.Fc(19," Terminar "),q.Sb(),q.Sb(),q.Ob(20,"div",5),q.Tb(21,"div",6),q.Dc(22,on,1,2,"app-mesa",7),q.Sb(),q.Ob(23,"div",8),q.Tb(24,"mat-menu",null,9),q.Dc(26,ln,6,5,"ng-template",10),q.Sb(),q.Sb()),2&t){var n=q.tc(25);q.Cb(22),q.lc("ngForOf",e.mesas),q.Cb(1),q.Ac("left",e.contextMenuPosition.x)("top",e.contextMenuPosition.y),q.lc("matMenuTriggerFor",n)}},directives:[w.a,_.a,d.l,R.e,R.a,R.b,an,R.c,D.a,d.m],styles:[".diseniador[_ngcontent-%COMP%]{width:750px;height:650px}.areaPosicionamiento[_ngcontent-%COMP%], .diseniador[_ngcontent-%COMP%]{overflow:hidden!important;padding:0!important}.areaPosicionamiento[_ngcontent-%COMP%]{width:100%;height:600px;background-color:hsla(0,0%,78%,.28627450980392155);position:relative}.btnIconSize[_ngcontent-%COMP%]{font-size:17pt!important}  .customize{background:#ffffe0}  .customizeUp{background:#90ee90}.mesaTitle[_ngcontent-%COMP%]{font-weight:700}"]}),un);function bn(t,e){if(1&t){var n=q.Ub();q.Tb(0,"mat-form-field",4),q.Tb(1,"input",13),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().entidad.nombre=t}),q.Sb(),q.Sb()}if(2&t){var a=q.fc();q.Cb(1),q.lc("ngModel",a.entidad.nombre)}}function mn(t,e){if(1&t&&(q.Tb(0,"mat-option",14),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n.area),q.Cb(1),q.Hc(" ",n.nombre," ")}}function fn(t,e){if(1&t&&(q.Tb(0,"mat-option",14),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n.impresora),q.Cb(1),q.Hc(" ",n.nombre," ")}}function pn(t,e){if(1&t&&(q.Tb(0,"mat-option",14),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n.impresora),q.Cb(1),q.Hc(" ",n.nombre," ")}}function hn(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",15),q.bc("click",function(){return q.xc(n),q.fc().openDesigner()}),q.Fc(1," Dise\xf1ar "),q.Sb()}}function gn(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",16),q.bc("click",function(){return q.xc(n),q.fc().resetEntidad()}),q.Fc(1," Nuevo "),q.Sb()}}var vn,Sn,Cn=((vn=function(){function t(e,n,a,o,i){var r=this;u(this,t),this.snackBar=e,this.dialog=n,this.entidadSrvc=a,this.impresoraSrvc=o,this.ls=i,this.entidadSavedEv=new q.o,this.sedeUsr=0,this.lstAreas=[],this.esMovil=!1,this.impresoras=[],this.loadAreas=function(){return r.entidadSrvc.get({sede:r.sedeUsr,debaja:1}).subscribe(function(t){return r.lstAreas=t})},this.loadImpresoras=function(){return r.impresoraSrvc.get().subscribe(function(t){return r.impresoras=t})},this.resetEntidad=function(){return r.entidad={area:null,sede:r.sedeUsr,nombre:null,mesas:[],impresora_factura:null,impresora:null}},this.onSubmit=function(){r.entidadSrvc.save(r.entidad).subscribe(function(t){t.exito?(r.snackBar.open("".concat(t.mensaje),"\xc1rea",{duration:3e3}),r.resetEntidad(),r.loadAreas(),r.entidadSavedEv.emit()):r.snackBar.open("ERROR: ".concat(t.mensaje),"\xc1rea",{duration:3e3})})},this.openDesigner=function(){r.dialog.open(dn,{width:"800px",disableClose:!1,data:{area:+r.entidad.area,mesas:r.entidad.mesas||[]}}).afterClosed().subscribe(function(t){t&&(r.entidadSavedEv.emit(),r.entidadSrvc.get({area:+r.entidad.area,debaja:1}).subscribe(function(t){t&&t.length>0&&(r.entidad=t[0])}))})}}return b(t,[{key:"ngOnInit",value:function(){this.sedeUsr=this.ls.get(Re.a.usrTokenVar).sede||0,this.esMovil=this.ls.get(Re.a.usrTokenVar).enmovil||!1,this.resetEntidad(),this.loadAreas(),this.loadImpresoras()}}]),t}()).\u0275fac=function(t){return new(t||vn)(q.Nb(O.b),q.Nb(N.b),q.Nb(Be),q.Nb(Ve.a),q.Nb(He.a))},vn.\u0275cmp=q.Hb({type:vn,selectors:[["app-form-area"]],inputs:{entidad:"entidad"},outputs:{entidadSavedEv:"entidadSavedEv"},decls:30,vars:11,consts:[[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmEntidad","ngForm"],["class","fullWidth",4,"ngIf"],[1,"fullWidth"],["name","area_padre",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","impresora","required","",3,"ngModel","ngModelChange"],["name","impresora_factura",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["type","text","matInput","","placeholder","Nombre","name","nombre","required","",3,"ngModel","ngModelChange"],[3,"value"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"click"],["mat-raised-button","","type","button","color","accent",3,"click"]],template:function(t,e){if(1&t){var n=q.Ub();q.Tb(0,"mat-card",0),q.Tb(1,"mat-card-title"),q.Tb(2,"h4"),q.Fc(3,"\xc1rea"),q.Sb(),q.Sb(),q.Tb(4,"mat-card-content"),q.Tb(5,"form",1,2),q.bc("ngSubmit",function(){return q.xc(n),q.tc(6).form.valid&&e.onSubmit()}),q.Dc(7,bn,2,1,"mat-form-field",3),q.Tb(8,"mat-form-field",4),q.Tb(9,"mat-label"),q.Fc(10,"\xc1rea padre"),q.Sb(),q.Tb(11,"mat-select",5),q.bc("ngModelChange",function(t){return e.entidad.area_padre=t}),q.Dc(12,mn,2,2,"mat-option",6),q.Sb(),q.Sb(),q.Tb(13,"mat-form-field",4),q.Tb(14,"mat-label"),q.Fc(15,"Impresora"),q.Sb(),q.Tb(16,"mat-select",7),q.bc("ngModelChange",function(t){return e.entidad.impresora=t}),q.Dc(17,fn,2,2,"mat-option",6),q.Sb(),q.Sb(),q.Tb(18,"mat-form-field",4),q.Tb(19,"mat-label"),q.Fc(20,"Impresora de factura"),q.Sb(),q.Tb(21,"mat-select",8),q.bc("ngModelChange",function(t){return e.entidad.impresora_factura=t}),q.Dc(22,pn,2,2,"mat-option",6),q.Sb(),q.Sb(),q.Tb(23,"h5"),q.Fc(24),q.Sb(),q.Tb(25,"div",9),q.Tb(26,"button",10),q.Fc(27," Guardar "),q.Sb(),q.Dc(28,hn,2,0,"button",11),q.Dc(29,gn,2,0,"button",12),q.Sb(),q.Sb(),q.Sb(),q.Sb()}if(2&t){var a=q.tc(6);q.Cb(7),q.lc("ngIf",e.esMovil),q.Cb(4),q.lc("ngModel",e.entidad.area_padre),q.Cb(1),q.lc("ngForOf",e.lstAreas),q.Cb(4),q.lc("ngModel",e.entidad.impresora),q.Cb(1),q.lc("ngForOf",e.impresoras),q.Cb(4),q.lc("ngModel",e.entidad.impresora_factura),q.Cb(1),q.lc("ngForOf",e.impresoras),q.Cb(2),q.Hc("Mesas en el \xe1rea: ",e.entidad.mesas.length,""),q.Cb(2),q.lc("disabled",!a.form.valid),q.Cb(2),q.lc("ngIf",e.entidad.area),q.Cb(1),q.lc("ngIf",e.entidad.area)}},directives:[x.a,x.h,x.c,f.r,f.l,f.m,d.m,y.b,y.e,F.a,f.k,f.n,d.l,f.p,w.a,k.b,f.c,$.m],styles:[".full-width[_ngcontent-%COMP%]{width:100%}"]}),vn),Tn=["listaAreas"],_n=((Sn=function(){function t(){var e=this;u(this,t),this.setArea=function(t){return e.area=t},this.refreshAreaList=function(){e.lstAreasComponent.loadEntidades()},this.area={area:null,sede:null,nombre:null,impresora:null,impresora_factura:null}}return b(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Sn)},Sn.\u0275cmp=q.Hb({type:Sn,selectors:[["app-area"]],viewQuery:function(t,e){var n;1&t&&q.Kc(Tn,1),2&t&&q.sc(n=q.cc())&&(e.lstAreasComponent=n.first)},decls:6,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getEntidadEv"],["listaAreas",""],[1,"col","m7","s12"],[3,"entidad","entidadSavedEv"]],template:function(t,e){1&t&&(q.Tb(0,"div",0),q.Tb(1,"div",1),q.Tb(2,"app-lista-area",2,3),q.bc("getEntidadEv",function(t){return e.setArea(t)}),q.Sb(),q.Sb(),q.Tb(4,"div",4),q.Tb(5,"app-form-area",5),q.bc("entidadSavedEv",function(){return e.refreshAreaList()}),q.Sb(),q.Sb(),q.Sb()),2&t&&(q.Cb(5),q.lc("entidad",e.area))},directives:[Ge,Cn],styles:[""]}),Sn),yn=i("u01r"),kn=i("M8s9"),xn=function(){return{standalone:!0}};function Dn(t,e){if(1&t){var n=q.Ub();q.Tb(0,"input",9),q.bc("input",function(t){return q.xc(n),q.fc().validateKey(t)})("ngModelChange",function(t){return q.xc(n),q.fc().telefonoPedido=t}),q.Sb()}if(2&t){var a=q.fc();q.lc("matKeyboard",a.keyboardLayout)("ngModel",a.telefonoPedido)("ngModelOptions",q.nc(3,xn))}}function Pn(t,e){if(1&t){var n=q.Ub();q.Tb(0,"input",10),q.bc("keypress",function(t){return q.xc(n),q.fc().validateKey(t)})("ngModelChange",function(t){return q.xc(n),q.fc().telefonoPedido=t}),q.Sb()}if(2&t){var a=q.fc();q.lc("ngModel",a.telefonoPedido)("ngModelOptions",q.nc(2,xn))}}function En(t,e){if(1&t){var n=q.Ub();q.Tb(0,"tr"),q.Tb(1,"td"),q.Fc(2),q.Sb(),q.Tb(3,"td",12),q.Tb(4,"button",13),q.bc("click",function(){q.xc(n);var t=e.$implicit;return q.fc(2).seleccionarCliente(t)}),q.Fc(5," Seleccionar "),q.Sb(),q.Sb(),q.Sb()}if(2&t){var a=e.$implicit;q.Cb(2),q.Gc(a.nombre)}}function Fn(t,e){if(1&t&&(q.Tb(0,"table"),q.Tb(1,"thead"),q.Tb(2,"tr"),q.Tb(3,"td"),q.Fc(4,"\xbfQui\xe9n est\xe1 llamando?"),q.Sb(),q.Ob(5,"td"),q.Sb(),q.Sb(),q.Tb(6,"tbody"),q.Dc(7,En,6,1,"tr",11),q.Sb(),q.Sb()),2&t){var n=q.fc();q.Cb(7),q.lc("ngForOf",n.clientes)}}var Mn,wn=((Mn=function(){function t(e,n,a,o,i,r){var c=this;u(this,t),this.dialogRef=e,this.snackBar=n,this.data=a,this.clienteSrvc=o,this.dialog=i,this.ls=r,this.telefonoPedido=null,this.clientes=[],this.keyboardLayout=Re.a.IDIOMA_TECLADO,this.esMovil=!1,this.validateKey=function(t){var e=String.fromCharCode(t.keyCode);return!!/[0-9]/.test(e)||(t.preventDefault(),!1)},this.cancelar=function(){return c.dialogRef.close()},this.buscar=function(){c.telefonoPedido=c.telefonoPedido.trim().toUpperCase().replace(/[^0-9]/gi,""),c.telefonoPedido&&c.telefonoPedido.length>=8?c.clienteSrvc.get({telefono:c.telefonoPedido}).subscribe(function(t){t&&t.length>0?c.clientes=t:c.dialog.open(yn.a,{width:"50%",disableClose:!0,data:{cliente:{cliente:null,nombre:null,nit:null,telefono:c.telefonoPedido}}}).afterClosed().subscribe(function(t){(null==t?void 0:t.cliente)&&c.dialogRef.close(t)})}):c.snackBar.open("Favor ingresar un n\xfamero de tel\xe9fono v\xe1lido.","Pedido",{duration:5e3})},this.seleccionarCliente=function(t){c.dialogRef.close(t)}}return b(t,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(Re.a.usrTokenVar).enmovil||!1}}]),t}()).\u0275fac=function(t){return new(t||Mn)(q.Nb(N.f),q.Nb(O.b),q.Nb(N.a),q.Nb(kn.a),q.Nb(N.b),q.Nb(He.a))},Mn.\u0275cmp=q.Hb({type:Mn,selectors:[["app-pide-telefono-dialog"]],decls:12,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"fullWidth"],["matInput","","type","text","placeholder","Tel\xe9fono","minlength","8","maxlength","25","required","",3,"matKeyboard","ngModel","ngModelOptions","input","ngModelChange",4,"ngIf"],["matInput","","type","text","placeholder","Tel\xe9fono","minlength","8","maxlength","25","required","",3,"ngModel","ngModelOptions","keypress","ngModelChange",4,"ngIf"],[4,"ngIf"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["matInput","","type","text","placeholder","Tel\xe9fono","minlength","8","maxlength","25","required","",3,"matKeyboard","ngModel","ngModelOptions","input","ngModelChange"],["matInput","","type","text","placeholder","Tel\xe9fono","minlength","8","maxlength","25","required","",3,"ngModel","ngModelOptions","keypress","ngModelChange"],[4,"ngFor","ngForOf"],["align","center",2,"width","15%"],["mat-raised-button","","type","button","color","accent",3,"click"]],template:function(t,e){1&t&&(q.Tb(0,"h1",0),q.Fc(1,"Tel\xe9fono"),q.Sb(),q.Tb(2,"div",1),q.Tb(3,"mat-form-field",2),q.Dc(4,Dn,1,4,"input",3),q.Dc(5,Pn,1,3,"input",4),q.Sb(),q.Dc(6,Fn,8,1,"table",5),q.Sb(),q.Tb(7,"div",6),q.Tb(8,"button",7),q.bc("click",function(){return e.cancelar()}),q.Fc(9," Cancelar "),q.Sb(),q.Tb(10,"button",8),q.bc("click",function(){return e.buscar()}),q.Fc(11," Buscar "),q.Sb(),q.Sb()),2&t&&(q.Cb(4),q.lc("ngIf",!e.esMovil),q.Cb(1),q.lc("ngIf",e.esMovil),q.Cb(1),q.lc("ngIf",e.clientes.length>0),q.Cb(4),q.lc("disabled",!(e.telefonoPedido&&e.telefonoPedido.length>=8)))},directives:[N.g,N.d,y.b,d.m,N.c,w.a,k.b,C.a,f.c,f.g,f.f,f.p,f.k,f.n,d.l],styles:[""]}),Mn);function On(t,e){1&t&&(q.Tb(0,"th",12),q.Fc(1,"No."),q.Sb())}function In(t,e){if(1&t&&(q.Tb(0,"td",13),q.Tb(1,"span"),q.Fc(2),q.Sb(),q.Sb()),2&t){var n=e.$implicit;q.Cb(2),q.Gc(n.numero)}}function Rn(t,e){1&t&&(q.Tb(0,"th",12),q.Fc(1,"Nombre"),q.Sb())}function An(t,e){if(1&t){var n=q.Ub();q.Tb(0,"input",19),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().$implicit.nombre=t}),q.Sb()}if(2&t){var a=q.fc().$implicit;q.lc("ngModel",a.nombre)}}function Un(t,e){if(1&t){var n=q.Ub();q.Tb(0,"input",20),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().$implicit.nombre=t}),q.Sb()}if(2&t){var a=q.fc().$implicit,o=q.fc();q.lc("matKeyboard",o.keyboardLayout)("ngModel",a.nombre)}}function Nn(t,e){if(1&t){var n=q.Ub();q.Tb(0,"td",13),q.Tb(1,"mat-form-field",14),q.Dc(2,An,1,1,"input",15),q.Dc(3,Un,1,2,"input",16),q.Tb(4,"button",17),q.bc("click",function(){q.xc(n);var t=e.$implicit;return q.fc().eliminarFila(t)}),q.Tb(5,"mat-icon",18),q.Fc(6,"close"),q.Sb(),q.Sb(),q.Sb(),q.Sb()}if(2&t){var a=q.fc();q.Cb(2),q.lc("ngIf",a.esMovil),q.Cb(1),q.lc("ngIf",!a.esMovil)}}function jn(t,e){1&t&&q.Ob(0,"tr",21)}function Bn(t,e){1&t&&q.Ob(0,"tr",22)}var Hn,Ln=((Hn=function(){function t(e,n,a,o){var i=this;u(this,t),this.dialogRef=e,this.data=n,this.snackBar=a,this.ls=o,this.displayedColumns=["numero","nombre"],this.esMovil=!1,this.terminar=function(){var t=i.todosConNombre(i.data.cuentas);t<0?i.dialogRef.close(i.data.cuentas):i.snackBar.open("Favor ingresar nombre a la cuenta #".concat(i.data.cuentas[t].cuenta,"..."),"Cuentas",{duration:5e3})},this.setTableDataSource=function(){return i.dataSource=new E.k(i.data.cuentas)},this.eliminarFila=function(t){var e=i.data.cuentas.findIndex(function(e){return+e.numero==+t.numero});e>0?(i.data.cuentas.splice(e,1),i.data.cuentas.map(function(t,e){return t.numero=e+1}),i.dataSource.data=i.data.cuentas):console.log("No se encuentra esta cuenta...")}}return b(t,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(Re.a.usrTokenVar).enmovil||!1,this.keyboardLayout=Re.a.IDIOMA_TECLADO,this.setTableDataSource();for(var t=0;t<+this.data.comensales-1;t++)this.agregarFila()}},{key:"todosConNombre",value:function(t){for(var e=0;e<t.length;e++)if(!t[e].nombre)return e;return-1}},{key:"agregarFila",value:function(){this.data.cuentas.push({cuenta:0,numero:this.data.cuentas.length+1,nombre:null,productos:[]}),this.dataSource.data=this.data.cuentas}}]),t}()).\u0275fac=function(t){return new(t||Hn)(q.Nb(N.f),q.Nb(N.a),q.Nb(O.b),q.Nb(He.a))},Hn.\u0275cmp=q.Hb({type:Hn,selectors:[["app-pide-datos-cuentas"]],decls:18,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-table","",1,"fullWidth",3,"dataSource"],["tblCuentas",""],["matColumnDef","numero"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-header-cell",""],["mat-cell",""],[1,"fullWidth"],["type","text","matInput","","name","nombre","required","",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","matInput","","name","nombre","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["type","button","mat-button","","matSuffix","","mat-icon-button","",3,"click"],[1,"iconFontSize"],["type","text","matInput","","name","nombre","required","",3,"ngModel","ngModelChange"],["type","text","matInput","","name","nombre","required","",3,"matKeyboard","ngModel","ngModelChange"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(q.Tb(0,"h1",0),q.Fc(1,"Ingreso de datos de cuentas"),q.Sb(),q.Tb(2,"div",1),q.Tb(3,"table",2,3),q.Rb(5,4),q.Dc(6,On,2,0,"th",5),q.Dc(7,In,3,1,"td",6),q.Qb(),q.Rb(8,7),q.Dc(9,Rn,2,0,"th",5),q.Dc(10,Nn,7,2,"td",6),q.Qb(),q.Dc(11,jn,1,0,"tr",8),q.Dc(12,Bn,1,0,"tr",9),q.Sb(),q.Sb(),q.Tb(13,"div",10),q.Tb(14,"button",11),q.bc("click",function(){return e.agregarFila()}),q.Fc(15," Agregar "),q.Sb(),q.Tb(16,"button",11),q.bc("click",function(){return e.terminar()}),q.Fc(17," Terminar "),q.Sb(),q.Sb()),2&t&&(q.Cb(3),q.lc("dataSource",e.dataSource),q.Cb(8),q.lc("matHeaderRowDef",e.displayedColumns),q.Cb(1),q.lc("matRowDefColumns",e.displayedColumns),q.Cb(2),q.lc("disabled",e.data.cuentas.length===+e.data.comensales),q.Cb(2),q.lc("disabled",e.data.cuentas.length!==+e.data.comensales))},directives:[N.g,N.d,E.j,E.c,E.e,E.b,E.g,E.i,N.c,w.a,E.d,E.a,y.b,d.m,y.f,_.a,k.b,f.c,f.p,f.k,f.n,C.a,E.f,E.h],styles:[".fullWidth[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:34pt!important}"]}),Hn),qn=i("K9lQ");function zn(t,e){if(1&t&&(q.Tb(0,"mat-option",13),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n.usuario.usuario),q.Cb(1),q.Ic(" ",n.usuario.nombres," ",n.usuario.apellidos," ")}}function $n(t,e){if(1&t){var n=q.Ub();q.Tb(0,"input",14),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().data.comensales=t}),q.Sb()}if(2&t){var a=q.fc();q.lc("matKeyboard",a.keyboardLayout)("ngModel",a.data.comensales)}}function Gn(t,e){if(1&t){var n=q.Ub();q.Tb(0,"input",15),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().data.comensales=t}),q.Sb()}if(2&t){var a=q.fc();q.lc("ngModel",a.data.comensales)}}var Wn,Vn,Kn=((Vn=function(){function t(e,n,a,o,i){var r=this;u(this,t),this.dialogRef=e,this.data=n,this.dialogDatosCuentas=a,this.usuarioSrvc=o,this.ls=i,this.lstMeseros=[],this.esMovil=!1,this.loadMeseros=function(){r.usuarioSrvc.getMeserosTurno().subscribe(function(t){t&&(r.lstMeseros=t)})},this.toNumber=function(t){return+t}}return b(t,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(Re.a.usrTokenVar).enmovil||!1,this.keyboardLayout=Re.a.IDIOMA_TECLADO,this.loadMeseros()}},{key:"pedirDatosDeCuentas",value:function(t){var e=this;this.dialogDatosCuentas.open(Ln,{width:"50%",disableClose:!0,data:{cuentas:t.cuentas,comensales:this.data.comensales}}).afterClosed().subscribe(function(n){t.cuentas=n,e.dialogRef.close(t)})}},{key:"terminar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?t.dividirCuentasPorSillas?this.pedirDatosDeCuentas(t):this.dialogRef.close(t):this.dialogRef.close()}}]),t}()).\u0275fac=function(t){return new(t||Vn)(q.Nb(N.f),q.Nb(N.a),q.Nb(N.b),q.Nb(qn.a),q.Nb(He.a))},Vn.\u0275cmp=q.Hb({type:Vn,selectors:[["app-abrir-mesa"]],decls:22,vars:8,consts:[["mat-dialog-title",""],["novalidate","",3,"ngSubmit"],["frmAbrirMesa","ngForm"],[1,"separatorMargin"],["name","mesero",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","matInput","","placeholder","# Comensales","name","comensales","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["type","text","matInput","","placeholder","# Comensales","name","comensales","required","",3,"ngModel","ngModelChange",4,"ngIf"],["name","esEvento",1,"separatorMargin",3,"ngModel","ngModelChange"],["name","dividirCuentasPorSillas",1,"separatorMargin",3,"ngModel","disabled","ngModelChange"],["align","end"],["mat-raised-button","","color","secondary",1,"btnAccion",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],[3,"value"],["type","text","matInput","","placeholder","# Comensales","name","comensales","required","",3,"matKeyboard","ngModel","ngModelChange"],["type","text","matInput","","placeholder","# Comensales","name","comensales","required","",3,"ngModel","ngModelChange"]],template:function(t,e){if(1&t){var n=q.Ub();q.Tb(0,"h1",0),q.Fc(1,"Abrir mesa"),q.Sb(),q.Tb(2,"mat-dialog-content"),q.Tb(3,"form",1,2),q.bc("ngSubmit",function(){return q.xc(n),q.tc(4).form.valid}),q.Tb(5,"mat-form-field",3),q.Tb(6,"mat-label"),q.Fc(7,"Mesero"),q.Sb(),q.Tb(8,"mat-select",4),q.bc("ngModelChange",function(t){return e.data.mesero=t}),q.Dc(9,zn,2,3,"mat-option",5),q.Sb(),q.Sb(),q.Tb(10,"mat-form-field",3),q.Dc(11,$n,1,2,"input",6),q.Dc(12,Gn,1,1,"input",7),q.Sb(),q.Tb(13,"mat-checkbox",8),q.bc("ngModelChange",function(t){return+(e.data.esEvento=t)}),q.Fc(14,"\xbfEs evento?"),q.Sb(),q.Tb(15,"mat-checkbox",9),q.bc("ngModelChange",function(t){return+(e.data.dividirCuentasPorSillas=t)}),q.Fc(16,"\xbfDividir cuentas?"),q.Sb(),q.Sb(),q.Sb(),q.Tb(17,"mat-dialog-actions",10),q.Tb(18,"button",11),q.bc("click",function(){return e.terminar()}),q.Fc(19," Cancelar "),q.Sb(),q.Tb(20,"button",12),q.bc("click",function(){return e.terminar(e.data)}),q.Fc(21," Abrir mesa "),q.Sb(),q.Sb()}if(2&t){var a=q.tc(4);q.Cb(8),q.lc("ngModel",e.data.mesero),q.Cb(1),q.lc("ngForOf",e.lstMeseros),q.Cb(2),q.lc("ngIf",!e.esMovil),q.Cb(1),q.lc("ngIf",e.esMovil),q.Cb(1),q.lc("ngModel",+e.data.esEvento),q.Cb(2),q.lc("ngModel",+e.data.dividirCuentasPorSillas)("disabled",+e.data.comensales<=1),q.Cb(5),q.lc("disabled",!a.form.valid)}},directives:[N.g,N.d,f.r,f.l,f.m,y.b,y.e,F.a,f.k,f.n,d.l,d.m,M.a,N.c,w.a,$.m,k.b,C.a,f.c,f.p],styles:[".contenido[_ngcontent-%COMP%]{height:50%!important}.separatorMargin[_ngcontent-%COMP%]{margin-right:8px}"]}),Vn),Qn=((Wn=function(){function t(e){u(this,t),this.http=e,this.moduleUrl="comanda",this.srvcErrHndl=new Ae.a}return b(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/buscar?").concat(je.stringify(t))).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"getComandaDeMesa",value:function(t){return this.http.get("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/get_comanda/").concat(t)).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(t){return this.http.post("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/guardar").concat(t.comanda?"/"+t.comanda:""),t).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"enviarPedido",value:function(t,e){return this.http.post("".concat(Re.a.urlAppRestaurante,"/callcenter/guardar_pedido/").concat(t),e).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"saveDetalleCombo",value:function(t,e,n){return this.http.post("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/guardar_detalle_combo/").concat(t,"/").concat(e),n).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"saveNotasGenerales",value:function(t){return this.http.post("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/guardar_notas_generales/").concat(t.comanda),t).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"saveNotasProducto",value:function(t){return this.http.post("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/guardar_notas_producto/").concat(t.detalle_comanda),t).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"saveDetalle",value:function(t,e,n){return this.http.post("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/guardar_detalle/").concat(t,"/").concat(e),n).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"setProductoImpreso",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.http.get("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/imprimir/").concat(t)).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"cerrarMesa",value:function(t){return this.http.post("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/cerrar_mesa/").concat(t),null).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"getComandasOnLIne",value:function(){return this.http.get("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/get_comanda")).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"validaPwdGerenteTurno",value:function(t){return this.http.post("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/validapwdgerenteturno"),{pwd:t}).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"cerrarEstacion",value:function(t){return this.http.get("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/cerrar_estacion/").concat(t)).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"getCuenta",value:function(t){return this.http.get("".concat(Re.a.urlAppRestaurante,"/cuenta/get_cuenta/").concat(t)).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"unificarCuentas",value:function(t,e){return this.http.get("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/unir_cuentas/").concat(t,"/").concat(e)).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"trasladarMesa",value:function(t,e,n){return this.http.get("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/trasladar_mesa/").concat(t,"/").concat(e,"/").concat(n)).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"getComandasCocina",value:function(){return this.http.get("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/get_comanda_cocina")).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"setComandaCocinada",value:function(t,e){return this.http.post("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/set_cocinado/").concat(t),e).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"distribuirCuentas",value:function(t){return this.http.post("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/distribuir_cuentas"),t).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"cancelarPedido",value:function(t,e){return this.http.post("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/anular_pedido/").concat(t),e).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"getComandasOnLine_Test",value:function(){return[{comanda:37,total:8,usuario:6,sede:1,estatus:1,turno:2,mesa:{mesa:1,area:{area:1,sede:1,area_padre:null,nombre:"Bar"},numero:1,posx:23.8667,posy:18.8333,tamanio:72,estatus:2},cuentas:[{cuenta:31,comanda:37,nombre:"\xdanica",numero:1,propina_monto:.8,propina_porcentaje:10,cerrada:1,productos:[{detalle_cuenta:75,cuenta_cuenta:31,detalle_comanda:79,comanda:37,articulo:{articulo:1,categoria_grupo:21,presentacion:null,descripcion:"Original",precio:8,bien_servicio:"B",existencias:969,impresora:{impresora:1,sede:1,nombre:"EPSON L120 Series",direccion_ip:null,ubicacion:null,bluetooth:0}},cantidad:1,precio:8,impreso:1,total:8,notas:"",numero_cuenta:1}]}]},{comanda:45,total:76,usuario:2,sede:1,estatus:1,turno:2,mesa:{mesa:3,area:{area:1,sede:1,area_padre:null,nombre:"Bar"},numero:3,posx:11.0667,posy:41.5,tamanio:72,estatus:2},cuentas:[{cuenta:39,comanda:45,nombre:"uno",numero:1,propina_monto:.8,propina_porcentaje:10,cerrada:1,productos:[{detalle_cuenta:84,cuenta_cuenta:39,detalle_comanda:88,comanda:45,articulo:{articulo:1,categoria_grupo:21,presentacion:null,descripcion:"Original",precio:8,bien_servicio:"B",existencias:969,impresora:{impresora:1,sede:1,nombre:"EPSON L120 Series",direccion_ip:null,ubicacion:null,bluetooth:0}},cantidad:1,precio:8,impreso:1,total:8,notas:"",numero_cuenta:1},{detalle_cuenta:85,cuenta_cuenta:40,detalle_comanda:89,comanda:45,articulo:{articulo:2,categoria_grupo:21,presentacion:null,descripcion:"Zero",precio:8,bien_servicio:"B",existencias:984,impresora:{impresora:1,sede:1,nombre:"EPSON L120 Series",direccion_ip:null,ubicacion:null,bluetooth:0}},cantidad:1,precio:8,impreso:1,total:8,notas:"",numero_cuenta:1},{detalle_cuenta:86,cuenta_cuenta:40,detalle_comanda:90,comanda:45,articulo:{articulo:6,categoria_grupo:23,presentacion:null,descripcion:"Fettuccine",precio:60,bien_servicio:"B",existencias:995,impresora:{impresora:2,sede:1,nombre:"EPSON L120 Series",direccion_ip:null,ubicacion:null,bluetooth:0}},cantidad:1,precio:60,impreso:1,total:60,notas:"",numero_cuenta:1}]}]}]}}]),t}()).\u0275fac=function(t){return new(t||Wn)(q.Xb(m.b))},Wn.\u0275prov=q.Jb({token:Wn,factory:Wn.\u0275fac,providedIn:"root"}),Wn);function Xn(t,e){if(1&t&&(q.Tb(0,"mat-option",10),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n)("disabled",1==+n.cerrada),q.Cb(1),q.Hc(" ",n.nombre," ")}}function Jn(t,e){if(1&t&&(q.Tb(0,"mat-option",10),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n)("disabled",1==+n.cerrada),q.Cb(1),q.Hc(" ",n.nombre," ")}}var Yn,Zn=((Yn=function(){function t(e,n,a,o){u(this,t),this.dialogRef=e,this.comandaSrvc=n,this.snackBar=a,this.data=o}return b(t,[{key:"ngOnInit",value:function(){}},{key:"cancelar",value:function(){this.dialogRef.close(!1)}},{key:"unirCuentas",value:function(t,e){var n=this;this.comandaSrvc.unificarCuentas(t.cuenta,e.cuenta).subscribe(function(t){t.exito?(n.snackBar.open(t.mensaje,"Cuentas",{duration:3e3}),n.dialogRef.close(!0)):n.snackBar.open("ERROR:".concat(t.mensaje),"Cuentas",{duration:7e3})})}},{key:"unirTodas",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Yn)(q.Nb(N.f),q.Nb(Qn),q.Nb(O.b),q.Nb(N.a))},Yn.\u0275cmp=q.Hb({type:Yn,selectors:[["app-unir-cuenta"]],decls:20,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate",""],["frmUnirCuenta","ngForm"],["name","cuentaDe","required","",3,"ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],["name","cuentaA","required","",3,"ngModel","ngModelChange"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[3,"value","disabled"]],template:function(t,e){if(1&t&&(q.Tb(0,"h1",0),q.Fc(1,"Unir cuentas"),q.Sb(),q.Tb(2,"div",1),q.Tb(3,"form",2,3),q.Tb(5,"mat-form-field"),q.Tb(6,"mat-label"),q.Fc(7,"Unir cuenta de"),q.Sb(),q.Tb(8,"mat-select",4),q.bc("ngModelChange",function(t){return e.cuentaDe=t}),q.Dc(9,Xn,2,3,"mat-option",5),q.Sb(),q.Sb(),q.Tb(10,"mat-form-field"),q.Tb(11,"mat-label"),q.Fc(12,"con la cuenta de"),q.Sb(),q.Tb(13,"mat-select",6),q.bc("ngModelChange",function(t){return e.cuentaA=t}),q.Dc(14,Jn,2,3,"mat-option",5),q.Sb(),q.Sb(),q.Sb(),q.Sb(),q.Tb(15,"div",7),q.Tb(16,"button",8),q.bc("click",function(){return e.cancelar()}),q.Fc(17," Cancelar "),q.Sb(),q.Tb(18,"button",9),q.bc("click",function(){return e.unirCuentas(e.cuentaDe,e.cuentaA)}),q.Fc(19," Unir cuentas "),q.Sb(),q.Sb()),2&t){var n=q.tc(4);q.Cb(8),q.lc("ngModel",e.cuentaDe),q.Cb(1),q.lc("ngForOf",e.data.mesaEnUso.cuentas),q.Cb(4),q.lc("ngModel",e.cuentaA),q.Cb(1),q.lc("ngForOf",e.data.mesaEnUso.cuentas),q.Cb(4),q.lc("disabled",!n.form.valid||+e.cuentaDe.numero==+e.cuentaA.numero)}},directives:[N.g,N.d,f.r,f.l,f.m,y.b,y.e,F.a,f.p,f.k,f.n,d.l,N.c,w.a,$.m],styles:[""]}),Yn);function ta(t,e){if(1&t&&(q.Tb(0,"mat-option",10),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n),q.Cb(1),q.Ic(" ",n.area.nombre," - ",n.etiqueta||n.numero," ")}}var ea,na,aa,oa=((ea=function(){function t(e,n,a,o,i){var r=this;u(this,t),this.dialogRef=e,this.snackBar=n,this.mesaSrvc=a,this.comandaSrvc=o,this.data=i,this.mesasDisponibles=[],this.loadMesasDisponibles=function(){return r.mesaSrvc.getDisponibles().subscribe(function(t){return r.mesasDisponibles=t})},this.cancelar=function(){return r.dialogRef.close(!1)},this.trasladar=function(){r.comandaSrvc.trasladarMesa(+r.data.mesaEnUso.comanda,+r.data.mesaEnUso.mesa.mesa,+r.destino.mesa).subscribe(function(t){t.exito?(r.snackBar.open(t.mensaje,"Traslado de mesa",{duration:3e3}),r.dialogRef.close(!0)):r.snackBar.open("ERROR:".concat(t.mensaje),"Traslado de mesa",{duration:7e3})})}}return b(t,[{key:"ngOnInit",value:function(){this.loadMesasDisponibles()}}]),t}()).\u0275fac=function(t){return new(t||ea)(q.Nb(N.f),q.Nb(O.b),q.Nb(We),q.Nb(Qn),q.Nb(N.a))},ea.\u0275cmp=q.Hb({type:ea,selectors:[["app-traslado-mesa"]],decls:15,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate",""],["frmTrasladarMesa","ngForm"],[1,"fullWidth"],["name","destino","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[3,"value"]],template:function(t,e){if(1&t&&(q.Tb(0,"h1",0),q.Fc(1,"Trasladar a otra mesa"),q.Sb(),q.Tb(2,"div",1),q.Tb(3,"form",2,3),q.Tb(5,"mat-form-field",4),q.Tb(6,"mat-label"),q.Fc(7,"Trasladar a mesa:"),q.Sb(),q.Tb(8,"mat-select",5),q.bc("ngModelChange",function(t){return e.destino=t}),q.Dc(9,ta,2,3,"mat-option",6),q.Sb(),q.Sb(),q.Sb(),q.Sb(),q.Tb(10,"div",7),q.Tb(11,"button",8),q.bc("click",function(){return e.cancelar()}),q.Fc(12," Cancelar "),q.Sb(),q.Tb(13,"button",9),q.bc("click",function(){return e.trasladar()}),q.Fc(14," Trasladar "),q.Sb(),q.Sb()),2&t){var n=q.tc(4);q.Cb(8),q.lc("ngModel",e.destino),q.Cb(1),q.lc("ngForOf",e.mesasDisponibles),q.Cb(4),q.lc("disabled",!n.form.valid)}},directives:[N.g,N.d,f.r,f.l,f.m,y.b,y.e,F.a,f.p,f.k,f.n,d.l,N.c,w.a,$.m],styles:[""]}),ea),ia=i("wd/R"),ra=function t(e,n,a){u(this,t),this.tipo=e,this.subtitulo=n,this.etiquetaAceptar=a},ca=((na=function(){function t(e,n,a){var o=this;u(this,t),this.comandaSrvc=e,this.dialogRef=n,this.data=a,this.pwd=void 0,this.cancelar=function(){return o.dialogRef.close()},this.terminar=function(){switch(+o.data.tipo){case 1:o.validarPwdGerenteTurno()}},this.validarPwdGerenteTurno=function(){o.comandaSrvc.validaPwdGerenteTurno(o.pwd).subscribe(function(t){o.dialogRef.close(!!t.exito&&t.esgerente)})}}return b(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||na)(q.Nb(Qn),q.Nb(N.f),q.Nb(N.a))},na.\u0275cmp=q.Hb({type:na,selectors:[["app-check-password"]],decls:14,vars:4,consts:[["mat-dialog-title",""],["novalidate","",3,"ngSubmit"],["frmValidaPwd","ngForm"],[1,"fullWidth"],["type","password","matInput","","placeholder","Contrase\xf1a","name","pwd","required","",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","color","secondary",1,"btnAccion",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"]],template:function(t,e){if(1&t){var n=q.Ub();q.Tb(0,"h1",0),q.Fc(1," Validar contrase\xf1a"),q.Ob(2,"br"),q.Fc(3),q.Sb(),q.Tb(4,"mat-dialog-content"),q.Tb(5,"form",1,2),q.bc("ngSubmit",function(){return q.xc(n),q.tc(6).form.valid}),q.Tb(7,"mat-form-field",3),q.Tb(8,"input",4),q.bc("ngModelChange",function(t){return e.pwd=t}),q.Sb(),q.Sb(),q.Sb(),q.Sb(),q.Tb(9,"mat-dialog-actions",5),q.Tb(10,"button",6),q.bc("click",function(){return e.cancelar()}),q.Fc(11," Cancelar "),q.Sb(),q.Tb(12,"button",7),q.bc("click",function(){return e.terminar()}),q.Fc(13),q.Sb(),q.Sb()}if(2&t){var a=q.tc(6);q.Cb(3),q.Hc(" ",e.data.subtitulo||"Gerente de turno","\n"),q.Cb(5),q.lc("ngModel",e.pwd),q.Cb(4),q.lc("disabled",!a.form.valid),q.Cb(1),q.Hc(" ",e.data.etiquetaAceptar||"Validar"," ")}},directives:[N.g,N.d,f.r,f.l,f.m,y.b,k.b,f.c,f.p,f.k,f.n,N.c,w.a],styles:[""]}),na),sa=i("KZK3"),la=((aa=function(){function t(e){u(this,t),this.http=e,this.moduleUrl="cuenta",this.srvcErrHndl=new Ae.a}return b(t,[{key:"save",value:function(t){return this.http.post("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/cobrar/").concat(t.cuenta),t).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||aa)(q.Xb(m.b))},aa.\u0275prov=q.Jb({token:aa,factory:aa.\u0275fac,providedIn:"root"}),aa),ua=i("KFbY"),da=i("7JkF"),ba=i("IHy4"),ma=i("FjVI"),fa=i("TOq3");function pa(t,e){if(1&t&&(q.Tb(0,"small"),q.Fc(1),q.Sb()),2&t){var n=q.fc();q.Cb(1),q.Hc(" - Factura a nombre de ",n.clienteSelected.nombre," ")}}function ha(t,e){if(1&t&&(q.Tb(0,"tr"),q.Tb(1,"td"),q.Fc(2),q.Sb(),q.Tb(3,"td",25),q.Fc(4),q.gc(5,"number"),q.Sb(),q.Sb()),2&t){var n=e.$implicit;q.Cb(2),q.Ic("",n.cantidad,"\xa0",n.nombre||n.articulo.descripcion,""),q.Cb(2),q.Gc(q.ic(5,3,n.cantidad*n.precio+n.monto_extra,"1.2-2"))}}function ga(t,e){if(1&t&&(q.Tb(0,"mat-option",38),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n.forma_pago),q.Cb(1),q.Hc(" ",n.descripcion," ")}}function va(t,e){if(1&t){var n=q.Ub();q.Tb(0,"input",39),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().formaPago.monto=t}),q.Sb()}if(2&t){var a=q.fc();q.lc("matKeyboard",a.keyboardLayout)("ngModel",a.formaPago.monto)}}function Sa(t,e){if(1&t){var n=q.Ub();q.Tb(0,"input",40),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().formaPago.monto=t}),q.Sb()}if(2&t){var a=q.fc();q.lc("ngModel",a.formaPago.monto)}}function Ca(t,e){if(1&t){var n=q.Ub();q.Tb(0,"input",41),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().formaPago.propina=t}),q.Sb()}if(2&t){var a=q.fc();q.lc("matKeyboard",a.keyboardLayout)("ngModel",a.formaPago.propina)}}function Ta(t,e){if(1&t){var n=q.Ub();q.Tb(0,"input",42),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().formaPago.propina=t}),q.Sb()}if(2&t){var a=q.fc();q.lc("ngModel",a.formaPago.propina)}}function _a(t,e){if(1&t){var n=q.Ub();q.Tb(0,"input",45),q.bc("ngModelChange",function(t){return q.xc(n),q.fc(2).formaPago.documento=t}),q.Sb()}if(2&t){var a=q.fc(2);q.lc("matKeyboard",a.keyboardLayout)("ngModel",a.formaPago.documento)("required",a.pideDocumento)}}function ya(t,e){if(1&t){var n=q.Ub();q.Tb(0,"input",46),q.bc("ngModelChange",function(t){return q.xc(n),q.fc(2).formaPago.documento=t}),q.Sb()}if(2&t){var a=q.fc(2);q.lc("ngModel",a.formaPago.documento)("required",a.pideDocumento)}}function ka(t,e){if(1&t&&(q.Tb(0,"mat-form-field",13),q.Dc(1,_a,1,3,"input",43),q.Dc(2,ya,1,2,"input",44),q.Sb()),2&t){var n=q.fc();q.Cb(1),q.lc("ngIf",!n.esMovil),q.Cb(1),q.lc("ngIf",n.esMovil)}}function xa(t,e){if(1&t){var n=q.Ub();q.Tb(0,"tr"),q.Tb(1,"td"),q.Fc(2),q.Sb(),q.Tb(3,"td",25),q.Fc(4),q.gc(5,"number"),q.Sb(),q.Tb(6,"td",25),q.Fc(7),q.gc(8,"number"),q.Sb(),q.Tb(9,"td",47),q.Tb(10,"button",48),q.bc("click",function(){q.xc(n);var t=e.index;return q.fc().delFormaPago(t)}),q.Tb(11,"mat-icon"),q.Fc(12,"delete_forever"),q.Sb(),q.Sb(),q.Sb(),q.Sb()}if(2&t){var a=e.$implicit;q.Cb(2),q.Gc(a.forma_pago.descripcion),q.Cb(2),q.Gc(q.ic(5,3,a.monto,"1.2-2")),q.Cb(3),q.Gc(q.ic(8,6,a.propina,"1.2-2"))}}function Da(t,e){if(1&t&&(q.Tb(0,"mat-option",38),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n.sede),q.Cb(1),q.Hc(" ",n.nombre," ")}}function Pa(t,e){if(1&t){var n=q.Ub();q.Tb(0,"table",29),q.Tb(1,"caption"),q.Tb(2,"strong"),q.Fc(3,"Datos de env\xedo"),q.Sb(),q.Sb(),q.Tb(4,"tbody"),q.Tb(5,"tr"),q.Tb(6,"td"),q.Tb(7,"mat-form-field",13),q.Tb(8,"mat-label"),q.Fc(9,"Atiende:"),q.Sb(),q.Tb(10,"mat-select",49),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().datosPedido.sede=t}),q.Dc(11,Da,2,2,"mat-option",15),q.Sb(),q.Sb(),q.Sb(),q.Tb(12,"td"),q.Tb(13,"mat-form-field",13),q.Tb(14,"input",50),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().datosPedido.direccion_entrega=t}),q.Sb(),q.Sb(),q.Sb(),q.Sb(),q.Tb(15,"tr"),q.Tb(16,"td"),q.Tb(17,"mat-form-field",13),q.Tb(18,"input",51),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().datosPedido.nombre=t}),q.Sb(),q.Sb(),q.Sb(),q.Tb(19,"td"),q.Tb(20,"mat-form-field",13),q.Tb(21,"input",52),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().datosPedido.telefono=t}),q.Sb(),q.Sb(),q.Sb(),q.Sb(),q.Sb(),q.Sb()}if(2&t){var a=q.fc();q.Cb(10),q.lc("ngModel",a.datosPedido.sede),q.Cb(1),q.lc("ngForOf",a.sedes),q.Cb(3),q.lc("ngModel",a.datosPedido.direccion_entrega),q.Cb(4),q.lc("ngModel",a.datosPedido.nombre),q.Cb(3),q.lc("ngModel",a.datosPedido.telefono)}}function Ea(t,e){if(1&t&&q.Ob(0,"app-cargando",53),2&t){var n=q.fc();q.lc("configuracion",n.cargandoConf)}}function Fa(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",36),q.bc("click",function(){return q.xc(n),q.fc().cobrar()}),q.Fc(1,"Facturar"),q.Sb()}if(2&t){var a=q.fc();q.lc("disabled",0==a.formasPagoDeCuenta.length||+a.inputData.saldo>0||!a.factReq.cliente||a.facturando)}}function Ma(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",36),q.bc("click",function(){return q.xc(n),q.fc().cobrar()}),q.Fc(1," Enviar "),q.Sb()}if(2&t){var a=q.fc();q.lc("disabled",0==a.formasPagoDeCuenta.length||+a.inputData.saldo>0||!a.factReq.cliente||a.facturando||!a.datosPedido.sede)}}var wa,Oa=function(t,e,n){return{"saldo-pendiente":t,"saldo-exacto":e,"saldo-extra":n}},Ia=((wa=function(){function e(n,a,o,i,r,c,s,l,d,b,m){var f=this;u(this,e),this.dialog=n,this.dialogRef=a,this.data=o,this.snackBar=i,this.formaPagoSrvc=r,this.cobroSrvc=c,this.facturaSrvc=s,this.ls=l,this.socket=d,this.sedeSrvc=b,this.comandaSrvc=m,this.inputData={},this.lstFormasPago=[],this.formaPago={},this.formasPagoDeCuenta=[],this.esMovil=!1,this.facturando=!1,this.cargandoConf={w:75,h:75},this.pideDocumento=!1,this.sedes=[],this.datosPedido={sede:null,direccion_entrega:null,telefono:null,nombre:null,cliente:null},this.resetFactReq=function(){f.factReq={cuentas:[],factura_serie:1,cliente:null,fecha_factura:ia().format(Re.a.dbDateFormat),moneda:1}},this.processData=function(){f.data?f.inputData=f.data:f.data=f.inputData,f.inputData.totalDeCuenta=0,f.inputData.productosACobrar.forEach(function(t){f.inputData.totalDeCuenta+=t.precio*t.cantidad+t.monto_extra}),f.calculaPropina(),f.actualizaSaldo(),f.formaPago.monto=parseFloat(f.inputData.saldo).toFixed(2),f.inputData.clientePedido&&f.setClienteFacturar(f.inputData.clientePedido)},this.loadSedes=function(){f.sedeSrvc.get().subscribe(function(t){t&&(f.sedes=t)})},this.calculaPropina=function(){f.inputData.montoPropina=parseFloat((f.inputData.porcentajePropina*f.inputData.totalDeCuenta/100).toFixed(2)),f.actualizaSaldo()},this.loadFormasPago=function(){f.formaPagoSrvc.get({activo:1}).subscribe(function(t){t&&t.length>0&&(f.lstFormasPago=t)})},this.addFormaPago=function(){var t=f.lstFormasPago.filter(function(t){return+t.forma_pago==+f.formaPago.forma_pago})[0];1==+t.pedirautorizacion?f.dialog.open(ca,{width:"40%",disableClose:!0,data:new ra(1)}).afterClosed().subscribe(function(e){e?f.agregaFormaPago(t):f.snackBar.open("La contrase\xf1a no es correcta","Formas de pago",{duration:5e3})}):f.agregaFormaPago(t)},this.agregaFormaPago=function(t){f.formasPagoDeCuenta.push({forma_pago:t,monto:parseFloat(f.formaPago.monto).toFixed(2),propina:f.formaPago.propina||0,documento:f.formaPago.documento||null,comision_monto:+f.formaPago.monto*+t.comision_porcentaje/100}),f.actualizaSaldo(),f.pideDocumento=!1},this.delFormaPago=function(t){f.formasPagoDeCuenta.splice(t,1),f.actualizaSaldo()},this.actualizaSaldo=function(){var t=0;f.formasPagoDeCuenta.forEach(function(e){return t+=+e.monto}),f.inputData.saldo=(+f.inputData.totalDeCuenta-t).toFixed(2),f.formaPago={monto:f.inputData.saldo}},this.cancelar=function(){return f.dialogRef.close()},this.setClienteFacturar=function(t){f.clienteSelected=t,f.factReq.cliente=+t.cliente,1==+f.data.mesaenuso.mesa.escallcenter&&(f.datosPedido.nombre=t.nombre,f.datosPedido.direccion_entrega=t.direccion,f.datosPedido.telefono=t.telefono)},this.cobrar=function(){f.facturando=!0;var e,n={cuenta:f.inputData.idcuenta,forma_pago:[],total:f.inputData.totalDeCuenta+f.inputData.montoPropina,propina_monto:f.inputData.montoPropina,propina_porcentaje:f.inputData.porcentajePropina,comision_monto:0},a=0,o=t(f.formasPagoDeCuenta);try{for(o.s();!(e=o.n()).done;){var i=e.value;a+=i.comision_monto||0,n.forma_pago.push({forma_pago:+i.forma_pago.forma_pago,monto:+i.monto+ +i.comision_monto,propina:i.propina||0,documento:i.documento,comision_monto:i.comision_monto})}}catch(r){o.e(r)}finally{o.f()}n.comision_monto=a,n.total+=a,1!=+f.data.mesaenuso.mesa.escallcenter?(f.factReq.cuentas.push({cuenta:+f.inputData.idcuenta}),f.cobroSrvc.save(n).subscribe(function(t){t.exito&&!t.facturada?(f.snackBar.open("Cobro","".concat(t.mensaje),{duration:3e3}),t.facturar?f.facturaSrvc.facturar(f.factReq).subscribe(function(e){e.exito?f.dialog.open(Ze.a,{maxWidth:"400px",data:new Ze.b("Imprimir factura","\xbfDesea imprimir la factura?","S\xed","No")}).afterClosed().subscribe(function(n){n&&f.printFactura(e.factura),f.resetFactReq(),f.snackBar.open("Factura","".concat(e.mensaje),{duration:3e3}),f.facturando=!1,f.dialogRef.close(t.cuenta),f.socket.emit("refrescar:mesa",{mesaenuso:f.data.mesaenuso})}):(f.facturando=!1,f.snackBar.open("Factura","ERROR: ".concat(t.mensaje),{duration:7e3}),f.socket.emit("refrescar:mesa",{mesaenuso:f.data.mesaenuso}),f.dialogRef.close(t.cuenta))}):(f.socket.emit("refrescar:mesa",{mesaenuso:f.data.mesaenuso}),f.dialogRef.close(t.cuenta))):(f.facturando=!1,f.snackBar.open("Cobro","ERROR: ".concat(t.mensaje),{duration:7e3}),f.socket.emit("refrescar:mesa",{mesaenuso:f.data.mesaenuso}),f.dialogRef.close("closePanel"))})):f.enviarPedido(n)},this.enviarPedido=function(t){f.datosPedido.cliente={nombre:f.clienteSelected.nombre,apellidos:"",correo:f.clienteSelected.correo,telefono:f.datosPedido.telefono,nit:f.clienteSelected.nit,direccion:f.datosPedido.direccion_entrega};var e={cobro:t,pedido:f.datosPedido,factura:{cuentas:[{cuenta:t.cuenta}],factura_serie:1,cliente:f.clienteSelected.cliente,fecha_factura:ia().format(Re.a.dbDateFormat),moneda:1}};f.comandaSrvc.enviarPedido(+f.data.mesaenuso.comanda,e).subscribe(function(t){t.exito?(f.snackBar.open("Pedido","#".concat(t.pedido,". ").concat(t.mensaje),{duration:3e3}),f.dialogRef.close("closePanel")):f.snackBar.open("Pedido","ERROR: ".concat(t.mensaje),{duration:7e3}),f.facturando=!1,f.socket.emit("refrescar:mesa",{mesaenuso:f.data.mesaenuso})})},this.procesaDetalleFactura=function(t){var e=[];return t.forEach(function(t){return e.push({Cantidad:+t.cantidad,Descripcion:t.articulo.descripcion,Total:+t.total})}),e},this.getTotalDetalle=function(t){var e=0;return t.forEach(function(t){return e+=+t.total}),e},this.getTotalImpuestosAdicionales=function(t){var e=0;return t.forEach(function(t){return e+=+t.total}),e},this.printFactura=function(t){f.facturaSrvc.imprimir(+t.factura).subscribe(function(t){if(t.factura){var e={NombreEmpresa:t.factura.empresa.nombre,NitEmpresa:t.factura.empresa.nit,SedeEmpresa:t.factura.sedeFactura.nombre,DireccionEmpresa:t.factura.empresa.direccion,Fecha:ia(t.factura.fecha_factura).format(Re.a.dateFormat),Nit:t.factura.receptor.nit,Nombre:t.factura.receptor.nombre,Direccion:t.factura.receptor.direccion,Serie:t.factura.serie_factura,Numero:t.factura.numero_factura,Total:f.getTotalDetalle(t.factura.detalle)+f.getTotalImpuestosAdicionales(t.factura.impuestos_adicionales||[]),NoAutorizacion:t.factura.fel_uuid,NombreCertificador:t.factura.certificador_fel.nombre,NitCertificador:t.factura.certificador_fel.nit,FechaDeAutorizacion:t.factura.fecha_autorizacion,NoOrdenEnLinea:"",FormaDePago:"",DetalleFactura:f.procesaDetalleFactura(t.factura.detalle),Impresora:f.data.impresora,ImpuestosAdicionales:t.factura.impuestos_adicionales||[]};f.data.impresora?0==+f.data.impresora.bluetooth?f.socket.emit("print:factura","".concat(JSON.stringify(e))):(e.Fecha=ia(t.factura.fecha_factura).format(Re.a.dateFormatBT),f.printToBT(JSON.stringify(e))):f.socket.emit("print:factura","".concat(JSON.stringify(e))),f.snackBar.open("Imprimiendo factura ".concat(t.factura.serie_factura,"-").concat(t.factura.numero_factura),"Impresi\xf3n",{duration:3e3})}else f.snackBar.open("ERROR: ".concat(t.mensaje),"Impresi\xf3n",{duration:7e3})})},this.printToBT=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=window.open("com.restouch.impresion://impresion/".concat(t),"PrntBT","height=200,width=200,menubar=no,location=no,resizable=no,scrollbars=no,status=no");setTimeout(function(){return e.close()},3e3)},this.onSelectionChangeFP=function(t){var e=f.lstFormasPago.findIndex(function(e){return+e.forma_pago==+t.value});e>-1&&(f.pideDocumento=1==+f.lstFormasPago[e].pedirdocumento)}}return b(e,[{key:"ngOnInit",value:function(){var t=this;this.esMovil=this.ls.get(Re.a.usrTokenVar).enmovil||!1,this.keyboardLayout=Re.a.IDIOMA_TECLADO,this.resetFactReq(),this.processData(),this.loadFormasPago(),this.ls.get(Re.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(Re.a.usrTokenVar).sede_uuid),this.socket.on("reconnect",function(){return t.socket.emit("joinRestaurant",t.ls.get(Re.a.usrTokenVar).sede_uuid)})),this.loadSedes()}},{key:"calculaPorcentajePropina",value:function(){this.inputData.porcentajePropina=parseFloat((100*this.inputData.montoPropina/this.inputData.totalDeCuenta).toFixed(2)),this.actualizaSaldo()}}]),e}()).\u0275fac=function(t){return new(t||wa)(q.Nb(N.b),q.Nb(N.f),q.Nb(N.a),q.Nb(O.b),q.Nb(sa.a),q.Nb(la),q.Nb(ua.a),q.Nb(He.a),q.Nb(da.a),q.Nb(ba.a),q.Nb(Qn))},wa.\u0275cmp=q.Hb({type:wa,selectors:[["app-cobrar-pedido"]],inputs:{inputData:"inputData"},decls:67,vars:31,consts:[["mat-dialog-title",""],[4,"ngIf"],["mat-dialog-content","",2,"height","650px"],[1,"row"],[1,"col","m5","s12","mat-elevation-z4","colHeight",2,"overflow-y","auto"],[3,"showAddButton","getClienteEv"],["lstClientes",""],[1,"col","m3","s12","mat-elevation-z4","colHeight",2,"overflow-y","auto"],[1,"table","table-sm","table-borderless","table-striped"],[4,"ngFor","ngForOf"],[1,"col","m4","s12","mat-elevation-z4","colHeight",2,"overflow-y","auto"],["novalidate",""],["frmFormasPago","ngForm"],[1,"fullWidth"],["name","forma_pago","cdkFocusInitial","","required","",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","monto","name","monto","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["matInput","","placeholder","monto","name","monto","required","",3,"ngModel","ngModelChange",4,"ngIf"],["matInput","","placeholder","Propina","name","propina",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["matInput","","placeholder","Propina","name","propina",3,"ngModel","ngModelChange",4,"ngIf"],["class","fullWidth",4,"ngIf"],["align","end"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[1,"table","table-sm"],[1,"text-left"],[1,"text-right"],[1,"col","m8","s8"],["class","table table-sm table-borderless",4,"ngIf"],[1,"col","m4","s4"],[1,"table","table-sm","table-borderless"],[1,"text-right","font-weight-bold"],[1,"text-right","font-weight-bold","totalCuenta",2,"max-width","15%"],[1,"text-right","font-weight-bold",2,"max-width","15%"],[3,"ngClass"],["mat-dialog-actions","","align","end"],[3,"configuracion",4,"ngIf"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-raised-button","","color","accent",3,"disabled","click",4,"ngIf"],[3,"value"],["matInput","","placeholder","monto","name","monto","required","",3,"matKeyboard","ngModel","ngModelChange"],["matInput","","placeholder","monto","name","monto","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Propina","name","propina",3,"matKeyboard","ngModel","ngModelChange"],["matInput","","placeholder","Propina","name","propina",3,"ngModel","ngModelChange"],["matInput","","placeholder","Documento","name","documento",3,"matKeyboard","ngModel","required","ngModelChange",4,"ngIf"],["matInput","","placeholder","Documento","name","documento",3,"ngModel","required","ngModelChange",4,"ngIf"],["matInput","","placeholder","Documento","name","documento",3,"matKeyboard","ngModel","required","ngModelChange"],["matInput","","placeholder","Documento","name","documento",3,"ngModel","required","ngModelChange"],[1,"text-center"],["mat-icon-button","","type","button","color","warn",3,"click"],["name","sede","required","",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","Direcci\xf3n de entrega","name","direccion_entrega","maxlength","1000","required","",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","Nombre","name","nombre","maxlength","1000",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","Tel\xe9fono","name","telefono","maxlength","1000",3,"ngModel","ngModelChange"],[3,"configuracion"]],template:function(t,e){if(1&t&&(q.Tb(0,"h1",0),q.Fc(1),q.Dc(2,pa,2,1,"small",1),q.Sb(),q.Tb(3,"div",2),q.Tb(4,"div",3),q.Tb(5,"div",4),q.Tb(6,"app-lista-cliente",5,6),q.bc("getClienteEv",function(t){return e.setClienteFacturar(t)}),q.Sb(),q.Sb(),q.Tb(8,"div",7),q.Tb(9,"table",8),q.Tb(10,"tbody"),q.Dc(11,ha,6,6,"tr",9),q.Sb(),q.Sb(),q.Sb(),q.Tb(12,"div",10),q.Tb(13,"form",11,12),q.Tb(15,"mat-form-field",13),q.Tb(16,"mat-label"),q.Fc(17,"Forma de pago"),q.Sb(),q.Tb(18,"mat-select",14),q.bc("ngModelChange",function(t){return e.formaPago.forma_pago=t})("selectionChange",function(t){return e.onSelectionChangeFP(t)}),q.Dc(19,ga,2,2,"mat-option",15),q.Sb(),q.Sb(),q.Tb(20,"mat-form-field",13),q.Dc(21,va,1,2,"input",16),q.Dc(22,Sa,1,1,"input",17),q.Sb(),q.Tb(23,"mat-form-field",13),q.Dc(24,Ca,1,2,"input",18),q.Dc(25,Ta,1,1,"input",19),q.Sb(),q.Dc(26,ka,3,2,"mat-form-field",20),q.Tb(27,"div",21),q.Tb(28,"button",22),q.bc("click",function(){return e.addFormaPago()}),q.Fc(29," Agregar "),q.Sb(),q.Sb(),q.Sb(),q.Ob(30,"hr"),q.Tb(31,"table",23),q.Tb(32,"thead"),q.Tb(33,"tr"),q.Tb(34,"th",24),q.Fc(35,"FP"),q.Sb(),q.Tb(36,"th",25),q.Fc(37,"Mon"),q.Sb(),q.Tb(38,"th",25),q.Fc(39,"Prop"),q.Sb(),q.Sb(),q.Sb(),q.Tb(40,"tbody"),q.Dc(41,xa,13,9,"tr",9),q.Sb(),q.Sb(),q.Sb(),q.Sb(),q.Tb(42,"div",3),q.Tb(43,"div",26),q.Dc(44,Pa,22,5,"table",27),q.Sb(),q.Tb(45,"div",28),q.Tb(46,"table",29),q.Tb(47,"tbody"),q.Tb(48,"tr"),q.Tb(49,"td",30),q.Fc(50,"TOTAL DE CUENTA:"),q.Sb(),q.Tb(51,"td",31),q.Fc(52),q.gc(53,"number"),q.Sb(),q.Sb(),q.Tb(54,"tr"),q.Tb(55,"td",30),q.Fc(56,"PENDIENTE:"),q.Sb(),q.Tb(57,"td",32),q.Tb(58,"span",33),q.Fc(59),q.gc(60,"number"),q.Sb(),q.Sb(),q.Sb(),q.Sb(),q.Sb(),q.Sb(),q.Sb(),q.Sb(),q.Tb(61,"div",34),q.Dc(62,Ea,1,1,"app-cargando",35),q.Tb(63,"button",36),q.bc("click",function(){return e.cancelar()}),q.Fc(64,"Cancelar"),q.Sb(),q.Dc(65,Fa,2,1,"button",37),q.Dc(66,Ma,2,1,"button",37),q.Sb()),2&t){var n=q.tc(14);q.Cb(1),q.Hc(" Cobrar cuenta de ",e.data.cuenta," "),q.Cb(1),q.lc("ngIf",e.clienteSelected&&!!e.clienteSelected.cliente),q.Cb(4),q.lc("showAddButton",!0),q.Cb(5),q.lc("ngForOf",e.inputData.productosACobrar),q.Cb(7),q.lc("ngModel",e.formaPago.forma_pago),q.Cb(1),q.lc("ngForOf",e.lstFormasPago),q.Cb(2),q.lc("ngIf",!e.esMovil),q.Cb(1),q.lc("ngIf",e.esMovil),q.Cb(2),q.lc("ngIf",!e.esMovil),q.Cb(1),q.lc("ngIf",e.esMovil),q.Cb(1),q.lc("ngIf",e.pideDocumento),q.Cb(2),q.lc("disabled",!n.form.valid||e.inputData.saldo<=0),q.Cb(13),q.lc("ngForOf",e.formasPagoDeCuenta),q.Cb(3),q.lc("ngIf",1==+e.data.mesaenuso.mesa.escallcenter),q.Cb(8),q.Gc(q.ic(53,21,e.inputData.totalDeCuenta,"1.2-2")),q.Cb(6),q.lc("ngClass",q.qc(27,Oa,+e.inputData.saldo>0,0==+e.inputData.saldo,+e.inputData.saldo<0)),q.Cb(1),q.Gc(q.ic(60,24,e.inputData.saldo,"1.2-2")),q.Cb(3),q.lc("ngIf",e.facturando),q.Cb(1),q.lc("disabled",e.facturando),q.Cb(2),q.lc("ngIf",0==+e.data.mesaenuso.mesa.escallcenter),q.Cb(1),q.lc("ngIf",1==+e.data.mesaenuso.mesa.escallcenter)}},directives:[N.g,d.m,N.d,ma.a,d.l,f.r,f.l,f.m,y.b,y.e,F.a,f.p,f.k,f.n,w.a,d.k,N.c,$.m,k.b,C.a,f.c,_.a,f.f,fa.a],pipes:[d.f],styles:[".spacer[_ngcontent-%COMP%]{flex:1 1 auto}.totalCuenta[_ngcontent-%COMP%]{border-top:1px solid #000;border-bottom:5px double #000}.colHeight[_ngcontent-%COMP%]{height:400px}.saldo-pendiente[_ngcontent-%COMP%]{color:#da332d;border-bottom:5px double #da332d}.saldo-extra[_ngcontent-%COMP%]{color:#87ceeb;border-bottom:5px double #87ceeb}.saldo-exacto[_ngcontent-%COMP%]{color:green;border-bottom:5px double green}.propina[_ngcontent-%COMP%]{font-style:italic}"]}),wa),Ra=i("XiUz");function Aa(t,e){if(1&t){var n=q.Ub();q.Tb(0,"div",6),q.Tb(1,"mat-card",7),q.Ob(2,"mat-card-header"),q.Tb(3,"mat-card-content"),q.Rb(4),q.Tb(5,"div",0),q.Tb(6,"div",8),q.Tb(7,"button",9),q.bc("click",function(){q.xc(n);var t=e.$implicit;return q.fc().onConfirm(t.numero)}),q.Fc(8),q.Sb(),q.Sb(),q.Sb(),q.Qb(),q.Sb(),q.Sb(),q.Sb()}if(2&t){var a=e.$implicit;q.Cb(8),q.Gc(a.numero)}}var Ua,Na=function t(e,n,a,o){u(this,t),this.titlew=e,this.cantidadPedido=n,this.lblBtnConfirm=a,this.lblBtnDeny=o},ja=((Ua=function(){function t(e,n){u(this,t),this.dialogRef=e,this.data=n,this.pedidos=[],this.datos={respuesta:!1,pedido:""},this.title=n.titlew,this.lblBtnConfirm=n.lblBtnConfirm,this.lblBtnDeny=n.lblBtnDeny,this.cantidadPedido=n.cantidadPedido,console.log(+this.cantidadPedido);for(var a=0;a<+this.cantidadPedido;a++)console.log("asdf"),this.pedidos.push({numero:a+1});console.log(this.pedidos)}return b(t,[{key:"ngOnInit",value:function(){}},{key:"onConfirm",value:function(t){this.datos.respuesta=!0,this.datos.pedido=t,this.dialogRef.close(this.datos)}},{key:"onDismiss",value:function(){this.datos.respuesta=!1,this.dialogRef.close(this.datos)}}]),t}()).\u0275fac=function(t){return new(t||Ua)(q.Nb(N.f),q.Nb(N.a))},Ua.\u0275cmp=q.Hb({type:Ua,selectors:[["app-dialog-pedido"]],decls:9,vars:2,consts:[[1,"row"],["mat-dialog-title",""],["fxFlex","100%","fxFlex.xs","100%",1,"bordeRght"],["fxLayout","row wrap","fxLayoutGap","10px grid","fxFlexFill","","fxLayoutAlign","start start",1,"divContenedor"],["fxFlex","100%","fxLayoutAlign","center start"],["fxFlex","20%","fxFlex.xs","100%","fxFlex.sm","100%","fxFlex.md","50%",4,"ngFor","ngForOf"],["fxFlex","20%","fxFlex.xs","100%","fxFlex.sm","100%","fxFlex.md","50%"],[1,"mat-elevation-z4"],[1,"col"],["mat-raised-button","","color","accent","type","button",3,"click"]],template:function(t,e){1&t&&(q.Tb(0,"div",0),q.Tb(1,"h1",1),q.Fc(2),q.Sb(),q.Sb(),q.Tb(3,"mat-dialog-content"),q.Tb(4,"div",2),q.Tb(5,"div",3),q.Ob(6,"div",4),q.Dc(7,Aa,9,1,"div",5),q.Sb(),q.Sb(),q.Ob(8,"mat-dialog-content"),q.Sb()),2&t&&(q.Cb(2),q.Hc(" ",e.title," "),q.Cb(5),q.lc("ngForOf",e.pedidos))},directives:[N.g,N.d,Ra.a,Ra.c,Ra.d,Ra.e,Ra.b,d.l,x.a,x.d,x.c,w.a],styles:[""]}),Ua),Ba=i("NGYs");function Ha(t,e){if(1&t&&(q.Tb(0,"div"),q.Tb(1,"h5"),q.Fc(2),q.Sb(),q.Sb()),2&t){var n=q.fc().$implicit;q.Cb(2),q.Hc(" ",n.descripcion," ")}}function La(t,e){if(1&t&&(q.Tb(0,"mat-option",12),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n),q.Cb(1),q.Hc(" ",n.descripcion," ")}}var qa=function(){return{standalone:!0}};function za(t,e){if(1&t&&(q.Rb(0),q.Tb(1,"mat-select",10),q.bc("ngModelChange",function(t){return e.$implicit.seleccion=t}),q.Dc(2,La,2,2,"mat-option",11),q.Sb(),q.Ob(3,"mat-divider"),q.Ob(4,"br"),q.Qb()),2&t){var n=e.$implicit,a=q.fc(2).$implicit;q.Cb(1),q.lc("ngModel",n.seleccion)("ngModelOptions",q.nc(3,qa)),q.Cb(1),q.lc("ngForOf",a.receta)}}function $a(t,e){if(1&t&&(q.Tb(0,"div",0),q.Tb(1,"div",1),q.Dc(2,za,5,4,"ng-container",5),q.Sb(),q.Sb()),2&t){var n=q.fc().$implicit;q.Cb(2),q.lc("ngForOf",n.input)}}function Ga(t,e){if(1&t&&(q.Tb(0,"div"),q.Dc(1,Ha,3,1,"div",8),q.Dc(2,$a,3,1,"div",9),q.Sb()),2&t){var n=e.$implicit;q.Cb(1),q.lc("ngIf",n.receta.length>0),q.Cb(1),q.lc("ngIf",n.receta.length>0)}}var Wa,Va=function t(e,n,a){u(this,t),this.producto=e,this.lblBtnConfirm=n,this.lblBtnDeny=a},Ka=((Wa=function(){function e(n,a,o,i,r){var c=this;u(this,e),this.dialogRef=n,this.data=a,this.articuloSvr=o,this.snackBar=i,this.ls=r,this.esMovil=!1,this.getArticulos=function(){c.articuloSvr.getArticuloCombo({articulo:c.producto.id}).subscribe(function(t){c.combo=t;for(var e=0;e<c.combo.receta.length;e++){var n=c.combo.receta[e];if(c.combo.receta[e].seleccionado=!1,1==+n.multiple){for(var a=[],o=0;o<+c.combo.receta[e].cantidad_maxima;o++)a.push({id:o,seleccion:{}});c.combo.receta[e].input=a}else c.seleccion.receta.push(c.combo.receta[e])}})},this.setCantidad=function(){for(var t=0;t<c.combo.receta.length;t++)if(1==+c.combo.receta[t].multiple){for(var e=[],n=0;n<+c.combo.receta[t].cantidad_maxima*c.seleccion.cantidad;n++)e.push({id:n,seleccion:{}});c.combo.receta[t].input=e}},this.todosSeleccionados=function(e){var n,a=!0,o=t(e);try{t:for(o.s();!(n=o.n()).done;){var i,r=t(n.value.input);try{for(r.s();!(i=r.n()).done;)if(void 0===i.value.seleccion.articulo){a=!1;break t}}catch(c){r.e(c)}finally{r.f()}}}catch(c){o.e(c)}finally{o.f()}return a},this.datos={respuesta:!1,seleccion:[]},this.lblBtnConfirm=a.lblBtnConfirm,this.lblBtnDeny=a.lblBtnDeny,this.producto=a.producto,this.seleccion={cantidad:1,articulo:this.producto.id,descripcion:this.producto.nombre,receta:[]}}return b(e,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(Re.a.usrTokenVar).enmovil||!1,this.keyboardLayout=Re.a.IDIOMA_TECLADO,this.combo=[],this.getArticulos()}},{key:"onConfirm",value:function(){var e=this,n=this.combo.receta.filter(function(t){return 1==+t.multiple});if(this.todosSeleccionados(n)){var a,o=t(n);try{var i=function(){var n=a.value;e.seleccion.receta.push({articulo:n.articulo,descripcion:n.descripcion,receta:[]});var o,i=e.seleccion.receta.findIndex(function(t){return+t.articulo==+n.articulo}),r=t(n.input);try{for(r.s();!(o=r.n()).done;){var c=o.value;e.seleccion.receta[i].receta.push(c.seleccion)}}catch(s){r.e(s)}finally{r.f()}};for(o.s();!(a=o.n()).done;)i()}catch(r){o.e(r)}finally{o.f()}this.datos.respuesta=!0,this.datos.seleccion=this.seleccion,this.dialogRef.close(this.datos)}else this.snackBar.open("Por favor seleccione todas las opciones para completar.","Combos",{duration:7e3})}},{key:"onDismiss",value:function(){this.datos.respuesta=!1,this.dialogRef.close(this.datos)}}]),e}()).\u0275fac=function(t){return new(t||Wa)(q.Nb(N.f),q.Nb(N.a),q.Nb(Ba.a),q.Nb(O.b),q.Nb(He.a))},Wa.\u0275cmp=q.Hb({type:Wa,selectors:[["app-dialog-combo"]],decls:16,vars:4,consts:[[1,"row"],[1,"col","m12","s12"],[1,"fullWidth"],["type","number","matInput","","placeholder","Cantidad","min","1","step","1",3,"ngModel","ngModelOptions","change","ngModelChange"],[1,"col-sm-12"],[4,"ngFor","ngForOf"],["align","right",1,"row","text-right"],["mat-raised-button","","color","accent",1,"btnAccion",3,"click"],[4,"ngIf"],["class","row",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(q.Tb(0,"mat-dialog-content"),q.Tb(1,"div",0),q.Tb(2,"div",1),q.Tb(3,"h5"),q.Fc(4,"Cantidad"),q.Sb(),q.Tb(5,"mat-form-field",2),q.Tb(6,"input",3),q.bc("change",function(){return e.setCantidad()})("ngModelChange",function(t){return e.seleccion.cantidad=t}),q.Sb(),q.Sb(),q.Sb(),q.Sb(),q.Tb(7,"div",0),q.Tb(8,"div",4),q.Dc(9,Ga,3,2,"div",5),q.Sb(),q.Sb(),q.Tb(10,"div",6),q.Tb(11,"div",1),q.Tb(12,"button",7),q.bc("click",function(){return e.onDismiss()}),q.Fc(13," Cancelar "),q.Sb(),q.Tb(14,"button",7),q.bc("click",function(){return e.onConfirm()}),q.Fc(15," Aceptar "),q.Sb(),q.Sb(),q.Sb(),q.Sb()),2&t&&(q.Cb(6),q.lc("ngModel",e.seleccion.cantidad)("ngModelOptions",q.nc(3,qa)),q.Cb(3),q.lc("ngForOf",e.combo.receta))},directives:[N.d,y.b,f.o,k.b,f.c,f.k,f.n,d.l,w.a,d.m,F.a,D.a,$.m],styles:[""]}),Wa);function Qa(t,e){if(1&t){var n=q.Ub();q.Tb(0,"textarea",9),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().data.notasGenerales=t}),q.Sb()}if(2&t){var a=q.fc();q.lc("matKeyboard",a.keyboardLayout)("ngModel",a.data.notasGenerales)}}function Xa(t,e){if(1&t){var n=q.Ub();q.Tb(0,"textarea",10),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().data.notasGenerales=t}),q.Sb()}if(2&t){var a=q.fc();q.lc("ngModel",a.data.notasGenerales)}}var Ja,Ya,Za=((Ya=function(){function t(e,n,a){var o=this;u(this,t),this.dialogRef=e,this.data=n,this.ls=a,this.keyboardLayout=Re.a.IDIOMA_TECLADO,this.esMovil=!1,this.terminar=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return o.dialogRef.close(t)}}return b(t,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(Re.a.usrTokenVar).enmovil||!1}}]),t}()).\u0275fac=function(t){return new(t||Ya)(q.Nb(N.f),q.Nb(N.a),q.Nb(He.a))},Ya.\u0275cmp=q.Hb({type:Ya,selectors:[["app-notas-generales-comanda"]],decls:13,vars:2,consts:[["mat-dialog-title",""],["novalidate",""],["frmNotasGenCom","ngForm"],[1,"fullWidth"],["matInput","","placeholder","Notas generales","name","notasGenerales","maxlength","1000",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["matInput","","placeholder","Notas generales","name","notasGenerales","maxlength","1000",3,"ngModel","ngModelChange",4,"ngIf"],["align","end"],["mat-raised-button","","color","secondary",1,"btnAccion",3,"click"],["mat-raised-button","","color","accent",3,"click"],["matInput","","placeholder","Notas generales","name","notasGenerales","maxlength","1000",3,"matKeyboard","ngModel","ngModelChange"],["matInput","","placeholder","Notas generales","name","notasGenerales","maxlength","1000",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(q.Tb(0,"h1",0),q.Fc(1,"Notas generales de comanda"),q.Sb(),q.Tb(2,"mat-dialog-content"),q.Tb(3,"form",1,2),q.Tb(5,"mat-form-field",3),q.Dc(6,Qa,1,2,"textarea",4),q.Dc(7,Xa,1,1,"textarea",5),q.Sb(),q.Sb(),q.Sb(),q.Tb(8,"mat-dialog-actions",6),q.Tb(9,"button",7),q.bc("click",function(){return e.terminar()}),q.Fc(10," Cancelar "),q.Sb(),q.Tb(11,"button",8),q.bc("click",function(){return e.terminar(e.data.notasGenerales)}),q.Fc(12," Guardar "),q.Sb(),q.Sb()),2&t&&(q.Cb(6),q.lc("ngIf",!e.esMovil),q.Cb(1),q.lc("ngIf",e.esMovil))},directives:[N.g,N.d,f.r,f.l,f.m,y.b,d.m,N.c,w.a,k.b,C.a,f.c,f.f,f.k,f.n],styles:[""]}),Ya),to=((Ja=function(){function t(e,n,a,o){var i=this;u(this,t),this.dialogRef=e,this.snackBar=n,this.comandaSrvc=a,this.data=o,this.cancelar=function(){return i.dialogRef.close(!1)},this.guardar=function(){i.nuevaCuenta.nombre&&(i.comanda.cuentas.findIndex(function(t){return t.nombre.toUpperCase().trim()===i.nuevaCuenta.nombre.toUpperCase().trim()})<0?(i.comanda.cuentas.push(i.nuevaCuenta),i.comandaSrvc.save(i.comanda).subscribe(function(t){t.exito?(i.snackBar.open("Cuenta agregada con \xe9xito","Cuentas",{duration:3e3}),i.dialogRef.close(!0)):i.snackBar.open("ERROR: ".concat(t.mensaje),"Cuentas",{duration:7e3})})):i.snackBar.open("Ya existe una cuenta con ese nombre. Por favor ingrese otro nombre.","Cuentas",{duration:7e3}))}}return b(t,[{key:"ngOnInit",value:function(){if(+this.data.mesaEnUso.comanda>0){var t=this.data.mesaEnUso;this.comanda={area:+t.mesa.area.area,mesa:+t.mesa.mesa,mesero:+t.mesero.usuario,comensales:t.cuentas.length+1,dividirCuentasPorSillas:1,comanda:+t.comanda,cuentas:t.cuentas,replaceUnica:!1},this.nuevaCuenta={cuenta:0,numero:this.comanda.cuentas.length+1,nombre:void 0,productos:[]}}}}]),t}()).\u0275fac=function(t){return new(t||Ja)(q.Nb(N.f),q.Nb(O.b),q.Nb(Qn),q.Nb(N.a))},Ja.\u0275cmp=q.Hb({type:Ja,selectors:[["app-nueva-cuenta"]],decls:12,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate",""],["frmNuevaCuenta","ngForm"],[1,"fullWidth"],["type","text","matInput","","placeholder","Nombre","name","nombre","required","",3,"ngModel","ngModelChange"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"]],template:function(t,e){if(1&t&&(q.Tb(0,"h1",0),q.Fc(1),q.Sb(),q.Tb(2,"div",1),q.Tb(3,"form",2,3),q.Tb(5,"mat-form-field",4),q.Tb(6,"input",5),q.bc("ngModelChange",function(t){return e.nuevaCuenta.nombre=t}),q.Sb(),q.Sb(),q.Sb(),q.Sb(),q.Tb(7,"div",6),q.Tb(8,"button",7),q.bc("click",function(){return e.cancelar()}),q.Fc(9," Cancelar "),q.Sb(),q.Tb(10,"button",8),q.bc("click",function(){return e.guardar()}),q.Fc(11," Guardar "),q.Sb(),q.Sb()),2&t){var n=q.tc(4);q.Cb(1),q.Hc("Nueva cuenta - Comanda #",e.data.mesaEnUso.comanda,""),q.Cb(5),q.lc("ngModel",e.nuevaCuenta.nombre),q.Cb(4),q.lc("disabled",!n.form.valid)}},directives:[N.g,N.d,f.r,f.l,f.m,y.b,k.b,f.c,f.p,f.k,f.n,N.c,w.a],styles:[""]}),Ja);function eo(t,e){if(1&t&&(q.Tb(0,"mat-option",12),q.Fc(1),q.Sb()),2&t){var n=e.$implicit,a=q.fc().$implicit;q.lc("value",+n.cuenta)("disabled",1==+n.cerrada||+a.idcuenta==+n.cuenta),q.Cb(1),q.Hc(" ",n.nombre," ")}}function no(t,e){if(1&t&&(q.Tb(0,"tr"),q.Tb(1,"td"),q.Fc(2),q.Sb(),q.Tb(3,"td",7),q.Tb(4,"mat-form-field",8),q.Tb(5,"input",9),q.bc("ngModelChange",function(t){return e.$implicit.cantidad=t}),q.Sb(),q.Sb(),q.Sb(),q.Tb(6,"td"),q.Tb(7,"mat-select",10),q.bc("ngModelChange",function(t){return e.$implicit.idcuenta=t}),q.Dc(8,eo,2,3,"mat-option",11),q.Sb(),q.Sb(),q.Sb()),2&t){var n=e.$implicit,a=e.index,o=q.fc();q.Cb(2),q.Gc(n.nombre),q.Cb(3),q.lc("max",o.cantidadProducto[a])("ngModel",n.cantidad)("disabled",1==+n.combo),q.Cb(2),q.lc("ngModel",n.idcuenta),q.Cb(1),q.lc("ngForOf",o.comanda.cuentas)}}var ao,oo=((ao=function(){function e(n,a,o,i){var r=this;u(this,e),this.dialogRef=n,this.snackBar=a,this.comandaSrvc=o,this.data=i,this.cantidadProducto=[],this.cpLstProductos=[],this.compLstProductos=[],this.cancelar=function(){return r.dialogRef.close(!1)},this.guardar=function(){var e,n=[],a=0,o=t(r.cpLstProductos);try{for(o.s();!(e=o.n()).done;){var i=e.value;+i.idcuenta!=+r.compLstProductos[a].idcuenta&&n.push({detalle_comanda:+i.detalle_comanda,cuenta:+i.idcuenta,cantidad:+i.cantidad}),a++}}catch(c){o.e(c)}finally{o.f()}n.length>0?r.comandaSrvc.distribuirCuentas(n).subscribe(function(t){t.exito?(r.snackBar.open("Productos redistribuidos","Cuentas",{duration:3e3}),r.dialogRef.close(!0)):(r.snackBar.open("ERROR: ".concat(t.mensaje),"Cuentas",{duration:7e3}),r.cancelar())}):(r.snackBar.open("Sin cambios en las cuentas.","Cuentas",{duration:7e3}),r.dialogRef.close(!0))}}return b(e,[{key:"ngOnInit",value:function(){var t=this;if(+this.data.mesaEnUso.comanda>0){var e=this.data.mesaEnUso;this.comanda={area:+e.mesa.area.area,mesa:+e.mesa.mesa,mesero:+e.mesero.usuario,comensales:e.cuentas.length+1,dividirCuentasPorSillas:1,comanda:+e.comanda,cuentas:e.cuentas,replaceUnica:!1}}this.cpLstProductos=[],this.data.lstProductos.length>0&&(this.data.lstProductos.forEach(function(e){0==+t.data.mesaEnUso.cuentas.find(function(t){return+t.cuenta==+e.idcuenta}).cerrada&&(t.cpLstProductos.push(e),t.cantidadProducto.push(+e.cantidad))}),this.cpLstProductos=JSON.parse(JSON.stringify(this.cpLstProductos)),this.compLstProductos=JSON.parse(JSON.stringify(this.cpLstProductos)))}}]),e}()).\u0275fac=function(t){return new(t||ao)(q.Nb(N.f),q.Nb(O.b),q.Nb(Qn),q.Nb(N.a))},ao.\u0275cmp=q.Hb({type:ao,selectors:[["app-distribuir-productos-cuentas"]],decls:17,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"rtxt","size-cantidad"],[4,"ngFor","ngForOf"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","type","button","color","accent",3,"click"],[1,"rtxt"],[1,"size-cantidad"],["type","number","matInput","","name","cantidad","min","1","required","",3,"max","ngModel","disabled","ngModelChange"],["name","cuenta","required","",3,"ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"]],template:function(t,e){1&t&&(q.Tb(0,"h1",0),q.Fc(1),q.Sb(),q.Tb(2,"div",1),q.Tb(3,"table"),q.Tb(4,"tr"),q.Tb(5,"th"),q.Fc(6,"Art\xedculo"),q.Sb(),q.Tb(7,"th",2),q.Fc(8,"Cantidad"),q.Sb(),q.Tb(9,"th"),q.Fc(10,"Cuenta"),q.Sb(),q.Sb(),q.Dc(11,no,9,6,"tr",3),q.Sb(),q.Sb(),q.Tb(12,"div",4),q.Tb(13,"button",5),q.bc("click",function(){return e.cancelar()}),q.Fc(14," Cancelar "),q.Sb(),q.Tb(15,"button",6),q.bc("click",function(){return e.guardar()}),q.Fc(16," Guardar "),q.Sb(),q.Sb()),2&t&&(q.Cb(1),q.Hc("Distribuci\xf3n de productos - Comanda #",e.data.mesaEnUso.comanda,""),q.Cb(10),q.lc("ngForOf",e.cpLstProductos))},directives:[N.g,N.d,d.l,N.c,w.a,y.b,f.o,k.b,f.c,f.p,f.k,f.n,F.a,$.m],styles:[".size-cantidad[_ngcontent-%COMP%]{width:25%}"]}),ao);function io(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",0),q.bc("click",function(){return q.xc(n),q.fc().comandar()}),q.Fc(1,"Comanda"),q.Sb()}if(2&t){var a=q.fc();q.lc("disabled",!a.data.tranComanda.cuentaActiva.nombre||a.data.tranComanda.bloqueoBotones)}}function ro(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",0),q.bc("click",function(){return q.xc(n),q.fc().imprimirCuenta()}),q.Fc(1,"Cuenta"),q.Sb()}if(2&t){var a=q.fc();q.lc("disabled",!a.data.tranComanda.cuentaActiva.nombre||a.data.tranComanda.bloqueoBotones)}}function co(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",0),q.bc("click",function(){return q.xc(n),q.fc().distribuirProductos()}),q.Fc(1,"Distribuir"),q.Sb()}if(2&t){var a=q.fc();q.lc("disabled",a.data.tranComanda.mesaEnUso.cuentas.length<2||a.data.tranComanda.bloqueoBotones)}}function so(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",0),q.bc("click",function(){return q.xc(n),q.fc().unirCuentas()}),q.Fc(1,"Unir cuentas"),q.Sb()}if(2&t){var a=q.fc();q.lc("disabled",a.data.tranComanda.mesaEnUso.cuentas.length<2||a.data.tranComanda.bloqueoBotones)}}function lo(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",0),q.bc("click",function(){return q.xc(n),q.fc().cobrarCuenta()}),q.Fc(1,"Cobrar cuenta"),q.Sb()}if(2&t){var a=q.fc();q.lc("disabled",!a.data.tranComanda.cuentaActiva.nombre||a.data.tranComanda.esCajero()||a.data.tranComanda.bloqueoBotones)}}function uo(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",0),q.bc("click",function(){return q.xc(n),q.fc().enviarPedido()}),q.Fc(1,"Enviar pedido"),q.Sb()}if(2&t){var a=q.fc();q.lc("disabled",!a.data.tranComanda.cuentaActiva.nombre||a.data.tranComanda.esCajero()||a.data.tranComanda.bloqueoBotones)}}function bo(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",0),q.bc("click",function(){return q.xc(n),q.fc().trasladarMesa()}),q.Fc(1,"Trasladar"),q.Sb()}if(2&t){var a=q.fc();q.lc("disabled",a.data.tranComanda.bloqueoBotones)}}function mo(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",3),q.bc("click",function(){return q.xc(n),q.fc().cerrarMesa()}),q.Fc(1),q.Sb()}if(2&t){var a=q.fc();q.Cb(1),q.Hc("Cerrar ",0==+a.data.tranComanda.mesaEnUso.mesa.esmostrador?"Mesa":0==+a.data.tranComanda.mesaEnUso.mesa.escallcenter?"Mostrador":"Pedido","")}}var fo,po=((fo=function(){function t(e,n){var a=this;u(this,t),this.bsAccionesComanda=e,this.data=n,this.cerrar=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cerrar:!1};return a.bsAccionesComanda.dismiss(t)},this.notasGenerales=function(){a.data.tranComanda.getNotasGenerales(),a.cerrar()},this.comandar=function(){a.data.tranComanda.validarImpresion(!1,a.data.dialogRef),a.cerrar()},this.imprimirCuenta=function(){a.data.tranComanda.printCuenta(a.data.dialogRef),a.cerrar()},this.distribuirProductos=function(){a.data.tranComanda.distribuirProductos(a.data.dialogRef),a.cerrar()},this.unirCuentas=function(){a.data.tranComanda.unirCuentas(a.data.dialogRef),a.cerrar()},this.cobrarCuenta=function(){a.data.tranComanda.cobrarCuenta(a.data.dialogRef),a.cerrar()},this.enviarPedido=function(){a.data.tranComanda.enviarPedido(a.data.dialogRef),a.cerrar()},this.trasladarMesa=function(){a.data.tranComanda.trasladoMesa(a.data.dialogRef),a.cerrar()},this.cerrarMesa=function(){a.data.tranComanda.cerrarMesa(),a.cerrar({cerrar:!0,mesaEnUso:a.data.tranComanda.mesaEnUso})}}return b(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||fo)(q.Nb(Fe),q.Nb(ke))},fo.\u0275cmp=q.Hb({type:fo,selectors:[["app-acciones-comanda"]],decls:11,vars:9,consts:[["mat-list-item","",1,"accion-comanda","mat-elevation-z4",3,"disabled","click"],["class","accion-comanda mat-elevation-z4","mat-list-item","",3,"disabled","click",4,"ngIf"],["class","accion-comanda mat-elevation-z4","mat-list-item","",3,"click",4,"ngIf"],["mat-list-item","",1,"accion-comanda","mat-elevation-z4",3,"click"]],template:function(t,e){1&t&&(q.Tb(0,"mat-action-list"),q.Tb(1,"button",0),q.bc("click",function(){return e.notasGenerales()}),q.Fc(2,"Notas"),q.Sb(),q.Dc(3,io,2,1,"button",1),q.Dc(4,ro,2,1,"button",1),q.Dc(5,co,2,1,"button",1),q.Dc(6,so,2,1,"button",1),q.Dc(7,lo,2,1,"button",1),q.Dc(8,uo,2,1,"button",1),q.Dc(9,bo,2,1,"button",1),q.Dc(10,mo,2,1,"button",2),q.Sb()),2&t&&(q.Cb(1),q.lc("disabled",e.data.tranComanda.bloqueoBotones),q.Cb(2),q.lc("ngIf",0==+e.data.tranComanda.mesaEnUso.mesa.escallcenter),q.Cb(1),q.lc("ngIf",0==+e.data.tranComanda.mesaEnUso.mesa.esmostrador),q.Cb(1),q.lc("ngIf",0==+e.data.tranComanda.mesaEnUso.mesa.esmostrador),q.Cb(1),q.lc("ngIf",0==+e.data.tranComanda.mesaEnUso.mesa.esmostrador),q.Cb(1),q.lc("ngIf",0==+e.data.tranComanda.mesaEnUso.mesa.escallcenter),q.Cb(1),q.lc("ngIf",1==+e.data.tranComanda.mesaEnUso.mesa.escallcenter),q.Cb(1),q.lc("ngIf",0==+e.data.tranComanda.mesaEnUso.mesa.esmostrador),q.Cb(1),q.lc("ngIf",e.data.tranComanda.lstProductosSeleccionados.length<=0))},directives:[T.a,T.c,d.m],styles:[".accion-comanda[_ngcontent-%COMP%]{background-color:#f3d852;font-weight:700;text-align:center;margin:10px 0}"]}),fo),ho=i("FHMA"),go=i("qXgu");function vo(t,e){if(1&t){var n=q.Ub();q.Tb(0,"input",9),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().data.pwd=t}),q.Sb()}if(2&t){var a=q.fc();q.lc("matKeyboard",a.keyboardLayout)("ngModel",a.data.pwd)}}function So(t,e){if(1&t){var n=q.Ub();q.Tb(0,"input",10),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().data.pwd=t}),q.Sb()}if(2&t){var a=q.fc();q.lc("ngModel",a.data.pwd)}}var Co,To,_o=((Co=function(){function t(e,n,a){var o=this;u(this,t),this.dialogRef=e,this.comandaSrvc=n,this.ls=a,this.data={pwd:void 0},this.keyboardLayout=Re.a.IDIOMA_TECLADO,this.esMovil=!1,this.cancelar=function(){return o.dialogRef.close()},this.terminar=function(){o.comandaSrvc.validaPwdGerenteTurno(o.data.pwd).subscribe(function(t){o.dialogRef.close(!!t.exito&&t.esgerente)})}}return b(t,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(Re.a.usrTokenVar).enmovil||!1}}]),t}()).\u0275fac=function(t){return new(t||Co)(q.Nb(N.f),q.Nb(Qn),q.Nb(He.a))},Co.\u0275cmp=q.Hb({type:Co,selectors:[["app-valida-pwd-gerente-turno"]],decls:13,vars:3,consts:[["mat-dialog-title",""],["novalidate","",3,"ngSubmit"],["frmValidarPwdGerenteTurno","ngForm"],[1,"fullWidth"],["type","password","matInput","","placeholder","Contrase\xf1a del gerente de turno","name","pwd","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["type","password","matInput","","placeholder","Contrase\xf1a del gerente de turno","name","pwd","required","",3,"ngModel","ngModelChange",4,"ngIf"],["align","end"],["mat-raised-button","","color","secondary",1,"btnAccion",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],["type","password","matInput","","placeholder","Contrase\xf1a del gerente de turno","name","pwd","required","",3,"matKeyboard","ngModel","ngModelChange"],["type","password","matInput","","placeholder","Contrase\xf1a del gerente de turno","name","pwd","required","",3,"ngModel","ngModelChange"]],template:function(t,e){if(1&t){var n=q.Ub();q.Tb(0,"h1",0),q.Fc(1,"Contrase\xf1a del gerente de turno"),q.Sb(),q.Tb(2,"mat-dialog-content"),q.Tb(3,"form",1,2),q.bc("ngSubmit",function(){return q.xc(n),q.tc(4).form.valid}),q.Tb(5,"mat-form-field",3),q.Dc(6,vo,1,2,"input",4),q.Dc(7,So,1,1,"input",5),q.Sb(),q.Sb(),q.Sb(),q.Tb(8,"mat-dialog-actions",6),q.Tb(9,"button",7),q.bc("click",function(){return e.cancelar()}),q.Fc(10," Cancelar "),q.Sb(),q.Tb(11,"button",8),q.bc("click",function(){return e.terminar()}),q.Fc(12," Eliminar producto "),q.Sb(),q.Sb()}if(2&t){var a=q.tc(4);q.Cb(6),q.lc("ngIf",!e.esMovil),q.Cb(1),q.lc("ngIf",e.esMovil),q.Cb(4),q.lc("disabled",!a.form.valid)}},directives:[N.g,N.d,f.r,f.l,f.m,y.b,d.m,N.c,w.a,k.b,C.a,f.c,f.p,f.k,f.n],styles:[""]}),Co),yo=function(){return{standalone:!0}},ko=function t(e){u(this,t),this.producto=e},xo=((To=function(){function t(e,n,a){u(this,t),this.dialogRef=e,this.data=n,this.snackBar=a,this.datos={},this.prod=n.producto,this.cantidad=this.prod.cantidad,this.datos={respuesta:!1,producto:null}}return b(t,[{key:"ngOnInit",value:function(){}},{key:"onConfirm",value:function(){this.cantidad<1||this.cantidad>this.prod.cantidad?this.snackBar.open("La cantidad debe estar entre 1 y "+this.prod.cantidad,"Error",{duration:5e3}):(this.datos.respuesta=!0,this.prod.cantidad-=this.cantidad,this.datos.producto=this.prod,this.dialogRef.close(this.datos))}},{key:"onDismiss",value:function(){this.datos.respuesta=!1,this.dialogRef.close(this.datos)}}]),t}()).\u0275fac=function(t){return new(t||To)(q.Nb(N.f),q.Nb(N.a),q.Nb(O.b))},To.\u0275cmp=q.Hb({type:To,selectors:[["app-dialog-elminar-producto"]],decls:13,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"fullWidth"],["type","number","matInput","","placeholder","Cantidad","min","1","step","1",3,"max","ngModel","ngModelOptions","ngModelChange"],["mat-dialog-actions","","align","center"],["mat-raised-button","",1,"btnConfig",3,"click"],["mat-raised-button","","color","accent",1,"btnConfig",3,"click"]],template:function(t,e){1&t&&(q.Tb(0,"h1",0),q.Fc(1," Eliminar Articulos "),q.Sb(),q.Tb(2,"div",1),q.Tb(3,"p"),q.Fc(4,"Seleccione la cantidad que desea eliminar"),q.Sb(),q.Sb(),q.Tb(5,"form"),q.Tb(6,"mat-form-field",2),q.Tb(7,"input",3),q.bc("ngModelChange",function(t){return e.cantidad=t}),q.Sb(),q.Sb(),q.Sb(),q.Tb(8,"div",4),q.Tb(9,"button",5),q.bc("click",function(){return e.onDismiss()}),q.Fc(10,"Cancelar"),q.Sb(),q.Tb(11,"button",6),q.bc("click",function(){return e.onConfirm()}),q.Fc(12,"Aceptar"),q.Sb(),q.Sb()),2&t&&(q.Cb(7),q.mc("max",e.prod.cantidad),q.lc("ngModel",e.cantidad)("ngModelOptions",q.nc(3,yo)))},directives:[N.g,N.d,f.r,f.l,f.m,y.b,f.o,k.b,f.c,f.k,f.n,N.c,w.a],styles:[""]}),To);function Do(t,e){if(1&t&&(q.Tb(0,"mat-list-item"),q.Tb(1,"div",3),q.Tb(2,"span",4),q.Fc(3),q.gc(4,"number"),q.Sb(),q.Sb(),q.Sb()),2&t){var n=q.fc();q.Cb(3),q.Jc(" ",n.cantidadDeProductos," ",n.cantidadDeProductos>1?"art\xedculos":"art\xedculo"," por ",q.ic(4,3,n.totalDeProductos,"1.2-2")," ")}}function Po(t,e){if(1&t&&(q.Tb(0,"span"),q.Fc(1),q.Sb()),2&t){var n=q.fc(2).$implicit;q.Cb(1),q.Gc(n.cantidad)}}function Eo(t,e){if(1&t&&(q.Tb(0,"div",3),q.Tb(1,"span",13),q.Fc(2),q.Sb(),q.Sb()),2&t){var n=e.$implicit;q.Cb(2),q.Gc(n)}}function Fo(t,e){if(1&t&&(q.Rb(0),q.Dc(1,Eo,3,1,"div",12),q.Qb()),2&t){var n=q.fc(2).$implicit;q.Cb(1),q.lc("ngForOf",n.detalle)}}function Mo(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",17),q.bc("click",function(){q.xc(n);var t=q.fc(3),e=t.$implicit,a=t.index;return q.fc().removeProducto(e,a)}),q.Tb(1,"mat-icon",18),q.Fc(2,"remove_circle"),q.Sb(),q.Sb()}if(2&t){var a=q.fc(4);q.lc("disabled",a.bloqueoBotones)}}function wo(t,e){if(1&t){var n=q.Ub();q.Tb(0,"eco-fab-speed-dial",14),q.Tb(1,"eco-fab-speed-dial-trigger"),q.Tb(2,"button",15),q.Tb(3,"mat-icon",16),q.Fc(4,"keyboard_arrow_left"),q.Sb(),q.Sb(),q.Sb(),q.Tb(5,"eco-fab-speed-dial-actions"),q.Tb(6,"button",17),q.bc("click",function(){q.xc(n);var t=q.fc(2),e=t.$implicit,a=t.index;return q.fc().deleteProductoFromList(e,a)}),q.Tb(7,"mat-icon",18),q.Fc(8,"delete_forever"),q.Sb(),q.Sb(),q.Dc(9,Mo,3,1,"button",19),q.Tb(10,"button",20),q.bc("click",function(){q.xc(n);var t=q.fc(2).$implicit;return q.fc().toggleShowInputNotas(t)}),q.Tb(11,"mat-icon",18),q.Fc(12,"notes"),q.Sb(),q.Sb(),q.Sb(),q.Sb()}if(2&t){var a=q.fc(2).$implicit,o=q.fc();q.Cb(6),q.lc("disabled",o.bloqueoBotones),q.Cb(3),q.lc("ngIf",a.detalle.length<=1),q.Cb(1),q.lc("disabled",o.bloqueoBotones)}}function Oo(t,e){if(1&t){var n=q.Ub();q.Tb(0,"eco-fab-speed-dial",14),q.Tb(1,"eco-fab-speed-dial-trigger"),q.Tb(2,"button",15),q.Tb(3,"mat-icon",16),q.Fc(4,"keyboard_arrow_left"),q.Sb(),q.Sb(),q.Sb(),q.Tb(5,"eco-fab-speed-dial-actions"),q.Tb(6,"button",17),q.bc("click",function(){q.xc(n);var t=q.fc(2),e=t.$implicit,a=t.index;return q.fc().deleteProductoFromListAfterPrinted(e,a)}),q.Tb(7,"mat-icon",18),q.Fc(8,"delete_forever"),q.Sb(),q.Sb(),q.Sb(),q.Sb()}if(2&t){var a=q.fc(3);q.Cb(6),q.lc("disabled",a.bloqueoBotones)}}function Io(t,e){if(1&t&&(q.Tb(0,"div",7),q.Tb(1,"div",8),q.Tb(2,"div",9),q.Tb(3,"span",3),q.Dc(4,Po,2,1,"span",1),q.Fc(5),q.Sb(),q.Dc(6,Fo,2,1,"ng-container",1),q.Sb(),q.Tb(7,"div",10),q.Tb(8,"span"),q.Fc(9),q.gc(10,"number"),q.Sb(),q.Fc(11,"\xa0 "),q.Dc(12,wo,13,3,"eco-fab-speed-dial",11),q.Dc(13,Oo,9,1,"eco-fab-speed-dial",11),q.Sb(),q.Sb(),q.Sb()),2&t){var n=q.fc().$implicit;q.Cb(4),q.lc("ngIf",0==+n.multiple),q.Cb(1),q.Hc("\xa0",n.nombre," "),q.Cb(1),q.lc("ngIf",1==+n.combo),q.Cb(3),q.Gc(q.ic(10,6,n.cantidad*n.precio+n.monto_extra,"1.2-2")),q.Cb(3),q.lc("ngIf",0==+n.impreso),q.Cb(1),q.lc("ngIf",1==+n.impreso)}}function Ro(t,e){if(1&t){var n=q.Ub();q.Tb(0,"input",24),q.bc("ngModelChange",function(t){return q.xc(n),q.fc(3).$implicit.notas=t})("keyup.enter",function(){q.xc(n);var t=q.fc(3).$implicit;return q.fc().toggleShowInputNotas(t)})("blur",function(){q.xc(n);var t=q.fc(3).$implicit;return q.fc().saveNotasProducto(t)}),q.Sb()}if(2&t){var a=q.fc(3).$implicit,o=q.fc();q.lc("matKeyboard",o.keyboardLayout)("ngModel",a.notas)}}function Ao(t,e){if(1&t){var n=q.Ub();q.Tb(0,"input",25),q.bc("ngModelChange",function(t){return q.xc(n),q.fc(3).$implicit.notas=t})("keyup.enter",function(){q.xc(n);var t=q.fc(3).$implicit;return q.fc().toggleShowInputNotas(t)})("blur",function(){q.xc(n);var t=q.fc(3).$implicit;return q.fc().saveNotasProducto(t)}),q.Sb()}if(2&t){var a=q.fc(3).$implicit;q.lc("ngModel",a.notas)}}function Uo(t,e){if(1&t&&(q.Tb(0,"mat-form-field",0),q.Dc(1,Ro,1,2,"input",22),q.Dc(2,Ao,1,1,"input",23),q.Sb()),2&t){var n=q.fc(3);q.Cb(1),q.lc("ngIf",!n.esMovil),q.Cb(1),q.lc("ngIf",n.esMovil)}}function No(t,e){if(1&t&&(q.Tb(0,"div",7),q.Dc(1,Uo,3,2,"mat-form-field",21),q.Sb()),2&t){var n=q.fc().$implicit;q.Cb(1),q.lc("ngIf",n.showInputNotas)}}var jo=function(t){return{noImpreso:t}};function Bo(t,e){if(1&t&&(q.Tb(0,"mat-list-item",5),q.Dc(1,Io,14,9,"div",6),q.Dc(2,No,2,1,"div",6),q.Sb()),2&t){var n=e.$implicit;q.lc("ngClass",q.oc(3,jo,0==+n.impreso)),q.Cb(1),q.lc("ngIf",+n.cantidad>0),q.Cb(1),q.lc("ngIf",+n.cantidad>0)}}var Ho,Lo=((Ho=function(){function e(n,a,o,i,r){var c=this;u(this,e),this.snackBar=n,this.ls=a,this.comandaSrvc=o,this.socket=i,this.dialog=r,this.listaProductos=[],this.noCuenta=null,this.listHeight="450px",this.IdComanda=0,this.IdCuenta=0,this.bloqueoBotones=!1,this.mesaEnUso={},this.productoRemovedEv=new q.o,this.esMovil=!1,this.keyboardLayout=Re.a.IDIOMA_TECLADO,this.totalDeProductos=0,this.cantidadDeProductos=0,this.removeProducto=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0;c.bloqueoBotones=!0,c.detalleComanda={detalle_cuenta:t.detalle_cuenta,detalle_comanda:t.detalle_comanda,articulo:t.id,cantidad:+t.cantidad>1?+t.cantidad-1:0,precio:+t.precio,total:+t.cantidad>1?(+t.cantidad-1)*+t.precio:0,notas:t.notas,autorizado:n},a&&(c.detalleComanda.cantidad=a,c.detalleComanda.total=a*c.detalleComanda.precio),c.comandaSrvc.saveDetalle(c.IdComanda,c.IdCuenta,c.detalleComanda).subscribe(function(e){e.exito?(t.cantidad=c.detalleComanda.cantidad,c.productoRemovedEv.emit({listaProductos:c.listaProductos,comanda:e.comanda}),0==+t.cantidad&&(c.socket.emit("refrescar:mesa",{mesaenuso:c.mesaEnUso}),c.socket.emit("refrescar:listaCocina",{mesaenuso:c.mesaEnUso}))):c.snackBar.open("ERROR: ".concat(e.mensaje),"Comanda",{duration:3e3}),c.bloqueoBotones=!1})},this.deleteProductoFromList=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.cantidad=0,t.notas="",c.removeProducto(t,e,n)},this.deleteProductoFromListAfterPrinted=function(t,e){c.bloqueoBotones=!0,c.dialog.open(_o,{width:"40%",disableClose:!0}).afterClosed().subscribe(function(n){n?c.dialog.open(xo,{width:"40%",disableClose:!0,data:new ko(t)}).afterClosed().subscribe(function(t){t&&t.respuesta&&(c.removeProducto(t.producto,e,!0,t.producto.cantidad),c.snackBar.open("Se eliminar\xe1 el producto seleccionado.","Comanda",{duration:5e3}))}):c.snackBar.open("La contrase\xf1a no es correcta","Comanda",{duration:5e3}),c.bloqueoBotones=!1})},this.saveNotasProducto=function(t){c.comandaSrvc.saveNotasProducto({detalle_comanda:t.detalle_comanda,notas:t.notas}).subscribe(function(t){t.exito&&c.snackBar.open("Notas de producto guardadas con \xe9xito...","Producto",{duration:3e3})})},this.getTotalProductos=function(){c.totalDeProductos=0,c.cantidadDeProductos=0;var e,n=t(c.listaProductos);try{for(n.s();!(e=n.n()).done;){var a=e.value;c.totalDeProductos+=a.cantidad*a.precio+a.monto_extra,c.cantidadDeProductos+=a.cantidad}}catch(o){n.e(o)}finally{n.f()}}}return b(e,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(Re.a.usrTokenVar).enmovil||!1}},{key:"ngOnChanges",value:function(t){this.listaProductos&&this.listaProductos.length>0&&this.getTotalProductos()}},{key:"toggleShowInputNotas",value:function(t){console.log("ARTICULO = ",t),t.showInputNotas=!t.showInputNotas,t.showInputNotas?t.itemListHeight="140px":(t.itemListHeight="70px",this.saveNotasProducto(t))}},{key:"doAction",value:function(t){console.log(t)}}]),e}()).\u0275fac=function(t){return new(t||Ho)(q.Nb(O.b),q.Nb(He.a),q.Nb(Qn),q.Nb(da.a),q.Nb(N.b))},Ho.\u0275cmp=q.Hb({type:Ho,selectors:[["app-lista-productos-comanda"]],inputs:{listaProductos:"listaProductos",noCuenta:"noCuenta",listHeight:"listHeight",IdComanda:"IdComanda",IdCuenta:"IdCuenta",bloqueoBotones:"bloqueoBotones",mesaEnUso:"mesaEnUso"},outputs:{productoRemovedEv:"productoRemovedEv"},features:[q.Ab],decls:3,vars:4,consts:[[1,"fullWidth"],[4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],["matLine",""],[1,"lineaDeTotal"],[3,"ngClass"],["matLine","","class","fullWidth",4,"ngIf"],["matLine","",1,"fullWidth"],[1,"row"],[1,"col","m6","s12"],["align","end",1,"col","m6","s12"],["direction","left",4,"ngIf"],["matLine","",4,"ngFor","ngForOf"],[1,"tabulador"],["direction","left"],["mat-fab",""],[2,"font-size","18pt !important"],["mat-mini-fab","","color","warn",3,"disabled","click"],[2,"font-size","16pt !important"],["mat-mini-fab","","color","warn",3,"disabled","click",4,"ngIf"],["mat-mini-fab","","color","accent",3,"disabled","click"],["class","fullWidth",4,"ngIf"],["matInput","","placeholder","Notas de producto","maxlength","1000",3,"matKeyboard","ngModel","ngModelChange","keyup.enter","blur",4,"ngIf"],["matInput","","placeholder","Notas de producto","maxlength","1000",3,"ngModel","ngModelChange","keyup.enter","blur",4,"ngIf"],["matInput","","placeholder","Notas de producto","maxlength","1000",3,"matKeyboard","ngModel","ngModelChange","keyup.enter","blur"],["matInput","","placeholder","Notas de producto","maxlength","1000",3,"ngModel","ngModelChange","keyup.enter","blur"]],template:function(t,e){1&t&&(q.Tb(0,"mat-list",0),q.Dc(1,Do,5,6,"mat-list-item",1),q.Dc(2,Bo,3,5,"mat-list-item",2),q.Sb()),2&t&&(q.Ac("height",e.listHeight),q.Cb(1),q.lc("ngIf",e.listaProductos.length>0),q.Cb(1),q.lc("ngForOf",e.listaProductos))},directives:[T.a,d.m,d.l,T.c,$.j,d.k,tn.a,Oe.b,Oe.d,w.a,_.a,Oe.a,y.b,k.b,C.a,f.c,f.f,f.k,f.n],pipes:[d.f],styles:[".fullWidth[_ngcontent-%COMP%]{width:100%!important}.spacer[_ngcontent-%COMP%]{flex:1 1 auto!important}.noImpreso[_ngcontent-%COMP%]{background-color:#c7c7c7}.text-pre-wrap[_ngcontent-%COMP%]{white-space:pre-wrap!important}.lineaDeTotal[_ngcontent-%COMP%]{font-weight:700!important;font-size:11pt!important}"]}),Ho),qo=["txtCodigoBarras"];function zo(t,e){if(1&t){var n=q.Ub();q.Tb(0,"mat-chip",18),q.bc("click",function(){q.xc(n);var t=e.$implicit,a=q.fc();return 0==+t.cerrada&&a.setSelectedCuenta(t.numero)}),q.Fc(1),q.Sb()}if(2&t){var a=e.$implicit,o=q.fc();q.lc("disabled",1==+a.cerrada||o.bloqueoBotones)("selected",0==+a.cerrada),q.Cb(1),q.Hc(" ",a.nombre," ")}}function $o(t,e){if(1&t){var n=q.Ub();q.Tb(0,"mat-chip",19),q.bc("click",function(){q.xc(n);var t=q.fc();return t.nuevaCuenta(t.dialogRef)}),q.Fc(1," Nueva "),q.Sb()}}function Go(t,e){if(1&t){var n=q.Ub();q.Tb(0,"mat-chip",20),q.bc("click",function(){q.xc(n);var t=e.$implicit;return q.fc().loadSubcategorias(t)}),q.Fc(1),q.Sb()}if(2&t){var a=e.$implicit,o=q.fc();q.lc("disabled",o.bloqueoBotones),q.Cb(1),q.Hc(" ",a.descripcion," ")}}function Wo(t,e){if(1&t){var n=q.Ub();q.Tb(0,"mat-chip",23),q.bc("click",function(){q.xc(n);var t=e.$implicit,a=q.fc().index;return q.fc().loadSubcategorias({categoria:t.categoria},t,a)}),q.Fc(1),q.Sb()}if(2&t){var a=e.$implicit,o=q.fc(2);q.lc("disabled",o.bloqueoBotones),q.Cb(1),q.Hc(" ",a.descripcion," ")}}function Vo(t,e){if(1&t&&(q.Tb(0,"div",21),q.Tb(1,"mat-chip-list"),q.Dc(2,Wo,2,2,"mat-chip",22),q.Sb(),q.Sb()),2&t){var n=e.$implicit;q.Cb(2),q.lc("ngForOf",n)}}function Ko(t,e){if(1&t){var n=q.Ub();q.Tb(0,"div",24),q.Tb(1,"mat-card",25),q.bc("click",function(){q.xc(n);var t=e.$implicit,a=q.fc();return!a.bloqueoBotones&&a.addArticulo(t)}),q.Tb(2,"mat-card-content"),q.Tb(3,"p"),q.Fc(4),q.Sb(),q.Sb(),q.Sb(),q.Sb()}if(2&t){var a=e.$implicit;q.Cb(4),q.Gc(a.descripcion)}}var Qo,Xo=((Qo=function(t){e(o,t);var n=a(o);function o(t,e,a,i,r,c,s,l,d,b,m){var f;return u(this,o),(f=n.call(this,a,i,r,c,s,l,d,b,m)).dialogRef=t,f.data=e,f.dialog=a,f.snackBar=i,f.comandaSrvc=r,f.socket=c,f.ls=s,f.pdfServicio=l,f.configSrvc=d,f.articuloSrvc=b,f.bsAccionesCmd=m,f.categorias=[],f.subCategorias=[],f.listaSubCategorias=[],f.articulos=[],f.fullListArticulos=[],f.setDatos=function(){f.data&&f.data.mesa&&(f.mesaEnUso=f.data.mesa,f.alIniciar(),f.setSelectedCuenta(f.mesaEnUso.cuentas[0].numero))},f.cerrar=function(){return f.dialogRef.close()},f.resetArticulos=function(){return f.articulos=[]},f.resetListaSubCategorias=function(){return f.listaSubCategorias=[]},f.loadArticulosDePOS=function(){f.articuloSrvc.getArticulosDePOS().subscribe(function(t){t&&(f.categorias=t.categorias,f.subCategorias=t.subcategorias,f.articulos=t.articulos,f.fullListArticulos=JSON.parse(JSON.stringify(f.articulos)))})},f.loadSubcategorias=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;f.bloqueoBotones||(e?(f.listaSubCategorias.length>0&&f.listaSubCategorias.splice(n+1),e.subcategorias&&(0===e.subcategorias.length?f.filterArticulos(+e.categoria_grupo):f.listaSubCategorias.push(e.subcategorias))):(f.resetListaSubCategorias(),f.resetArticulos(),f.listaSubCategorias.push(f.subCategorias.filter(function(e){return+e.categoria==+t.categoria}))))},f.filterArticulos=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;f.bloqueoBotones||(f.articulos=t?f.fullListArticulos.filter(function(e){return+e.categoria_grupo==+t}):f.fullListArticulos)},f.addArticulo=function(t){f.bloqueoBotones||f.agregarProductos({id:+t.articulo,nombre:t.descripcion,precio:+t.precio,impresora:t.impresora,presentacion:t.presentacion,codigo:t.codigo,combo:t.combo,multiple:t.multiple})},f}return b(o,[{key:"ngOnInit",value:function(){this.loadArticulosDePOS(),this.setDatos()}}]),o}(function(){function e(n,a,o,i,r,c,s,l,d){var b=this;u(this,e),this.dialog=n,this.snackBar=a,this.comandaSrvc=o,this.socket=i,this.ls=r,this.pdfServicio=c,this.configSrvc=s,this.articuloSrvc=l,this.bsAccionesCmd=d,this.clientePedido=null,this.closeSideNavEv=new q.o,this.mesaSavedEv=new q.o,this.showPortalComanda=!1,this.showPortalCuenta=!1,this.noComanda=0,this.sumCuenta=0,this.categorias=[],this.bloqueoBotones=!1,this.rolesUsuario=[],this.impreso=0,this.usaCodigoBarras=!1,this.codigoBarras=null,this.alIniciar=function(){b.resetLstProductosSeleccionados(),b.resetLstProductosDeCuenta(),b.resetCuentaActiva(),b.impreso=0,b.noComanda=b.mesaEnUso.comanda||0,b.llenaProductosSeleccionados(),b.ls.get(Re.a.usrTokenVar).sede_uuid&&(b.socket.emit("joinRestaurant",b.ls.get(Re.a.usrTokenVar).sede_uuid),b.socket.on("reconnect",function(){return b.socket.emit("joinRestaurant",b.ls.get(Re.a.usrTokenVar).sede_uuid)})),b.usaCodigoBarras=b.configSrvc.getConfig(Re.a.CONSTANTES.RT_USA_CODIGO_BARRAS)||!1},this.resetMesaEnUso=function(){return b.mesaEnUso={exito:!0,comanda:null,usuario:null,sede:null,estatus:null,mesa:{mesa:null,area:{area:null,sede:null,area_padre:null,nombre:null},numero:null,posx:null,posy:null,tamanio:null,estatus:null},numero_pedido:null,cuentas:[]}},this.resetLstProductosSeleccionados=function(){return b.lstProductosSeleccionados=[]},this.resetLstProductosDeCuenta=function(){return b.lstProductosDeCuenta=[]},this.resetCuentaActiva=function(){return b.cuentaActiva={cuenta:null,numero:null,nombre:null,productos:[]}},this.resetListadoArticulos=function(){return b.appLstProdAlt.loadArbolArticulos()},this.setListaCategorias=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return b.categorias=b.setVerBotones(t)},this.setVerBotones=function(e){var n,a=t(e);try{for(a.s();!(n=a.n()).done;){var o,i=n.value,r=t(i.categoria_grupo);try{t:for(r.s();!(o=r.n()).done;){var c,s=o.value,l=t(s.articulo);try{for(l.s();!(c=l.n()).done;)if(1==+c.value.mostrar_pos){s.mostrarEnPos=!0,i.mostrarEnPos=!0;continue t}}catch(u){l.e(u)}finally{l.f()}}}catch(u){r.e(u)}finally{r.f()}}}catch(u){a.e(u)}finally{a.f()}return e},this.clickOnCategoria=function(t){return b.appLstProdAlt.fillSubCategorias(t.categoria_grupo)},this.buscarArticulo=function(){b.codigoBarras&&b.codigoBarras.trim().length>0&&b.articuloSrvc.getArticulos({codigo:b.codigoBarras.trim()}).subscribe(function(t){if(t&&t.length>0){var e=t[0];b.agregarProductos({id:+e.articulo,nombre:e.descripcion,precio:+e.precio,impresora:e.impresora,presentacion:e.presentacion,codigo:e.codigo,combo:e.combo,multiple:e.multiple}),b.codigoBarras=null,b.txtCodigoBarras.focus()}})},this.llenaProductosSeleccionados=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.mesaEnUso;null==b.mesaEnUso.comanda&&(b.mesaEnUso=e),b.lstProductosSeleccionados=[];var n,a=t(e.cuentas);try{for(a.s();!(n=a.n()).done;){var o,i=n.value,r=t(i.productos);try{for(r.s();!(o=r.n()).done;){var c=o.value;b.lstProductosSeleccionados.push({id:+c.articulo.articulo,nombre:c.articulo.descripcion,cuenta:+c.numero_cuenta||1,idcuenta:+i.cuenta,cantidad:+c.cantidad,impreso:+c.impreso,precio:parseFloat(c.precio)||10,total:parseFloat(c.total)||parseFloat(c.cantidad)*parseFloat(c.precio),notas:c.notas||"",showInputNotas:!1,itemListHeight:"70px",detalle_comanda:+c.detalle_comanda,detalle_cuenta:+c.detalle_cuenta,impresora:c.articulo.impresora,detalle:c.detalle,monto_extra:+c.monto_extra||0,multiple:+c.articulo.multiple,combo:+c.articulo.combo})}}catch(s){r.e(s)}finally{r.f()}}}catch(s){a.e(s)}finally{a.f()}},this.cerrarMesa=function(){b.comandaSrvc.cerrarMesa(b.mesaEnUso.mesa.mesa).subscribe(function(t){t.exito?(b.snackBar.open(t.mensaje,"Comanda",{duration:3e3}),b.mesaEnUso.mesa.estatus=1,b.mesaSavedEv.emit(),b.socket.emit("refrescar:mesa",{mesaenuso:b.mesaEnUso})):b.snackBar.open("ERROR: ".concat(t.mensaje),"Comanda",{duration:7e3})})},this.printToBT=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=window.open("com.restouch.impresion://impresion/".concat(t),"PrntBT","height=200,width=200,menubar=no,location=no,resizable=no,scrollbars=no,status=no");setTimeout(function(){return e.close()},3e3),b.bloqueoBotones=!1},this.printComandaPDF=function(){var t=+b.cuentaActiva.cuenta;b.pdfServicio.getComanda(t).subscribe(function(e){if(e){var n=new Blob([e],{type:"application/pdf"}),a=window.URL.createObjectURL(n);window.open(a,"cuenta_".concat(t),"height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no")}else b.snackBar.open("No se pudo generar la comanda...","Comanda",{duration:3e3})})},this.sumaDetalle=function(e){var n,a=0,o=t(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;a+=+i.total||0,a+=+i.monto_extra||0}}catch(r){o.e(r)}finally{o.f()}return a},this.enviarPedido=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=b.mesaEnUso.cuentas[0];b.cuentaActiva=b.mesaEnUso.cuentas.find(function(t){return+t.numero==+e.numero});var n=b.lstProductosSeleccionados.filter(function(t){return+t.cuenta==+b.cuentaActiva.numero});n.map(function(t){return t.impreso=1}),b.noComanda=b.mesaEnUso.comanda,b.cuentaActiva.productos=b.prepProductosComanda(n),b.mesaEnUso.cuentas.findIndex(function(t){return+t.cuenta==+b.cuentaActiva.cuenta})>-1&&b.comandaSrvc.save({area:b.mesaEnUso.mesa.area.area,mesa:b.mesaEnUso.mesa.mesa,mesero:b.mesaEnUso.usuario,comanda:b.mesaEnUso.comanda,cuentas:b.mesaEnUso.cuentas,numero_pedido:b.mesaEnUso.numero_pedido}).subscribe(function(n){n.exito&&(b.mesaEnUso.numero_pedido=n.comanda.numero_pedido,b.comandaSrvc.setProductoImpreso(e.cuenta).subscribe(function(n){b.llenaProductosSeleccionados(n.comanda),b.setSelectedCuenta(e.numero),b.cobrarCuenta(t)}))})},this.cambiarEstatusCuenta=function(t){var e=b.mesaEnUso.cuentas.findIndex(function(e){return+e.cuenta==+t.cuenta});b.mesaEnUso.cuentas[e].cerrada=+t.cerrada},this.esCajero=function(){return!1},this.trasladoMesa=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;b.dialog.open(oa,{width:"55%",data:{mesaEnUso:b.mesaEnUso}}).afterClosed().subscribe(function(e){e&&(b.socket.emit("refrescar:mesa",{mesaenuso:b.mesaEnUso}),t?t.close(b.mesaEnUso):b.closeSideNavEv.emit(b.mesaEnUso))})},this.getNotasGenerales=function(){b.dialog.open(Za,{width:"50%",data:{notasGenerales:b.mesaEnUso.notas_generales||""}}).afterClosed().subscribe(function(t){null!==t&&t.trim().length>0&&b.comandaSrvc.saveNotasGenerales({comanda:b.mesaEnUso.comanda,notas_generales:t}).subscribe(function(e){e.exito?(b.mesaEnUso.notas_generales=t,b.snackBar.open(e.mensaje,"Comanda",{duration:3e3})):b.snackBar.open("ERROR: ".concat(e.mensaje),"Comanda",{duration:7e3})})})},this.nuevaCuenta=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;b.dialog.open(to,{width:"50%",data:{mesaEnUso:b.mesaEnUso}}).afterClosed().subscribe(function(e){e&&(t?t.close():b.closeSideNavEv.emit())})},this.distribuirProductos=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;b.dialog.open(oo,{width:"50%",data:{mesaEnUso:b.mesaEnUso,lstProductos:b.lstProductosSeleccionados||[]}}).afterClosed().subscribe(function(e){e&&(t?t.close():b.closeSideNavEv.emit())})},this.abrirAccionesComanda=function(t){b.bsAccionesCmd.open(po,{autoFocus:!1,data:{tranComanda:b,dialogRef:t}}).afterDismissed().subscribe(function(e){(null==e?void 0:e.cerrar)&&t.close(e.mesaEnUso||null)})}}return b(e,[{key:"setSelectedCuenta",value:function(t){this.bloqueoBotones=!0,this.cuentaActiva=this.mesaEnUso.cuentas.find(function(e){return+e.numero==+t}),this.setLstProductosDeCuenta(),this.bloqueoBotones=!1}},{key:"setSumaCuenta",value:function(e){var n,a=0,o=t(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;a+=i.precio*i.cantidad}}catch(r){o.e(r)}finally{o.f()}this.sumCuenta=a}},{key:"setLstProductosDeCuenta",value:function(){var t=this;this.lstProductosDeCuenta=this.lstProductosSeleccionados.filter(function(e){return+e.cuenta==+t.cuentaActiva.numero})}},{key:"agregarProductos",value:function(t){var e=this;1==+t.combo||1==+t.multiple?(this.bloqueoBotones=!0,this.dialog.open(Ka,{maxWidth:"50%",data:new Va(t,"S\xed","No")}).afterClosed().subscribe(function(t){t&&t.respuesta&&t.seleccion.receta.length>0?e.comandaSrvc.saveDetalleCombo(e.mesaEnUso.comanda,e.cuentaActiva.cuenta,t.seleccion).subscribe(function(t){t.exito?(e.mesaEnUso=t.comanda,e.llenaProductosSeleccionados(e.mesaEnUso),e.setSelectedCuenta(+e.cuentaActiva.numero)):e.snackBar.open("ERROR:".concat(t.mensaje),"Comanda",{duration:3e3}),e.bloqueoBotones=!1}):(e.bloqueoBotones=!1,e.snackBar.open("Error, Debe seleccionar los productos del combo","Comanda",{duration:7e3}))})):this.addProductoSelected(t)}},{key:"addProductoSelected",value:function(t){var e=this;if(this.bloqueoBotones=!0,+this.cuentaActiva.numero){var n=this.lstProductosSeleccionados.findIndex(function(n){return+n.id==+t.id&&+n.cuenta==+e.cuentaActiva.numero&&0==+n.impreso});if(n<0)this.detalleComanda={articulo:t.id,cantidad:1,precio:+t.precio,total:1*+t.precio,notas:""},this.comandaSrvc.saveDetalle(this.mesaEnUso.comanda,this.cuentaActiva.cuenta,this.detalleComanda).subscribe(function(t){t.exito?(e.mesaEnUso=t.comanda,e.llenaProductosSeleccionados(e.mesaEnUso),e.setSelectedCuenta(+e.cuentaActiva.numero)):e.snackBar.open("ERROR:".concat(t.mensaje),"Comanda",{duration:3e3}),e.bloqueoBotones=!1});else{var a=this.lstProductosSeleccionados[n];this.detalleComanda={detalle_cuenta:a.detalle_cuenta,detalle_comanda:a.detalle_comanda,articulo:a.id,cantidad:+a.cantidad+1,precio:+a.precio,total:(+a.cantidad+1)*+a.precio,notas:a.notas},this.comandaSrvc.saveDetalle(this.mesaEnUso.comanda,this.cuentaActiva.cuenta,this.detalleComanda).subscribe(function(t){t.exito?(e.mesaEnUso=t.comanda,e.llenaProductosSeleccionados(e.mesaEnUso),e.setSelectedCuenta(+e.cuentaActiva.numero)):e.snackBar.open("ERROR:".concat(t.mensaje),"Comanda",{duration:3e3}),e.bloqueoBotones=!1})}this.setLstProductosDeCuenta()}}},{key:"updProductosCuenta",value:function(t){var e=this,n=t.listaProductos||[],a=this.lstProductosSeleccionados.filter(function(t){return+t.cuenta!=+e.cuentaActiva.numero});this.lstProductosSeleccionados=n.length>0?a.concat(n):a,t.comanda&&(this.mesaEnUso=t.comanda,this.llenaProductosSeleccionados(this.mesaEnUso),this.setSelectedCuenta(+this.cuentaActiva.numero))}},{key:"prepProductosComanda",value:function(e){var n,a=[],o=t(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;a.push({articulo:i.id,cantidad:i.cantidad,precio:i.precio,total:i.total,notas:i.notas,impreso:1,detalle_comanda:i.detalle_comanda,detalle_cuenta:i.detalle_cuenta})}}catch(r){o.e(r)}finally{o.f()}return a}},{key:"validarImpresion",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this.configSrvc.getConfig(Re.a.CONSTANTES.RT_INGRESO_NUMERO_PEDIDO);if(1==+this.mesaEnUso.mesa.esmostrador&&a&&!this.mesaEnUso.numero_pedido){var o=this.configSrvc.getConfig(Re.a.CONSTANTES.RT_TOTAL_NUMEROS_PEDIDO);(!o||o<=0)&&(o=30),this.dialog.open(ja,{maxWidth:"50%",data:new Na("Numero de Pedido",o,"S\xed","No")}).afterClosed().subscribe(function(a){a&&a.respuesta&&a.pedido?(t.mesaEnUso.numero_pedido=a.pedido,t.printComanda(e,n)):t.snackBar.open("Error, Debe seleccionar un numero de pedido","Comanda",{duration:7e3})})}else this.printComanda(e,n)}},{key:"printComanda",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.bloqueoBotones=!0,this.impreso=0;for(var a=this.configSrvc.getConfig(Re.a.CONSTANTES.RT_MODO_COMANDA)||1,o=function(o){var i=t.mesaEnUso.cuentas[o];t.cuentaActiva=t.mesaEnUso.cuentas.find(function(t){return+t.numero==+i.numero});var r=t.lstProductosSeleccionados.filter(function(e){return+e.cuenta==+t.cuentaActiva.numero}),c=r.filter(function(t){return 0==+t.impreso&&+t.cantidad>0});c.length>0?(r.map(function(t){return t.impreso=1}),t.noComanda=t.mesaEnUso.comanda,t.cuentaActiva.productos=t.prepProductosComanda(r),t.mesaEnUso.cuentas.findIndex(function(e){return+e.cuenta==+t.cuentaActiva.cuenta})>-1&&t.comandaSrvc.save({area:t.mesaEnUso.mesa.area.area,mesa:t.mesaEnUso.mesa.mesa,mesero:t.mesaEnUso.usuario,comanda:t.mesaEnUso.comanda,cuentas:t.mesaEnUso.cuentas,numero_pedido:t.mesaEnUso.numero_pedido}).subscribe(function(o){o.exito?(t.mesaEnUso.numero_pedido=o.comanda.numero_pedido,t.comandaSrvc.setProductoImpreso(i.cuenta).subscribe(function(o){o.exito&&t.impreso++,t.llenaProductosSeleccionados(o.comanda),t.setSelectedCuenta(i.numero),t.snackBar.open("Cuenta actualizada","Cuenta #".concat(i.numero),{duration:3e3});var r=[],s=[];try{r=c.filter(function(t){return 0==+t.impresora.bluetooth}),s=c.filter(function(t){return 1==+t.impresora.bluetooth})}catch(l){console.log("PRODUCTOS A IMPRIMIR = ",c),console.log("NORMAL = ",r),console.log("BT = ",s),console.log(l)}e?t.printComandaPDF():(r.length>0&&(3!==a?(t.socket.emit("print:comanda","".concat(JSON.stringify({Tipo:"Comanda",Nombre:t.cuentaActiva.nombre,Numero:t.noComanda,DetalleCuenta:r,Ubicacion:"".concat(t.mesaEnUso.mesa.area.nombre," - Mesa ").concat(t.mesaEnUso.mesa.etiqueta||t.mesaEnUso.mesa.numero),Mesero:"".concat(t.mesaEnUso.mesero.nombres," ").concat(t.mesaEnUso.mesero.apellidos),Total:null,NumeroPedido:t.mesaEnUso.numero_pedido,NotasGenerales:t.mesaEnUso.notas_generales||""}))),t.snackBar.open("Imprimiendo comanda #".concat(t.noComanda),"Comanda",{duration:7e3})):t.snackBar.open("Comanda #".concat(t.noComanda," enviada a cocina"),"Comanda",{duration:7e3}),t.bloqueoBotones=!1),s.length>0&&3!==a&&t.printToBT(JSON.stringify({Tipo:"Comanda",Nombre:t.cuentaActiva.nombre,Numero:t.noComanda,DetalleCuenta:s,Ubicacion:"".concat(t.mesaEnUso.mesa.area.nombre," - Mesa ").concat(t.mesaEnUso.mesa.etiqueta||t.mesaEnUso.mesa.numero),Mesero:"".concat(t.mesaEnUso.mesero.nombres," ").concat(t.mesaEnUso.mesero.apellidos),Total:null,NumeroPedido:t.mesaEnUso.numero_pedido}))),+t.impreso===t.mesaEnUso.cuentas.length&&(t.impreso=0,t.socket.emit("refrescar:mesa",{mesaenuso:t.mesaEnUso}),t.socket.emit("refrescar:listaCocina",{mesaenuso:t.mesaEnUso}),0==+t.mesaEnUso.mesa.esmostrador?n?n.close():t.closeSideNavEv.emit():t.cobrarCuenta(n))})):t.snackBar.open("ERROR: ".concat(o.mensaje),"Cuenta #".concat(t.cuentaActiva.numero),{duration:3e3}),t.bloqueoBotones=!1})):(t.impreso++,t.bloqueoBotones=!1)},i=0;i<this.mesaEnUso.cuentas.length;i++)o(i)}},{key:"printCuenta",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.bloqueoBotones=!0,this.lstProductosAImprimir=this.lstProductosDeCuenta.filter(function(t){return 1==+t.impreso}),this.setSumaCuenta(this.lstProductosAImprimir);var e=this.sumaDetalle(this.lstProductosAImprimir),n=this.mesaEnUso.mesa.impresora||this.mesaEnUso.mesa.area.impresora,a=this.configSrvc.getConfig(Re.a.CONSTANTES.RT_IMPRIME_PROPINA_SUGERIDA),o={Tipo:"Cuenta",Nombre:this.cuentaActiva.nombre,Numero:null,DetalleCuenta:this.lstProductosAImprimir,Total:e,Empresa:this.ls.get(Re.a.usrTokenVar).empresa,Restaurante:this.ls.get(Re.a.usrTokenVar).restaurante,PropinaSugerida:a?(.1*e).toFixed(2):null,Impresora:n,Ubicacion:"".concat(this.mesaEnUso.mesa.area.nombre," - Mesa ").concat(this.mesaEnUso.mesa.etiqueta||this.mesaEnUso.mesa.numero," - Comanda ").concat(this.mesaEnUso.comanda),Mesero:"".concat(this.mesaEnUso.mesero.nombres," ").concat(this.mesaEnUso.mesero.apellidos)};0==+n.bluetooth?this.socket.emit("print:cuenta","".concat(JSON.stringify(o))):this.printToBT(JSON.stringify(o)),this.snackBar.open("Imprimiendo cuenta de ".concat(this.cuentaActiva.nombre),"Cuenta",{duration:7e3}),this.bloqueoBotones=!1,t?t.close():this.closeSideNavEv.emit()}},{key:"unirCuentas",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.dialog.open(Zn,{width:"55%",data:{lstProductosSeleccionados:this.lstProductosSeleccionados,mesaEnUso:this.mesaEnUso}}).afterClosed().subscribe(function(n){n&&(e?e.close():t.closeSideNavEv.emit())})}},{key:"cobrarCuenta",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.comandaSrvc.getCuenta(this.cuentaActiva.cuenta).subscribe(function(n){if(n.pendiente.length>0)t.snackBar.open("Cobro","Tiene productos sin comandar",{duration:3e3});else{var a=t.lstProductosDeCuenta.filter(function(t){return 1==+t.impreso});a.length>0?t.dialog.open(Ia,{width:"95%",data:{mesaenuso:t.mesaEnUso,cuenta:t.cuentaActiva.nombre,idcuenta:t.cuentaActiva.cuenta,productosACobrar:a,porcentajePropina:0,impresora:0==+t.mesaEnUso.mesa.esmostrador?t.mesaEnUso.mesa.area.impresora_factura||null:t.mesaEnUso.mesa.impresora||t.mesaEnUso.mesa.area.impresora,clientePedido:t.clientePedido}}).afterClosed().subscribe(function(n){n&&"closePanel"!==n?(t.cambiarEstatusCuenta(n),e?e.close(t.mesaEnUso):t.closeSideNavEv.emit()):"closePanel"===n&&(e?e.close(t.mesaEnUso):t.closeSideNavEv.emit())}):t.snackBar.open("Cobro","Sin productos a cobrar.",{duration:3e3})}})}}]),e}())).\u0275fac=function(t){return new(t||Qo)(q.Nb(N.f),q.Nb(N.a),q.Nb(N.b),q.Nb(O.b),q.Nb(Qn),q.Nb(da.a),q.Nb(He.a),q.Nb(ho.a),q.Nb(go.a),q.Nb(Ba.a),q.Nb(we))},Qo.\u0275cmp=q.Hb({type:Qo,selectors:[["app-tran-comanda-alt"]],viewQuery:function(t,e){var n;1&t&&q.Kc(qo,1),2&t&&q.sc(n=q.cc())&&(e.txtCodigoBarras=n.first)},features:[q.zb],decls:23,vars:16,consts:[["fxLayout","row","fxLayout.xs","column"],["fxFlex","50%","fxFelx.xs","100%","fxLayoutAlign","start start"],[1,"bld",2,"font-size","16pt","margin-left","10px"],["fxFlex","50%","fxFelx.xs","100%","fxLayoutAlign","end start"],["mat-raised-button","","type","button","color","warn",3,"disabled","click"],["mat-raised-button","","type","button","color","accent",2,"margin-left","8px",3,"disabled","click"],["mat-dialog-content","",1,"contenido"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","center center",1,"divSeparacion"],["color","accent",3,"disabled","selected","click",4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","start center"],["selected","","color","accent",3,"disabled","click",4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","start center","class","divSubCategorias",4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","start start"],["fxFlex","55%","fxFlex.xs","100%","fxFlex.sm","100%","fxLayout","row wrap","fxLayoutGap","8px grid","fxLayoutAlign","start start",1,"divArticulos"],["fxFlex","20%","fxFlex.xs","100%","fxFlex.sm","33%","fxFlex.md","25%",4,"ngFor","ngForOf"],["fxFlex","45%","fxFlex.xs","100%","fxFlex.sm","100%",1,"divArticulos"],[3,"listaProductos","noCuenta","IdComanda","IdCuenta","bloqueoBotones","mesaEnUso","productoRemovedEv"],["color","accent",3,"disabled","selected","click"],[3,"click"],["selected","","color","accent",3,"disabled","click"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","start center",1,"divSubCategorias"],["selected","","color","warn","class","btnAccion",3,"disabled","click",4,"ngFor","ngForOf"],["selected","","color","warn",1,"btnAccion",3,"disabled","click"],["fxFlex","20%","fxFlex.xs","100%","fxFlex.sm","33%","fxFlex.md","25%"],[1,"mat-elevation-z4",3,"click"]],template:function(t,e){1&t&&(q.Tb(0,"div",0),q.Tb(1,"div",1),q.Tb(2,"span",2),q.Fc(3),q.Sb(),q.Sb(),q.Tb(4,"div",3),q.Tb(5,"button",4),q.bc("click",function(){return e.abrirAccionesComanda(e.dialogRef)}),q.Fc(6," Acciones "),q.Sb(),q.Tb(7,"button",5),q.bc("click",function(){return e.cerrar()}),q.Fc(8," Cerrar "),q.Sb(),q.Sb(),q.Sb(),q.Tb(9,"div",6),q.Tb(10,"div",7),q.Tb(11,"mat-chip-list"),q.Dc(12,zo,2,3,"mat-chip",8),q.Dc(13,$o,2,0,"mat-chip",9),q.Sb(),q.Sb(),q.Tb(14,"div",10),q.Tb(15,"mat-chip-list"),q.Dc(16,Go,2,2,"mat-chip",11),q.Sb(),q.Sb(),q.Dc(17,Vo,3,1,"div",12),q.Tb(18,"div",13),q.Tb(19,"div",14),q.Dc(20,Ko,5,1,"div",15),q.Sb(),q.Tb(21,"div",16),q.Tb(22,"app-lista-productos-comanda",17),q.bc("productoRemovedEv",function(t){return e.updProductosCuenta(t)}),q.Sb(),q.Sb(),q.Sb(),q.Sb()),2&t&&(q.Cb(3),q.Jc(" ",e.mesaEnUso.mesa.area.nombre," - Mesa",e.mesaEnUso.mesa.numero," - Comanda ",e.mesaEnUso.comanda," "),q.Cb(2),q.lc("disabled",e.bloqueoBotones),q.Cb(2),q.lc("disabled",e.bloqueoBotones),q.Cb(5),q.lc("ngForOf",e.mesaEnUso.cuentas),q.Cb(1),q.lc("ngIf",0==+e.mesaEnUso.mesa.esmostrador&&0==+e.mesaEnUso.mesa.escallcenter),q.Cb(3),q.lc("ngForOf",e.categorias),q.Cb(1),q.lc("ngForOf",e.listaSubCategorias),q.Cb(3),q.lc("ngForOf",e.articulos),q.Cb(2),q.lc("listaProductos",e.lstProductosDeCuenta)("noCuenta",+e.cuentaActiva.numero)("IdComanda",e.mesaEnUso.comanda)("IdCuenta",e.cuentaActiva.cuenta)("bloqueoBotones",e.bloqueoBotones)("mesaEnUso",e.mesaEnUso))},directives:[Ra.c,Ra.a,Ra.b,w.a,N.d,ge.b,d.l,d.m,Ra.d,Lo,ge.a,x.a,x.c],styles:[".contenido[_ngcontent-%COMP%]{max-height:80vh!important;height:100%;overflow-y:auto;padding:0 5px}.divSubCategorias[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px}.divArticulos[_ngcontent-%COMP%]{padding:3px 8px;overflow-y:auto;margin:0;height:73vh}.divArticulos[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]{width:200px;max-height:95px}.divSeparacion[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px}.bordeTest2[_ngcontent-%COMP%]{border:1px solid #00f}.bordeTest3[_ngcontent-%COMP%]{border:1px solid #90ee90}@media (max-height:768px){.divArticulos[_ngcontent-%COMP%]{height:60vh}}@media (min-height:769px) and (max-height:960px){.divArticulos[_ngcontent-%COMP%]{height:69vh}}"]}),Qo);function Jo(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",6),q.bc("click",function(){q.xc(n);var t=q.fc().$implicit;return q.fc().clickOnSubCategoria(t)}),q.Fc(1),q.Sb()}if(2&t){var a=q.fc().$implicit,o=q.fc();q.lc("disabled",o.bloqueoBotones),q.Cb(1),q.Hc(" ",a.descripcion," ")}}function Yo(t,e){if(1&t&&(q.Rb(0),q.Dc(1,Jo,2,2,"button",5),q.Qb()),2&t){var n=e.$implicit;q.Cb(1),q.lc("ngIf",n.mostrarEnPos)}}function Zo(t,e){1&t&&q.Ob(0,"hr")}function ti(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",7),q.bc("click",function(){q.xc(n);var t=e.$implicit;return q.fc().clickOnArticulo(t)}),q.Fc(1),q.Sb()}if(2&t){var a=e.$implicit,o=q.fc();q.lc("disabled",o.bloqueoBotones),q.Cb(1),q.Hc(" ",a.descripcion," ")}}var ei,ni=((ei=function(){function e(n,a){var o=this;u(this,e),this.articuloSrvc=n,this.ls=a,this.bloqueoBotones=!1,this.productoClickedEv=new q.o,this.categoriasFilledEv=new q.o,this.categorias=[],this.subcategorias=[],this.articulos=[],this.loadArbolArticulos=function(){o.articuloSrvc.getArbolArticulos(o.ls.get(Re.a.usrTokenVar).sede||0).subscribe(function(t){o.fillCategorias(t)})},this.fillCategorias=function(e){o.categorias=[],o.subcategorias=[],o.articulos=[];var n,a=t(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;o.categorias.push(i)}}catch(r){a.e(r)}finally{a.f()}o.categoriasFilledEv.emit(o.categorias)},this.fillSubCategorias=function(e){o.subcategorias=[],o.articulos=[];var n,a=t(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;o.subcategorias.push(i)}}catch(r){a.e(r)}finally{a.f()}},this.fillArticulos=function(e){o.articulos=[];var n,a=t(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;o.articulos.push(i)}}catch(r){a.e(r)}finally{a.f()}},this.clickOnCategoria=function(t){t.categoria_grupo.length>0&&o.fillSubCategorias(t.categoria_grupo)},this.clickOnSubCategoria=function(t){t.articulo.length>0&&o.fillArticulos(t.articulo)},this.clickOnArticulo=function(t){o.productoClickedEv.emit({id:+t.articulo,nombre:t.descripcion,precio:+t.precio,impresora:t.impresora,presentacion:t.presentacion,codigo:t.codigo,combo:t.combo,multiple:t.multiple})}}return b(e,[{key:"ngOnInit",value:function(){this.loadArbolArticulos()}}]),e}()).\u0275fac=function(t){return new(t||ei)(q.Nb(Ba.a),q.Nb(He.a))},ei.\u0275cmp=q.Hb({type:ei,selectors:[["app-lista-producto-alt"]],inputs:{bloqueoBotones:"bloqueoBotones"},outputs:{productoClickedEv:"productoClickedEv",categoriasFilledEv:"categoriasFilledEv"},decls:7,vars:3,consts:[[1,"row"],[1,"col","m12","s12"],[4,"ngFor","ngForOf"],[4,"ngIf"],["mat-raised-button","","class","btnAccion","color","warn",3,"disabled","click",4,"ngFor","ngForOf"],["mat-raised-button","","class","btnAccion","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","color","warn",1,"btnAccion",3,"disabled","click"]],template:function(t,e){1&t&&(q.Tb(0,"div",0),q.Tb(1,"div",1),q.Dc(2,Yo,2,1,"ng-container",2),q.Sb(),q.Sb(),q.Dc(3,Zo,1,0,"hr",3),q.Tb(4,"div",0),q.Tb(5,"div",1),q.Dc(6,ti,2,2,"button",4),q.Sb(),q.Sb()),2&t&&(q.Cb(2),q.lc("ngForOf",e.subcategorias),q.Cb(1),q.lc("ngIf",e.articulos.length>0),q.Cb(3),q.lc("ngForOf",e.articulos))},directives:[d.l,d.m,w.a],styles:[""]}),ei),ai=["appLstProdAlt"],oi=["txtCodigoBarras"];function ii(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",27),q.bc("click",function(){q.xc(n);var t=e.$implicit;return q.fc().setSelectedCuenta(t.numero)}),q.Fc(1),q.Sb()}if(2&t){var a=e.$implicit;q.lc("disabled",1==+a.cerrada),q.Cb(1),q.Hc(" ",a.nombre," ")}}function ri(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",28),q.bc("click",function(){return q.xc(n),q.fc().nuevaCuenta()}),q.Fc(1," Nueva "),q.Sb()}}var ci=function(){return{standalone:!0}};function si(t,e){if(1&t){var n=q.Ub();q.Tb(0,"mat-form-field",29),q.Tb(1,"input",30,31),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().codigoBarras=t})("keyup.enter",function(){return q.xc(n),q.fc().buscarArticulo()}),q.Sb(),q.Sb()}if(2&t){var a=q.fc();q.Cb(1),q.lc("ngModel",a.codigoBarras)("ngModelOptions",q.nc(2,ci))}}function li(t,e){1&t&&q.Ob(0,"br")}function ui(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",33),q.bc("click",function(){q.xc(n);var t=q.fc().$implicit;return q.fc().clickOnCategoria(t)}),q.Fc(1),q.Sb()}if(2&t){var a=q.fc().$implicit,o=q.fc();q.lc("disabled",o.bloqueoBotones||!o.cuentaActiva.cuenta),q.Cb(1),q.Hc(" ",a.descripcion," ")}}function di(t,e){if(1&t&&(q.Rb(0),q.Dc(1,ui,2,2,"button",32),q.Qb()),2&t){var n=e.$implicit;q.Cb(1),q.lc("ngIf",n.mostrarEnPos)}}function bi(t,e){if(1&t&&(q.Tb(0,"span",11),q.Fc(1),q.Sb()),2&t){var n=q.fc();q.Cb(1),q.Hc("Cuenta de ",n.cuentaActiva.nombre,"")}}function mi(t,e){1&t&&(q.Tb(0,"span",11),q.Fc(1,"Por favor seleccione una cuenta. Gracias."),q.Sb())}function fi(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",20),q.bc("click",function(){return q.xc(n),q.fc().validarImpresion()}),q.Fc(1," Comanda "),q.Sb()}if(2&t){var a=q.fc();q.lc("disabled",!a.cuentaActiva.nombre||a.bloqueoBotones)}}function pi(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",20),q.bc("click",function(){return q.xc(n),q.fc().printCuenta()}),q.Fc(1," Cuenta "),q.Sb()}if(2&t){var a=q.fc();q.lc("disabled",!a.cuentaActiva.nombre||a.bloqueoBotones)}}function hi(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",20),q.bc("click",function(){return q.xc(n),q.fc().distribuirProductos()}),q.Fc(1," Distribuir "),q.Sb()}if(2&t){var a=q.fc();q.lc("disabled",a.mesaEnUso.cuentas.length<2||a.bloqueoBotones)}}function gi(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",20),q.bc("click",function(){return q.xc(n),q.fc().unirCuentas()}),q.Fc(1," Unir cuentas "),q.Sb()}if(2&t){var a=q.fc();q.lc("disabled",a.mesaEnUso.cuentas.length<2||a.bloqueoBotones)}}function vi(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",20),q.bc("click",function(){return q.xc(n),q.fc().cobrarCuenta()}),q.Fc(1," Cobrar cuenta "),q.Sb()}if(2&t){var a=q.fc();q.lc("disabled",!a.cuentaActiva.nombre||a.esCajero()||a.bloqueoBotones)}}function Si(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",20),q.bc("click",function(){return q.xc(n),q.fc().enviarPedido()}),q.Fc(1," Enviar pedido "),q.Sb()}if(2&t){var a=q.fc();q.lc("disabled",!a.cuentaActiva.nombre||a.esCajero()||a.bloqueoBotones)}}function Ci(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",20),q.bc("click",function(){return q.xc(n),q.fc().trasladoMesa()}),q.Fc(1," Trasladar "),q.Sb()}if(2&t){var a=q.fc();q.lc("disabled",a.bloqueoBotones)}}function Ti(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",34),q.bc("click",function(){return q.xc(n),q.fc().cerrarMesa()}),q.Fc(1),q.Sb()}if(2&t){var a=q.fc();q.Cb(1),q.Hc(" Cerrar ",0==+a.mesaEnUso.mesa.esmostrador?"Mesa":0==+a.mesaEnUso.mesa.escallcenter?"Mostrador":"Pedido"," ")}}var _i,yi=((_i=function(){function e(n,a,o,i,r,c,s,l){var d=this;u(this,e),this.dialog=n,this.snackBar=a,this.comandaSrvc=o,this.socket=i,this.ls=r,this.pdfServicio=c,this.configSrvc=s,this.articuloSrvc=l,this.clientePedido=null,this.closeSideNavEv=new q.o,this.mesaSavedEv=new q.o,this.showPortalComanda=!1,this.showPortalCuenta=!1,this.noComanda=0,this.sumCuenta=0,this.categorias=[],this.bloqueoBotones=!1,this.rolesUsuario=[],this.impreso=0,this.usaCodigoBarras=!1,this.codigoBarras=null,this.resetMesaEnUso=function(){return d.mesaEnUso={exito:!0,comanda:null,usuario:null,sede:null,estatus:null,mesa:{mesa:null,area:{area:null,sede:null,area_padre:null,nombre:null},numero:null,posx:null,posy:null,tamanio:null,estatus:null},numero_pedido:null,cuentas:[]}},this.resetLstProductosSeleccionados=function(){return d.lstProductosSeleccionados=[]},this.resetLstProductosDeCuenta=function(){return d.lstProductosDeCuenta=[]},this.resetCuentaActiva=function(){return d.cuentaActiva={cuenta:null,numero:null,nombre:null,productos:[]}},this.resetListadoArticulos=function(){return d.appLstProdAlt.loadArbolArticulos()},this.setListaCategorias=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return d.categorias=d.setVerBotones(t)},this.setVerBotones=function(e){var n,a=t(e);try{for(a.s();!(n=a.n()).done;){var o,i=n.value,r=t(i.categoria_grupo);try{t:for(r.s();!(o=r.n()).done;){var c,s=o.value,l=t(s.articulo);try{for(l.s();!(c=l.n()).done;)if(1==+c.value.mostrar_pos){s.mostrarEnPos=!0,i.mostrarEnPos=!0;continue t}}catch(u){l.e(u)}finally{l.f()}}}catch(u){r.e(u)}finally{r.f()}}}catch(u){a.e(u)}finally{a.f()}return e},this.clickOnCategoria=function(t){return d.appLstProdAlt.fillSubCategorias(t.categoria_grupo)},this.buscarArticulo=function(){d.codigoBarras&&d.codigoBarras.trim().length>0&&d.articuloSrvc.getArticulos({codigo:d.codigoBarras.trim()}).subscribe(function(t){if(t&&t.length>0){var e=t[0];d.agregarProductos({id:+e.articulo,nombre:e.descripcion,precio:+e.precio,impresora:e.impresora,presentacion:e.presentacion,codigo:e.codigo,combo:e.combo,multiple:e.multiple}),d.codigoBarras=null,d.txtCodigoBarras.focus()}})},this.llenaProductosSeleccionados=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.mesaEnUso;null==d.mesaEnUso.comanda&&(d.mesaEnUso=e),d.lstProductosSeleccionados=[];var n,a=t(e.cuentas);try{for(a.s();!(n=a.n()).done;){var o,i=n.value,r=t(i.productos);try{for(r.s();!(o=r.n()).done;){var c=o.value;d.lstProductosSeleccionados.push({id:+c.articulo.articulo,nombre:c.articulo.descripcion,cuenta:+c.numero_cuenta||1,idcuenta:+i.cuenta,cantidad:+c.cantidad,impreso:+c.impreso,precio:parseFloat(c.precio)||10,total:parseFloat(c.total)||parseFloat(c.cantidad)*parseFloat(c.precio),notas:c.notas||"",showInputNotas:!1,itemListHeight:"70px",detalle_comanda:+c.detalle_comanda,detalle_cuenta:+c.detalle_cuenta,impresora:c.articulo.impresora,detalle:c.detalle,monto_extra:+c.monto_extra||0,multiple:+c.articulo.multiple,combo:+c.articulo.combo})}}catch(s){r.e(s)}finally{r.f()}}}catch(s){a.e(s)}finally{a.f()}},this.cerrarMesa=function(){d.comandaSrvc.cerrarMesa(d.mesaEnUso.mesa.mesa).subscribe(function(t){t.exito?(d.snackBar.open(t.mensaje,"Comanda",{duration:3e3}),d.mesaEnUso.mesa.estatus=1,d.mesaSavedEv.emit(),d.socket.emit("refrescar:mesa",{mesaenuso:d.mesaEnUso})):d.snackBar.open("ERROR: ".concat(t.mensaje),"Comanda",{duration:7e3})})},this.printToBT=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=window.open("com.restouch.impresion://impresion/".concat(t),"PrntBT","height=200,width=200,menubar=no,location=no,resizable=no,scrollbars=no,status=no");setTimeout(function(){return e.close()},3e3),d.bloqueoBotones=!1},this.printComandaPDF=function(){var t=+d.cuentaActiva.cuenta;d.pdfServicio.getComanda(t).subscribe(function(e){if(e){var n=new Blob([e],{type:"application/pdf"}),a=window.URL.createObjectURL(n);window.open(a,"cuenta_".concat(t),"height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no")}else d.snackBar.open("No se pudo generar la comanda...","Comanda",{duration:3e3})})},this.sumaDetalle=function(e){var n,a=0,o=t(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;a+=+i.total||0,a+=+i.monto_extra||0}}catch(r){o.e(r)}finally{o.f()}return a},this.enviarPedido=function(){var t=d.mesaEnUso.cuentas[0];d.cuentaActiva=d.mesaEnUso.cuentas.find(function(e){return+e.numero==+t.numero});var e=d.lstProductosSeleccionados.filter(function(t){return+t.cuenta==+d.cuentaActiva.numero});e.map(function(t){return t.impreso=1}),d.noComanda=d.mesaEnUso.comanda,d.cuentaActiva.productos=d.prepProductosComanda(e),d.mesaEnUso.cuentas.findIndex(function(t){return+t.cuenta==+d.cuentaActiva.cuenta})>-1&&d.comandaSrvc.save({area:d.mesaEnUso.mesa.area.area,mesa:d.mesaEnUso.mesa.mesa,mesero:d.mesaEnUso.usuario,comanda:d.mesaEnUso.comanda,cuentas:d.mesaEnUso.cuentas,numero_pedido:d.mesaEnUso.numero_pedido}).subscribe(function(e){e.exito&&(d.mesaEnUso.numero_pedido=e.comanda.numero_pedido,d.comandaSrvc.setProductoImpreso(t.cuenta).subscribe(function(e){d.llenaProductosSeleccionados(e.comanda),d.setSelectedCuenta(t.numero),d.cobrarCuenta()}))})},this.cambiarEstatusCuenta=function(t){var e=d.mesaEnUso.cuentas.findIndex(function(e){return+e.cuenta==+t.cuenta});d.mesaEnUso.cuentas[e].cerrada=+t.cerrada},this.esCajero=function(){return!1},this.trasladoMesa=function(){d.dialog.open(oa,{width:"55%",data:{mesaEnUso:d.mesaEnUso}}).afterClosed().subscribe(function(t){t&&(d.socket.emit("refrescar:mesa",{mesaenuso:d.mesaEnUso}),d.closeSideNavEv.emit(d.mesaEnUso))})},this.getNotasGenerales=function(){d.dialog.open(Za,{width:"50%",data:{notasGenerales:d.mesaEnUso.notas_generales||""}}).afterClosed().subscribe(function(t){null!==t&&t.trim().length>0&&d.comandaSrvc.saveNotasGenerales({comanda:d.mesaEnUso.comanda,notas_generales:t}).subscribe(function(e){e.exito?(d.mesaEnUso.notas_generales=t,d.snackBar.open(e.mensaje,"Comanda",{duration:3e3})):d.snackBar.open("ERROR: ".concat(e.mensaje),"Comanda",{duration:7e3})})})},this.nuevaCuenta=function(){d.dialog.open(to,{width:"50%",data:{mesaEnUso:d.mesaEnUso}}).afterClosed().subscribe(function(t){t&&d.closeSideNavEv.emit()})},this.distribuirProductos=function(){d.dialog.open(oo,{width:"50%",data:{mesaEnUso:d.mesaEnUso,lstProductos:d.lstProductosSeleccionados||[]}}).afterClosed().subscribe(function(t){t&&d.closeSideNavEv.emit()})}}return b(e,[{key:"ngOnInit",value:function(){var t=this;this.resetMesaEnUso(),this.resetLstProductosSeleccionados(),this.resetLstProductosDeCuenta(),this.resetCuentaActiva(),this.impreso=0,this.noComanda=this.mesaEnUso.comanda||0,this.llenaProductosSeleccionados(),this.ls.get(Re.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(Re.a.usrTokenVar).sede_uuid),this.socket.on("reconnect",function(){return t.socket.emit("joinRestaurant",t.ls.get(Re.a.usrTokenVar).sede_uuid)})),this.usaCodigoBarras=this.configSrvc.getConfig(Re.a.CONSTANTES.RT_USA_CODIGO_BARRAS)||!1}},{key:"setSelectedCuenta",value:function(t){this.bloqueoBotones=!0,this.cuentaActiva=this.mesaEnUso.cuentas.find(function(e){return+e.numero==+t}),this.setLstProductosDeCuenta(),this.bloqueoBotones=!1}},{key:"setSumaCuenta",value:function(e){var n,a=0,o=t(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;a+=i.precio*i.cantidad}}catch(r){o.e(r)}finally{o.f()}this.sumCuenta=a}},{key:"setLstProductosDeCuenta",value:function(){var t=this;this.lstProductosDeCuenta=this.lstProductosSeleccionados.filter(function(e){return+e.cuenta==+t.cuentaActiva.numero})}},{key:"agregarProductos",value:function(t){var e=this;1==+t.combo||1==+t.multiple?(this.bloqueoBotones=!0,this.dialog.open(Ka,{maxWidth:"50%",data:new Va(t,"S\xed","No")}).afterClosed().subscribe(function(t){t&&t.respuesta&&t.seleccion.receta.length>0?e.comandaSrvc.saveDetalleCombo(e.mesaEnUso.comanda,e.cuentaActiva.cuenta,t.seleccion).subscribe(function(t){t.exito?(e.mesaEnUso=t.comanda,e.llenaProductosSeleccionados(e.mesaEnUso),e.setSelectedCuenta(+e.cuentaActiva.numero)):e.snackBar.open("ERROR:".concat(t.mensaje),"Comanda",{duration:3e3}),e.bloqueoBotones=!1}):(e.bloqueoBotones=!1,e.snackBar.open("Error, Debe seleccionar los productos del combo","Comanda",{duration:7e3}))})):this.addProductoSelected(t)}},{key:"addProductoSelected",value:function(t){var e=this;if(this.bloqueoBotones=!0,+this.cuentaActiva.numero){var n=this.lstProductosSeleccionados.findIndex(function(n){return+n.id==+t.id&&+n.cuenta==+e.cuentaActiva.numero&&0==+n.impreso});if(n<0)this.detalleComanda={articulo:t.id,cantidad:1,precio:+t.precio,total:1*+t.precio,notas:""},this.comandaSrvc.saveDetalle(this.mesaEnUso.comanda,this.cuentaActiva.cuenta,this.detalleComanda).subscribe(function(t){t.exito?(e.mesaEnUso=t.comanda,e.llenaProductosSeleccionados(e.mesaEnUso),e.setSelectedCuenta(+e.cuentaActiva.numero)):e.snackBar.open("ERROR:".concat(t.mensaje),"Comanda",{duration:3e3}),e.bloqueoBotones=!1});else{var a=this.lstProductosSeleccionados[n];this.detalleComanda={detalle_cuenta:a.detalle_cuenta,detalle_comanda:a.detalle_comanda,articulo:a.id,cantidad:+a.cantidad+1,precio:+a.precio,total:(+a.cantidad+1)*+a.precio,notas:a.notas},this.comandaSrvc.saveDetalle(this.mesaEnUso.comanda,this.cuentaActiva.cuenta,this.detalleComanda).subscribe(function(t){t.exito?(e.mesaEnUso=t.comanda,e.llenaProductosSeleccionados(e.mesaEnUso),e.setSelectedCuenta(+e.cuentaActiva.numero)):e.snackBar.open("ERROR:".concat(t.mensaje),"Comanda",{duration:3e3}),e.bloqueoBotones=!1})}this.setLstProductosDeCuenta()}}},{key:"updProductosCuenta",value:function(t){var e=this,n=t.listaProductos||[],a=this.lstProductosSeleccionados.filter(function(t){return+t.cuenta!=+e.cuentaActiva.numero});this.lstProductosSeleccionados=n.length>0?a.concat(n):a,t.comanda&&(this.mesaEnUso=t.comanda,this.llenaProductosSeleccionados(this.mesaEnUso),this.setSelectedCuenta(+this.cuentaActiva.numero))}},{key:"prepProductosComanda",value:function(t){for(var e=[],n=0;n<t.length;n++)e.push({articulo:t[n].id,cantidad:t[n].cantidad,precio:t[n].precio,total:t[n].total,notas:t[n].notas,impreso:1,detalle_comanda:t[n].detalle_comanda,detalle_cuenta:t[n].detalle_cuenta});return e}},{key:"validarImpresion",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.configSrvc.getConfig(Re.a.CONSTANTES.RT_INGRESO_NUMERO_PEDIDO);if(1==+this.mesaEnUso.mesa.esmostrador&&n&&!this.mesaEnUso.numero_pedido){var a=this.configSrvc.getConfig(Re.a.CONSTANTES.RT_TOTAL_NUMEROS_PEDIDO);(!a||a<=0)&&(a=30),this.dialog.open(ja,{maxWidth:"50%",data:new Na("Numero de Pedido",a,"S\xed","No")}).afterClosed().subscribe(function(n){n&&n.respuesta&&n.pedido?(t.mesaEnUso.numero_pedido=n.pedido,t.printComanda(e)):t.snackBar.open("Error, Debe seleccionar un numero de pedido","Comanda",{duration:7e3})})}else this.printComanda(e)}},{key:"printComanda",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.bloqueoBotones=!0,this.impreso=0;for(var n=this.configSrvc.getConfig(Re.a.CONSTANTES.RT_MODO_COMANDA)||1,a=function(a){var o=t.mesaEnUso.cuentas[a];t.cuentaActiva=t.mesaEnUso.cuentas.find(function(t){return+t.numero==+o.numero});var i=t.lstProductosSeleccionados.filter(function(e){return+e.cuenta==+t.cuentaActiva.numero}),r=i.filter(function(t){return 0==+t.impreso&&+t.cantidad>0});r.length>0?(i.map(function(t){return t.impreso=1}),t.noComanda=t.mesaEnUso.comanda,t.cuentaActiva.productos=t.prepProductosComanda(i),t.mesaEnUso.cuentas.findIndex(function(e){return+e.cuenta==+t.cuentaActiva.cuenta})>-1&&t.comandaSrvc.save({area:t.mesaEnUso.mesa.area.area,mesa:t.mesaEnUso.mesa.mesa,mesero:t.mesaEnUso.mesero.usuario,comanda:t.mesaEnUso.comanda,cuentas:t.mesaEnUso.cuentas,numero_pedido:t.mesaEnUso.numero_pedido}).subscribe(function(a){a.exito?(t.mesaEnUso.numero_pedido=a.comanda.numero_pedido,t.comandaSrvc.setProductoImpreso(o.cuenta).subscribe(function(a){a.exito&&t.impreso++,t.llenaProductosSeleccionados(a.comanda),t.setSelectedCuenta(o.numero),t.snackBar.open("Cuenta actualizada","Cuenta #".concat(o.numero),{duration:3e3});var i=[],c=[];try{i=r.filter(function(t){return 0==+t.impresora.bluetooth}),c=r.filter(function(t){return 1==+t.impresora.bluetooth})}catch(s){console.log("PRODUCTOS A IMPRIMIR = ",r),console.log("NORMAL = ",i),console.log("BT = ",c),console.log(s)}e?t.printComandaPDF():(i.length>0&&(3!==n?(t.socket.emit("print:comanda","".concat(JSON.stringify({Tipo:"Comanda",Nombre:t.cuentaActiva.nombre,Numero:t.noComanda,DetalleCuenta:i,Ubicacion:"".concat(t.mesaEnUso.mesa.area.nombre," - Mesa ").concat(t.mesaEnUso.mesa.etiqueta||t.mesaEnUso.mesa.numero),Mesero:"".concat(t.mesaEnUso.mesero.nombres," ").concat(t.mesaEnUso.mesero.apellidos),Total:null,NumeroPedido:t.mesaEnUso.numero_pedido,NotasGenerales:t.mesaEnUso.notas_generales||""}))),t.snackBar.open("Imprimiendo comanda #".concat(t.noComanda),"Comanda",{duration:7e3})):t.snackBar.open("Comanda #".concat(t.noComanda," enviada a cocina"),"Comanda",{duration:7e3}),t.bloqueoBotones=!1),c.length>0&&3!==n&&t.printToBT(JSON.stringify({Tipo:"Comanda",Nombre:t.cuentaActiva.nombre,Numero:t.noComanda,DetalleCuenta:c,Ubicacion:"".concat(t.mesaEnUso.mesa.area.nombre," - Mesa ").concat(t.mesaEnUso.mesa.etiqueta||t.mesaEnUso.mesa.numero),Mesero:"".concat(t.mesaEnUso.mesero.nombres," ").concat(t.mesaEnUso.mesero.apellidos),Total:null,NumeroPedido:t.mesaEnUso.numero_pedido}))),+t.impreso===t.mesaEnUso.cuentas.length&&(t.impreso=0,t.socket.emit("refrescar:mesa",{mesaenuso:t.mesaEnUso}),t.socket.emit("refrescar:listaCocina",{mesaenuso:t.mesaEnUso}),0==+t.mesaEnUso.mesa.esmostrador?t.closeSideNavEv.emit():t.cobrarCuenta())})):t.snackBar.open("ERROR: ".concat(a.mensaje),"Cuenta #".concat(t.cuentaActiva.numero),{duration:3e3}),t.bloqueoBotones=!1})):(t.impreso++,t.bloqueoBotones=!1)},o=0;o<this.mesaEnUso.cuentas.length;o++)a(o)}},{key:"printCuenta",value:function(){this.bloqueoBotones=!0,this.lstProductosAImprimir=this.lstProductosDeCuenta.filter(function(t){return 1==+t.impreso}),this.setSumaCuenta(this.lstProductosAImprimir);var t=this.sumaDetalle(this.lstProductosAImprimir),e=this.mesaEnUso.mesa.impresora||this.mesaEnUso.mesa.area.impresora,n=this.configSrvc.getConfig(Re.a.CONSTANTES.RT_IMPRIME_PROPINA_SUGERIDA),a={Tipo:"Cuenta",Nombre:this.cuentaActiva.nombre,Numero:null,DetalleCuenta:this.lstProductosAImprimir,Total:t,Empresa:this.ls.get(Re.a.usrTokenVar).empresa,Restaurante:this.ls.get(Re.a.usrTokenVar).restaurante,PropinaSugerida:n?(.1*t).toFixed(2):null,Impresora:e,Ubicacion:"".concat(this.mesaEnUso.mesa.area.nombre," - Mesa ").concat(this.mesaEnUso.mesa.etiqueta||this.mesaEnUso.mesa.numero," - Comanda ").concat(this.mesaEnUso.comanda),Mesero:"".concat(this.mesaEnUso.mesero.nombres," ").concat(this.mesaEnUso.mesero.apellidos)};0==+e.bluetooth?this.socket.emit("print:cuenta","".concat(JSON.stringify(a))):this.printToBT(JSON.stringify(a)),this.snackBar.open("Imprimiendo cuenta de ".concat(this.cuentaActiva.nombre),"Cuenta",{duration:7e3}),this.bloqueoBotones=!1,this.closeSideNavEv.emit()}},{key:"unirCuentas",value:function(){var t=this;this.dialog.open(Zn,{width:"55%",data:{lstProductosSeleccionados:this.lstProductosSeleccionados,mesaEnUso:this.mesaEnUso}}).afterClosed().subscribe(function(e){e&&t.closeSideNavEv.emit()})}},{key:"cobrarCuenta",value:function(){var t=this;this.comandaSrvc.getCuenta(this.cuentaActiva.cuenta).subscribe(function(e){if(e.pendiente.length>0)t.snackBar.open("Cobro","Tiene productos sin comandar",{duration:3e3});else{var n=t.lstProductosDeCuenta.filter(function(t){return 1==+t.impreso});n.length>0?t.dialog.open(Ia,{width:"95%",data:{mesaenuso:t.mesaEnUso,cuenta:t.cuentaActiva.nombre,idcuenta:t.cuentaActiva.cuenta,productosACobrar:n,porcentajePropina:0,impresora:0==+t.mesaEnUso.mesa.esmostrador?t.mesaEnUso.mesa.area.impresora_factura||null:t.mesaEnUso.mesa.impresora||t.mesaEnUso.mesa.area.impresora,clientePedido:t.clientePedido}}).afterClosed().subscribe(function(e){e&&"closePanel"!==e?(t.cambiarEstatusCuenta(e),t.closeSideNavEv.emit()):"closePanel"===e&&t.closeSideNavEv.emit()}):t.snackBar.open("Cobro","Sin productos a cobrar.",{duration:3e3})}})}}]),e}()).\u0275fac=function(t){return new(t||_i)(q.Nb(N.b),q.Nb(O.b),q.Nb(Qn),q.Nb(da.a),q.Nb(He.a),q.Nb(ho.a),q.Nb(go.a),q.Nb(Ba.a))},_i.\u0275cmp=q.Hb({type:_i,selectors:[["app-tran-comanda"]],viewQuery:function(t,e){var n;1&t&&(q.Kc(ai,1),q.Kc(oi,1)),2&t&&(q.sc(n=q.cc())&&(e.appLstProdAlt=n.first),q.sc(n=q.cc())&&(e.txtCodigoBarras=n.first))},inputs:{mesaEnUso:"mesaEnUso",clientePedido:"clientePedido"},outputs:{closeSideNavEv:"closeSideNavEv",mesaSavedEv:"mesaSavedEv"},decls:46,vars:26,consts:[["fxLayout","row","fxLayout.xs","column"],["fxFlex","50%","fxFelx.xs","100%","fxLayoutAlign","center start"],[1,"bld",2,"font-size","16pt","margin-left","10px"],["fxFlex","50%","fxFelx.xs","100%","fxLayoutAlign","end start"],["mat-raised-button","","type","button","color","accent",2,"margin-left","8px",3,"click"],[1,"divFullSize"],[1,"row"],["align","center",1,"col","m12","s12",2,"padding","0 !important"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"disabled","click",4,"ngFor","ngForOf"],["mat-raised-button","","type","button","class","btnAccion",3,"click",4,"ngIf"],["align","center",1,"col","m6","s12",2,"padding","0 !important"],[1,"bld"],["class","fullWidth","style","margin-left: 10px; margin-right: 10px;",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","bld",4,"ngIf"],["align","center"],["direction","down"],["mat-fab","","color","warn"],[2,"font-size","18pt !important"],["mat-mini-fab","","type","button","color","warn",1,"btnAccion","btnAccionComanda",3,"disabled","click"],["mat-mini-fab","","type","button","color","warn","class","btnAccion btnAccionComanda",3,"disabled","click",4,"ngIf"],["mat-mini-fab","","type","button","color","warn","class","btnAccionComanda",3,"click",4,"ngIf"],[1,"col","m6","s12","mat-elevation-z3","colProductos"],[3,"bloqueoBotones","productoClickedEv","categoriasFilledEv"],["appLstProdAlt",""],[3,"listaProductos","noCuenta","IdComanda","IdCuenta","bloqueoBotones","mesaEnUso","productoRemovedEv"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button",1,"btnAccion",3,"click"],[1,"fullWidth",2,"margin-left","10px","margin-right","10px"],["matInput","","cdkFocusInitial","","type","text","placeholder","C\xf3digo","name","codigoBarras",3,"ngModel","ngModelOptions","ngModelChange","keyup.enter"],["txtCodigoBarras","matInput"],["mat-raised-button","","class","btnAccion","color","accent",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","accent",1,"btnAccion",3,"disabled","click"],["mat-mini-fab","","type","button","color","warn",1,"btnAccionComanda",3,"click"]],template:function(t,e){1&t&&(q.Tb(0,"div",0),q.Tb(1,"div",1),q.Tb(2,"span",2),q.Fc(3),q.Sb(),q.Sb(),q.Tb(4,"div",3),q.Tb(5,"button",4),q.bc("click",function(){return e.closeSideNavEv.emit()}),q.Fc(6," Cerrar Panel "),q.Sb(),q.Sb(),q.Sb(),q.Tb(7,"div",5),q.Tb(8,"div",6),q.Tb(9,"div",7),q.Dc(10,ii,2,2,"button",8),q.Dc(11,ri,2,0,"button",9),q.Sb(),q.Sb(),q.Tb(12,"div",6),q.Tb(13,"div",10),q.Tb(14,"span",11),q.Fc(15,"Productos"),q.Sb(),q.Ob(16,"br"),q.Dc(17,si,3,3,"mat-form-field",12),q.Dc(18,li,1,0,"br",13),q.Dc(19,di,2,1,"ng-container",14),q.Sb(),q.Tb(20,"div",10),q.Dc(21,bi,2,1,"span",15),q.Dc(22,mi,2,0,"span",15),q.Tb(23,"div",16),q.Tb(24,"eco-fab-speed-dial",17),q.Tb(25,"eco-fab-speed-dial-trigger"),q.Tb(26,"button",18),q.Tb(27,"mat-icon",19),q.Fc(28,"keyboard_arrow_down"),q.Sb(),q.Sb(),q.Sb(),q.Tb(29,"eco-fab-speed-dial-actions"),q.Tb(30,"button",20),q.bc("click",function(){return e.getNotasGenerales()}),q.Fc(31," Notas "),q.Sb(),q.Dc(32,fi,2,1,"button",21),q.Dc(33,pi,2,1,"button",21),q.Dc(34,hi,2,1,"button",21),q.Dc(35,gi,2,1,"button",21),q.Dc(36,vi,2,1,"button",21),q.Dc(37,Si,2,1,"button",21),q.Dc(38,Ci,2,1,"button",21),q.Dc(39,Ti,2,1,"button",22),q.Sb(),q.Sb(),q.Sb(),q.Sb(),q.Sb(),q.Tb(40,"div",6),q.Tb(41,"div",23),q.Tb(42,"app-lista-producto-alt",24,25),q.bc("productoClickedEv",function(t){return e.agregarProductos(t)})("categoriasFilledEv",function(t){return e.setListaCategorias(t)}),q.Sb(),q.Sb(),q.Tb(44,"div",23),q.Tb(45,"app-lista-productos-comanda",26),q.bc("productoRemovedEv",function(t){return e.updProductosCuenta(t)}),q.Sb(),q.Sb(),q.Sb(),q.Sb()),2&t&&(q.Cb(3),q.Jc(" ",e.mesaEnUso.mesa.area.nombre," - Mesa ",e.mesaEnUso.mesa.etiqueta||e.mesaEnUso.mesa.numero," - Comanda ",e.mesaEnUso.comanda," "),q.Cb(7),q.lc("ngForOf",e.mesaEnUso.cuentas),q.Cb(1),q.lc("ngIf",0==+e.mesaEnUso.mesa.esmostrador&&0==+e.mesaEnUso.mesa.escallcenter),q.Cb(6),q.lc("ngIf",e.usaCodigoBarras),q.Cb(1),q.lc("ngIf",e.usaCodigoBarras),q.Cb(1),q.lc("ngForOf",e.categorias),q.Cb(2),q.lc("ngIf",e.cuentaActiva.nombre),q.Cb(1),q.lc("ngIf",!e.cuentaActiva.nombre),q.Cb(8),q.lc("disabled",e.bloqueoBotones),q.Cb(2),q.lc("ngIf",0==+e.mesaEnUso.mesa.escallcenter),q.Cb(1),q.lc("ngIf",0==+e.mesaEnUso.mesa.esmostrador),q.Cb(1),q.lc("ngIf",0==+e.mesaEnUso.mesa.esmostrador),q.Cb(1),q.lc("ngIf",0==+e.mesaEnUso.mesa.esmostrador),q.Cb(1),q.lc("ngIf",0==+e.mesaEnUso.mesa.escallcenter),q.Cb(1),q.lc("ngIf",1==+e.mesaEnUso.mesa.escallcenter),q.Cb(1),q.lc("ngIf",0==+e.mesaEnUso.mesa.esmostrador),q.Cb(1),q.lc("ngIf",e.lstProductosSeleccionados.length<=0),q.Cb(3),q.lc("bloqueoBotones",e.bloqueoBotones),q.Cb(3),q.lc("listaProductos",e.lstProductosDeCuenta)("noCuenta",+e.cuentaActiva.numero)("IdComanda",e.mesaEnUso.comanda)("IdCuenta",e.cuentaActiva.cuenta)("bloqueoBotones",e.bloqueoBotones)("mesaEnUso",e.mesaEnUso))},directives:[Ra.c,Ra.a,Ra.b,w.a,d.l,d.m,Oe.b,Oe.d,_.a,Oe.a,ni,Lo,y.b,k.b,f.c,f.k,f.n],styles:[".divFullSize[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:hidden}.col[_ngcontent-%COMP%]{padding-top:1px;padding-bottom:1px}.btnAccionComanda[_ngcontent-%COMP%]{width:135px}.colProductos[_ngcontent-%COMP%]{overflow-y:auto;height:450px!important}@media (max-width:400px){.colProductos[_ngcontent-%COMP%]{height:300px!important}}@media (min-width:401px) and (max-width:1024px){.colProductos[_ngcontent-%COMP%]{height:450px!important}}@media (min-height:985px){.colProductos[_ngcontent-%COMP%]{height:600px!important}}@media (max-height:768px){.colProductos[_ngcontent-%COMP%]{height:400px!important}}"]}),_i),ki=["matTabArea"],xi=["rightSidenav"],Di=["tabArea"],Pi=["snTranComanda"];function Ei(t,e){if(1&t){var n=q.Ub();q.Tb(0,"app-mesa",12),q.bc("onClickMesa",function(t){q.xc(n);var e=q.fc(2);return!e.cargando&&e.onClickMesa(t)}),q.Sb()}if(2&t){var a=e.$implicit,o=q.fc(2);q.lc("configuracion",a)("isDisabled",o.cargando)}}function Fi(t,e){if(1&t){var n=q.Ub();q.Tb(0,"mat-tab",7,8),q.Tb(2,"div",9,10),q.bc("resize",function(t){return q.xc(n),q.fc().onResize(t)},!1,q.wc),q.Dc(4,Ei,1,2,"app-mesa",11),q.Sb(),q.Sb()}if(2&t){var a=e.$implicit;q.mc("label",a.nombre),q.Cb(4),q.lc("ngForOf",a.mesas)}}var Mi,wi,Oi=((wi=function(){function e(n,a,o,i,r,c,s){var l=this;u(this,e),this.dialog=n,this.snackBar=a,this.ls=o,this.areaSrvc=i,this.comandaSrvc=r,this.configSrvc=c,this.socket=s,this.divSize={h:0,w:0},this.cargando=!1,this.lstTabsAreas=[],this.lstTabsAreasForUpdate=[],this.configTipoPantalla=1,this.clientePedido=null,this.actualizar=function(){var t=l.lstTabsAreas.find(function(t){return+t.area==+l.mesaSeleccionada.mesa.area.area}),e=l.lstTabsAreas.findIndex(function(t){return+t.area==+l.mesaSeleccionada.mesa.area.area}),n=t.mesas.findIndex(function(t){return+t.mesa==+l.mesaSeleccionada.mesa.mesa});l.lstTabsAreas[e].mesas[n].estatus=1,l.toggleRightSidenav()},this.resetMesaSeleccionada=function(){return l.mesaSeleccionada={comanda:null,usuario:null,sede:null,estatus:null,mesa:{mesa:null,area:{area:null,sede:null,area_padre:null,nombre:null},numero:null,posx:null,posy:null,tamanio:null,estatus:null},cuentas:[]}},this.loadAreas=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l.cargando=!0,l.areaSrvc.get({sede:+l.ls.get(Re.a.usrTokenVar).sede||0}).subscribe(function(n){t?(l.lstTabsAreasForUpdate=n,l.updateTableStatus(e.mesaenuso)):(l.lstTabsAreas=n,l.cargando=!1)})},this.updateTableStatus=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t(l.lstTabsAreasForUpdate);try{for(a.s();!(e=a.n()).done;){var o,i=e.value,r=t(i.mesas);try{for(r.s();!(o=r.n()).done;){var c=o.value;l.setEstatusMesa({area:+i.area,mesa:+c.mesa},+c.estatus)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){a.e(s)}finally{a.f()}l.cargando=!1,l.rightSidenav.opened&&+l.mesaSeleccionada.comanda==+n.comanda&&l.toggleRightSidenav()},this.onResize=function(t){return l.setDivSize()},this.aperturaCargaMesa=function(t){switch(+t.mesaSelected.estatus){case 1:l.openAbrirMesaDialog(t.mesaSelected);break;case 2:l.loadComandaMesa(t.mesaSelected)}},this.setEstatusMesa=function(t,e){var n=l.lstTabsAreas.findIndex(function(e){return+e.area==+t.area});if(n>-1){var a=l.lstTabsAreas[n].mesas.findIndex(function(e){return+e.mesa==+t.mesa});a>-1&&(l.lstTabsAreas[n].mesas[a].estatus=e)}},this.guardarMesa=function(t){l.comandaSrvc.save(l.mesaSeleccionadaToOpen).subscribe(function(e){if(l.cargando=!1,e.exito)switch(l.socket.emit("refrescar:mesa",{}),l.mesaSeleccionada=e.comanda,l.setEstatusMesa(t,+e.comanda.mesa.estatus),l.snTrancomanda.llenaProductosSeleccionados(l.mesaSeleccionada),l.snTrancomanda.setSelectedCuenta(l.mesaSeleccionada.cuentas[0].numero),l.snTrancomanda.rolesUsuario=l.mesaSeleccionada.turno_rol,l.configTipoPantalla){case 1:l.toggleRightSidenav();break;case 2:l.openTranComandaAlt();break;default:l.toggleRightSidenav()}else l.snackBar.open("".concat(e.mensaje),"ERROR",{duration:5e3})})},this.toggleRightSidenav=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;l.rightSidenav.toggle().then(function(e){"close"===e?(l.checkEstatusMesa(),t&&l.loadAreas(!0,{mesaenuso:t})):"open"===e&&1===l.mesaSeleccionada.cuentas.length&&l.snTrancomanda.setSelectedCuenta(l.mesaSeleccionada.cuentas[0].numero)})},this.cerrandoRightSideNav=function(){l.snTrancomanda.resetMesaEnUso(),l.snTrancomanda.resetLstProductosDeCuenta(),l.snTrancomanda.resetLstProductosSeleccionados(),l.snTrancomanda.resetCuentaActiva(),l.snTrancomanda.resetListadoArticulos(),l.fuerzaCierreComanda(!1)},this.checkEstatusMesa=function(){l.mesaSeleccionada&&l.mesaSeleccionada.cuentas&&l.mesaSeleccionada.cuentas.length>0&&0===(l.mesaSeleccionada.cuentas.filter(function(t){return 0==+t.cerrada}).length||0)&&l.setEstatusMesa({area:l.mesaSeleccionada.mesa.area.area,mesa:l.mesaSeleccionada.mesa.mesa},1)},this.fuerzaCierreComanda=function(t){l.comandaSrvc.cerrarEstacion(l.mesaSeleccionada.comanda).subscribe(function(e){l.loadComandaMesa(l.mesaSeleccionada.mesa,t)})},this.openTranComandaAlt=function(){l.dialog.open(Xo,{maxWidth:"100vw",maxHeight:"85vh",width:"99vw",height:"85vh",disableClose:!0,data:{mesa:l.mesaSeleccionada}}).afterClosed().subscribe(function(t){l.checkEstatusMesa(),t&&l.loadAreas(!0,{mesaenuso:t})})},this.loadComandaMesa=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];l.cargando=!0,l.comandaSrvc.getComandaDeMesa(t.mesa).subscribe(function(t){if(l.cargando=!1,t.exito)if(Array.isArray(t)?(0===t.length&&(l.mesaSeleccionada={mesa:l.mesaSeleccionada.mesa,cuentas:[{cerrada:1}]}),l.checkEstatusMesa()):(l.mesaSeleccionada=t,l.snTrancomanda.rolesUsuario=l.mesaSeleccionada.turno_rol),l.checkEstatusMesa(),e)switch(l.snTrancomanda.llenaProductosSeleccionados(l.mesaSeleccionada),l.configTipoPantalla){case 1:l.toggleRightSidenav();break;case 2:l.openTranComandaAlt();break;default:l.toggleRightSidenav()}else l.checkEstatusMesa();else t.mensaje&&l.snackBar.open("".concat(t.mensaje),"ERROR",{duration:5e3}),Array.isArray(t)&&0===t.length&&(l.mesaSeleccionada={mesa:l.mesaSeleccionada.mesa,cuentas:[{cerrada:1}]}),l.checkEstatusMesa();l.checkEstatusMesa()})}}return b(e,[{key:"ngOnInit",value:function(){var t=this;this.loadAreas(),this.resetMesaSeleccionada(),this.ls.get(Re.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(Re.a.usrTokenVar).sede_uuid),this.socket.on("reconnect",function(){return t.socket.emit("joinRestaurant",t.ls.get(Re.a.usrTokenVar).sede_uuid)}),this.socket.on("refrescar:mesa",function(e){t.loadAreas(!0,e)})),this.configTipoPantalla=this.configSrvc.getConfig(Re.a.CONSTANTES.RT_PANTALLA_TOMA_COMANDA)}},{key:"ngAfterViewInit",value:function(){var t=this;setTimeout(function(){t.setDivSize(),t.snTrancomanda.resetMesaEnUso()},600)}},{key:"setDivSize",value:function(){}},{key:"onClickMesa",value:function(t){var e=this;if(0==+t.mesaSelected.escallcenter)this.aperturaCargaMesa(t);else{var n="".concat(Re.a.rtClientePedido,"_").concat(t.mesaSelected.mesa);1==+t.mesaSelected.estatus?(this.ls.clear(n),this.dialog.open(wn,{width:"50%",disableClose:!0,data:{mesa:t.mesaSelected}}).afterClosed().subscribe(function(a){a&&(e.clientePedido=a,e.ls.set(n,e.clientePedido),e.aperturaCargaMesa(t))})):(this.clientePedido=this.ls.get(n),this.aperturaCargaMesa(t))}}},{key:"openAbrirMesaDialog",value:function(t){var e,n=this;this.cargando=!0,this.mesaSeleccionadaToOpen={nombreArea:this.tabArea.textLabel,area:+t.area,mesa:+t.mesa,numero:+t.numero,mesero:"",comensales:"1",comanda:0,esEvento:!1,dividirCuentasPorSillas:!1,estatus:1,clientePedido:this.clientePedido||null,cuentas:[{numero:1,nombre:(null===(e=this.clientePedido)||void 0===e?void 0:e.nombre)||"\xdanica",productos:[]}]},0==+t.esmostrador?this.dialog.open(Kn,{width:"50%",height:"auto",disableClose:!0,data:this.mesaSeleccionadaToOpen}).afterClosed().subscribe(function(e){e?(n.mesaSeleccionadaToOpen=e,n.guardarMesa(t)):n.cargando=!1}):(this.mesaSeleccionadaToOpen.mesero=this.ls.get(Re.a.usrTokenVar).idusr,this.guardarMesa(t))}}]),e}()).\u0275fac=function(t){return new(t||wi)(q.Nb(N.b),q.Nb(O.b),q.Nb(He.a),q.Nb(Be),q.Nb(Qn),q.Nb(go.a),q.Nb(da.a))},wi.\u0275cmp=q.Hb({type:wi,selectors:[["app-tran-areas"]],viewQuery:function(t,e){var n;1&t&&(q.Kc(ki,1),q.Kc(xi,1),q.Kc(Di,1),q.Kc(Pi,1)),2&t&&(q.sc(n=q.cc())&&(e.pestania=n.first),q.sc(n=q.cc())&&(e.rightSidenav=n.first),q.sc(n=q.cc())&&(e.tabArea=n.first),q.sc(n=q.cc())&&(e.snTrancomanda=n.first))},decls:8,vars:4,consts:[[1,"matSideNavContainer"],["mode","over","position","end","disableClose","",3,"opened","openedChange","closedStart"],["rightSidenav",""],[3,"mesaEnUso","clientePedido","mesaSavedEv","closeSideNavEv"],["snTranComanda",""],["dynamicHeight","","backgroundColor","primary"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],["tabArea",""],[1,"divAreaMesa",3,"resize"],["matTabArea",""],[3,"configuracion","isDisabled","onClickMesa",4,"ngFor","ngForOf"],[3,"configuracion","isDisabled","onClickMesa"]],template:function(t,e){1&t&&(q.Tb(0,"mat-sidenav-container",0),q.Tb(1,"mat-sidenav",1,2),q.bc("openedChange",function(t){return e.openedRightPanel=t})("closedStart",function(){return e.cerrandoRightSideNav()}),q.Tb(3,"app-tran-comanda",3,4),q.bc("mesaSavedEv",function(){return e.actualizar()})("closeSideNavEv",function(t){return e.toggleRightSidenav(t)}),q.Sb(),q.Sb(),q.Tb(5,"mat-sidenav-content"),q.Tb(6,"mat-tab-group",5),q.Dc(7,Fi,5,2,"mat-tab",6),q.Sb(),q.Sb(),q.Sb()),2&t&&(q.Cb(1),q.lc("opened",e.openedRightPanel),q.Cb(2),q.lc("mesaEnUso",e.mesaSeleccionada)("clientePedido",e.clientePedido),q.Cb(4),q.lc("ngForOf",e.lstTabsAreas))},directives:[j.b,j.a,yi,j.c,P.b,d.l,P.a,an],styles:[".matSideNavContainer[_ngcontent-%COMP%]{height:90%;overflow:hidden!important}.divAreaMesa[_ngcontent-%COMP%]{width:100vw;height:90vh;background-color:hsla(0,0%,78%,.28627450980392155)}mat-sidenav[_ngcontent-%COMP%]{width:97vw}  .mat-drawer-inner-container{overflow-y:auto!important;overflow-x:hidden!important}"]}),wi),Ii=((Mi=function(){function t(e){u(this,t),this.http=e,this.moduleUrl="turno",this.srvcErrHndl=new Ae.a}return b(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Re.a.urlMantenimientos,"/").concat(this.moduleUrl,"/buscar?").concat(je.stringify(t))).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(t){return this.http.post("".concat(Re.a.urlMantenimientos,"/").concat(this.moduleUrl,"/guardar").concat(t.turno?"/"+t.turno:""),t).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"getDetalle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.http.get("".concat(Re.a.urlMantenimientos,"/").concat(this.moduleUrl,"/buscar_usuario/").concat(t,"?").concat(je.stringify(e))).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"saveDetalle",value:function(t){return this.http.post("".concat(Re.a.urlMantenimientos,"/").concat(this.moduleUrl,"/agregar_usuario/").concat(t.turno),t).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"anularDetalle",value:function(t){return this.http.post("".concat(Re.a.urlMantenimientos,"/").concat(this.moduleUrl,"/anular_usuario/").concat(t.turno),t).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"replicaDetalleTurno",value:function(t,e){return this.http.get("".concat(Re.a.urlMantenimientos,"/").concat(this.moduleUrl,"/replica_detalle_turno/").concat(t,"/").concat(e)).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||Mi)(q.Xb(m.b))},Mi.\u0275prov=q.Jb({token:Mi,factory:Mi.\u0275fac,providedIn:"root"}),Mi);function Ri(t,e){if(1&t){var n=q.Ub();q.Tb(0,"mat-list-item",5),q.bc("click",function(){q.xc(n);var t=e.$implicit;return q.fc().getTurno(t)}),q.Tb(1,"mat-icon",6),q.Fc(2,"schedule"),q.Sb(),q.Tb(3,"h5",7),q.Fc(4),q.gc(5,"date"),q.Sb(),q.Ob(6,"br"),q.Tb(7,"p",7),q.Fc(8),q.gc(9,"date"),q.Sb(),q.Sb()}if(2&t){var a=e.$implicit;q.Cb(4),q.Hc("Inicio: ",q.ic(5,2,a.inicio,"dd/MM/yyyy HH:mm:ss"),""),q.Cb(4),q.Hc(" Fin: ",q.ic(9,5,a.fin,"dd/MM/yyyy HH:mm:ss")," ")}}var Ai,Ui=function(){return{standalone:!0}},Ni=((Ai=function(){function t(e,n){var a=this;u(this,t),this.ls=e,this.turnoSrvc=n,this.getTurnoEv=new q.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadTurnos=function(){a.turnoSrvc.get({sede:+a.ls.get(Re.a.usrTokenVar).sede||0}).subscribe(function(t){t&&t.length>0&&(a.lstTurnos=t,a.applyFilter())})},this.getTurno=function(t){a.getTurnoEv.emit({turno:t.turno,turno_tipo:t.turno_tipo.turno_tipo,fecha:t.fecha,inicio:t.inicio,fin:t.fin})},this.pageChange=function(t){a.pageSize=t.pageSize,a.pageIndex=t.pageIndex,a.applyFilter()}}return b(t,[{key:"ngOnInit",value:function(){this.loadTurnos()}},{key:"applyFilter",value:function(){if(this.txtFiltro.length>0){var t=Object(Re.b)(this.lstTurnos,this.txtFiltro);this.length=t.length,this.lstTurnosPaged=Object(Re.c)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstTurnos.length,this.lstTurnosPaged=Object(Re.c)(this.lstTurnos,this.pageSize,this.pageIndex+1)}}]),t}()).\u0275fac=function(t){return new(t||Ai)(q.Nb(He.a),q.Nb(Ii))},Ai.\u0275cmp=q.Hb({type:Ai,selectors:[["app-lista-turno"]],outputs:{getTurnoEv:"getTurnoEv"},decls:7,vars:7,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,e){1&t&&(q.Tb(0,"mat-card",0),q.Tb(1,"mat-card-content"),q.Tb(2,"mat-form-field",1),q.Tb(3,"input",2),q.bc("keyup",function(){return e.applyFilter()})("ngModelChange",function(t){return e.txtFiltro=t}),q.Sb(),q.Sb(),q.Tb(4,"mat-nav-list"),q.Dc(5,Ri,10,8,"mat-list-item",3),q.Sb(),q.Tb(6,"mat-paginator",4),q.bc("page",function(t){return e.pageChange(t)}),q.Sb(),q.Sb(),q.Sb()),2&t&&(q.Cb(3),q.lc("ngModel",e.txtFiltro)("ngModelOptions",q.nc(6,Ui)),q.Cb(2),q.lc("ngForOf",e.lstTurnosPaged),q.Cb(1),q.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[x.a,x.c,y.b,k.b,f.c,f.k,f.n,T.e,d.l,U.a,T.c,_.a,T.b,$.j],pipes:[d.e],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),Ai);function ji(t,e){if(1&t){var n=q.Ub();q.Tb(0,"mat-list-item",8),q.bc("click",function(){q.xc(n);var t=q.fc().$implicit;return q.fc().turnoSelected=t}),q.Tb(1,"mat-icon",9),q.Fc(2,"schedule"),q.Sb(),q.Tb(3,"h5",10),q.Fc(4),q.gc(5,"date"),q.Sb(),q.Ob(6,"br"),q.Tb(7,"p",10),q.Fc(8),q.gc(9,"date"),q.Sb(),q.Sb()}if(2&t){var a=q.fc().$implicit;q.Cb(4),q.Hc("Inicio: ",q.ic(5,2,a.inicio,"dd/MM/yyyy HH:mm:ss"),""),q.Cb(4),q.Hc("Fin: ",q.ic(9,5,a.fin,"dd/MM/yyyy HH:mm:ss"),"")}}function Bi(t,e){if(1&t&&(q.Rb(0),q.Dc(1,ji,10,8,"mat-list-item",7),q.Qb()),2&t){var n=e.$implicit,a=q.fc();q.Cb(1),q.lc("ngIf",+n.turno!=+a.data.turnoCopia.turno)}}function Hi(t,e){if(1&t&&(q.Tb(0,"small"),q.Tb(1,"div"),q.Tb(2,"strong"),q.Fc(3),q.gc(4,"date"),q.gc(5,"date"),q.Sb(),q.Sb(),q.Sb()),2&t){var n=q.fc();q.Cb(3),q.Ic("Seleccion\xf3 el turno que inicia el ",q.ic(4,2,n.turnoSelected.inicio,"dd/MM/yyyy HH:mm:ss")," y finaliza el ",q.ic(5,5,n.turnoSelected.fin,"dd/MM/yyyy HH:mm:ss"),"")}}var Li,qi,zi,$i=((zi=function(){function t(e,n,a,o,i,r){var c=this;u(this,t),this.dialogRef=e,this.data=n,this.ls=a,this.snackBar=o,this.turnoSrvc=i,this.dialog=r,this.lstTurnos=[],this.loadTurnos=function(){c.lstTurnos=[],c.turnoSrvc.get({sede:+c.ls.get(Re.a.usrTokenVar).sede||0}).subscribe(function(t){if(t&&t.length>0)for(var e=t.length>=11?11:t.length,n=0;n<e;n++)c.lstTurnos.push(t[n])})},this.cancelar=function(){return c.dialogRef.close()},this.copiar=function(){c.turnoSelected&&c.dialog.open(Ze.a,{maxWidth:"400px",data:new Ze.b("Detalle de turno","Esto copiar\xe1 el detalle del turno que seleccion\xf3. \xbfDesea continuar?","S\xed","No")}).afterClosed().subscribe(function(t){t&&c.turnoSrvc.replicaDetalleTurno(c.turnoSelected.turno,c.data.turnoCopia.turno).subscribe(function(t){t.exito?c.snackBar.open("Turno copiado con \xe9xito","Detalle turno",{duration:3e3}):c.snackBar.open("ERROR: ".concat(t.mensaje),"Detalle turno",{duration:7e3}),c.dialogRef.close()})})}}return b(t,[{key:"ngOnInit",value:function(){this.loadTurnos()}}]),t}()).\u0275fac=function(t){return new(t||zi)(q.Nb(N.f),q.Nb(N.a),q.Nb(He.a),q.Nb(O.b),q.Nb(Ii),q.Nb(N.b))},zi.\u0275cmp=q.Hb({type:zi,selectors:[["app-selecciona-turno-previo"]],decls:11,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[4,"ngFor","ngForOf"],[4,"ngIf"],["mat-dialog-actions","","align","end"],["mat-raised-button","","type","button","color","warn",3,"click"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[3,"click",4,"ngIf"],[3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,e){1&t&&(q.Tb(0,"h1",0),q.Fc(1,"\xbfDe qu\xe9 turno quiere copiar el detalle?"),q.Sb(),q.Tb(2,"div",1),q.Tb(3,"mat-nav-list"),q.Dc(4,Bi,2,1,"ng-container",2),q.Sb(),q.Dc(5,Hi,6,8,"small",3),q.Sb(),q.Tb(6,"div",4),q.Tb(7,"button",5),q.bc("click",function(){return e.cancelar()}),q.Fc(8," Cancelar "),q.Sb(),q.Tb(9,"button",6),q.bc("click",function(){return e.copiar()}),q.Fc(10," Copiar "),q.Sb(),q.Sb()),2&t&&(q.Cb(4),q.lc("ngForOf",e.lstTurnos),q.Cb(1),q.lc("ngIf",e.turnoSelected),q.Cb(4),q.lc("disabled",!e.turnoSelected))},directives:[N.g,N.d,T.e,d.l,d.m,N.c,w.a,T.c,_.a,T.b,$.j],pipes:[d.e],styles:[""]}),zi),Gi=((qi=function(){function t(e){u(this,t),this.http=e,this.moduleUrl="turno",this.srvcErrHndl=new Ae.a}return b(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Re.a.urlMantenimientos,"/").concat(this.moduleUrl,"/get_turno_tipo?").concat(je.stringify(t))).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(t){return this.http.post("".concat(Re.a.urlMantenimientos,"/").concat(this.moduleUrl,"/guardar_turno_tipo").concat(t.turno_tipo?"/"+t.turno_tipo:""),t).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||qi)(q.Xb(m.b))},qi.\u0275prov=q.Jb({token:qi,factory:qi.\u0275fac,providedIn:"root"}),qi),Wi=((Li=function(){function t(e){u(this,t),this.http=e,this.srvcErrHndl=new Ae.a}return b(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Re.a.urlCatalogos,"/get_tipo_usuario?").concat(je.stringify(t))).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||Li)(q.Xb(m.b))},Li.\u0275prov=q.Jb({token:Li,factory:Li.\u0275fac,providedIn:"root"}),Li);function Vi(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",5),q.bc("click",function(){return q.xc(n),q.fc().showTurnoForm=!0}),q.Tb(1,"mat-icon",6),q.Fc(2,"expand_more"),q.Sb(),q.Sb()}}function Ki(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",5),q.bc("click",function(){return q.xc(n),q.fc().showTurnoForm=!1}),q.Tb(1,"mat-icon",6),q.Fc(2,"expand_less"),q.Sb(),q.Sb()}}function Qi(t,e){if(1&t&&(q.Tb(0,"mat-option",20),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n.turno_tipo),q.Cb(1),q.Hc(" ",n.descripcion," ")}}function Xi(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",21),q.bc("click",function(){q.xc(n);var t=q.fc(2);return t.turno.inicio=t.getNow()}),q.Tb(1,"mat-icon",6),q.Fc(2,"query_builder"),q.Sb(),q.Sb()}}function Ji(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",22),q.bc("click",function(){return q.xc(n),q.fc(2).turno.inicio=null}),q.Tb(1,"mat-icon",6),q.Fc(2,"close"),q.Sb(),q.Sb()}}function Yi(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",21),q.bc("click",function(){q.xc(n);var t=q.fc(2);return t.turno.fin=t.getNow()}),q.Tb(1,"mat-icon",6),q.Fc(2,"query_builder"),q.Sb(),q.Sb()}}function Zi(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",22),q.bc("click",function(){return q.xc(n),q.fc(2).turno.fin=null}),q.Tb(1,"mat-icon",6),q.Fc(2,"close"),q.Sb(),q.Sb()}}function tr(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",23),q.bc("click",function(){return q.xc(n),q.fc(2).resetTurno()}),q.Fc(1," Nuevo "),q.Sb()}}function er(t,e){if(1&t&&(q.Tb(0,"li"),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.Cb(1),q.Gc(n)}}function nr(t,e){if(1&t&&(q.Tb(0,"li"),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.Cb(1),q.Gc(n)}}function ar(t,e){if(1&t&&(q.Tb(0,"div"),q.Tb(1,"h6"),q.Fc(2,"Documentos Pendientes"),q.Sb(),q.Tb(3,"div",24),q.Tb(4,"div",25),q.Tb(5,"label"),q.Tb(6,"b"),q.Fc(7,"Comandas sin facturar"),q.Sb(),q.Sb(),q.Tb(8,"ul"),q.Dc(9,er,2,1,"li",26),q.Sb(),q.Sb(),q.Tb(10,"div",25),q.Tb(11,"label"),q.Tb(12,"b"),q.Fc(13,"Facturas sin firmar"),q.Sb(),q.Sb(),q.Tb(14,"ul"),q.Dc(15,nr,2,1,"li",26),q.Sb(),q.Sb(),q.Sb(),q.Sb()),2&t){var n=q.fc(2);q.Cb(9),q.lc("ngForOf",n.comandas),q.Cb(6),q.lc("ngForOf",n.facturas)}}function or(t,e){if(1&t){var n=q.Ub();q.Tb(0,"form",7,8),q.bc("ngSubmit",function(){q.xc(n);var t=q.tc(1),e=q.fc();return t.form.valid&&e.onSubmit()}),q.Tb(2,"div",9),q.Tb(3,"mat-form-field",10),q.Tb(4,"mat-label"),q.Fc(5,"Tipo de turno"),q.Sb(),q.Tb(6,"mat-select",11),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().turno.turno_tipo=t}),q.Dc(7,Qi,2,2,"mat-option",12),q.Sb(),q.Sb(),q.Sb(),q.Tb(8,"div",9),q.Tb(9,"mat-form-field",10),q.Tb(10,"input",13),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().turno.inicio=t}),q.Sb(),q.Dc(11,Xi,3,0,"button",14),q.Dc(12,Ji,3,0,"button",15),q.Sb(),q.Sb(),q.Tb(13,"div",9),q.Tb(14,"mat-form-field",10),q.Tb(15,"input",16),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().turno.fin=t}),q.Sb(),q.Dc(16,Yi,3,0,"button",14),q.Dc(17,Zi,3,0,"button",15),q.Sb(),q.Sb(),q.Tb(18,"div",17),q.Tb(19,"button",18),q.Fc(20," Guardar "),q.Sb(),q.Dc(21,tr,2,0,"button",19),q.Sb(),q.Dc(22,ar,16,2,"div",3),q.Sb()}if(2&t){var a=q.tc(1),o=q.fc();q.Cb(6),q.lc("ngModel",o.turno.turno_tipo),q.Cb(1),q.lc("ngForOf",o.tiposTurno),q.Cb(3),q.lc("ngModel",o.turno.inicio),q.Cb(1),q.lc("ngIf",!o.turno.inicio),q.Cb(1),q.lc("ngIf",o.turno.inicio),q.Cb(3),q.lc("ngModel",o.turno.fin),q.Cb(1),q.lc("ngIf",!o.turno.fin),q.Cb(1),q.lc("ngIf",o.turno.fin),q.Cb(2),q.lc("disabled",!a.form.valid),q.Cb(2),q.lc("ngIf",o.turno.turno),q.Cb(1),q.lc("ngIf",o.pendientes)}}function ir(t,e){1&t&&q.Ob(0,"hr")}function rr(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",5),q.bc("click",function(){return q.xc(n),q.fc(2).showDetalleTurnoForm=!0}),q.Tb(1,"mat-icon",6),q.Fc(2,"expand_more"),q.Sb(),q.Sb()}}function cr(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",5),q.bc("click",function(){return q.xc(n),q.fc(2).showDetalleTurnoForm=!1}),q.Tb(1,"mat-icon",6),q.Fc(2,"expand_less"),q.Sb(),q.Sb()}}function sr(t,e){if(1&t&&(q.Tb(0,"mat-option",20),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n.usuario_tipo),q.Cb(1),q.Hc(" ",n.descripcion," ")}}function lr(t,e){if(1&t&&(q.Tb(0,"mat-option",20),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n.usuario),q.Cb(1),q.Ic(" ",n.nombres," ",n.apellidos," ")}}function ur(t,e){if(1&t){var n=q.Ub();q.Tb(0,"form",7,28),q.bc("ngSubmit",function(){q.xc(n);var t=q.tc(1),e=q.fc(2);return t.form.valid&&e.onSubmitDetail()}),q.Tb(2,"div",9),q.Tb(3,"mat-form-field",10),q.Tb(4,"mat-label"),q.Fc(5,"Tipo"),q.Sb(),q.Tb(6,"mat-select",29),q.bc("ngModelChange",function(t){return q.xc(n),q.fc(2).detalleTurno.usuario_tipo=t}),q.Dc(7,sr,2,2,"mat-option",12),q.Sb(),q.Sb(),q.Sb(),q.Tb(8,"div",9),q.Tb(9,"mat-form-field",10),q.Tb(10,"mat-label"),q.Fc(11,"Usuario"),q.Sb(),q.Tb(12,"mat-select",30),q.bc("ngModelChange",function(t){return q.xc(n),q.fc(2).detalleTurno.usuario=t}),q.Dc(13,lr,2,3,"mat-option",12),q.Sb(),q.Sb(),q.Sb(),q.Tb(14,"div",31),q.Tb(15,"button",32),q.bc("click",function(){return q.xc(n),q.fc(2).copiaDetalleTurno()}),q.Fc(16," Copiar de turno anterior "),q.Sb(),q.Tb(17,"button",18),q.Fc(18," Guardar "),q.Sb(),q.Sb(),q.Sb()}if(2&t){var a=q.tc(1),o=q.fc(2);q.Cb(6),q.lc("ngModel",o.detalleTurno.usuario_tipo),q.Cb(1),q.lc("ngForOf",o.tiposUsuario),q.Cb(5),q.lc("ngModel",o.detalleTurno.usuario),q.Cb(1),q.lc("ngForOf",o.usuarios),q.Cb(2),q.lc("disabled",!!o.turno.fin),q.Cb(2),q.lc("disabled",!a.form.valid||!!o.turno.fin)}}function dr(t,e){1&t&&q.Ob(0,"hr")}function br(t,e){1&t&&(q.Tb(0,"th",43),q.Fc(1,"Tipo"),q.Sb())}function mr(t,e){if(1&t&&(q.Tb(0,"td",44),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.Cb(1),q.Gc(n.usuario_tipo.descripcion)}}function fr(t,e){1&t&&(q.Tb(0,"th",45),q.Fc(1,"Usuario"),q.Sb())}function pr(t,e){if(1&t&&(q.Tb(0,"td",46),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.Cb(1),q.Ic("",n.usuario.nombres," ",n.usuario.apellidos,"")}}function hr(t,e){1&t&&(q.Tb(0,"th",43),q.Fc(1,"\xa0"),q.Sb())}function gr(t,e){if(1&t){var n=q.Ub();q.Tb(0,"td",44),q.Tb(1,"button",47),q.bc("click",function(){q.xc(n);var t=e.$implicit;return q.fc(3).anularDetalleTurno(t)}),q.Fc(2," Anular "),q.Sb(),q.Sb()}if(2&t){var a=q.fc(3);q.Cb(1),q.lc("disabled",!!a.turno.fin)}}function vr(t,e){1&t&&q.Ob(0,"tr",48)}function Sr(t,e){1&t&&q.Ob(0,"tr",49)}function Cr(t,e){if(1&t&&(q.Tb(0,"table",33),q.Rb(1,34),q.Dc(2,br,2,0,"th",35),q.Dc(3,mr,2,1,"td",36),q.Qb(),q.Rb(4,37),q.Dc(5,fr,2,0,"th",38),q.Dc(6,pr,2,2,"td",39),q.Qb(),q.Rb(7,40),q.Dc(8,hr,2,0,"th",35),q.Dc(9,gr,3,1,"td",36),q.Qb(),q.Dc(10,vr,1,0,"tr",41),q.Dc(11,Sr,1,0,"tr",42),q.Sb()),2&t){var n=q.fc(2);q.lc("dataSource",n.dataSource),q.Cb(10),q.lc("matHeaderRowDef",n.displayedColumns),q.Cb(1),q.lc("matRowDefColumns",n.displayedColumns)}}function Tr(t,e){if(1&t&&(q.Tb(0,"mat-card",0),q.Tb(1,"mat-card-title"),q.Tb(2,"h4"),q.Fc(3),q.gc(4,"date"),q.Dc(5,rr,3,0,"button",1),q.Dc(6,cr,3,0,"button",1),q.Sb(),q.Sb(),q.Tb(7,"mat-card-content"),q.Dc(8,ur,19,6,"form",2),q.Dc(9,dr,1,0,"hr",3),q.Dc(10,Cr,12,3,"table",27),q.Sb(),q.Sb()),2&t){var n=q.fc();q.Cb(3),q.Hc(" Detalle del turno ",q.ic(4,6,n.turno.inicio,"dd/MM/yyyy HH:mm:ss")," "),q.Cb(2),q.lc("ngIf",!n.showDetalleTurnoForm),q.Cb(1),q.lc("ngIf",n.showDetalleTurnoForm),q.Cb(2),q.lc("ngIf",n.showDetalleTurnoForm),q.Cb(1),q.lc("ngIf",n.detallesTurno.length>0),q.Cb(1),q.lc("ngIf",n.detallesTurno.length>0)}}var _r,yr,kr,xr=((_r=function(){function t(e,n,a,o,i,r,c){var s=this;u(this,t),this.snackBar=e,this.ls=n,this.tipoTurnoSrvc=a,this.turnoSrvc=o,this.usuarioTipoSrvc=i,this.usuarioSrvc=r,this.dialog=c,this.turnoSavedEv=new q.o,this.showTurnoForm=!0,this.showDetalleTurnoForm=!0,this.detallesTurno=[],this.displayedColumns=["usuario_tipo","usuario","editItem"],this.tiposTurno=[],this.tiposUsuario=[],this.usuarios=[],this.esMovil=!1,this.comandas=[],this.facturas=[],this.pendientes=!1,this.loadTiposTurno=function(){s.tipoTurnoSrvc.get().subscribe(function(t){t&&(s.tiposTurno=t)})},this.loadTiposUsuario=function(){s.usuarioTipoSrvc.get().subscribe(function(t){t&&(s.tiposUsuario=t)})},this.loadUsuarios=function(){s.usuarioSrvc.get({sede:s.ls.get(Re.a.usrTokenVar).sede||0}).subscribe(function(t){t&&(s.usuarios=t)})},this.resetTurno=function(){s.pendientes=!1,s.comandas=[],s.facturas=[],s.turno={turno:null,turno_tipo:null,inicio:ia().format(Re.a.dbDateTimeFormat),fin:null},s.resetDetalleTurno(),s.detallesTurno=[],s.updateTableDataSource()},this.saveInfoTurno=function(){s.pendientes=!1,s.turnoSrvc.save(s.turno).subscribe(function(t){t.exito?(s.turnoSavedEv.emit(),s.resetTurno(),s.turno=t.turno,s.snackBar.open("Turno modificado con \xe9xito...","Turno",{duration:3e3})):(t.pendientes&&(s.snackBar.open("ERROR: Error al cerrar el turno","Turno",{duration:3e3}),s.pendientes=!0,s.comandas=t.comandas,s.facturas=t.facturas),s.snackBar.open("ERROR: ".concat(t.mensaje),"Turno",{duration:3e3}))})},this.onSubmit=function(){ia(s.turno.fin).isValid()?s.dialog.open(Ze.a,{maxWidth:"400px",data:new Ze.b("Cerrar turno","La fecha de finalizaci\xf3n cerrar\xe1 el turno. \xbfDesea continuar?","S\xed","No")}).afterClosed().subscribe(function(t){t&&s.saveInfoTurno()}):s.saveInfoTurno()},this.resetDetalleTurno=function(){return s.detalleTurno={turno:s.turno.turno?s.turno.turno:null,usuario:null,usuario_tipo:null}},this.loadDetalleTurno=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+s.turno.turno;s.turnoSrvc.getDetalle(t,{turno:t}).subscribe(function(t){t&&(s.detallesTurno=t,s.updateTableDataSource())})},this.onSubmitDetail=function(){s.detalleTurno.turno=s.turno.turno,s.turnoSrvc.saveDetalle(s.detalleTurno).subscribe(function(t){t.exito?(s.loadDetalleTurno(),s.resetDetalleTurno(),s.snackBar.open("Usuario agregado al turno...","Turno",{duration:3e3})):s.snackBar.open("ERROR: ".concat(t.mensaje),"Turno",{duration:3e3})})},this.anularDetalleTurno=function(t){s.turnoSrvc.anularDetalle({turno:t.turno,usuario:t.usuario.usuario,usuario_tipo:t.usuario_tipo.usuario_tipo}).subscribe(function(t){t.exito?(s.loadDetalleTurno(),s.resetDetalleTurno(),s.snackBar.open("Se quit\xf3 al usuario del turno...","Turno",{duration:3e3})):s.snackBar.open("ERROR: ".concat(t.mensaje),"Turno",{duration:3e3})})},this.updateTableDataSource=function(){return s.dataSource=new E.k(s.detallesTurno)},this.getNow=function(){return ia().format(Re.a.dbDateTimeFormat)},this.copiaDetalleTurno=function(){s.dialog.open($i,{maxWidth:"400px",data:{turnoCopia:s.turno}}).afterClosed().subscribe(function(){return s.loadDetalleTurno(+s.turno.turno)})}}return b(t,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(Re.a.usrTokenVar).enmovil||!1,this.resetTurno(),this.loadTiposTurno(),this.loadTiposUsuario(),this.loadUsuarios()}}]),t}()).\u0275fac=function(t){return new(t||_r)(q.Nb(O.b),q.Nb(He.a),q.Nb(Gi),q.Nb(Ii),q.Nb(Wi),q.Nb(qn.a),q.Nb(N.b))},_r.\u0275cmp=q.Hb({type:_r,selectors:[["app-form-turno"]],inputs:{turno:"turno"},outputs:{turnoSavedEv:"turnoSavedEv"},decls:11,vars:9,consts:[[1,"mat-elevation-z4","fullWidth"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmTurno","ngForm"],[1,"form-group"],[1,"fullWidth"],["name","turno_tipo","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","datetime-locale","placeholder","Inicio","name","inicio","required","",3,"ngModel","ngModelChange"],["type","button","mat-button","","matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],["type","button","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matInput","","type","datetime-locale","placeholder","Fin","name","fin",3,"ngModel","ngModelChange"],["role","group","align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],[3,"value"],["type","button","mat-button","","matSuffix","","mat-icon-button","",3,"click"],["type","button","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["mat-raised-button","","type","button","color","accent",3,"click"],[1,"row"],[1,"col"],[4,"ngFor","ngForOf"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleTurno","ngForm"],["name","usuario_tipo","required","",3,"ngModel","ngModelChange"],["name","usuario","required","",3,"ngModel","ngModelChange"],["align","right"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","usuario_tipo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","usuario"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","editItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(q.Tb(0,"mat-card",0),q.Tb(1,"mat-card-title"),q.Tb(2,"h4"),q.Fc(3),q.gc(4,"date"),q.Dc(5,Vi,3,0,"button",1),q.Dc(6,Ki,3,0,"button",1),q.Sb(),q.Sb(),q.Tb(7,"mat-card-content"),q.Dc(8,or,23,11,"form",2),q.Sb(),q.Sb(),q.Dc(9,ir,1,0,"hr",3),q.Dc(10,Tr,11,9,"mat-card",4)),2&t&&(q.Cb(3),q.Hc(" Turno ",e.turno.turno?q.ic(4,6,e.turno.inicio,"dd/MM/yyyy HH:mm:ss"):""," "),q.Cb(2),q.lc("ngIf",!e.showTurnoForm),q.Cb(1),q.lc("ngIf",e.showTurnoForm),q.Cb(2),q.lc("ngIf",e.showTurnoForm),q.Cb(1),q.lc("ngIf",e.turno.turno),q.Cb(1),q.lc("ngIf",e.turno.turno))},directives:[x.a,x.h,d.m,x.c,w.a,_.a,f.r,f.l,f.m,y.b,y.e,F.a,f.p,f.k,f.n,d.l,k.b,f.c,$.m,y.f,E.j,E.c,E.e,E.b,E.g,E.i,E.d,E.a,E.f,E.h],pipes:[d.e],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:34pt!important}"]}),_r),Dr=["lstTurno"],Pr=["frmTurno"],Er=((yr=function(){function t(){var e=this;u(this,t),this.setTurno=function(t){e.turno=t,e.frmTurno.loadDetalleTurno(+e.turno.turno),e.frmTurno.pendientes=!1,e.frmTurno.comandas=[],e.frmTurno.facturas=[]},this.refreshTurnoList=function(){return e.lstTurnoComponent.loadTurnos()},this.turno={turno:null,turno_tipo:null,inicio:ia().format(Re.a.dbDateTimeFormat),fin:null}}return b(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||yr)},yr.\u0275cmp=q.Hb({type:yr,selectors:[["app-turno"]],viewQuery:function(t,e){var n;1&t&&(q.Kc(Dr,1),q.Kc(Pr,1)),2&t&&(q.sc(n=q.cc())&&(e.lstTurnoComponent=n.first),q.sc(n=q.cc())&&(e.frmTurno=n.first))},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getTurnoEv"],["lstTurno",""],[1,"col","m7","s12"],[3,"turno","turnoSavedEv"],["frmTurno",""]],template:function(t,e){1&t&&(q.Tb(0,"div",0),q.Tb(1,"div",1),q.Tb(2,"app-lista-turno",2,3),q.bc("getTurnoEv",function(t){return e.setTurno(t)}),q.Sb(),q.Sb(),q.Tb(4,"div",4),q.Tb(5,"app-form-turno",5,6),q.bc("turnoSavedEv",function(){return e.refreshTurnoList()}),q.Sb(),q.Sb(),q.Sb()),2&t&&(q.Cb(5),q.lc("turno",e.turno))},directives:[Ni,xr],styles:[""]}),yr),Fr=i("Iab2"),Mr=((kr=function(){function t(e){u(this,t),this.http=e,this.moduleUrl="reporte/venta",this.srvcErrHndl=new Ae.a}return b(t,[{key:"porCategoria",value:function(t){return this.http.get("".concat(Re.a.urlFacturacion,"/").concat(this.moduleUrl,"/categoria?").concat(je.stringify(t))).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"porArticulo",value:function(t){return this.http.get("".concat(Re.a.urlFacturacion,"/").concat(this.moduleUrl,"/articulo?").concat(je.stringify(t))).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"porCategoriaPdf",value:function(t){var e={headers:new m.d({Accept:"application/pdf"}),responseType:"blob"};return this.http.get("".concat(Re.a.urlFacturacion,"/").concat(this.moduleUrl,"/categoriapdf/1?").concat(je.stringify(t)),e).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"porArticuloPdf",value:function(t){var e={headers:new m.d({Accept:"application/pdf"}),responseType:"blob"};return this.http.get("".concat(Re.a.urlFacturacion,"/").concat(this.moduleUrl,"/articulopdf/1?").concat(je.stringify(t)),e).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||kr)(q.Xb(m.b))},kr.\u0275prov=q.Jb({token:kr,factory:kr.\u0275fac,providedIn:"root"}),kr),wr=i("2qVp"),Or=i("NU9O");function Ir(t,e){if(1&t&&(q.Rb(0),q.Tb(1,"tr"),q.Tb(2,"td",10),q.Fc(3),q.Sb(),q.Tb(4,"td",11),q.Fc(5),q.gc(6,"number"),q.Sb(),q.Tb(7,"td",11),q.Fc(8),q.gc(9,"number"),q.Sb(),q.Tb(10,"td",11),q.Fc(11),q.gc(12,"number"),q.Sb(),q.Tb(13,"td",11),q.Fc(14),q.gc(15,"number"),q.Sb(),q.Sb(),q.Qb()),2&t){var n=e.$implicit;q.Cb(3),q.Gc(n.descripcion),q.Cb(2),q.Gc(q.ic(6,5,n.cantidad,"1.2-2")),q.Cb(3),q.Gc(q.ic(9,8,n.porcentaje,"1.2-2")),q.Cb(3),q.Gc(q.ic(12,11,n.precio_unitario,"1.2-2")),q.Cb(3),q.Gc(q.ic(15,14,n.total,"1.2-2"))}}function Rr(t,e){if(1&t&&(q.Rb(0),q.Tb(1,"tr"),q.Tb(2,"th",7),q.Fc(3),q.Sb(),q.Sb(),q.Dc(4,Ir,16,17,"ng-container",4),q.Tb(5,"tr"),q.Tb(6,"th",8),q.Fc(7,"Total de subcategor\xeda:"),q.Sb(),q.Tb(8,"th",9),q.Fc(9),q.gc(10,"number"),q.Sb(),q.Sb(),q.Qb()),2&t){var n=q.fc().$implicit;q.Cb(3),q.Gc(n.descripcion),q.Cb(1),q.lc("ngForOf",n.articulos),q.Cb(5),q.Gc(q.ic(10,3,n.total,"1.2-2"))}}function Ar(t,e){if(1&t&&(q.Rb(0),q.Dc(1,Rr,11,6,"ng-container",5),q.Qb()),2&t){var n=e.$implicit;q.Cb(1),q.lc("ngIf",n.articulos.length>0)}}function Ur(t,e){if(1&t&&(q.Rb(0),q.Tb(1,"tr"),q.Tb(2,"th",6),q.Fc(3),q.Sb(),q.Sb(),q.Dc(4,Ar,2,1,"ng-container",4),q.Qb()),2&t){var n=q.fc().$implicit;q.Cb(3),q.Gc(n.descripcion),q.Cb(1),q.lc("ngForOf",n.subcategoria)}}function Nr(t,e){if(1&t&&(q.Rb(0),q.Dc(1,Ur,5,2,"ng-container",5),q.Qb()),2&t){var n=e.$implicit;q.Cb(1),q.lc("ngIf",n.subcategoria.length>0)}}var jr,Br=((jr=function(){function t(){u(this,t),this.params={},this.data=[]}return b(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||jr)},jr.\u0275cmp=q.Hb({type:jr,selectors:[["app-por-categoria"]],inputs:{params:"params",data:"data"},decls:26,vars:9,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"tbl"],[1,"brdTSingleBSingle"],[1,"rtxt","numWidth","brdTSingleBSingle"],[4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","5"],["colspan","5",1,"tab"],["colspan","4",1,"rtxt"],[1,"rtxt","brdTSingleBDouble","numWidth"],[1,"doubleTab","brdBSingle"],[1,"rtxt","numWidth","brdBSingle"]],template:function(t,e){1&t&&(q.Tb(0,"mat-card",0),q.Tb(1,"mat-card-header"),q.Tb(2,"mat-card-title"),q.Fc(3,"Reporte de ventas"),q.Sb(),q.Tb(4,"mat-card-subtitle"),q.Fc(5," Por categor\xeda"),q.Ob(6,"br"),q.Fc(7),q.gc(8,"date"),q.gc(9,"date"),q.Sb(),q.Sb(),q.Tb(10,"mat-card-content"),q.Tb(11,"table",1),q.Tb(12,"thead"),q.Tb(13,"tr"),q.Tb(14,"th",2),q.Fc(15,"Descripci\xf3n"),q.Sb(),q.Tb(16,"th",3),q.Fc(17,"Cantidad"),q.Sb(),q.Tb(18,"th",3),q.Fc(19,"Porcentaje"),q.Sb(),q.Tb(20,"th",3),q.Fc(21,"Precio unitario"),q.Sb(),q.Tb(22,"th",3),q.Fc(23,"Total"),q.Sb(),q.Sb(),q.Sb(),q.Tb(24,"tbody"),q.Dc(25,Nr,2,1,"ng-container",4),q.Sb(),q.Sb(),q.Sb(),q.Sb()),2&t&&(q.Cb(7),q.Ic(" Del ",q.ic(8,3,e.params.fdel,"dd/MM/yyyy")," al ",q.ic(9,6,e.params.fal,"dd/MM/yyyy")," "),q.Cb(18),q.lc("ngForOf",e.data))},directives:[x.a,x.d,x.h,x.g,x.c,d.l,d.m],pipes:[d.e,d.f],styles:[".numWidth[_ngcontent-%COMP%]{width:10%}tr[_ngcontent-%COMP%]{border:none}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-top:.25em;padding-bottom:.25em}"]}),jr);function Hr(t,e){if(1&t&&(q.Rb(0),q.Tb(1,"tr"),q.Tb(2,"td",6),q.Fc(3),q.Sb(),q.Tb(4,"td",7),q.Fc(5),q.gc(6,"number"),q.Sb(),q.Tb(7,"td",7),q.Fc(8),q.gc(9,"number"),q.Sb(),q.Sb(),q.Qb()),2&t){var n=e.$implicit;q.Cb(3),q.Gc(n.articulo.descripcion),q.Cb(2),q.Gc(q.ic(6,3,n.cantidad,"1.2-2")),q.Cb(3),q.Gc(q.ic(9,6,n.total,"1.2-2"))}}function Lr(t,e){if(1&t&&(q.Tb(0,"mat-card-content"),q.Tb(1,"table",2),q.Tb(2,"thead"),q.Tb(3,"tr"),q.Tb(4,"th",3),q.Fc(5,"Descripci\xf3n"),q.Sb(),q.Tb(6,"th",4),q.Fc(7,"Cantidad"),q.Sb(),q.Tb(8,"th",4),q.Fc(9,"Total"),q.Sb(),q.Sb(),q.Sb(),q.Tb(10,"tbody"),q.Dc(11,Hr,10,9,"ng-container",5),q.Sb(),q.Sb(),q.Sb()),2&t){var n=q.fc();q.Cb(11),q.lc("ngForOf",n.data.datos)}}function qr(t,e){if(1&t&&(q.Tb(0,"tr"),q.Tb(1,"td",6),q.Fc(2),q.Sb(),q.Tb(3,"td",7),q.Fc(4),q.gc(5,"number"),q.Sb(),q.Tb(6,"td",7),q.Fc(7),q.gc(8,"number"),q.Sb(),q.Sb()),2&t){var n=e.$implicit;q.Cb(2),q.Gc(n.articulo.descripcion),q.Cb(2),q.Gc(q.ic(5,3,n.cantidad,"1.2-2")),q.Cb(3),q.Gc(q.ic(8,6,n.total,"1.2-2"))}}function zr(t,e){if(1&t&&(q.Rb(0),q.Tb(1,"tr"),q.Tb(2,"th",8),q.Fc(3),q.Sb(),q.Sb(),q.Dc(4,qr,9,9,"tr",5),q.Qb()),2&t){var n=e.$implicit;q.Cb(3),q.Gc(n.sede),q.Cb(1),q.lc("ngForOf",n.articulos)}}function $r(t,e){if(1&t&&(q.Tb(0,"mat-card-content"),q.Tb(1,"table",2),q.Tb(2,"thead"),q.Tb(3,"tr"),q.Tb(4,"th",3),q.Fc(5,"Descripci\xf3n"),q.Sb(),q.Tb(6,"th",4),q.Fc(7,"Cantidad"),q.Sb(),q.Tb(8,"th",4),q.Fc(9,"Total"),q.Sb(),q.Sb(),q.Sb(),q.Tb(10,"tbody"),q.Dc(11,zr,5,2,"ng-container",5),q.Sb(),q.Sb(),q.Sb()),2&t){var n=q.fc();q.Cb(11),q.lc("ngForOf",n.data.datos)}}var Gr,Wr=((Gr=function(){function t(){u(this,t),this.params={},this.data={}}return b(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Gr)},Gr.\u0275cmp=q.Hb({type:Gr,selectors:[["app-por-articulo"]],inputs:{params:"params",data:"data"},decls:12,vars:10,consts:[[1,"mat-elevation-z4","fullWidth"],[4,"ngIf"],[1,"tbl"],[1,"brdTSingleBSingle"],[1,"rtxt","numWidth","brdTSingleBSingle"],[4,"ngFor","ngForOf"],[1,"doubleTab","brdBSingle"],[1,"rtxt","numWidth","brdBSingle"],["colspan","3",1,"brdTSingleBSingle"]],template:function(t,e){1&t&&(q.Tb(0,"mat-card",0),q.Tb(1,"mat-card-header"),q.Tb(2,"mat-card-title"),q.Fc(3,"Reporte de ventas"),q.Sb(),q.Tb(4,"mat-card-subtitle"),q.Fc(5," Por art\xedculo"),q.Ob(6,"br"),q.Fc(7),q.gc(8,"date"),q.gc(9,"date"),q.Sb(),q.Sb(),q.Dc(10,Lr,12,1,"mat-card-content",1),q.Dc(11,$r,12,1,"mat-card-content",1),q.Sb()),2&t&&(q.Cb(7),q.Ic(" Del ",q.ic(8,4,e.params.fdel,"dd/MM/yyyy")," al ",q.ic(9,7,e.params.fal,"dd/MM/yyyy")," "),q.Cb(3),q.lc("ngIf",1==e.data.grupo),q.Cb(1),q.lc("ngIf",2==e.data.grupo))},directives:[x.a,x.d,x.h,x.g,d.m,x.c,d.l],pipes:[d.e,d.f],styles:[".numWidth[_ngcontent-%COMP%]{width:10%}tr[_ngcontent-%COMP%]{border:none}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-top:.25em;padding-bottom:.25em}"]}),Gr);function Vr(t,e){if(1&t&&(q.Tb(0,"mat-option",16),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n.tipo_reporte),q.Cb(1),q.Hc(" ",n.descripcion," ")}}function Kr(t,e){if(1&t&&(q.Tb(0,"mat-option",16),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n.turno_tipo),q.Cb(1),q.Hc(" ",n.descripcion," ")}}function Qr(t,e){if(1&t&&(q.Tb(0,"mat-option",16),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n.sede.sede),q.Cb(1),q.Hc(" ",n.sede.nombre," ")}}function Xr(t,e){if(1&t&&(q.Tb(0,"mat-option",16),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n.id),q.Cb(1),q.Hc(" ",n.descripcion," ")}}function Jr(t,e){if(1&t){var n=q.Ub();q.Tb(0,"mat-form-field",5),q.Tb(1,"mat-label"),q.Fc(2,"Agrupar por"),q.Sb(),q.Tb(3,"mat-select",17),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().params._grupo=t}),q.Dc(4,Xr,2,2,"mat-option",7),q.Sb(),q.Sb()}if(2&t){var a=q.fc();q.Cb(3),q.lc("ngModel",a.params._grupo),q.Cb(1),q.lc("ngForOf",a.grupos)}}function Yr(t,e){1&t&&q.Ob(0,"app-cargando")}function Zr(t,e){if(1&t&&(q.Tb(0,"div",0),q.Tb(1,"div",1),q.Ob(2,"app-por-categoria",18),q.Sb(),q.Sb()),2&t){var n=q.fc();q.Cb(2),q.lc("params",n.params)("data",n.porCategoria)}}function tc(t,e){if(1&t&&(q.Tb(0,"div",0),q.Tb(1,"div",1),q.Ob(2,"app-por-articulo",18),q.Sb(),q.Sb()),2&t){var n=q.fc();q.Cb(2),q.lc("params",n.params)("data",n.porArticulo)}}var ec,nc,ac=((nc=function(){function t(e,n,a,o){var i=this;u(this,t),this.snackBar=e,this.rptVentasSrvc=n,this.tipoTurnoSrvc=a,this.sedeSrvc=o,this.tiposReporte=[],this.params={},this.paramsToSend={},this.msgGenerandoReporte=null,this.porCategoria=[],this.porArticulo={datos:[]},this.tiposTurno=[],this.sedes=[],this.grupos=Re.a.grupos,this.tituloCategoria="Ventas por categoria",this.tituloArticulo="Ventas por articulo",this.cargando=!1,this.configBotones={showPdf:!0,showHtml:!0,showExcel:!0},this.loadSedes=function(){i.sedeSrvc.getSedes({reporte:!0}).subscribe(function(t){t&&(i.sedes=t)})},this.loadTiposTurno=function(){i.tipoTurnoSrvc.get().subscribe(function(t){t&&(i.tiposTurno=t)})},this.loadTiposReporte=function(){i.tiposReporte=[{tipo_reporte:1,descripcion:"Por categor\xeda"},{tipo_reporte:2,descripcion:"Por art\xedculo"}]},this.resetParams=function(){i.porCategoria=[],i.porArticulo=[],i.msgGenerandoReporte=null,i.params={tipo_reporte:void 0,fdel:ia().startOf("week").format(Re.a.dbDateFormat),fal:ia().endOf("week").format(Re.a.dbDateFormat)},i.cargando=!1},this.getReporte=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;switch(i.paramsToSend=JSON.parse(JSON.stringify(i.params)),i.msgGenerandoReporte="GENERANDO REPORTE EN ",t){case 1:i.getEnPantalla();break;case 2:i.getPdf();break;case 3:i.getExcel()}},this.getPdf=function(){switch(i.params.tipo_reporte){case 1:i.getPorCategoriaPdf();break;case 2:i.getPorArticuloPdf()}},this.getExcel=function(){switch(i.params.tipo_reporte){case 1:i.getPorCategoriaExcel();break;case 2:i.getPorArticuloExcel()}},this.getPorCategoriaExcel=function(){i.paramsToSend._excel=1,i.cargando=!0,i.cleanParams(),i.rptVentasSrvc.porCategoriaPdf(i.paramsToSend).subscribe(function(t){if(i.cargando=!1,t){var e=new Blob([t],{type:"application/vnd.ms-excel"});Object(Fr.saveAs)(e,"".concat(i.tituloCategoria,".xls"))}else i.snackBar.open("No se pudo generar el reporte...",i.tituloCategoria,{duration:3e3})})},this.getPorCategoriaPdf=function(){i.paramsToSend._excel=0,i.cargando=!0,i.cleanParams(),i.rptVentasSrvc.porCategoriaPdf(i.paramsToSend).subscribe(function(t){if(i.cargando=!1,t){var e=new Blob([t],{type:"application/pdf"});Object(Fr.saveAs)(e,"".concat(i.tituloCategoria,".pdf"))}else i.snackBar.open("No se pudo generar el reporte...",i.tituloCategoria,{duration:3e3})})},this.getPorArticuloPdf=function(){i.paramsToSend._excel=0,i.cargando=!0,i.cleanParams(),i.rptVentasSrvc.porArticuloPdf(i.paramsToSend).subscribe(function(t){if(i.cargando=!1,t){var e=new Blob([t],{type:"application/pdf"});Object(Fr.saveAs)(e,"".concat(i.tituloArticulo,".pdf"))}else i.snackBar.open("No se pudo generar el reporte...",i.tituloArticulo,{duration:3e3})})},this.getPorArticuloExcel=function(){i.paramsToSend._excel=1,i.cargando=!0,i.cleanParams(),i.rptVentasSrvc.porArticuloPdf(i.paramsToSend).subscribe(function(t){if(i.cargando=!1,t){var e=new Blob([t],{type:"application/vnd.ms-excel"});Object(Fr.saveAs)(e,"".concat(i.tituloArticulo,".xls"))}else i.snackBar.open("No se pudo generar el reporte...",i.tituloArticulo,{duration:3e3})})},this.getEnPantalla=function(){switch(i.params.tipo_reporte){case 1:i.getPorCategoriaEnPantalla();break;case 2:i.getPorArticuloEnPantalla()}},this.cleanParams=function(){return delete i.paramsToSend.tipo_reporte},this.getPorCategoriaEnPantalla=function(){i.cargando=!0,i.cleanParams(),i.rptVentasSrvc.porCategoria(i.paramsToSend).subscribe(function(t){i.cargando=!1,t?i.porCategoria=t:i.snackBar.open("No se pudo generar el reporte...","Ventas por categor\xeda",{duration:3e3})})},this.getPorArticuloEnPantalla=function(){i.cargando=!0,i.cleanParams(),i.rptVentasSrvc.porArticulo(i.paramsToSend).subscribe(function(t){i.cargando=!1,t?i.porArticulo=t:i.snackBar.open("No se pudo generar el reporte...","Ventas por art\xedculo",{duration:3e3})})}}return b(t,[{key:"ngOnInit",value:function(){this.resetParams(),this.loadTiposReporte(),this.loadTiposTurno(),this.loadSedes()}}]),t}()).\u0275fac=function(t){return new(t||nc)(q.Nb(O.b),q.Nb(Mr),q.Nb(Gi),q.Nb(wr.a))},nc.\u0275cmp=q.Hb({type:nc,selectors:[["app-rpt-ventas"]],decls:33,vars:13,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmEntidad","ngForm"],[1,"fullWidth"],["name","tipo_reporte","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","turno_tipo",3,"ngModel","ngModelChange"],["type","date","matInput","","placeholder","Del","name","fdel","required","",3,"ngModel","ngModelChange"],["type","date","matInput","","placeholder","Al","name","fal","required","",3,"ngModel","ngModelChange"],["name","sede","multiple","",3,"ngModel","ngModelChange"],["class","fullWidth",4,"ngIf"],[3,"configuracion","excelClick","htmlClick","pdfClick","resetParamsClick"],[4,"ngIf"],["class","row",4,"ngIf"],[3,"value"],["name","grupo",3,"ngModel","ngModelChange"],[3,"params","data"]],template:function(t,e){1&t&&(q.Tb(0,"div",0),q.Tb(1,"div",1),q.Tb(2,"mat-card",2),q.Tb(3,"mat-card-title"),q.Tb(4,"h4"),q.Fc(5,"Reporte de ventas"),q.Sb(),q.Sb(),q.Tb(6,"mat-card-content"),q.Tb(7,"form",3,4),q.Tb(9,"mat-form-field",5),q.Tb(10,"mat-label"),q.Fc(11,"Tipo"),q.Sb(),q.Tb(12,"mat-select",6),q.bc("ngModelChange",function(t){return e.params.tipo_reporte=t}),q.Dc(13,Vr,2,2,"mat-option",7),q.Sb(),q.Sb(),q.Tb(14,"mat-form-field",5),q.Tb(15,"mat-label"),q.Fc(16,"Tipo de turno"),q.Sb(),q.Tb(17,"mat-select",8),q.bc("ngModelChange",function(t){return e.params.turno_tipo=t}),q.Dc(18,Kr,2,2,"mat-option",7),q.Sb(),q.Sb(),q.Tb(19,"mat-form-field",5),q.Tb(20,"input",9),q.bc("ngModelChange",function(t){return e.params.fdel=t}),q.Sb(),q.Sb(),q.Tb(21,"mat-form-field",5),q.Tb(22,"input",10),q.bc("ngModelChange",function(t){return e.params.fal=t}),q.Sb(),q.Sb(),q.Tb(23,"mat-form-field",5),q.Tb(24,"mat-label"),q.Fc(25,"Sede"),q.Sb(),q.Tb(26,"mat-select",11),q.bc("ngModelChange",function(t){return e.params.sede=t}),q.Dc(27,Qr,2,2,"mat-option",7),q.Sb(),q.Sb(),q.Dc(28,Jr,5,2,"mat-form-field",12),q.Tb(29,"app-rpt-botones",13),q.bc("excelClick",function(){return e.getReporte(3)})("htmlClick",function(){return e.getReporte(1)})("pdfClick",function(){return e.getReporte(2)})("resetParamsClick",function(){return e.resetParams()}),q.Sb(),q.Sb(),q.Dc(30,Yr,1,0,"app-cargando",14),q.Sb(),q.Sb(),q.Sb(),q.Sb(),q.Dc(31,Zr,3,2,"div",15),q.Dc(32,tc,3,2,"div",15)),2&t&&(q.Cb(12),q.lc("ngModel",e.params.tipo_reporte),q.Cb(1),q.lc("ngForOf",e.tiposReporte),q.Cb(4),q.lc("ngModel",e.params.turno_tipo),q.Cb(1),q.lc("ngForOf",e.tiposTurno),q.Cb(2),q.lc("ngModel",e.params.fdel),q.Cb(2),q.lc("ngModel",e.params.fal),q.Cb(4),q.lc("ngModel",e.params.sede),q.Cb(1),q.lc("ngForOf",e.sedes),q.Cb(1),q.lc("ngIf",e.params.sede&&e.params.sede.length>1),q.Cb(1),q.lc("configuracion",e.configBotones),q.Cb(1),q.lc("ngIf",e.cargando),q.Cb(1),q.lc("ngIf",1===e.params.tipo_reporte&&e.porCategoria.length>0),q.Cb(1),q.lc("ngIf",2===e.params.tipo_reporte))},directives:[x.a,x.h,x.c,f.r,f.l,f.m,y.b,y.e,F.a,f.p,f.k,f.n,d.l,k.b,f.c,d.m,Or.a,$.m,fa.a,Br,Wr],styles:[""]}),nc),oc=((ec=function(){function t(){var e=this;u(this,t),this.fdel=ia().format(Re.a.dbDateFormat),this.fdelChange=new q.o,this.fal=ia().format(Re.a.dbDateFormat),this.falChange=new q.o,this.configuracion={isRequiredFDel:!0,isRequiredFAl:!0},this.onFDelChange=function(){return e.fdelChange.emit(e.fdel)},this.onFAlChange=function(){return e.falChange.emit(e.fal)}}return b(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||ec)},ec.\u0275cmp=q.Hb({type:ec,selectors:[["app-rpt-fechas"]],inputs:{fdel:"fdel",fal:"fal",configuracion:"configuracion"},outputs:{fdelChange:"fdelChange",falChange:"falChange"},decls:4,vars:4,consts:[[1,"fullWidth"],["type","date","matInput","","placeholder","Del","name","fdel",3,"ngModel","required","ngModelChange","change"],["type","date","matInput","","placeholder","Al","name","fal",3,"ngModel","required","ngModelChange","change"]],template:function(t,e){1&t&&(q.Tb(0,"mat-form-field",0),q.Tb(1,"input",1),q.bc("ngModelChange",function(t){return e.fdel=t})("change",function(){return e.onFDelChange()}),q.Sb(),q.Sb(),q.Tb(2,"mat-form-field",0),q.Tb(3,"input",2),q.bc("ngModelChange",function(t){return e.fal=t})("change",function(){return e.onFAlChange()}),q.Sb(),q.Sb()),2&t&&(q.Cb(1),q.lc("ngModel",e.fdel)("required",e.configuracion.isRequiredFDel),q.Cb(2),q.lc("ngModel",e.fal)("required",e.configuracion.isRequiredFAl))},directives:[y.b,k.b,f.c,f.k,f.n,f.p],styles:[""]}),ec);function ic(t,e){1&t&&q.Ob(0,"app-cargando")}var rc,cc=((rc=function(){function t(){var e=this;u(this,t),this.params={},this.configParams={isRequiredFDel:!0,isRequiredFAl:!0},this.configBotones={isHtmlDisabled:!1,isPdfDisabled:!1,isExcelDisabled:!1},this.cargando=!1,this.resetParams=function(){e.params={fdel:ia().startOf("week").format(Re.a.dbDateFormat),fal:ia().endOf("week").format(Re.a.dbDateFormat)}},this.getReporte=function(){console.log("GENERANDO CON PARAMETROS = ",e.params)}}return b(t,[{key:"ngOnInit",value:function(){this.resetParams()}}]),t}()).\u0275fac=function(t){return new(t||rc)},rc.\u0275cmp=q.Hb({type:rc,selectors:[["app-turnos"]],decls:12,vars:5,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmEntidad","ngForm"],[3,"fdel","fal","configuracion","fdelChange","falChange"],[3,"configuracion","htmlClick","pdfClick","excelClick","resetParamsClick"],[4,"ngIf"]],template:function(t,e){1&t&&(q.Tb(0,"div",0),q.Tb(1,"div",1),q.Tb(2,"mat-card",2),q.Tb(3,"mat-card-title"),q.Tb(4,"h4"),q.Fc(5,"Reporte de Turnos"),q.Sb(),q.Sb(),q.Tb(6,"mat-card-content"),q.Tb(7,"form",3,4),q.Tb(9,"app-rpt-fechas",5),q.bc("fdelChange",function(t){return e.params.fdel=t})("falChange",function(t){return e.params.fal=t}),q.Sb(),q.Tb(10,"app-rpt-botones",6),q.bc("htmlClick",function(){return e.getReporte()})("pdfClick",function(){return e.getReporte()})("excelClick",function(){return e.getReporte()})("resetParamsClick",function(){return e.resetParams()}),q.Sb(),q.Sb(),q.Dc(11,ic,1,0,"app-cargando",7),q.Sb(),q.Sb(),q.Sb(),q.Sb()),2&t&&(q.Cb(9),q.lc("fdel",e.params.fdel)("fal",e.params.fal)("configuracion",e.configParams),q.Cb(1),q.lc("configuracion",e.configBotones),q.Cb(1),q.lc("ngIf",e.cargando))},directives:[x.a,x.h,x.c,f.r,f.l,f.m,oc,Or.a,d.m,fa.a],styles:[""]}),rc);function sc(t,e){1&t&&q.Ob(0,"app-cargando")}var lc,uc=function(){return{standalone:!0}},dc=((lc=function(){function t(e,n){var a=this;u(this,t),this.snackBar=e,this.pdfServicio=n,this.params={},this.titulo="Propinas",this.configBotones={isHtmlDisabled:!0,isPdfDisabled:!1,isExcelDisabled:!1,showHtml:!1,showExcel:!0,showPdf:!0},this.cargando=!1,this.resetParams=function(){a.params={},a.cargando=!1}}return b(t,[{key:"ngOnInit",value:function(){}},{key:"onSubmit",value:function(){var t=this;this.params._excel=0,this.cargando=!0,this.pdfServicio.getReportePropina(this.params).subscribe(function(e){if(t.cargando=!1,e){var n=new Blob([e],{type:"application/pdf"});Object(Fr.saveAs)(n,"".concat(t.titulo,".pdf"))}else t.snackBar.open("No se pudo generar el reporte...",t.titulo,{duration:3e3})})}},{key:"excelClick",value:function(){var t=this;this.params._excel=1,this.cargando=!0,this.pdfServicio.getReportePropina(this.params).subscribe(function(e){if(t.cargando=!1,e){var n=new Blob([e],{type:"application/vnd.ms-excel"});Object(Fr.saveAs)(n,"".concat(t.titulo,".xls"))}else t.snackBar.open("No se pudo generar el reporte...",t.titulo,{duration:3e3})})}}]),t}()).\u0275fac=function(t){return new(t||lc)(q.Nb(O.b),q.Nb(ho.a))},lc.\u0275cmp=q.Hb({type:lc,selectors:[["app-propinas"]],decls:17,vars:9,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmRptPropinas","ngForm"],[1,"fullWidth"],["matInput","","type","date","placeholder","Del","required","",3,"ngModel","ngModelOptions","ngModelChange"],["matInput","","type","date","placeholder","Al","required","",3,"ngModel","ngModelOptions","ngModelChange"],["name","mostrar_detalle",1,"fullWidth",3,"ngModel","ngModelChange"],[3,"configuracion","pdfClick","resetParamsClick","excelClick"],[4,"ngIf"]],template:function(t,e){1&t&&(q.Tb(0,"div",0),q.Tb(1,"div",1),q.Tb(2,"mat-card",2),q.Tb(3,"mat-card-title"),q.Tb(4,"h4"),q.Fc(5,"Reporte de propinas"),q.Sb(),q.Sb(),q.Tb(6,"mat-card-content"),q.Tb(7,"form",3,4),q.Tb(9,"mat-form-field",5),q.Tb(10,"input",6),q.bc("ngModelChange",function(t){return e.params.fdel=t}),q.Sb(),q.Sb(),q.Tb(11,"mat-form-field",5),q.Tb(12,"input",7),q.bc("ngModelChange",function(t){return e.params.fal=t}),q.Sb(),q.Sb(),q.Tb(13,"mat-checkbox",8),q.bc("ngModelChange",function(t){return+(e.params._detalle=t)}),q.Fc(14,"Mostrar Detalle"),q.Sb(),q.Tb(15,"app-rpt-botones",9),q.bc("pdfClick",function(){return e.onSubmit()})("resetParamsClick",function(){return e.resetParams()})("excelClick",function(){return e.excelClick()}),q.Sb(),q.Sb(),q.Dc(16,sc,1,0,"app-cargando",10),q.Sb(),q.Sb(),q.Sb(),q.Sb()),2&t&&(q.Cb(10),q.lc("ngModel",e.params.fdel)("ngModelOptions",q.nc(7,uc)),q.Cb(2),q.lc("ngModel",e.params.fal)("ngModelOptions",q.nc(8,uc)),q.Cb(1),q.lc("ngModel",+e.params._detalle),q.Cb(2),q.lc("configuracion",e.configBotones),q.Cb(1),q.lc("ngIf",e.cargando))},directives:[x.a,x.h,x.c,f.r,f.l,f.m,y.b,k.b,f.c,f.p,f.k,f.n,M.a,Or.a,d.m,fa.a],styles:[""]}),lc),bc=i("+iZS");function mc(t,e){1&t&&(q.Tb(0,"th",19),q.Fc(1,"No."),q.Sb())}function fc(t,e){if(1&t&&(q.Tb(0,"td",20),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.Cb(1),q.Hc("",n.comanda," ")}}function pc(t,e){1&t&&(q.Tb(0,"th",19),q.Fc(1,"Orden"),q.Sb())}function hc(t,e){if(1&t&&(q.Tb(0,"td",20),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.Cb(1),q.Gc(n.origen_datos.numero_orden||"")}}function gc(t,e){1&t&&(q.Tb(0,"th",19),q.Fc(1,"Fecha/Hora"),q.Sb())}function vc(t,e){if(1&t&&(q.Tb(0,"td",20),q.Fc(1),q.gc(2,"date"),q.Sb()),2&t){var n=e.$implicit;q.Cb(1),q.Gc(q.ic(2,1,n.fhcreacion,"dd/MM/yyyy HH:mm:ss")||"")}}function Sc(t,e){1&t&&(q.Tb(0,"th",19),q.Fc(1,"Cliente"),q.Sb())}function Cc(t,e){if(1&t&&(q.Tb(0,"td",20),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.Cb(1),q.Gc(n.cuentas[0].nombre)}}function Tc(t,e){1&t&&(q.Tb(0,"th",19),q.Fc(1,"Total"),q.Sb())}function _c(t,e){if(1&t&&(q.Tb(0,"td",20),q.Fc(1),q.gc(2,"number"),q.Sb()),2&t){var n=e.$implicit;q.Cb(1),q.Gc(q.ic(2,1,n.total,"1.2-2"))}}function yc(t,e){1&t&&(q.Tb(0,"th",21),q.Fc(1,"Imprimir"),q.Sb())}function kc(t,e){if(1&t){var n=q.Ub();q.Tb(0,"td",22),q.Tb(1,"button",23),q.bc("click",function(){q.xc(n);var t=e.$implicit;return q.fc().imprimir(t)}),q.Fc(2," Imprimir "),q.Sb(),q.Sb()}}function xc(t,e){1&t&&(q.Tb(0,"th",21),q.Fc(1,"Cancelar"),q.Sb())}function Dc(t,e){if(1&t){var n=q.Ub();q.Tb(0,"td",22),q.Tb(1,"button",23),q.bc("click",function(){q.xc(n);var t=e.$implicit;return q.fc().cancelarPedido(t)}),q.Fc(2," Cancelar "),q.Sb(),q.Sb()}}function Pc(t,e){1&t&&(q.Tb(0,"th",21),q.Fc(1,"Facturar"),q.Sb())}function Ec(t,e){if(1&t){var n=q.Ub();q.Tb(0,"td",22),q.Tb(1,"button",23),q.bc("click",function(){q.xc(n);var t=e.$implicit;return q.fc().firmar(t)}),q.Fc(2," Facturar "),q.Sb(),q.Sb()}}function Fc(t,e){if(1&t&&(q.Tb(0,"h6"),q.Fc(1),q.Sb()),2&t){var n=q.fc().$implicit;q.Cb(1),q.Hc("Orden #",n.origen_datos.numero_orden,"")}}function Mc(t,e){if(1&t&&(q.Tb(0,"tr"),q.Tb(1,"td",29),q.Tb(2,"p",30),q.Fc(3),q.Sb(),q.Sb(),q.Sb()),2&t){var n=q.fc().$implicit;q.Cb(3),q.Gc(n.notas_generales)}}function wc(t,e){1&t&&q.Ob(0,"br")}function Oc(t,e){if(1&t&&(q.Tb(0,"span"),q.Fc(1),q.Sb()),2&t){var n=q.fc().$implicit;q.Cb(1),q.Hc("\xa0\xa0\xa0",n.notas,"")}}function Ic(t,e){if(1&t&&(q.Tb(0,"tr"),q.Tb(1,"td",31),q.Fc(2),q.Sb(),q.Sb()),2&t){var n=q.fc().$implicit;q.Cb(2),q.Hc(" ",n," ")}}function Rc(t,e){if(1&t&&(q.Rb(0),q.Dc(1,Ic,3,1,"tr",26),q.Qb()),2&t){var n=e.$implicit;q.Cb(1),q.lc("ngIf",n.length>0)}}function Ac(t,e){if(1&t&&(q.Rb(0),q.Tb(1,"tr"),q.Tb(2,"td"),q.Fc(3),q.Dc(4,wc,1,0,"br",26),q.Dc(5,Oc,2,1,"span",26),q.Sb(),q.Tb(6,"td",27),q.Fc(7),q.gc(8,"number"),q.Sb(),q.Sb(),q.Dc(9,Rc,2,1,"ng-container",28),q.Qb()),2&t){var n=e.$implicit;q.Cb(3),q.Ic(" ",n.cantidad," ",n.articulo.descripcion,""),q.Cb(1),q.lc("ngIf",n.notas.length>0),q.Cb(1),q.lc("ngIf",n.notas.length>0),q.Cb(2),q.Gc(q.ic(8,6,+n.precio*+n.cantidad+ +n.monto_extra,"1.2-2")),q.Cb(2),q.lc("ngForOf",n.detalle)}}function Uc(t,e){if(1&t&&(q.Tb(0,"td",20),q.Tb(1,"div",24),q.Tb(2,"table",25),q.Tb(3,"caption"),q.Tb(4,"h5"),q.Fc(5),q.Sb(),q.Dc(6,Fc,2,1,"h6",26),q.Sb(),q.Tb(7,"thead"),q.Tb(8,"th"),q.Fc(9,"Producto"),q.Sb(),q.Tb(10,"th",27),q.Fc(11,"Total"),q.Sb(),q.Sb(),q.Tb(12,"tbody"),q.Dc(13,Mc,4,1,"tr",26),q.Dc(14,Ac,10,9,"ng-container",28),q.Sb(),q.Sb(),q.Sb(),q.Sb()),2&t){var n=e.$implicit,a=q.fc();q.Db("colspan",a.columnsToDisplay.length),q.Cb(1),q.lc("@detailExpand",n==a.expandedElement?"expanded":"collapsed"),q.Cb(4),q.Hc("Detalle del pedido #",n.comanda,""),q.Cb(1),q.lc("ngIf",n.origen_datos.numero_orden),q.Cb(7),q.lc("ngIf",n.notas_generales),q.Cb(1),q.lc("ngForOf",n.cuentas[0].productos)}}function Nc(t,e){1&t&&q.Ob(0,"tr",32)}function jc(t,e){if(1&t){var n=q.Ub();q.Tb(0,"tr",33),q.bc("click",function(){q.xc(n);var t=e.$implicit,a=q.fc();return a.expandedElement=a.expandedElement===t?null:t}),q.Sb()}if(2&t){var a=e.$implicit,o=q.fc();q.Fb("example-expanded-row",o.expandedElement===a)}}function Bc(t,e){1&t&&q.Ob(0,"tr",34)}var Hc,Lc=function(){return["expandedDetail"]},qc=((Hc=function(){function e(n,a,o,i,r,c,s,l,d){var b=this;u(this,e),this.dialog=n,this.snackBar=a,this.socket=o,this.ls=i,this.comandaSrvc=r,this.facturaSrvc=c,this.dns=s,this.pdfServicio=l,this.configSrvc=d,this.dataSource=[],this.columnsToDisplay=["comanda","orden","fechahora","nombre","total","imprimir","cancelar","facturar"],this.comandasEnLinea=[],this.params={de:0,a:99},this.avisoSocketIOEvent=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";b.dialog.open(Ze.a,{maxWidth:"400px",data:new Ze.b("Socket.IO",t,"Aceptar","Cancelar")}).afterClosed().subscribe(function(t){})},this.notificarUsuario=function(){var t={icon:"assets/img/minilogo.png",body:"Se recibi\xf3 una nueva orden a las ".concat(ia().format(Re.a.dateTimeFormat),"."),dir:"auto"};b.dns.createNotification("Rest-Touch Pro",1e4,t)},this.loadComandasEnLinea=function(){b.comandaSrvc.getComandasOnLIne().subscribe(function(t){b.comandasEnLinea=t,b.dataSource=b.comandasEnLinea})},this.setToPrint=function(t){var e=[];return t.forEach(function(t){e.push({id:+t.articulo.articulo,nombre:t.articulo.descripcion,cantidad:+t.cantidad,total:+t.total,notas:t.notas||"",impresora:{bluetooth:+t.articulo.impresora.bluetooth,direccion_ip:t.articulo.impresora.direccion_ip||"",impresora:+t.articulo.impresora.impresora,nombre:t.articulo.impresora.nombre||"",sede:+t.articulo.impresora.sede,ubicacion:t.articulo.impresora.ubicacion||""},detalle:t.detalle})}),e},this.getPdf=function(t){var e=+t.cuentas[0].cuenta;b.pdfServicio.getComanda(e).subscribe(function(t){if(t){var n=new Blob([t],{type:"application/pdf"}),a=window.URL.createObjectURL(n);window.open(a,"cuenta_".concat(e),"height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no")}else b.snackBar.open("No se pudo generar la comanda...","Comanda",{duration:3e3})})},this.imprimir=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=b.setToPrint(t.cuentas[0].productos),a=n.filter(function(t){return 0==+t.impresora.bluetooth}),o=n.filter(function(t){return 1==+t.impresora.bluetooth}),i={};a.length>0&&(i={Indice:e+1,Tipo:"Comanda",Nombre:t.cuentas[0].nombre,Numero:t.comanda,NoOrdenEnLinea:t.origen_datos.numero_orden,DireccionEntrega:t.origen_datos.direccion_entrega,DetalleCuenta:a,Total:0,NotasGenerales:t.notas_generales||""},b.socket.emit("print:comanda","".concat(JSON.stringify(i)))),o.length>0&&(i={Tipo:"Comanda",Nombre:t.cuentas[0].nombre,Numero:t.comanda,NoOrdenEnLinea:t.origen_datos.numero_orden,DireccionEntrega:t.origen_datos.direccion_entrega,DetalleCuenta:o,Total:0},b.printToBT(JSON.stringify(i)))},this.printToBT=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=window.open("com.restouch.impresion://impresion/".concat(t),"PrntBT","height=200,width=200,menubar=no,location=no,resizable=no,scrollbars=no,status=no");setTimeout(function(){return e.close()},1e3)},this.firmar=function(t){b.facturaSrvc.firmar(+t.factura.factura).subscribe(function(e){e.exito&&(b.loadComandasEnLinea(),b.dialog.open(Ze.a,{maxWidth:"400px",data:new Ze.b("Imprimir factura","\xbfDesea imprimir la factura?","S\xed","No")}).afterClosed().subscribe(function(n){n&&(1===(b.configSrvc.getConfig(Re.a.CONSTANTES.RT_MODO_FACTURA)||1)?b.printFactura(e.factura,t.origen_datos):b.representacionGrafica(+t.factura.factura))})),b.snackBar.open(e.mensaje,"Facturaci\xf3n",{duration:e.exito?3e3:1e4})})},this.printFactura=function(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={NombreEmpresa:e.empresa.nombre_comercial,NitEmpresa:e.empresa.nit,SedeEmpresa:e.sedeFactura.nombre,DireccionEmpresa:e.empresa.direccion,Fecha:ia(e.fecha_factura).format(Re.a.dateFormat),Nit:e.receptor.nit,Nombre:e.receptor.nombre,Direccion:e.receptor.direccion,Serie:e.serie_factura,Numero:e.numero_factura,Total:0,NoAutorizacion:e.fel_uuid,NombreCertificador:e.certificador_fel.nombre,NitCertificador:e.certificador_fel.nit,FechaDeAutorizacion:e.fecha_autorizacion,NoOrdenEnLinea:a.numero_orden,FormaDePago:a.metodo_pago&&a.metodo_pago.length>0?a.metodo_pago.join(", "):"",DetalleFactura:[]},i=t(e.detalle);try{for(i.s();!(n=i.n()).done;){var r=n.value;o.DetalleFactura.push({Cantidad:r.cantidad,Descripcion:r.articulo.descripcion,Total:parseFloat(r.total)}),o.Total+=parseFloat(r.total)}}catch(c){i.e(c)}finally{i.f()}b.socket.emit("print:factura",JSON.stringify(o))},this.representacionGrafica=function(t){b.facturaSrvc.getGrafo(t).subscribe(function(t){if(t.exito)switch(t.tipo){case"link":b.openLinkWindow(t.documento);break;case"pdf":b.openPdfDocument(t.documento)}})},this.openLinkWindow=function(t){return window.open(t,"winFactPdf","height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no")},this.openPdfDocument=function(t){window.open("","winFactPdf","height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no").document.write('<iframe width="100%" style="margin: -8px;border: none;" height="100%" src="data:application/pdf;base64, '+encodeURI(t)+'"></iframe>')},this.imprimirLote=function(){for(var t=b.params.de;t<=b.params.a;t++)b.imprimir(b.comandasEnLinea[t],t)},this.cancelarPedido=function(e){b.dialog.open(Ze.a,{maxWidth:"400px",data:new Ze.b("Cancelar pedido","Si cancela el pedido, ser\xe1 necesario volver a ingresarlo. \xbfDesea continuar?","S\xed","No",{input:[{select:!1,label:"Comentario",valor:null,id:"comentario",requerido:!1}]})}).afterClosed().subscribe(function(n){if(n.resultado){var a,o={},i=t(n.config.input);try{for(i.s();!(a=i.n()).done;){var r=a.value;o[r.id]=r.valor}}catch(c){i.e(c)}finally{i.f()}b.comandaSrvc.cancelarPedido(e.comanda,o).subscribe(function(t){t.exito?b.snackBar.open("Pedido cancelado con \xe9xito...","Pedido",{duration:3e3}):b.snackBar.open("ERROR: ".concat(t.mensaje),"Pedido",{duration:7e3}),b.loadComandasEnLinea()})}})}}return b(e,[{key:"ngOnInit",value:function(){var t=this;this.ls.get(Re.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(Re.a.usrTokenVar).sede_uuid),this.socket.on("shopify:updlist",function(){t.loadComandasEnLinea(),t.notificarUsuario()}),this.socket.on("reconnect",function(){return t.socket.emit("joinRestaurant",t.ls.get(Re.a.usrTokenVar).sede_uuid)}),this.socket.on("connect_timeout",function(){var e="DESCONECTADO DEL SERVIDOR (TIMEOUT)";t.snackBar.open(e,"ERROR",{duration:5e3}),t.avisoSocketIOEvent(e)}),this.socket.on("reconnect_attempt",function(e){return t.snackBar.open("INTENTO DE RECONEXI\xd3N #".concat(e),"ERROR",{duration:1e4})}),this.socket.on("shopify:error",function(e){t.loadComandasEnLinea(),t.snackBar.open("ERROR: ".concat(e),"Firmar",{duration:1e4})})),this.loadComandasEnLinea()}},{key:"ngOnDestroy",value:function(){}}]),e}()).\u0275fac=function(t){return new(t||Hc)(q.Nb(N.b),q.Nb(O.b),q.Nb(da.a),q.Nb(He.a),q.Nb(Qn),q.Nb(ua.a),q.Nb(bc.a),q.Nb(ho.a),q.Nb(go.a))},Hc.\u0275cmp=q.Hb({type:Hc,selectors:[["app-comanda-en-linea"]],decls:32,vars:5,consts:[[1,"row"],[1,"col","m12","s12"],["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","comanda"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","orden"],["matColumnDef","fechahora"],["matColumnDef","nombre"],["matColumnDef","total"],["matColumnDef","imprimir"],["mat-header-cell","","style","width: 10%;",4,"matHeaderCellDef"],["mat-cell","","class","tamanioAmigable","style","width: 10%;",4,"matCellDef"],["matColumnDef","cancelar"],["matColumnDef","facturar"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",3,"example-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",2,"width","10%"],["mat-cell","",1,"tamanioAmigable",2,"width","10%"],["mat-flat-button","","type","button","color","accent",1,"btnCelSize",3,"click"],[1,"example-element-detail"],[2,"width","75%","background-color","#f5f5f5","table-layout","fixed"],[4,"ngIf"],[1,"rtxt"],[4,"ngFor","ngForOf"],["colspan","2"],[1,"long-notes"],["colspan","2",1,"tabulador-doble"],["mat-header-row",""],["mat-row","",1,"example-element-row",3,"click"],["mat-row","",1,"example-detail-row"]],template:function(t,e){1&t&&(q.Tb(0,"div",0),q.Tb(1,"div",1),q.Tb(2,"table",2),q.Rb(3,3),q.Dc(4,mc,2,0,"th",4),q.Dc(5,fc,2,1,"td",5),q.Qb(),q.Rb(6,6),q.Dc(7,pc,2,0,"th",4),q.Dc(8,hc,2,1,"td",5),q.Qb(),q.Rb(9,7),q.Dc(10,gc,2,0,"th",4),q.Dc(11,vc,3,4,"td",5),q.Qb(),q.Rb(12,8),q.Dc(13,Sc,2,0,"th",4),q.Dc(14,Cc,2,1,"td",5),q.Qb(),q.Rb(15,9),q.Dc(16,Tc,2,0,"th",4),q.Dc(17,_c,3,4,"td",5),q.Qb(),q.Rb(18,10),q.Dc(19,yc,2,0,"th",11),q.Dc(20,kc,3,0,"td",12),q.Qb(),q.Rb(21,13),q.Dc(22,xc,2,0,"th",11),q.Dc(23,Dc,3,0,"td",12),q.Qb(),q.Rb(24,14),q.Dc(25,Pc,2,0,"th",11),q.Dc(26,Ec,3,0,"td",12),q.Qb(),q.Rb(27,15),q.Dc(28,Uc,15,6,"td",5),q.Qb(),q.Dc(29,Nc,1,0,"tr",16),q.Dc(30,jc,1,2,"tr",17),q.Dc(31,Bc,1,0,"tr",18),q.Sb(),q.Sb(),q.Sb()),2&t&&(q.Cb(2),q.lc("dataSource",e.dataSource),q.Cb(27),q.lc("matHeaderRowDef",e.columnsToDisplay),q.Cb(1),q.lc("matRowDefColumns",e.columnsToDisplay),q.Cb(1),q.lc("matRowDefColumns",q.nc(4,Lc)))},directives:[E.j,E.c,E.e,E.b,E.g,E.i,E.d,E.a,w.a,d.m,d.l,E.f,E.h],pipes:[d.e,d.f],styles:["table[_ngcontent-%COMP%]{width:100%}tr.example-detail-row[_ngcontent-%COMP%]{height:0}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):hover{background:#777}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):active{background:#efefef}.tamanioAmigable[_ngcontent-%COMP%]{padding:5px;width:10%!important;min-height:55px}.btnCelSize[_ngcontent-%COMP%]{min-width:55px;width:100%}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.example-element-diagram[_ngcontent-%COMP%]{min-width:80px;border:2px solid #000;padding:8px;font-weight:lighter;margin:8px 0;height:104px}.example-element-symbol[_ngcontent-%COMP%]{font-weight:700;font-size:40px;line-height:normal}.example-element-description[_ngcontent-%COMP%]{padding:16px}.example-element-description-attribution[_ngcontent-%COMP%]{opacity:.5}.long-notes[_ngcontent-%COMP%]{overflow-wrap:break-word}"],data:{animation:[Object(tt.m)("detailExpand",[Object(tt.j)("collapsed",Object(tt.k)({height:"0px",minHeight:"0"})),Object(tt.j)("expanded",Object(tt.k)({height:"*"})),Object(tt.l)("expanded <=> collapsed",Object(tt.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),Hc),zc=i("roIu");function $c(t,e){if(1&t&&(q.Tb(0,"mat-option",17),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n.turno_tipo),q.Cb(1),q.Hc(" ",n.descripcion," ")}}function Gc(t,e){if(1&t&&(q.Tb(0,"mat-option",17),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n.sede.sede),q.Cb(1),q.Hc(" ",n.sede.nombre," ")}}function Wc(t,e){if(1&t&&(q.Tb(0,"mat-option",17),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n.id),q.Cb(1),q.Hc(" ",n.descripcion," ")}}function Vc(t,e){if(1&t){var n=q.Ub();q.Tb(0,"mat-form-field",5),q.Tb(1,"mat-label"),q.Fc(2,"Agrupar por"),q.Sb(),q.Tb(3,"mat-select",18),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().params._grupo=t}),q.Dc(4,Wc,2,2,"mat-option",7),q.Sb(),q.Sb()}if(2&t){var a=q.fc();q.Cb(3),q.lc("ngModel",a.params._grupo),q.Cb(1),q.lc("ngForOf",a.grupos)}}function Kc(t,e){1&t&&q.Ob(0,"hr")}var Qc=function(){return{standalone:!0}};function Xc(t,e){if(1&t&&(q.Tb(0,"div"),q.Tb(1,"mat-form-field",5),q.Tb(2,"input",20),q.bc("ngModelChange",function(t){return e.$implicit.monto=t}),q.Sb(),q.Sb(),q.Sb()),2&t){var n=e.$implicit;q.Cb(2),q.mc("placeholder",n.descripcion),q.lc("ngModel",n.monto)("ngModelOptions",q.nc(3,Qc))}}function Jc(t,e){if(1&t&&(q.Tb(0,"form"),q.Dc(1,Xc,3,4,"div",19),q.Sb()),2&t){var n=q.fc();q.Cb(1),q.lc("ngForOf",n.fpagos)}}function Yc(t,e){1&t&&q.Ob(0,"app-cargando")}var Zc,ts=((Zc=function(){function t(e,n,a,o,i){var r=this;u(this,t),this.snackBar=e,this.pdfServicio=n,this.tipoTurnoSrvc=a,this.fpagoSrvc=o,this.sedeSrvc=i,this.params={_validar:!1,sede:[]},this.titulo="Resumen de caja",this.tiposTurno=[],this.cargando=!1,this.fpagos=[],this.sedes=[],this.grupos=Re.a.grupos,this.configBotones={showPdf:!0,showHtml:!1,showExcel:!0},this.loadFormaPago=function(){r.fpagoSrvc.get().subscribe(function(t){t&&(r.fpagos=t)})},this.loadSedes=function(){r.sedeSrvc.getSedes({reporte:!0}).subscribe(function(t){t&&(r.sedes=t)})},this.loadTiposTurno=function(){r.tipoTurnoSrvc.get().subscribe(function(t){t&&(r.tiposTurno=t)})},this.resetParams=function(){r.params={},r.cargando=!1},this.excelClick=function(){r.cargando=!0,r.params._pagos=r.fpagos,r.params._excel=1,r.pdfServicio.getReporteCaja(r.params).subscribe(function(t){if(r.cargando=!1,t){var e=new Blob([t],{type:"application/vnd.ms-excel"});Object(Fr.saveAs)(e,"".concat(r.titulo,".xls"))}else r.snackBar.open("No se pudo generar el reporte...",r.titulo,{duration:3e3})})}}return b(t,[{key:"ngOnInit",value:function(){this.loadTiposTurno(),this.loadFormaPago(),this.loadSedes()}},{key:"onSubmit",value:function(){var t=this;this.cargando=!0,this.params._pagos=this.fpagos,this.params._excel=0,this.pdfServicio.getReporteCaja(this.params).subscribe(function(e){if(t.cargando=!1,e){var n=new Blob([e],{type:"application/pdf"});Object(Fr.saveAs)(n,"".concat(t.titulo,".pdf"))}else t.snackBar.open("No se pudo generar el reporte...",t.titulo,{duration:3e3})})}}]),t}()).\u0275fac=function(t){return new(t||Zc)(q.Nb(O.b),q.Nb(ho.a),q.Nb(Gi),q.Nb(zc.a),q.Nb(wr.a))},Zc.\u0275cmp=q.Hb({type:Zc,selectors:[["app-caja"]],decls:35,vars:17,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmRptCaja","ngForm"],[1,"fullWidth"],["name","turno_tipo",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","date","placeholder","Del","required","",3,"ngModel","ngModelOptions","ngModelChange"],["matInput","","type","date","placeholder","Al","required","",3,"ngModel","ngModelOptions","ngModelChange"],["name","sede","multiple","",3,"ngModel","ngModelChange"],["class","fullWidth",4,"ngIf"],[1,"col"],["name","mostrar_detalle",1,"fullWidth",3,"ngModel","ngModelChange"],["name","validar",1,"fullWidth",3,"ngModel","ngModelChange"],[4,"ngIf"],[3,"configuracion","excelClick","pdfClick","resetParamsClick"],[3,"value"],["name","grupo",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["matInput","","type","number","step","0.01",3,"placeholder","ngModel","ngModelOptions","ngModelChange"]],template:function(t,e){1&t&&(q.Tb(0,"div",0),q.Tb(1,"div",1),q.Tb(2,"mat-card",2),q.Tb(3,"mat-card-title"),q.Tb(4,"h4"),q.Fc(5,"Reporte de caja"),q.Sb(),q.Sb(),q.Tb(6,"mat-card-content"),q.Tb(7,"form",3,4),q.Tb(9,"mat-form-field",5),q.Tb(10,"mat-label"),q.Fc(11,"Tipo de turno"),q.Sb(),q.Tb(12,"mat-select",6),q.bc("ngModelChange",function(t){return e.params.turno_tipo=t}),q.Dc(13,$c,2,2,"mat-option",7),q.Sb(),q.Sb(),q.Tb(14,"mat-form-field",5),q.Tb(15,"input",8),q.bc("ngModelChange",function(t){return e.params.fdel=t}),q.Sb(),q.Sb(),q.Tb(16,"mat-form-field",5),q.Tb(17,"input",9),q.bc("ngModelChange",function(t){return e.params.fal=t}),q.Sb(),q.Sb(),q.Tb(18,"mat-form-field",5),q.Tb(19,"mat-label"),q.Fc(20,"Sede"),q.Sb(),q.Tb(21,"mat-select",10),q.bc("ngModelChange",function(t){return e.params.sede=t}),q.Dc(22,Gc,2,2,"mat-option",7),q.Sb(),q.Sb(),q.Dc(23,Vc,5,2,"mat-form-field",11),q.Tb(24,"div",0),q.Tb(25,"div",12),q.Tb(26,"mat-checkbox",13),q.bc("ngModelChange",function(t){return+(e.params._detalle=t)}),q.Fc(27,"Mostrar Detalle"),q.Sb(),q.Sb(),q.Tb(28,"div",12),q.Tb(29,"mat-checkbox",14),q.bc("ngModelChange",function(t){return+(e.params._validar=t)}),q.Fc(30,"Validar Montos"),q.Sb(),q.Sb(),q.Sb(),q.Dc(31,Kc,1,0,"hr",15),q.Dc(32,Jc,2,1,"form",15),q.Tb(33,"app-rpt-botones",16),q.bc("excelClick",function(){return e.excelClick()})("pdfClick",function(){return e.onSubmit()})("resetParamsClick",function(){return e.resetParams()}),q.Sb(),q.Sb(),q.Dc(34,Yc,1,0,"app-cargando",15),q.Sb(),q.Sb(),q.Sb(),q.Sb()),2&t&&(q.Cb(12),q.lc("ngModel",e.params.turno_tipo),q.Cb(1),q.lc("ngForOf",e.tiposTurno),q.Cb(2),q.lc("ngModel",e.params.fdel)("ngModelOptions",q.nc(15,Qc)),q.Cb(2),q.lc("ngModel",e.params.fal)("ngModelOptions",q.nc(16,Qc)),q.Cb(4),q.lc("ngModel",e.params.sede),q.Cb(1),q.lc("ngForOf",e.sedes),q.Cb(1),q.lc("ngIf",e.params.sede&&e.params.sede.length>1),q.Cb(3),q.lc("ngModel",+e.params._detalle),q.Cb(3),q.lc("ngModel",+e.params._validar),q.Cb(2),q.lc("ngIf",e.params._validar),q.Cb(1),q.lc("ngIf",e.params._validar),q.Cb(1),q.lc("configuracion",e.configBotones),q.Cb(1),q.lc("ngIf",e.cargando))},directives:[x.a,x.h,x.c,f.r,f.l,f.m,y.b,y.e,F.a,f.k,f.n,d.l,k.b,f.c,f.p,d.m,M.a,Or.a,$.m,f.o,fa.a],styles:[""]}),Zc);function es(t,e){1&t&&q.Ob(0,"app-cargando")}var ns,as=((ns=function(){function t(e,n){var a=this;u(this,t),this.snackBar=e,this.pdfServicio=n,this.params={},this.titulo="Facturas",this.cargando=!1,this.configBotones={showPdf:!0,showHtml:!1,showExcel:!0,isPdfDisabled:!1,isExcelDisabled:!1},this.resetParams=function(){a.params={fdel:ia().startOf("month").format(Re.a.dbDateFormat),fal:ia().format(Re.a.dbDateFormat)},a.cargando=!1},this.chkDates=function(){a.configBotones.isPdfDisabled=!a.params.fdel||!a.params.fal,a.configBotones.isExcelDisabled=!a.params.fdel||!a.params.fal}}return b(t,[{key:"ngOnInit",value:function(){this.resetParams()}},{key:"onSubmit",value:function(){var t=this;this.cargando=!0,this.params._excel=0,this.pdfServicio.getReporteFactura(this.params).subscribe(function(e){if(t.cargando=!1,e){var n=new Blob([e],{type:"application/pdf"});Object(Fr.saveAs)(n,"".concat(t.titulo,".pdf"))}else t.snackBar.open("No se pudo generar el reporte...",t.titulo,{duration:3e3})})}},{key:"excelClick",value:function(){var t=this;this.cargando=!0,this.params._excel=1,this.pdfServicio.getReporteFactura(this.params).subscribe(function(e){if(t.cargando=!1,e){var n=new Blob([e],{type:"application/vnd.ms-excel"});Object(Fr.saveAs)(n,"".concat(t.titulo,".xls"))}else t.snackBar.open("No se pudo generar el reporte...",t.titulo,{duration:3e3})})}}]),t}()).\u0275fac=function(t){return new(t||ns)(q.Nb(O.b),q.Nb(ho.a))},ns.\u0275cmp=q.Hb({type:ns,selectors:[["app-factura"]],decls:22,vars:6,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmRptFactura","ngForm"],[1,"fullWidth"],["matInput","","type","date","placeholder","Del","name","fdel","required","",3,"ngModel","ngModelChange","change"],["matInput","","type","date","placeholder","Al","name","fal","required","",3,"ngModel","ngModelChange","change"],[1,"col"],["name","detalle",1,"fullWidth",3,"ngModel","ngModelChange"],["name","anuladas",1,"fullWidth",3,"ngModel","ngModelChange"],[3,"configuracion","excelClick","pdfClick","resetParamsClick"],[4,"ngIf"]],template:function(t,e){1&t&&(q.Tb(0,"div",0),q.Tb(1,"div",1),q.Tb(2,"mat-card",2),q.Tb(3,"mat-card-title"),q.Tb(4,"h4"),q.Fc(5,"Reporte de facturas"),q.Sb(),q.Sb(),q.Tb(6,"mat-card-content"),q.Tb(7,"form",3,4),q.Tb(9,"mat-form-field",5),q.Tb(10,"input",6),q.bc("ngModelChange",function(t){return e.params.fdel=t})("change",function(){return e.chkDates()}),q.Sb(),q.Sb(),q.Tb(11,"mat-form-field",5),q.Tb(12,"input",7),q.bc("ngModelChange",function(t){return e.params.fal=t})("change",function(){return e.chkDates()}),q.Sb(),q.Sb(),q.Tb(13,"div",0),q.Tb(14,"div",8),q.Tb(15,"mat-checkbox",9),q.bc("ngModelChange",function(t){return+(e.params._detalle=t)}),q.Fc(16,"Mostrar Detalle"),q.Sb(),q.Sb(),q.Tb(17,"div",8),q.Tb(18,"mat-checkbox",10),q.bc("ngModelChange",function(t){return+(e.params._anuladas=t)}),q.Fc(19,"Mostrar \xdanicamente Anuladas"),q.Sb(),q.Sb(),q.Sb(),q.Tb(20,"app-rpt-botones",11),q.bc("excelClick",function(){return e.excelClick()})("pdfClick",function(){return e.onSubmit()})("resetParamsClick",function(){return e.resetParams()}),q.Sb(),q.Sb(),q.Dc(21,es,1,0,"app-cargando",12),q.Sb(),q.Sb(),q.Sb(),q.Sb()),2&t&&(q.Cb(10),q.lc("ngModel",e.params.fdel),q.Cb(2),q.lc("ngModel",e.params.fal),q.Cb(3),q.lc("ngModel",+e.params._detalle),q.Cb(3),q.lc("ngModel",+e.params._anuladas),q.Cb(2),q.lc("configuracion",e.configBotones),q.Cb(1),q.lc("ngIf",e.cargando))},directives:[x.a,x.h,x.c,f.r,f.l,f.m,y.b,k.b,f.c,f.p,f.k,f.n,M.a,Or.a,d.m,fa.a],styles:[""]}),ns);function os(t,e){if(1&t){var n=q.Ub();q.Tb(0,"mat-list-item",5),q.bc("click",function(){q.xc(n);var t=e.$implicit;return q.fc().getTurno(t)}),q.Tb(1,"mat-icon",6),q.Fc(2,"line_weight"),q.Sb(),q.Tb(3,"h5",7),q.Fc(4),q.Sb(),q.Sb()}if(2&t){var a=e.$implicit;q.Cb(4),q.Gc(a.descripcion)}}var is,rs=function(){return{standalone:!0}},cs=((is=function(){function t(e){var n=this;u(this,t),this.turnoSrvc=e,this.getTurnoEv=new q.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadTurnos=function(){n.turnoSrvc.get().subscribe(function(t){t&&t.length>0&&(n.lstTurnos=t,n.applyFilter())})},this.getTurno=function(t){n.getTurnoEv.emit(t)},this.pageChange=function(t){n.pageSize=t.pageSize,n.pageIndex=t.pageIndex,n.applyFilter()}}return b(t,[{key:"ngOnInit",value:function(){this.loadTurnos()}},{key:"applyFilter",value:function(){if(this.txtFiltro.length>0){var t=Object(Re.b)(this.lstTurnos,this.txtFiltro);this.length=t.length,this.lstTurnosPaged=Object(Re.c)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstTurnos.length,this.lstTurnosPaged=Object(Re.c)(this.lstTurnos,this.pageSize,this.pageIndex+1)}}]),t}()).\u0275fac=function(t){return new(t||is)(q.Nb(Gi))},is.\u0275cmp=q.Hb({type:is,selectors:[["app-lista-turno-tipo"]],outputs:{getTurnoEv:"getTurnoEv"},decls:7,vars:7,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,e){1&t&&(q.Tb(0,"mat-card",0),q.Tb(1,"mat-card-content"),q.Tb(2,"mat-form-field",1),q.Tb(3,"input",2),q.bc("keyup",function(){return e.applyFilter()})("ngModelChange",function(t){return e.txtFiltro=t}),q.Sb(),q.Sb(),q.Tb(4,"mat-nav-list"),q.Dc(5,os,5,1,"mat-list-item",3),q.Sb(),q.Tb(6,"mat-paginator",4),q.bc("page",function(t){return e.pageChange(t)}),q.Sb(),q.Sb(),q.Sb()),2&t&&(q.Cb(3),q.lc("ngModel",e.txtFiltro)("ngModelOptions",q.nc(6,rs)),q.Cb(2),q.lc("ngForOf",e.lstTurnosPaged),q.Cb(1),q.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[x.a,x.c,y.b,k.b,f.c,f.k,f.n,T.e,d.l,U.a,T.c,_.a,T.b,$.j],styles:[""]}),is);function ss(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",9),q.bc("click",function(){return q.xc(n),q.fc().resetTurno()}),q.Fc(1," Nuevo "),q.Sb()}}var ls,us,ds,bs=((ls=function(){function t(e,n){var a=this;u(this,t),this._snackBar=e,this.turnoSrvc=n,this.turnoSavedEv=new q.o,this.resetTurno=function(){return a.turno={turno_tipo:null,descripcion:null,activo:1}},this.onSubmit=function(){a.turnoSrvc.save(a.turno).subscribe(function(t){t.exito?(a.turnoSavedEv.emit(),a.resetTurno(),a._snackBar.open("Tipo de Turno agregado...","Turno",{duration:3e3})):a._snackBar.open("ERROR: ".concat(t.mensaje),"Turno",{duration:3e3})})}}return b(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||ls)(q.Nb(O.b),q.Nb(Gi))},ls.\u0275cmp=q.Hb({type:ls,selectors:[["app-form-turno-tipo"]],inputs:{turno:"turno"},outputs:{turnoSavedEv:"turnoSavedEv"},decls:15,vars:5,consts:[[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmTurno","ngForm"],[1,"fullWidth"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"ngModel","ngModelChange"],["name","activo",1,"fullWidth",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click"]],template:function(t,e){if(1&t){var n=q.Ub();q.Tb(0,"mat-card",0),q.Tb(1,"mat-card-title"),q.Tb(2,"h4"),q.Fc(3),q.Sb(),q.Sb(),q.Tb(4,"mat-card-content"),q.Tb(5,"form",1,2),q.bc("ngSubmit",function(){return q.xc(n),q.tc(6).form.valid&&e.onSubmit()}),q.Tb(7,"mat-form-field",3),q.Tb(8,"input",4),q.bc("ngModelChange",function(t){return e.turno.descripcion=t}),q.Sb(),q.Sb(),q.Tb(9,"mat-checkbox",5),q.bc("ngModelChange",function(t){return+(e.turno.activo=t)}),q.Fc(10,"Activo"),q.Sb(),q.Tb(11,"div",6),q.Tb(12,"button",7),q.Fc(13," Guardar "),q.Sb(),q.Dc(14,ss,2,0,"button",8),q.Sb(),q.Sb(),q.Sb(),q.Sb()}if(2&t){var a=q.tc(6);q.Cb(3),q.Hc(" Tipo de Turno ",e.turno.turno_tipo?e.turno.descripcion:""," "),q.Cb(5),q.lc("ngModel",e.turno.descripcion),q.Cb(1),q.lc("ngModel",+e.turno.activo),q.Cb(3),q.lc("disabled",!a.form.valid),q.Cb(2),q.lc("ngIf",e.turno.turno_tipo)}},directives:[x.a,x.h,x.c,f.r,f.l,f.m,y.b,k.b,f.c,f.p,f.k,f.n,M.a,w.a,d.m],styles:[""]}),ls),ms=["lstTurno"],fs=((ds=function(){function t(){var e=this;u(this,t),this.setTurno=function(t){return e.turno=t},this.refreshTurnoList=function(){return e.lstTurnoComponent.loadTurnos()},this.turno={turno_tipo:null,descripcion:null,activo:1}}return b(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||ds)},ds.\u0275cmp=q.Hb({type:ds,selectors:[["app-turno-tipo"]],viewQuery:function(t,e){var n;1&t&&q.Kc(ms,1),2&t&&q.sc(n=q.cc())&&(e.lstTurnoComponent=n.first)},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getTurnoEv"],["lstTurno",""],[1,"col","m7","s12"],[3,"turno","turnoSavedEv"],["frmTurno",""]],template:function(t,e){1&t&&(q.Tb(0,"div",0),q.Tb(1,"div",1),q.Tb(2,"app-lista-turno-tipo",2,3),q.bc("getTurnoEv",function(t){return e.setTurno(t)}),q.Sb(),q.Sb(),q.Tb(4,"div",4),q.Tb(5,"app-form-turno-tipo",5,6),q.bc("turnoSavedEv",function(){return e.refreshTurnoList()}),q.Sb(),q.Sb(),q.Sb()),2&t&&(q.Cb(5),q.lc("turno",e.turno))},directives:[cs,bs],styles:[""]}),ds),ps=((us=function(){function t(e){u(this,t),this.http=e,this.moduleUrl="propina",this.srvcErrHndl=new Ae.a}return b(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/buscar?").concat(je.stringify(t))).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(t){return this.http.post("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/guardar").concat(t.propina_distribucion?"/"+t.propina_distribucion:""),t).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||us)(q.Xb(m.b))},us.\u0275prov=q.Jb({token:us,factory:us.\u0275fac,providedIn:"root"}),us);function hs(t,e){if(1&t){var n=q.Ub();q.Tb(0,"td",7),q.bc("click",function(){q.xc(n);var t=e.$implicit;return q.fc().getPropina(t)}),q.Tb(1,"mat-list"),q.Tb(2,"mat-list-item"),q.Tb(3,"mat-icon",8),q.Fc(4,"line_weight"),q.Sb(),q.Tb(5,"h5",9),q.Fc(6),q.Sb(),q.Tb(7,"span",9),q.Fc(8),q.Sb(),q.Tb(9,"button",10),q.Tb(10,"mat-icon"),q.Fc(11,"arrow_right_alt"),q.Sb(),q.Sb(),q.Sb(),q.Sb(),q.Sb()}if(2&t){var a=e.$implicit;q.Cb(6),q.Hc("",a.porcentaje,"%"),q.Cb(2),q.Gc(a.usuario_tipo.descripcion)}}function gs(t,e){1&t&&q.Ob(0,"tr",11)}var vs,Ss=function(){return[5,10,20]},Cs=((vs=function(){function t(e){var n=this;u(this,t),this.propinaSrvc=e,this.displayedColumns=["propina"],this.getPropinaEv=new q.o,this.loadPropinas=function(){n.propinaSrvc.get().subscribe(function(t){t&&t.length>0&&(n.lstPropinas=t,n.dataSource=new E.k(n.lstPropinas),n.dataSource.paginator=n.paginator)})},this.getPropina=function(t){n.getPropinaEv.emit(t)}}return b(t,[{key:"ngOnInit",value:function(){this.loadPropinas()}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.trim().toLowerCase()}}]),t}()).\u0275fac=function(t){return new(t||vs)(q.Nb(ps))},vs.\u0275cmp=q.Hb({type:vs,selectors:[["app-lista-propina"]],viewQuery:function(t,e){var n;1&t&&q.Kc(U.a,3),2&t&&q.sc(n=q.cc())&&(e.paginator=n.first)},outputs:{getPropinaEv:"getPropinaEv"},decls:9,vars:4,consts:[[1,"mat-elevation-z4","fullWidth"],["matInput","","placeholder","Buscar...",3,"keyup"],["mat-table","",3,"dataSource"],["matColumnDef","propina"],["mat-cell","",3,"click",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-cell","",3,"click"],["mat-list-icon",""],["mat-line",""],["mat-icon-button","","type","button","color","accent"],["mat-row",""]],template:function(t,e){1&t&&(q.Tb(0,"mat-card",0),q.Tb(1,"mat-card-content"),q.Tb(2,"mat-form-field"),q.Tb(3,"input",1),q.bc("keyup",function(t){return e.applyFilter(t.target.value)}),q.Sb(),q.Sb(),q.Tb(4,"table",2),q.Rb(5,3),q.Dc(6,hs,12,2,"td",4),q.Qb(),q.Dc(7,gs,1,0,"tr",5),q.Sb(),q.Ob(8,"mat-paginator",6),q.Sb(),q.Sb()),2&t&&(q.Cb(4),q.lc("dataSource",e.dataSource),q.Cb(3),q.lc("matRowDefColumns",e.displayedColumns),q.Cb(1),q.lc("pageSizeOptions",q.nc(3,Ss)))},directives:[x.a,x.c,y.b,k.b,E.j,E.c,E.b,E.i,U.a,E.a,T.a,T.c,_.a,T.b,$.j,w.a,E.h],styles:[""]}),vs);function Ts(t,e){if(1&t&&(q.Tb(0,"mat-option",14),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n.usuario_tipo),q.Cb(1),q.Hc(" ",n.descripcion," ")}}function _s(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",15),q.bc("click",function(){return q.xc(n),q.fc().resetPropina()}),q.Tb(1,"mat-icon"),q.Fc(2,"add"),q.Sb(),q.Sb()}}var ys,ks,xs,Ds=((ys=function(){function t(e,n,a){var o=this;u(this,t),this.snackBar=e,this.propinaSrvc=n,this.usuarioSrvc=a,this.propinaSavedEv=new q.o,this.usuarios=[],this.loadUsuario=function(){o.usuarioSrvc.get().subscribe(function(t){o.usuarios=t})},this.resetPropina=function(){return o.propina={propina_distribucion:null,usuario_tipo:null,porcentaje:null,anulado:0,sede:null,grupal:0}},this.onSubmit=function(){o.propinaSrvc.save(o.propina).subscribe(function(t){t.exito?(o.propinaSavedEv.emit(),o.resetPropina(),o.snackBar.open("Propina agregada...","Distribucion de propinas",{duration:3e3})):o.snackBar.open("ERROR: ".concat(t.mensaje),"Distribucion de propinas",{duration:3e3})})}}return b(t,[{key:"ngOnInit",value:function(){this.resetPropina(),this.loadUsuario()}}]),t}()).\u0275fac=function(t){return new(t||ys)(q.Nb(O.b),q.Nb(ps),q.Nb(Wi))},ys.\u0275cmp=q.Hb({type:ys,selectors:[["app-form-propina"]],inputs:{propina:"propina"},outputs:{propinaSavedEv:"propinaSavedEv"},decls:24,vars:7,consts:[[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmPropina","ngForm"],[1,"fullWidth"],["name","usuario","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","step","0.01","placeholder","Porcentaje","name","porcentaje","required","",3,"ngModel","ngModelChange"],[1,"row"],[1,"col","m6","s6"],["name","grupal",1,"fullWidth",3,"ngModel","ngModelChange"],["name","anulado",1,"fullWidth",3,"ngModel","ngModelChange"],["align","end"],["mat-icon-button","","type","submit","color","accent",3,"disabled"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],[3,"value"],["mat-icon-button","","type","button","color","accent",3,"click"]],template:function(t,e){if(1&t){var n=q.Ub();q.Tb(0,"mat-card",0),q.Ob(1,"mat-card-title"),q.Tb(2,"mat-card-content"),q.Tb(3,"form",1,2),q.bc("ngSubmit",function(){return q.xc(n),q.tc(4).form.valid&&e.onSubmit()}),q.Tb(5,"mat-form-field",3),q.Tb(6,"mat-label"),q.Fc(7,"Tipo Usuario"),q.Sb(),q.Tb(8,"mat-select",4),q.bc("ngModelChange",function(t){return e.propina.usuario_tipo=t}),q.Dc(9,Ts,2,2,"mat-option",5),q.Sb(),q.Sb(),q.Tb(10,"mat-form-field",3),q.Tb(11,"input",6),q.bc("ngModelChange",function(t){return e.propina.porcentaje=t}),q.Sb(),q.Sb(),q.Tb(12,"div",7),q.Tb(13,"div",8),q.Tb(14,"mat-checkbox",9),q.bc("ngModelChange",function(t){return+(e.propina.grupal=t)}),q.Fc(15,"Propina Grupal"),q.Sb(),q.Sb(),q.Tb(16,"div",8),q.Tb(17,"mat-checkbox",10),q.bc("ngModelChange",function(t){return+(e.propina.anulado=t)}),q.Fc(18,"Anulado"),q.Sb(),q.Sb(),q.Sb(),q.Tb(19,"div",11),q.Tb(20,"button",12),q.Tb(21,"mat-icon"),q.Fc(22,"save"),q.Sb(),q.Sb(),q.Dc(23,_s,3,0,"button",13),q.Sb(),q.Sb(),q.Sb(),q.Sb()}if(2&t){var a=q.tc(4);q.Cb(8),q.lc("ngModel",e.propina.usuario_tipo),q.Cb(1),q.lc("ngForOf",e.usuarios),q.Cb(2),q.lc("ngModel",e.propina.porcentaje),q.Cb(3),q.lc("ngModel",+e.propina.grupal),q.Cb(3),q.lc("ngModel",+e.propina.anulado),q.Cb(3),q.lc("disabled",!a.form.valid),q.Cb(3),q.lc("ngIf",e.propina.propina_distribucion)}},directives:[x.a,x.h,x.c,f.r,f.l,f.m,y.b,y.e,F.a,f.p,f.k,f.n,d.l,k.b,f.o,f.c,M.a,w.a,_.a,d.m,$.m],styles:[""]}),ys),Ps=["lstPropina"],Es=((xs=function(){function t(){var e=this;u(this,t),this.setPropina=function(t){return e.propina={propina_distribucion:t.propina_distribucion,usuario_tipo:t.usuario_tipo.usuario_tipo,porcentaje:t.porcentaje,anulado:t.anulado,sede:t.sede,grupal:t.grupal}},this.refreshPropinaList=function(){return e.lstPropinaComponent.loadPropinas()},this.propina={propina_distribucion:null,usuario_tipo:null,porcentaje:null,anulado:null,sede:null,grupal:null}}return b(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||xs)},xs.\u0275cmp=q.Hb({type:xs,selectors:[["app-propina"]],viewQuery:function(t,e){var n;1&t&&q.Kc(Ps,1),2&t&&q.sc(n=q.cc())&&(e.lstPropinaComponent=n.first)},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getPropinaEv"],["lstPropina",""],[1,"col","m7","s12"],[3,"propina","propinaSavedEv"],["frmPropina",""]],template:function(t,e){1&t&&(q.Tb(0,"div",0),q.Tb(1,"div",1),q.Tb(2,"app-lista-propina",2,3),q.bc("getPropinaEv",function(t){return e.setPropina(t)}),q.Sb(),q.Sb(),q.Tb(4,"div",4),q.Tb(5,"app-form-propina",5,6),q.bc("propinaSavedEv",function(){return e.refreshPropinaList()}),q.Sb(),q.Sb(),q.Sb()),2&t&&(q.Cb(5),q.lc("propina",e.propina))},directives:[Cs,Ds],styles:[""]}),xs),Fs=((ks=function(){function t(e){u(this,t),this.http=e,this.srvcErrHndl=new Ae.a}return b(t,[{key:"getCampos",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Re.a.urlCatalogos,"/get_campos?").concat(je.stringify(t))).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"getReporte",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={headers:new m.d({Accept:"application/vnd.ms-excel"}),responseType:"blob"};return this.http.post("".concat(Re.a.urlAppRestaurante,"/reporte/autoconsulta"),t,e).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||ks)(q.Xb(m.b))},ks.\u0275prov=q.Jb({token:ks,factory:ks.\u0275fac,providedIn:"root"}),ks);function Ms(t,e){if(1&t&&(q.Tb(0,"mat-option",14),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n.tabla_campo),q.Cb(1),q.Hc(" ",n.descripcion," ")}}function ws(t,e){if(1&t&&(q.Tb(0,"mat-option",14),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n.tabla_campo),q.Cb(1),q.Hc(" ",n.descripcion," ")}}function Os(t,e){if(1&t&&(q.Tb(0,"mat-option",14),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n.tabla_campo),q.Cb(1),q.Hc(" ",n.descripcion," ")}}function Is(t,e){1&t&&q.Ob(0,"app-cargando")}var Rs,As,Us=((As=function(){function t(e,n){var a=this;u(this,t),this.snackBar=e,this.autoconsultaSrvc=n,this.params={campos:[],datos:[]},this.titulo="Autoconsulta",this.campos=[],this.fechas=[],this.orden=[],this.cargando=!1,this.configBotones={showPdf:!1,showHtml:!1,showExcel:!0},this.resetParams=function(){a.params={campos:[],datos:[]},a.cargando=!1},this.getReporte=function(){for(var t in a.cargando=!0,a.params.campos)a.params.datos.push(a.params.campos[t]);a.autoconsultaSrvc.getReporte(a.params).subscribe(function(t){if(a.cargando=!1,t){var e=new Blob([t],{type:"application/vnd.ms-excel"});Object(Fr.saveAs)(e,"".concat(a.titulo,".xls"))}else a.snackBar.open("No se pudo generar el reporte...",a.titulo,{duration:3e3})})},this.getCampos=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;a.cargando=!0,a.autoconsultaSrvc.getCampos(t).subscribe(function(t){switch(a.cargando=!1,e){case 1:a.campos=t;break;case 2:a.fechas=t;break;case 3:a.orden=t}})}}return b(t,[{key:"ngOnInit",value:function(){this.getCampos(),this.getCampos({por_fecha:1},2),this.getCampos({ordenar_por:1},3)}}]),t}()).\u0275fac=function(t){return new(t||As)(q.Nb(O.b),q.Nb(Fs))},As.\u0275cmp=q.Hb({type:As,selectors:[["app-autoconsulta"]],decls:30,vars:10,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmEntidad","ngForm"],[1,"fullWidth"],["name","campos","multiple","multiple","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","date","matInput","","placeholder","Del","name","fdel","required","",3,"ngModel","ngModelChange"],["type","date","matInput","","placeholder","Al","name","fal","required","",3,"ngModel","ngModelChange"],["name","campos","required","",3,"ngModel","ngModelChange"],["name","campos",3,"ngModel","ngModelChange"],[3,"configuracion","excelClick","resetParamsClick"],[4,"ngIf"],[3,"value"]],template:function(t,e){1&t&&(q.Tb(0,"div",0),q.Tb(1,"div",1),q.Tb(2,"mat-card",2),q.Tb(3,"mat-card-title"),q.Tb(4,"h4"),q.Fc(5,"Autoconsulta"),q.Sb(),q.Sb(),q.Tb(6,"mat-card-content"),q.Tb(7,"form",3,4),q.Tb(9,"mat-form-field",5),q.Tb(10,"mat-label"),q.Fc(11,"Campos"),q.Sb(),q.Tb(12,"mat-select",6),q.bc("ngModelChange",function(t){return e.params.campos=t}),q.Dc(13,Ms,2,2,"mat-option",7),q.Sb(),q.Sb(),q.Tb(14,"mat-form-field",5),q.Tb(15,"input",8),q.bc("ngModelChange",function(t){return e.params.fdel=t}),q.Sb(),q.Sb(),q.Tb(16,"mat-form-field",5),q.Tb(17,"input",9),q.bc("ngModelChange",function(t){return e.params.fal=t}),q.Sb(),q.Sb(),q.Tb(18,"mat-form-field",5),q.Tb(19,"mat-label"),q.Fc(20,"Filtrar Por"),q.Sb(),q.Tb(21,"mat-select",10),q.bc("ngModelChange",function(t){return e.params.fecha=t}),q.Dc(22,ws,2,2,"mat-option",7),q.Sb(),q.Sb(),q.Tb(23,"mat-form-field",5),q.Tb(24,"mat-label"),q.Fc(25,"Ordenar Por"),q.Sb(),q.Tb(26,"mat-select",11),q.bc("ngModelChange",function(t){return e.params.orden=t}),q.Dc(27,Os,2,2,"mat-option",7),q.Sb(),q.Sb(),q.Tb(28,"app-rpt-botones",12),q.bc("excelClick",function(){return e.getReporte()})("resetParamsClick",function(){return e.resetParams()}),q.Sb(),q.Sb(),q.Dc(29,Is,1,0,"app-cargando",13),q.Sb(),q.Sb(),q.Sb(),q.Sb()),2&t&&(q.Cb(12),q.lc("ngModel",e.params.campos),q.Cb(1),q.lc("ngForOf",e.campos),q.Cb(2),q.lc("ngModel",e.params.fdel),q.Cb(2),q.lc("ngModel",e.params.fal),q.Cb(4),q.lc("ngModel",e.params.fecha),q.Cb(1),q.lc("ngForOf",e.fechas),q.Cb(4),q.lc("ngModel",e.params.orden),q.Cb(1),q.lc("ngForOf",e.orden),q.Cb(1),q.lc("configuracion",e.configBotones),q.Cb(1),q.lc("ngIf",e.cargando))},directives:[x.a,x.h,x.c,f.r,f.l,f.m,y.b,y.e,F.a,f.p,f.k,f.n,d.l,k.b,f.c,Or.a,d.m,$.m,fa.a],styles:[""]}),As),Ns=((Rs=function(){function t(e){u(this,t),this.http=e,this.moduleUrl="cajacorte",this.srvcErrHndl=new Ae.a}return b(t,[{key:"buscar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/buscar?").concat(je.stringify(t))).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"getCajaCorteTipo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Re.a.urlCatalogos,"/get_caja_corte_tipo?").concat(je.stringify(t))).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"getCajaCorteNominacion",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Re.a.urlCatalogos,"/get_caja_corte_nominacion?").concat(je.stringify(t))).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"guardar",value:function(t){return this.http.post("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/guardar"),t).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"anularCorte",value:function(t){return this.http.post("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/anular_caja"),t).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}},{key:"anularDetalle",value:function(t){return this.http.post("".concat(Re.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/anular_caja_detalle"),t).pipe(Object(Ue.a)(Re.a.reintentos),Object(Ne.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||Rs)(q.Xb(m.b))},Rs.\u0275prov=q.Jb({token:Rs,factory:Rs.\u0275fac,providedIn:"root"}),Rs);function js(t,e){if(1&t){var n=q.Ub();q.Tb(0,"td",7),q.Tb(1,"mat-list"),q.Tb(2,"mat-list-item"),q.Tb(3,"mat-icon",8),q.bc("click",function(){q.xc(n);var t=e.$implicit;return q.fc().anularCaja(t)}),q.Fc(4,"close"),q.Sb(),q.Tb(5,"h5",9),q.Fc(6),q.Sb(),q.Tb(7,"span",9),q.Fc(8),q.Sb(),q.Tb(9,"span",9),q.Fc(10),q.Sb(),q.Tb(11,"button",10),q.bc("click",function(){q.xc(n);var t=e.$implicit;return q.fc().getCajacorte(t)}),q.Tb(12,"mat-icon"),q.Fc(13,"arrow_right_alt"),q.Sb(),q.Sb(),q.Sb(),q.Sb(),q.Sb()}if(2&t){var a=e.$implicit;q.Cb(6),q.Gc(a.descripcion),q.Cb(2),q.Gc(a.creacion),q.Cb(2),q.Hc("Total: ",a.total,"")}}function Bs(t,e){1&t&&q.Ob(0,"tr",11)}var Hs,Ls=function(){return[5,10,20]},qs=((Hs=function(){function t(e,n){var a=this;u(this,t),this.ccorteSrvc=e,this._snackBar=n,this.displayedColumns=["ccGeneral"],this.getCajacorteEv=new q.o,this.getCajascortes=function(){a.ccorteSrvc.buscar().subscribe(function(t){a.listacc=t,a.dataSource=new E.k(a.listacc),a.dataSource.paginator=a.paginator})},this.anularCaja=function(t){confirm("\xbfSi anula este corte, se anular\xe1 tambi\xe9n las nominaciones.?")&&a.ccorteSrvc.anularCorte(t).subscribe(function(t){t.exito&&a.getCajascortes(),a._snackBar.open("".concat(t.mensaje),"Corte de caja",{duration:3e3})})},this.getCajacorte=function(t){a.getCajacorteEv.emit(t)}}return b(t,[{key:"ngOnInit",value:function(){this.getCajascortes()}},{key:"filtrar",value:function(t){this.dataSource.filter=t.trim().toLowerCase()}}]),t}()).\u0275fac=function(t){return new(t||Hs)(q.Nb(Ns),q.Nb(O.b))},Hs.\u0275cmp=q.Hb({type:Hs,selectors:[["app-cajacorte-lista"]],viewQuery:function(t,e){var n;1&t&&q.Kc(U.a,3),2&t&&q.sc(n=q.cc())&&(e.paginator=n.first)},outputs:{getCajacorteEv:"getCajacorteEv"},decls:9,vars:4,consts:[[1,"mat-elevation-z4","fullWidth"],["matInput","","placeholder","Buscar...",3,"keyup"],["mat-table","",3,"dataSource"],["matColumnDef","ccGeneral"],["mat-cell","",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-cell",""],["mat-list-icon","",1,"anulaicon",3,"click"],["mat-line",""],["mat-icon-button","","type","button","color","accent",3,"click"],["mat-row",""]],template:function(t,e){1&t&&(q.Tb(0,"mat-card",0),q.Tb(1,"mat-card-content"),q.Tb(2,"mat-form-field"),q.Tb(3,"input",1),q.bc("keyup",function(t){return e.filtrar(t.target.value)}),q.Sb(),q.Sb(),q.Tb(4,"table",2),q.Rb(5,3),q.Dc(6,js,14,3,"td",4),q.Qb(),q.Dc(7,Bs,1,0,"tr",5),q.Sb(),q.Ob(8,"mat-paginator",6),q.Sb(),q.Sb()),2&t&&(q.Cb(4),q.lc("dataSource",e.dataSource),q.Cb(3),q.lc("matRowDefColumns",e.displayedColumns),q.Cb(1),q.lc("pageSizeOptions",q.nc(3,Ls)))},directives:[x.a,x.c,y.b,k.b,E.j,E.c,E.b,E.i,U.a,E.a,T.a,T.c,_.a,T.b,$.j,w.a,E.h],styles:[".anulaicon[_ngcontent-%COMP%]{cursor:pointer}"]}),Hs);function zs(t,e){if(1&t&&(q.Tb(0,"mat-option",16),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n.caja_corte_tipo),q.Cb(1),q.Hc(" ",n.descripcion," ")}}function $s(t,e){if(1&t&&(q.Tb(0,"mat-option",16),q.Fc(1),q.Sb()),2&t){var n=e.$implicit;q.lc("value",n.caja_corte_nominacion),q.Cb(1),q.Hc(" ",n.nombre," ")}}function Gs(t,e){if(1&t){var n=q.Ub();q.Tb(0,"mat-grid-list",11),q.Tb(1,"mat-grid-tile"),q.Fc(2),q.Sb(),q.Tb(3,"mat-grid-tile"),q.Fc(4),q.Sb(),q.Tb(5,"mat-grid-tile"),q.Fc(6),q.Sb(),q.Tb(7,"mat-grid-tile"),q.Tb(8,"mat-icon",17),q.bc("click",function(){q.xc(n);var t=e.$implicit;return q.fc().anularCajaDetalle(t)}),q.Fc(9,"close"),q.Sb(),q.Sb(),q.Sb()}if(2&t){var a=e.$implicit;q.Cb(2),q.Gc(a.nombre),q.Cb(2),q.Gc(a.cantidad),q.Cb(2),q.Gc(a.total)}}function Ws(t,e){if(1&t){var n=q.Ub();q.Tb(0,"button",18),q.bc("click",function(){return q.xc(n),q.fc().reseteGeneral()}),q.Tb(1,"mat-icon"),q.Fc(2,"add"),q.Sb(),q.Sb()}}var Vs,Ks,Qs=((Vs=function(){function t(e,n){var a=this;u(this,t),this._snackBar=e,this.cajacorteSrvc=n,this.cajacorteSavedEv=new q.o,this.ccorteTipo=[],this.ccorteNomi=[],this.detalle={caja_corte_detalle:0,caja_corte:0,cantidad:0,total:0,anulado:0,caja_corte_nominacion:0,nombre:null},this.getCajaCorteTipo=function(){a.cajacorteSrvc.getCajaCorteTipo().subscribe(function(t){a.ccorteTipo=t})},this.getCajaCorteNominacion=function(){a.cajacorteSrvc.getCajaCorteNominacion().subscribe(function(t){a.ccorteNomi=t})},this.setTotal=function(){if(a.detalle.caja_corte_nominacion){var t=a.ccorteNomi.filter(function(t){return t.caja_corte_nominacion==a.detalle.caja_corte_nominacion})[0];a.detalle.total=1==t.calcula?a.detalle.cantidad*t.valor:a.detalle.cantidad}},this.setNamenomi=function(){var t=a.ccorteNomi.filter(function(t){return t.caja_corte_nominacion==a.detalle.caja_corte_nominacion})[0];console.log(t,a.detalle.caja_corte_nominacion),a.detalle.nombre=t.nombre},this.setNameTipo=function(){var t=a.ccorteTipo.filter(function(t){return t.caja_corte_tipo==a.ccorte.caja_corte_tipo})[0];console.log(t,a.ccorte.caja_corte_tipo),a.ccorte.descripcion=t.descripcion},this.reseteGeneral=function(){return a.ccorte={caja_corte:0,creacion:null,usuario:0,turno:0,confirmado:null,anulado:0,caja_corte_tipo:0,descripcion:null,detalle:[]}},this.resetDetalle=function(){return a.detalle={caja_corte_detalle:0,caja_corte:0,cantidad:0,total:0,anulado:0,caja_corte_nominacion:0,nombre:null}},this.agregarDetalle=function(){a.detalle.caja_corte_nominacion&&a.detalle.cantidad&&a.detalle.total?(a.ccorte.detalle.push(a.detalle),a.resetDetalle()):a._snackBar.open("Complete los datos de nominaciones","Corte de caja",{duration:3e3})},this.guardar=function(){if(confirm("\xbfEst\xe1 seguro?")){if(0==a.ccorte.detalle.length)return a._snackBar.open("Por favor agregue las nominaciones","Corte de caja",{duration:3e3}),!1;if(!a.ccorte.caja_corte_tipo)return a._snackBar.open("Seleccione el tipo de corte de caja.","Corte de caja",{duration:3e3}),!1;a.cajacorteSrvc.guardar(a.ccorte).subscribe(function(t){t.exito&&(a.cajacorteSavedEv.emit(),a.reseteGeneral()),a._snackBar.open("".concat(t.mensaje),"Corte de caja",{duration:3e3})})}},this.anularCajaDetalle=function(t){if(confirm("\xbfEst\xe1 seguro.?"))if(t.caja_corte_detalle)a.cajacorteSrvc.anularDetalle(t).subscribe(function(e){if(e.exito){var n=a.ccorte.detalle.indexOf(t);a.ccorte.detalle.splice(n,1)}a._snackBar.open("".concat(e.mensaje),"Corte de caja",{duration:3e3})});else{var e=a.ccorte.detalle.indexOf(t);a.ccorte.detalle.splice(e,1)}}}return b(t,[{key:"ngOnInit",value:function(){this.getCajaCorteTipo(),this.getCajaCorteNominacion()}}]),t}()).\u0275fac=function(t){return new(t||Vs)(q.Nb(O.b),q.Nb(Ns))},Vs.\u0275cmp=q.Hb({type:Vs,selectors:[["app-cajacorte-form"]],inputs:{ccorte:"ccorte"},outputs:{cajacorteSavedEv:"cajacorteSavedEv"},decls:49,vars:9,consts:[[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmcc","ngForm"],[1,"fullWidth"],["name","tipo","required","",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"example-container"],["name","nominacion",3,"ngModel","ngModelChange","selectionChange"],["matInput","","type","number","step","0.01","name","cantidad",3,"ngModel","ngModelChange","blur"],["matInput","","type","number","step","0.01","name","total","readonly","",3,"ngModel","ngModelChange"],["mat-icon-button","","type","button","color","accent","title","Agregar el detalle",3,"click"],["cols","4","rowHeight","7:1"],["cols","4","rowHeight","7:1",4,"ngFor","ngForOf"],["align","end"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["mat-icon-button","","type","submit","color","accent","title","Guardar corte de caja",3,"disabled"],[3,"value"],["mat-list-icon","",1,"anulacion",3,"click"],["mat-icon-button","","type","button","color","accent",3,"click"]],template:function(t,e){if(1&t){var n=q.Ub();q.Tb(0,"mat-card",0),q.Tb(1,"mat-card-title"),q.Tb(2,"h5"),q.Fc(3,"Corte de caja"),q.Sb(),q.Sb(),q.Tb(4,"mat-card-content"),q.Tb(5,"form",1,2),q.bc("ngSubmit",function(){return q.xc(n),q.tc(6).form.valid&&e.guardar()}),q.Tb(7,"mat-form-field",3),q.Tb(8,"mat-label"),q.Fc(9,"Tipo de Corte"),q.Sb(),q.Tb(10,"mat-select",4),q.bc("ngModelChange",function(t){return e.ccorte.caja_corte_tipo=t})("selectionChange",function(){return e.setNameTipo()}),q.Dc(11,zs,2,2,"mat-option",5),q.Sb(),q.Sb(),q.Tb(12,"p"),q.Fc(13,"Agregar nominaciones"),q.Sb(),q.Tb(14,"div",6),q.Tb(15,"mat-form-field"),q.Tb(16,"mat-label"),q.Fc(17,"Nominaci\xf3n:"),q.Sb(),q.Tb(18,"mat-select",7),q.bc("ngModelChange",function(t){return e.detalle.caja_corte_nominacion=t})("selectionChange",function(){return e.setNamenomi()}),q.Dc(19,$s,2,2,"mat-option",5),q.Sb(),q.Sb(),q.Tb(20,"mat-form-field"),q.Tb(21,"mat-label"),q.Fc(22,"Cantidad:"),q.Sb(),q.Tb(23,"input",8),q.bc("ngModelChange",function(t){return e.detalle.cantidad=t})("blur",function(){return e.setTotal()}),q.Sb(),q.Sb(),q.Tb(24,"mat-form-field"),q.Tb(25,"mat-label"),q.Fc(26,"Total:"),q.Sb(),q.Tb(27,"input",9),q.bc("ngModelChange",function(t){return e.detalle.total=t}),q.Sb(),q.Sb(),q.Tb(28,"button",10),q.bc("click",function(){return e.agregarDetalle()}),q.Tb(29,"mat-icon"),q.Fc(30,"add"),q.Sb(),q.Sb(),q.Sb(),q.Tb(31,"mat-grid-list",11),q.Tb(32,"mat-grid-tile"),q.Tb(33,"b"),q.Fc(34,"Nominaci\xf3n"),q.Sb(),q.Sb(),q.Tb(35,"mat-grid-tile"),q.Tb(36,"b"),q.Fc(37,"Cantidad"),q.Sb(),q.Sb(),q.Tb(38,"mat-grid-tile"),q.Tb(39,"b"),q.Fc(40,"Total"),q.Sb(),q.Sb(),q.Ob(41,"mat-grid-tile"),q.Sb(),q.Dc(42,Gs,10,3,"mat-grid-list",12),q.Ob(43,"hr"),q.Tb(44,"div",13),q.Dc(45,Ws,3,0,"button",14),q.Tb(46,"button",15),q.Tb(47,"mat-icon"),q.Fc(48,"save"),q.Sb(),q.Sb(),q.Sb(),q.Sb(),q.Sb(),q.Sb()}if(2&t){var a=q.tc(6);q.Cb(10),q.lc("ngModel",e.ccorte.caja_corte_tipo),q.Cb(1),q.lc("ngForOf",e.ccorteTipo),q.Cb(7),q.lc("ngModel",e.detalle.caja_corte_nominacion),q.Cb(1),q.lc("ngForOf",e.ccorteNomi),q.Cb(4),q.lc("ngModel",e.detalle.cantidad),q.Cb(4),q.lc("ngModel",e.detalle.total),q.Cb(15),q.lc("ngForOf",e.ccorte.detalle),q.Cb(3),q.lc("ngIf",e.ccorte.caja_corte),q.Cb(1),q.lc("disabled",!a.form.valid)}},directives:[x.a,x.h,x.c,f.r,f.l,f.m,y.b,y.e,F.a,f.p,f.k,f.n,d.l,k.b,f.o,f.c,w.a,_.a,A.a,A.c,d.m,$.m,T.b],styles:[".example-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}mat-grid-tile[_ngcontent-%COMP%]{text-align:left}.anulacion[_ngcontent-%COMP%]{cursor:pointer}"]}),Vs),Xs=["lstCortecaja"],Js=((Ks=function(){function t(){var e=this;u(this,t),this.editarCajaCorte=function(t){return e.ccorte=t},this.actualizaLista=function(){return e.lstCajacorteComponent.getCajascortes()},this.ccorte={caja_corte:0,creacion:null,usuario:0,turno:0,confirmado:null,anulado:0,caja_corte_tipo:0,descripcion:null,detalle:[]}}return b(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Ks)},Ks.\u0275cmp=q.Hb({type:Ks,selectors:[["app-cajacorte"]],viewQuery:function(t,e){var n;1&t&&q.Kc(Xs,1),2&t&&q.sc(n=q.cc())&&(e.lstCajacorteComponent=n.first)},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getCajacorteEv"],["lstCortecaja",""],[1,"col","m7","s12"],[3,"ccorte","cajacorteSavedEv"],["frmCortecaja",""]],template:function(t,e){1&t&&(q.Tb(0,"div",0),q.Tb(1,"div",1),q.Tb(2,"app-cajacorte-lista",2,3),q.bc("getCajacorteEv",function(t){return e.editarCajaCorte(t)}),q.Sb(),q.Sb(),q.Tb(4,"div",4),q.Tb(5,"app-cajacorte-form",5,6),q.bc("cajacorteSavedEv",function(){return e.actualizaLista()}),q.Sb(),q.Sb(),q.Sb()),2&t&&(q.Cb(5),q.lc("ccorte",e.ccorte))},directives:[qs,Qs],styles:[""]}),Ks),Ys=function(){return{standalone:!0}};function Zs(t,e){if(1&t){var n=q.Ub();q.Tb(0,"form"),q.Tb(1,"mat-form-field",6),q.Tb(2,"input",7),q.bc("ngModelChange",function(t){return q.xc(n),q.fc().datos.tiempo=t}),q.Sb(),q.Sb(),q.Sb()}if(2&t){var a=q.fc();q.Cb(2),q.lc("ngModel",a.datos.tiempo)("ngModelOptions",q.nc(2,Ys))}}var tl,el=function t(e,n,a,o,i,r){u(this,t),this.title=e,this.message=n,this.lblBtnConfirm=a,this.lblBtnDeny=o,this.datos=i,this.showTimer=r},nl=((tl=function(){function t(e,n){u(this,t),this.dialogRef=e,this.data=n,this.title=n.title,this.message=n.message,this.lblBtnConfirm=n.lblBtnConfirm,this.lblBtnDeny=n.lblBtnDeny,this.datos={respuesta:!1,tiempo:"00:00"}}return b(t,[{key:"ngOnInit",value:function(){}},{key:"onConfirm",value:function(t){this.datos.respuesta=!0,this.datos.tiempo=t.tiempo,this.dialogRef.close(this.datos)}},{key:"onDismiss",value:function(){this.datos.respuesta=!1,this.dialogRef.close(this.datos)}}]),t}()).\u0275fac=function(t){return new(t||tl)(q.Nb(N.f),q.Nb(N.a))},tl.\u0275cmp=q.Hb({type:tl,selectors:[["app-dialog-cocina"]],decls:11,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[4,"ngIf"],["mat-dialog-actions","","align","center"],["mat-raised-button","",1,"btnConfig",3,"click"],["mat-raised-button","","color","accent",1,"btnConfig",3,"click"],[1,"fullWidth"],["type","number","matInput","","placeholder","Minutos","min","0","max","59","step","1",3,"ngModel","ngModelOptions","ngModelChange"]],template:function(t,e){1&t&&(q.Tb(0,"h1",0),q.Fc(1),q.Sb(),q.Tb(2,"div",1),q.Tb(3,"p"),q.Fc(4),q.Sb(),q.Sb(),q.Dc(5,Zs,3,3,"form",2),q.Tb(6,"div",3),q.Tb(7,"button",4),q.bc("click",function(){return e.onDismiss()}),q.Fc(8),q.Sb(),q.Tb(9,"button",5),q.bc("click",function(){return e.onConfirm(e.datos)}),q.Fc(10),q.Sb(),q.Sb()),2&t&&(q.Cb(1),q.Hc(" ",e.title," "),q.Cb(3),q.Gc(e.message),q.Cb(1),q.lc("ngIf",e.data.showTimer),q.Cb(3),q.Gc(e.lblBtnDeny),q.Cb(2),q.Gc(e.lblBtnConfirm))},directives:[N.g,N.d,d.m,N.c,w.a,f.r,f.l,f.m,y.b,f.o,k.b,f.c,f.k,f.n],styles:[""]}),tl);function al(t,e){1&t&&q.Ob(0,"br")}function ol(t,e){if(1&t&&(q.Rb(0),q.Tb(1,"span"),q.Fc(2),q.Sb(),q.Ob(3,"br"),q.Qb()),2&t){var n=e.$implicit;q.Cb(2),q.Gc(n.trim())}}function il(t,e){1&t&&q.Ob(0,"br")}function rl(t,e){if(1&t&&(q.Tb(0,"span"),q.Tb(1,"strong"),q.Fc(2,"Notas:"),q.Sb(),q.Fc(3),q.Sb()),2&t){var n=q.fc().$implicit;q.Cb(3),q.Hc(" ",n.notas," ")}}function cl(t,e){if(1&t&&(q.Tb(0,"tr"),q.Tb(1,"td"),q.Fc(2),q.Dc(3,al,1,0,"br",11),q.Dc(4,ol,4,1,"ng-container",8),q.Dc(5,il,1,0,"br",11),q.Dc(6,rl,4,1,"span",11),q.Sb(),q.Sb()),2&t){var n=e.$implicit;q.Cb(2),q.Ic(" ",n.cantidad," ",n.articulo.descripcion," "),q.Cb(1),q.lc("ngIf",n.detalle.length>0),q.Cb(1),q.lc("ngForOf",n.detalle),q.Cb(1),q.lc("ngIf",!!n.notas&&n.notas.length>0&&!n.detalle),q.Cb(1),q.lc("ngIf",!!n.notas&&n.notas.length>0)}}function sl(t,e){if(1&t&&(q.Tb(0,"table"),q.Dc(1,cl,7,6,"tr",8),q.Sb()),2&t){var n=q.fc().$implicit;q.Cb(1),q.lc("ngForOf",n.productos)}}function ll(t,e){if(1&t&&(q.Rb(0),q.Dc(1,sl,2,1,"table",11),q.Qb()),2&t){var n=e.$implicit;q.Cb(1),q.lc("ngIf",n.productos.length>0)}}function ul(t,e){if(1&t){var n=q.Ub();q.Tb(0,"div",6),q.Tb(1,"mat-card",7),q.Tb(2,"mat-card-header"),q.Tb(3,"mat-card-title"),q.Fc(4),q.Sb(),q.Tb(5,"mat-card-subtitle"),q.Fc(6),q.Ob(7,"br"),q.Fc(8),q.Sb(),q.Sb(),q.Tb(9,"mat-card-content"),q.Dc(10,ll,2,1,"ng-container",8),q.Sb(),q.Tb(11,"mat-card-actions",9),q.Tb(12,"button",10),q.bc("click",function(){q.xc(n);var t=e.$implicit;return q.fc().setCocinado(t,1)}),q.Fc(13,"Vista"),q.Sb(),q.Sb(),q.Sb(),q.Sb()}if(2&t){var a=e.$implicit;q.Cb(4),q.Ic("Comanda #",a.comanda," - ",a.numero,""),q.Cb(2),q.Ic(" Area ",a.mesa.area.nombre," - Mesa #",a.mesa.etiqueta||a.mesa.numero,""),q.Cb(2),q.Ic(" Atiende: ",a.mesero.nombres," ",a.mesero.apellidos," "),q.Cb(2),q.lc("ngForOf",a.cuentas)}}function dl(t,e){1&t&&q.Ob(0,"br")}function bl(t,e){if(1&t&&(q.Rb(0),q.Tb(1,"span"),q.Fc(2),q.Sb(),q.Ob(3,"br"),q.Qb()),2&t){var n=e.$implicit;q.Cb(2),q.Gc(n.trim())}}function ml(t,e){1&t&&q.Ob(0,"br")}function fl(t,e){if(1&t&&(q.Tb(0,"span"),q.Tb(1,"strong"),q.Fc(2,"Notas:"),q.Sb(),q.Fc(3),q.Sb()),2&t){var n=q.fc().$implicit;q.Cb(3),q.Hc(" ",n.notas," ")}}function pl(t,e){if(1&t&&(q.Tb(0,"tr"),q.Tb(1,"td"),q.Fc(2),q.Dc(3,dl,1,0,"br",11),q.Dc(4,bl,4,1,"ng-container",8),q.Dc(5,ml,1,0,"br",11),q.Dc(6,fl,4,1,"span",11),q.Sb(),q.Sb()),2&t){var n=e.$implicit;q.Cb(2),q.Ic(" ",n.cantidad," ",n.articulo.descripcion," "),q.Cb(1),q.lc("ngIf",n.detalle.length>0),q.Cb(1),q.lc("ngForOf",n.detalle),q.Cb(1),q.lc("ngIf",!!n.notas&&n.notas.length>0&&!n.detalle),q.Cb(1),q.lc("ngIf",!!n.notas&&n.notas.length>0)}}function hl(t,e){if(1&t&&(q.Tb(0,"table"),q.Dc(1,pl,7,6,"tr",8),q.Sb()),2&t){var n=q.fc().$implicit;q.Cb(1),q.lc("ngForOf",n.productos)}}function gl(t,e){if(1&t&&(q.Rb(0),q.Dc(1,hl,2,1,"table",11),q.Qb()),2&t){var n=e.$implicit;q.Cb(1),q.lc("ngIf",n.productos.length>0)}}var vl=function(t){return{"text-danger":t}};function Sl(t,e){if(1&t){var n=q.Ub();q.Tb(0,"div",6),q.Tb(1,"mat-card",7),q.Tb(2,"mat-card-header"),q.Tb(3,"mat-card-title"),q.Fc(4),q.Sb(),q.Tb(5,"mat-card-subtitle"),q.Fc(6),q.Ob(7,"br"),q.Fc(8),q.Sb(),q.Sb(),q.Tb(9,"mat-card-content"),q.Tb(10,"div",12),q.Tb(11,"h6",13),q.Fc(12),q.gc(13,"date"),q.Sb(),q.Sb(),q.Dc(14,gl,2,1,"ng-container",8),q.Sb(),q.Tb(15,"mat-card-actions",9),q.Tb(16,"button",10),q.bc("click",function(){q.xc(n);var t=e.$implicit;return q.fc().setCocinado(t)}),q.Fc(17,"Cocinado"),q.Sb(),q.Sb(),q.Sb(),q.Sb()}if(2&t){var a=e.$implicit,o=q.fc();q.Cb(4),q.Ic("Comanda #",a.comanda," - ",a.numero,""),q.Cb(2),q.Ic(" Area ",a.mesa.area.nombre," - Mesa #",a.mesa.etiqueta||a.mesa.numero,""),q.Cb(2),q.Ic(" Atiende: ",a.mesero.nombres," ",a.mesero.apellidos," "),q.Cb(3),q.lc("ngClass",q.oc(12,vl,o.comparaFecha(a))),q.Cb(1),q.Hc(" ",q.ic(13,9,a.tiempo_transcurrido,"HH:mm:ss")," "),q.Cb(2),q.lc("ngForOf",a.cuentas)}}var Cl,Tl,_l,yl=[{path:"mantareas",component:_n,canActivate:[Ie.a]},{path:"tranareas",component:Oi,canActivate:[Ie.a]},{path:"turno",component:Er,canActivate:[Ie.a]},{path:"rptvtascat",component:ac,canActivate:[Ie.a]},{path:"rptturnos",component:cc,canActivate:[Ie.a]},{path:"rptpropinas",component:dc,canActivate:[Ie.a]},{path:"rptcaja",component:ts,canActivate:[Ie.a]},{path:"rptfactura",component:as,canActivate:[Ie.a]},{path:"cmdonline",component:qc,canActivate:[Ie.a]},{path:"tipoturno",component:fs,canActivate:[Ie.a]},{path:"propina",component:Es,canActivate:[Ie.a]},{path:"autoconsulta",component:Us,canActivate:[Ie.a]},{path:"cajacorte",component:Js,canActivate:[Ie.a]},{path:"trancocina",component:(Cl=function(){function t(e,n,a,o,i,r){var c=this;u(this,t),this.ls=e,this.comandaSrvc=n,this.socket=a,this.dns=o,this.snackBar=i,this.dialog=r,this.lstComandasCocina=[],this.lstComandasCocinaEnProceso=[],this.notificarUsuario=function(){var t={icon:"assets/img/minilogo.png",body:"Se recibi\xf3 una nueva orden a las ".concat(ia().format(Re.a.dateTimeFormat),"."),dir:"auto"};c.dns.createNotification("Rest-Touch Pro",1e4,t)},this.loadComandasCocina=function(){return c.comandaSrvc.getComandasCocina().subscribe(function(t){c.lstComandasCocina=t.pendientes,c.lstComandasCocinaEnProceso=t.enproceso,c.setTiempo()})},this.setTiempo=function(){if(c.lstComandasCocinaEnProceso)for(var t=0;t<c.lstComandasCocinaEnProceso.length;t++){var e=c.lstComandasCocinaEnProceso[t],n=6e4,a=36e5,o=864e5,i=new Date(e.fecha_proceso);c.lstComandasCocinaEnProceso[t].inicio_proceso=i,e.inicio=i;var r=i.getTime(),s=(i=new Date).getTime()-r;s-=Math.floor(s/o)*o;var l=Math.floor(s/a);s-=l*a;var u=Math.floor(s/n);s-=u*n;var d=Math.floor(s/1e3),b=new Date;if(b.setHours(l),b.setMinutes(u),b.setSeconds(d),c.lstComandasCocinaEnProceso[t].tiempo_transcurrido=b,e.tiempo_preparacion){var m=e.tiempo_preparacion.split(":");e.inicio.setHours(e.inicio.getHours()+ +m[0]),e.inicio.setMinutes(e.inicio.getMinutes()+ +m[1]),c.lstComandasCocinaEnProceso[t].fin_proceso=e.inicio}else c.lstComandasCocinaEnProceso[t].fin_proceso=i}},this.comparaFecha=function(t){return new Date>t.fin_proceso},this.setCocinado=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;c.dialog.open(nl,{maxWidth:"400px",data:new el("Cocina","\xbfSeguro de marcar como '".concat(1==+e?"vista":"cocinada","' la comanda #").concat(t.comanda,"?"),"S\xed","No",{respuesta:!1,tiempo:""},1==+e)}).afterClosed().subscribe(function(n){n&&n.respuesta&&n.tiempo&&c.comandaSrvc.setComandaCocinada(+t.comanda,{numero:+t.numero,estatus:e,tiempo:n.tiempo}).subscribe(function(t){t.exito?c.snackBar.open(t.mensaje,"Cocina",{duration:3e3}):c.snackBar.open("ERROR: ".concat(t.mensaje),"Cocina",{duration:7e3}),c.loadComandasCocina()})})}}return b(t,[{key:"ngOnInit",value:function(){var t=this;this.ls.get(Re.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(Re.a.usrTokenVar).sede_uuid),this.socket.on("refrescar:listaCocina",function(){t.loadComandasCocina(),t.notificarUsuario()}),setInterval(function(){t.setTiempo()},1e3)),this.loadComandasCocina()}}]),t}(),Cl.\u0275fac=function(t){return new(t||Cl)(q.Nb(He.a),q.Nb(Qn),q.Nb(da.a),q.Nb(bc.a),q.Nb(O.b),q.Nb(N.b))},Cl.\u0275cmp=q.Hb({type:Cl,selectors:[["app-tran-cocina"]],decls:13,vars:2,consts:[["fxLayout","row","fxLayout.xs","column","fxFlexFill",""],["fxFlex","50%","fxFlex.xs","100%",1,"bordeRght"],["fxLayout","row wrap","fxLayoutGap","10px grid","fxFlexFill","","fxLayoutAlign","start start",1,"divContenedor"],["fxFlex","100%","fxLayoutAlign","center start"],["fxFlex","33%","fxFlex.xs","100%","fxFlex.sm","100%","fxFlex.md","50%",4,"ngFor","ngForOf"],["fxFlex","50%","fxFlex.xs","100%",1,"bordeLft"],["fxFlex","33%","fxFlex.xs","100%","fxFlex.sm","100%","fxFlex.md","50%"],[1,"mat-elevation-z4"],[4,"ngFor","ngForOf"],["align","end"],["mat-raised-button","","color","accent","type","button",3,"click"],[4,"ngIf"],["align","center"],[3,"ngClass"]],template:function(t,e){1&t&&(q.Tb(0,"div",0),q.Tb(1,"div",1),q.Tb(2,"div",2),q.Tb(3,"div",3),q.Tb(4,"h4"),q.Fc(5,"Pendientes"),q.Sb(),q.Sb(),q.Dc(6,ul,14,7,"div",4),q.Sb(),q.Sb(),q.Tb(7,"div",5),q.Tb(8,"div",2),q.Tb(9,"div",3),q.Tb(10,"h4"),q.Fc(11,"En Proceso"),q.Sb(),q.Sb(),q.Dc(12,Sl,18,14,"div",4),q.Sb(),q.Sb(),q.Sb()),2&t&&(q.Cb(6),q.lc("ngForOf",e.lstComandasCocina),q.Cb(6),q.lc("ngForOf",e.lstComandasCocinaEnProceso))},directives:[Ra.c,Ra.e,Ra.a,Ra.d,Ra.b,d.l,x.a,x.d,x.h,x.g,x.c,x.b,w.a,d.m,d.k,tn.a],pipes:[d.e],styles:[".divContenedor[_ngcontent-%COMP%]{margin-left:5px!important}.bordeRght[_ngcontent-%COMP%]{border-right:1.5px solid #000}.bordeLft[_ngcontent-%COMP%]{border-left:1.5px solid #000}.text-danger[_ngcontent-%COMP%]{color:#dc143c}.item[_ngcontent-%COMP%]{display:block;height:auto;white-space:nowrap;word-wrap:break-word}"]}),Cl),canActivate:[Ie.a]},{path:"**",redirectTo:"/admin/dashboard",pathMatch:"full"}],kl=((_l=function t(){u(this,t)}).\u0275mod=q.Lb({type:_l}),_l.\u0275inj=q.Kb({factory:function(t){return new(t||_l)},imports:[[me.d.forChild(yl)],me.d]}),_l),xl=((Tl=function t(){u(this,t)}).\u0275mod=q.Lb({type:Tl}),Tl.\u0275inj=q.Kb({factory:function(t){return new(t||Tl)},providers:[$.l],imports:[[d.c,kl,m.c,f.e,p.a,h.WmsModule,g.PosModule,he,S.a,T.d,_.b,y.d,k.c,x.f,D.b,P.c,E.l,F.b,M.b,w.b,O.c,I.b,R.d,A.b,U.b,N.e,j.d,ot,$.l,Oe.c,se,be,ge.c,Ee,C.b]]}),Tl)}}])}();