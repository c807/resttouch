{"version":3,"sources":["./src/app/pos/pos-routing.module.ts","./src/app/pos/components/formaPago/lista-forma-pago/lista-forma-pago.component.ts","./src/app/pos/components/formaPago/lista-forma-pago/lista-forma-pago.component.html","./node_modules/js-base64/base64.mjs","./src/app/admin/services/moneda.service.ts","./src/app/pos/components/formaPago/forma-pago/forma-pago.component.ts","./src/app/pos/components/formaPago/forma-pago/forma-pago.component.html","./src/app/pos/services/factura.service.ts","./src/app/pos/services/forma-pago.service.ts","./src/app/pos/components/facturaManual/form-factura-manual/form-factura-manual.component.ts","./src/app/pos/components/facturaManual/form-factura-manual/form-factura-manual.component.html","./src/app/pos/services/cobro.service.ts","./src/app/pos/components/cobrar-pedido/cobrar-pedido.component.ts","./src/app/pos/components/cobrar-pedido/cobrar-pedido.component.html","./src/app/pos/components/facturaManual/factura-manual/factura-manual.component.ts","./src/app/pos/components/facturaManual/factura-manual/factura-manual.component.html","./src/app/pos/components/formaPago/form-forma-pago/form-forma-pago.component.ts","./src/app/pos/components/formaPago/form-forma-pago/form-forma-pago.component.html","./src/app/pos/pos.module.ts","./src/app/pos/services/factura-serie.service.ts","./src/app/pos/components/facturaManual/lista-factura-manual/lista-factura-manual.component.ts","./src/app/pos/components/facturaManual/lista-factura-manual/lista-factura-manual.component.html"],"names":[],"mappings":"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AA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iCAAiC,EAAE,oBAAoB,EAAE,sBAAsB,EAAE;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,gBAAgB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,OAAO;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA,+DAA+D,EAAE,wBAAwB,EAAE;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,gBAAgB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,qBAAqB,EAAE;AAC3D,yCAAyC,8BAA8B,EAAE;AACzE,qCAAqC,2BAA2B,EAAE;AAClE,qCAAqC,2BAA2B,EAAE;AAClE,sCAAsC,2BAA2B,EAAE;AACnE;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,sCAAsC,EAAE;AACjF,qCAAqC,mCAAmC,EAAE;AAC1E,qCAAqC,mCAAmC,EAAE;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACmB;AACA;AACM;AACD;AACC;AACD;AACQ;AACF;AACd;AACE;AACG;AACa;AAClB;AACE;AACC;AACO;AACF;AACA;AACI;AACF;AAC1B;AAC6B;;;;;;;;;;;;;ACtS7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6C;AACoB;AAGd;AAC1B;;;AAKlB,MAAM,aAAa;IAIxB,YACU,IAAgB;QAAhB,SAAI,GAAJ,IAAI,CAAY;QAExB,IAAI,CAAC,WAAW,GAAG,IAAI,yEAAmB,EAAE,CAAC;IAC/C,CAAC;IAED,GAAG,CAAC,OAAY,EAAE;QAChB,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAClB,GAAG,qDAAM,CAAC,YAAY,eAAe,4CAAY,CAAC,IAAI,CAAC,EAAE,CAC1D,CAAC,IAAI,CAAC,4DAAK,CAAC,qDAAM,CAAC,UAAU,CAA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","file":"default~pos-pos-module~restaurante-restaurante-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { AuthguardService as AuthGuard } from '../admin/services/authguard.service';\n\nimport { FormaPagoComponent } from './components/formaPago/forma-pago/forma-pago.component';\nimport { FacturaManualComponent } from './components/facturaManual/factura-manual/factura-manual.component';\n\nconst routes: Routes = [\n  { path: 'fpago', component: FormaPagoComponent, canActivate: [AuthGuard] },\n  { path: 'factman', component: FacturaManualComponent, canActivate: [AuthGuard] },\n  { path: '**', redirectTo: '/admin/dashboard', pathMatch: 'full' }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class PosRoutingModule { }\n","import { Component, OnInit, Output, EventEmitter, ViewChild } from '@angular/core';\nimport { PageEvent } from '@angular/material/paginator';\nimport { PaginarArray, MultiFiltro } from '../../../../shared/global';\n\nimport { FormaPago } from '../../../interfaces/forma-pago';\nimport { FormaPagoService } from '../../../services/forma-pago.service';\n\n@Component({\n  selector: 'app-lista-forma-pago',\n  templateUrl: './lista-forma-pago.component.html',\n  styleUrls: ['./lista-forma-pago.component.css']\n})\nexport class ListaFormaPagoComponent implements OnInit {\n\n  public lstFormasPago: FormaPago[];\n  public lstFormasPagoPaged: FormaPago[];\n  @Output() getFormaPagoEv = new EventEmitter();\n\n  public length = 0;\n  public pageSize = 5;\n  public pageSizeOptions: number[] = [5, 10, 15];\n  public pageIndex = 0;\n  public pageEvent: PageEvent;\n  public txtFiltro = '';\n\n  constructor(\n    private formaPagoSrvc: FormaPagoService\n  ) { }\n\n  ngOnInit() {\n    this.loadFormasPago();\n  }\n\n  applyFilter() {\n    if (this.txtFiltro.length > 0) {\n      const tmpList = MultiFiltro(this.lstFormasPago, this.txtFiltro);\n      this.length = tmpList.length;\n      this.lstFormasPagoPaged = PaginarArray(tmpList, this.pageSize, this.pageIndex + 1);\n    } else {\n      this.length = this.lstFormasPago.length;\n      this.lstFormasPagoPaged = PaginarArray(this.lstFormasPago, this.pageSize, this.pageIndex + 1);\n    }\n  }\n\n  loadFormasPago = () => {\n    this.formaPagoSrvc.buscar().subscribe(lst => {\n      if (lst) {\n        if (lst.length > 0) {\n          this.lstFormasPago = lst;\n          this.applyFilter();\n        }\n      }\n    });\n  }\n\n  getFormaPago = (obj: FormaPago) => {\n    this.getFormaPagoEv.emit(obj);\n  }\n\n  pageChange = (e: PageEvent) => {\n    this.pageSize = e.pageSize;\n    this.pageIndex = e.pageIndex;\n    this.applyFilter();\n  }\n}\n","<mat-card class=\"mat-elevation-z4 fullWidth\">\n    <mat-card-content>\n        <mat-form-field class=\"fullWidth\">\n            <input matInput (keyup)=\"applyFilter()\" placeholder=\"Buscar...\" [(ngModel)]=\"txtFiltro\" [ngModelOptions]=\"{standalone: true}\">\n        </mat-form-field>\n        <mat-nav-list>\n            <mat-list-item *ngFor=\"let element of lstFormasPagoPaged\" (click)=\"getFormaPago(element)\">\n                <mat-icon mat-list-icon>account_balance_wallet</mat-icon>\n                <h5 mat-line>{{element.descripcion}}</h5>\n            </mat-list-item>            \n        </mat-nav-list>\n        <mat-paginator [length]=\"length\" [pageSize]=\"pageSize\" [pageSizeOptions]=\"pageSizeOptions\" (page)=\"pageChange($event)\" showFirstLastButtons>\n        </mat-paginator>\n    </mat-card-content>\n</mat-card>\n","/**\n *  base64.ts\n *\n *  Licensed under the BSD 3-Clause License.\n *    http://opensource.org/licenses/BSD-3-Clause\n *\n *  References:\n *    http://en.wikipedia.org/wiki/Base64\n *\n * @author Dan Kogai (https://github.com/dankogai)\n */\nconst version = '3.6.0';\n/**\n * @deprecated use lowercase `version`.\n */\nconst VERSION = version;\nconst _hasatob = typeof atob === 'function';\nconst _hasbtoa = typeof btoa === 'function';\nconst _hasBuffer = typeof Buffer === 'function';\nconst _TD = typeof TextDecoder === 'function' ? new TextDecoder() : undefined;\nconst _TE = typeof TextEncoder === 'function' ? new TextEncoder() : undefined;\nconst b64ch = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nconst b64chs = [...b64ch];\nconst b64tab = ((a) => {\n    let tab = {};\n    a.forEach((c, i) => tab[c] = i);\n    return tab;\n})(b64chs);\nconst b64re = /^(?:[A-Za-z\\d+\\/]{4})*?(?:[A-Za-z\\d+\\/]{2}(?:==)?|[A-Za-z\\d+\\/]{3}=?)?$/;\nconst _fromCC = String.fromCharCode.bind(String);\nconst _U8Afrom = typeof Uint8Array.from === 'function'\n    ? Uint8Array.from.bind(Uint8Array)\n    : (it, fn = (x) => x) => new Uint8Array(Array.prototype.slice.call(it, 0).map(fn));\nconst _mkUriSafe = (src) => src\n    .replace(/[+\\/]/g, (m0) => m0 == '+' ? '-' : '_')\n    .replace(/=+$/m, '');\nconst _tidyB64 = (s) => s.replace(/[^A-Za-z0-9\\+\\/]/g, '');\n/**\n * polyfill version of `btoa`\n */\nconst btoaPolyfill = (bin) => {\n    // console.log('polyfilled');\n    let u32, c0, c1, c2, asc = '';\n    const pad = bin.length % 3;\n    for (let i = 0; i < bin.length;) {\n        if ((c0 = bin.charCodeAt(i++)) > 255 ||\n            (c1 = bin.charCodeAt(i++)) > 255 ||\n            (c2 = bin.charCodeAt(i++)) > 255)\n            throw new TypeError('invalid character found');\n        u32 = (c0 << 16) | (c1 << 8) | c2;\n        asc += b64chs[u32 >> 18 & 63]\n            + b64chs[u32 >> 12 & 63]\n            + b64chs[u32 >> 6 & 63]\n            + b64chs[u32 & 63];\n    }\n    return pad ? asc.slice(0, pad - 3) + \"===\".substring(pad) : asc;\n};\n/**\n * does what `window.btoa` of web browsers do.\n * @param {String} bin binary string\n * @returns {string} Base64-encoded string\n */\nconst _btoa = _hasbtoa ? (bin) => btoa(bin)\n    : _hasBuffer ? (bin) => Buffer.from(bin, 'binary').toString('base64')\n        : btoaPolyfill;\nconst _fromUint8Array = _hasBuffer\n    ? (u8a) => Buffer.from(u8a).toString('base64')\n    : (u8a) => {\n        // cf. https://stackoverflow.com/questions/12710001/how-to-convert-uint8-array-to-base64-encoded-string/12713326#12713326\n        const maxargs = 0x1000;\n        let strs = [];\n        for (let i = 0, l = u8a.length; i < l; i += maxargs) {\n            strs.push(_fromCC.apply(null, u8a.subarray(i, i + maxargs)));\n        }\n        return _btoa(strs.join(''));\n    };\n/**\n * converts a Uint8Array to a Base64 string.\n * @param {boolean} [urlsafe] URL-and-filename-safe a la RFC4648 §5\n * @returns {string} Base64 string\n */\nconst fromUint8Array = (u8a, urlsafe = false) => urlsafe ? _mkUriSafe(_fromUint8Array(u8a)) : _fromUint8Array(u8a);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const utob = (src: string) => unescape(encodeURIComponent(src));\n// reverting good old fationed regexp\nconst cb_utob = (c) => {\n    if (c.length < 2) {\n        var cc = c.charCodeAt(0);\n        return cc < 0x80 ? c\n            : cc < 0x800 ? (_fromCC(0xc0 | (cc >>> 6))\n                + _fromCC(0x80 | (cc & 0x3f)))\n                : (_fromCC(0xe0 | ((cc >>> 12) & 0x0f))\n                    + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n                    + _fromCC(0x80 | (cc & 0x3f)));\n    }\n    else {\n        var cc = 0x10000\n            + (c.charCodeAt(0) - 0xD800) * 0x400\n            + (c.charCodeAt(1) - 0xDC00);\n        return (_fromCC(0xf0 | ((cc >>> 18) & 0x07))\n            + _fromCC(0x80 | ((cc >>> 12) & 0x3f))\n            + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n            + _fromCC(0x80 | (cc & 0x3f)));\n    }\n};\nconst re_utob = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFFF]|[^\\x00-\\x7F]/g;\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-8 string\n * @returns {string} UTF-16 string\n */\nconst utob = (u) => u.replace(re_utob, cb_utob);\n//\nconst _encode = _hasBuffer\n    ? (s) => Buffer.from(s, 'utf8').toString('base64')\n    : _TE\n        ? (s) => _fromUint8Array(_TE.encode(s))\n        : (s) => _btoa(utob(s));\n/**\n * converts a UTF-8-encoded string to a Base64 string.\n * @param {boolean} [urlsafe] if `true` make the result URL-safe\n * @returns {string} Base64 string\n */\nconst encode = (src, urlsafe = false) => urlsafe\n    ? _mkUriSafe(_encode(src))\n    : _encode(src);\n/**\n * converts a UTF-8-encoded string to URL-safe Base64 RFC4648 §5.\n * @returns {string} Base64 string\n */\nconst encodeURI = (src) => encode(src, true);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const btou = (src: string) => decodeURIComponent(escape(src));\n// reverting good old fationed regexp\nconst re_btou = /[\\xC0-\\xDF][\\x80-\\xBF]|[\\xE0-\\xEF][\\x80-\\xBF]{2}|[\\xF0-\\xF7][\\x80-\\xBF]{3}/g;\nconst cb_btou = (cccc) => {\n    switch (cccc.length) {\n        case 4:\n            var cp = ((0x07 & cccc.charCodeAt(0)) << 18)\n                | ((0x3f & cccc.charCodeAt(1)) << 12)\n                | ((0x3f & cccc.charCodeAt(2)) << 6)\n                | (0x3f & cccc.charCodeAt(3)), offset = cp - 0x10000;\n            return (_fromCC((offset >>> 10) + 0xD800)\n                + _fromCC((offset & 0x3FF) + 0xDC00));\n        case 3:\n            return _fromCC(((0x0f & cccc.charCodeAt(0)) << 12)\n                | ((0x3f & cccc.charCodeAt(1)) << 6)\n                | (0x3f & cccc.charCodeAt(2)));\n        default:\n            return _fromCC(((0x1f & cccc.charCodeAt(0)) << 6)\n                | (0x3f & cccc.charCodeAt(1)));\n    }\n};\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-16 string\n * @returns {string} UTF-8 string\n */\nconst btou = (b) => b.replace(re_btou, cb_btou);\n/**\n * polyfill version of `atob`\n */\nconst atobPolyfill = (asc) => {\n    // console.log('polyfilled');\n    asc = asc.replace(/\\s+/g, '');\n    if (!b64re.test(asc))\n        throw new TypeError('malformed base64.');\n    asc += '=='.slice(2 - (asc.length & 3));\n    let u24, bin = '', r1, r2;\n    for (let i = 0; i < asc.length;) {\n        u24 = b64tab[asc.charAt(i++)] << 18\n            | b64tab[asc.charAt(i++)] << 12\n            | (r1 = b64tab[asc.charAt(i++)]) << 6\n            | (r2 = b64tab[asc.charAt(i++)]);\n        bin += r1 === 64 ? _fromCC(u24 >> 16 & 255)\n            : r2 === 64 ? _fromCC(u24 >> 16 & 255, u24 >> 8 & 255)\n                : _fromCC(u24 >> 16 & 255, u24 >> 8 & 255, u24 & 255);\n    }\n    return bin;\n};\n/**\n * does what `window.atob` of web browsers do.\n * @param {String} asc Base64-encoded string\n * @returns {string} binary string\n */\nconst _atob = _hasatob ? (asc) => atob(_tidyB64(asc))\n    : _hasBuffer ? (asc) => Buffer.from(asc, 'base64').toString('binary')\n        : atobPolyfill;\n//\nconst _toUint8Array = _hasBuffer\n    ? (a) => _U8Afrom(Buffer.from(a, 'base64'))\n    : (a) => _U8Afrom(_atob(a), c => c.charCodeAt(0));\n/**\n * converts a Base64 string to a Uint8Array.\n */\nconst toUint8Array = (a) => _toUint8Array(_unURI(a));\n//\nconst _decode = _hasBuffer\n    ? (a) => Buffer.from(a, 'base64').toString('utf8')\n    : _TD\n        ? (a) => _TD.decode(_toUint8Array(a))\n        : (a) => btou(_atob(a));\nconst _unURI = (a) => _tidyB64(a.replace(/[-_]/g, (m0) => m0 == '-' ? '+' : '/'));\n/**\n * converts a Base64 string to a UTF-8 string.\n * @param {String} src Base64 string.  Both normal and URL-safe are supported\n * @returns {string} UTF-8 string\n */\nconst decode = (src) => _decode(_unURI(src));\n/**\n * check if a value is a valid Base64 string\n * @param {String} src a value to check\n  */\nconst isValid = (src) => {\n    if (typeof src !== 'string')\n        return false;\n    const s = src.replace(/\\s+/g, '').replace(/=+$/, '');\n    return !/[^\\s0-9a-zA-Z\\+/]/.test(s) || !/[^\\s0-9a-zA-Z\\-_]/.test(s);\n};\n//\nconst _noEnum = (v) => {\n    return {\n        value: v, enumerable: false, writable: true, configurable: true\n    };\n};\n/**\n * extend String.prototype with relevant methods\n */\nconst extendString = function () {\n    const _add = (name, body) => Object.defineProperty(String.prototype, name, _noEnum(body));\n    _add('fromBase64', function () { return decode(this); });\n    _add('toBase64', function (urlsafe) { return encode(this, urlsafe); });\n    _add('toBase64URI', function () { return encode(this, true); });\n    _add('toBase64URL', function () { return encode(this, true); });\n    _add('toUint8Array', function () { return toUint8Array(this); });\n};\n/**\n * extend Uint8Array.prototype with relevant methods\n */\nconst extendUint8Array = function () {\n    const _add = (name, body) => Object.defineProperty(Uint8Array.prototype, name, _noEnum(body));\n    _add('toBase64', function (urlsafe) { return fromUint8Array(this, urlsafe); });\n    _add('toBase64URI', function () { return fromUint8Array(this, true); });\n    _add('toBase64URL', function () { return fromUint8Array(this, true); });\n};\n/**\n * extend Builtin prototypes with relevant methods\n */\nconst extendBuiltins = () => {\n    extendString();\n    extendUint8Array();\n};\nconst gBase64 = {\n    version: version,\n    VERSION: VERSION,\n    atob: _atob,\n    atobPolyfill: atobPolyfill,\n    btoa: _btoa,\n    btoaPolyfill: btoaPolyfill,\n    fromBase64: decode,\n    toBase64: encode,\n    encode: encode,\n    encodeURI: encodeURI,\n    encodeURL: encodeURI,\n    utob: utob,\n    btou: btou,\n    decode: decode,\n    isValid: isValid,\n    fromUint8Array: fromUint8Array,\n    toUint8Array: toUint8Array,\n    extendString: extendString,\n    extendUint8Array: extendUint8Array,\n    extendBuiltins: extendBuiltins,\n};\n// makecjs:CUT //\nexport { version };\nexport { VERSION };\nexport { _atob as atob };\nexport { atobPolyfill };\nexport { _btoa as btoa };\nexport { btoaPolyfill };\nexport { decode as fromBase64 };\nexport { encode as toBase64 };\nexport { utob };\nexport { encode };\nexport { encodeURI };\nexport { encodeURI as encodeURL };\nexport { btou };\nexport { decode };\nexport { isValid };\nexport { fromUint8Array };\nexport { toUint8Array };\nexport { extendString };\nexport { extendUint8Array };\nexport { extendBuiltins };\n// and finally,\nexport { gBase64 as Base64 };\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { GLOBAL } from '../../shared/global';\nimport { ServiceErrorHandler } from '../../shared/error-handler';\nimport { Moneda } from '../interfaces/moneda';\nimport { Observable } from 'rxjs';\nimport { retry, catchError } from 'rxjs/operators';\nimport * as qs from 'qs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MonedaService {\n\n  private srvcErrHndl: ServiceErrorHandler;\n\n  constructor(\n    private http: HttpClient,\n  ) {\n    this.srvcErrHndl = new ServiceErrorHandler();\n  }\n\n  get(fltr: any = {}): Observable<Moneda[]> {\n    return this.http.get<Moneda[]>(\n      `${GLOBAL.urlCatalogos}/get_moneda?${qs.stringify(fltr)}`\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n}\n","import { Component, OnInit, ViewChild } from '@angular/core';\n\nimport { ListaFormaPagoComponent } from '../lista-forma-pago/lista-forma-pago.component';\nimport { FormaPago } from '../../../interfaces/forma-pago';\n\n@Component({\n  selector: 'app-forma-pago',\n  templateUrl: './forma-pago.component.html',\n  styleUrls: ['./forma-pago.component.css']\n})\nexport class FormaPagoComponent implements OnInit {\n\n  public formaPago: FormaPago;\n  @ViewChild('lstFormaPago') lstFormaPagoComponent: ListaFormaPagoComponent;\n\n  constructor() {\n    this.formaPago = { forma_pago: null, descripcion: null, activo: 1 };\n  }\n\n  ngOnInit() {\n  }\n\n  setFormaPago = (fp: FormaPago) => this.formaPago = fp;\n\n  refreshFormaPagoList = () => this.lstFormaPagoComponent.loadFormasPago();\n\n}\n","<div class=\"row\">\n    <div class=\"col m5 s12\">\n        <app-lista-forma-pago #lstFormaPago (getFormaPagoEv)=\"setFormaPago($event)\"></app-lista-forma-pago>\n    </div>\n    <div class=\"col m7 s12\">\n        <app-form-forma-pago #frmIngreso [formaPago]=\"formaPago\" (formaPagoSavedEv)=\"refreshFormaPagoList()\">\n        </app-form-forma-pago>\n    </div>\n</div>","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { GLOBAL } from '../../shared/global';\nimport { ServiceErrorHandler } from '../../shared/error-handler';\nimport { FacturaRequest, Factura } from '../interfaces/factura';\nimport { DetalleFactura } from '../interfaces/detalle-factura';\nimport { Observable } from 'rxjs';\nimport { retry, catchError } from 'rxjs/operators';\nimport * as qs from 'qs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FacturaService {\n\n  private srvcErrHndl: ServiceErrorHandler;\n  private moduleUrl = 'factura';\n\n  constructor(\n    private http: HttpClient\n  ) {\n    this.srvcErrHndl = new ServiceErrorHandler();\n  }\n\n  facturar(entidad: FacturaRequest): Observable<any> {\n    return this.http.post<any>(\n      `${GLOBAL.urlAppRestaurante}/${this.moduleUrl}/guardar`,\n      entidad\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n  get(fltr: any = {}): Observable<Factura[]> {\n    return this.http.get<Factura[]>(\n      `${GLOBAL.urlFacturacion}/${this.moduleUrl}/buscar_factura?${qs.stringify(fltr)}`\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n  imprimir(idfactura: number): Observable<any> {\n    return this.http.get<any>(\n      `${GLOBAL.urlFacturacion}/${this.moduleUrl}/imprimir/${idfactura}`\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n  save(entidad: Factura): Observable<any> {\n    return this.http.post<any>(\n      `${GLOBAL.urlFacturacion}/${this.moduleUrl}/guardar${!!entidad.factura ? ('/' + entidad.factura) : ''}`,\n      entidad\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n  refacturar(entidad: Factura): Observable<any> {\n    return this.http.post<any>(\n      `${GLOBAL.urlFacturacion}/${this.moduleUrl}/refacturar${!!entidad.factura ? ('/' + entidad.factura) : ''}`,\n      entidad\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n  firmar(identidad: number): Observable<any> {\n    return this.http.post<any>(`${GLOBAL.urlFacturacion}/${this.moduleUrl}/facturar/${identidad}`, {}\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n  anular(identidad: number, params: any = {}): Observable<any> {\n    return this.http.post<any>(\n      `${GLOBAL.urlFacturacion}/${this.moduleUrl}/anular/${identidad}`,\n      params\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n  getDetalle(idfactura: number, fltr: any = {}): Observable<DetalleFactura[]> {\n    return this.http.get<DetalleFactura[]>(\n      `${GLOBAL.urlFacturacion}/${this.moduleUrl}/buscar_detalle/${idfactura}?${qs.stringify(fltr)}`\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n  saveDetalle(entidad: DetalleFactura): Observable<any> {\n    return this.http.post<any>(\n      `${GLOBAL.urlFacturacion}/${this.moduleUrl}/guardar_detalle/${entidad.factura}${!!entidad.detalle_factura ? ('/' + entidad.detalle_factura) : ''}`,\n      entidad\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n  getGrafo(idfactura: number): Observable<any> {\n    return this.http.get<DetalleFactura[]>(\n      `${GLOBAL.urlFacturacion}/${this.moduleUrl}/get_grafo_factura/${idfactura}`\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { GLOBAL } from '../../shared/global';\nimport { ServiceErrorHandler } from '../../shared/error-handler';\nimport { FormaPago } from '../interfaces/forma-pago';\n// import { LocalstorageService } from '../../admin/services/localstorage.service';\nimport { Observable } from 'rxjs';\nimport { retry, catchError } from 'rxjs/operators';\nimport * as qs from 'qs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FormaPagoService {\n\n  private srvcErrHndl: ServiceErrorHandler;\n  private moduleUrl = 'catalogo';\n  private manteUrl = 'fpago';\n  // private usrToken: string = null;\n\n  constructor(\n    private http: HttpClient,\n    // private ls: LocalstorageService\n  ) {\n    this.srvcErrHndl = new ServiceErrorHandler();\n    // this.usrToken = this.ls.get(GLOBAL.usrTokenVar) ? this.ls.get(GLOBAL.usrTokenVar).token : null;\n  }\n\n  get(fltr: any = {}): Observable<FormaPago[]> {\n    /* const httpOptions = {\n      headers: new HttpHeaders({\n        'Authorization': this.usrToken\n      })\n    }; */\n    return this.http.get<FormaPago[]>(\n      `${GLOBAL.url}/${this.moduleUrl}/get_forma_pago?${qs.stringify(fltr)}`\n      // , httpOptions\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n  buscar(fltr: any = {}): Observable<FormaPago[]> {\n    /* const httpOptions = {\n      headers: new HttpHeaders({\n        'Authorization': this.usrToken\n      })\n    }; */\n    return this.http.get<FormaPago[]>(\n      `${GLOBAL.urlMantenimientos}/${this.manteUrl}/buscar?${qs.stringify(fltr)}`\n      // , httpOptions\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n  save(entidad: FormaPago): Observable<any> {\n    /* const httpOptions = {\n      headers: new HttpHeaders({\n        'Authorization': this.usrToken\n      })\n    }; */\n    return this.http.post<any>(\n      `${GLOBAL.urlMantenimientos}/${this.manteUrl}/guardar${!!entidad.forma_pago ? ('/' + entidad.forma_pago) : ''}`, entidad\n      // , httpOptions\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n\n}\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { MatTableDataSource } from '@angular/material/table';\r\nimport { MatAutocompleteSelectedEvent } from '@angular/material/autocomplete';\r\nimport { GLOBAL } from '../../../../shared/global';\r\nimport * as moment from 'moment';\r\nimport { ConfirmDialogModel, ConfirmDialogComponent } from '../../../../shared/components/confirm-dialog/confirm-dialog.component';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { Socket } from 'ngx-socket-io';\r\nimport { LocalstorageService } from '../../../../admin/services/localstorage.service';\r\n\r\nimport { Factura } from '../../../interfaces/factura';\r\nimport { DetalleFactura } from '../../../interfaces/detalle-factura';\r\nimport { FacturaService } from '../../../services/factura.service';\r\nimport { RazonAnulacion } from '../../../../admin/interfaces/razon-anulacion';\r\nimport { AnulacionService } from '../../../../admin/services/anulacion.service';\r\n\r\nimport { FacturaSerie } from '../../../interfaces/factura-serie';\r\nimport { FacturaSerieService } from '../../../services/factura-serie.service';\r\nimport { Cliente } from '../../../../admin/interfaces/cliente';\r\nimport { ClienteService } from '../../../../admin/services/cliente.service';\r\nimport { Moneda } from '../../../../admin/interfaces/moneda';\r\nimport { MonedaService } from '../../../../admin/services/moneda.service';\r\nimport { Articulo } from '../../../../wms/interfaces/articulo';\r\nimport { ArticuloService } from '../../../../wms/services/articulo.service';\r\n\r\nimport { Impresora } from '../../../../admin/interfaces/impresora';\r\nimport { ImpresoraService } from '../../../../admin/services/impresora.service';\r\nimport { ConfiguracionService } from '../../../../admin/services/configuracion.service';\r\nimport { Base64 } from 'js-base64';\r\n\r\n@Component({\r\n  selector: 'app-form-factura-manual',\r\n  templateUrl: './form-factura-manual.component.html',\r\n  styleUrls: ['./form-factura-manual.component.css']\r\n})\r\nexport class FormFacturaManualComponent implements OnInit {\r\n\r\n  @Input() factura: Factura;\r\n  @Output() facturaSavedEv = new EventEmitter();\r\n\r\n  public showForm = true;\r\n  public showFormDetalle = true;\r\n  public facturaSeries: FacturaSerie[] = [];\r\n  public clientes: Cliente[] = [];\r\n  public filteredClientes: Cliente[] = [];\r\n  public monedas: Moneda[] = [];\r\n  public detallesFactura: DetalleFactura[] = [];\r\n  public detalleFactura: DetalleFactura;\r\n  public articulos: Articulo[] = [];\r\n  public filteredArticulos: Articulo[] = [];\r\n  public displayedColumns: string[] = ['articulo', 'cantidad', 'precio_unitario', 'total', 'editItem'];\r\n  public dataSource: MatTableDataSource<DetalleFactura>;\r\n  public keyboardLayout = GLOBAL.IDIOMA_TECLADO;\r\n  public esMovil = false;\r\n  public refacturacion = false;\r\n  public txtArticuloSelected: (Articulo | string) = undefined;\r\n  public clienteSelected: (Cliente | string) = undefined;\r\n  public razonAnulacion: RazonAnulacion[] = [];\r\n  public impresoraPorDefecto: Impresora = null;\r\n\r\n  constructor(\r\n    private snackBar: MatSnackBar,\r\n    public dialog: MatDialog,\r\n    private facturaSrvc: FacturaService,\r\n    private facturaSerieSrvc: FacturaSerieService,\r\n    private clienteSrvc: ClienteService,\r\n    private monedaSrvc: MonedaService,\r\n    private articuloSrvc: ArticuloService,\r\n    private anulacionSrvc: AnulacionService,\r\n    private socket: Socket,\r\n    private ls: LocalstorageService,\r\n    private configSrvc: ConfiguracionService,\r\n    private impresoraSrvc: ImpresoraService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.esMovil = this.ls.get(GLOBAL.usrTokenVar).enmovil || false;\r\n    this.refacturacion = false;\r\n    this.resetFactura();\r\n    this.loadFacturaSeries();\r\n    this.loadClientes();\r\n    this.loadMonedas();\r\n    this.loadArticulos();\r\n    this.getRazonAnulacion();\r\n    this.loadImpresoraDefecto();\r\n    if (!!this.ls.get(GLOBAL.usrTokenVar).sede_uuid) {\r\n      this.socket.emit('joinRestaurant', this.ls.get(GLOBAL.usrTokenVar).sede_uuid);\r\n      this.socket.on('reconnect', () => this.socket.emit('joinRestaurant', this.ls.get(GLOBAL.usrTokenVar).sede_uuid));\r\n    }\r\n  }\r\n\r\n  getRazonAnulacion = () => {\r\n    this.anulacionSrvc.get().subscribe(res => {\r\n      this.razonAnulacion = res;\r\n    })\r\n  }\r\n\r\n  filtrar = (value: (Cliente | string)) => {\r\n    if (value && (typeof value === 'string')) {\r\n      const filterValue = value.toLowerCase();\r\n      this.filteredClientes =\r\n        this.clientes.filter(c => c.nombre.toLowerCase().includes(filterValue) || c.nit.toLowerCase().includes(filterValue));\r\n    } else {\r\n      this.filteredClientes = this.clientes;\r\n    }\r\n  }\r\n\r\n  loadImpresoraDefecto = () => {\r\n    const idImpresoraDefecto: number = +this.configSrvc.getConfig(GLOBAL.CONSTANTES.RT_IMPRESORA_DEFECTO) || 0;\r\n    if (idImpresoraDefecto > 0) {\r\n      this.impresoraSrvc.get({ impresora: idImpresoraDefecto }).subscribe((res: Impresora[]) => {\r\n        if (res && res.length > 0) {\r\n          this.impresoraPorDefecto = res[0];\r\n        } else {\r\n          this.impresoraPorDefecto = null;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  loadFacturaSeries = () => {\r\n    this.facturaSerieSrvc.get().subscribe(res => {\r\n      if (res) {\r\n        this.facturaSeries = res;\r\n      }\r\n    });\r\n  }\r\n\r\n  loadClientes = () => {\r\n    this.clienteSrvc.get().subscribe(res => {\r\n      if (res) {\r\n        this.clientes = res;\r\n        this.filteredClientes = this.clientes;\r\n      }\r\n    });\r\n  }\r\n\r\n  loadMonedas = () => {\r\n    this.monedaSrvc.get().subscribe(res => {\r\n      if (res) {\r\n        this.monedas = res;\r\n      }\r\n    });\r\n  }\r\n\r\n  refacturar = () => {\r\n    this.factura = {\r\n      factura: this.factura.factura, factura_serie: null, cliente: null,\r\n      fecha_factura: moment().format(GLOBAL.dbDateFormat), moneda: null, exenta: 0, notas: null,\r\n      fel_uuid: null, fel_uuid_anulacion: null\r\n    };\r\n    this.refacturacion = true;\r\n  }\r\n\r\n  resetFactura = () => {\r\n    this.factura = {\r\n      factura: null, factura_serie: null, cliente: null,\r\n      fecha_factura: moment().format(GLOBAL.dbDateFormat), moneda: null, exenta: 0, notas: null,\r\n      fel_uuid: null, fel_uuid_anulacion: null\r\n    };\r\n    this.clienteSelected = undefined;\r\n    this.resetDetalleFactura();\r\n    this.detallesFactura = [];\r\n  }\r\n\r\n  displayCliente = (cli: Cliente) => {\r\n    if (cli) {\r\n      this.factura.cliente = cli.cliente;\r\n      return cli.nombre;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  onSubmit = () => {\r\n    // console.log(this.factura); return;\r\n    if (this.refacturacion) {\r\n      this.facturaSrvc.refacturar(this.factura).subscribe(res => {\r\n        if (res.exito) {\r\n          this.facturaSavedEv.emit();\r\n          this.resetFactura();\r\n          this.refacturacion = false;\r\n          this.factura = {\r\n            factura: res.factura.factura,\r\n            factura_serie: res.factura.factura_serie,\r\n            cliente: res.factura.cliente,\r\n            fecha_factura: res.factura.fecha_factura,\r\n            moneda: res.factura.moneda,\r\n            exenta: +res.factura.exenta,\r\n            notas: res.factura.notas,\r\n            fel_uuid: res.factura.fel_uuid\r\n          };\r\n          this.snackBar.open('Factura manual agregada...', 'Factura', { duration: 3000 });\r\n        }\r\n      });\r\n    } else {\r\n      this.facturaSrvc.save(this.factura).subscribe(res => {\r\n        if (res.exito) {\r\n          this.facturaSavedEv.emit();\r\n          this.resetFactura();\r\n          this.factura = {\r\n            factura: res.factura.factura,\r\n            factura_serie: res.factura.factura_serie,\r\n            cliente: res.factura.cliente,\r\n            fecha_factura: res.factura.fecha_factura,\r\n            moneda: res.factura.moneda,\r\n            exenta: +res.factura.exenta,\r\n            notas: res.factura.notas,\r\n            fel_uuid: res.factura.fel_uuid\r\n          }\r\n          this.snackBar.open('Factura manual agregada...', 'Factura', { duration: 3000 });\r\n        }\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  firmarFactura = () => {\r\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, {\r\n      maxWidth: '400px',\r\n      data: new ConfirmDialogModel(\r\n        'Firmar factura',\r\n        'Luego de firmar la factura no podrá hacer ninguna modificación. ¿Desea continuar?',\r\n        'Sí', 'No'\r\n      )\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe(res => {\r\n      if (res) {\r\n        this.facturaSrvc.firmar(+this.factura.factura).subscribe(resFirma => {\r\n          if (resFirma.exito) {\r\n            this.factura.numero_factura = resFirma.factura.numero_factura;\r\n            this.factura.serie_factura = resFirma.factura.serie_factura;\r\n            this.factura.certificador_fel = resFirma.factura.certificador_fel;\r\n            this.factura.fel_uuid = resFirma.factura.fel_uuid;\r\n            this.facturaSavedEv.emit();\r\n            this.snackBar.open('Factura firmada con éxito...', 'Firmar', { duration: 3000 });\r\n          } else {\r\n            this.snackBar.open(`ERROR: ${resFirma.mensaje}`, 'Firmar', { duration: 3000 });\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  procesaDetalleFactura = (detalle: any[]) => {\r\n    const detFact: any[] = [];\r\n    detalle.forEach(d => detFact.push({\r\n      Cantidad: parseInt(d.cantidad),\r\n      Descripcion: d.articulo.descripcion,\r\n      Total: +d.total,\r\n      PrecioUnitario: +d.precio_unitario\r\n    }));\r\n    return detFact;\r\n  }\r\n\r\n  getTotalDetalle = (detalle: any[]): number => {\r\n    let suma = 0.00;\r\n    detalle.forEach(d => suma += +d.total);\r\n    return suma;\r\n  }\r\n\r\n  getTotalImpuestosAdicionales = (impuestos: any[]) => {\r\n    let suma = 0.00;\r\n    impuestos.forEach(i => suma += +i.total);\r\n    return suma;\r\n  }\r\n\r\n  imprimirFactura = () => {\r\n    // console.log(this.factura);\r\n    this.facturaSrvc.imprimir(+this.factura.factura).subscribe(res => {\r\n      if (res.factura) {\r\n        // console.log(res.factura);\r\n\r\n        const datosAImprimir = {\r\n          NombreEmpresa: res.factura.empresa.nombre,\r\n          NitEmpresa: res.factura.empresa.nit,\r\n          SedeEmpresa: res.factura.sedeFactura.nombre,\r\n          DireccionEmpresa: res.factura.empresa.direccion,\r\n          Fecha: moment(res.factura.fecha_factura).format(GLOBAL.dateFormat),\r\n          Nit: res.factura.receptor.nit,\r\n          Nombre: res.factura.receptor.nombre,\r\n          Direccion: res.factura.receptor.direccion,\r\n          Serie: res.factura.serie_factura,\r\n          Numero: res.factura.numero_factura,\r\n          Total: this.getTotalDetalle(res.factura.detalle) + this.getTotalImpuestosAdicionales((res.factura.impuestos_adicionales || [])),\r\n          NoAutorizacion: res.factura.fel_uuid,\r\n          NombreCertificador: res.factura.certificador_fel.nombre,\r\n          NitCertificador: res.factura.certificador_fel.nit,\r\n          FechaDeAutorizacion: res.factura.fecha_autorizacion,\r\n          NoOrdenEnLinea: '',\r\n          FormaDePago: '',\r\n          DetalleFactura: this.procesaDetalleFactura(res.factura.detalle),\r\n          ImpuestosAdicionales: (res.factura.impuestos_adicionales || []),\r\n          Impresora: this.impresoraPorDefecto\r\n        };\r\n\r\n        if (this.impresoraPorDefecto) {\r\n          if (+this.impresoraPorDefecto.bluetooth === 0) {\r\n            this.socket.emit(`print:factura`, `${JSON.stringify(datosAImprimir)}`);\r\n          } else {\r\n            this.printToBT(JSON.stringify(datosAImprimir));\r\n          }\r\n        } else {\r\n          delete datosAImprimir.Impresora;\r\n          this.socket.emit(`print:factura`, `${JSON.stringify(datosAImprimir)}`);\r\n        }\r\n\r\n        this.snackBar.open(\r\n          `Imprimiendo factura ${this.factura.serie_factura}-${this.factura.numero_factura}`,\r\n          'Impresión', { duration: 3000 }\r\n        );\r\n      } else {\r\n        this.snackBar.open(`ERROR: ${res.mensaje}`, 'Impresión', { duration: 3000 });\r\n      }\r\n    });\r\n  }\r\n\r\n  printToBT = (msgToPrint: string = '') => {\r\n    const convertir = this.configSrvc.getConfig(GLOBAL.CONSTANTES.RT_ENVIA_COMO_BASE64);    \r\n    const data = convertir ? Base64.encode(msgToPrint, true) : msgToPrint;\r\n    // const AppHref = `${GLOBAL.DEEP_LINK_ANDROID}${data}`;\r\n    const AppHref = GLOBAL.DEEP_LINK_ANDROID.replace('__INFOBASE64__', data);\r\n    try {\r\n      window.location.href = AppHref;\r\n    } catch (error) {\r\n      this.snackBar.open('No se pudo conectar con la aplicación de impresión', 'Comanda', { duration: 3000 });\r\n    }\r\n  }\r\n\r\n  anularFactura = () => {\r\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, {\r\n      maxWidth: '400px',\r\n      data: new ConfirmDialogModel(\r\n        'Anular factura',\r\n        'Luego de anular la factura no podrá hacer ninguna modificación. ¿Desea continuar?',\r\n        'Sí',\r\n        'No',\r\n        {\r\n          input: [\r\n            {\r\n              select: true,\r\n              label: 'Motivo',\r\n              datos: this.razonAnulacion,\r\n              valor: null,\r\n              id: 'razon_anulacion',\r\n              descripcion: 'descripcion',\r\n              requerido: true\r\n            },\r\n            {\r\n              select: false,\r\n              label: 'Comentario',\r\n              valor: null,\r\n              id: 'comentario_anulacion',\r\n              requerido: false\r\n            }\r\n          ]\r\n        }\r\n      )\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe(res => {\r\n      if (res.resultado) {\r\n        const params = {};\r\n        for (let i = 0; i < res.config.input.length; i++) {\r\n          const input = res.config.input[i];\r\n          params[input.id] = input.valor;\r\n        }\r\n\r\n        this.facturaSrvc.anular(+this.factura.factura, params).subscribe(resAnula => {\r\n          if (resAnula.exito) {\r\n            this.factura.fel_uuid_anulacion = resAnula.factura.fel_uuid_anulacion;\r\n            this.facturaSavedEv.emit();\r\n            this.snackBar.open('Factura anulada con éxito...', 'Firmar', { duration: 3000 });\r\n          } else {\r\n            this.snackBar.open(`ERROR: ${resAnula.mensaje}`, 'Firmar', { duration: 10000 });\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  loadArticulos = () => {\r\n    this.articuloSrvc.getArticulos().subscribe(res => {\r\n      if (res) {\r\n        this.articulos = res;\r\n        this.filteredArticulos = this.articulos;\r\n      }\r\n    });\r\n  }\r\n\r\n  displayArticulo = (art: Articulo) => {\r\n    if (art) {\r\n      this.detalleFactura.articulo = art.articulo;\r\n      return art.descripcion;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  filtrarArticulos = (value: (Articulo | string)) => {\r\n    if (value && (typeof value === 'string')) {\r\n      const filterValue = value.toLowerCase();\r\n      this.filteredArticulos =\r\n        this.articulos.filter(a => a.descripcion.toLowerCase().includes(filterValue));\r\n    } else {\r\n      this.filteredArticulos = this.articulos;\r\n    }\r\n  }\r\n\r\n  setPrecioUnitario = (ev: MatAutocompleteSelectedEvent) => {\r\n    const obj: Articulo = ev.option.value;\r\n    this.detalleFactura.precio_unitario = +obj.precio;\r\n    this.detalleFactura.total = +this.detalleFactura.precio_unitario * +this.detalleFactura.cantidad;\r\n  }\r\n\r\n  resetDetalleFactura = () => {\r\n    this.detalleFactura = {\r\n      detalle_factura: null, factura: (this.factura.factura || 0), articulo: null, cantidad: 1, precio_unitario: null, total: null\r\n    };\r\n    this.txtArticuloSelected = undefined;\r\n  }\r\n\r\n  loadDetalleFactura = (idfactura: number = +this.factura.factura) => {\r\n    this.facturaSrvc.getDetalle(idfactura, { factura: idfactura }).subscribe(res => {\r\n      // console.log(res);\r\n      if (res) {\r\n        this.detallesFactura = res;\r\n        this.updateTableDataSource();\r\n      }\r\n    });\r\n  }\r\n\r\n  getDetalleFactura = (idfactura: number = +this.factura.factura, iddetalle: number) => {\r\n    this.facturaSrvc.getDetalle(idfactura, { detalle_factura: iddetalle }).subscribe((res: any[]) => {\r\n      // console.log(res);\r\n      if (res) {\r\n        this.detalleFactura = {\r\n          detalle_factura: res[0].detalle_factura,\r\n          factura: res[0].factura,\r\n          articulo: res[0].articulo.articulo,\r\n          cantidad: +res[0].cantidad,\r\n          precio_unitario: +res[0].precio_unitario,\r\n          total: +res[0].total\r\n        };\r\n        this.txtArticuloSelected = res[0].articulo;\r\n        this.showFormDetalle = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  onSubmitDetail = () => {\r\n    this.detalleFactura.factura = this.factura.factura;\r\n    this.detalleFactura.total = +this.detalleFactura.precio_unitario * +this.detalleFactura.cantidad;\r\n    // console.log(this.detalleFactura);\r\n    this.facturaSrvc.saveDetalle(this.detalleFactura).subscribe(res => {\r\n      // console.log(res);\r\n      if (res) {\r\n        this.loadDetalleFactura();\r\n        this.resetDetalleFactura();\r\n      }\r\n    });\r\n  }\r\n\r\n  updateTableDataSource = () => this.dataSource = new MatTableDataSource(this.detallesFactura);\r\n\r\n  representacionGrafica = () => {\r\n\r\n    this.facturaSrvc.getGrafo(this.factura.factura).subscribe(res => {\r\n      if (res.exito) {\r\n        switch (res.tipo) {\r\n          case 'link': this.openLinkWindow(res.documento); break;\r\n          case 'pdf': this.openPdfDocument(res.documento); break;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  openLinkWindow = (url: string) =>\r\n    window.open(url, 'winFactPdf', 'height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no')\r\n\r\n  openPdfDocument = (pdf: string) => {\r\n    const pdfWindow = window.open('', 'winFactPdf', 'height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no');\r\n    try {\r\n      pdfWindow.document.write(\r\n        '<iframe width=\"100%\" style=\"margin: -8px;border: none;\" height=\"100%\" src=\"data:application/pdf;base64, ' +\r\n        encodeURI(pdf) +\r\n        '\"></iframe>');\r\n    } catch(e) {\r\n      this.snackBar.open('No se pudo abrir la ventana emergente para ver la representación gráfica. Revise la configuración de su explorador, por favor.', 'PDF', { duration: 7000 });\r\n    }\r\n  }\r\n}\r\n","<mat-card class=\"mat-elevation-z4 fullWidth\">\n    <mat-card-title>\n        <h4 *ngIf=\"!!factura.fel_uuid_anulacion\" style=\"background-color: lightcoral;\">*** ANULADA ***</h4>\n        <h4>\n            Factura\n            {{!!factura.factura ? (!!factura.serie_factura ? (factura.serie_factura + ' ' + factura.numero_factura) : 'Pendiente de firmar.') : ''}}\n            <button mat-icon-button type=\"button\" color=\"accent\" (click)=\"showForm = true;\" *ngIf=\"!showForm\">\n                <mat-icon class=\"iconFontSize\">expand_more</mat-icon>\n            </button>\n            <button mat-icon-button type=\"button\" color=\"accent\" (click)=\"showForm = false;\" *ngIf=\"showForm\">\n                <mat-icon class=\"iconFontSize\">expand_less</mat-icon>\n            </button>\n        </h4>\n    </mat-card-title>\n    <mat-card-content>\n        <form #frmFactura=\"ngForm\" *ngIf=\"showForm\" (ngSubmit)=\"frmFactura.form.valid && onSubmit()\" novalidate>\n            <div class=\"form-group\">\n                <mat-form-field class=\"fullWidth\">\n                    <mat-label>Serie</mat-label>\n                    <mat-select name=\"factura_serie\" [(ngModel)]=\"factura.factura_serie\" required>\n                        <mat-option *ngFor=\"let fs of facturaSeries\" [value]=\"fs.factura_serie\">\n                            {{fs.serie}} ({{fs.tipo}})\n                        </mat-option>\n                    </mat-select>\n                </mat-form-field>\n            </div>\n            <div class=\"form-group\">\n                <mat-form-field class=\"fullWidth\">                \n                    <mat-label>Cliente</mat-label>\n                    <input type=\"text\" [(ngModel)]=\"clienteSelected\" [ngModelOptions]=\"{standalone: true}\" placeholder=\"Cliente\" matInput [matAutocomplete]=\"auto\" (keyup)=\"filtrar(clienteSelected)\" required>\n                    <mat-autocomplete #auto=\"matAutocomplete\" [displayWith]=\"displayCliente\">\n                        <mat-option *ngFor=\"let cli of filteredClientes\" [value]=\"cli\">\n                            {{cli.nombre}} ({{cli.nit}})\n                        </mat-option>\n                    </mat-autocomplete>                    \n                    <!--<mat-select name=\"cliente\" [(ngModel)]=\"factura.cliente\" required>\n                        <mat-option *ngFor=\"let cli of clientes\" [value]=\"cli.cliente\">\n                            {{cli.nombre}} ({{cli.nit}})\n                        </mat-option>\n                    </mat-select>-->\n                </mat-form-field>                \n            </div>\n            <div class=\"form-group\">\n                <mat-form-field class=\"fullWidth\">\n                    <input matInput type=\"date\" placeholder=\"Fecha\" name=\"fecha_factura\"\n                        [(ngModel)]=\"factura.fecha_factura\" required>\n                </mat-form-field>\n            </div>\n            <div class=\"form-group\">\n                <mat-form-field class=\"fullWidth\">\n                    <mat-label>Moneda</mat-label>\n                    <mat-select name=\"moneda\" [(ngModel)]=\"factura.moneda\" required>\n                        <mat-option *ngFor=\"let mon of monedas\" [value]=\"mon.moneda\">\n                            {{mon.nombre}} ({{mon.simbolo}})\n                        </mat-option>\n                    </mat-select>\n                </mat-form-field>\n            </div>\n            <div class=\"form-group\">\n                <mat-checkbox name=\"exenta\" class=\"fullWidth\" [(ngModel)]=\"+factura.exenta\">Exenta</mat-checkbox>\n            </div>\n            <div class=\"form-group\">\n                <mat-form-field class=\"fullWidth\">\n                    <input matInput *ngIf=\"!esMovil\" [matKeyboard]=\"keyboardLayout\" type=\"text\" placeholder=\"Notas\" name=\"notas\" [(ngModel)]=\"factura.notas\">\n                    <input matInput *ngIf=\"esMovil\" type=\"text\" placeholder=\"Notas\" name=\"notas\" [(ngModel)]=\"factura.notas\">\n                </mat-form-field>                \n            </div>\n            <div align=\"end\">\n                <button mat-raised-button type=\"submit\" color=\"accent\" class=\"btnAccion\"\n                    [disabled]=\"!frmFactura.form.valid || !!factura.fel_uuid || !!factura.fel_uuid_anulacion || !factura.cliente\">\n                    Guardar\n                </button>\n                <button mat-raised-button type=\"button\" color=\"accent\" class=\"btnAccion\"\n                    [disabled]=\"!frmFactura.form.valid || !!factura.fel_uuid || !!factura.fel_uuid_anulacion || detallesFactura.length === 0 || refacturacion\"\n                    (click)=\"firmarFactura()\">\n                    Firmar\n                </button>\n                <button mat-raised-button type=\"button\" color=\"accent\" class=\"btnAccion\"\n                    [disabled]=\"!frmFactura.form.valid || factura.fel_uuid == undefined || factura.fel_uuid == null || !!factura.fel_uuid_anulacion || detallesFactura.length === 0 || refacturacion\"\n                    (click)=\"imprimirFactura()\">\n                    Imprimir\n                </button>\n                <button mat-raised-button type=\"button\" color=\"accent\" class=\"btnAccion\"\n                    [disabled]=\"!frmFactura.form.valid || factura.fel_uuid == undefined || factura.fel_uuid == null || detallesFactura.length === 0 || refacturacion\"\n                    (click)=\"representacionGrafica()\">\n                    PDF\n                </button>\n                <button mat-raised-button type=\"button\" color=\"accent\" class=\"btnAccion\"\n                    [disabled]=\"!frmFactura.form.valid || factura.fel_uuid == undefined || factura.fel_uuid == null || !!factura.fel_uuid_anulacion || detallesFactura.length === 0\"\n                    (click)=\"anularFactura()\">\n                    Anular\n                </button>\n                <button mat-raised-button type=\"button\" color=\"accent\" class=\"btnAccion\"\n                    *ngIf=\"!!factura.fel_uuid_anulacion\" (click)=\"refacturar()\">\n                    Refacturar\n                </button>\n                <button mat-raised-button type=\"button\" color=\"accent\" (click)=\"resetFactura()\" *ngIf=\"factura.factura\">\n                    Nueva\n                </button>\n\n            </div>\n        </form>\n    </mat-card-content>\n</mat-card>\n<hr *ngIf=\"factura.factura\" />\n<mat-card class=\"mat-elevation-z4 fullWidth\" *ngIf=\"factura.factura\">\n    <mat-card-title>\n        <h4>\n            Detalle de factura No.\n            {{(!!factura.serie_factura ? (factura.serie_factura + ' ' + factura.numero_factura) : 'Pendiente de firmar.')}}\n            <button mat-icon-button type=\"button\" color=\"accent\" (click)=\"showFormDetalle = true;\"\n                *ngIf=\"!showFormDetalle\">\n                <mat-icon class=\"iconFontSize\">expand_more</mat-icon>\n            </button>\n            <button mat-icon-button type=\"button\" color=\"accent\" (click)=\"showFormDetalle = false;\"\n                *ngIf=\"showFormDetalle\">\n                <mat-icon class=\"iconFontSize\">expand_less</mat-icon>\n            </button>\n        </h4>\n    </mat-card-title>\n    <mat-card-content>\n        <form #frmDetalleFactura=\"ngForm\" *ngIf=\"showFormDetalle\"\n            (ngSubmit)=\"frmDetalleFactura.form.valid && onSubmitDetail()\" novalidate>\n            <div class=\"form-group\">\n                <mat-form-field class=\"fullWidth\">\n                    <mat-label>Artículo</mat-label>                    \n                    <input type=\"text\" [(ngModel)]=\"txtArticuloSelected\" [ngModelOptions]=\"{standalone: true}\" placeholder=\"Artículo\" matInput [matAutocomplete]=\"autoArticulos\" (keyup)=\"filtrarArticulos(txtArticuloSelected)\" required>\n                    <mat-autocomplete #autoArticulos=\"matAutocomplete\" [displayWith]=\"displayArticulo\" (optionSelected)=\"setPrecioUnitario($event)\">\n                        <mat-option *ngFor=\"let a of filteredArticulos\" [value]=\"a\">\n                            {{a.descripcion}}\n                        </mat-option>\n                    </mat-autocomplete>\n                </mat-form-field>\n            </div>\n            <div class=\"form-group\">\n                <mat-form-field class=\"fullWidth\">\n                    <input matInput placeholder=\"Cantidad\" name=\"cantidad\" type=\"number\" step=\"0.01\" [(ngModel)]=\"detalleFactura.cantidad\"\n                        (change)=\"detalleFactura.total = +detalleFactura.precio_unitario * +detalleFactura.cantidad\"\n                        required>\n                </mat-form-field>                \n            </div>\n            <div class=\"form-group\">\n                <mat-form-field class=\"fullWidth\">\n                    <input matInput placeholder=\"Precio unitario\" name=\"precio_unitario\" type=\"number\" step=\"0.01\"\n                        [(ngModel)]=\"detalleFactura.precio_unitario\"\n                        (change)=\"detalleFactura.total = +detalleFactura.precio_unitario * +detalleFactura.cantidad\"\n                        required>\n                </mat-form-field>                \n            </div>\n            <div align=\"end\">\n                <button mat-raised-button type=\"submit\" color=\"accent\" class=\"btnAccion\"\n                    [disabled]=\"!frmDetalleFactura.form.valid || !!factura.fel_uuid || !!factura.fel_uuid_anulacion\">\n                    Guardar\n                </button>\n                <button mat-raised-button type=\"button\" color=\"accent\" (click)=\"resetDetalleFactura()\"\n                    *ngIf=\"detalleFactura.detalle_factura\">\n                    Nuevo\n                </button>\n            </div>\n        </form>\n        <hr *ngIf=\"detallesFactura.length > 0\" />\n        <table mat-table [dataSource]=\"dataSource\" class=\"mat-elevation-z4 full-width\"\n            *ngIf=\"detallesFactura.length > 0\">\n            <ng-container matColumnDef=\"articulo\">\n                <th mat-header-cell *matHeaderCellDef>Artículo</th>\n                <td mat-cell *matCellDef=\"let element\" class=\"text-wrap\">{{element.articulo.descripcion}}</td>\n            </ng-container>\n            <ng-container matColumnDef=\"cantidad\">\n                <th mat-header-cell *matHeaderCellDef class=\"text-right\">Cantidad</th>\n                <td mat-cell *matCellDef=\"let element\" class=\"text-right\">{{element.cantidad | number:'1.2-2'}}</td>\n            </ng-container>\n            <ng-container matColumnDef=\"precio_unitario\">\n                <th mat-header-cell *matHeaderCellDef class=\"text-right\">Precio Unitario</th>\n                <td mat-cell *matCellDef=\"let element\" class=\"text-right\">{{element.precio_unitario | number:'1.2-2'}}\n                </td>\n            </ng-container>\n            <ng-container matColumnDef=\"total\">\n                <th mat-header-cell *matHeaderCellDef class=\"text-right\">Total</th>\n                <td mat-cell *matCellDef=\"let element\" class=\"text-right\">{{element.total | number:'1.2-2'}}</td>\n            </ng-container>\n            <ng-container matColumnDef=\"editItem\">\n                <th mat-header-cell *matHeaderCellDef>&nbsp;</th>\n                <td mat-cell *matCellDef=\"let element\" class=\"text-wrap\">\n                    <button mat-raised-button type=\"button\" color=\"accent\"\n                        (click)=\"getDetalleFactura(element.factura, element.detalle_factura)\"\n                        [disabled]=\"!!factura.fel_uuid || !!factura.fel_uuid_anulacion || refacturacion\">\n                        Editar\n                    </button>\n                </td>\n            </ng-container>\n            <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\n            <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\">\n            </tr>\n        </table>\n    </mat-card-content>\n</mat-card>","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { GLOBAL } from '../../shared/global';\nimport { ServiceErrorHandler } from '../../shared/error-handler';\nimport { Cobro } from '../interfaces/cobro';\nimport { Observable } from 'rxjs';\nimport { retry, catchError } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CobroService {\n\n  private srvcErrHndl: ServiceErrorHandler;\n  private moduleUrl = 'cuenta';\n\n  constructor(\n    private http: HttpClient\n  ) {\n    this.srvcErrHndl = new ServiceErrorHandler();\n  }\n\n  save(entidad: Cobro): Observable<any> {\n    return this.http.post<any>(\n      `${GLOBAL.urlAppRestaurante}/${this.moduleUrl}/cobrar/${entidad.cuenta}`,\n      entidad\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n}\n","import { Component, OnInit, Inject, Input, OnDestroy } from '@angular/core';\r\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { MatSelectChange } from '@angular/material/select';\r\nimport { GLOBAL } from '../../../shared/global';\r\nimport { LocalstorageService } from '../../../admin/services/localstorage.service';\r\nimport * as moment from 'moment';\r\nimport { ConfirmDialogModel, ConfirmDialogComponent } from '../../../shared/components/confirm-dialog/confirm-dialog.component';\r\nimport { ConfigCheckPasswordModel, CheckPasswordComponent } from '../../../shared/components/check-password/check-password.component';\r\nimport { Socket } from 'ngx-socket-io';\r\n\r\nimport { FormaPago } from '../../interfaces/forma-pago';\r\nimport { Cobro } from '../../interfaces/cobro';\r\nimport { FormaPagoService } from '../../services/forma-pago.service';\r\nimport { CobroService } from '../../services/cobro.service';\r\nimport { Cliente } from '../../../admin/interfaces/cliente';\r\nimport { FacturaRequest } from '../../interfaces/factura';\r\nimport { FacturaService } from '../../services/factura.service';\r\nimport { Sede } from '../../../admin/interfaces/sede';\r\nimport { SedeService } from '../../../admin/services/sede.service';\r\nimport { ComandaService } from '../../../restaurante/services/comanda.service';\r\nimport { ConfiguracionService } from '../../../admin/services/configuracion.service';\r\nimport { Base64 } from 'js-base64';\r\nimport { Subscription } from 'rxjs';\r\n\r\ninterface DatosPedido {\r\n  sede: number;\r\n  direccion_entrega: string;\r\n  telefono: string;\r\n  nombre: string;\r\n  cliente?: any;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-cobrar-pedido',\r\n  templateUrl: './cobrar-pedido.component.html',\r\n  styleUrls: ['./cobrar-pedido.component.css']\r\n})\r\nexport class CobrarPedidoComponent implements OnInit, OnDestroy {\r\n\r\n  @Input() inputData: any = {};\r\n  public lstFormasPago: FormaPago[] = [];\r\n  public formaPago: any = {};\r\n  public formasPagoDeCuenta: any[] = [];\r\n  public factReq: FacturaRequest;\r\n  public clienteSelected: Cliente;\r\n  public esMovil = false;\r\n  public keyboardLayout: string;\r\n  public facturando = false;\r\n  public cargandoConf: any = { w: 75, h: 75 };\r\n  public pideDocumento = false;\r\n  public sedes: Sede[] = [];\r\n  public sede: Sede;\r\n  public datosPedido: DatosPedido = { sede: null, direccion_entrega: null, telefono: null, nombre: null, cliente: null };\r\n\r\n  private endSubs = new Subscription();\r\n\r\n  constructor(\r\n    public dialog: MatDialog,\r\n    public dialogRef: MatDialogRef<CobrarPedidoComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    private snackBar: MatSnackBar,\r\n    public formaPagoSrvc: FormaPagoService,\r\n    public cobroSrvc: CobroService,\r\n    public facturaSrvc: FacturaService,\r\n    private ls: LocalstorageService,\r\n    private socket: Socket,\r\n    private sedeSrvc: SedeService,\r\n    private comandaSrvc: ComandaService,\r\n    private configSrvc: ConfiguracionService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.esMovil = this.ls.get(GLOBAL.usrTokenVar).enmovil || false;\r\n    this.keyboardLayout = GLOBAL.IDIOMA_TECLADO;\r\n    this.resetFactReq();\r\n    this.processData();\r\n    this.loadFormasPago();\r\n    if (!!this.ls.get(GLOBAL.usrTokenVar).sede_uuid) {\r\n      this.socket.emit('joinRestaurant', this.ls.get(GLOBAL.usrTokenVar).sede_uuid);\r\n      this.socket.on('reconnect', () => this.socket.emit('joinRestaurant', this.ls.get(GLOBAL.usrTokenVar).sede_uuid));\r\n    }\r\n    this.loadSedes();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.endSubs.unsubscribe();\r\n  }\r\n\r\n  resetFactReq = () => {\r\n    this.factReq = { cuentas: [], factura_serie: 1, cliente: null, fecha_factura: moment().format(GLOBAL.dbDateFormat), moneda: 1 };\r\n  }\r\n\r\n  processData = () => {\r\n    if (this.data) {\r\n      this.inputData = this.data;\r\n    } else {\r\n      this.data = this.inputData;\r\n    }\r\n\r\n    // console.log('MESA = ', this.data.mesaenuso);\r\n\r\n    this.inputData.totalDeCuenta = 0.00;\r\n    this.inputData.productosACobrar.forEach((item: any) => {\r\n      this.inputData.totalDeCuenta += (item.precio * item.cantidad) + (item.monto_extra);\r\n    });\r\n\r\n    this.calculaPropina();\r\n    this.actualizaSaldo();\r\n    this.formaPago.monto = parseFloat(this.inputData.saldo).toFixed(2);\r\n    // console.log('INPUT DATA = ', this.inputData);\r\n    if (this.inputData.clientePedido) {\r\n      this.setClienteFacturar(this.inputData.clientePedido);\r\n    }\r\n  }\r\n\r\n  loadSedes = () => {\r\n    this.endSubs.add(      \r\n      this.sedeSrvc.get().subscribe(res => {\r\n        if (res) {\r\n          this.sedes = res;\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  calculaPropina = () => {\r\n    this.inputData.montoPropina = parseFloat((this.inputData.porcentajePropina * this.inputData.totalDeCuenta / 100).toFixed(2));\r\n    this.actualizaSaldo();\r\n  }\r\n\r\n  calculaPorcentajePropina() {\r\n    this.inputData.porcentajePropina = parseFloat((this.inputData.montoPropina * 100 / this.inputData.totalDeCuenta).toFixed(2));\r\n    this.actualizaSaldo();\r\n  }\r\n\r\n  loadFormasPago = () => {\r\n    this.endSubs.add(      \r\n      this.formaPagoSrvc.get({ activo: 1 }).subscribe((res: any) => {\r\n        if (!!res && res.length > 0) {\r\n          this.lstFormasPago = res;\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  addFormaPago = () => {\r\n    const fp = this.lstFormasPago.filter(f => +f.forma_pago === +this.formaPago.forma_pago)[0];\r\n    if (+fp.pedirautorizacion === 1) {\r\n      const vpgtRef = this.dialog.open(CheckPasswordComponent, {\r\n        width: '40%',\r\n        disableClose: true,\r\n        data: new ConfigCheckPasswordModel(1)\r\n      });\r\n\r\n      this.endSubs.add(        \r\n        vpgtRef.afterClosed().subscribe(res => {\r\n          if (res) {\r\n            this.agregaFormaPago(fp);\r\n          } else {\r\n            this.snackBar.open('La contraseña no es correcta', 'Formas de pago', { duration: 5000 });\r\n          }\r\n        })\r\n      );\r\n    } else {\r\n      this.agregaFormaPago(fp);\r\n    }\r\n  }\r\n\r\n  agregaFormaPago = (fp: FormaPago) => {\r\n    this.formasPagoDeCuenta.push({\r\n      forma_pago: fp,\r\n      monto: parseFloat(this.formaPago.monto).toFixed(2),\r\n      propina: (this.formaPago.propina || 0.00),\r\n      documento: (this.formaPago.documento || null),\r\n      comision_monto: +this.formaPago.monto * +fp.comision_porcentaje / 100\r\n    });\r\n    this.actualizaSaldo();\r\n    this.pideDocumento = false;\r\n  }\r\n\r\n  delFormaPago = (idx: number) => {\r\n    this.formasPagoDeCuenta.splice(idx, 1);\r\n    this.actualizaSaldo();\r\n  }\r\n\r\n  actualizaSaldo = () => {\r\n    let sumFormasPago = 0.00;\r\n    this.formasPagoDeCuenta.forEach(fp => sumFormasPago += +fp.monto);\r\n    // this.inputData.saldo = this.inputData.totalDeCuenta + this.inputData.montoPropina - sumFormasPago;\r\n    this.inputData.saldo = (+this.inputData.totalDeCuenta - sumFormasPago).toFixed(2);\r\n    this.formaPago = { monto: this.inputData.saldo };\r\n  }\r\n\r\n  cancelar = () => this.dialogRef.close();\r\n\r\n  setClienteFacturar = (obj: Cliente) => {\r\n    this.clienteSelected = obj;\r\n    this.factReq.cliente = +obj.cliente;\r\n    if (+this.data.mesaenuso.mesa.escallcenter === 1) {\r\n      this.datosPedido.nombre = obj.nombre;\r\n      this.datosPedido.direccion_entrega = obj.direccion;\r\n      this.datosPedido.telefono = obj.telefono;\r\n    }\r\n  }\r\n\r\n  cobrar = () => {\r\n    this.facturando = true;\r\n    const objCobro: Cobro = {\r\n      cuenta: this.inputData.idcuenta,\r\n      forma_pago: [],\r\n      total: this.inputData.totalDeCuenta + this.inputData.montoPropina,\r\n      propina_monto: this.inputData.montoPropina,\r\n      propina_porcentaje: this.inputData.porcentajePropina,\r\n      comision_monto: 0.00\r\n    };\r\n\r\n    let sumaMontoComision = 0.00;\r\n\r\n    for (const fp of this.formasPagoDeCuenta) {\r\n      sumaMontoComision += (fp.comision_monto || 0);\r\n      objCobro.forma_pago.push({\r\n        forma_pago: +fp.forma_pago.forma_pago,\r\n        monto: +fp.monto + +fp.comision_monto,\r\n        propina: (fp.propina || 0.00),\r\n        documento: fp.documento,\r\n        comision_monto: fp.comision_monto\r\n      });\r\n    }\r\n    objCobro.comision_monto = sumaMontoComision;\r\n    objCobro.total += sumaMontoComision;\r\n\r\n    if (+this.data.mesaenuso.mesa.escallcenter === 1) {\r\n      this.enviarPedido(objCobro);\r\n      return;\r\n    }\r\n\r\n    this.factReq.cuentas.push({ cuenta: +this.inputData.idcuenta });\r\n    this.endSubs.add(      \r\n      this.cobroSrvc.save(objCobro).subscribe(res => {\r\n        if (res.exito && !res.facturada) {\r\n          this.snackBar.open('Cobro', `${res.mensaje}`, { duration: 3000 });\r\n          if (res.facturar) {\r\n            this.endSubs.add(\r\n              this.facturaSrvc.facturar(this.factReq).subscribe(resFact => {\r\n                // console.log('RESPUESTA DE FACTURAR = ', resFact);\r\n                if (resFact.exito) {\r\n                  const confirmRef = this.dialog.open(ConfirmDialogComponent, {\r\n                    maxWidth: '400px',\r\n                    data: new ConfirmDialogModel('Imprimir factura', '¿Desea imprimir la factura?', 'Sí', 'No')\r\n                  });\r\n    \r\n                  this.endSubs.add(                \r\n                    confirmRef.afterClosed().subscribe((confirma: boolean) => {\r\n                      if (confirma) {\r\n                        this.printFactura(resFact.factura);\r\n                      }\r\n                      this.resetFactReq();\r\n                      this.snackBar.open('Factura', `${resFact.mensaje}`, { duration: 3000 });\r\n                      this.facturando = false;\r\n                      this.dialogRef.close(res.cuenta);\r\n                      this.socket.emit('refrescar:mesa', { mesaenuso: this.data.mesaenuso });\r\n                    })\r\n                  );\r\n                } else {\r\n                  this.facturando = false;\r\n                  this.snackBar.open('Factura', `ERROR: ${res.mensaje}`, { duration: 7000 });\r\n                  this.socket.emit('refrescar:mesa', { mesaenuso: this.data.mesaenuso });\r\n                  this.dialogRef.close(res.cuenta);\r\n                }\r\n              })\r\n            );\r\n          } else {\r\n            this.socket.emit('refrescar:mesa', { mesaenuso: this.data.mesaenuso });\r\n            this.dialogRef.close(res.cuenta);\r\n          }\r\n        } else {\r\n          this.facturando = false;\r\n          this.snackBar.open('Cobro', `ERROR: ${res.mensaje}`, { duration: 7000 });\r\n          this.socket.emit('refrescar:mesa', { mesaenuso: this.data.mesaenuso });\r\n          this.dialogRef.close('closePanel');\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  enviarPedido = (cobro: Cobro) => {\r\n\r\n    this.datosPedido.cliente = {\r\n      nombre: this.clienteSelected.nombre,\r\n      apellidos: '',\r\n      correo: this.clienteSelected.correo,\r\n      telefono: this.datosPedido.telefono,\r\n      nit: this.clienteSelected.nit,\r\n      direccion: this.datosPedido.direccion_entrega\r\n    };\r\n\r\n    const obj = {\r\n      cobro,\r\n      pedido: this.datosPedido,\r\n      factura: {\r\n        cuentas: [\r\n          {\r\n            cuenta: cobro.cuenta\r\n          }\r\n        ],\r\n        factura_serie: 1,\r\n        cliente: this.clienteSelected.cliente,\r\n        fecha_factura: moment().format(GLOBAL.dbDateFormat),\r\n        moneda: 1\r\n      }\r\n    };\r\n\r\n    // console.log('PEDIDO = ', obj);\r\n    this.endSubs.add(      \r\n      this.comandaSrvc.enviarPedido(+this.data.mesaenuso.comanda, obj).subscribe(res => {\r\n        if (res.exito) {\r\n          this.snackBar.open('Pedido', `#${res.pedido}. ${res.mensaje}`, { duration: 3000 });\r\n          this.dialogRef.close('closePanel');\r\n        } else {\r\n          this.snackBar.open('Pedido', `ERROR: ${res.mensaje}`, { duration: 7000 });\r\n        }\r\n        this.facturando = false;\r\n        this.socket.emit('refrescar:mesa', { mesaenuso: this.data.mesaenuso });\r\n      })\r\n    );\r\n  }\r\n\r\n  procesaDetalleFactura = (detalle: any[]) => {\r\n    const detFact: any[] = [];\r\n    detalle.forEach(d => detFact.push({\r\n      Cantidad: parseInt(d.cantidad),\r\n      Descripcion: d.articulo.descripcion,\r\n      Total: +d.total,\r\n      PrecioUnitario: +d.precio_unitario\r\n    }));\r\n    return detFact;\r\n  }\r\n\r\n  getTotalDetalle = (detalle: any[]): number => {\r\n    let suma = 0.00;\r\n    detalle.forEach(d => suma += +d.total);\r\n    return suma;\r\n  }\r\n\r\n  getTotalImpuestosAdicionales = (impuestos: any[]) => {\r\n    let suma = 0.00;\r\n    impuestos.forEach(i => suma += +i.total);\r\n    return suma;\r\n  }\r\n\r\n  printFactura = (factura: any) => {\r\n    // console.log('FACTURA = ', factura);\r\n    this.endSubs.add(      \r\n      this.facturaSrvc.imprimir(+factura.factura).subscribe(res => {\r\n        if (res.factura) {\r\n  \r\n          const msgToPrint = {\r\n            NombreEmpresa: res.factura.empresa.nombre,\r\n            NitEmpresa: res.factura.empresa.nit,\r\n            SedeEmpresa: res.factura.sedeFactura.nombre,\r\n            DireccionEmpresa: res.factura.empresa.direccion,\r\n            Fecha: moment(res.factura.fecha_factura).format(GLOBAL.dateFormat),\r\n            Nit: res.factura.receptor.nit,\r\n            Nombre: res.factura.receptor.nombre,\r\n            Direccion: res.factura.receptor.direccion,\r\n            Serie: res.factura.serie_factura,\r\n            Numero: res.factura.numero_factura,\r\n            Total: this.getTotalDetalle(res.factura.detalle) + this.getTotalImpuestosAdicionales((res.factura.impuestos_adicionales || [])),\r\n            NoAutorizacion: res.factura.fel_uuid,\r\n            NombreCertificador: res.factura.certificador_fel.nombre,\r\n            NitCertificador: res.factura.certificador_fel.nit,\r\n            FechaDeAutorizacion: res.factura.fecha_autorizacion,\r\n            NoOrdenEnLinea: '',\r\n            FormaDePago: '',\r\n            DetalleFactura: this.procesaDetalleFactura(res.factura.detalle),\r\n            Impresora: this.data.impresora,\r\n            ImpuestosAdicionales: (res.factura.impuestos_adicionales || [])\r\n          };\r\n  \r\n          if (!!this.data.impresora) {\r\n            if (+this.data.impresora.bluetooth === 0) {\r\n              this.socket.emit(`print:factura`, `${JSON.stringify(msgToPrint)}`);\r\n            } else {\r\n              msgToPrint.Fecha = moment(res.factura.fecha_factura).format(GLOBAL.dateFormatBT);\r\n              this.printToBT(JSON.stringify(msgToPrint));\r\n            }\r\n          } else {\r\n            this.socket.emit(`print:factura`, `${JSON.stringify(msgToPrint)}`);\r\n          }\r\n  \r\n          this.snackBar.open(\r\n            `Imprimiendo factura ${res.factura.serie_factura}-${res.factura.numero_factura}`,\r\n            'Impresión', { duration: 3000 }\r\n          );\r\n        } else {\r\n          this.snackBar.open(`ERROR: ${res.mensaje}`, 'Impresión', { duration: 7000 });\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n  printToBT = (msgToPrint: string = '') => {\r\n    const convertir = this.configSrvc.getConfig(GLOBAL.CONSTANTES.RT_ENVIA_COMO_BASE64);    \r\n    const data = convertir ? Base64.encode(msgToPrint, true) : msgToPrint;\r\n    // const AppHref = `${GLOBAL.DEEP_LINK_ANDROID}${data}`;\r\n    const AppHref = GLOBAL.DEEP_LINK_ANDROID.replace('__INFOBASE64__', data);\r\n    try {\r\n      window.location.href = AppHref; \r\n    } catch(error) {\r\n      this.snackBar.open('No se pudo conectar con la aplicación de impresión', 'Comanda', { duration: 3000 });\r\n    }\r\n  }\r\n\r\n  onSelectionChangeFP = (msc: MatSelectChange) => {\r\n    const idx = this.lstFormasPago.findIndex(lfp => +lfp.forma_pago === +msc.value);\r\n    if (idx > -1) {\r\n      this.pideDocumento = +this.lstFormasPago[idx].pedirdocumento === 1;\r\n    }\r\n  }\r\n\r\n\r\n}\r\n","<h1 mat-dialog-title>\n  Cobrar cuenta de {{data.cuenta}}\n  <small *ngIf=\"clienteSelected && !!clienteSelected.cliente\">\n    - Factura a nombre de {{clienteSelected.nombre}}\n  </small>\n</h1>\n<div mat-dialog-content style=\"height: 650px;\">\n  <div class=\"row\">\n    <div class=\"col m5 s12 mat-elevation-z4 colHeight\" style=\"overflow-y: auto;\">\n      <app-lista-cliente #lstClientes (getClienteEv)=\"setClienteFacturar($event)\" [showAddButton]=\"true\">\n      </app-lista-cliente>\n    </div>\n    <div class=\"col m3 s12 mat-elevation-z4 colHeight\" style=\"overflow-y: auto;\">\n      <table class=\"table table-sm table-borderless table-striped\">\n        <tbody>\n          <tr *ngFor=\"let p of inputData.productosACobrar; let i = index;\">\n            <td>{{p.cantidad}}&nbsp;{{p.nombre || p.articulo.descripcion}}</td>\n            <td class=\"text-right\">{{((p.cantidad * p.precio) + (p.monto_extra)) | number: '1.2-2'}}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class=\"col m4 s12 mat-elevation-z4 colHeight\" style=\"overflow-y: auto;\">\n      <form #frmFormasPago=\"ngForm\" novalidate>\n        <mat-form-field class=\"fullWidth\">\n          <mat-label>Forma de pago</mat-label>\n          <mat-select name=\"forma_pago\" [(ngModel)]=\"formaPago.forma_pago\" cdkFocusInitial\n            (selectionChange)=\"onSelectionChangeFP($event)\" required>\n            <mat-option *ngFor=\"let fp of lstFormasPago\" [value]=\"fp.forma_pago\">\n              {{fp.descripcion}}\n            </mat-option>\n          </mat-select>\n        </mat-form-field>\n        <!--Inicia input de monto por forma de pago-->\n        <mat-form-field class=\"fullWidth\">\n          <input matInput *ngIf=\"!esMovil\" [matKeyboard]=\"keyboardLayout\" placeholder=\"monto\" name=\"monto\" [(ngModel)]=\"formaPago.monto\" required>\n          <input matInput *ngIf=\"esMovil\" placeholder=\"monto\" name=\"monto\" [(ngModel)]=\"formaPago.monto\" required>\n        </mat-form-field>\n        <!--Fin de input de monto por forma de pago-->\n        <!--Inicia input de propina por forma de pago-->\n        <mat-form-field class=\"fullWidth\">\n          <input matInput *ngIf=\"!esMovil\" [matKeyboard]=\"keyboardLayout\" placeholder=\"Propina\" name=\"propina\" [(ngModel)]=\"formaPago.propina\">\n          <input matInput *ngIf=\"esMovil\" placeholder=\"Propina\" name=\"propina\" [(ngModel)]=\"formaPago.propina\">\n        </mat-form-field>\n        <!--Fin de input de propina por forma de pago-->\n        <!-- Inicia input de documento -->\n        <mat-form-field class=\"fullWidth\" *ngIf=\"pideDocumento\">\n          <input matInput *ngIf=\"!esMovil\" [matKeyboard]=\"keyboardLayout\" placeholder=\"Documento\" name=\"documento\" [(ngModel)]=\"formaPago.documento\" [required]=\"pideDocumento\">\n          <input matInput *ngIf=\"esMovil\" placeholder=\"Documento\" name=\"documento\" [(ngModel)]=\"formaPago.documento\" [required]=\"pideDocumento\">\n        </mat-form-field>\n        <!-- Fin de input de documento -->\n        <div align=\"end\">\n          <button mat-raised-button type=\"button\" color=\"accent\" (click)=\"addFormaPago()\"\n            [disabled]=\"!frmFormasPago.form.valid || inputData.saldo <= 0\">\n            Agregar\n          </button>\n        </div>\n      </form>\n      <hr />\n      <table class=\"table table-sm\">\n        <thead>\n          <tr>\n            <th class=\"text-left\">FP</th>\n            <th class=\"text-right\">Mon</th>\n            <th class=\"text-right\">Prop</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let fpCta of formasPagoDeCuenta; let i = index\">\n            <td>{{fpCta.forma_pago.descripcion}}</td>\n            <td class=\"text-right\">{{fpCta.monto | number:'1.2-2'}}</td>\n            <td class=\"text-right\">{{fpCta.propina | number:'1.2-2'}}</td>\n            <td class=\"text-center\">\n              <button mat-icon-button type=\"button\" color=\"warn\" (click)=\"delFormaPago(i)\">\n                <mat-icon>delete_forever</mat-icon>\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col m8 s8\">\n      <table class=\"table table-sm table-borderless\" *ngIf=\"+data.mesaenuso.mesa.escallcenter === 1\">\n        <caption>\n          <strong>Datos de envío</strong>\n        </caption>\n        <tbody>\n          <tr>\n            <!--<td class=\"text-right font-weight-bold\">Atiende:</td>-->\n            <td>\n              <mat-form-field class=\"fullWidth\">\n                <mat-label>Atiende:</mat-label>\n                <mat-select name=\"sede\" [(ngModel)]=\"datosPedido.sede\" required>\n                  <mat-option *ngFor=\"let s of sedes\" [value]=\"s.sede\">\n                    {{s.nombre}}\n                  </mat-option>\n                </mat-select>\n              </mat-form-field>\n            </td>\n            <!--<td class=\"text-right font-weight-bold\">Entrega:</td>-->\n            <td>\n              <mat-form-field class=\"fullWidth\">\n                <input matInput type=\"text\" placeholder=\"Dirección de entrega\" name=\"direccion_entrega\"\n                  [(ngModel)]=\"datosPedido.direccion_entrega\" maxlength=\"1000\" required>\n              </mat-form-field>\n            </td>\n          </tr>\n          <tr>\n            <!--<td class=\"text-right font-weight-bold\">Nombre:</td>-->\n            <td>\n              <mat-form-field class=\"fullWidth\">\n                <input matInput type=\"text\" placeholder=\"Nombre\" name=\"nombre\" [(ngModel)]=\"datosPedido.nombre\" maxlength=\"1000\">\n              </mat-form-field>\n            </td>\n            <!--<td class=\"text-right font-weight-bold\">Teléfono:</td>-->\n            <td>\n              <mat-form-field class=\"fullWidth\">\n                <input matInput type=\"text\" placeholder=\"Teléfono\" name=\"telefono\" [(ngModel)]=\"datosPedido.telefono\" maxlength=\"1000\">\n              </mat-form-field>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class=\"col m4 s4\">\n      <table class=\"table table-sm table-borderless\">\n        <tbody>\n          <tr>\n            <td class=\"text-right font-weight-bold\">TOTAL DE CUENTA:</td>\n            <td class=\"text-right font-weight-bold totalCuenta\" style=\"max-width: 15%;\">{{inputData.totalDeCuenta |\n              number:'1.2-2'}}</td>\n          </tr>\n          <tr>\n            <td class=\"text-right font-weight-bold\">PENDIENTE:</td>\n            <td class=\"text-right font-weight-bold\" style=\"max-width: 15%;\">\n              <span\n                [ngClass]=\"{'saldo-pendiente': +inputData.saldo > 0, 'saldo-exacto': +inputData.saldo == 0, 'saldo-extra': +inputData.saldo < 0 }\">{{inputData.saldo\n                | number:'1.2-2'}}</span>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n<div mat-dialog-actions align=\"end\">\n  <app-cargando *ngIf=\"facturando\" [configuracion]=\"cargandoConf\"></app-cargando>\n  <button mat-raised-button color=\"accent\" (click)=\"cancelar()\" [disabled]=\"facturando\">Cancelar</button>\n  <button mat-raised-button color=\"accent\" (click)=\"cobrar()\" *ngIf=\"+data.mesaenuso.mesa.escallcenter === 0\"\n    [disabled]=\"formasPagoDeCuenta.length == 0 || +inputData.saldo > 0 || !factReq.cliente || facturando\">Facturar</button>\n  <button mat-raised-button color=\"accent\" (click)=\"cobrar()\" *ngIf=\"+data.mesaenuso.mesa.escallcenter === 1\"\n    [disabled]=\"formasPagoDeCuenta.length == 0 || +inputData.saldo > 0 || !factReq.cliente || facturando || !this.datosPedido.sede\">\n    Enviar\n  </button>\n</div>","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { GLOBAL } from '../../../../shared/global';\nimport * as moment from 'moment';\nimport { ListaFacturaManualComponent } from '../lista-factura-manual/lista-factura-manual.component';\nimport { FormFacturaManualComponent } from '../form-factura-manual/form-factura-manual.component';\nimport { Factura } from '../../../interfaces/factura';\n\n@Component({\n  selector: 'app-factura-manual',\n  templateUrl: './factura-manual.component.html',\n  styleUrls: ['./factura-manual.component.css']\n})\nexport class FacturaManualComponent implements OnInit {\n\n  public factura: Factura;\n  @ViewChild('lstFacturaManual') lstFacturaComponent: ListaFacturaManualComponent;\n  @ViewChild('frmFacturaManual') frmFactura: FormFacturaManualComponent;\n\n  constructor( ) {\n    this.factura = {\n      factura: null, factura_serie: null, cliente: null, fecha_factura: moment().format(GLOBAL.dbDateFormat), moneda: null, exenta: 0,\n      notas: null\n    };\n  }\n\n  ngOnInit() {\n  }\n\n  setFactura = (fact: any) => { \n    this.factura = {\n      factura: fact.factura,\n      factura_serie: fact.factura_serie.factura_serie,\n      cliente: fact.cliente.cliente,\n      fecha_factura: fact.fecha_factura,\n      moneda: fact.moneda.moneda,\n      exenta: fact.exenta,\n      notas: fact.notas,\n      usuario: fact.usuario.usuario,\n      numero_factura: fact.numero_factura,\n      serie_factura: fact.serie_factura,\n      fel_uuid: fact.fel_uuid,\n      fel_uuid_anulacion: fact.fel_uuid_anulacion,\n      certificador_fel: fact.certificador_fel\n    };\n    this.frmFactura.clienteSelected = fact.cliente;\n    this.frmFactura.loadDetalleFactura(+this.factura.factura);\n    this.frmFactura.resetDetalleFactura();\n  }\n\n  refreshFacturaList = () => this.lstFacturaComponent.loadFacturas();\n\n}\n","<div class=\"row\">\n    <div class=\"col m5 s12\">\n        <app-lista-factura-manual #lstFacturaManual (getFacturaEv)=\"setFactura($event)\"></app-lista-factura-manual>\n    </div>\n    <div class=\"col m7 s12\">\n        <app-form-factura-manual #frmFacturaManual [factura]=\"factura\" (facturaSavedEv)=\"refreshFacturaList()\">\n        </app-form-factura-manual>\n    </div>\n</div>","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { LocalstorageService } from '../../../../admin/services/localstorage.service';\nimport { GLOBAL } from '../../../../shared/global';\n\nimport { FormaPago } from '../../../interfaces/forma-pago';\nimport { FormaPagoService } from '../../../services/forma-pago.service';\n\n@Component({\n  selector: 'app-form-forma-pago',\n  templateUrl: './form-forma-pago.component.html',\n  styleUrls: ['./form-forma-pago.component.css']\n})\nexport class FormFormaPagoComponent implements OnInit {\n\n  @Input() formaPago: FormaPago;\n  @Output() formaPagoSavedEv = new EventEmitter();\n  public keyboardLayout = GLOBAL.IDIOMA_TECLADO;\n  public esMovil = false;\n\n  constructor(\n    private snackBar: MatSnackBar,\n    private formaPagoSrvc: FormaPagoService,\n    private ls: LocalstorageService\n  ) { }\n\n  ngOnInit() {\n    this.esMovil = this.ls.get(GLOBAL.usrTokenVar).enmovil || false;\n  }\n\n  resetFormaPago = () => this.formaPago = { forma_pago: null, descripcion: null, activo: 1 };\n\n  onSubmit = () => {\n    this.formaPagoSrvc.save(this.formaPago).subscribe(res => {\n      // console.log(res);\n      if (res.exito) {\n        this.formaPagoSavedEv.emit();\n        this.resetFormaPago();\n        this.snackBar.open('Forma de pago agregada...', 'Forma de pago', { duration: 3000 });\n      }\n    });\n  }\n\n}\n","<mat-card class=\"mat-elevation-z4 fullWidth\">\n    <mat-card-title>\n        <h4>\n            Forma de pago {{!!formaPago.forma_pago ? formaPago.descripcion : ''}}\n        </h4>\n    </mat-card-title>\n    <mat-card-content>\n        <form #frmFormaPago=\"ngForm\" (ngSubmit)=\"frmFormaPago.form.valid && onSubmit()\" novalidate>\n            <div class=\"form-group\">\n                <mat-form-field class=\"fullWidth\">\n                    <input matInput *ngIf=\"!esMovil\" [matKeyboard]=\"keyboardLayout\" type=\"text\" placeholder=\"Descripción\" name=\"descripcion\" [(ngModel)]=\"formaPago.descripcion\" required>\n                    <input matInput *ngIf=\"esMovil\" type=\"text\" placeholder=\"Descripción\" name=\"descripcion\" [(ngModel)]=\"formaPago.descripcion\" required>                    \n                </mat-form-field>                \n            </div>\n            <div class=\"form-group\">\n                <mat-checkbox name=\"activo\" class=\"fullWidth\" [(ngModel)]=\"+formaPago.activo\">Activo</mat-checkbox>\n            </div>\n            <div align=\"end\">\n                <button mat-raised-button type=\"submit\" color=\"accent\" class=\"btnAccion\" [disabled]=\"!frmFormaPago.form.valid\">\n                    Guardar\n                </button>\n                <button mat-raised-button type=\"button\" color=\"accent\" (click)=\"resetFormaPago()\" *ngIf=\"formaPago.forma_pago\">\n                    Nueva\n                </button>\n            </div>\n        </form>\n    </mat-card-content>\n</mat-card>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { FormsModule } from '@angular/forms';\nimport { SharedModule } from '../shared/shared.module';\nimport { AdminModule } from '../admin/admin.module';\n\nimport { MatListModule } from '@angular/material/list';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatTableModule } from '@angular/material/table';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatGridListModule } from '@angular/material/grid-list';\nimport { MatPaginatorModule } from '@angular/material/paginator';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\n\nimport { MatKeyboardModule } from 'angular-onscreen-material-keyboard';\nimport { EcoFabSpeedDialModule } from '@ecodev/fab-speed-dial';\n\nimport { PosRoutingModule } from './pos-routing.module';\nimport { CobrarPedidoComponent } from './components/cobrar-pedido/cobrar-pedido.component';\nimport { FormaPagoComponent } from './components/formaPago/forma-pago/forma-pago.component';\nimport { ListaFormaPagoComponent } from './components/formaPago/lista-forma-pago/lista-forma-pago.component';\nimport { FormFormaPagoComponent } from './components/formaPago/form-forma-pago/form-forma-pago.component';\nimport { FacturaManualComponent } from './components/facturaManual/factura-manual/factura-manual.component';\nimport { ListaFacturaManualComponent } from './components/facturaManual/lista-factura-manual/lista-factura-manual.component';\nimport { FormFacturaManualComponent } from './components/facturaManual/form-factura-manual/form-factura-manual.component';\n\n\n@NgModule({\n  declarations: [\n    CobrarPedidoComponent, FormaPagoComponent, ListaFormaPagoComponent, FormFormaPagoComponent, FacturaManualComponent,\n    ListaFacturaManualComponent, FormFacturaManualComponent\n  ],\n  imports: [\n    CommonModule,\n    PosRoutingModule,\n    HttpClientModule,\n    FormsModule,\n    MatKeyboardModule,\n    SharedModule,\n    AdminModule,\n    MatListModule,\n    MatIconModule,\n    MatFormFieldModule,\n    MatInputModule,\n    MatCardModule,\n    MatDividerModule,\n    MatTabsModule,\n    MatTableModule,\n    MatSelectModule,\n    MatCheckboxModule,\n    MatButtonModule,\n    MatSnackBarModule,\n    MatToolbarModule,\n    MatMenuModule,\n    MatGridListModule,\n    MatPaginatorModule,\n    MatDialogModule,\n    MatSidenavModule,\n    MatAutocompleteModule,\n    EcoFabSpeedDialModule,\n  ],\n  exports: [CobrarPedidoComponent]\n})\nexport class PosModule { }\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { GLOBAL } from '../../shared/global';\nimport { ServiceErrorHandler } from '../../shared/error-handler';\nimport { FacturaSerie } from '../interfaces/factura-serie';\n// import { LocalstorageService } from '../../admin/services/localstorage.service';\nimport { Observable } from 'rxjs';\nimport { retry, catchError } from 'rxjs/operators';\nimport * as qs from 'qs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FacturaSerieService {\n\n  private srvcErrHndl: ServiceErrorHandler;\n  // private moduleUrl: string = 'turno';\n  // private usrToken: string = null;\n\n  constructor(\n    private http: HttpClient,\n    // private ls: LocalstorageService\n  ) {\n    this.srvcErrHndl = new ServiceErrorHandler();\n    // this.usrToken = this.ls.get(GLOBAL.usrTokenVar) ? this.ls.get(GLOBAL.usrTokenVar).token : null;\n  }\n\n  get(fltr: any = {}): Observable<FacturaSerie[]> {\n    /* const httpOptions = {\n      headers: new HttpHeaders({\n        'Authorization': this.usrToken\n      })\n    }; */\n    return this.http.get<FacturaSerie[]>(\n      `${GLOBAL.urlCatalogos}/get_factura_serie?${qs.stringify(fltr)}`\n      // , httpOptions\n    ).pipe(retry(GLOBAL.reintentos), catchError(this.srvcErrHndl.errorHandler));\n  }\n}\n","import { Component, OnInit, Output, EventEmitter } from '@angular/core';\nimport { PageEvent } from '@angular/material/paginator';\nimport { LocalstorageService } from '../../../../admin/services/localstorage.service';\nimport { GLOBAL, PaginarArray, MultiFiltro } from '../../../../shared/global';\n\nimport { Factura } from '../../../interfaces/factura';\nimport { FacturaService } from '../../../services/factura.service';\n\nimport * as moment from 'moment';\n\n@Component({\n  selector: 'app-lista-factura-manual',\n  templateUrl: './lista-factura-manual.component.html',\n  styleUrls: ['./lista-factura-manual.component.css']\n})\nexport class ListaFacturaManualComponent implements OnInit {\n\n  public esMovil = false;\n  public keyboardLayout = GLOBAL.IDIOMA_TECLADO;\n\n  public lstFacturas: Factura[];\n  public lstFacturasPaged: Factura[];\n  @Output() getFacturaEv = new EventEmitter();\n\n  public length = 0;\n  public pageSize = 5;\n  public pageSizeOptions: number[] = [5, 10, 15];\n  public pageIndex = 0;\n  public pageEvent: PageEvent;\n  public txtFiltro = '';\n  public verTodas = false;\n  public rango = { fdel: null, fal: null };\n\n  constructor(\n    private facturaSrvc: FacturaService,\n    private ls: LocalstorageService\n  ) { }\n\n  ngOnInit() {\n    this.esMovil = this.ls.get(GLOBAL.usrTokenVar).enmovil || false;\n    this.rango.fdel = moment().startOf('month').format(GLOBAL.dbDateFormat);\n    this.rango.fal = moment().endOf('month').format(GLOBAL.dbDateFormat);\n    this.loadFacturas();\n  }\n\n  applyFilter() {\n    if (this.txtFiltro.length > 0) {\n      const tmpList = MultiFiltro(this.lstFacturas, this.txtFiltro);\n      this.length = tmpList.length;\n      this.lstFacturasPaged = PaginarArray(tmpList, this.pageSize, this.pageIndex + 1);\n    } else {\n      this.length = this.lstFacturas.length;\n      this.lstFacturasPaged = PaginarArray(this.lstFacturas, this.pageSize, this.pageIndex + 1);\n    }\n  }\n\n  loadFacturas = () => {\n    const fltr: any = {};\n    if (this.verTodas) {\n      fltr._todas = true;\n    }\n\n    if (moment(this.rango.fdel).isValid()) {\n      fltr._fdel = this.rango.fdel\n    }\n\n    if (moment(this.rango.fal).isValid()) {\n      fltr._fal = this.rango.fal\n    }\n\n    this.facturaSrvc.get(fltr).subscribe(lst => {\n      // console.log(lst);\n      if (lst) {\n        if (lst.length > 0) {\n          this.lstFacturas = lst;\n        } else {\n          this.lstFacturas = [];\n        }\n        this.applyFilter();\n      }\n    });\n  }\n\n  cargarFacturas = (obj: any) => this.loadFacturas();\n\n  getFactura = (obj: Factura) => {\n    this.getFacturaEv.emit(obj);\n  }\n\n  pageChange = (e: PageEvent) => {\n    this.pageSize = e.pageSize;\n    this.pageIndex = e.pageIndex;\n    this.applyFilter();\n  }\n\n}\n","<mat-card class=\"mat-elevation-z4 fullWidth\">\n    <mat-card-content>        \n        <mat-form-field class=\"fullWidth\">\n            <input matInput type=\"date\" placeholder=\"Del\" [(ngModel)]=\"rango.fdel\"\n                [ngModelOptions]=\"{standalone: true}\">\n        </mat-form-field>\n        <mat-form-field class=\"fullWidth\">\n            <input matInput type=\"date\" placeholder=\"Al\" [(ngModel)]=\"rango.fal\" [ngModelOptions]=\"{standalone: true}\">\n        </mat-form-field>\n        <mat-checkbox name=\"pedirdocumento\" class=\"btnAccion\" [(ngModel)]=\"verTodas\" [ngModelOptions]=\"{standalone: true}\" (change)=\"cargarFacturas($event)\">Todas</mat-checkbox>\n        <button mat-raised-button type=\"button\" color=\"accent\" (click)=\"loadFacturas()\">\n            Buscar\n        </button>\n        <mat-form-field class=\"fullWidth\">\n            <input matInput *ngIf=\"!esMovil\" [matKeyboard]=\"keyboardLayout\" (input)=\"applyFilter()\"\n                placeholder=\"Filtrar...\" [(ngModel)]=\"txtFiltro\" [ngModelOptions]=\"{standalone: true}\">\n            <input matInput *ngIf=\"esMovil\" (keyup)=\"applyFilter()\" placeholder=\"Filtrar...\" [(ngModel)]=\"txtFiltro\"\n                [ngModelOptions]=\"{standalone: true}\">\n        </mat-form-field>\n        <mat-nav-list>\n            <mat-list-item *ngFor=\"let element of lstFacturasPaged\" (click)=\"getFactura(element)\">\n                <mat-icon mat-list-icon>receipt</mat-icon>\n                <h5 mat-line>{{element.serie_factura}}&nbsp;{{element.numero_factura}}</h5>\n                <span mat-line>Fecha: {{element.fecha_factura | date:'dd/MM/yyyy'}}</span>\n                <span mat-line>Cliente: {{element.cliente.nombre}}</span>\n                <span mat-line>NIT: {{element.cliente.nit}}</span>\n            </mat-list-item>\n        </mat-nav-list>\n        <mat-paginator [length]=\"length\" [pageSize]=\"pageSize\" [pageSizeOptions]=\"pageSizeOptions\"\n            (page)=\"pageChange($event)\" showFirstLastButtons>\n        </mat-paginator>\n    </mat-card-content>\n</mat-card>"],"sourceRoot":"webpack:///"}