(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"3e6T":function(t,e,i){"use strict";i.d(e,"a",function(){return d});var o=i("sKxO"),n=i("R5jZ"),a=i("un/a"),c=i("JIr8"),r=i("Qyje"),s=i("fXoL"),l=i("tk/3");let d=(()=>{class t{constructor(t){this.http=t,this.srvcErrHndl=new n.a}get(t={}){return this.http.get(`${o.a.urlCatalogos}/get_tipo_movimiento?${r.stringify(t)}`).pipe(Object(a.a)(o.a.reintentos),Object(c.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(s.Xb(l.b))},t.\u0275prov=s.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},A5z7:function(t,e,i){"use strict";i.d(e,"a",function(){return D}),i.d(e,"b",function(){return E}),i.d(e,"c",function(){return B});var o=i("FtGj"),n=i("fXoL"),a=i("FKr1"),c=i("8LU1"),r=i("ofXK"),s=i("R1ws"),l=i("XNiG"),d=i("VRyK"),u=i("IzEk"),b=i("1G5W"),g=i("JX91"),h=i("u47x"),p=i("0EQZ"),m=i("kmnG"),f=i("nLfN"),S=i("cH1L"),v=i("3Pt+");const C=["*"],T=new n.s("MatChipRemove"),_=new n.s("MatChipAvatar"),x=new n.s("MatChipTrailingIcon");class M{constructor(t){this._elementRef=t}}const I=Object(a.B)(Object(a.w)(Object(a.x)(M),"primary"),-1);let D=(()=>{class t extends I{constructor(t,e,i,o,c,r,s,d){super(t),this._elementRef=t,this._ngZone=e,this._changeDetectorRef=c,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListDisabled=!1,this._selected=!1,this._selectable=!0,this._disabled=!1,this._removable=!0,this._onFocus=new l.a,this._onBlur=new l.a,this.selectionChange=new n.o,this.destroyed=new n.o,this.removed=new n.o,this._addHostClassName(),this._chipRippleTarget=r.createElement("div"),this._chipRippleTarget.classList.add("mat-chip-ripple"),this._elementRef.nativeElement.appendChild(this._chipRippleTarget),this._chipRipple=new a.t(this,e,this._chipRippleTarget,i),this._chipRipple.setupTriggerEvents(t),this.rippleConfig=o||{},this._animationsDisabled="NoopAnimations"===s,this.tabIndex=null!=d&&parseInt(d)||-1}get rippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(t){const e=Object(c.c)(t);e!==this._selected&&(this._selected=e,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(t){this._value=t}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(t){this._selectable=Object(c.c)(t)}get disabled(){return this._chipListDisabled||this._disabled}set disabled(t){this._disabled=Object(c.c)(t)}get removable(){return this._removable}set removable(t){this._removable=Object(c.c)(t)}get ariaSelected(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const t=this._elementRef.nativeElement;t.hasAttribute("mat-basic-chip")||"mat-basic-chip"===t.tagName.toLowerCase()?t.classList.add("mat-basic-chip"):t.classList.add("mat-standard-chip")}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}deselect(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}toggleSelected(t=!1){return this._selected=!this.selected,this._dispatchSelectionChange(t),this._changeDetectorRef.markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&&this.removed.emit({chip:this})}_handleClick(t){this.disabled?t.preventDefault():t.stopPropagation()}_handleKeydown(t){if(!this.disabled)switch(t.keyCode){case o.c:case o.b:this.remove(),t.preventDefault();break;case o.n:this.selectable&&this.toggleSelected(!0),t.preventDefault()}}_blur(){this._ngZone.onStable.pipe(Object(u.a)(1)).subscribe(()=>{this._ngZone.run(()=>{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(t=!1){this.selectionChange.emit({source:this,isUserInput:t,selected:this._selected})}}return t.\u0275fac=function(e){return new(e||t)(n.Nb(n.l),n.Nb(n.B),n.Nb(f.a),n.Nb(a.h,8),n.Nb(n.h),n.Nb(r.d),n.Nb(s.a,8),n.Yb("tabindex"))},t.\u0275dir=n.Ib({type:t,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(t,e,i){if(1&t&&(n.Gb(i,_,1),n.Gb(i,x,1),n.Gb(i,T,1)),2&t){let t;n.sc(t=n.cc())&&(e.avatar=t.first),n.sc(t=n.cc())&&(e.trailingIcon=t.first),n.sc(t=n.cc())&&(e.removeIcon=t.first)}},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(t,e){1&t&&n.bc("click",function(t){return e._handleClick(t)})("keydown",function(t){return e._handleKeydown(t)})("focus",function(){return e.focus()})("blur",function(){return e._blur()}),2&t&&(n.Db("tabindex",e.disabled?null:e.tabIndex)("disabled",e.disabled||null)("aria-disabled",e.disabled.toString())("aria-selected",e.ariaSelected),n.Fb("mat-chip-selected",e.selected)("mat-chip-with-avatar",e.avatar)("mat-chip-with-trailing-icon",e.trailingIcon||e.removeIcon)("mat-chip-disabled",e.disabled)("_mat-animation-noopable",e._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[n.zb]}),t})();const F=new n.s("mat-chips-default-options");class y{constructor(t,e,i,o){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=i,this.ngControl=o}}const k=Object(a.z)(y);let O=0;class w{constructor(t,e){this.source=t,this.value=e}}let E=(()=>{class t extends k{constructor(t,e,i,o,a,c,r){super(c,o,a,r),this._elementRef=t,this._changeDetectorRef=e,this._dir=i,this.ngControl=r,this.controlType="mat-chip-list",this._lastDestroyedChipIndex=null,this._destroyed=new l.a,this._uid="mat-chip-list-"+O++,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=>{},this._onChange=()=>{},this._multiple=!1,this._compareWith=(t,e)=>t===e,this._required=!1,this._disabled=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.change=new n.o,this.valueChange=new n.o,this.ngControl&&(this.ngControl.valueAccessor=this)}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get role(){return this.empty?null:"listbox"}get multiple(){return this._multiple}set multiple(t){this._multiple=Object(c.c)(t),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this.writeValue(t),this._value=t}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){return this._required}set required(t){this._required=Object(c.c)(t),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get focused(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Object(c.c)(t),this._syncChipsState()}get selectable(){return this._selectable}set selectable(t){this._selectable=Object(c.c)(t),this.chips&&this.chips.forEach(t=>t.chipListSelectable=this._selectable)}set tabIndex(t){this._userTabIndex=t,this._tabIndex=t}get chipSelectionChanges(){return Object(d.a)(...this.chips.map(t=>t.selectionChange))}get chipFocusChanges(){return Object(d.a)(...this.chips.map(t=>t._onFocus))}get chipBlurChanges(){return Object(d.a)(...this.chips.map(t=>t._onBlur))}get chipRemoveChanges(){return Object(d.a)(...this.chips.map(t=>t.destroyed))}ngAfterContentInit(){this._keyManager=new h.g(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(Object(b.a)(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.tabOut.pipe(Object(b.a)(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.chips.changes.pipe(Object(g.a)(null),Object(b.a)(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new p.c(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(t){this._chipInput=t,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",t.id)}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}writeValue(t){this.chips&&this._setSelectionByValue(t,!1)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this.stateChanges.next()}onContainerClick(t){this._originatesFromChip(t)||this.focus()}focus(t){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(t),this.stateChanges.next()))}_focusInput(t){this._chipInput&&this._chipInput.focus(t)}_keydown(t){const e=t.target;t.keyCode===o.b&&this._isInputEmpty(e)?(this._keyManager.setLastItemActive(),t.preventDefault()):e&&e.classList.contains("mat-chip")&&(this._keyManager.onKeydown(t),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const t=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(t)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(t){return t>=0&&t<this.chips.length}_isInputEmpty(t){return!(!t||"input"!==t.nodeName.toLowerCase()||t.value)}_setSelectionByValue(t,e=!0){if(this._clearSelection(),this.chips.forEach(t=>t.deselect()),Array.isArray(t))t.forEach(t=>this._selectValue(t,e)),this._sortValues();else{const i=this._selectValue(t,e);i&&e&&this._keyManager.setActiveItem(i)}}_selectValue(t,e=!0){const i=this.chips.find(e=>null!=e.value&&this._compareWith(e.value,t));return i&&(e?i.selectViaInteraction():i.select(),this._selectionModel.select(i)),i}_initializeSelection(){Promise.resolve().then(()=>{(this.ngControl||this._value)&&(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(t){this._selectionModel.clear(),this.chips.forEach(e=>{e!==t&&e.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&&(this._selectionModel.clear(),this.chips.forEach(t=>{t.selected&&this._selectionModel.select(t)}),this.stateChanges.next())}_propagateChanges(t){let e=null;e=Array.isArray(this.selected)?this.selected.map(t=>t.value):this.selected?this.selected.value:t,this._value=e,this.change.emit(new w(this,e)),this.valueChange.emit(e),this._onChange(e),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=>{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(()=>{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(t=>{t.source.selected?this._selectionModel.select(t.source):this._selectionModel.deselect(t.source),this.multiple||this.chips.forEach(t=>{!this._selectionModel.isSelected(t)&&t.selected&&t.deselect()}),t.isUserInput&&this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(t=>{let e=this.chips.toArray().indexOf(t.chip);this._isValidIndex(e)&&this._keyManager.updateActiveItem(e),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=>{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(t=>{const e=t.chip,i=this.chips.toArray().indexOf(t.chip);this._isValidIndex(i)&&e._hasFocus&&(this._lastDestroyedChipIndex=i)})}_originatesFromChip(t){let e=t.target;for(;e&&e!==this._elementRef.nativeElement;){if(e.classList.contains("mat-chip"))return!0;e=e.parentElement}return!1}_hasFocusedChip(){return this.chips&&this.chips.some(t=>t._hasFocus)}_syncChipsState(){this.chips&&this.chips.forEach(t=>{t._chipListDisabled=this._disabled,t._chipListMultiple=this.multiple})}}return t.\u0275fac=function(e){return new(e||t)(n.Nb(n.l),n.Nb(n.h),n.Nb(S.b,8),n.Nb(v.m,8),n.Nb(v.d,8),n.Nb(a.d),n.Nb(v.j,10))},t.\u0275cmp=n.Hb({type:t,selectors:[["mat-chip-list"]],contentQueries:function(t,e,i){if(1&t&&n.Gb(i,D,1),2&t){let t;n.sc(t=n.cc())&&(e.chips=t)}},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(t,e){1&t&&n.bc("focus",function(){return e.focus()})("blur",function(){return e._blur()})("keydown",function(t){return e._keydown(t)}),2&t&&(n.Wb("id",e._uid),n.Db("tabindex",e.disabled?null:e._tabIndex)("aria-describedby",e._ariaDescribedby||null)("aria-required",e.role?e.required:null)("aria-disabled",e.disabled.toString())("aria-invalid",e.errorState)("aria-multiselectable",e.multiple)("role",e.role)("aria-orientation",e.ariaOrientation),n.Fb("mat-chip-list-disabled",e.disabled)("mat-chip-list-invalid",e.errorState)("mat-chip-list-required",e.required))},inputs:{ariaOrientation:["aria-orientation","ariaOrientation"],multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",selectable:"selectable",tabIndex:"tabIndex",errorStateMatcher:"errorStateMatcher"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[n.Bb([{provide:m.c,useExisting:t}]),n.zb],ngContentSelectors:C,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(t,e){1&t&&(n.kc(),n.Tb(0,"div",0),n.jc(1),n.Sb())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;transform:translateZ(0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove.mat-icon{width:18px;height:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),t})();const A={separatorKeyCodes:[o.f]};let B=(()=>{class t{}return t.\u0275mod=n.Lb({type:t}),t.\u0275inj=n.Kb({factory:function(e){return new(e||t)},providers:[a.d,{provide:F,useValue:A}],imports:[[a.i]]}),t})()},FHMA:function(t,e,i){"use strict";i.d(e,"a",function(){return d});var o=i("tk/3"),n=i("sKxO"),a=i("R5jZ"),c=i("un/a"),r=i("JIr8"),s=i("fXoL"),l=i("FY0D");let d=(()=>{class t{constructor(t,e){this.http=t,this.ls=e,this.usrToken=null,this.httpOptions={responseType:"blob"},this.srvcErrHndl=new a.a,this.usrToken=this.ls.get(n.a.usrTokenVar)?this.ls.get(n.a.usrTokenVar).token:null,this.httpOptions.headers=new o.d({Authorization:this.usrToken,Accept:"application/pdf"})}getReporteCaja(t){return this.http.post(`${n.a.urlAppRestaurante}/reporte/caja`,t,this.httpOptions).pipe(Object(c.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}getReporteExistencia(t){return this.httpOptions.params=t,this.http.get(`${n.a.urlWms}/reporte/existencia`,this.httpOptions).pipe(Object(c.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}getReporteValorizado(t){return this.httpOptions.params=t,this.http.get(`${n.a.urlWms}/reporte/valorizado`,this.httpOptions).pipe(Object(c.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}imprimirInventarioFisico(t,e){return this.httpOptions.params=e,this.http.get(`${n.a.urlWms}/fisico/imprimir/${t}`,this.httpOptions).pipe(Object(c.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}imprimirReceta(t){return this.http.get(`${n.a.urlMantenimientos}/articulo/imprimir_receta/${t}`,this.httpOptions).pipe(Object(c.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}getReporteKardex(t){return this.httpOptions.params=t,this.http.get(`${n.a.urlWms}/reporte/kardex`,this.httpOptions).pipe(Object(c.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}getReporteFactura(t){return this.httpOptions.params=t,this.http.get(`${n.a.urlAppRestaurante}/reporte/factura`,this.httpOptions).pipe(Object(c.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}getReportePropina(t){return this.httpOptions.params=t,this.http.get(`${n.a.urlAppRestaurante}/reporte/distribucion_propina`,this.httpOptions).pipe(Object(c.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}getComanda(t){return this.http.get(`${n.a.urlAppRestaurante}/comanda/imprimir/${t}/1`,this.httpOptions).pipe(Object(c.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(s.Xb(o.b),s.Xb(l.a))},t.\u0275prov=s.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},Iab2:function(t,e,i){var o,n;void 0===(n="function"==typeof(o=function(){"use strict";function e(t,e,i){var o=new XMLHttpRequest;o.open("GET",t),o.responseType="blob",o.onload=function(){c(o.response,e,i)},o.onerror=function(){console.error("could not download file")},o.send()}function i(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(i)}}var n="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=n.saveAs||("object"!=typeof window||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(t,a,c){var r=n.URL||n.webkitURL,s=document.createElement("a");s.download=a=a||t.name||"download",s.rel="noopener","string"==typeof t?(s.href=t,s.origin===location.origin?o(s):i(s.href)?e(t,a,c):o(s,s.target="_blank")):(s.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){o(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,n,a){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,a),n);else if(i(t))e(t,n,a);else{var c=document.createElement("a");c.href=t,c.target="_blank",setTimeout(function(){o(c)})}}:function(t,i,o,c){if((c=c||open("","_blank"))&&(c.document.title=c.document.body.innerText="downloading..."),"string"==typeof t)return e(t,i,o);var r="application/octet-stream"===t.type,s=/constructor/i.test(n.HTMLElement)||n.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||r&&s||a)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var t=d.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=t:location=t,c=null},d.readAsDataURL(t)}else{var u=n.URL||n.webkitURL,b=u.createObjectURL(t);c?c.location=b:location.href=b,c=null,setTimeout(function(){u.revokeObjectURL(b)},4e4)}});n.saveAs=c.saveAs=c,t.exports=c})?o.apply(e,[]):o)||(t.exports=n)},NU9O:function(t,e,i){"use strict";i.d(e,"a",function(){return l});var o=i("fXoL"),n=i("ofXK"),a=i("bTqV");function c(t,e){if(1&t){const t=o.Ub();o.Tb(0,"button",3),o.bc("click",function(){return o.xc(t),o.fc().onHtmlClick()}),o.Fc(1," Generar "),o.Sb()}if(2&t){const t=o.fc();o.lc("disabled",t.configuracion.isHtmlDisabled)}}function r(t,e){if(1&t){const t=o.Ub();o.Tb(0,"button",3),o.bc("click",function(){return o.xc(t),o.fc().onPdfClick()}),o.Fc(1," PDF "),o.Sb()}if(2&t){const t=o.fc();o.lc("disabled",t.configuracion.isPdfDisabled)}}function s(t,e){if(1&t){const t=o.Ub();o.Tb(0,"button",3),o.bc("click",function(){return o.xc(t),o.fc().onExcelClick()}),o.Fc(1," Excel "),o.Sb()}if(2&t){const t=o.fc();o.lc("disabled",t.configuracion.isExcelDisabled)}}let l=(()=>{class t{constructor(){this.htmlClick=new o.o,this.pdfClick=new o.o,this.excelClick=new o.o,this.resetParamsClick=new o.o,this.configuracion={isHtmlDisabled:!1,isPdfDisabled:!1,isExcelDisabled:!1,showHtml:!0,showPdf:!0,showExcel:!0},this.onHtmlClick=()=>this.htmlClick.emit(),this.onPdfClick=()=>this.pdfClick.emit(),this.onExcelClick=()=>this.excelClick.emit(),this.onResetParamsClick=()=>this.resetParamsClick.emit()}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Hb({type:t,selectors:[["app-rpt-botones"]],inputs:{configuracion:"configuracion"},outputs:{htmlClick:"htmlClick",pdfClick:"pdfClick",excelClick:"excelClick",resetParamsClick:"resetParamsClick"},decls:6,vars:3,consts:[["align","end"],["mat-raised-button","","type","button","class","btnAccion","color","accent",3,"disabled","click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Dc(1,c,2,1,"button",1),o.Dc(2,r,2,1,"button",1),o.Dc(3,s,2,1,"button",1),o.Tb(4,"button",2),o.bc("click",function(){return e.onResetParamsClick()}),o.Fc(5," Restaurar "),o.Sb(),o.Sb()),2&t&&(o.Cb(1),o.lc("ngIf",e.configuracion.showHtml),o.Cb(1),o.lc("ngIf",e.configuracion.showPdf),o.Cb(1),o.lc("ngIf",e.configuracion.showExcel))},directives:[n.m,a.a],styles:[""]}),t})()},TOq3:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var o=i("fXoL");let n=(()=>{class t{constructor(){this.configuracion={w:150,h:150,align:"center",size:100}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Hb({type:t,selectors:[["app-cargando"]],inputs:{configuracion:"configuracion"},decls:2,vars:7,consts:[[3,"align"],["id","imgCargando","src","/assets/img/loading.gif","alt","Cargando..."]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Ob(1,"img",1),o.Sb()),2&t&&(o.Ac("width",e.configuracion.size,"%"),o.lc("align",e.configuracion.align),o.Cb(1),o.Ac("width",e.configuracion.w,"px")("height",e.configuracion.h,"px"))},styles:[""]}),t})()},vtFA:function(t,e,i){"use strict";i.r(e),i.d(e,"WmsModule",function(){return pa});var o=i("ofXK"),n=i("tk/3"),a=i("3Pt+"),c=i("YUcS"),r=i("PCNd"),s=i("MutI"),l=i("NFeN"),d=i("kmnG"),u=i("qFsG"),b=i("Wp6s"),g=i("f0Cb"),h=i("wZkO"),p=i("+0xr"),m=i("d3UM"),f=i("bSwM"),S=i("bTqV"),v=i("dNgK"),C=i("/t3+"),T=i("STbY"),_=i("zkoq"),x=i("M9IT"),M=i("0IaG"),I=i("XhcP"),D=i("8yBR"),F=i("/1cH"),y=i("A5z7"),k=i("vxfF"),O=i("uM5D"),w=i("tyNb"),E=i("0T/Q"),A=i("sKxO"),B=i("wd/R"),R=i("fXoL"),$=i("FY0D"),H=i("R5jZ"),P=i("un/a"),N=i("JIr8"),U=i("Qyje");let j=(()=>{class t{constructor(t){this.http=t,this.ingresoUrl="ingreso",this.documentoUrl="documento",this.srvcErrHndl=new H.a}get(t={}){return this.http.get(`${A.a.urlWms}/${this.ingresoUrl}/buscar_ingreso?${U.stringify(t)}`).pipe(Object(P.a)(A.a.reintentos),Object(N.a)(this.srvcErrHndl.errorHandler))}save(t){return this.http.post(`${A.a.urlWms}/${this.ingresoUrl}/guardar${+t.ingreso>0?"/"+t.ingreso:""}`,t).pipe(Object(P.a)(A.a.reintentos),Object(N.a)(this.srvcErrHndl.errorHandler))}getDetalle(t,e={}){return this.http.get(`${A.a.urlWms}/${this.ingresoUrl}/buscar_detalle/${t}?${U.stringify(e)}`).pipe(Object(P.a)(A.a.reintentos),Object(N.a)(this.srvcErrHndl.errorHandler))}saveDetalle(t){return this.http.post(`${A.a.urlWms}/${this.ingresoUrl}/guardar_detalle/${t.ingreso}${+t.ingreso_detalle>0?"/"+t.ingreso_detalle:""}`,t).pipe(Object(P.a)(A.a.reintentos),Object(N.a)(this.srvcErrHndl.errorHandler))}getDocumento(t={}){return this.http.get(`${A.a.urlWms}/${this.documentoUrl}/buscar?${U.stringify(t)}`).pipe(Object(P.a)(A.a.reintentos),Object(N.a)(this.srvcErrHndl.errorHandler))}saveDocumento(t){return this.http.post(`${A.a.urlWms}/${this.documentoUrl}/guardar${+t.documento>0?"/"+t.documento:""}`,t).pipe(Object(P.a)(A.a.reintentos),Object(N.a)(this.srvcErrHndl.errorHandler))}enviarDocumentoAConta(t){return this.http.get(`${A.a.urlWms}/${this.documentoUrl}/enviar/${t}`).pipe(Object(P.a)(A.a.reintentos),Object(N.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(R.Xb(n.b))},t.\u0275prov=R.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var G=i("FKr1");function z(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-list-item",5),R.bc("click",function(){R.xc(t);const i=e.$implicit;return R.fc().getIngreso(i)}),R.Tb(1,"mat-icon",6),R.Fc(2,"trending_up"),R.Sb(),R.Tb(3,"h5",7),R.Fc(4),R.Sb(),R.Ob(5,"br"),R.Tb(6,"p",7),R.Fc(7),R.gc(8,"date"),R.Ob(9,"br"),R.Fc(10),R.Ob(11,"br"),R.Sb(),R.Tb(12,"p",7),R.Fc(13),R.Sb(),R.Sb()}if(2&t){const t=e.$implicit;R.Cb(4),R.Hc("No. ",t.ingreso,""),R.Cb(3),R.Hc(" Fecha: ",R.ic(8,4,t.fecha,"dd/MM/yyyy"),""),R.Cb(3),R.Hc(" Bodega: ",t.bodega.descripcion,""),R.Cb(3),R.Hc(" Proveedor: ",t.proveedor.razon_social," ")}}const q=function(){return{standalone:!0}};let L=(()=>{class t{constructor(t){this.ingresoSrvc=t,this.getIngresoEv=new R.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadIngresos=()=>{this.ingresoSrvc.get().subscribe(t=>{t&&t.length>0&&(this.lstIngresos=t,this.applyFilter())})},this.getIngreso=t=>{this.getIngresoEv.emit({ingreso:t.ingreso,tipo_movimiento:t.tipo_movimiento.tipo_movimiento,fecha:t.fecha,bodega_origen:t.bodega_origen&&t.bodega_origen.bodega?t.bodega_origen.bodega:null,bodega:t.bodega.bodega,usuario:t.usuario.usuario,comentario:t.comentario,proveedor:t.proveedor.proveedor})},this.pageChange=t=>{this.pageSize=t.pageSize,this.pageIndex=t.pageIndex,this.applyFilter()}}ngOnInit(){this.loadIngresos()}applyFilter(){if(this.txtFiltro.length>0){const t=Object(A.b)(this.lstIngresos,this.txtFiltro);this.length=t.length,this.lstIngresosPaged=Object(A.e)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstIngresos.length,this.lstIngresosPaged=Object(A.e)(this.lstIngresos,this.pageSize,this.pageIndex+1)}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(j))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-lista-ingreso"]],outputs:{getIngresoEv:"getIngresoEv"},decls:7,vars:7,consts:[[1,"mat-elevation-z4","fullWidth",2,"height","100% important"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,e){1&t&&(R.Tb(0,"mat-card",0),R.Tb(1,"mat-card-content"),R.Tb(2,"mat-form-field",1),R.Tb(3,"input",2),R.bc("keyup",function(){return e.applyFilter()})("ngModelChange",function(t){return e.txtFiltro=t}),R.Sb(),R.Sb(),R.Tb(4,"mat-nav-list"),R.Dc(5,z,14,7,"mat-list-item",3),R.Sb(),R.Tb(6,"mat-paginator",4),R.bc("page",function(t){return e.pageChange(t)}),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(3),R.lc("ngModel",e.txtFiltro)("ngModelOptions",R.nc(6,q)),R.Cb(2),R.lc("ngForOf",e.lstIngresosPaged),R.Cb(1),R.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[b.a,b.c,d.b,u.b,a.c,a.k,a.n,s.e,o.l,x.a,s.c,l.a,s.b,G.j],pipes:[o.e],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),t})();var W=i("IJgu"),V=i("50cD"),K=i("3e6T"),Q=i("u5dX"),X=i("NGYs"),J=i("C5NV"),Z=i("yZ4O"),Y=i("DVqU");function tt(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",7),R.bc("click",function(){return R.xc(t),R.fc().showIngresoForm=!0}),R.Tb(1,"mat-icon",8),R.Fc(2,"expand_more"),R.Sb(),R.Sb()}}function et(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",7),R.bc("click",function(){return R.xc(t),R.fc().showIngresoForm=!1}),R.Tb(1,"mat-icon",8),R.Fc(2,"expand_less"),R.Sb(),R.Sb()}}function it(t,e){if(1&t&&(R.Tb(0,"mat-option",20),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.tipo_movimiento),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function ot(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",12),R.Tb(1,"mat-label"),R.Fc(2,"Tipo de movimiento"),R.Sb(),R.Tb(3,"mat-select",18),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).ingreso.tipo_movimiento=e}),R.Dc(4,it,2,2,"mat-option",19),R.Sb(),R.Sb()}if(2&t){const t=R.fc(2);R.Cb(3),R.lc("ngModel",t.ingreso.tipo_movimiento),R.Cb(1),R.lc("ngForOf",t.tiposMovimiento)}}function nt(t,e){if(1&t&&(R.Tb(0,"mat-option",20),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.bodega),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function at(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",12),R.Tb(1,"mat-label"),R.Fc(2,"Bodega"),R.Sb(),R.Tb(3,"mat-select",21),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).ingreso.bodega=e}),R.Dc(4,nt,2,2,"mat-option",19),R.Sb(),R.Sb()}if(2&t){const t=R.fc(2);R.Cb(3),R.lc("ngModel",t.ingreso.bodega),R.Cb(1),R.lc("ngForOf",t.bodegas)}}function ct(t,e){if(1&t&&(R.Tb(0,"mat-option",20),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.bodega),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function rt(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",24),R.bc("click",function(){return R.xc(t),R.fc(3).ingreso.bodega_origen=void 0}),R.Tb(1,"mat-icon",8),R.Fc(2,"close"),R.Sb(),R.Sb()}}function st(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",12),R.Tb(1,"mat-label"),R.Fc(2,"Bodega de origen"),R.Sb(),R.Tb(3,"mat-select",22),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).ingreso.bodega_origen=e}),R.Dc(4,ct,2,2,"mat-option",19),R.Sb(),R.Dc(5,rt,3,0,"button",23),R.Sb()}if(2&t){const t=R.fc(2);R.Cb(3),R.lc("ngModel",t.ingreso.bodega_origen),R.Cb(1),R.lc("ngForOf",t.bodegas),R.Cb(1),R.lc("ngIf",t.ingreso.bodega_origen)}}function lt(t,e){if(1&t&&(R.Tb(0,"mat-option",20),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t),R.Cb(1),R.Ic(" (",t.nit,") ",t.razon_social," ")}}const dt=function(){return{standalone:!0}};function ut(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",12),R.Tb(1,"mat-label"),R.Fc(2,"Proveedor"),R.Sb(),R.Tb(3,"input",25),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).txtProveedorSelected=e})("keyup",function(){R.xc(t);const e=R.fc(2);return e.filtrarProveedores(e.txtProveedorSelected)}),R.Sb(),R.Tb(4,"mat-autocomplete",26,27),R.Dc(6,lt,2,3,"mat-option",19),R.Sb(),R.Sb()}if(2&t){const t=R.tc(5),e=R.fc(2);R.Cb(3),R.lc("ngModel",e.txtProveedorSelected)("ngModelOptions",R.nc(5,dt))("matAutocomplete",t),R.Cb(1),R.lc("displayWith",e.displayProveedor),R.Cb(2),R.lc("ngForOf",e.filteredProveedores)}}function bt(t,e){if(1&t&&(R.Tb(0,"button",28),R.Fc(1," Guardar "),R.Sb()),2&t){R.fc();const t=R.tc(1),e=R.fc();R.lc("disabled",!t.form.valid||e.bloqueoBotones||1==+e.documento.enviado)}}function gt(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",29),R.bc("click",function(){return R.xc(t),R.fc(2).resetIngreso()}),R.Fc(1," Nuevo "),R.Sb()}}function ht(t,e){if(1&t){const t=R.Ub();R.Tb(0,"form",9,10),R.bc("ngSubmit",function(){R.xc(t);const e=R.tc(1),i=R.fc();return e.form.valid&&i.onSubmit()}),R.Dc(2,ot,5,2,"mat-form-field",11),R.Tb(3,"mat-form-field",12),R.Tb(4,"input",13),R.bc("ngModelChange",function(e){return R.xc(t),R.fc().ingreso.fecha=e}),R.Sb(),R.Sb(),R.Dc(5,at,5,2,"mat-form-field",11),R.Dc(6,st,6,3,"mat-form-field",11),R.Dc(7,ut,7,6,"mat-form-field",11),R.Tb(8,"mat-form-field",12),R.Tb(9,"input",14),R.bc("ngModelChange",function(e){return R.xc(t),R.fc().ingreso.comentario=e}),R.Sb(),R.Sb(),R.Tb(10,"div",15),R.Dc(11,bt,2,1,"button",16),R.Dc(12,gt,2,0,"button",17),R.Sb(),R.Sb()}if(2&t){const t=R.fc();R.Cb(2),R.lc("ngIf",t.saveToDB),R.Cb(2),R.lc("ngModel",t.ingreso.fecha),R.Cb(1),R.lc("ngIf",t.bodega),R.Cb(1),R.lc("ngIf",t.saveToDB),R.Cb(1),R.lc("ngIf",t.saveToDB),R.Cb(2),R.lc("ngModel",t.ingreso.comentario),R.Cb(2),R.lc("ngIf",t.saveToDB),R.Cb(1),R.lc("ngIf",t.ingreso.ingreso)}}function pt(t,e){1&t&&R.Ob(0,"hr")}function mt(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",7),R.bc("click",function(){return R.xc(t),R.fc(2).showDetalleIngresoForm=!0}),R.Tb(1,"mat-icon",8),R.Fc(2,"expand_more"),R.Sb(),R.Sb()}}function ft(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",7),R.bc("click",function(){return R.xc(t),R.fc(2).showDetalleIngresoForm=!1}),R.Tb(1,"mat-icon",8),R.Fc(2,"expand_less"),R.Sb(),R.Sb()}}function St(t,e){if(1&t&&(R.Tb(0,"mat-option",20),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function vt(t,e){if(1&t&&(R.Tb(0,"mat-option",20),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.presentacion),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function Ct(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",12),R.Tb(1,"mat-label"),R.Fc(2,"Presentaci\xf3n"),R.Sb(),R.Tb(3,"mat-select",38),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(3).detalleIngreso.presentacion=e}),R.Dc(4,vt,2,2,"mat-option",19),R.Sb(),R.Sb()}if(2&t){const t=R.fc(3);R.Cb(3),R.lc("ngModel",t.detalleIngreso.presentacion),R.Cb(1),R.lc("ngForOf",t.fltrPresentaciones)}}function Tt(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",12),R.Tb(1,"input",39),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(3).detalleIngreso.cantidad_utilizada=e}),R.Sb(),R.Sb()}if(2&t){const t=R.fc(3);R.Cb(1),R.lc("ngModel",t.detalleIngreso.cantidad_utilizada)}}function _t(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",12),R.Tb(1,"input",40),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(3).detalleIngreso.precio_unitario=e})("change",function(){R.xc(t);const e=R.fc(3);return e.detalleIngreso.precio_total=+e.detalleIngreso.precio_unitario*+e.detalleIngreso.cantidad}),R.Sb(),R.Sb()}if(2&t){const t=R.fc(3);R.Cb(1),R.lc("ngModel",t.detalleIngreso.precio_unitario)}}function xt(t,e){if(1&t&&(R.Tb(0,"button",28),R.Fc(1," Guardar "),R.Sb()),2&t){R.fc();const t=R.tc(1),e=R.fc(2);R.lc("disabled",!t.form.valid||e.bloqueoBotones||1==+e.documento.enviado||+e.detalleIngreso.cantidad<1)}}const Mt=function(){return[2,3]};function It(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",41),R.bc("click",function(){return R.xc(t),R.fc(3).addToDetail()}),R.Fc(1," Guardar producci\xf3n "),R.Sb()}if(2&t){R.fc();const t=R.tc(1),e=R.fc(2);R.lc("disabled",!e.detalleIngreso.articulo||!t.form.valid||R.nc(1,Mt).indexOf(+e.ingreso.estatus_movimiento)>=0||+e.detalleIngreso.cantidad<1)}}function Dt(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",29),R.bc("click",function(){return R.xc(t),R.fc(3).resetDetalleIngreso()}),R.Fc(1," Nuevo "),R.Sb()}}function Ft(t,e){if(1&t){const t=R.Ub();R.Tb(0,"form",9,32),R.bc("ngSubmit",function(){R.xc(t);const e=R.tc(1),i=R.fc(2);return e.form.valid&&i.onSubmitDetail()}),R.Tb(2,"mat-form-field",12),R.Tb(3,"mat-label"),R.Fc(4,"Art\xedculo"),R.Sb(),R.Tb(5,"input",33),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).txtArticuloSelected=e})("keyup",function(){R.xc(t);const e=R.fc(2);return e.filtrarArticulos(e.txtArticuloSelected)}),R.Sb(),R.Tb(6,"mat-autocomplete",34,35),R.bc("optionSelected",function(){return R.xc(t),R.fc(2).setPresentaciones()}),R.Dc(8,St,2,2,"mat-option",19),R.Sb(),R.Sb(),R.Dc(9,Ct,5,2,"mat-form-field",11),R.Dc(10,Tt,2,1,"mat-form-field",11),R.Tb(11,"mat-form-field",12),R.Tb(12,"input",36),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).detalleIngreso.cantidad=e})("change",function(){R.xc(t);const e=R.fc(2);return e.detalleIngreso.precio_total=+e.detalleIngreso.precio_unitario*+e.detalleIngreso.cantidad}),R.Sb(),R.Sb(),R.Dc(13,_t,2,1,"mat-form-field",11),R.Tb(14,"div",15),R.Dc(15,xt,2,1,"button",16),R.Dc(16,It,2,2,"button",37),R.Dc(17,Dt,2,0,"button",17),R.Sb(),R.Sb()}if(2&t){const t=R.tc(7),e=R.fc(2);R.Cb(5),R.lc("ngModel",e.txtArticuloSelected)("ngModelOptions",R.nc(12,dt))("matAutocomplete",t),R.Cb(1),R.lc("displayWith",e.displayArticulo),R.Cb(2),R.lc("ngForOf",e.filteredArticulos),R.Cb(1),R.lc("ngIf",e.saveToDB),R.Cb(1),R.lc("ngIf",!e.bodega),R.Cb(2),R.lc("ngModel",e.detalleIngreso.cantidad),R.Cb(1),R.lc("ngIf",e.saveToDB),R.Cb(2),R.lc("ngIf",e.saveToDB),R.Cb(1),R.lc("ngIf",!e.saveToDB),R.Cb(1),R.lc("ngIf",e.detalleIngreso.ingreso_detalle)}}function yt(t,e){1&t&&R.Ob(0,"hr")}function kt(t,e){1&t&&(R.Tb(0,"th",56),R.Fc(1,"Art\xedculo"),R.Sb())}function Ot(t,e){if(1&t&&(R.Tb(0,"td",57),R.Fc(1),R.Sb()),2&t){const t=e.$implicit,i=R.fc(3);R.Cb(1),R.Hc(" ",i.saveToDB?t.articulo.descripcion:i.getDescripcionArticulo(t.articulo),"")}}function wt(t,e){1&t&&(R.Tb(0,"th",56),R.Fc(1,"Presentaci\xf3n"),R.Sb())}function Et(t,e){if(1&t&&(R.Tb(0,"td",57),R.Fc(1),R.Sb()),2&t){const t=e.$implicit,i=R.fc(3);R.Cb(1),R.Hc(" ",i.saveToDB?t.presentacion.descripcion:i.getDescripcionPresentacion(t.presentacion)," ")}}function At(t,e){1&t&&(R.Tb(0,"th",58),R.Fc(1,"Cantidad a Utilizar"),R.Sb())}function Bt(t,e){if(1&t&&(R.Tb(0,"td",59),R.Fc(1),R.gc(2,"number"),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.Hc("",R.ic(2,1,t.cantidad_utilizada,"1.2-2")," ")}}function Rt(t,e){1&t&&(R.Tb(0,"th",58),R.Fc(1,"Cantidad"),R.Sb())}function $t(t,e){if(1&t&&(R.Tb(0,"td",59),R.Fc(1),R.gc(2,"number"),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.Hc("",R.ic(2,1,t.cantidad,"1.2-2")," ")}}function Ht(t,e){1&t&&(R.Tb(0,"th",58),R.Fc(1,"Costo Unitario Con IVA"),R.Sb())}function Pt(t,e){if(1&t&&(R.Tb(0,"td",59),R.Fc(1),R.gc(2,"number"),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.Hc("",R.ic(2,1,t.precio_unitario,"1.2-2")," ")}}function Nt(t,e){1&t&&(R.Tb(0,"th",58),R.Fc(1,"Costo Total con IVA"),R.Sb())}function Ut(t,e){if(1&t&&(R.Tb(0,"td",59),R.Fc(1),R.gc(2,"number"),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.Gc(R.ic(2,1,t.precio_total,"1.2-2"))}}function jt(t,e){1&t&&(R.Tb(0,"th",56),R.Fc(1,"\xa0"),R.Sb())}function Gt(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",41),R.bc("click",function(){R.xc(t);const e=R.fc().$implicit;return R.fc(3).getDetalleIngreso(e.ingreso,e.ingreso_detalle)}),R.Fc(1," Editar "),R.Sb()}if(2&t){const t=R.fc(4);R.lc("disabled",t.bloqueoBotones||1==+t.documento.enviado)}}function zt(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",41),R.bc("click",function(){R.xc(t);const e=R.fc().$implicit;return R.fc(3).editFromDetail(e.articulo)}),R.Fc(1," Editar "),R.Sb()}if(2&t){const t=R.fc(4);R.lc("disabled",R.nc(1,Mt).indexOf(+t.ingreso.estatus_movimiento)>=0||t.bloqueoBotones)}}function qt(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",41),R.bc("click",function(){R.xc(t);const e=R.fc().$implicit;return R.fc(3).removeFromDetail(e.articulo)}),R.Fc(1," Eliminar "),R.Sb()}if(2&t){const t=R.fc(4);R.lc("disabled",R.nc(1,Mt).indexOf(+t.ingreso.estatus_movimiento)>=0||t.bloqueoBotones)}}function Lt(t,e){if(1&t&&(R.Tb(0,"td",57),R.Dc(1,Gt,2,1,"button",37),R.Dc(2,zt,2,2,"button",37),R.Dc(3,qt,2,2,"button",37),R.Sb()),2&t){const t=R.fc(3);R.Cb(1),R.lc("ngIf",t.saveToDB),R.Cb(1),R.lc("ngIf",!t.saveToDB),R.Cb(1),R.lc("ngIf",!t.saveToDB)}}function Wt(t,e){1&t&&R.Ob(0,"td",57)}function Vt(t,e){1&t&&R.Ob(0,"tr",60)}function Kt(t,e){1&t&&R.Ob(0,"tr",61)}function Qt(t,e){if(1&t&&(R.Tb(0,"table",42),R.Rb(1,43),R.Dc(2,kt,2,0,"th",44),R.Dc(3,Ot,2,1,"td",45),R.Qb(),R.Rb(4,46),R.Dc(5,wt,2,0,"th",44),R.Dc(6,Et,2,1,"td",45),R.Qb(),R.Rb(7,47),R.Dc(8,At,2,0,"th",48),R.Dc(9,Bt,3,4,"td",49),R.Qb(),R.Rb(10,50),R.Dc(11,Rt,2,0,"th",48),R.Dc(12,$t,3,4,"td",49),R.Qb(),R.Rb(13,51),R.Dc(14,Ht,2,0,"th",48),R.Dc(15,Pt,3,4,"td",49),R.Qb(),R.Rb(16,52),R.Dc(17,Nt,2,0,"th",48),R.Dc(18,Ut,3,4,"td",49),R.Qb(),R.Rb(19,53),R.Dc(20,jt,2,0,"th",44),R.Dc(21,Lt,4,3,"td",45),R.Dc(22,Wt,1,0,"td",45),R.Qb(),R.Dc(23,Vt,1,0,"tr",54),R.Dc(24,Kt,1,0,"tr",55),R.Sb()),2&t){const t=R.fc(2);R.lc("dataSource",t.dataSource),R.Cb(23),R.lc("matHeaderRowDef",t.displayedColumns),R.Cb(1),R.lc("matRowDefColumns",t.displayedColumns)}}function Xt(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-card",1),R.Tb(1,"mat-card-title"),R.Tb(2,"h4"),R.Fc(3),R.Dc(4,mt,3,0,"button",2),R.Dc(5,ft,3,0,"button",2),R.Sb(),R.Sb(),R.Tb(6,"mat-card-content"),R.Dc(7,Ft,18,13,"form",3),R.Dc(8,yt,1,0,"hr",4),R.Tb(9,"mat-form-field",12),R.Tb(10,"input",30),R.bc("keyup",function(e){return R.xc(t),R.fc().applyFilter(e.target.value)}),R.Sb(),R.Sb(),R.Dc(11,Qt,25,3,"table",31),R.Sb(),R.Sb()}if(2&t){const t=R.fc();R.Cb(3),R.Ic(" Detalle del ingreso ",t.saveToDB?"No.":""," ",t.ingreso.ingreso," "),R.Cb(1),R.lc("ngIf",!t.showDetalleIngresoForm),R.Cb(1),R.lc("ngIf",t.showDetalleIngresoForm),R.Cb(2),R.lc("ngIf",t.showDetalleIngresoForm),R.Cb(1),R.lc("ngIf",t.detallesIngreso.length>0),R.Cb(3),R.lc("ngIf",t.detallesIngreso.length>0)}}function Jt(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",7),R.bc("click",function(){return R.xc(t),R.fc(2).showDocumentoForm=!0}),R.Tb(1,"mat-icon",8),R.Fc(2,"expand_more"),R.Sb(),R.Sb()}}function Zt(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",7),R.bc("click",function(){return R.xc(t),R.fc(2).showDocumentoForm=!1}),R.Tb(1,"mat-icon",8),R.Fc(2,"expand_less"),R.Sb(),R.Sb()}}function Yt(t,e){if(1&t&&(R.Tb(0,"mat-option",20),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.documento_tipo),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function te(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",12),R.Tb(1,"mat-label"),R.Fc(2,"Tipo de documento"),R.Sb(),R.Tb(3,"mat-select",68),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(3).documento.documento_tipo=e}),R.Dc(4,Yt,2,2,"mat-option",19),R.Sb(),R.Sb()}if(2&t){const t=R.fc(3);R.Cb(3),R.lc("ngModel",t.documento.documento_tipo)("disabled",1==+t.documento.enviado),R.Cb(1),R.lc("ngForOf",t.documentosTipo)}}function ee(t,e){if(1&t&&(R.Tb(0,"mat-option",20),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.tipo_compra_venta),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function ie(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",12),R.Tb(1,"mat-label"),R.Fc(2,"Tipo de compra"),R.Sb(),R.Tb(3,"mat-select",69),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(3).documento.tipo_compra_venta=e}),R.Dc(4,ee,2,2,"mat-option",19),R.Sb(),R.Sb()}if(2&t){const t=R.fc(3);R.Cb(3),R.lc("ngModel",t.documento.tipo_compra_venta)("disabled",1==+t.documento.enviado),R.Cb(1),R.lc("ngForOf",t.tiposCompraVenta)}}function oe(t,e){if(1&t&&(R.Tb(0,"button",28),R.Fc(1," Guardar detalle "),R.Sb()),2&t){R.fc();const t=R.tc(1),e=R.fc(2);R.lc("disabled",!t.form.valid||e.bloqueoBotones||1==+e.documento.enviado)}}function ne(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",70),R.bc("click",function(){return R.xc(t),R.fc(3).enviarAConta()}),R.Fc(1," Enviar a contabilidad "),R.Sb()}if(2&t){R.fc();const t=R.tc(1),e=R.fc(2);R.lc("disabled",!t.form.valid||e.bloqueoBotones||1==+e.documento.enviado)}}function ae(t,e){if(1&t){const t=R.Ub();R.Tb(0,"form",9,63),R.bc("ngSubmit",function(){R.xc(t);const e=R.tc(1),i=R.fc(2);return e.form.valid&&i.submitDocumento()}),R.Dc(2,te,5,3,"mat-form-field",11),R.Tb(3,"mat-form-field",12),R.Tb(4,"input",64),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).documento.serie=e}),R.Sb(),R.Sb(),R.Tb(5,"mat-form-field",12),R.Tb(6,"input",65),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).documento.numero=e}),R.Sb(),R.Sb(),R.Tb(7,"mat-form-field",12),R.Tb(8,"input",66),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).documento.fecha=e}),R.Sb(),R.Sb(),R.Dc(9,ie,5,3,"mat-form-field",11),R.Tb(10,"div",15),R.Dc(11,oe,2,1,"button",16),R.Dc(12,ne,2,1,"button",67),R.Sb(),R.Sb()}if(2&t){const t=R.fc(2);R.Cb(2),R.lc("ngIf",t.saveToDB),R.Cb(2),R.lc("ngModel",t.documento.serie)("disabled",1==+t.documento.enviado),R.Cb(2),R.lc("ngModel",t.documento.numero)("disabled",1==+t.documento.enviado),R.Cb(2),R.lc("ngModel",t.documento.fecha)("disabled",1==+t.documento.enviado),R.Cb(1),R.lc("ngIf",t.saveToDB),R.Cb(2),R.lc("ngIf",t.saveToDB),R.Cb(1),R.lc("ngIf",t.saveToDB&&+t.documento.documento>0&&0==+t.documento.enviado)}}function ce(t,e){if(1&t&&(R.Tb(0,"mat-tab",62),R.Tb(1,"mat-card",1),R.Tb(2,"mat-card-title"),R.Tb(3,"h4"),R.Fc(4),R.Dc(5,Jt,3,0,"button",2),R.Dc(6,Zt,3,0,"button",2),R.Sb(),R.Sb(),R.Tb(7,"mat-card-content"),R.Dc(8,ae,13,10,"form",3),R.Sb(),R.Sb(),R.Sb()),2&t){const t=R.fc();R.Cb(4),R.Hc(" Documento del ingreso",t.ingreso.ingreso?" No. "+t.ingreso.ingreso:""," "),R.Cb(1),R.lc("ngIf",!t.showDocumentoForm),R.Cb(1),R.lc("ngIf",t.showDocumentoForm),R.Cb(2),R.lc("ngIf",t.showDocumentoForm)}}let re=(()=>{class t{constructor(t,e,i,o,n,a,c,r,s,l,d){this.dialog=t,this.snackBar=e,this.ls=i,this.ingresoSrvc=o,this.proveedorSrvc=n,this.tipoMovimientoSrvc=a,this.bodegaSrvc=c,this.articuloSrvc=r,this.presentacinSrvc=s,this.documentoTipoSrvc=l,this.tipoCompraVentaSrvc=d,this.saveToDB=!0,this.bodega=!0,this.produccion=!1,this.ingresoSavedEv=new R.o,this.showIngresoForm=!0,this.showDetalleIngresoForm=!0,this.showDocumentoForm=!0,this.detallesIngreso=[],this.displayedColumns=["articulo","presentacion","cantidad","costo_unitario","costo_total","deleteItem"],this.tiposMovimiento=[],this.proveedores=[],this.filteredProveedores=[],this.bodegas=[],this.articulos=[],this.filteredArticulos=[],this.presentaciones=[],this.fltrPresentaciones=[],this.esMovil=!1,this.bloqueoBotones=!1,this.txtArticuloSelected=void 0,this.txtProveedorSelected=void 0,this.documentosTipo=[],this.tiposCompraVenta=[],this.loadTiposMovimiento=()=>{this.tipoMovimientoSrvc.get({ingreso:1}).subscribe(t=>{t&&(this.tiposMovimiento=t)})},this.loadProveedores=()=>{this.proveedorSrvc.get().subscribe(t=>{t&&(this.proveedores=t)})},this.loadBodegas=()=>{this.bodegaSrvc.get({sede:+this.ls.get(A.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.bodegas=t)})},this.loadPresentaciones=()=>{this.presentacinSrvc.get().subscribe(t=>{t&&(this.presentaciones=t)})},this.loadDocumentosTipo=()=>{this.documentoTipoSrvc.get().subscribe(t=>{t&&(this.documentosTipo=t)})},this.loadTiposCompraVenta=()=>{this.tipoCompraVentaSrvc.get().subscribe(t=>{t&&(this.tiposCompraVenta=t)})},this.removeFromDetail=t=>{const e=this.detallesIngreso.findIndex(e=>+e.articulo==+t);e>=0&&(this.detallesIngreso.splice(e,1),this.updateTableDataSource())},this.resetIngreso=()=>{this.ingreso={ingreso:null,tipo_movimiento:null,fecha:B().format(A.a.dbDateFormat),bodega:null,usuario:this.ls.get(A.a.usrTokenVar).idusr||0,comentario:null,proveedor:null,estatus_movimiento:1},this.resetDetalleIngreso(),this.detallesIngreso=[],this.resetDocumento(),this.updateTableDataSource(),this.txtProveedorSelected=void 0},this.onSubmit=()=>{this.bloqueoBotones=!0,this.ingresoSrvc.save(this.ingreso).subscribe(t=>{this.resetIngreso(),t.exito&&(this.ingreso=t.ingreso,this.setProveedor(+this.ingreso.proveedor)),this.ingresoSavedEv.emit(),this.bloqueoBotones=!1})},this.loadArticulos=()=>{var t={};this.produccion&&(t={produccion:1}),this.articuloSrvc.getArticulosIngreso(t).subscribe(t=>{t&&(this.articulos=t)})},this.resetDetalleIngreso=()=>{this.detalleIngreso={ingreso_detalle:null,ingreso:this.ingreso.ingreso?this.ingreso.ingreso:null,articulo:null,cantidad:null,precio_unitario:null,precio_total:null,presentacion:0},this.txtArticuloSelected=void 0},this.loadDetalleIngreso=(t=+this.ingreso.ingreso)=>{this.ingresoSrvc.getDetalle(t,{ingreso:t}).subscribe(t=>{t&&(this.detallesIngreso=t,this.updateTableDataSource())})},this.getDetalleIngreso=(t=+this.ingreso.ingreso,e)=>{this.ingresoSrvc.getDetalle(t,{ingreso_detalle:e}).subscribe(t=>{t&&(this.detalleIngreso={ingreso_detalle:t[0].ingreso_detalle,ingreso:t[0].ingreso,articulo:t[0].articulo.articulo,cantidad:+t[0].cantidad,precio_unitario:+t[0].precio_unitario,precio_total:+t[0].precio_total,presentacion:t[0].presentacion.presentacion},this.setPresentaciones(),this.txtArticuloSelected=t[0].articulo,this.showDetalleIngresoForm=!0)})},this.onSubmitDetail=()=>{this.bloqueoBotones=!0,this.detalleIngreso.ingreso=this.ingreso.ingreso,this.detalleIngreso.precio_total=+this.detalleIngreso.cantidad*+this.detalleIngreso.precio_unitario,+this.detalleIngreso.cantidad<1&&(this.detalleIngreso.cantidad=1),this.ingresoSrvc.saveDetalle(this.detalleIngreso).subscribe(t=>{t&&(this.loadDetalleIngreso(),this.resetDetalleIngreso()),this.bloqueoBotones=!1})},this.agregaADetalle=()=>{var t,e=this.detallesIngreso.findIndex(t=>+t.articulo==+this.detalleIngreso.articulo);e>-1&&this.detallesIngreso.splice(e,1),t=this.articulos.filter(t=>+t.articulo==this.detalleIngreso.articulo),this.detalleIngreso.presentacion=t[0].presentacion_reporte,+this.detalleIngreso.cantidad<1&&(this.detalleIngreso.cantidad=1),this.detallesIngreso.push(this.detalleIngreso),this.resetDetalleIngreso(),this.updateTableDataSource()},this.addToDetail=()=>{this.detalleIngreso.cantidad>0?this.produccion||this.detalleIngreso.cantidad_utilizada>0?this.agregaADetalle():this.snackBar.open("ERROR: La cantidad a utilizar debe ser mayor a 0","Egreso",{duration:3e3}):this.snackBar.open("ERROR: La cantidad debe ser mayor a 0","Egreso",{duration:3e3})},this.editFromDetail=t=>{var e=this.detallesIngreso.filter(e=>+e.articulo==+t)[0];this.detalleIngreso={ingreso_detalle:e.ingreso_detalle,ingreso:e.ingreso,articulo:e.articulo,cantidad:+e.cantidad<1?1:e.cantidad,precio_unitario:e.precio_unitario,precio_total:e.precio_total,presentacion:e.presentacion,cantidad_utilizada:e.cantidad_utilizada},this.setPresentaciones(),this.txtArticuloSelected=this.articulos.filter(t=>+t.articulo==this.detalleIngreso.articulo)[0]},this.getDescripcionArticulo=t=>this.articulos.find(e=>+e.articulo==+t).descripcion||"",this.getDescripcionPresentacion=t=>this.presentaciones.find(e=>+e.presentacion==+t).descripcion||"",this.updateTableDataSource=()=>{this.dataSource=new p.k(this.detallesIngreso),this.dataSource.filterPredicate=(t,e)=>t.articulo.descripcion.toLowerCase().includes(e)},this.eliminarArticulo=t=>{this.detallesIngreso.splice(this.detallesIngreso.findIndex(e=>e.ingreso_detalle===t.ingreso_detalle),1),this.updateTableDataSource()},this.filtrarArticulos=t=>{if(t&&"string"==typeof t){const e=t.toLowerCase();this.filteredArticulos=this.articulos.filter(t=>t.descripcion.toLowerCase().includes(e))}else this.filteredArticulos=this.articulos},this.displayArticulo=t=>{if(t)return this.detalleIngreso.articulo=t.articulo,t.descripcion},this.filtrarProveedores=t=>{if(t&&"string"==typeof t){const e=t.toLowerCase();this.filteredProveedores=this.proveedores.filter(t=>t.razon_social.toLowerCase().includes(e)||t.nit.toLowerCase().includes(e))}else this.filteredProveedores=this.proveedores},this.displayProveedor=t=>{if(t)return this.ingreso.proveedor=t.proveedor,`(${t.nit}) ${t.razon_social}`},this.setPresentaciones=()=>{this.fltrPresentaciones=[];const t=this.articulos.findIndex(t=>+t.articulo==+this.detalleIngreso.articulo),e=this.articulos[t];this.fltrPresentaciones=this.presentaciones.filter(t=>+t.medida.medida==+e.presentacion.medida)},this.setProveedor=t=>this.txtProveedorSelected=this.proveedores.find(e=>+e.proveedor===t),this.applyFilter=t=>{this.dataSource.filter=t.toLocaleLowerCase()},this.resetDocumento=()=>this.documento={documento:null,ingreso:null,documento_tipo:null,serie:null,numero:null,fecha:null,tipo_compra_venta:null,enviado:0},this.setDocumentoIngreso=t=>{this.documento={documento:+t.documento,ingreso:+t.ingreso,documento_tipo:t.documento_tipo.documento_tipo,serie:t.serie,numero:t.numero,fecha:t.fecha,tipo_compra_venta:t.tipo_compra_venta.tipo_compra_venta,enviado:t.enviado}},this.loadDocumento=(t=this.ingreso.ingreso||null)=>{t&&this.ingresoSrvc.getDocumento({ingreso:t}).subscribe(t=>{t&&t.length>0?this.setDocumentoIngreso(t[0]):this.resetDocumento()})},this.submitDocumento=()=>{this.documento.ingreso=this.ingreso.ingreso,this.ingresoSrvc.saveDocumento(this.documento).subscribe(t=>{t.exito?(this.setDocumentoIngreso(t.documento),this.snackBar.open("Documento guardado con \xe9xito.","Ingreso",{duration:3e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Ingreso",{duration:7e3})})},this.enviarAConta=()=>{var t;+(null===(t=this.documento)||void 0===t?void 0:t.documento)>0&&this.dialog.open(W.a,{maxWidth:"400px",data:new W.b("Env\xedo a contabilidad","Una vez enviado a contabilidad no podr\xe1 modificar el ingreso ni el documento. \xbfDesea continuar?","S\xed","No")}).afterClosed().subscribe(t=>{t&&this.ingresoSrvc.enviarDocumentoAConta(this.documento.documento).subscribe(t=>{t.exito?(this.documento=t.documento,this.snackBar.open("Documento enviado a contabilidad.","Ingreso",{duration:3e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Ingreso",{duration:7e3})})})}}ngOnInit(){this.esMovil=this.ls.get(A.a.usrTokenVar).enmovil||!1,this.resetIngreso(),this.loadTiposMovimiento(),this.loadProveedores(),this.loadBodegas(),this.loadArticulos(),this.loadPresentaciones(),this.loadDocumentosTipo(),this.loadTiposCompraVenta(),this.bodega||(this.displayedColumns=["cantidad_utilizada","articulo","presentacion","cantidad","deleteItem"]),this.produccion&&(this.displayedColumns=["articulo","presentacion","cantidad","deleteItem"])}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(M.b),R.Nb(v.b),R.Nb($.a),R.Nb(j),R.Nb(V.a),R.Nb(K.a),R.Nb(Q.a),R.Nb(X.a),R.Nb(J.a),R.Nb(Z.a),R.Nb(Y.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-form-ingreso"]],inputs:{ingreso:"ingreso",saveToDB:"saveToDB",bodega:"bodega",produccion:"produccion"},outputs:{ingresoSavedEv:"ingresoSavedEv"},decls:13,vars:7,consts:[["label","Ingreso"],[1,"mat-elevation-z4","fullWidth"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],["label","Documento",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmIngreso","ngForm"],["class","fullWidth",4,"ngIf"],[1,"fullWidth"],["matInput","","type","date","placeholder","Fecha","name","fecha","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Comentarios","name","comentario",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent","class","btnAccion",3,"disabled",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["name","tipo_movimiento","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["name","bodega","required","",3,"ngModel","ngModelChange"],["name","bodega_origen",3,"ngModel","ngModelChange"],["type","button","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["type","button","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["type","text","placeholder","Proveedor","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith"],["autoProveedores","matAutocomplete"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",3,"click"],["matInput","","placeholder","Buscar",3,"keyup"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleIngreso","ngForm"],["type","text","placeholder","Art\xedculo","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith","optionSelected"],["autoArticulos","matAutocomplete"],["matInput","","placeholder","Cantidad","name","cantidad","type","number","step","0.01","min","1","required","",3,"ngModel","ngModelChange","change"],["mat-raised-button","","type","button","color","accent",3,"disabled","click",4,"ngIf"],["name","presentacion","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Cantidad a Utilizar","name","cantidad_utilizada","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Costo unitario Con IVA","name","precio_unitario","type","number","step","0.01","required","",3,"ngModel","ngModelChange","change"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","articulo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","presentacion"],["matColumnDef","cantidad_utilizada"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","cantidad"],["matColumnDef","costo_unitario"],["matColumnDef","costo_total"],["matColumnDef","deleteItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-header-row",""],["mat-row",""],["label","Documento"],["frmDocumento","ngForm"],["matInput","","type","text","placeholder","Serie","name","serie","minlength","1","maxlength","50","required","",3,"ngModel","disabled","ngModelChange"],["matInput","","type","text","placeholder","N\xfamero","name","numero","minlength","1","maxlength","50","required","",3,"ngModel","disabled","ngModelChange"],["matInput","","type","date","placeholder","Fecha","name","fecha","required","",3,"ngModel","disabled","ngModelChange"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"disabled","click",4,"ngIf"],["name","documento_tipo","required","",3,"ngModel","disabled","ngModelChange"],["name","tipo_compra_venta","required","",3,"ngModel","disabled","ngModelChange"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"]],template:function(t,e){1&t&&(R.Tb(0,"mat-tab-group"),R.Tb(1,"mat-tab",0),R.Tb(2,"mat-card",1),R.Tb(3,"mat-card-title"),R.Tb(4,"h4"),R.Fc(5),R.Dc(6,tt,3,0,"button",2),R.Dc(7,et,3,0,"button",2),R.Sb(),R.Sb(),R.Tb(8,"mat-card-content"),R.Dc(9,ht,13,8,"form",3),R.Sb(),R.Sb(),R.Dc(10,pt,1,0,"hr",4),R.Dc(11,Xt,12,7,"mat-card",5),R.Sb(),R.Dc(12,ce,9,4,"mat-tab",6),R.Sb()),2&t&&(R.Cb(5),R.Hc(" Ingreso",e.ingreso.ingreso?" No. "+e.ingreso.ingreso:""," "),R.Cb(1),R.lc("ngIf",!e.showIngresoForm),R.Cb(1),R.lc("ngIf",e.showIngresoForm),R.Cb(2),R.lc("ngIf",e.showIngresoForm),R.Cb(1),R.lc("ngIf",e.ingreso.ingreso||!e.saveToDB),R.Cb(1),R.lc("ngIf",e.ingreso.ingreso||!e.saveToDB),R.Cb(1),R.lc("ngIf",+e.ingreso.ingreso>0))},directives:[h.b,h.a,b.a,b.h,o.m,b.c,S.a,l.a,a.r,a.l,a.m,d.b,u.b,a.c,a.p,a.k,a.n,d.f,m.a,o.l,G.m,d.g,F.c,F.a,a.o,p.j,p.c,p.e,p.b,p.g,p.i,p.d,p.a,p.f,p.h,a.g,a.f],pipes:[o.f],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}"]}),t})();const se=["lstIngreso"],le=["frmIngreso"];let de=(()=>{class t{constructor(t){this.ls=t,this.breakpoint=2,this.onWindowResize=t=>{this.breakpoint=t.target.innerWidth<=360?1:2},this.setIngreso=t=>{this.ingreso=t,this.frmIngreso.setProveedor(+this.ingreso.proveedor),this.frmIngreso.loadDetalleIngreso(+this.ingreso.ingreso),this.frmIngreso.resetDetalleIngreso(),this.frmIngreso.loadDocumento(this.ingreso.ingreso)},this.refreshIngresoList=()=>{this.lstIngresoComponent.loadIngresos()},this.ingreso={ingreso:null,tipo_movimiento:null,fecha:B().format(A.a.dbDateFormat),bodega:null,usuario:this.ls.get(A.a.usrTokenVar).idusr||0,comentario:null,proveedor:null}}ngOnInit(){this.breakpoint=window.innerWidth<=360?1:2}}return t.\u0275fac=function(e){return new(e||t)(R.Nb($.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-ingreso"]],viewQuery:function(t,e){if(1&t&&(R.Kc(se,1),R.Kc(le,1)),2&t){let t;R.sc(t=R.cc())&&(e.lstIngresoComponent=t.first),R.sc(t=R.cc())&&(e.frmIngreso=t.first)}},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getIngresoEv"],["lstIngreso",""],[1,"col","m7","s12"],[3,"ingreso","ingresoSavedEv"],["frmIngreso",""]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"app-lista-ingreso",2,3),R.bc("getIngresoEv",function(t){return e.setIngreso(t)}),R.Sb(),R.Sb(),R.Tb(4,"div",4),R.Tb(5,"app-form-ingreso",5,6),R.bc("ingresoSavedEv",function(){return e.refreshIngresoList()}),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(5),R.lc("ingreso",e.ingreso))},directives:[L,re],styles:[""]}),t})(),ue=(()=>{class t{constructor(t){this.http=t,this.egresoUrl="egreso",this.srvcErrHndl=new H.a}get(t={}){return this.http.get(`${A.a.urlWms}/${this.egresoUrl}/buscar_egreso?${U.stringify(t)}`).pipe(Object(P.a)(A.a.reintentos),Object(N.a)(this.srvcErrHndl.errorHandler))}save(t){return this.http.post(`${A.a.urlWms}/${this.egresoUrl}/guardar${+t.egreso>0?"/"+t.egreso:""}`,t).pipe(Object(P.a)(A.a.reintentos),Object(N.a)(this.srvcErrHndl.errorHandler))}getDetalle(t,e={}){return this.http.get(`${A.a.urlWms}/${this.egresoUrl}/buscar_detalle/${t}?${U.stringify(e)}`).pipe(Object(P.a)(A.a.reintentos),Object(N.a)(this.srvcErrHndl.errorHandler))}saveDetalle(t){return this.http.post(`${A.a.urlWms}/${this.egresoUrl}/guardar_detalle/${t.egreso}${+t.egreso_detalle>0?"/"+t.egreso_detalle:""}`,t).pipe(Object(P.a)(A.a.reintentos),Object(N.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(R.Xb(n.b))},t.\u0275prov=R.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const be=function(){return{standalone:!0}};function ge(t,e){if(1&t){const t=R.Ub();R.Tb(0,"input",6),R.bc("input",function(){return R.xc(t),R.fc().applyFilter()})("ngModelChange",function(e){return R.xc(t),R.fc().txtFiltro=e}),R.Sb()}if(2&t){const t=R.fc();R.lc("matKeyboard",t.keyboardLayout)("ngModel",t.txtFiltro)("ngModelOptions",R.nc(3,be))}}function he(t,e){if(1&t){const t=R.Ub();R.Tb(0,"input",7),R.bc("keyup",function(){return R.xc(t),R.fc().applyFilter()})("ngModelChange",function(e){return R.xc(t),R.fc().txtFiltro=e}),R.Sb()}if(2&t){const t=R.fc();R.lc("ngModel",t.txtFiltro)("ngModelOptions",R.nc(2,be))}}function pe(t,e){if(1&t&&(R.Tb(0,"span",10),R.Fc(1),R.Sb()),2&t){const t=R.fc().$implicit;R.Cb(1),R.Hc("Comanda: #",t.idcomandafox,"")}}function me(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-list-item",8),R.bc("click",function(){R.xc(t);const i=e.$implicit;return R.fc().getEgreso(i)}),R.Tb(1,"mat-icon",9),R.Fc(2,"trending_down"),R.Sb(),R.Tb(3,"h5",10),R.Fc(4),R.Sb(),R.Ob(5,"br"),R.Tb(6,"p",10),R.Fc(7),R.gc(8,"date"),R.Ob(9,"br"),R.Fc(10),R.Ob(11,"br"),R.Sb(),R.Dc(12,pe,2,1,"span",11),R.Sb()}if(2&t){const t=e.$implicit;R.Cb(4),R.Hc("No. ",t.egreso,""),R.Cb(3),R.Hc(" Fecha: ",R.ic(8,4,t.fecha,"dd/MM/yyyy"),""),R.Cb(3),R.Hc(" Bodega: ",t.bodega.descripcion,""),R.Cb(2),R.lc("ngIf",!!t.idcomandafox)}}let fe=(()=>{class t{constructor(t,e){this.egresoSrvc=t,this.ls=e,this.getEgresoEv=new R.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.keyboardLayout=A.a.IDIOMA_TECLADO,this.esMovil=!1,this.loadEgresos=()=>{this.egresoSrvc.get().subscribe(t=>{t&&t.length>0&&(this.lstEgresos=t,this.applyFilter())})},this.getEgreso=t=>{this.getEgresoEv.emit({egreso:t.egreso,tipo_movimiento:t.tipo_movimiento.tipo_movimiento,bodega:t.bodega.bodega,fecha:t.fecha,usuario:t.usuario.usuario,estatus_movimiento:t.estatus_movimiento||1,traslado:t.traslado||0,idcomandafox:t.idcomandafox})},this.pageChange=t=>{this.pageSize=t.pageSize,this.pageIndex=t.pageIndex,this.applyFilter()}}ngOnInit(){this.esMovil=this.ls.get(A.a.usrTokenVar).enmovil||!1,this.loadEgresos()}applyFilter(){if(this.txtFiltro.length>0){const t=Object(A.b)(this.lstEgresos,this.txtFiltro);this.length=t.length,this.lstEgresosPaged=Object(A.e)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstEgresos.length,this.lstEgresosPaged=Object(A.e)(this.lstEgresos,this.pageSize,this.pageIndex+1)}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(ue),R.Nb($.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-lista-egreso"]],outputs:{getEgresoEv:"getEgresoEv"},decls:8,vars:6,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"matKeyboard","ngModel","ngModelOptions","input","ngModelChange",4,"ngIf"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["matInput","","placeholder","Buscar...",3,"matKeyboard","ngModel","ngModelOptions","input","ngModelChange"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click"],["mat-list-icon",""],["mat-line",""],["mat-line","",4,"ngIf"]],template:function(t,e){1&t&&(R.Tb(0,"mat-card",0),R.Tb(1,"mat-card-content"),R.Tb(2,"mat-form-field",1),R.Dc(3,ge,1,4,"input",2),R.Dc(4,he,1,3,"input",3),R.Sb(),R.Tb(5,"mat-nav-list"),R.Dc(6,me,13,7,"mat-list-item",4),R.Sb(),R.Tb(7,"mat-paginator",5),R.bc("page",function(t){return e.pageChange(t)}),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(3),R.lc("ngIf",!e.esMovil),R.Cb(1),R.lc("ngIf",e.esMovil),R.Cb(2),R.lc("ngForOf",e.lstEgresosPaged),R.Cb(1),R.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[b.a,b.c,d.b,o.m,s.e,o.l,x.a,u.b,O.a,a.c,a.k,a.n,s.c,l.a,s.b,G.j],pipes:[o.e],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),t})(),Se=(()=>{class t{constructor(t){this.http=t,this.conversorUrl="conversor",this.srvcErrHndl=new H.a}transformar(t){return this.http.post(`${A.a.urlWms}/${this.conversorUrl}/transformar`,t).pipe(Object(P.a)(A.a.reintentos),Object(N.a)(this.srvcErrHndl.errorHandler))}producir(t){return this.http.post(`${A.a.urlWms}/${this.conversorUrl}/producir`,t).pipe(Object(P.a)(A.a.reintentos),Object(N.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(R.Xb(n.b))},t.\u0275prov=R.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ve(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",5),R.bc("click",function(){return R.xc(t),R.fc().showEgresoForm=!0}),R.Tb(1,"mat-icon",6),R.Fc(2,"expand_more"),R.Sb(),R.Sb()}}function Ce(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",5),R.bc("click",function(){return R.xc(t),R.fc().showEgresoForm=!1}),R.Tb(1,"mat-icon",6),R.Fc(2,"expand_less"),R.Sb(),R.Sb()}}function Te(t,e){if(1&t&&(R.Tb(0,"mat-option",20),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.tipo_movimiento),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function _e(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",10),R.Tb(1,"mat-label"),R.Fc(2,"Tipo de movimiento"),R.Sb(),R.Tb(3,"mat-select",19),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).egreso.tipo_movimiento=e}),R.Dc(4,Te,2,2,"mat-option",13),R.Sb(),R.Sb()}if(2&t){const t=R.fc(2);R.Cb(3),R.lc("ngModel",t.egreso.tipo_movimiento),R.Cb(1),R.lc("ngForOf",t.tiposMovimiento)}}function xe(t,e){if(1&t&&(R.Tb(0,"mat-option",20),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.bodega),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function Me(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-checkbox",21),R.bc("ngModelChange",function(e){return R.xc(t),+(R.fc(2).egreso.traslado=e)}),R.Fc(1,"\xbfEs traslado entre bodegas de la misma sede? "),R.Sb()}if(2&t){const t=R.fc(2);R.lc("ngModel",+t.egreso.traslado)}}function Ie(t,e){if(1&t&&(R.Tb(0,"mat-option",20),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.bodega),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function De(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",10),R.Tb(1,"mat-label"),R.Fc(2,"Bodega destino"),R.Sb(),R.Tb(3,"mat-select",22),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).egreso.bodega_destino=e}),R.Dc(4,Ie,2,2,"mat-option",13),R.Sb(),R.Sb()}if(2&t){const t=R.fc(2);R.Cb(3),R.lc("ngModel",t.egreso.bodega_destino)("required",1==+t.egreso.traslado),R.Cb(1),R.lc("ngForOf",t.bodegas)}}function Fe(t,e){if(1&t&&(R.Tb(0,"mat-option",20),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.tipo_movimiento),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function ye(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",10),R.Tb(1,"mat-label"),R.Fc(2,"Tipo de movimiento destino"),R.Sb(),R.Tb(3,"mat-select",23),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).egreso.tipo_movimiento_destino=e}),R.Dc(4,Fe,2,2,"mat-option",13),R.Sb(),R.Sb()}if(2&t){const t=R.fc(2);R.Cb(3),R.lc("ngModel",t.egreso.tipo_movimiento_destino)("required",1==+t.egreso.traslado),R.Cb(1),R.lc("ngForOf",t.tiposMovimientoIngreso)}}function ke(t,e){if(1&t&&(R.Tb(0,"span"),R.Ob(1,"br"),R.Tb(2,"strong"),R.Fc(3),R.Sb(),R.Sb()),2&t){const t=R.fc(2);R.Cb(3),R.Hc("Comanda: #",t.egreso.idcomandafox,"")}}const Oe=function(){return[2,3]};function we(t,e){if(1&t&&(R.Tb(0,"button",24),R.Fc(1," Guardar "),R.Sb()),2&t){R.fc();const t=R.tc(1),e=R.fc();R.lc("disabled",!t.form.valid||R.nc(1,Oe).indexOf(+e.egreso.estatus_movimiento)>=0||e.bloqueoBotones)}}function Ee(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",25),R.bc("click",function(){return R.xc(t),R.fc(2).confirmarEgreso()}),R.Fc(1," Confirmar "),R.Sb()}if(2&t){R.fc();const t=R.tc(1),e=R.fc();R.lc("disabled",!t.form.valid||R.nc(1,Oe).indexOf(+e.egreso.estatus_movimiento)>=0)}}function Ae(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",26),R.bc("click",function(){return R.xc(t),R.fc(2).resetEgreso()}),R.Fc(1," Nuevo "),R.Sb()}}function Be(t,e){if(1&t){const t=R.Ub();R.Tb(0,"form",7,8),R.bc("ngSubmit",function(){R.xc(t);const e=R.tc(1),i=R.fc();return e.form.valid&&i.onSubmit()}),R.Dc(2,_e,5,2,"mat-form-field",9),R.Tb(3,"mat-form-field",10),R.Tb(4,"input",11),R.bc("ngModelChange",function(e){return R.xc(t),R.fc().egreso.fecha=e}),R.Sb(),R.Sb(),R.Tb(5,"mat-form-field",10),R.Tb(6,"mat-label"),R.Fc(7,"Bodega"),R.Sb(),R.Tb(8,"mat-select",12),R.bc("ngModelChange",function(e){return R.xc(t),R.fc().egreso.bodega=e}),R.Dc(9,xe,2,2,"mat-option",13),R.Sb(),R.Sb(),R.Dc(10,Me,2,1,"mat-checkbox",14),R.Dc(11,De,5,3,"mat-form-field",9),R.Dc(12,ye,5,3,"mat-form-field",9),R.Dc(13,ke,4,1,"span",3),R.Tb(14,"div",15),R.Dc(15,we,2,2,"button",16),R.Dc(16,Ee,2,2,"button",17),R.Dc(17,Ae,2,0,"button",18),R.Sb(),R.Sb()}if(2&t){const t=R.fc();R.Cb(2),R.lc("ngIf",t.saveToDB),R.Cb(2),R.lc("ngModel",t.egreso.fecha),R.Cb(4),R.lc("ngModel",t.egreso.bodega),R.Cb(1),R.lc("ngForOf",t.bodegas),R.Cb(1),R.lc("ngIf",t.saveToDB),R.Cb(1),R.lc("ngIf",1==+t.egreso.traslado&&R.nc(11,Oe).indexOf(+t.egreso.estatus_movimiento)<0),R.Cb(1),R.lc("ngIf",1==+t.egreso.traslado&&R.nc(12,Oe).indexOf(+t.egreso.estatus_movimiento)<0),R.Cb(1),R.lc("ngIf",!!t.egreso.idcomandafox),R.Cb(2),R.lc("ngIf",t.saveToDB),R.Cb(1),R.lc("ngIf",t.egreso.egreso&&t.detallesEgreso.length>0),R.Cb(1),R.lc("ngIf",t.egreso.egreso)}}function Re(t,e){1&t&&R.Ob(0,"hr")}function $e(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",5),R.bc("click",function(){return R.xc(t),R.fc(2).showDetalleEgresoForm=!0}),R.Tb(1,"mat-icon",6),R.Fc(2,"expand_more"),R.Sb(),R.Sb()}}function He(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",5),R.bc("click",function(){return R.xc(t),R.fc(2).showDetalleEgresoForm=!1}),R.Tb(1,"mat-icon",6),R.Fc(2,"expand_less"),R.Sb(),R.Sb()}}function Pe(t,e){if(1&t&&(R.Tb(0,"mat-option",20),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function Ne(t,e){if(1&t&&(R.Tb(0,"mat-option",20),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.presentacion),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function Ue(t,e){if(1&t&&(R.Tb(0,"button",24),R.Fc(1," Guardar "),R.Sb()),2&t){R.fc();const t=R.tc(1),e=R.fc(2);R.lc("disabled",!t.form.valid||R.nc(1,Oe).indexOf(+e.egreso.estatus_movimiento)>=0||e.bloqueoBotones)}}function je(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",37),R.bc("click",function(){return R.xc(t),R.fc(3).addToDetail()}),R.Fc(1," Guardar "),R.Sb()}if(2&t){R.fc();const t=R.tc(1),e=R.fc(2);R.lc("disabled",!e.egreso.bodega||!t.form.valid||R.nc(1,Oe).indexOf(+e.egreso.estatus_movimiento)>=0)}}function Ge(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",26),R.bc("click",function(){return R.xc(t),R.fc(3).resetDetalleEgreso()}),R.Fc(1," Nuevo "),R.Sb()}}const ze=function(){return{standalone:!0}};function qe(t,e){if(1&t){const t=R.Ub();R.Tb(0,"form",7,30),R.bc("ngSubmit",function(){R.xc(t);const e=R.tc(1),i=R.fc(2);return e.form.valid&&i.onSubmitDetail()}),R.Tb(2,"mat-form-field",10),R.Tb(3,"mat-label"),R.Fc(4,"Art\xedculo"),R.Sb(),R.Tb(5,"input",31),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).txtArticuloSelected=e})("keyup",function(){R.xc(t);const e=R.fc(2);return e.filtrarArticulos(e.txtArticuloSelected)}),R.Sb(),R.Tb(6,"mat-autocomplete",32,33),R.bc("optionSelected",function(){return R.xc(t),R.fc(2).setPresentaciones()}),R.Dc(8,Pe,2,2,"mat-option",13),R.Sb(),R.Sb(),R.Tb(9,"mat-form-field",10),R.Tb(10,"mat-label"),R.Fc(11,"Presentaci\xf3n"),R.Sb(),R.Tb(12,"mat-select",34),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).detalleEgreso.presentacion=e}),R.Dc(13,Ne,2,2,"mat-option",13),R.Sb(),R.Sb(),R.Tb(14,"mat-form-field",10),R.Tb(15,"input",35),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).detalleEgreso.cantidad=e})("change",function(){R.xc(t);const e=R.fc(2);return e.detalleEgreso.precio_total=+e.detalleEgreso.precio_unitario*+e.detalleEgreso.cantidad}),R.Sb(),R.Sb(),R.Tb(16,"div",15),R.Dc(17,Ue,2,2,"button",16),R.Dc(18,je,2,2,"button",36),R.Dc(19,Ge,2,0,"button",18),R.Sb(),R.Sb()}if(2&t){const t=R.tc(7),e=R.fc(2);R.Cb(5),R.lc("ngModel",e.txtArticuloSelected)("ngModelOptions",R.nc(11,ze))("matAutocomplete",t),R.Cb(1),R.lc("displayWith",e.displayArticulo),R.Cb(2),R.lc("ngForOf",e.filteredArticulos),R.Cb(4),R.lc("ngModel",e.detalleEgreso.presentacion),R.Cb(1),R.lc("ngForOf",e.fltrPresentaciones),R.Cb(2),R.lc("ngModel",e.detalleEgreso.cantidad),R.Cb(2),R.lc("ngIf",e.saveToDB),R.Cb(1),R.lc("ngIf",!e.saveToDB),R.Cb(1),R.lc("ngIf",e.detalleEgreso.egreso_detalle)}}function Le(t,e){1&t&&R.Ob(0,"hr")}function We(t,e){if(1&t){const t=R.Ub();R.Tb(0,"input",38),R.bc("input",function(e){return R.xc(t),R.fc(2).applyFilter(e.target.value)}),R.Sb()}if(2&t){const t=R.fc(2);R.lc("matKeyboard",t.keyboardLayout)}}function Ve(t,e){if(1&t){const t=R.Ub();R.Tb(0,"input",39),R.bc("keyup",function(e){return R.xc(t),R.fc(2).applyFilter(e.target.value)}),R.Sb()}}function Ke(t,e){1&t&&(R.Tb(0,"th",53),R.Fc(1,"Art\xedculo"),R.Sb())}function Qe(t,e){if(1&t&&(R.Tb(0,"td",54),R.Fc(1),R.Sb()),2&t){const t=e.$implicit,i=R.fc(3);R.Cb(1),R.Hc(" ",i.saveToDB?t.articulo.descripcion:i.getDescripcionArticulo(t.articulo),"")}}function Xe(t,e){1&t&&(R.Tb(0,"th",53),R.Fc(1,"Presentaci\xf3n"),R.Sb())}function Je(t,e){if(1&t&&(R.Tb(0,"td",54),R.Fc(1),R.Sb()),2&t){const t=e.$implicit,i=R.fc(3);R.Cb(1),R.Hc(" ",i.saveToDB?t.presentacion.descripcion:i.getDescripcionPresentacion(t.presentacion)," ")}}function Ze(t,e){1&t&&(R.Tb(0,"th",55),R.Fc(1,"Cantidad"),R.Sb())}function Ye(t,e){if(1&t&&(R.Tb(0,"td",56),R.Fc(1),R.gc(2,"number"),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.Gc(R.ic(2,1,t.cantidad,"1.2-2"))}}function ti(t,e){1&t&&(R.Tb(0,"th",55),R.Fc(1,"Costo Unitario"),R.Sb())}function ei(t,e){if(1&t&&(R.Tb(0,"td",56),R.Fc(1),R.gc(2,"number"),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.Hc("",R.ic(2,1,t.precio_unitario,"1.2-2")," ")}}function ii(t,e){1&t&&(R.Tb(0,"th",55),R.Fc(1,"Costo Total"),R.Sb())}function oi(t,e){if(1&t&&(R.Tb(0,"td",56),R.Fc(1),R.gc(2,"number"),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.Gc(R.ic(2,1,t.precio_total,"1.2-2"))}}function ni(t,e){1&t&&(R.Tb(0,"th",53),R.Fc(1,"\xa0"),R.Sb())}function ai(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",25),R.bc("click",function(){R.xc(t);const e=R.fc().$implicit;return R.fc(3).getDetalleEgreso(e.egreso,e.egreso_detalle)}),R.Fc(1," Editar "),R.Sb()}if(2&t){const t=R.fc(4);R.lc("disabled",R.nc(1,Oe).indexOf(+t.egreso.estatus_movimiento)>=0||t.bloqueoBotones)}}function ci(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",37),R.bc("click",function(){R.xc(t);const e=R.fc().$implicit;return R.fc(3).editFromDetail(e.articulo)}),R.Fc(1," Editar "),R.Sb()}if(2&t){const t=R.fc(4);R.lc("disabled",R.nc(1,Oe).indexOf(+t.egreso.estatus_movimiento)>=0||t.bloqueoBotones)}}function ri(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",37),R.bc("click",function(){R.xc(t);const e=R.fc().$implicit;return R.fc(3).removeFromDetail(e.articulo)}),R.Fc(1," Eliminar "),R.Sb()}if(2&t){const t=R.fc(4);R.lc("disabled",R.nc(1,Oe).indexOf(+t.egreso.estatus_movimiento)>=0||t.bloqueoBotones)}}function si(t,e){if(1&t&&(R.Tb(0,"td",54),R.Dc(1,ai,2,2,"button",17),R.Dc(2,ci,2,2,"button",36),R.Dc(3,ri,2,2,"button",36),R.Sb()),2&t){const t=R.fc(3);R.Cb(1),R.lc("ngIf",t.saveToDB),R.Cb(1),R.lc("ngIf",!t.saveToDB),R.Cb(1),R.lc("ngIf",!t.saveToDB)}}function li(t,e){1&t&&R.Ob(0,"tr",57)}function di(t,e){1&t&&R.Ob(0,"tr",58)}function ui(t,e){if(1&t&&(R.Tb(0,"table",40),R.Rb(1,41),R.Dc(2,Ke,2,0,"th",42),R.Dc(3,Qe,2,1,"td",43),R.Qb(),R.Rb(4,44),R.Dc(5,Xe,2,0,"th",42),R.Dc(6,Je,2,1,"td",43),R.Qb(),R.Rb(7,45),R.Dc(8,Ze,2,0,"th",46),R.Dc(9,Ye,3,4,"td",47),R.Qb(),R.Rb(10,48),R.Dc(11,ti,2,0,"th",46),R.Dc(12,ei,3,4,"td",47),R.Qb(),R.Rb(13,49),R.Dc(14,ii,2,0,"th",46),R.Dc(15,oi,3,4,"td",47),R.Qb(),R.Rb(16,50),R.Dc(17,ni,2,0,"th",42),R.Dc(18,si,4,3,"td",43),R.Qb(),R.Dc(19,li,1,0,"tr",51),R.Dc(20,di,1,0,"tr",52),R.Sb()),2&t){const t=R.fc(2);R.lc("dataSource",t.dataSource),R.Cb(19),R.lc("matHeaderRowDef",t.displayedColumns),R.Cb(1),R.lc("matRowDefColumns",t.displayedColumns)}}function bi(t,e){if(1&t&&(R.Tb(0,"mat-card",0),R.Tb(1,"mat-card-title"),R.Tb(2,"h4"),R.Fc(3),R.Dc(4,$e,3,0,"button",1),R.Dc(5,He,3,0,"button",1),R.Sb(),R.Sb(),R.Tb(6,"mat-card-content"),R.Dc(7,qe,20,12,"form",2),R.Dc(8,Le,1,0,"hr",3),R.Tb(9,"mat-form-field",10),R.Dc(10,We,1,1,"input",27),R.Dc(11,Ve,1,0,"input",28),R.Sb(),R.Dc(12,ui,21,3,"table",29),R.Sb(),R.Sb()),2&t){const t=R.fc();R.Cb(3),R.Ic(" Detalle del egreso ",t.saveToDB?"No.":""," ",t.egreso.egreso," "),R.Cb(1),R.lc("ngIf",!t.showDetalleEgresoForm),R.Cb(1),R.lc("ngIf",t.showDetalleEgresoForm),R.Cb(2),R.lc("ngIf",t.showDetalleEgresoForm),R.Cb(1),R.lc("ngIf",t.detallesEgreso.length>0),R.Cb(2),R.lc("ngIf",!t.esMovil),R.Cb(1),R.lc("ngIf",t.esMovil),R.Cb(1),R.lc("ngIf",t.detallesEgreso.length>0)}}function gi(t,e){1&t&&R.Ob(0,"hr")}function hi(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",5),R.bc("click",function(){return R.xc(t),R.fc(2).showDetalleEgresoForm=!0}),R.Tb(1,"mat-icon",6),R.Fc(2,"expand_more"),R.Sb(),R.Sb()}}function pi(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",5),R.bc("click",function(){return R.xc(t),R.fc(2).showDetalleEgresoForm=!1}),R.Tb(1,"mat-icon",6),R.Fc(2,"expand_less"),R.Sb(),R.Sb()}}function mi(t,e){if(1&t&&(R.Tb(0,"mat-option",20),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function fi(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",37),R.bc("click",function(){return R.xc(t),R.fc(3).addToDetailMerma()}),R.Fc(1," Guardar "),R.Sb()}if(2&t){R.fc();const t=R.tc(1),e=R.fc(2);R.lc("disabled",!e.detalleMerma.articulo||!t.form.valid||R.nc(1,Oe).indexOf(+e.egreso.estatus_movimiento)>=0)}}function Si(t,e){if(1&t){const t=R.Ub();R.Tb(0,"form",7,59),R.bc("ngSubmit",function(){R.xc(t);const e=R.tc(1),i=R.fc(2);return e.form.valid&&i.onSubmitDetail()}),R.Tb(2,"mat-form-field",10),R.Tb(3,"mat-label"),R.Fc(4,"Art\xedculo"),R.Sb(),R.Tb(5,"input",31),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).txtArticuloSelectedM=e})("keyup",function(){R.xc(t);const e=R.fc(2);return e.filtrarArticulos(e.txtArticuloSelectedM)}),R.Sb(),R.Tb(6,"mat-autocomplete",32,33),R.bc("optionSelected",function(){return R.xc(t),R.fc(2).setPresentacionesMerma()}),R.Dc(8,mi,2,2,"mat-option",13),R.Sb(),R.Sb(),R.Tb(9,"mat-form-field",10),R.Tb(10,"input",60),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).detalleMerma.cantidad_utilizada=e}),R.Sb(),R.Sb(),R.Tb(11,"mat-form-field",10),R.Tb(12,"input",61),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).detalleMerma.cantidad=e}),R.Sb(),R.Sb(),R.Tb(13,"div",15),R.Dc(14,fi,2,2,"button",36),R.Sb(),R.Sb()}if(2&t){const t=R.tc(7),e=R.fc(2);R.Cb(5),R.lc("ngModel",e.txtArticuloSelectedM)("ngModelOptions",R.nc(8,ze))("matAutocomplete",t),R.Cb(1),R.lc("displayWith",e.displayArticuloMerma),R.Cb(2),R.lc("ngForOf",e.filteredArticulos),R.Cb(2),R.lc("ngModel",e.detalleMerma.cantidad_utilizada),R.Cb(2),R.lc("ngModel",e.detalleMerma.cantidad),R.Cb(2),R.lc("ngIf",!e.saveToDB)}}function vi(t,e){1&t&&R.Ob(0,"hr")}function Ci(t,e){1&t&&(R.Tb(0,"th",53),R.Fc(1,"Art\xedculo"),R.Sb())}function Ti(t,e){if(1&t&&(R.Tb(0,"td",54),R.Fc(1),R.Sb()),2&t){const t=e.$implicit,i=R.fc(3);R.Cb(1),R.Hc(" ",i.saveToDB?t.articulo.descripcion:i.getDescripcionArticulo(t.articulo),"")}}function _i(t,e){1&t&&(R.Tb(0,"th",53),R.Fc(1,"Presentaci\xf3n"),R.Sb())}function xi(t,e){if(1&t&&(R.Tb(0,"td",54),R.Fc(1),R.Sb()),2&t){const t=e.$implicit,i=R.fc(3);R.Cb(1),R.Hc(" ",i.saveToDB?t.presentacion.descripcion:i.getDescripcionPresentacion(t.presentacion)," ")}}function Mi(t,e){1&t&&(R.Tb(0,"th",55),R.Fc(1,"Cantidad a Utilizar"),R.Sb())}function Ii(t,e){if(1&t&&(R.Tb(0,"td",56),R.Fc(1),R.gc(2,"number"),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.Gc(R.ic(2,1,t.cantidad_utilizada,"1.2-2"))}}function Di(t,e){1&t&&(R.Tb(0,"th",55),R.Fc(1,"Cantidad"),R.Sb())}function Fi(t,e){if(1&t&&(R.Tb(0,"td",56),R.Fc(1),R.gc(2,"number"),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.Gc(R.ic(2,1,t.cantidad,"1.2-2"))}}function yi(t,e){1&t&&(R.Tb(0,"th",53),R.Fc(1,"\xa0"),R.Sb())}function ki(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",25),R.bc("click",function(){R.xc(t);const e=R.fc().$implicit;return R.fc(3).getDetalleEgreso(e.egreso,e.egreso_detalle)}),R.Fc(1," Editar "),R.Sb()}if(2&t){const t=R.fc(4);R.lc("disabled",R.nc(1,Oe).indexOf(+t.egreso.estatus_movimiento)>=0||t.bloqueoBotones)}}function Oi(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",37),R.bc("click",function(){R.xc(t);const e=R.fc().$implicit;return R.fc(3).editFromDetailMerma(e.articulo)}),R.Fc(1," Editar "),R.Sb()}if(2&t){const t=R.fc(4);R.lc("disabled",R.nc(1,Oe).indexOf(+t.egreso.estatus_movimiento)>=0||t.bloqueoBotones)}}function wi(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",37),R.bc("click",function(){R.xc(t);const e=R.fc().$implicit;return R.fc(3).removeFromDetailMerma(e.articulo)}),R.Fc(1," Eliminar "),R.Sb()}if(2&t){const t=R.fc(4);R.lc("disabled",R.nc(1,Oe).indexOf(+t.egreso.estatus_movimiento)>=0||t.bloqueoBotones)}}function Ei(t,e){if(1&t&&(R.Tb(0,"td",54),R.Dc(1,ki,2,2,"button",17),R.Dc(2,Oi,2,2,"button",36),R.Dc(3,wi,2,2,"button",36),R.Sb()),2&t){const t=R.fc(3);R.Cb(1),R.lc("ngIf",t.saveToDB),R.Cb(1),R.lc("ngIf",!t.saveToDB),R.Cb(1),R.lc("ngIf",!t.saveToDB)}}function Ai(t,e){1&t&&R.Ob(0,"tr",57)}function Bi(t,e){1&t&&R.Ob(0,"tr",58)}function Ri(t,e){if(1&t&&(R.Tb(0,"table",40),R.Rb(1,41),R.Dc(2,Ci,2,0,"th",42),R.Dc(3,Ti,2,1,"td",43),R.Qb(),R.Rb(4,44),R.Dc(5,_i,2,0,"th",42),R.Dc(6,xi,2,1,"td",43),R.Qb(),R.Rb(7,62),R.Dc(8,Mi,2,0,"th",46),R.Dc(9,Ii,3,4,"td",47),R.Qb(),R.Rb(10,45),R.Dc(11,Di,2,0,"th",46),R.Dc(12,Fi,3,4,"td",47),R.Qb(),R.Rb(13,50),R.Dc(14,yi,2,0,"th",42),R.Dc(15,Ei,4,3,"td",43),R.Qb(),R.Dc(16,Ai,1,0,"tr",51),R.Dc(17,Bi,1,0,"tr",52),R.Sb()),2&t){const t=R.fc(2);R.lc("dataSource",t.dataSourceM),R.Cb(16),R.lc("matHeaderRowDef",t.displayedColumnsM),R.Cb(1),R.lc("matRowDefColumns",t.displayedColumnsM)}}function $i(t,e){if(1&t&&(R.Tb(0,"mat-card",0),R.Tb(1,"mat-card-title"),R.Tb(2,"h4"),R.Fc(3),R.Dc(4,hi,3,0,"button",1),R.Dc(5,pi,3,0,"button",1),R.Sb(),R.Sb(),R.Tb(6,"mat-card-content"),R.Dc(7,Si,15,9,"form",2),R.Dc(8,vi,1,0,"hr",3),R.Dc(9,Ri,18,3,"table",29),R.Sb(),R.Sb()),2&t){const t=R.fc();R.Cb(3),R.Ic(" Merma ",t.saveToDB?"No.":""," ",t.egreso.egreso," "),R.Cb(1),R.lc("ngIf",!t.showDetalleEgresoForm),R.Cb(1),R.lc("ngIf",t.showDetalleEgresoForm),R.Cb(2),R.lc("ngIf",t.showDetalleEgresoForm),R.Cb(1),R.lc("ngIf",t.detallesMerma.length>0),R.Cb(1),R.lc("ngIf",t.detallesMerma.length>0)}}let Hi=(()=>{class t{constructor(t,e,i,o,n,a,c,r,s){this.snackBar=t,this.ls=e,this.egresoSrvc=i,this.tipoMovimientoSrvc=o,this.bodegaSrvc=n,this.articuloSrvc=a,this.proveedorSrvc=c,this.transformacionSrvc=r,this.presentacionSrvc=s,this.saveToDB=!0,this.egresoSavedEv=new R.o,this.showEgresoForm=!0,this.showDetalleEgresoForm=!0,this.detallesEgreso=[],this.detallesMerma=[],this.displayedColumns=["articulo","presentacion","cantidad","precio_unitario","precio_total","editItem"],this.displayedColumnsM=["cantidad_utilizada","articulo","presentacion","cantidad","editItem"],this.tiposMovimiento=[],this.tiposMovimientoIngreso=[],this.bodegas=[],this.articulos=[],this.filteredArticulos=[],this.proveedores=[],this.filteredProveedores=[],this.presentaciones=[],this.fltrPresentaciones=[],this.fltrPresentacionesMerma=[],this.keyboardLayout=A.a.IDIOMA_TECLADO,this.esMovil=!1,this.bloqueoBotones=!1,this.txtArticuloSelected=void 0,this.txtArticuloSelectedM=void 0,this.txtProveedorSelected=void 0,this.loadTiposMovimiento=(t=!0)=>{this.tipoMovimientoSrvc.get(t?{egreso:1}:{ingreso:1}).subscribe(e=>{e&&(t?this.tiposMovimiento=e:this.tiposMovimientoIngreso=e)})},this.loadBodegas=()=>{this.bodegaSrvc.get({sede:this.ls.get(A.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.bodegas=t)})},this.loadProveedores=()=>{this.proveedorSrvc.get().subscribe(t=>{t&&(this.proveedores=t)})},this.loadPresentaciones=()=>{this.presentacionSrvc.get().subscribe(t=>{t&&(this.presentaciones=t)})},this.resetEgreso=()=>{this.egreso={egreso:null,tipo_movimiento:null,bodega:null,fecha:B().format(A.a.dbDateFormat),usuario:this.ls.get(A.a.usrTokenVar).idusr||0,estatus_movimiento:1,traslado:0},this.resetDetalleEgreso(),this.updateTableDataSource(),this.resetDetalleMerma(),this.updateTableDataSourceM()},this.onSubmit=()=>{this.bloqueoBotones=!0,this.egresoSrvc.save(this.egreso).subscribe(t=>{t.exito&&(this.egresoSavedEv.emit(),this.resetEgreso(),this.egreso={egreso:t.egreso.egreso,tipo_movimiento:t.egreso.tipo_movimiento,fecha:t.egreso.fecha,bodega:t.egreso.bodega,creacion:t.egreso.creacion,usuario:t.egreso.usuario,estatus_movimiento:t.egreso.estatus_movimiento,traslado:t.egreso.traslado},this.loadDetalleEgreso(this.egreso.egreso)),this.bloqueoBotones=!1})},this.confirmarEgreso=()=>{this.egreso.estatus_movimiento=2,this.onSubmit()},this.loadArticulos=()=>{this.articuloSrvc.getArticulosIngreso().subscribe(t=>{t&&(this.articulos=t)})},this.resetDetalleEgreso=()=>{this.detalleEgreso={egreso_detalle:null,egreso:this.egreso.egreso?this.egreso.egreso:null,articulo:null,cantidad:null,precio_unitario:null,precio_total:null,presentacion:0},this.txtArticuloSelected=void 0},this.resetDetalleMerma=()=>{this.detalleMerma={egreso_detalle:null,egreso:this.egreso.egreso?this.egreso.egreso:null,articulo:null,cantidad:null,precio_unitario:null,precio_total:null,presentacion:0},this.txtArticuloSelectedM=void 0},this.loadDetalleEgreso=(t=+this.egreso.egreso)=>{this.egresoSrvc.getDetalle(t,{egreso:t}).subscribe(t=>{t&&(this.detallesEgreso=t,this.updateTableDataSource())})},this.getDetalleEgreso=(t=+this.egreso.egreso,e)=>{this.egresoSrvc.getDetalle(t,{egreso_detalle:e}).subscribe(t=>{t&&(this.detalleEgreso={egreso_detalle:t[0].egreso_detalle,egreso:t[0].egreso,articulo:t[0].articulo.articulo,cantidad:+t[0].cantidad,precio_unitario:+t[0].precio_unitario,precio_total:+t[0].precio_total,presentacion:t[0].presentacion.presentacion},this.setPresentaciones(),this.saveToDB||this.setPresentacionesMerma(),this.txtArticuloSelected=t[0].articulo,this.showDetalleEgresoForm=!0)})},this.onSubmitDetail=()=>{this.bloqueoBotones=!0,this.detalleEgreso.egreso=this.egreso.egreso,this.egresoSrvc.saveDetalle(this.detalleEgreso).subscribe(t=>{t.exito?(this.loadDetalleEgreso(),this.resetDetalleEgreso(),this.snackBar.open("Egreso guardado con \xe9xito...","Egreso",{duration:3e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Egreso",{duration:3e3}),this.bloqueoBotones=!1})},this.addToDetail=()=>{this.detalleEgreso.cantidad>0?(this.detallesEgreso.splice(this.detallesEgreso.findIndex(t=>+t.articulo==+this.detalleEgreso.articulo),1),this.detallesEgreso.push(this.detalleEgreso),this.resetDetalleEgreso(),this.updateTableDataSource()):this.snackBar.open("ERROR: La cantidad debe ser mayor a 0","Egreso",{duration:3e3})},this.addToDetailMerma=()=>{if(this.detalleMerma.cantidad>0&&this.detalleMerma.cantidad_utilizada>0){var t,e=this.detallesMerma.findIndex(t=>+t.articulo==+this.detalleMerma.articulo);e>-1&&this.detallesMerma.splice(e,1),t=this.articulos.filter(t=>+t.articulo==this.detalleMerma.articulo),this.detalleMerma.presentacion=t[0].presentacion_reporte,this.detallesMerma.push(this.detalleMerma),this.txtArticuloSelectedM=void 0,this.resetDetalleMerma(),this.updateTableDataSourceM()}else this.detalleMerma.cantidad<=0?this.snackBar.open("ERROR: La cantidad debe ser mayor a 0","Egreso",{duration:3e3}):this.detalleMerma.cantidad_utilizada<=0&&this.snackBar.open("ERROR: La cantidad a utilizar debe ser mayor a 0","Egreso",{duration:3e3})},this.editFromDetail=t=>{var e=this.detallesEgreso.filter(e=>+e.articulo==+t)[0];this.detalleEgreso={egreso_detalle:e.egreso_detalle,egreso:e.egreso_detalle,articulo:e.articulo,cantidad:e.cantidad,precio_unitario:e.precio_unitario,precio_total:e.precio_unitario,presentacion:e.presentacion},this.setPresentaciones(!0),this.txtArticuloSelected=this.articulos.filter(t=>+t.articulo==this.detalleEgreso.articulo)[0]},this.editFromDetailMerma=t=>{var e=this.detallesMerma.filter(e=>+e.articulo==+t)[0];this.detalleMerma={egreso_detalle:e.egreso_detalle,egreso:e.egreso_detalle,articulo:e.articulo,cantidad:e.cantidad,precio_unitario:e.precio_unitario,precio_total:e.precio_unitario,presentacion:e.presentacion,cantidad_utilizada:e.cantidad_utilizada},this.setPresentacionesMerma(),this.txtArticuloSelectedM=this.articulos.filter(t=>+t.articulo==this.detalleMerma.articulo)[0]},this.removeFromDetailMerma=t=>this.detallesMerma.splice(this.detallesMerma.findIndex(e=>+e.articulo==+t),1),this.removeFromDetail=t=>this.detallesEgreso.splice(this.detallesEgreso.findIndex(e=>+e.articulo==+t),1),this.getDescripcionArticulo=t=>this.articulos.find(e=>+e.articulo==+t).descripcion||"",this.getDescripcionPresentacion=t=>this.presentaciones.find(e=>+e.presentacion==+t).descripcion||"",this.updateTableDataSource=()=>{this.dataSource=new p.k(this.detallesEgreso),this.dataSource.filterPredicate=(t,e)=>t.articulo.descripcion.toLowerCase().includes(e)},this.updateTableDataSourceM=()=>{this.dataSourceM=new p.k(this.detallesMerma)},this.filtrarArticulos=t=>{if(t&&"string"==typeof t){const e=t.toLowerCase();this.filteredArticulos=this.articulos.filter(t=>t.descripcion.toLowerCase().includes(e))}else this.filteredArticulos=this.articulos},this.setPresentaciones=(t=!1)=>{this.fltrPresentaciones=[];const e=this.articulos.findIndex(t=>+t.articulo==+this.detalleEgreso.articulo),i=this.articulos[e];this.fltrPresentaciones=this.presentaciones.filter(t=>+t.medida.medida==+i.presentacion.medida),t||(this.detalleEgreso.presentacion=null)},this.setPresentacionesMerma=()=>{this.fltrPresentacionesMerma=[];const t=this.articulos.findIndex(t=>+t.articulo==+this.detalleMerma.articulo),e=this.articulos[t];this.fltrPresentacionesMerma=this.presentaciones.filter(t=>+t.medida.medida==+e.presentacion.medida)},this.displayArticulo=t=>{if(t)return this.detalleEgreso.articulo=t.articulo,t.descripcion},this.displayArticuloMerma=t=>{if(t)return this.detalleMerma.articulo=t.articulo,t.descripcion},this.filtrarProveedores=t=>{if(t&&"string"==typeof t){const e=t.toLowerCase();this.filteredProveedores=this.proveedores.filter(t=>t.razon_social.toLowerCase().includes(e)||t.nit.toLowerCase().includes(e))}else this.filteredProveedores=this.proveedores},this.displayProveedor=t=>{if(t)return this.egreso.proveedor=t.proveedor,`(${t.nit}) ${t.razon_social}`},this.applyFilter=t=>{this.dataSource.filter=t}}ngOnInit(){this.esMovil=this.ls.get(A.a.usrTokenVar).enmovil||!1,this.resetEgreso(),this.loadTiposMovimiento(),this.loadTiposMovimiento(!1),this.loadBodegas(),this.loadArticulos(),this.loadProveedores(),this.loadPresentaciones(),this.saveToDB||(this.displayedColumns=["articulo","presentacion","cantidad","editItem"])}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(v.b),R.Nb($.a),R.Nb(ue),R.Nb(K.a),R.Nb(Q.a),R.Nb(X.a),R.Nb(V.a),R.Nb(Se),R.Nb(J.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-form-egreso"]],inputs:{egreso:"egreso",saveToDB:"saveToDB"},outputs:{egresoSavedEv:"egresoSavedEv"},decls:12,vars:8,consts:[[1,"mat-elevation-z4","fullWidth"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmEgreso","ngForm"],["class","fullWidth",4,"ngIf"],[1,"fullWidth"],["matInput","","type","date","placeholder","Fecha","name","fecha","required","",3,"ngModel","ngModelChange"],["name","bodega","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","traslado","class","fullWidth",3,"ngModel","ngModelChange",4,"ngIf"],["align","end"],["mat-raised-button","","type","submit","color","accent","class","btnAccion",3,"disabled",4,"ngIf"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"disabled","click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["name","tipo_movimiento","required","",3,"ngModel","ngModelChange"],[3,"value"],["name","traslado",1,"fullWidth",3,"ngModel","ngModelChange"],["name","bodega_destino",3,"ngModel","required","ngModelChange"],["name","tipo_movimiento_destino",3,"ngModel","required","ngModelChange"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button","color","accent",3,"click"],["matInput","","placeholder","Buscar",3,"matKeyboard","input",4,"ngIf"],["matInput","","placeholder","Buscar",3,"keyup",4,"ngIf"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleEgreso","ngForm"],["type","text","placeholder","Art\xedculo","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith","optionSelected"],["autoArticulos","matAutocomplete"],["name","presentacion","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Cantidad","name","cantidad","type","number","step","0.01","required","",3,"ngModel","ngModelChange","change"],["mat-raised-button","","type","button","color","accent",3,"disabled","click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["matInput","","placeholder","Buscar",3,"matKeyboard","input"],["matInput","","placeholder","Buscar",3,"keyup"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","articulo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","presentacion"],["matColumnDef","cantidad"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","precio_unitario"],["matColumnDef","precio_total"],["matColumnDef","editItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-header-row",""],["mat-row",""],["frmMerma","ngForm"],["type","number","step","0.01","matInput","","placeholder","Cantidad a Utilizar","name","cantidad_utilizar","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Cantidad","name","cantidad","type","number","step","0.01","required","",3,"ngModel","ngModelChange"],["matColumnDef","cantidad_utilizada"]],template:function(t,e){1&t&&(R.Tb(0,"mat-card",0),R.Tb(1,"mat-card-title"),R.Tb(2,"h4"),R.Fc(3),R.Dc(4,ve,3,0,"button",1),R.Dc(5,Ce,3,0,"button",1),R.Sb(),R.Sb(),R.Tb(6,"mat-card-content"),R.Dc(7,Be,18,13,"form",2),R.Sb(),R.Sb(),R.Dc(8,Re,1,0,"hr",3),R.Dc(9,bi,13,9,"mat-card",4),R.Dc(10,gi,1,0,"hr",3),R.Dc(11,$i,10,7,"mat-card",4)),2&t&&(R.Cb(3),R.Hc(" Egreso",e.egreso.egreso?" No. "+e.egreso.egreso:""," "),R.Cb(1),R.lc("ngIf",!e.showEgresoForm),R.Cb(1),R.lc("ngIf",e.showEgresoForm),R.Cb(2),R.lc("ngIf",e.showEgresoForm),R.Cb(1),R.lc("ngIf",e.egreso.egreso||!e.saveToDB),R.Cb(1),R.lc("ngIf",e.egreso.egreso||!e.saveToDB),R.Cb(1),R.lc("ngIf",e.egreso.egreso||!e.saveToDB),R.Cb(1),R.lc("ngIf",!e.saveToDB))},directives:[b.a,b.h,o.m,b.c,S.a,l.a,a.r,a.l,a.m,d.b,u.b,a.c,a.p,a.k,a.n,d.f,m.a,o.l,G.m,f.a,F.c,F.a,a.o,O.a,p.j,p.c,p.e,p.b,p.g,p.i,p.d,p.a,p.f,p.h],pipes:[o.f],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}"]}),t})();const Pi=["lstEgreso"],Ni=["frmEgreso"];let Ui=(()=>{class t{constructor(t){this.ls=t,this.setEgreso=t=>{this.egreso=t,this.frmEgreso.resetDetalleEgreso(),this.frmEgreso.loadDetalleEgreso(+this.egreso.egreso)},this.refreshEgresoList=()=>{this.lstEgresoComponent.loadEgresos()},this.egreso={egreso:null,tipo_movimiento:null,bodega:null,fecha:B().format(A.a.dbDateFormat),usuario:this.ls.get(A.a.usrTokenVar).idusr||0,estatus_movimiento:1,traslado:0}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(R.Nb($.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-egreso"]],viewQuery:function(t,e){if(1&t&&(R.Kc(Pi,1),R.Kc(Ni,1)),2&t){let t;R.sc(t=R.cc())&&(e.lstEgresoComponent=t.first),R.sc(t=R.cc())&&(e.frmEgreso=t.first)}},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getEgresoEv"],["lstEgreso",""],[1,"col","m7","s12"],[3,"egreso","egresoSavedEv"],["frmEgreso",""]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"app-lista-egreso",2,3),R.bc("getEgresoEv",function(t){return e.setEgreso(t)}),R.Sb(),R.Sb(),R.Tb(4,"div",4),R.Tb(5,"app-form-egreso",5,6),R.bc("egresoSavedEv",function(){return e.refreshEgresoList()}),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(5),R.lc("egreso",e.egreso))},directives:[fe,Hi],styles:[""]}),t})();function ji(t,e){if(1&t){const t=R.Ub();R.Tb(0,"input",10),R.bc("ngModelChange",function(e){return R.xc(t),R.fc().categoria.descripcion=e}),R.Sb()}if(2&t){const t=R.fc();R.lc("matKeyboard",t.keyboardLayout)("ngModel",t.categoria.descripcion)}}function Gi(t,e){if(1&t){const t=R.Ub();R.Tb(0,"input",11),R.bc("ngModelChange",function(e){return R.xc(t),R.fc().categoria.descripcion=e}),R.Sb()}if(2&t){const t=R.fc();R.lc("ngModel",t.categoria.descripcion)}}function zi(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-chip",12),R.bc("click",function(){R.xc(t);const i=e.$implicit;return R.fc().categoria=i}),R.Fc(1),R.Sb()}if(2&t){const t=e.$implicit;R.Cb(1),R.Hc(" ",t.descripcion," ")}}let qi=(()=>{class t{constructor(t,e,i){this.snackBar=t,this.ls=e,this.articuloSrvc=i,this.categoriaGrupoSvd=new R.o,this.onChangeSubCategoriaEv=new R.o,this.categorias=[],this.categoriasGruposPadre=[],this.categoriasGrupos=[],this.editCategoriaMode=!1,this.editSubCategoriaMode=!1,this.showCategoriasForm=!0,this.keyboardLayout=A.a.IDIOMA_TECLADO,this.esMovil=!1,this.impresoras=[],this.resetCategoria=()=>{this.categoria={categoria:null,sede:this.ls.get(A.a.usrTokenVar).sede||0,descripcion:null},this.resetCategoriaGrupo(),this.editCategoriaMode=!1},this.resetCategoriaGrupo=()=>{this.categoriaGrupo={categoria_grupo:null,categoria:this.categoria.categoria,categoria_grupo_grupo:null,descripcion:null,receta:0,impresora:null,descuento:0,antecesores:null},this.editSubCategoriaMode=!1},this.loadCategorias=()=>{this.articuloSrvc.getCategorias({sede:+this.ls.get(A.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.categorias=t)})},this.onCategoriaSelected=t=>this.loadSubCategorias(+t.value.categoria),this.loadSubCategorias=t=>{this.articuloSrvc.getCategoriasGrupos({categoria:+t}).subscribe(t=>{t&&(this.categoriasGruposPadre=this.articuloSrvc.adaptCategoriaGrupoResponse(t),this.categoriasGrupos=this.categoriasGruposPadre)})},this.loadImpresoras=()=>{this.articuloSrvc.getImpresoras({sede:+this.ls.get(A.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.impresoras=t)})},this.onSubCategoriaPadreSelected=t=>this.loadSubCategoriasSubcategorias(+t.value),this.loadSubCategoriasSubcategorias=t=>{this.articuloSrvc.getCategoriasGrupos({categoria_grupo_grupo:t}).subscribe(t=>{t&&(this.categoriasGrupos=this.articuloSrvc.adaptCategoriaGrupoResponse(t))})},this.onSubmitCategoria=()=>{this.articuloSrvc.saveCategoria(this.categoria).subscribe(t=>{t.exito?(this.editCategoriaMode=!1,this.resetCategoria(),this.loadCategorias(),this.categoriaGrupoSvd.emit(),this.snackBar.open("Grabada con \xe9xito.","Categor\xeda",{duration:5e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Categor\xeda",{duration:5e3})})},this.onSubCategoriaSelected=t=>this.onChangeSubCategoriaEv.emit(+t.value.categoria_grupo),this.onSubmitSubCategoria=()=>{this.articuloSrvc.saveCategoriaGrupo(this.categoriaGrupo).subscribe(t=>{t.exito?(this.resetCategoriaGrupo(),this.loadSubCategorias(+this.categoria.categoria),this.snackBar.open("Grabada con \xe9xito.","Sub - Categor\xeda",{duration:5e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Sub - Categor\xeda",{duration:5e3})})}}ngOnInit(){this.esMovil=this.ls.get(A.a.usrTokenVar).enmovil||!1,this.resetCategoria(),this.loadCategorias(),this.loadImpresoras()}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(v.b),R.Nb($.a),R.Nb(X.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-categoria-producto"]],outputs:{categoriaGrupoSvd:"categoriaGrupoSvd",onChangeSubCategoriaEv:"onChangeSubCategoriaEv"},decls:18,vars:4,consts:[[1,"mat-elevation-z4"],["novalidate",""],["frmCategoria","ngForm"],[1,"fullWidth"],["type","text","matInput","","placeholder","Descripci\xf3n de la categor\xeda","name","descripcion","minlength","1","maxlength","150","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["type","text","matInput","","placeholder","Descripci\xf3n de la categor\xeda","name","descripcion","minlength","1","maxlength","150","required","",3,"ngModel","ngModelChange",4,"ngIf"],["align","end"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button","color","warn",3,"click"],["color","accent","selected","",3,"click",4,"ngFor","ngForOf"],["type","text","matInput","","placeholder","Descripci\xf3n de la categor\xeda","name","descripcion","minlength","1","maxlength","150","required","",3,"matKeyboard","ngModel","ngModelChange"],["type","text","matInput","","placeholder","Descripci\xf3n de la categor\xeda","name","descripcion","minlength","1","maxlength","150","required","",3,"ngModel","ngModelChange"],["color","accent","selected","",3,"click"]],template:function(t,e){if(1&t&&(R.Tb(0,"mat-card",0),R.Tb(1,"mat-card-title"),R.Tb(2,"h4"),R.Fc(3,"Categor\xedas"),R.Sb(),R.Sb(),R.Tb(4,"mat-card-content"),R.Tb(5,"form",1,2),R.Tb(7,"mat-form-field",3),R.Dc(8,ji,1,2,"input",4),R.Dc(9,Gi,1,1,"input",5),R.Sb(),R.Tb(10,"div",6),R.Tb(11,"button",7),R.bc("click",function(){return e.onSubmitCategoria()}),R.Fc(12," Guardar "),R.Sb(),R.Tb(13,"button",8),R.bc("click",function(){return e.resetCategoria()}),R.Fc(14," Cancelar "),R.Sb(),R.Sb(),R.Sb(),R.Ob(15,"hr"),R.Tb(16,"mat-chip-list"),R.Dc(17,zi,2,1,"mat-chip",9),R.Sb(),R.Sb(),R.Sb()),2&t){const t=R.tc(6);R.Cb(8),R.lc("ngIf",!e.esMovil),R.Cb(1),R.lc("ngIf",e.esMovil),R.Cb(2),R.lc("disabled",!t.form.valid),R.Cb(6),R.lc("ngForOf",e.categorias)}},directives:[b.a,b.h,b.c,a.r,a.l,a.m,d.b,o.m,S.a,y.b,o.l,u.b,O.a,a.c,a.g,a.f,a.p,a.k,a.n,y.a],styles:[".fullWidth[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:18pt}"]}),t})();function Li(t,e){if(1&t&&(R.Tb(0,"mat-option",19),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.categoria),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function Wi(t,e){if(1&t){const t=R.Ub();R.Tb(0,"input",20),R.bc("ngModelChange",function(e){return R.xc(t),R.fc().categoriaGrupo.descripcion=e}),R.Sb()}if(2&t){const t=R.fc();R.lc("matKeyboard",t.keyboardLayout)("ngModel",t.categoriaGrupo.descripcion)}}function Vi(t,e){if(1&t){const t=R.Ub();R.Tb(0,"input",21),R.bc("ngModelChange",function(e){return R.xc(t),R.fc().categoriaGrupo.descripcion=e}),R.Sb()}if(2&t){const t=R.fc();R.lc("ngModel",t.categoriaGrupo.descripcion)}}function Ki(t,e){if(1&t&&(R.Tb(0,"mat-option",19),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.impresora),R.Cb(1),R.Hc(" ",t.nombre," ")}}function Qi(t,e){if(1&t&&(R.Tb(0,"mat-option",19),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.bodega),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function Xi(t,e){if(1&t){const t=R.Ub();R.Tb(0,"input",22),R.bc("ngModelChange",function(e){return R.xc(t),R.fc().categoriaGrupo.cuenta_contable=e}),R.Sb()}if(2&t){const t=R.fc();R.lc("matKeyboard",t.keyboardLayout)("ngModel",t.categoriaGrupo.cuenta_contable)}}function Ji(t,e){if(1&t){const t=R.Ub();R.Tb(0,"input",23),R.bc("ngModelChange",function(e){return R.xc(t),R.fc().categoriaGrupo.cuenta_contable=e}),R.Sb()}if(2&t){const t=R.fc();R.lc("ngModel",t.categoriaGrupo.cuenta_contable)}}function Zi(t,e){if(1&t&&(R.Tb(0,"mat-option",24),R.Fc(1),R.Sb()),2&t){const t=e.$implicit,i=R.fc();R.lc("value",t.categoria_grupo)("disabled",+t.categoria_grupo==+i.categoriaGrupo.categoria_grupo),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function Yi(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-chip",25),R.bc("click",function(){R.xc(t);const i=e.$implicit,o=R.fc();return o.categoria=i,o.loadSubCategorias(i.categoria)}),R.Fc(1),R.Sb()}if(2&t){const t=e.$implicit;R.Cb(1),R.Hc(" ",t.descripcion," ")}}function to(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-chip",26),R.bc("click",function(){R.xc(t);const i=e.$implicit;return R.fc().setCatGrp(i)}),R.Fc(1),R.Sb()}if(2&t){const t=e.$implicit;R.Cb(1),R.Hc(" ",t.descripcion," ")}}let eo=(()=>{class t{constructor(t,e,i,o){this.snackBar=t,this.articuloSrvc=e,this.bodegaSrvc=i,this.ls=o,this.categorias=[],this.impresoras=[],this.categoriasGruposPadre=[],this.categoriasGrupos=[],this.keyboardLayout=A.a.IDIOMA_TECLADO,this.esMovil=!1,this.bodegas=[],this.loadCategorias=()=>{this.articuloSrvc.getCategorias({sede:+this.ls.get(A.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.categorias=t)})},this.loadImpresoras=()=>{this.articuloSrvc.getImpresoras({sede:+this.ls.get(A.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.impresoras=t)})},this.loadBodegas=()=>{this.bodegaSrvc.get({sede:this.ls.get(A.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.bodegas=t)})},this.loadSubCategorias=t=>{this.resetCategoriaGrupo(),this.categoriaGrupo.categoria=t,this.articuloSrvc.getCategoriasGrupos({categoria:+t}).subscribe(t=>{t&&(this.categoriasGruposPadre=this.articuloSrvc.adaptCategoriaGrupoResponse(t),this.categoriasGrupos=JSON.parse(JSON.stringify(this.categoriasGruposPadre)))})},this.resetCategoriaGrupo=()=>{this.categoriaGrupo={categoria_grupo:null,categoria:null,categoria_grupo_grupo:null,descripcion:null,receta:0,impresora:null,descuento:0,antecesores:null}},this.onSubmitSubCategoria=()=>{this.articuloSrvc.saveCategoriaGrupo(this.categoriaGrupo).subscribe(t=>{t.exito?(this.loadSubCategorias(+this.categoriaGrupo.categoria),this.resetCategoriaGrupo(),this.snackBar.open("Grabada con \xe9xito.","Sub - Categor\xeda",{duration:5e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Sub - Categor\xeda",{duration:5e3})})},this.setCatGrp=t=>{this.categoriaGrupo=t},this.resetCategoriaGrupo()}ngOnInit(){this.esMovil=this.ls.get(A.a.usrTokenVar).enmovil||!1,this.loadCategorias(),this.loadImpresoras(),this.loadBodegas()}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(v.b),R.Nb(X.a),R.Nb(Q.a),R.Nb($.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-sub-categoria-producto"]],decls:43,vars:15,consts:[[1,"mat-elevation-z4"],["novalidate",""],["frmCategoriaGrupo","ngForm"],[1,"fullWidth"],["name","categoria","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","matInput","","placeholder","Descripci\xf3n de la sub - categor\xeda","name","descripcion","minlength","1","maxlength","45","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["type","text","matInput","","placeholder","Descripci\xf3n de la sub - categor\xeda","name","descripcion","minlength","1","maxlength","45","required","",3,"ngModel","ngModelChange",4,"ngIf"],["name","impresora","required","",3,"ngModel","ngModelChange"],["name","bodega","required","",3,"ngModel","ngModelChange"],["type","text","matInput","","placeholder","Cuenta contable (si aplica)","name","cuenta_contable","minlength","0","maxlength","10",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["type","text","matInput","","placeholder","Cuenta contable (si aplica)","name","cuenta_contable","minlength","0","maxlength","10",3,"ngModel","ngModelChange",4,"ngIf"],["name","categoriaGrupoPadre",3,"ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],["align","end"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button","color","warn",3,"click"],["color","accent","selected","",3,"click",4,"ngFor","ngForOf"],["color","warn","selected","",3,"click",4,"ngFor","ngForOf"],[3,"value"],["type","text","matInput","","placeholder","Descripci\xf3n de la sub - categor\xeda","name","descripcion","minlength","1","maxlength","45","required","",3,"matKeyboard","ngModel","ngModelChange"],["type","text","matInput","","placeholder","Descripci\xf3n de la sub - categor\xeda","name","descripcion","minlength","1","maxlength","45","required","",3,"ngModel","ngModelChange"],["type","text","matInput","","placeholder","Cuenta contable (si aplica)","name","cuenta_contable","minlength","0","maxlength","10",3,"matKeyboard","ngModel","ngModelChange"],["type","text","matInput","","placeholder","Cuenta contable (si aplica)","name","cuenta_contable","minlength","0","maxlength","10",3,"ngModel","ngModelChange"],[3,"value","disabled"],["color","accent","selected","",3,"click"],["color","warn","selected","",3,"click"]],template:function(t,e){if(1&t&&(R.Tb(0,"mat-card",0),R.Tb(1,"mat-card-title"),R.Tb(2,"h4"),R.Fc(3,"Sub - categor\xedas"),R.Sb(),R.Sb(),R.Tb(4,"mat-card-content"),R.Tb(5,"form",1,2),R.Tb(7,"mat-form-field",3),R.Tb(8,"mat-label"),R.Fc(9,"Categor\xeda"),R.Sb(),R.Tb(10,"mat-select",4),R.bc("ngModelChange",function(t){return e.categoriaGrupo.categoria=t}),R.Dc(11,Li,2,2,"mat-option",5),R.Sb(),R.Sb(),R.Tb(12,"mat-form-field",3),R.Dc(13,Wi,1,2,"input",6),R.Dc(14,Vi,1,1,"input",7),R.Sb(),R.Tb(15,"mat-form-field",3),R.Tb(16,"mat-label"),R.Fc(17,"Impresora:"),R.Sb(),R.Tb(18,"mat-select",8),R.bc("ngModelChange",function(t){return e.categoriaGrupo.impresora=t}),R.Dc(19,Ki,2,2,"mat-option",5),R.Sb(),R.Sb(),R.Tb(20,"mat-form-field",3),R.Tb(21,"mat-label"),R.Fc(22,"Sacar de la bodega:"),R.Sb(),R.Tb(23,"mat-select",9),R.bc("ngModelChange",function(t){return e.categoriaGrupo.bodega=t}),R.Dc(24,Qi,2,2,"mat-option",5),R.Sb(),R.Sb(),R.Tb(25,"mat-form-field",3),R.Dc(26,Xi,1,2,"input",10),R.Dc(27,Ji,1,1,"input",11),R.Sb(),R.Tb(28,"mat-form-field",3),R.Tb(29,"mat-label"),R.Fc(30,"Anidar dentro de"),R.Sb(),R.Tb(31,"mat-select",12),R.bc("ngModelChange",function(t){return e.categoriaGrupo.categoria_grupo_grupo=t}),R.Dc(32,Zi,2,3,"mat-option",13),R.Sb(),R.Sb(),R.Tb(33,"div",14),R.Tb(34,"button",15),R.bc("click",function(){return e.onSubmitSubCategoria()}),R.Fc(35," Guardar "),R.Sb(),R.Tb(36,"button",16),R.bc("click",function(){return e.resetCategoriaGrupo()}),R.Fc(37," Cancelar "),R.Sb(),R.Sb(),R.Sb(),R.Ob(38,"hr"),R.Tb(39,"mat-chip-list"),R.Dc(40,Yi,2,1,"mat-chip",17),R.Sb(),R.Tb(41,"mat-chip-list"),R.Dc(42,to,2,1,"mat-chip",18),R.Sb(),R.Sb(),R.Sb()),2&t){const t=R.tc(6);R.Cb(10),R.lc("ngModel",e.categoriaGrupo.categoria),R.Cb(1),R.lc("ngForOf",e.categorias),R.Cb(2),R.lc("ngIf",!e.esMovil),R.Cb(1),R.lc("ngIf",e.esMovil),R.Cb(4),R.lc("ngModel",e.categoriaGrupo.impresora),R.Cb(1),R.lc("ngForOf",e.impresoras),R.Cb(4),R.lc("ngModel",e.categoriaGrupo.bodega),R.Cb(1),R.lc("ngForOf",e.bodegas),R.Cb(2),R.lc("ngIf",!e.esMovil),R.Cb(1),R.lc("ngIf",e.esMovil),R.Cb(4),R.lc("ngModel",e.categoriaGrupo.categoria_grupo_grupo),R.Cb(1),R.lc("ngForOf",e.categoriasGruposPadre),R.Cb(2),R.lc("disabled",!t.form.valid),R.Cb(6),R.lc("ngForOf",e.categorias),R.Cb(2),R.lc("ngForOf",e.categoriasGrupos)}},directives:[b.a,b.h,b.c,a.r,a.l,a.m,d.b,d.f,m.a,a.p,a.k,a.n,o.l,o.m,S.a,y.b,G.m,u.b,O.a,a.c,a.g,a.f,y.a],styles:[""]}),t})();var io=i("XiUz"),oo=i("Iab2"),no=i("IHy4"),ao=i("TOq3");function co(t,e){if(1&t&&(R.Tb(0,"mat-option",11),R.Fc(1),R.Sb()),2&t){const t=e.$implicit,i=R.fc();R.lc("value",t.sede)("disabled",+t.sede==+i.miSede),R.Cb(1),R.Hc(" ",t.nombre," ")}}function ro(t,e){1&t&&R.Ob(0,"app-cargando")}let so=(()=>{class t{constructor(t,e,i,o,n){this.sedeSrvc=t,this.ls=e,this.snackBar=i,this.dialog=o,this.articuloSrvc=n,this.articulo=null,this.cargando=!1,this.sedes=[],this.params={},this.miSede=0,this.loadSedes=()=>{this.sedeSrvc.get().subscribe(t=>{t&&(this.sedes=t)})},this.onSubmit=()=>{this.dialog.open(W.a,{maxWidth:"400px",data:new W.b("Replicar art\xedculos","Este proceso replicar\xe1 TODOS los art\xedculos a las sedes seleccionadas. \xbfDesea continuar?","S\xed","No")}).afterClosed().subscribe(t=>{if(t){this.cargando=!0;const t={sedes:[],articulo:null};this.params.sede.forEach(e=>t.sedes.push({sede:+e})),this.articulo&&(t.articulo=+this.articulo.articulo),this.articuloSrvc.replicaArticulosEnSedes(t).subscribe(t=>{t.exito?this.snackBar.open(t.mensaje,"Replicar art\xedculos",{duration:3e3}):this.snackBar.open(`ERROR: ${t.mensaje}`,"Replicar art\xedculos",{duration:7e3}),this.params={},this.cargando=!1})}})}}ngOnInit(){this.miSede=this.ls.get(A.a.usrTokenVar).sede||0,this.loadSedes()}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(no.a),R.Nb($.a),R.Nb(v.b),R.Nb(M.b),R.Nb(X.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-replicar-asedes"]],inputs:{articulo:"articulo"},decls:18,vars:5,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmReplicaArticulosSedes","ngForm"],[2,"width","90%"],["name","sede","multiple","","required","",3,"ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],[4,"ngIf"],[3,"value","disabled"]],template:function(t,e){if(1&t){const t=R.Ub();R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"mat-card",2),R.Tb(3,"mat-card-title"),R.Tb(4,"h4"),R.Fc(5),R.Sb(),R.Sb(),R.Tb(6,"mat-card-content"),R.Tb(7,"form",3,4),R.bc("ngSubmit",function(){return R.xc(t),R.tc(8).form.valid&&e.onSubmit()}),R.Tb(9,"mat-form-field",5),R.Tb(10,"mat-label"),R.Fc(11,"Sede"),R.Sb(),R.Tb(12,"mat-select",6),R.bc("ngModelChange",function(t){return e.params.sede=t}),R.Dc(13,co,2,3,"mat-option",7),R.Sb(),R.Sb(),R.Tb(14,"div",8),R.Tb(15,"button",9),R.Fc(16," Replicar "),R.Sb(),R.Sb(),R.Sb(),R.Dc(17,ro,1,0,"app-cargando",10),R.Sb(),R.Sb(),R.Sb(),R.Sb()}if(2&t){const t=R.tc(8);R.Cb(5),R.Hc("Replicar ",(null==e.articulo?null:e.articulo.descripcion)||"TODOS los art\xedculos"," a las sedes"),R.Cb(7),R.lc("ngModel",e.params.sede),R.Cb(1),R.lc("ngForOf",e.sedes),R.Cb(2),R.lc("disabled",!t.form.valid||e.cargando),R.Cb(2),R.lc("ngIf",e.cargando)}},directives:[b.a,b.h,b.c,a.r,a.l,a.m,d.b,d.f,m.a,a.p,a.k,a.n,o.l,S.a,o.m,G.m,ao.a],styles:[""]}),t})(),lo=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.articulo=null}ngOnInit(){this.data.articulo&&(this.articulo=this.data.articulo)}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(M.f),R.Nb(M.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-replicar-a-sedes-dialog"]],decls:5,vars:1,consts:[["mat-dialog-content",""],[3,"articulo"],["mat-dialog-actions","","align","end"],["mat-raised-button","","type","button","color","accent",3,"click"]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Ob(1,"app-replicar-asedes",1),R.Sb(),R.Tb(2,"div",2),R.Tb(3,"button",3),R.bc("click",function(){return e.dialogRef.close()}),R.Fc(4," Terminar "),R.Sb(),R.Sb()),2&t&&(R.Cb(1),R.lc("articulo",e.articulo))},directives:[M.d,so,M.c,S.a],styles:[""]}),t})();var uo=i("pJXi"),bo=i("1wH6"),go=i("FHMA");function ho(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",5),R.bc("click",function(){return R.xc(t),R.fc().showArticuloForm=!0}),R.Tb(1,"mat-icon",6),R.Fc(2,"expand_more"),R.Sb(),R.Sb()}}function po(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",5),R.bc("click",function(){return R.xc(t),R.fc().showArticuloForm=!1}),R.Tb(1,"mat-icon",6),R.Fc(2,"expand_less"),R.Sb(),R.Sb()}}function mo(t,e){if(1&t&&(R.Tb(0,"mat-chip",36),R.Fc(1),R.Sb()),2&t){const t=R.fc(2);R.Cb(1),R.Hc(" ",t.categoria.descripcion," ")}}function fo(t,e){if(1&t&&(R.Tb(0,"mat-chip",37),R.Fc(1),R.Sb()),2&t){const t=R.fc(2);R.Cb(1),R.Hc(" ",t.subcategoria.descripcion," ")}}function So(t,e){if(1&t){const t=R.Ub();R.Tb(0,"input",38),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).articulo.descripcion=e}),R.Sb()}if(2&t){const t=R.fc(2);R.lc("matKeyboard",t.keyboardLayout)("ngModel",t.articulo.descripcion)}}function vo(t,e){if(1&t){const t=R.Ub();R.Tb(0,"input",39),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).articulo.descripcion=e}),R.Sb()}if(2&t){const t=R.fc(2);R.lc("ngModel",t.articulo.descripcion)}}function Co(t,e){if(1&t&&(R.Tb(0,"mat-option",40),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.presentacion),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function To(t,e){if(1&t&&(R.Tb(0,"mat-option",40),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.presentacion),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function _o(t,e){if(1&t){const t=R.Ub();R.Tb(0,"input",41),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).articulo.codigo=e}),R.Sb()}if(2&t){const t=R.fc(2);R.lc("matKeyboard",t.keyboardLayout)("ngModel",t.articulo.codigo)}}function xo(t,e){if(1&t){const t=R.Ub();R.Tb(0,"input",42),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).articulo.codigo=e}),R.Sb()}if(2&t){const t=R.fc(2);R.lc("ngModel",t.articulo.codigo)}}function Mo(t,e){if(1&t){const t=R.Ub();R.Tb(0,"input",43),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).articulo.shopify_id=e}),R.Sb()}if(2&t){const t=R.fc(2);R.lc("matKeyboard",t.keyboardLayout)("ngModel",t.articulo.shopify_id)}}function Io(t,e){if(1&t){const t=R.Ub();R.Tb(0,"input",44),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).articulo.shopify_id=e}),R.Sb()}if(2&t){const t=R.fc(2);R.lc("ngModel",t.articulo.shopify_id)}}function Do(t,e){if(1&t&&(R.Tb(0,"mat-option",40),R.Fc(1),R.gc(2,"number"),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.impuesto_especial),R.Cb(1),R.Ic(" ",t.descripcion," (",R.ic(2,3,t.porcentaje,"1.2-2"),"%) ")}}function Fo(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",11),R.Tb(1,"input",45),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).articulo.rendimiento=e}),R.Sb(),R.Sb()}if(2&t){const t=R.fc(2);R.Cb(1),R.lc("ngModel",t.articulo.rendimiento)}}function yo(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",11),R.Tb(1,"input",46),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).articulo.cantidad_minima=e}),R.Sb(),R.Sb()}if(2&t){const t=R.fc(2);R.Cb(1),R.lc("ngModel",t.articulo.cantidad_minima)}}function ko(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",11),R.Tb(1,"input",47),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).articulo.cantidad_maxima=e}),R.Sb(),R.Sb()}if(2&t){const t=R.fc(2);R.Cb(1),R.lc("ngModel",t.articulo.cantidad_maxima)}}function Oo(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",48),R.bc("click",function(){return R.xc(t),R.fc(2).replicarASedes()}),R.Fc(1," Replicar a sedes "),R.Sb()}}function wo(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",49),R.bc("click",function(){return R.xc(t),R.fc(2).resetArticulo()}),R.Fc(1," Nuevo "),R.Sb()}}function Eo(t,e){if(1&t){const t=R.Ub();R.Tb(0,"form",7,8),R.bc("ngSubmit",function(){R.xc(t);const e=R.tc(1),i=R.fc();return e.form.valid&&i.onSubmit()}),R.Tb(2,"mat-chip-list"),R.Dc(3,mo,2,1,"mat-chip",9),R.Dc(4,fo,2,1,"mat-chip",10),R.Sb(),R.Tb(5,"mat-form-field",11),R.Dc(6,So,1,2,"input",12),R.Dc(7,vo,1,1,"input",13),R.Sb(),R.Tb(8,"mat-form-field",11),R.Tb(9,"input",14),R.bc("ngModelChange",function(e){return R.xc(t),R.fc().articulo.precio=e}),R.Sb(),R.Sb(),R.Tb(10,"mat-form-field",11),R.Tb(11,"mat-label"),R.Fc(12,"Presentaci\xf3n Venta"),R.Sb(),R.Tb(13,"mat-select",15),R.bc("ngModelChange",function(e){return R.xc(t),R.fc().articulo.presentacion=e}),R.Dc(14,Co,2,2,"mat-option",16),R.Sb(),R.Sb(),R.Tb(15,"mat-form-field",11),R.Tb(16,"mat-label"),R.Fc(17,"Presentaci\xf3n Reportes"),R.Sb(),R.Tb(18,"mat-select",17),R.bc("ngModelChange",function(e){return R.xc(t),R.fc().articulo.presentacion_reporte=e}),R.Dc(19,To,2,2,"mat-option",16),R.Sb(),R.Sb(),R.Tb(20,"mat-form-field",11),R.Dc(21,_o,1,2,"input",18),R.Dc(22,xo,1,1,"input",19),R.Sb(),R.Tb(23,"mat-form-field",11),R.Dc(24,Mo,1,2,"input",20),R.Dc(25,Io,1,1,"input",21),R.Sb(),R.Tb(26,"mat-form-field",11),R.Tb(27,"mat-label"),R.Fc(28,"Impuesto Especial"),R.Sb(),R.Tb(29,"mat-select",22),R.bc("ngModelChange",function(e){return R.xc(t),R.fc().articulo.impuesto_especial=e}),R.Dc(30,Do,3,6,"mat-option",16),R.Sb(),R.Sb(),R.Dc(31,Fo,2,1,"mat-form-field",23),R.Dc(32,yo,2,1,"mat-form-field",23),R.Dc(33,ko,2,1,"mat-form-field",23),R.Tb(34,"div",24),R.Tb(35,"div",25),R.Tb(36,"mat-checkbox",26),R.bc("ngModelChange",function(e){return R.xc(t),+(R.fc().articulo.produccion=e)}),R.Fc(37,"\xbfEs producci\xf3n?"),R.Sb(),R.Sb(),R.Tb(38,"div",25),R.Tb(39,"mat-checkbox",27),R.bc("ngModelChange",function(e){return R.xc(t),+(R.fc().articulo.mostrar_pos=e)}),R.Fc(40,"Mostrar en POS"),R.Sb(),R.Sb(),R.Tb(41,"div",25),R.Tb(42,"mat-checkbox",28),R.bc("ngModelChange",function(e){return R.xc(t),+(R.fc().articulo.combo=e)}),R.Fc(43,"Combo"),R.Sb(),R.Sb(),R.Tb(44,"div",25),R.Tb(45,"mat-checkbox",29),R.bc("ngModelChange",function(e){return R.xc(t),+(R.fc().articulo.multiple=e)}),R.Fc(46,"Opci\xf3n m\xfaltiple"),R.Sb(),R.Sb(),R.Sb(),R.Tb(47,"div",24),R.Tb(48,"div",25),R.Tb(49,"mat-checkbox",30),R.bc("ngModelChange",function(e){return R.xc(t),+(R.fc().articulo.mostrar_inventario=e)}),R.Fc(50,"Mostrar en Inventario"),R.Sb(),R.Sb(),R.Tb(51,"div",25),R.Tb(52,"mat-checkbox",31),R.bc("ngModelChange",function(e){return R.xc(t),+(R.fc().articulo.esreceta=e)}),R.Fc(53,"Es receta"),R.Sb(),R.Sb(),R.Sb(),R.Tb(54,"div",32),R.Tb(55,"button",33),R.Fc(56," Guardar "),R.Sb(),R.Dc(57,Oo,2,0,"button",34),R.Dc(58,wo,2,0,"button",35),R.Sb(),R.Sb()}if(2&t){const t=R.tc(1),e=R.fc();R.Cb(3),R.lc("ngIf",e.categoria),R.Cb(1),R.lc("ngIf",e.subcategoria),R.Cb(2),R.lc("ngIf",!e.esMovil),R.Cb(1),R.lc("ngIf",e.esMovil),R.Cb(2),R.lc("ngModel",e.articulo.precio),R.Cb(4),R.lc("ngModel",e.articulo.presentacion),R.Cb(1),R.lc("ngForOf",e.presentaciones),R.Cb(4),R.lc("ngModel",e.articulo.presentacion_reporte),R.Cb(1),R.lc("ngForOf",e.presentaciones),R.Cb(2),R.lc("ngIf",!e.esMovil),R.Cb(1),R.lc("ngIf",e.esMovil),R.Cb(2),R.lc("ngIf",!e.esMovil),R.Cb(1),R.lc("ngIf",e.esMovil),R.Cb(4),R.lc("ngModel",e.articulo.impuesto_especial),R.Cb(1),R.lc("ngForOf",e.impuestosEspeciales),R.Cb(1),R.lc("ngIf",1==+e.articulo.produccion),R.Cb(1),R.lc("ngIf",1==+e.articulo.multiple||+e.articulo.combo),R.Cb(1),R.lc("ngIf",1==+e.articulo.multiple||+e.articulo.combo),R.Cb(3),R.lc("ngModel",+e.articulo.produccion),R.Cb(3),R.lc("ngModel",+e.articulo.mostrar_pos),R.Cb(3),R.lc("ngModel",+e.articulo.combo),R.Cb(3),R.lc("ngModel",+e.articulo.multiple),R.Cb(4),R.lc("ngModel",+e.articulo.mostrar_inventario),R.Cb(3),R.lc("ngModel",+e.articulo.esreceta),R.Cb(3),R.lc("disabled",!t.form.valid||!e.articulo.categoria_grupo),R.Cb(2),R.lc("ngIf",e.articulo.articulo),R.Cb(1),R.lc("ngIf",e.articulo.articulo)}}function Ao(t,e){1&t&&R.Ob(0,"hr")}function Bo(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",5),R.bc("click",function(){return R.xc(t),R.fc(2).showDetalleForm=!0}),R.Tb(1,"mat-icon",6),R.Fc(2,"expand_more"),R.Sb(),R.Sb()}}function Ro(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",5),R.bc("click",function(){return R.xc(t),R.fc(2).showDetalleForm=!1}),R.Tb(1,"mat-icon",6),R.Fc(2,"expand_less"),R.Sb(),R.Sb()}}function $o(t,e){if(1&t&&(R.Tb(0,"mat-option",40),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function Ho(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-form-field",11),R.Tb(1,"input",60),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(3).receta.precio=e}),R.Sb(),R.Sb()}if(2&t){const t=R.fc(3);R.Cb(1),R.lc("ngModel",t.receta.precio)}}function Po(t,e){if(1&t&&(R.Tb(0,"mat-option",40),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.medida),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function No(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",49),R.bc("click",function(){return R.xc(t),R.fc(3).resetReceta()}),R.Fc(1," Nuevo "),R.Sb()}}function Uo(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",49),R.bc("click",function(){return R.xc(t),R.fc(3).imprimirReceta()}),R.Fc(1," Imprimir "),R.Sb()}}const jo=function(){return{standalone:!0}};function Go(t,e){if(1&t){const t=R.Ub();R.Tb(0,"form",7,52),R.bc("ngSubmit",function(){R.xc(t);const e=R.tc(1),i=R.fc(2);return e.form.valid&&i.onSubmitDetail()}),R.Tb(2,"mat-form-field",11),R.Tb(3,"mat-label"),R.Fc(4,"Art\xedculo"),R.Sb(),R.Tb(5,"input",53),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).txtArticuloSelected=e})("keyup",function(){R.xc(t);const e=R.fc(2);return e.filtrarArticulos(e.txtArticuloSelected)}),R.Sb(),R.Tb(6,"mat-autocomplete",54,55),R.Dc(8,$o,2,2,"mat-option",16),R.Sb(),R.Sb(),R.Tb(9,"mat-form-field",11),R.Tb(10,"input",56),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).receta.cantidad=e}),R.Sb(),R.Sb(),R.Dc(11,Ho,2,1,"mat-form-field",23),R.Tb(12,"mat-form-field",11),R.Tb(13,"mat-label"),R.Fc(14,"Unidad de medida"),R.Sb(),R.Tb(15,"mat-select",57),R.bc("ngModelChange",function(e){return R.xc(t),R.fc(2).receta.medida=e}),R.Dc(16,Po,2,2,"mat-option",16),R.Sb(),R.Sb(),R.Tb(17,"div",24),R.Tb(18,"div",25),R.Tb(19,"mat-checkbox",58),R.bc("ngModelChange",function(e){return R.xc(t),+(R.fc(2).receta.racionable=e)}),R.Fc(20,"\xbfEs racionable?"),R.Sb(),R.Sb(),R.Tb(21,"div",25),R.Tb(22,"mat-checkbox",59),R.bc("ngModelChange",function(e){return R.xc(t),+(R.fc(2).receta.precio_extra=e)}),R.Fc(23," Precio Extra "),R.Sb(),R.Sb(),R.Sb(),R.Tb(24,"div",32),R.Tb(25,"button",33),R.Fc(26," Guardar "),R.Sb(),R.Dc(27,No,2,0,"button",35),R.Dc(28,Uo,2,0,"button",35),R.Sb(),R.Sb()}if(2&t){const t=R.tc(1),e=R.tc(7),i=R.fc(2);R.Cb(5),R.lc("ngModel",i.txtArticuloSelected)("ngModelOptions",R.nc(14,jo))("matAutocomplete",e),R.Cb(1),R.lc("displayWith",i.displayArticulo),R.Cb(2),R.lc("ngForOf",i.filteredArticulos),R.Cb(2),R.lc("ngModel",i.receta.cantidad),R.Cb(1),R.lc("ngIf",i.receta.precio_extra&&i.receta.precio_extra>0),R.Cb(4),R.lc("ngModel",i.receta.medida),R.Cb(1),R.lc("ngForOf",i.medidas),R.Cb(3),R.lc("ngModel",+i.receta.racionable),R.Cb(3),R.lc("ngModel",+i.receta.precio_extra),R.Cb(3),R.lc("disabled",!t.form.valid),R.Cb(2),R.lc("ngIf",i.receta.articulo_detalle),R.Cb(1),R.lc("ngIf",i.recetas.length>0)}}function zo(t,e){1&t&&R.Ob(0,"hr")}function qo(t,e){1&t&&(R.Tb(0,"th",73),R.Fc(1,"Art\xedculo"),R.Sb())}function Lo(t,e){if(1&t&&(R.Tb(0,"td",74),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.Gc(t.articulo.descripcion)}}function Wo(t,e){1&t&&(R.Tb(0,"th",75),R.Fc(1,"Cantidad"),R.Sb())}function Vo(t,e){if(1&t&&(R.Tb(0,"td",76),R.Fc(1),R.gc(2,"number"),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.Gc(R.ic(2,1,t.cantidad,"1.2-2"))}}function Ko(t,e){1&t&&(R.Tb(0,"th",75),R.Fc(1,"Unida de medida"),R.Sb())}function Qo(t,e){if(1&t&&(R.Tb(0,"td",76),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.Gc(t.medida.descripcion)}}function Xo(t,e){1&t&&(R.Tb(0,"th",75),R.Fc(1,"Precio"),R.Sb())}function Jo(t,e){if(1&t&&(R.Tb(0,"td",76),R.Fc(1),R.gc(2,"number"),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.Gc(R.ic(2,1,t.precio,"1.2-2"))}}function Zo(t,e){1&t&&(R.Tb(0,"th",73),R.Fc(1,"\xa0"),R.Sb())}function Yo(t,e){if(1&t){const t=R.Ub();R.Tb(0,"td",74),R.Tb(1,"button",48),R.bc("click",function(){R.xc(t);const i=e.$implicit;return R.fc(3).getReceta(i.receta,i.articulo_detalle)}),R.Fc(2," Editar "),R.Sb(),R.Tb(3,"button",49),R.bc("click",function(){R.xc(t);const i=e.$implicit;return R.fc(3).eliminaReceta(i)}),R.Fc(4," Eliminar "),R.Sb(),R.Sb()}}function tn(t,e){1&t&&R.Ob(0,"tr",77)}function en(t,e){1&t&&R.Ob(0,"tr",78)}function on(t,e){if(1&t&&(R.Tb(0,"table",61),R.Rb(1,62),R.Dc(2,qo,2,0,"th",63),R.Dc(3,Lo,2,1,"td",64),R.Qb(),R.Rb(4,65),R.Dc(5,Wo,2,0,"th",66),R.Dc(6,Vo,3,4,"td",67),R.Qb(),R.Rb(7,68),R.Dc(8,Ko,2,0,"th",66),R.Dc(9,Qo,2,1,"td",67),R.Qb(),R.Rb(10,69),R.Dc(11,Xo,2,0,"th",66),R.Dc(12,Jo,3,4,"td",67),R.Qb(),R.Rb(13,70),R.Dc(14,Zo,2,0,"th",63),R.Dc(15,Yo,5,0,"td",64),R.Qb(),R.Dc(16,tn,1,0,"tr",71),R.Dc(17,en,1,0,"tr",72),R.Sb()),2&t){const t=R.fc(2);R.lc("dataSource",t.dataSource),R.Cb(16),R.lc("matHeaderRowDef",t.displayedColumns),R.Cb(1),R.lc("matRowDefColumns",t.displayedColumns)}}function nn(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-card",0),R.Tb(1,"mat-card-title"),R.Tb(2,"h4"),R.Fc(3),R.Dc(4,Bo,3,0,"button",1),R.Dc(5,Ro,3,0,"button",1),R.Sb(),R.Sb(),R.Tb(6,"mat-card-content"),R.Dc(7,Go,29,15,"form",2),R.Dc(8,zo,1,0,"hr",3),R.Tb(9,"mat-form-field",11),R.Tb(10,"input",50),R.bc("keyup",function(e){return R.xc(t),R.fc().applyFilter(e.target.value)}),R.Sb(),R.Sb(),R.Dc(11,on,18,3,"table",51),R.Sb(),R.Sb()}if(2&t){const t=R.fc();R.Cb(3),R.Hc(" Detalle del art\xedculo ",t.articulo.descripcion," "),R.Cb(1),R.lc("ngIf",!t.showDetalleForm),R.Cb(1),R.lc("ngIf",t.showDetalleForm),R.Cb(2),R.lc("ngIf",t.showDetalleForm),R.Cb(1),R.lc("ngIf",t.recetas.length>0),R.Cb(3),R.lc("ngIf",t.recetas.length>0)}}let an=(()=>{class t{constructor(t,e,i,o,n,a,c,r){this.dialog=t,this.snackBar=e,this.ls=i,this.articuloSrvc=o,this.medidaSrvc=n,this.presentacionSrvc=a,this.impuestoEspecialSrvc=c,this.rptSrvc=r,this.categoria=null,this.subcategoria=null,this.articuloSvd=new R.o,this.titulo="Receta",this.showArticuloForm=!0,this.medidas=[],this.medidasFull=[],this.presentaciones=[],this.articulos=[],this.filteredArticulos=[],this.recetas=[],this.impuestosEspeciales=[],this.showDetalleForm=!0,this.displayedColumns=["articulo","cantidad","medida","precio","editItem"],this.keyboardLayout=A.a.IDIOMA_TECLADO,this.esMovil=!1,this.txtArticuloSelected=void 0,this.resetArticulo=()=>{this.articulo={articulo:null,categoria_grupo:this.articulo.categoria_grupo,presentacion:null,descripcion:null,precio:null,bien_servicio:"B",produccion:0,mostrar_pos:1,presentacion_reporte:null,impuesto_especial:null,shopify_id:null,multiple:0,cantidad_minima:1,cantidad_maxima:1,combo:0,rendimiento:0,mostrar_inventario:0},this.recetas=[],this.resetReceta()},this.setArticuloCategoriaGrupo=t=>this.articulo.categoria_grupo=+t,this.onSubmit=()=>{this.articuloSrvc.saveArticulo(this.articulo).subscribe(t=>{t.exito?(this.articuloSvd.emit(),this.resetArticulo(),this.articulo=t.articulo,this.loadRecetas(this.articulo.articulo),this.loadArticulos(),this.snackBar.open("Art\xedculo guardado con \xe9xito...","Art\xedculo",{duration:3e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Articulo",{duration:3e3})})},this.loadMedidas=()=>{this.medidaSrvc.get().subscribe(t=>{t&&(this.medidasFull=t)})},this.loadPresentaciones=()=>{this.presentacionSrvc.get().subscribe(t=>{t&&(this.presentaciones=t)})},this.loadArticulos=()=>{this.articuloSrvc.getArticulos().subscribe(t=>{t&&(this.articulos=t)})},this.loadImpuestosEspeciales=()=>{this.impuestoEspecialSrvc.get().subscribe(t=>{t&&(this.impuestosEspeciales=t)})},this.displayArticulo=t=>{if(t)return this.receta.articulo=t.articulo,this.filtrarMedidas(t),t.descripcion;this.medidas=[]},this.filtrarMedidas=t=>{const e=this.presentaciones.find(e=>+e.presentacion==+t.presentacion_reporte);this.medidas=e?this.medidasFull.filter(t=>+t.medida==+e.medida.medida):[]},this.filtrarArticulos=t=>{if(t&&"string"==typeof t){const e=t.toLowerCase();this.filteredArticulos=this.articulos.filter(t=>t.descripcion.toLowerCase().includes(e))}else this.filteredArticulos=this.articulos},this.resetReceta=()=>{this.receta={articulo_detalle:null,receta:this.articulo.articulo||0,racionable:0,articulo:null,cantidad:1,medida:null,anulado:0,precio_extra:0,precio:0},this.txtArticuloSelected=void 0,this.updateTableDataSource()},this.loadRecetas=(t=+this.articulo.articulo)=>{this.articuloSrvc.getArticuloDetalle(+t,{receta:+t}).subscribe(t=>{t&&(this.recetas=t,this.updateTableDataSource())})},this.getReceta=(t=+this.articulo.articulo,e)=>{this.articuloSrvc.getArticuloDetalle(t,{articulo_detalle:e}).subscribe(t=>{t&&(this.receta={articulo_detalle:t[0].articulo_detalle,receta:t[0].receta.articulo,racionable:t[0].articulo.articulo,articulo:t[0].articulo.articulo,cantidad:+t[0].cantidad,medida:t[0].medida.medida,anulado:t[0].anulado||0,precio_extra:t[0].precio_extra||0,precio:+t[0].precio},this.txtArticuloSelected=t[0].articulo,this.showDetalleForm=!0)})},this.eliminaReceta=t=>{this.dialog.open(W.a,{maxWidth:"400px",data:new W.b("Eliminar detalle",`\xbfDesea eliminar '${t.cantidad} de ${t.articulo.descripcion}' de la receta?`,"S\xed","No")}).afterClosed().subscribe(e=>{e&&(t.anulado=1,t.articulo=t.articulo.articulo,this.articuloSrvc.saveArticuloDetalle(t).subscribe(t=>{this.loadRecetas(),this.resetReceta()}))})},this.onSubmitDetail=()=>{this.receta.receta=this.articulo.articulo,this.articuloSrvc.saveArticuloDetalle(this.receta).subscribe(t=>{t&&(t.exito?(this.loadRecetas(),this.resetReceta()):this.snackBar.open(`ERROR: ${t.mensaje}`,"Art\xedculo",{duration:3e3}))})},this.imprimirReceta=()=>{this.rptSrvc.imprimirReceta(this.articulo.articulo).subscribe(t=>{if(t){const e=new Blob([t],{type:"application/pdf"});Object(oo.saveAs)(e,`${this.titulo}_${this.articulo.descripcion}.pdf`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})},this.updateTableDataSource=()=>{this.dataSource=new p.k(this.recetas),this.dataSource.filterPredicate=(t,e)=>t.articulo.descripcion.toLowerCase().includes(e)},this.replicarASedes=()=>{this.dialog.open(lo,{width:"50%",data:{articulo:this.articulo}}).afterClosed().subscribe(t=>{})},this.applyFilter=t=>{this.dataSource.filter=t.toLocaleLowerCase()}}ngOnInit(){this.esMovil=this.ls.get(A.a.usrTokenVar).enmovil||!1,this.resetArticulo(),this.loadMedidas(),this.loadArticulos(),this.loadPresentaciones(),this.loadImpuestosEspeciales()}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(M.b),R.Nb(v.b),R.Nb($.a),R.Nb(X.a),R.Nb(uo.a),R.Nb(J.a),R.Nb(bo.a),R.Nb(go.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-form-producto"]],inputs:{articulo:"articulo",categoria:"categoria",subcategoria:"subcategoria"},outputs:{articuloSvd:"articuloSvd"},decls:10,vars:6,consts:[[1,"mat-elevation-z4","fullWidth"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmArticulo","ngForm"],["color","accent","class","catSubCat","selected","",4,"ngIf"],["color","warn","class","catSubCat","selected","",4,"ngIf"],[1,"fullWidth"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"ngModel","ngModelChange",4,"ngIf"],["matInput","","type","number","placeholder","Precio","name","precio","required","",3,"ngModel","ngModelChange"],["name","presentacion","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","presentacion_reporte","required","",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","C\xf3digo","name","codigo","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text","placeholder","C\xf3digo","name","codigo","required","",3,"ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text","placeholder","Shopify ID","name","shopify_id",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text","placeholder","Shopify ID","name","shopify_id",3,"ngModel","ngModelChange",4,"ngIf"],["name","impuesto_especial",3,"ngModel","ngModelChange"],["class","fullWidth",4,"ngIf"],[1,"row"],[1,"col","m3","s3"],["name","produccion",1,"example-margin",3,"ngModel","ngModelChange"],["name","mostrar_pos",1,"example-margin",3,"ngModel","ngModelChange"],["name","combo",1,"example-margin",3,"ngModel","ngModelChange"],["name","multiple",1,"example-margin",3,"ngModel","ngModelChange"],["name","mostrar_inventario",1,"example-margin",3,"ngModel","ngModelChange"],["name","esreceta",1,"example-margin",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["color","accent","selected","",1,"catSubCat"],["color","warn","selected","",1,"catSubCat"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"matKeyboard","ngModel","ngModelChange"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"ngModel","ngModelChange"],[3,"value"],["matInput","","type","text","placeholder","C\xf3digo","name","codigo","required","",3,"matKeyboard","ngModel","ngModelChange"],["matInput","","type","text","placeholder","C\xf3digo","name","codigo","required","",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","Shopify ID","name","shopify_id",3,"matKeyboard","ngModel","ngModelChange"],["matInput","","type","text","placeholder","Shopify ID","name","shopify_id",3,"ngModel","ngModelChange"],["matInput","","type","number","step","0.05","placeholder","Rendimiento","name","rendimiento","required","",3,"ngModel","ngModelChange"],["matInput","","type","number","step","1","placeholder","Cantidad minima","name","minima","required","",3,"ngModel","ngModelChange"],["matInput","","type","number","step","1","placeholder","Cantidad maxima","name","maxima","required","",3,"ngModel","ngModelChange"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"click"],["mat-raised-button","","type","button","color","accent",3,"click"],["matInput","","placeholder","Buscar",3,"keyup"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleArticulo","ngForm"],["type","text","placeholder","Art\xedculo","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith"],["autoArticulos","matAutocomplete"],["matInput","","placeholder","Cantidad","name","cantidad","required","",3,"ngModel","ngModelChange"],["name","medida","required","",3,"ngModel","ngModelChange"],["name","racionable",1,"fullWidth",3,"ngModel","ngModelChange"],["name","extra",1,"fullWidth",3,"ngModel","ngModelChange"],["matInput","","placeholder","Precio","name","precio","required","",3,"ngModel","ngModelChange"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","articulo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","cantidad"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","medida"],["matColumnDef","precio"],["matColumnDef","editItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(R.Tb(0,"mat-card",0),R.Tb(1,"mat-card-title"),R.Tb(2,"h4"),R.Fc(3),R.Dc(4,ho,3,0,"button",1),R.Dc(5,po,3,0,"button",1),R.Sb(),R.Sb(),R.Tb(6,"mat-card-content"),R.Dc(7,Eo,59,27,"form",2),R.Sb(),R.Sb(),R.Dc(8,Ao,1,0,"hr",3),R.Dc(9,nn,12,6,"mat-card",4)),2&t&&(R.Cb(3),R.Hc(" Art\xedculo ",e.articulo.articulo?e.articulo.descripcion:""," "),R.Cb(1),R.lc("ngIf",!e.showArticuloForm),R.Cb(1),R.lc("ngIf",e.showArticuloForm),R.Cb(2),R.lc("ngIf",e.showArticuloForm),R.Cb(1),R.lc("ngIf",e.articulo.articulo),R.Cb(1),R.lc("ngIf",e.articulo.articulo))},directives:[b.a,b.h,o.m,b.c,S.a,l.a,a.r,a.l,a.m,y.b,d.b,u.b,a.o,a.c,a.p,a.k,a.n,d.f,m.a,o.l,f.a,y.a,O.a,G.m,F.c,F.a,p.j,p.c,p.e,p.b,p.g,p.i,p.d,p.a,p.f,p.h],pipes:[o.f],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}.catSubCat[_ngcontent-%COMP%]{margin-bottom:10px}"]}),t})();const cn=["frmProducto"],rn=["frmSubcategoria"];function sn(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-chip",16),R.bc("click",function(){R.xc(t);const i=e.$implicit,o=R.fc();return o.categoria=i,o.categoriaGrupo=null,o.loadSubCategorias(i.categoria)}),R.Fc(1),R.Sb()}if(2&t){const t=e.$implicit;R.Cb(1),R.Hc(" ",t.descripcion," ")}}function ln(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-chip",19),R.bc("click",function(){R.xc(t);const i=e.$implicit,o=R.fc(2);return o.categoriaGrupo=i,o.loadSubCategorias(o.categoria.categoria,i.categoria_grupo)}),R.Fc(1),R.Sb()}if(2&t){const t=e.$implicit;R.Cb(1),R.Hc(" ",t.descripcion," ")}}function dn(t,e){if(1&t&&(R.Tb(0,"mat-chip-list",17),R.Dc(1,ln,2,1,"mat-chip",18),R.Sb()),2&t){const t=e.$implicit;R.Cb(1),R.lc("ngForOf",t)}}function un(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",20),R.bc("click",function(){R.xc(t);const i=e.$implicit;return R.fc().setArticulo(i)}),R.Fc(1),R.Sb()}if(2&t){const t=e.$implicit;R.Cb(1),R.Gc(t.descripcion)}}const bn=function(){return{standalone:!0}};let gn=(()=>{class t{constructor(t,e){this.articuloSrvc=t,this.ls=e,this.categorias=[],this.categoriasGrupos=[],this.listasCategoriasGrupo=[],this.articulos=[],this.articulosFull=[],this.txtFiltro="",this.setArticulo=t=>{this.articuloSrvc.getArticulo({articulo:t.articulo}).subscribe(t=>{if(t&&t.length>0){const e=t[0];this.articulo={articulo:+e.articulo,categoria_grupo:+e.categoria_grupo.categoria_grupo,presentacion:e.presentacion.presentacion,descripcion:e.descripcion,precio:+e.precio,codigo:e.codigo,produccion:e.produccion,presentacion_reporte:e.presentacion_reporte.presentacion,mostrar_pos:e.mostrar_pos,impuesto_especial:e.impuesto_especial,shopify_id:e.shopify_id,multiple:e.multiple,cantidad_minima:e.cantidad_minima,cantidad_maxima:e.cantidad_maxima,combo:e.combo,rendimiento:e.rendimiento,mostrar_inventario:e.mostrar_inventario,esreceta:e.esreceta},this.frmProductoComponent.loadRecetas(+this.articulo.articulo),this.frmProductoComponent.resetReceta()}})},this.setArticuloCategoriaGrupo=t=>{this.articulo.categoria_grupo=+t,this.frmProductoComponent.setArticuloCategoriaGrupo(+t)},this.refreshArticuloList=t=>{this.loadArticulos()},this.loadCategorias=()=>{this.articuloSrvc.getCategorias({sede:+this.ls.get(A.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.categorias=t)})},this.loadSubCategorias=(t,e=null)=>{const i={categoria:+t,categoria_grupo_grupo:null};e?(this.frmProductoComponent.articulo.categoria_grupo=e,i.categoria_grupo_grupo=e):(this.frmProductoComponent.articulo.categoria_grupo=null,delete i.categoria_grupo_grupo,this.listasCategoriasGrupo=[]),this.articuloSrvc.getCategoriasGrupos(i).subscribe(t=>{t&&t.length>0?this.listasCategoriasGrupo.push(this.articuloSrvc.adaptCategoriaGrupoResponse(t)):e&&this.loadArticulos(e)})},this.loadArticulos=(t=null)=>{const e={categoria_grupo:null};t?e.categoria_grupo=t:delete e.categoria_grupo,this.articuloSrvc.getArticulos(e).subscribe(t=>{t&&(this.articulosFull=t,this.articulos=JSON.parse(JSON.stringify(this.articulosFull)))})},this.reloadCategoriasInSubcategoriasArticulos=()=>{this.loadCategorias(),this.frmSubcategoria.loadCategorias()},this.articulo={articulo:null,categoria_grupo:null,presentacion:null,descripcion:null,precio:null,bien_servicio:"B",produccion:0,presentacion_reporte:null,mostrar_pos:0,impuesto_especial:null,rendimiento:1,mostrar_inventario:0}}ngOnInit(){this.loadCategorias(),this.loadArticulos()}applyFilter(){this.articulos=this.txtFiltro.length>0?Object(A.b)(this.articulosFull,this.txtFiltro):JSON.parse(JSON.stringify(this.articulosFull))}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(X.a),R.Nb($.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-producto"]],viewQuery:function(t,e){if(1&t&&(R.Kc(cn,1),R.Kc(rn,1)),2&t){let t;R.sc(t=R.cc())&&(e.frmProductoComponent=t.first),R.sc(t=R.cc())&&(e.frmSubcategoria=t.first)}},decls:20,vars:9,consts:[["label","Categor\xedas"],[3,"categoriaGrupoSvd","onChangeSubCategoriaEv"],["label","Sub-categor\xedas"],["frmSubcategoria",""],["label","Art\xedculos"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","start start"],["fxFlex","100%"],["color","accent","selected","",3,"click",4,"ngFor","ngForOf"],["class","divSubCategorias",4,"ngFor","ngForOf"],["fxFlex","40%","fxFlex.xs","100%","fxFlex.sm","100%","fxLayout","row wrap","fxLayoutGap","8px grid","fxLayoutAlign","start start",1,"divArticulos"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],["mat-list-item","","class","accion-comanda mat-elevation-z4",3,"click",4,"ngFor","ngForOf"],["fxFlex","60%","fxFlex.xs","100%","fxFlex.sm","100%",1,"divArticulos"],[3,"categoria","subcategoria","articulo","articuloSvd"],["frmProducto",""],["color","accent","selected","",3,"click"],[1,"divSubCategorias"],["color","warn","selected","",3,"click",4,"ngFor","ngForOf"],["color","warn","selected","",3,"click"],["mat-list-item","",1,"accion-comanda","mat-elevation-z4",3,"click"]],template:function(t,e){1&t&&(R.Tb(0,"mat-tab-group"),R.Tb(1,"mat-tab",0),R.Tb(2,"app-categoria-producto",1),R.bc("categoriaGrupoSvd",function(){return e.reloadCategoriasInSubcategoriasArticulos()})("onChangeSubCategoriaEv",function(t){return e.setArticuloCategoriaGrupo(t)}),R.Sb(),R.Sb(),R.Tb(3,"mat-tab",2),R.Ob(4,"app-sub-categoria-producto",null,3),R.Sb(),R.Tb(6,"mat-tab",4),R.Tb(7,"div",5),R.Tb(8,"div",6),R.Tb(9,"mat-chip-list"),R.Dc(10,sn,2,1,"mat-chip",7),R.Sb(),R.Dc(11,dn,2,1,"mat-chip-list",8),R.Sb(),R.Tb(12,"div",9),R.Tb(13,"mat-form-field",10),R.Tb(14,"input",11),R.bc("keyup",function(){return e.applyFilter()})("ngModelChange",function(t){return e.txtFiltro=t}),R.Sb(),R.Sb(),R.Tb(15,"mat-action-list"),R.Dc(16,un,2,1,"button",12),R.Sb(),R.Sb(),R.Tb(17,"div",13),R.Tb(18,"app-form-producto",14,15),R.bc("articuloSvd",function(t){return e.refreshArticuloList(t)}),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(10),R.lc("ngForOf",e.categorias),R.Cb(1),R.lc("ngForOf",e.listasCategoriasGrupo),R.Cb(3),R.lc("ngModel",e.txtFiltro)("ngModelOptions",R.nc(8,bn)),R.Cb(2),R.lc("ngForOf",e.articulos),R.Cb(2),R.lc("categoria",e.categoria)("subcategoria",e.categoriaGrupo)("articulo",e.articulo))},directives:[h.b,h.a,qi,eo,io.c,io.b,io.a,y.b,o.l,io.d,d.b,u.b,a.c,a.k,a.n,s.a,an,y.a,s.c],styles:[".divArticulos[_ngcontent-%COMP%]{padding:3px 8px;overflow-y:auto;margin:0;height:85vh}.divArticulos[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]{width:200px;max-height:95px}.divSubCategorias[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px}.accion-comanda[_ngcontent-%COMP%]{background-color:#fff;margin:10px 0}"]}),t})();const hn=["frmEgreso"],pn=["frmIngreso"];let mn=(()=>{class t{constructor(t,e,i){this.ls=t,this._snackBar=e,this.transformacionSrvc=i,this.mermaDetalle=[],this.showMerma=!0,this.bloqueoBotones=!1,this.transformar=()=>{this.bloqueoBotones=!0,this.egreso=this.frmEgreso.egreso,this.ingreso=this.frmIngreso.ingreso,this.transformacion={egreso:{tipo_movimiento:this.egreso.tipo_movimiento,fecha:this.egreso.fecha,proveedor:this.ingreso.proveedor,bodega:this.egreso.bodega,usuario:this.egreso.usuario,estatus_movimiento:this.egreso.estatus_movimiento,bodega_destino:this.egreso.bodega_destino,tipo_movimiento_destino:this.egreso.tipo_movimiento_destino,detalle:[]},ingreso:{tipo_movimiento:this.ingreso.tipo_movimiento,fecha:this.ingreso.fecha,proveedor:this.ingreso.proveedor,bodega:this.ingreso.bodega,usuario:this.ingreso.usuario,bodega_origen:this.ingreso.bodega_origen,comentario:this.ingreso.comentario,detalle:[]},merma:[]},this.frmEgreso.detallesMerma.forEach(t=>this.transformacion.merma.push({articulo:t.articulo,cantidad:t.cantidad,precio_unitario:t.precio_unitario,precio_total:t.precio_total,presentacion:t.presentacion,cantidad_utilizada:t.cantidad_utilizada})),this.frmEgreso.detallesEgreso.forEach(t=>this.transformacion.egreso.detalle.push({articulo:t.articulo,cantidad:t.cantidad,precio_unitario:t.precio_unitario,precio_total:t.precio_total,presentacion:t.presentacion})),this.frmIngreso.detallesIngreso.forEach(t=>this.transformacion.ingreso.detalle.push({articulo:t.articulo,cantidad:t.cantidad,precio_unitario:t.precio_unitario,precio_total:t.precio_total,presentacion:t.presentacion,cantidad_utilizada:t.cantidad_utilizada})),this.transformacion.egreso&&this.transformacion.egreso.detalle&&this.transformacion.egreso.detalle.length>0&&this.transformacion.ingreso&&this.transformacion.ingreso.detalle&&this.transformacion.ingreso.detalle.length>0?this.transformacionSrvc.transformar(this.transformacion).subscribe(t=>{this.bloqueoBotones=!1,t.exito?(this.frmEgreso.resetEgreso(),this.frmEgreso.detallesEgreso=[],this.frmEgreso.resetDetalleMerma(),this.frmEgreso.detallesMerma=[],this.frmIngreso.resetIngreso(),this.frmIngreso.detallesIngreso=[],this._snackBar.open("Transformaci\xf3n generada con \xe9xito...","Transformaci\xf3n",{duration:5e3})):this._snackBar.open(`ERROR: ${t.mensaje}`,"Transformaci\xf3n",{duration:3e3})}):(this.bloqueoBotones=!1,this._snackBar.open("Faltan datos necesario. Favor complete los datos e intente de nuevo.","Transformaci\xf3n",{duration:3e3}))}}ngOnInit(){this.egreso={egreso:null,tipo_movimiento:null,bodega:null,fecha:B().format(A.a.dbDateFormat),usuario:this.ls.get(A.a.usrTokenVar).idusr||0,estatus_movimiento:1,traslado:0},this.ingreso={ingreso:null,tipo_movimiento:null,fecha:B().format(A.a.dbDateFormat),bodega:null,usuario:this.ls.get(A.a.usrTokenVar).idusr||0,comentario:null,proveedor:null}}doSomething(){}}return t.\u0275fac=function(e){return new(e||t)(R.Nb($.a),R.Nb(v.b),R.Nb(Se))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-transformacion"]],viewQuery:function(t,e){if(1&t&&(R.Kc(hn,1),R.Kc(pn,1)),2&t){let t;R.sc(t=R.cc())&&(e.frmEgreso=t.first),R.sc(t=R.cc())&&(e.frmIngreso=t.first)}},decls:15,vars:6,consts:[[1,"row"],[1,"col","m12","s12",2,"padding-bottom","5px !important"],["align","end"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[2,"font-size","18pt"],[1,"col","m6","s12"],[3,"egreso","saveToDB","egresoChange","egresoSavedEv"],["frmEgreso",""],[3,"bodega","ingreso","saveToDB","ingresoChange","ingresoSavedEv"],["frmIngreso",""]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"div",2),R.Tb(3,"button",3),R.bc("click",function(){return e.transformar()}),R.Tb(4,"mat-icon",4),R.Fc(5,"transform"),R.Sb(),R.Fc(6,"\xa0Transformar "),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Tb(7,"div",0),R.Tb(8,"div",5),R.Tb(9,"app-form-egreso",6,7),R.bc("egresoChange",function(t){return e.egreso=t})("egresoSavedEv",function(){return e.doSomething()}),R.Sb(),R.Sb(),R.Tb(11,"div",5),R.Tb(12,"app-form-ingreso",8,9),R.bc("ingresoChange",function(t){return e.ingreso=t})("ingresoSavedEv",function(){return e.doSomething()}),R.Sb(),R.Sb(),R.Sb(),R.Ob(14,"div",0)),2&t&&(R.Cb(3),R.lc("disabled",e.bloqueoBotones),R.Cb(6),R.lc("egreso",e.egreso)("saveToDB",!1),R.Cb(3),R.lc("bodega",!1)("ingreso",e.ingreso)("saveToDB",!1))},directives:[S.a,l.a,Hi,re],styles:[""]}),t})();var fn=i("NU9O");function Sn(t,e){if(1&t&&(R.Tb(0,"mat-option",13),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.bodega),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function vn(t,e){if(1&t&&(R.Tb(0,"mat-option",13),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.sede),R.Cb(1),R.Hc(" ",t.nombre," ")}}function Cn(t,e){1&t&&R.Ob(0,"app-cargando")}const Tn=function(){return{standalone:!0}};let _n=(()=>{class t{constructor(t,e,i,o){this.snackBar=t,this.pdfServicio=e,this.sedeSrvc=i,this.bodegaSrvc=o,this.bodegas=[],this.sedes=[],this.params={},this.titulo="Existencias",this.cargando=!1,this.configBotones={showPdf:!0,showHtml:!1,showExcel:!0},this.getSede=(t={})=>{this.sedeSrvc.get(t).subscribe(t=>{this.sedes=t})},this.getBodega=(t={})=>{this.bodegaSrvc.get(t).subscribe(t=>{this.bodegas=t})},this.excelClick=()=>{this.params._excel=1,this.cargando=!0,this.pdfServicio.getReporteExistencia(this.params).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/vnd.ms-excel"});Object(oo.saveAs)(e,`${this.titulo}.xls`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})},this.resetParams=()=>{this.params={},this.cargando=!1}}ngOnInit(){this.params.fecha=B().format(A.a.dbDateFormat),this.getSede(),this.getBodega()}onSubmit(){this.params._excel=0,this.cargando=!0,this.pdfServicio.getReporteExistencia(this.params).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/pdf"});Object(oo.saveAs)(e,`${this.titulo}.pdf`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(v.b),R.Nb(go.a),R.Nb(no.a),R.Nb(Q.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-existencias"]],decls:24,vars:9,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmRptExistencias","ngForm"],[1,"fullWidth"],["name","bodega",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","sede",3,"ngModel","ngModelChange"],["matInput","","type","date","placeholder","Al","required","",3,"ngModel","ngModelOptions","ngModelChange"],["align","end"],[3,"configuracion","excelClick","pdfClick","resetParamsClick"],[4,"ngIf"],[3,"value"]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"mat-card",2),R.Tb(3,"mat-card-title"),R.Tb(4,"h4"),R.Fc(5,"Reporte de existencias"),R.Sb(),R.Sb(),R.Tb(6,"mat-card-content"),R.Tb(7,"form",3,4),R.Tb(9,"mat-form-field",5),R.Tb(10,"mat-label"),R.Fc(11,"Bodega"),R.Sb(),R.Tb(12,"mat-select",6),R.bc("ngModelChange",function(t){return e.params.bodega=t}),R.Dc(13,Sn,2,2,"mat-option",7),R.Sb(),R.Sb(),R.Tb(14,"mat-form-field",5),R.Tb(15,"mat-label"),R.Fc(16,"Sede"),R.Sb(),R.Tb(17,"mat-select",8),R.bc("ngModelChange",function(t){return e.params.sede=t}),R.Dc(18,vn,2,2,"mat-option",7),R.Sb(),R.Sb(),R.Tb(19,"mat-form-field",5),R.Tb(20,"input",9),R.bc("ngModelChange",function(t){return e.params.fecha=t}),R.Sb(),R.Sb(),R.Tb(21,"div",10),R.Tb(22,"app-rpt-botones",11),R.bc("excelClick",function(){return e.excelClick()})("pdfClick",function(){return e.onSubmit()})("resetParamsClick",function(){return e.resetParams()}),R.Sb(),R.Sb(),R.Sb(),R.Dc(23,Cn,1,0,"app-cargando",12),R.Sb(),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(12),R.lc("ngModel",e.params.bodega),R.Cb(1),R.lc("ngForOf",e.bodegas),R.Cb(4),R.lc("ngModel",e.params.sede),R.Cb(1),R.lc("ngForOf",e.sedes),R.Cb(2),R.lc("ngModel",e.params.fecha)("ngModelOptions",R.nc(8,Tn)),R.Cb(2),R.lc("configuracion",e.configBotones),R.Cb(1),R.lc("ngIf",e.cargando))},directives:[b.a,b.h,b.c,a.r,a.l,a.m,d.b,d.f,m.a,a.k,a.n,o.l,u.b,a.c,a.p,fn.a,o.m,G.m,ao.a],styles:[""]}),t})();function xn(t,e){if(1&t&&(R.Tb(0,"mat-option",14),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.articulo),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function Mn(t,e){if(1&t&&(R.Tb(0,"mat-option",14),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.bodega),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function In(t,e){if(1&t&&(R.Tb(0,"mat-option",14),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.sede),R.Cb(1),R.Hc(" ",t.nombre," ")}}function Dn(t,e){1&t&&R.Ob(0,"app-cargando")}const Fn=function(){return{standalone:!0}};let yn=(()=>{class t{constructor(t,e,i,o,n){this.snackBar=t,this.pdfServicio=e,this.sedeSrvc=i,this.bodegaSrvc=o,this.articuloSrvc=n,this.bodegas=[],this.sedes=[],this.articulos=[],this.params={},this.titulo="Kardex",this.cargando=!1,this.configBotones={showPdf:!0,showHtml:!1,showExcel:!0},this.getSede=(t={})=>{this.sedeSrvc.get(t).subscribe(t=>{this.sedes=t})},this.getArticulo=(t={})=>{this.articuloSrvc.getArticulosIngreso(t).subscribe(t=>{this.articulos=t})},this.getBodega=(t={})=>{this.bodegaSrvc.get(t).subscribe(t=>{this.bodegas=t})},this.excelClick=()=>{this.params._excel=1,this.cargando=!0,this.pdfServicio.getReporteKardex(this.params).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/vnd.ms-excel"});Object(oo.saveAs)(e,`${this.titulo}.xls`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})},this.resetParams=()=>{this.params={},this.cargando=!1}}ngOnInit(){this.getSede(),this.getBodega(),this.getArticulo()}onSubmit(){this.params._excel=0,this.pdfServicio.getReporteKardex(this.params).subscribe(t=>{if(t){const e=new Blob([t],{type:"application/pdf"});Object(oo.saveAs)(e,`${this.titulo}.pdf`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(v.b),R.Nb(go.a),R.Nb(no.a),R.Nb(Q.a),R.Nb(X.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-kardex"]],decls:30,vars:14,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],[1,"fullWidth"],["name","articulo","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","bodega",3,"ngModel","ngModelChange"],["name","sede",3,"ngModel","ngModelChange"],["matInput","","type","date","placeholder","Del","required","",3,"ngModel","ngModelOptions","ngModelChange"],["matInput","","type","date","placeholder","Al","required","",3,"ngModel","ngModelOptions","ngModelChange"],["align","end"],[3,"configuracion","excelClick","pdfClick","resetParamsClick"],[4,"ngIf"],[3,"value"]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"mat-card",2),R.Tb(3,"mat-card-title"),R.Tb(4,"h4"),R.Fc(5,"Kardex"),R.Sb(),R.Sb(),R.Tb(6,"mat-card-content"),R.Tb(7,"form",3),R.Tb(8,"mat-form-field",4),R.Tb(9,"mat-label"),R.Fc(10,"Articulo"),R.Sb(),R.Tb(11,"mat-select",5),R.bc("ngModelChange",function(t){return e.params.articulo=t}),R.Dc(12,xn,2,2,"mat-option",6),R.Sb(),R.Sb(),R.Tb(13,"mat-form-field",4),R.Tb(14,"mat-label"),R.Fc(15,"Bodega"),R.Sb(),R.Tb(16,"mat-select",7),R.bc("ngModelChange",function(t){return e.params.bodega=t}),R.Dc(17,Mn,2,2,"mat-option",6),R.Sb(),R.Sb(),R.Tb(18,"mat-form-field",4),R.Tb(19,"mat-label"),R.Fc(20,"Sede"),R.Sb(),R.Tb(21,"mat-select",8),R.bc("ngModelChange",function(t){return e.params.sede=t}),R.Dc(22,In,2,2,"mat-option",6),R.Sb(),R.Sb(),R.Tb(23,"mat-form-field",4),R.Tb(24,"input",9),R.bc("ngModelChange",function(t){return e.params.fdel=t}),R.Sb(),R.Sb(),R.Tb(25,"mat-form-field",4),R.Tb(26,"input",10),R.bc("ngModelChange",function(t){return e.params.fal=t}),R.Sb(),R.Sb(),R.Tb(27,"div",11),R.Tb(28,"app-rpt-botones",12),R.bc("excelClick",function(){return e.excelClick()})("pdfClick",function(){return e.onSubmit()})("resetParamsClick",function(){return e.resetParams()}),R.Sb(),R.Sb(),R.Sb(),R.Dc(29,Dn,1,0,"app-cargando",13),R.Sb(),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(11),R.lc("ngModel",e.params.articulo),R.Cb(1),R.lc("ngForOf",e.articulos),R.Cb(4),R.lc("ngModel",e.params.bodega),R.Cb(1),R.lc("ngForOf",e.bodegas),R.Cb(4),R.lc("ngModel",e.params.sede),R.Cb(1),R.lc("ngForOf",e.sedes),R.Cb(2),R.lc("ngModel",e.params.fdel)("ngModelOptions",R.nc(12,Fn)),R.Cb(2),R.lc("ngModel",e.params.fal)("ngModelOptions",R.nc(13,Fn)),R.Cb(2),R.lc("configuracion",e.configBotones),R.Cb(1),R.lc("ngIf",e.cargando))},directives:[b.a,b.h,b.c,a.r,a.l,a.m,d.b,d.f,m.a,a.p,a.k,a.n,o.l,u.b,a.c,fn.a,o.m,G.m,ao.a],styles:[""]}),t})();const kn=["frmIngreso"];let On=(()=>{class t{constructor(t,e,i){this.ls=t,this.snackBar=e,this.transformacionSrvc=i,this.bloqueoBotones=!1,this.transformar=()=>{this.bloqueoBotones=!0,this.ingreso=this.frmIngreso.ingreso,this.produccion={tipo_movimiento:this.ingreso.tipo_movimiento,fecha:this.ingreso.fecha,proveedor:this.ingreso.proveedor,bodega:this.ingreso.bodega,usuario:this.ingreso.usuario,bodega_origen:this.ingreso.bodega_origen,comentario:this.ingreso.comentario,detalle:[]},this.frmIngreso.detallesIngreso.forEach(t=>this.produccion.detalle.push({articulo:t.articulo,cantidad:t.cantidad,precio_unitario:t.precio_unitario,precio_total:t.precio_total,presentacion:t.presentacion})),this.produccion&&this.produccion.detalle&&this.produccion.detalle.length>0?this.transformacionSrvc.producir(this.produccion).subscribe(t=>{this.bloqueoBotones=!1,t.exito?(this.frmIngreso.resetIngreso(),this.frmIngreso.detallesIngreso=[],this.snackBar.open("Producto generado con \xe9xito...","Producci\xf3n",{duration:5e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Producci\xf3n",{duration:3e3})}):(this.bloqueoBotones=!1,this.snackBar.open("Faltan datos necesario. Favor complete los datos e intente de nuevo.","Transformaci\xf3n",{duration:3e3}))},this.doSomething=()=>{}}ngOnInit(){this.ingreso={ingreso:null,tipo_movimiento:null,fecha:B().format(A.a.dbDateFormat),bodega:null,usuario:this.ls.get(A.a.usrTokenVar).idusr||0,comentario:null,proveedor:null}}}return t.\u0275fac=function(e){return new(e||t)(R.Nb($.a),R.Nb(v.b),R.Nb(Se))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-produccion"]],viewQuery:function(t,e){if(1&t&&R.Kc(kn,1),2&t){let t;R.sc(t=R.cc())&&(e.frmIngreso=t.first)}},decls:11,vars:4,consts:[[1,"row"],[1,"col","m12","s12",2,"padding-bottom","5px !important"],["align","end"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[2,"font-size","18pt"],[1,"col","m12","s12"],[3,"produccion","ingreso","saveToDB","ingresoChange","ingresoSavedEv"],["frmIngreso",""]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"div",2),R.Tb(3,"button",3),R.bc("click",function(){return e.transformar()}),R.Tb(4,"mat-icon",4),R.Fc(5,"transform"),R.Sb(),R.Fc(6,"\xa0Producir "),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Tb(7,"div",0),R.Tb(8,"div",5),R.Tb(9,"app-form-ingreso",6,7),R.bc("ingresoChange",function(t){return e.ingreso=t})("ingresoSavedEv",function(){return e.doSomething()}),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(3),R.lc("disabled",e.bloqueoBotones),R.Cb(6),R.lc("produccion",!0)("ingreso",e.ingreso)("saveToDB",!1))},directives:[S.a,l.a,re],styles:[""]}),t})();function wn(t,e){if(1&t&&(R.Tb(0,"mat-option",13),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.bodega),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function En(t,e){if(1&t&&(R.Tb(0,"mat-option",13),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.sede),R.Cb(1),R.Hc(" ",t.nombre," ")}}function An(t,e){1&t&&R.Ob(0,"app-cargando")}const Bn=function(){return{standalone:!0}};let Rn=(()=>{class t{constructor(t,e,i,o){this.snackBar=t,this.pdfServicio=e,this.sedeSrvc=i,this.bodegaSrvc=o,this.bodegas=[],this.sedes=[],this.params={},this.titulo="Valorizado",this.cargando=!1,this.configBotones={showPdf:!0,showHtml:!1,showExcel:!0},this.getSede=(t={})=>{this.sedeSrvc.get(t).subscribe(t=>{this.sedes=t})},this.getBodega=(t={})=>{this.bodegaSrvc.get(t).subscribe(t=>{this.bodegas=t})},this.excelClick=()=>{this.params._excel=1,this.cargando=!0,this.pdfServicio.getReporteValorizado(this.params).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/vnd.ms-excel"});Object(oo.saveAs)(e,`${this.titulo}.xls`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})},this.resetParams=()=>{this.params={},this.cargando=!1}}ngOnInit(){this.params.fecha=B().format(A.a.dbDateFormat),this.getSede(),this.getBodega()}onSubmit(){this.params._excel=0,this.cargando=!0,this.pdfServicio.getReporteValorizado(this.params).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/pdf"});Object(oo.saveAs)(e,`${this.titulo}.pdf`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(v.b),R.Nb(go.a),R.Nb(no.a),R.Nb(Q.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-valorizado"]],decls:24,vars:9,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmRptValorizado","ngForm"],[1,"fullWidth"],["name","bodega",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","sede",3,"ngModel","ngModelChange"],["matInput","","type","date","placeholder","Al","required","",3,"ngModel","ngModelOptions","ngModelChange"],["align","end"],[3,"configuracion","excelClick","pdfClick","resetParamsClick"],[4,"ngIf"],[3,"value"]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"mat-card",2),R.Tb(3,"mat-card-title"),R.Tb(4,"h4"),R.Fc(5,"Inventario Valorizado"),R.Sb(),R.Sb(),R.Tb(6,"mat-card-content"),R.Tb(7,"form",3,4),R.Tb(9,"mat-form-field",5),R.Tb(10,"mat-label"),R.Fc(11,"Bodega"),R.Sb(),R.Tb(12,"mat-select",6),R.bc("ngModelChange",function(t){return e.params.bodega=t}),R.Dc(13,wn,2,2,"mat-option",7),R.Sb(),R.Sb(),R.Tb(14,"mat-form-field",5),R.Tb(15,"mat-label"),R.Fc(16,"Sede"),R.Sb(),R.Tb(17,"mat-select",8),R.bc("ngModelChange",function(t){return e.params.sede=t}),R.Dc(18,En,2,2,"mat-option",7),R.Sb(),R.Sb(),R.Tb(19,"mat-form-field",5),R.Tb(20,"input",9),R.bc("ngModelChange",function(t){return e.params.fecha=t}),R.Sb(),R.Sb(),R.Tb(21,"div",10),R.Tb(22,"app-rpt-botones",11),R.bc("excelClick",function(){return e.excelClick()})("pdfClick",function(){return e.onSubmit()})("resetParamsClick",function(){return e.resetParams()}),R.Sb(),R.Sb(),R.Sb(),R.Dc(23,An,1,0,"app-cargando",12),R.Sb(),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(12),R.lc("ngModel",e.params.bodega),R.Cb(1),R.lc("ngForOf",e.bodegas),R.Cb(4),R.lc("ngModel",e.params.sede),R.Cb(1),R.lc("ngForOf",e.sedes),R.Cb(2),R.lc("ngModel",e.params.fecha)("ngModelOptions",R.nc(8,Bn)),R.Cb(2),R.lc("configuracion",e.configBotones),R.Cb(1),R.lc("ngIf",e.cargando))},directives:[b.a,b.h,b.c,a.r,a.l,a.m,d.b,d.f,m.a,a.k,a.n,o.l,u.b,a.c,a.p,fn.a,o.m,G.m,ao.a],styles:[""]}),t})(),$n=(()=>{class t{constructor(t){this.http=t,this.fisicoUrl="fisico",this.srvcErrHndl=new H.a}generarInventarioFisico(t){return this.http.post(`${A.a.urlWms}/${this.fisicoUrl}/generar`,t).pipe(Object(P.a)(A.a.reintentos),Object(N.a)(this.srvcErrHndl.errorHandler))}confirmar(t){return this.http.post(`${A.a.urlWms}/${this.fisicoUrl}/confirmar/${+t.inventario_fisico>0?"/"+t.inventario_fisico:""}`,{}).pipe(Object(P.a)(A.a.reintentos),Object(N.a)(this.srvcErrHndl.errorHandler))}getDetalle(t,e={}){return this.http.get(`${A.a.urlWms}/${this.fisicoUrl}/buscar_detalle/${t}?${U.stringify(e)}`).pipe(Object(P.a)(A.a.reintentos),Object(N.a)(this.srvcErrHndl.errorHandler))}saveDetalle(t){return this.http.post(`${A.a.urlWms}/${this.fisicoUrl}/actualizar/`,t).pipe(Object(P.a)(A.a.reintentos),Object(N.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(R.Xb(n.b))},t.\u0275prov=R.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Hn(t,e){1&t&&(R.Tb(0,"mat-icon",8),R.Fc(1,"expand_more"),R.Sb())}function Pn(t,e){1&t&&(R.Tb(0,"mat-icon",8),R.Fc(1,"expand_less"),R.Sb())}function Nn(t,e){if(1&t&&(R.Tb(0,"mat-option",21),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.bodega),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function Un(t,e){if(1&t&&(R.Tb(0,"mat-option",21),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.sede),R.Cb(1),R.Hc(" ",t.nombre," ")}}function jn(t,e){if(1&t&&(R.Tb(0,"mat-option",21),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function Gn(t,e){if(1&t&&(R.Tb(0,"mat-option",21),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.categoria_grupo),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function zn(t,e){1&t&&R.Ob(0,"app-cargando")}const qn=function(){return{standalone:!0}};function Ln(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-card-content"),R.Tb(1,"form",9,10),R.bc("ngSubmit",function(){R.xc(t);const e=R.tc(2),i=R.fc();return e.form.valid&&i.onSubmit()}),R.Tb(3,"mat-form-field",11),R.Tb(4,"mat-label"),R.Fc(5,"Bodega"),R.Sb(),R.Tb(6,"mat-select",12),R.bc("ngModelChange",function(e){return R.xc(t),R.fc().params.bodega=e}),R.Dc(7,Nn,2,2,"mat-option",13),R.Sb(),R.Sb(),R.Tb(8,"mat-form-field",11),R.Tb(9,"mat-label"),R.Fc(10,"Sede"),R.Sb(),R.Tb(11,"mat-select",14),R.bc("ngModelChange",function(e){return R.xc(t),R.fc().params.sede=e}),R.Dc(12,Un,2,2,"mat-option",13),R.Sb(),R.Sb(),R.Tb(13,"mat-form-field",11),R.Tb(14,"mat-label"),R.Fc(15,"Categor\xeda"),R.Sb(),R.Tb(16,"mat-select",15),R.bc("selectionChange",function(e){return R.xc(t),R.fc().onCategoriaSelected(e)}),R.Dc(17,jn,2,2,"mat-option",13),R.Sb(),R.Sb(),R.Tb(18,"mat-form-field",11),R.Tb(19,"mat-label"),R.Fc(20,"Sub-categor\xeda"),R.Sb(),R.Tb(21,"mat-select",16),R.bc("ngModelChange",function(e){return R.xc(t),R.fc().params.categoria_grupo_grupo=e}),R.Dc(22,Gn,2,2,"mat-option",13),R.Sb(),R.Sb(),R.Tb(23,"mat-form-field",11),R.Tb(24,"input",17),R.bc("ngModelChange",function(e){return R.xc(t),R.fc().params.fecha=e}),R.Sb(),R.Sb(),R.Tb(25,"mat-checkbox",18),R.bc("ngModelChange",function(e){return R.xc(t),+(R.fc().params._excel=e)}),R.Fc(26,"Generar en Excel "),R.Sb(),R.Tb(27,"div",19),R.Tb(28,"button",20),R.Fc(29,"GENERAR"),R.Sb(),R.Sb(),R.Sb(),R.Dc(30,zn,1,0,"app-cargando",7),R.Sb()}if(2&t){const t=R.tc(2),e=R.fc();R.Cb(6),R.lc("ngModel",e.params.bodega),R.Cb(1),R.lc("ngForOf",e.bodegas),R.Cb(4),R.lc("ngModel",e.params.sede),R.Cb(1),R.lc("ngForOf",e.sedes),R.Cb(5),R.lc("ngForOf",e.categorias),R.Cb(4),R.lc("ngModel",e.params.categoria_grupo_grupo),R.Cb(1),R.lc("ngForOf",e.categoriasGruposPadre),R.Cb(2),R.lc("ngModel",e.params.fecha)("ngModelOptions",R.nc(12,qn)),R.Cb(1),R.lc("ngModel",+e.params._excel),R.Cb(3),R.lc("disabled",!t.form.valid),R.Cb(2),R.lc("ngIf",e.cargando)}}let Wn=(()=>{class t{constructor(t,e,i,o,n,a,c){this.snackBar=t,this.pdfServicio=e,this.sedeSrvc=i,this.bodegaSrvc=o,this.articuloSrvc=n,this.fisicoSrvc=a,this.ls=c,this.bodegas=[],this.sedes=[],this.params={},this.categorias=[],this.categoriasGruposPadre=[],this.categoriasGrupos=[],this.titulo="Fisico",this.cargando=!1,this.showReporte=!0,this.getSede=(t={})=>{this.sedeSrvc.get(t).subscribe(t=>{this.sedes=t})},this.getBodega=(t={})=>{this.bodegaSrvc.get(t).subscribe(t=>{this.bodegas=t})},this.loadCategorias=()=>{this.articuloSrvc.getCategorias({sede:+this.ls.get(A.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.categorias=t)})},this.onCategoriaSelected=t=>this.loadSubCategorias(+t.value.categoria),this.loadSubCategorias=t=>{this.articuloSrvc.getCategoriasGrupos({categoria:+t}).subscribe(t=>{t&&(this.categoriasGruposPadre=this.articuloSrvc.adaptCategoriaGrupoResponse(t),this.categoriasGrupos=this.categoriasGruposPadre)})},this.onSubCategoriaPadreSelected=t=>this.loadSubCategoriasSubcategorias(+t.value),this.loadSubCategoriasSubcategorias=t=>{this.articuloSrvc.getCategoriasGrupos({categoria_grupo_grupo:t}).subscribe(t=>{t&&(this.categoriasGrupos=this.articuloSrvc.adaptCategoriaGrupoResponse(t))})}}ngOnInit(){this.getSede(),this.getBodega(),this.loadCategorias(),this.params.fecha=B().format(A.a.dbDateFormat)}onSubmit(){this.cargando=!0,this.fisicoSrvc.generarInventarioFisico(this.params).subscribe(t=>{this.cargando=!1,console.log(t),t.exito?this.pdfServicio.imprimirInventarioFisico(t.inventario,this.params).subscribe(t=>{if(this.params._excel){const e=new Blob([t],{type:"application/vnd.ms-excel"});Object(oo.saveAs)(e,`${this.titulo}.xls`)}else{const e=new Blob([t],{type:"application/pdf"});Object(oo.saveAs)(e,`${this.titulo}.pdf`)}}):this.snackBar.open("No se pudo generar el reporte... "+t.mensaje,this.titulo,{duration:3e3})})}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(v.b),R.Nb(go.a),R.Nb(no.a),R.Nb(Q.a),R.Nb(X.a),R.Nb($n),R.Nb($.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-reporte"]],decls:13,vars:3,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],[1,"col"],[1,"col",2,"float","right"],["mat-button","","type","button","color","accent",3,"click"],["class","iconFontSize",4,"ngIf"],[4,"ngIf"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmFisicoReporte","ngForm"],[1,"fullWidth"],["name","bodega","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","sede","required","",3,"ngModel","ngModelChange"],["name","categoria",3,"selectionChange"],["name","categoriaGrupoPadre",3,"ngModel","ngModelChange"],["matInput","","type","date","placeholder","Fecha","readonly","","required","",3,"ngModel","ngModelOptions","ngModelChange"],["name","excel",1,"fullWidth",3,"ngModel","ngModelChange"],["align","end"],["mat-button","","color","accent","type","submit",3,"disabled"],[3,"value"]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"mat-card",2),R.Tb(3,"mat-card-title"),R.Tb(4,"div",0),R.Tb(5,"div",3),R.Tb(6,"h4"),R.Fc(7,"Inventario F\xedsico"),R.Sb(),R.Sb(),R.Tb(8,"div",4),R.Tb(9,"button",5),R.bc("click",function(){return e.showReporte=!e.showReporte}),R.Dc(10,Hn,2,0,"mat-icon",6),R.Dc(11,Pn,2,0,"mat-icon",6),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Dc(12,Ln,31,13,"mat-card-content",7),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.Cb(10),R.lc("ngIf",e.showReporte),R.Cb(1),R.lc("ngIf",!e.showReporte),R.Cb(1),R.lc("ngIf",e.showReporte))},directives:[b.a,b.h,S.a,o.m,l.a,b.c,a.r,a.l,a.m,d.b,d.f,m.a,a.p,a.k,a.n,o.l,u.b,a.c,f.a,G.m,ao.a],styles:[""]}),t})();function Vn(t,e){1&t&&(R.Tb(0,"mat-icon",9),R.Fc(1,"expand_more"),R.Sb())}function Kn(t,e){1&t&&(R.Tb(0,"mat-icon",9),R.Fc(1,"expand_less"),R.Sb())}function Qn(t,e){1&t&&R.Ob(0,"app-cargando")}function Xn(t,e){if(1&t){const t=R.Ub();R.Tb(0,"mat-card-content"),R.Tb(1,"form",10),R.bc("ngSubmit",function(){return R.xc(t),R.fc().buscar()}),R.Tb(2,"mat-form-field",11),R.Tb(3,"input",12),R.bc("ngModelChange",function(e){return R.xc(t),R.fc().params.numero=e}),R.Sb(),R.Tb(4,"button",13),R.Fc(5,"Buscar"),R.Sb(),R.Sb(),R.Sb(),R.Dc(6,Qn,1,0,"app-cargando",7),R.Sb()}if(2&t){const t=R.fc();R.Cb(3),R.lc("ngModel",t.params.numero),R.Cb(3),R.lc("ngIf",t.cargando)}}const Jn=function(){return{standalone:!0}};function Zn(t,e){if(1&t&&(R.Tb(0,"tr"),R.Tb(1,"td",24),R.Fc(2),R.Sb(),R.Tb(3,"td",24),R.Tb(4,"mat-form-field"),R.Tb(5,"input",25),R.bc("ngModelChange",function(t){return e.$implicit.existencia_sistema=t}),R.Sb(),R.Sb(),R.Sb(),R.Tb(6,"td",24),R.Tb(7,"mat-form-field",11),R.Tb(8,"input",26),R.bc("ngModelChange",function(t){return e.$implicit.existencia_fisica=t}),R.Sb(),R.Sb(),R.Sb(),R.Sb()),2&t){const t=e.$implicit;R.Cb(2),R.Hc(" ",t.narticulo," "),R.Cb(3),R.lc("ngModel",t.existencia_sistema)("ngModelOptions",R.nc(5,Jn)),R.Cb(3),R.lc("ngModel",t.existencia_fisica)("ngModelOptions",R.nc(6,Jn))}}function Yn(t,e){if(1&t&&(R.Rb(0),R.Tb(1,"tr"),R.Tb(2,"th",23),R.Fc(3),R.Sb(),R.Sb(),R.Dc(4,Zn,9,7,"tr",17),R.Qb()),2&t){const t=e.$implicit;R.Cb(3),R.Gc(t.descripcion),R.Cb(1),R.lc("ngForOf",t.datos)}}function ta(t,e){if(1&t&&(R.Rb(0),R.Tb(1,"tr"),R.Tb(2,"th",22),R.Tb(3,"mat-label"),R.Fc(4),R.Sb(),R.Sb(),R.Sb(),R.Dc(5,Yn,5,2,"ng-container",17),R.Qb()),2&t){const t=e.$implicit;R.Cb(4),R.Gc(t.descripcion),R.Cb(1),R.lc("ngForOf",t.datos)}}function ea(t,e){1&t&&(R.Tb(0,"button",27),R.Fc(1,"Guardar"),R.Sb())}function ia(t,e){if(1&t){const t=R.Ub();R.Tb(0,"button",20),R.bc("click",function(){return R.xc(t),R.fc(2).confirmar()}),R.Fc(1,"Confirmar"),R.Sb()}}function oa(t,e){1&t&&R.Ob(0,"app-cargando")}function na(t,e){if(1&t){const t=R.Ub();R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"mat-card",2),R.Ob(3,"mat-card-title"),R.Tb(4,"mat-card-content"),R.Tb(5,"form",14,15),R.bc("ngSubmit",function(){R.xc(t);const e=R.tc(6),i=R.fc();return e.form.valid&&i.actualizar()}),R.Tb(7,"table",16),R.Dc(8,ta,6,2,"ng-container",17),R.Sb(),R.Tb(9,"div",18),R.Dc(10,ea,2,0,"button",19),R.Tb(11,"button",20),R.bc("click",function(){return R.xc(t),R.fc().imprimir()}),R.Fc(12,"PDF"),R.Sb(),R.Tb(13,"button",20),R.bc("click",function(){return R.xc(t),R.fc().imprimirXls()}),R.Fc(14,"Excel"),R.Sb(),R.Dc(15,ia,2,0,"button",21),R.Sb(),R.Sb(),R.Dc(16,oa,1,0,"app-cargando",7),R.Sb(),R.Sb(),R.Sb(),R.Sb()}if(2&t){const t=R.fc();R.Cb(8),R.lc("ngForOf",t.articulos),R.Cb(2),R.lc("ngIf",0==t.inventario.confirmado),R.Cb(5),R.lc("ngIf",0==t.inventario.confirmado),R.Cb(1),R.lc("ngIf",t.cargando)}}let aa=(()=>{class t{constructor(t,e,i,o){this.snackBar=t,this.pdfServicio=e,this.fisicoSrvc=i,this.dialog=o,this.showForm=!0,this.params={},this.cargando=!1,this.articulos=[],this.inventario={},this.titulo="Inventario_Fisico",this.resetDatos=()=>{this.articulos=[],this.inventario={inventario_fisico:0,sede:null,usuario:null,categoria_grupo:null,fhcreacion:null,fecha:null,notas:null,confirmado:0}},this.buscar=()=>{(""+this.params.numero).length<19?(this.resetDatos(),this.fisicoSrvc.getDetalle(this.params.numero).subscribe(t=>{t&&t.exito?(this.articulos=t.detalle,this.inventario=t.inventario):this.snackBar.open(`ERROR: ${t.mensaje}`,"Inventario",{duration:3e3})})):this.snackBar.open("ERROR: El texto sobrepasa la longitud permitida","Inventario",{duration:3e3})},this.actualizar=()=>{this.fisicoSrvc.saveDetalle(this.articulos).subscribe(t=>{this.snackBar.open(t.exito?"Datos actualizados exitosamente":`ERROR: ${t.mensaje}`,"Inventario",{duration:3e3})})},this.confirmar=()=>{this.dialog.open(W.a,{maxWidth:"400px",data:new W.b("Confirmar Inventario Fisico","No podr\xe1 modificar los datos ingresados. \xbfDesea continuar?","S\xed","No")}).afterClosed().subscribe(t=>{t&&this.fisicoSrvc.confirmar(this.inventario).subscribe(t=>{t.exito?(this.inventario=t.inventario,this.snackBar.open("Inventario confirmado exitosamente","Inventario",{duration:3e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Inventario",{duration:3e3})})})},this.imprimir=()=>{this.pdfServicio.imprimirInventarioFisico(this.inventario.inventario_fisico,{existencia_fisica:!0}).subscribe(t=>{const e=new Blob([t],{type:"application/pdf"});Object(oo.saveAs)(e,`${this.titulo}.pdf`)})},this.imprimirXls=()=>{this.pdfServicio.imprimirInventarioFisico(this.inventario.inventario_fisico,{existencia_fisica:!0,_excel:!0}).subscribe(t=>{const e=new Blob([t],{type:"application/vnd.ms-excel"});Object(oo.saveAs)(e,`${this.titulo}.xls`)})}}ngOnInit(){this.resetDatos()}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(v.b),R.Nb(go.a),R.Nb($n),R.Nb(M.b))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-form-inventario-fisico"]],decls:14,vars:4,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],[1,"col"],[1,"col",2,"float","right"],["mat-button","","type","button","color","accent",3,"click"],["class","iconFontSize",4,"ngIf"],[4,"ngIf"],["class","row",4,"ngIf"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],[1,"fullWidth"],["matInput","","type","number","maxlength","17","max","17","placeholder","N\xfamero","name","numero","required","",3,"ngModel","ngModelChange"],["mat-raised-button","","matSuffix","","color","accent","type","submit"],["novalidate","","autocomplete","off",3,"ngSubmit"],["frmConteoFisico","ngForm"],[1,"tbl"],[4,"ngFor","ngForOf"],["align","end"],["mat-button","","color","accent","type","submit",4,"ngIf"],["mat-button","","color","accent","type","button",3,"click"],["mat-button","","color","accent","type","button",3,"click",4,"ngIf"],["colspan","2",1,"brdTSingleBSingle"],["colspan","3",1,"brdTSingleBSingle"],[1,"brdTSingleBSingle"],["matInput","","type","number","step","0.01","placeholder","Existencia Sistema","disabled","",2,"color","black","-webkit-text-fill-color","black",3,"ngModel","ngModelOptions","ngModelChange"],["matInput","","type","number","step","0.01","placeholder","Cantidad","required","",3,"ngModel","ngModelOptions","ngModelChange"],["mat-button","","color","accent","type","submit"]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Tb(2,"mat-card",2),R.Tb(3,"mat-card-title"),R.Tb(4,"div",0),R.Tb(5,"div",3),R.Tb(6,"h4"),R.Fc(7,"Ingreso Inventario F\xedsico"),R.Sb(),R.Sb(),R.Tb(8,"div",4),R.Tb(9,"button",5),R.bc("click",function(){return e.showForm=!e.showForm}),R.Dc(10,Vn,2,0,"mat-icon",6),R.Dc(11,Kn,2,0,"mat-icon",6),R.Sb(),R.Sb(),R.Sb(),R.Sb(),R.Dc(12,Xn,7,2,"mat-card-content",7),R.Sb(),R.Sb(),R.Sb(),R.Dc(13,na,17,4,"div",8)),2&t&&(R.Cb(10),R.lc("ngIf",e.showForm),R.Cb(1),R.lc("ngIf",!e.showForm),R.Cb(1),R.lc("ngIf",e.showForm),R.Cb(1),R.lc("ngIf",e.articulos.length>0))},directives:[b.a,b.h,S.a,o.m,l.a,b.c,a.r,a.l,a.m,d.b,u.b,a.o,a.c,a.f,a.p,a.k,a.n,d.g,ao.a,o.l,d.f],styles:[""]}),t})();const ca=["rptInventario"],ra=["frmInventario"];let sa=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=R.Hb({type:t,selectors:[["app-fisico"]],viewQuery:function(t,e){if(1&t&&(R.Kc(ca,1),R.Kc(ra,1)),2&t){let t;R.sc(t=R.cc())&&(e.rptInventarioComponent=t.first),R.sc(t=R.cc())&&(e.frmInventarioComponent=t.first)}},decls:6,vars:0,consts:[[1,"row"],[1,"col","s12","m12"]],template:function(t,e){1&t&&(R.Tb(0,"div",0),R.Tb(1,"div",1),R.Ob(2,"app-reporte"),R.Sb(),R.Sb(),R.Tb(3,"div",0),R.Tb(4,"div",1),R.Ob(5,"app-form-inventario-fisico"),R.Sb(),R.Sb())},directives:[Wn,aa],styles:[""]}),t})();var la=i("quSY");function da(t,e){if(1&t&&(R.Tb(0,"mat-option",14),R.Fc(1),R.Sb()),2&t){const t=e.$implicit;R.lc("value",t.categoria_grupo),R.Cb(1),R.Hc(" ",t.descripcion," ")}}function ua(t,e){if(1&t){const t=R.Ub();R.Tb(0,"tr"),R.Tb(1,"td",3),R.Tb(2,"mat-form-field",1),R.Tb(3,"mat-select",8),R.bc("ngModelChange",function(t){return e.$implicit.categoria_grupo=t}),R.Dc(4,da,2,2,"mat-option",9),R.Sb(),R.Sb(),R.Sb(),R.Tb(5,"td",4),R.Tb(6,"mat-form-field",1),R.Tb(7,"input",10),R.bc("ngModelChange",function(t){return e.$implicit.descripcion=t}),R.Sb(),R.Sb(),R.Sb(),R.Tb(8,"td",5),R.Tb(9,"mat-checkbox",11),R.bc("ngModelChange",function(t){return+(e.$implicit.mostrar_pos=t)}),R.Sb(),R.Sb(),R.Tb(10,"td",12),R.Tb(11,"button",13),R.bc("click",function(){R.xc(t);const i=e.$implicit;return R.fc().updArticulo(i)}),R.Fc(12," Guardar "),R.Sb(),R.Sb(),R.Sb()}if(2&t){const t=e.$implicit,i=R.fc();R.Cb(3),R.lc("ngModel",t.categoria_grupo),R.Cb(1),R.lc("ngForOf",i.categoriasGrupos),R.Cb(3),R.lc("ngModel",t.descripcion),R.Cb(2),R.lc("ngModel",+t.mostrar_pos),R.Cb(2),R.lc("disabled",i.cargando||!t.categoria_grupo||!t.descripcion)}}const ba=function(){return{standalone:!0}},ga=[{path:"ingresos",component:de,canActivate:[E.a]},{path:"egresos",component:Ui,canActivate:[E.a]},{path:"articulos",component:gn,canActivate:[E.a]},{path:"transformaciones",component:mn,canActivate:[E.a]},{path:"rptexistencia",component:_n,canActivate:[E.a]},{path:"rptkardex",component:yn,canActivate:[E.a]},{path:"produccion",component:On,canActivate:[E.a]},{path:"rptvalorizado",component:Rn,canActivate:[E.a]},{path:"fisico",component:sa,canActivate:[E.a]},{path:"replicar_articulos_sedes",component:so,canActivate:[E.a]},{path:"qeprod",component:(()=>{class t{constructor(t,e,i,o){this.dialog=t,this.snackBar=e,this.ls=i,this.articuloSrvc=o,this.categorias=[],this.categoriasGrupos=[],this.lstArticulos=[],this.lstArticulosFull=[],this.txtFiltro="",this.cargando=!1,this.endSubs=new la.a,this.loadCategorias=()=>this.endSubs.add(this.articuloSrvc.getCategorias({sede:+this.ls.get(A.a.usrTokenVar).sede||0}).subscribe(t=>this.categorias=t)),this.loadSubCategorias=(t=null)=>{const e={_sede:+this.ls.get(A.a.usrTokenVar).sede||1,categoria:+t};t||delete e.categoria,this.endSubs.add(this.articuloSrvc.getCategoriasGrupos(e).subscribe(t=>{this.categoriasGrupos=this.articuloSrvc.adaptCategoriaGrupoResponse(t),this.categoriasGrupos.map(t=>{const e=this.categorias.find(e=>+e.categoria==+t.categoria);return e&&(t.descripcion=`${e.descripcion}-${t.descripcion}`),t}),this.categoriasGrupos=Object(A.c)(this.categoriasGrupos,"descripcion")}))},this.loadArticulos=()=>{this.endSubs.add(this.articuloSrvc.getArticulo({_sede:1}).subscribe(t=>{t.forEach(t=>{this.lstArticulosFull.push({articulo:t.articulo,categoria:t.categoria_grupo.categoria,categoria_grupo:+t.categoria_grupo.categoria_grupo,descripcion:t.descripcion,mostrar_pos:t.mostrar_pos})}),this.lstArticulos=JSON.parse(JSON.stringify(this.lstArticulosFull))}))},this.updArticulo=t=>{t.mostrar_pos=t.mostrar_pos?1:0;const e=this.dialog.open(W.a,{maxWidth:"400px",data:new W.b("Actualizar art\xedculo",`Esto guardar\xe1 las modificaciones realizadas en ${t.descripcion}. \xbfDesea continuar?`,"S\xed","No")});this.endSubs.add(e.afterClosed().subscribe(e=>{e&&(this.cargando=!0,this.endSubs.add(this.articuloSrvc.fastEdit(t).subscribe(t=>{t.exito?this.snackBar.open(t.mensaje,"Art\xedculo",{duration:3e3}):this.snackBar.open(`ERROR: ${t.mensaje}`,"Art\xedculo",{duration:7e3}),this.cargando=!1})))}))}}ngOnInit(){this.loadCategorias(),this.loadSubCategorias(),this.loadArticulos()}ngOnDestroy(){this.endSubs.unsubscribe()}applyFilter(){this.lstArticulos=this.txtFiltro.length>0?Object(A.b)(this.lstArticulosFull,this.txtFiltro):JSON.parse(JSON.stringify(this.lstArticulosFull))}}return t.\u0275fac=function(e){return new(e||t)(R.Nb(M.b),R.Nb(v.b),R.Nb($.a),R.Nb(X.a))},t.\u0275cmp=R.Hb({type:t,selectors:[["app-quick-edit-producto"]],decls:17,vars:5,consts:[[3,"itemSize"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[2,"width","36%"],[2,"width","42%"],[2,"width","12%","text-align","center"],[2,"width","10%"],[4,"cdkVirtualFor","cdkVirtualForOf"],["name","categoria_grupo",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"ngModel","ngModelChange"],["name","mostrar_pos",3,"ngModel","ngModelChange"],[2,"width","10%","text-align","center"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[3,"value"]],template:function(t,e){1&t&&(R.Tb(0,"cdk-virtual-scroll-viewport",0),R.Tb(1,"table"),R.Tb(2,"caption"),R.Tb(3,"mat-form-field",1),R.Tb(4,"input",2),R.bc("keyup",function(){return e.applyFilter()})("ngModelChange",function(t){return e.txtFiltro=t}),R.Sb(),R.Sb(),R.Sb(),R.Tb(5,"thead"),R.Tb(6,"tr"),R.Tb(7,"th",3),R.Fc(8,"Subcategor\xeda"),R.Sb(),R.Tb(9,"th",4),R.Fc(10,"Art\xedculo"),R.Sb(),R.Tb(11,"th",5),R.Fc(12,"Mostrar en POS"),R.Sb(),R.Tb(13,"th",6),R.Fc(14,"\xa0"),R.Sb(),R.Sb(),R.Sb(),R.Tb(15,"tbody"),R.Dc(16,ua,13,5,"tr",7),R.Sb(),R.Sb(),R.Sb()),2&t&&(R.lc("itemSize",90),R.Cb(4),R.lc("ngModel",e.txtFiltro)("ngModelOptions",R.nc(4,ba)),R.Cb(12),R.lc("cdkVirtualForOf",e.lstArticulos))},directives:[k.e,k.a,d.b,u.b,a.c,a.k,a.n,k.d,m.a,o.l,a.p,f.a,S.a,G.m],styles:["table[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{height:720px}"]}),t})(),canActivate:[E.a]},{path:"**",redirectTo:"/admin/dashboard",pathMatch:"full"}];let ha=(()=>{class t{}return t.\u0275mod=R.Lb({type:t}),t.\u0275inj=R.Kb({factory:function(e){return new(e||t)},imports:[[w.d.forChild(ga)],w.d]}),t})(),pa=(()=>{class t{}return t.\u0275mod=R.Lb({type:t}),t.\u0275inj=R.Kb({factory:function(e){return new(e||t)},providers:[],imports:[[o.c,ha,c.a,r.a,n.c,a.e,O.b,s.d,l.b,d.d,u.c,b.f,g.b,h.c,p.l,m.b,f.b,S.b,v.c,C.b,T.d,_.b,x.b,M.e,I.d,D.c,F.b,y.c,k.g]]}),t})()}}]);