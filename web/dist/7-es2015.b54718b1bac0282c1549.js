(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"3e6T":function(t,e,o){"use strict";o.d(e,"a",function(){return s});var n=o("sKxO"),r=o("R5jZ"),a=o("un/a"),c=o("JIr8"),i=o("Qyje"),l=o("fXoL"),d=o("tk/3");let s=(()=>{class t{constructor(t){this.http=t,this.srvcErrHndl=new r.a}get(t={}){return this.http.get(`${n.a.urlCatalogos}/get_tipo_movimiento?${i.stringify(t)}`).pipe(Object(a.a)(n.a.reintentos),Object(c.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(l.Xb(d.b))},t.\u0275prov=l.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"Wc/8":function(t,e,o){"use strict";o.r(e),o.d(e,"OrdenCompraModule",function(){return Ht});var n=o("ofXK"),r=o("tk/3"),a=o("3Pt+"),c=o("PCNd"),i=o("MutI"),l=o("NFeN"),d=o("kmnG"),s=o("qFsG"),m=o("Wp6s"),b=o("f0Cb"),p=o("wZkO"),u=o("+0xr"),f=o("d3UM"),h=o("bSwM"),C=o("bTqV"),g=o("dNgK"),v=o("/t3+"),O=o("STbY"),S=o("zkoq"),T=o("M9IT"),M=o("0IaG"),D=o("XhcP"),_=o("8yBR"),F=o("uM5D"),I=o("tyNb"),y=o("0T/Q"),x=o("sKxO"),w=o("fXoL"),k=o("FY0D"),$=o("R5jZ"),H=o("un/a"),N=o("JIr8"),U=o("Qyje");let z=(()=>{class t{constructor(t){this.http=t,this.ordenCompraUrl="compra",this.srvcErrHndl=new $.a}get(t={}){return this.http.get(`${x.a.urlWms}/${this.ordenCompraUrl}/buscar?${U.stringify(t)}`).pipe(Object(H.a)(x.a.reintentos),Object(N.a)(this.srvcErrHndl.errorHandler))}save(t){return this.http.post(`${x.a.urlWms}/${this.ordenCompraUrl}/guardar${+t.orden_compra>0?"/"+t.orden_compra:""}`,t).pipe(Object(H.a)(x.a.reintentos),Object(N.a)(this.srvcErrHndl.errorHandler))}getDetalle(t,e={}){return this.http.get(`${x.a.urlWms}/${this.ordenCompraUrl}/buscar_detalle/${t}?${U.stringify(e)}`).pipe(Object(H.a)(x.a.reintentos),Object(N.a)(this.srvcErrHndl.errorHandler))}saveDetalle(t){return this.http.post(`${x.a.urlWms}/${this.ordenCompraUrl}/guardar_detalle/${t.orden_compra}${+t.orden_compra_detalle>0?"/"+t.orden_compra_detalle:""}`,t).pipe(Object(H.a)(x.a.reintentos),Object(N.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(w.Xb(r.b))},t.\u0275prov=w.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var E=o("FKr1");const j=function(){return{standalone:!0}};function K(t,e){if(1&t){const t=w.Ub();w.Tb(0,"input",6),w.bc("input",function(){return w.xc(t),w.fc().applyFilter()})("ngModelChange",function(e){return w.xc(t),w.fc().txtFiltro=e}),w.Sb()}if(2&t){const t=w.fc();w.lc("matKeyboard",t.keyboardLayout)("ngModel",t.txtFiltro)("ngModelOptions",w.nc(3,j))}}function A(t,e){if(1&t){const t=w.Ub();w.Tb(0,"input",7),w.bc("keyup",function(){return w.xc(t),w.fc().applyFilter()})("ngModelChange",function(e){return w.xc(t),w.fc().txtFiltro=e}),w.Sb()}if(2&t){const t=w.fc();w.lc("ngModel",t.txtFiltro)("ngModelOptions",w.nc(2,j))}}function L(t,e){if(1&t){const t=w.Ub();w.Tb(0,"mat-list-item",8),w.bc("click",function(){w.xc(t);const o=e.$implicit;return w.fc().getOrdenCompra(o)}),w.Tb(1,"mat-icon",9),w.Fc(2,"description"),w.Sb(),w.Tb(3,"h5",10),w.Fc(4),w.Sb(),w.Ob(5,"br"),w.Tb(6,"p",10),w.Fc(7),w.gc(8,"date"),w.Sb(),w.Sb()}if(2&t){const t=e.$implicit;w.Cb(4),w.Hc("No. ",t.orden_compra,""),w.Cb(3),w.Hc(" Fecha: ",w.ic(8,2,t.fecha,"dd/MM/yyyy")," ")}}let P=(()=>{class t{constructor(t,e){this.ordenCompraSrvc=t,this.ls=e,this.getOrdenCompraEv=new w.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.keyboardLayout=x.a.IDIOMA_TECLADO,this.esMovil=!1,this.loadOrdenesCompra=()=>{this.ordenCompraSrvc.get().subscribe(t=>{t&&t.length>0&&(this.lstOrdenesCompra=t,this.applyFilter())})},this.getOrdenCompra=t=>{this.getOrdenCompraEv.emit({orden_compra:t.orden_compra,proveedor:t.proveedor||0,fecha:t.fecha,usuario:t.usuario||0,notas:t.notas,estatus_movimiento:t.estatus_movimiento||1})},this.pageChange=t=>{this.pageSize=t.pageSize,this.pageIndex=t.pageIndex,this.applyFilter()}}ngOnInit(){this.esMovil=this.ls.get(x.a.usrTokenVar).enmovil||!1,this.loadOrdenesCompra()}applyFilter(){if(this.txtFiltro.length>0){const t=Object(x.b)(this.lstOrdenesCompra,this.txtFiltro);this.length=t.length,this.lstOrdenesCompraPaged=Object(x.d)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstOrdenesCompra.length,this.lstOrdenesCompraPaged=Object(x.d)(this.lstOrdenesCompra,this.pageSize,this.pageIndex+1)}}return t.\u0275fac=function(e){return new(e||t)(w.Nb(z),w.Nb(k.a))},t.\u0275cmp=w.Hb({type:t,selectors:[["app-lista-orden-compra"]],outputs:{getOrdenCompraEv:"getOrdenCompraEv"},decls:8,vars:6,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"matKeyboard","ngModel","ngModelOptions","input","ngModelChange",4,"ngIf"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["matInput","","placeholder","Buscar...",3,"matKeyboard","ngModel","ngModelOptions","input","ngModelChange"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,e){1&t&&(w.Tb(0,"mat-card",0),w.Tb(1,"mat-card-content"),w.Tb(2,"mat-form-field",1),w.Dc(3,K,1,4,"input",2),w.Dc(4,A,1,3,"input",3),w.Sb(),w.Tb(5,"mat-nav-list"),w.Dc(6,L,9,5,"mat-list-item",4),w.Sb(),w.Tb(7,"mat-paginator",5),w.bc("page",function(t){return e.pageChange(t)}),w.Sb(),w.Sb(),w.Sb()),2&t&&(w.Cb(3),w.lc("ngIf",!e.esMovil),w.Cb(1),w.lc("ngIf",e.esMovil),w.Cb(2),w.lc("ngForOf",e.lstOrdenesCompraPaged),w.Cb(1),w.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[m.a,m.c,d.b,n.m,i.e,n.l,T.a,s.b,F.a,a.c,a.k,a.n,i.c,l.a,i.b,E.j],pipes:[n.e],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),t})();var R=o("50cD"),W=o("NGYs"),G=o("3e6T"),B=o("u5dX");function Q(t,e){if(1&t){const t=w.Ub();w.Tb(0,"button",5),w.bc("click",function(){return w.xc(t),w.fc().showOrdenCompraForm=!0}),w.Tb(1,"mat-icon",6),w.Fc(2,"expand_more"),w.Sb(),w.Sb()}}function q(t,e){if(1&t){const t=w.Ub();w.Tb(0,"button",5),w.bc("click",function(){return w.xc(t),w.fc().showOrdenCompraForm=!1}),w.Tb(1,"mat-icon",6),w.Fc(2,"expand_less"),w.Sb(),w.Sb()}}function X(t,e){if(1&t&&(w.Tb(0,"mat-option",19),w.Fc(1),w.Sb()),2&t){const t=e.$implicit;w.lc("value",t.proveedor),w.Cb(1),w.Ic(" (",t.nit,") ",t.razon_social," ")}}function J(t,e){if(1&t){const t=w.Ub();w.Tb(0,"input",22),w.bc("ngModelChange",function(e){return w.xc(t),w.fc(3).ordenCompra.notas=e}),w.Sb()}if(2&t){const t=w.fc(3);w.lc("matKeyboard",t.keyboardLayout)("ngModel",t.ordenCompra.notas)}}function V(t,e){if(1&t){const t=w.Ub();w.Tb(0,"input",23),w.bc("ngModelChange",function(e){return w.xc(t),w.fc(3).ordenCompra.notas=e}),w.Sb()}if(2&t){const t=w.fc(3);w.lc("ngModel",t.ordenCompra.notas)}}function Y(t,e){if(1&t&&(w.Tb(0,"mat-form-field",9),w.Dc(1,J,1,2,"input",20),w.Dc(2,V,1,1,"input",21),w.Sb()),2&t){const t=w.fc(2);w.Cb(1),w.lc("ngIf",!t.esMovil),w.Cb(1),w.lc("ngIf",t.esMovil)}}function Z(t,e){if(1&t&&(w.Tb(0,"mat-option",19),w.Fc(1),w.Sb()),2&t){const t=e.$implicit;w.lc("value",t.tipo_movimiento),w.Cb(1),w.Hc(" ",t.descripcion," ")}}function tt(t,e){if(1&t&&(w.Tb(0,"mat-option",19),w.Fc(1),w.Sb()),2&t){const t=e.$implicit;w.lc("value",t.bodega),w.Cb(1),w.Hc(" ",t.descripcion," ")}}const et=function(){return[2,3]};function ot(t,e){if(1&t){const t=w.Ub();w.Tb(0,"button",24),w.bc("click",function(){return w.xc(t),w.fc(2).generarIngreso()}),w.Fc(1," Generar ingreso "),w.Sb()}if(2&t){w.fc();const t=w.tc(1),e=w.fc();w.lc("disabled",!t.form.valid||w.nc(1,et).indexOf(+e.ordenCompra.estatus_movimiento)>=0||!e.ordenCompra.bodega||!e.ordenCompra.tipo_movimiento)}}function nt(t,e){if(1&t){const t=w.Ub();w.Tb(0,"button",25),w.bc("click",function(){return w.xc(t),w.fc(2).resetOrdenCompra()}),w.Fc(1," Nueva "),w.Sb()}}function rt(t,e){if(1&t){const t=w.Ub();w.Tb(0,"form",7,8),w.bc("ngSubmit",function(){w.xc(t);const e=w.tc(1),o=w.fc();return e.form.valid&&o.onSubmit()}),w.Tb(2,"mat-form-field",9),w.Tb(3,"mat-label"),w.Fc(4,"Proveedor"),w.Sb(),w.Tb(5,"mat-select",10),w.bc("ngModelChange",function(e){return w.xc(t),w.fc().ordenCompra.proveedor=e}),w.Dc(6,X,2,3,"mat-option",11),w.Sb(),w.Sb(),w.Dc(7,Y,3,2,"mat-form-field",12),w.Tb(8,"mat-form-field",9),w.Tb(9,"mat-label"),w.Fc(10,"Tipo de movimiento"),w.Sb(),w.Tb(11,"mat-select",13),w.bc("ngModelChange",function(e){return w.xc(t),w.fc().ordenCompra.tipo_movimiento=e}),w.Dc(12,Z,2,2,"mat-option",11),w.Sb(),w.Sb(),w.Tb(13,"mat-form-field",9),w.Tb(14,"mat-label"),w.Fc(15,"Bodega"),w.Sb(),w.Tb(16,"mat-select",14),w.bc("ngModelChange",function(e){return w.xc(t),w.fc().ordenCompra.bodega=e}),w.Dc(17,tt,2,2,"mat-option",11),w.Sb(),w.Sb(),w.Tb(18,"div",15),w.Tb(19,"button",16),w.Fc(20," Guardar "),w.Sb(),w.Dc(21,ot,2,2,"button",17),w.Dc(22,nt,2,0,"button",18),w.Sb(),w.Sb()}if(2&t){const t=w.tc(1),e=w.fc();w.Cb(5),w.lc("ngModel",e.ordenCompra.proveedor),w.Cb(1),w.lc("ngForOf",e.proveedores),w.Cb(1),w.lc("ngIf",e.esMovil),w.Cb(4),w.lc("ngModel",e.ordenCompra.tipo_movimiento),w.Cb(1),w.lc("ngForOf",e.tiposMovimiento),w.Cb(4),w.lc("ngModel",e.ordenCompra.bodega),w.Cb(1),w.lc("ngForOf",e.bodegas),w.Cb(2),w.lc("disabled",!t.form.valid||w.nc(10,et).indexOf(+e.ordenCompra.estatus_movimiento)>=0),w.Cb(2),w.lc("ngIf",e.ordenCompra.orden_compra&&e.detallesOrdenCompra.length>0),w.Cb(1),w.lc("ngIf",e.ordenCompra.orden_compra)}}function at(t,e){1&t&&w.Ob(0,"hr")}function ct(t,e){if(1&t){const t=w.Ub();w.Tb(0,"button",5),w.bc("click",function(){return w.xc(t),w.fc(2).showDetalleOrdenCompraForm=!0}),w.Tb(1,"mat-icon",6),w.Fc(2,"expand_more"),w.Sb(),w.Sb()}}function it(t,e){if(1&t){const t=w.Ub();w.Tb(0,"button",5),w.bc("click",function(){return w.xc(t),w.fc(2).showDetalleOrdenCompraForm=!1}),w.Tb(1,"mat-icon",6),w.Fc(2,"expand_less"),w.Sb(),w.Sb()}}function lt(t,e){if(1&t&&(w.Tb(0,"mat-option",19),w.Fc(1),w.Sb()),2&t){const t=e.$implicit;w.lc("value",t.articulo),w.Cb(1),w.Hc(" ",t.descripcion," ")}}function dt(t,e){if(1&t){const t=w.Ub();w.Tb(0,"mat-form-field",9),w.Tb(1,"input",29),w.bc("ngModelChange",function(e){return w.xc(t),w.fc(3).detalleOrdenCompra.cantidad=e})("change",function(){w.xc(t);const e=w.fc(3);return e.detalleOrdenCompra.total=+e.detalleOrdenCompra.monto*+e.detalleOrdenCompra.cantidad}),w.Sb(),w.Sb()}if(2&t){const t=w.fc(3);w.Cb(1),w.lc("ngModel",t.detalleOrdenCompra.cantidad)}}function st(t,e){if(1&t){const t=w.Ub();w.Tb(0,"mat-form-field",9),w.Tb(1,"input",30),w.bc("ngModelChange",function(e){return w.xc(t),w.fc(3).detalleOrdenCompra.monto=e})("change",function(){w.xc(t);const e=w.fc(3);return e.detalleOrdenCompra.total=+e.detalleOrdenCompra.monto*+e.detalleOrdenCompra.cantidad}),w.Sb(),w.Sb()}if(2&t){const t=w.fc(3);w.Cb(1),w.lc("ngModel",t.detalleOrdenCompra.monto)}}function mt(t,e){if(1&t){const t=w.Ub();w.Tb(0,"button",25),w.bc("click",function(){return w.xc(t),w.fc(3).resetDetalleOrdenCompra()}),w.Fc(1," Nuevo "),w.Sb()}}function bt(t,e){if(1&t){const t=w.Ub();w.Tb(0,"form",7,27),w.bc("ngSubmit",function(){w.xc(t);const e=w.tc(1),o=w.fc(2);return e.form.valid&&o.onSubmitDetail()}),w.Tb(2,"mat-form-field",9),w.Tb(3,"mat-label"),w.Fc(4,"Art\xedculo"),w.Sb(),w.Tb(5,"mat-select",28),w.bc("ngModelChange",function(e){return w.xc(t),w.fc(2).detalleOrdenCompra.articulo=e}),w.Dc(6,lt,2,2,"mat-option",11),w.Sb(),w.Sb(),w.Dc(7,dt,2,1,"mat-form-field",12),w.Dc(8,st,2,1,"mat-form-field",12),w.Tb(9,"div",15),w.Tb(10,"button",16),w.Fc(11," Guardar "),w.Sb(),w.Dc(12,mt,2,0,"button",18),w.Sb(),w.Sb()}if(2&t){const t=w.tc(1),e=w.fc(2);w.Cb(5),w.lc("ngModel",e.detalleOrdenCompra.articulo),w.Cb(1),w.lc("ngForOf",e.articulos),w.Cb(1),w.lc("ngIf",e.esMovil),w.Cb(1),w.lc("ngIf",e.esMovil),w.Cb(2),w.lc("disabled",!t.form.valid||w.nc(6,et).indexOf(+e.ordenCompra.estatus_movimiento)>=0),w.Cb(2),w.lc("ngIf",e.detalleOrdenCompra.orden_compra_detalle)}}function pt(t,e){1&t&&w.Ob(0,"hr")}function ut(t,e){1&t&&(w.Tb(0,"th",43),w.Fc(1,"Art\xedculo"),w.Sb())}function ft(t,e){if(1&t&&(w.Tb(0,"td",44),w.Fc(1),w.Sb()),2&t){const t=e.$implicit;w.Cb(1),w.Gc(t.articulo.descripcion)}}function ht(t,e){1&t&&(w.Tb(0,"th",45),w.Fc(1,"Cantidad"),w.Sb())}function Ct(t,e){if(1&t&&(w.Tb(0,"td",46),w.Fc(1),w.gc(2,"number"),w.Sb()),2&t){const t=e.$implicit;w.Cb(1),w.Gc(w.ic(2,1,t.cantidad,"1.2-2"))}}function gt(t,e){1&t&&(w.Tb(0,"th",45),w.Fc(1,"Monto"),w.Sb())}function vt(t,e){if(1&t&&(w.Tb(0,"td",46),w.Fc(1),w.gc(2,"number"),w.Sb()),2&t){const t=e.$implicit;w.Cb(1),w.Gc(w.ic(2,1,t.monto,"1.2-2"))}}function Ot(t,e){1&t&&(w.Tb(0,"th",45),w.Fc(1,"Total"),w.Sb())}function St(t,e){if(1&t&&(w.Tb(0,"td",46),w.Fc(1),w.gc(2,"number"),w.Sb()),2&t){const t=e.$implicit;w.Cb(1),w.Gc(w.ic(2,1,t.total,"1.2-2"))}}function Tt(t,e){1&t&&(w.Tb(0,"th",43),w.Fc(1,"\xa0"),w.Sb())}function Mt(t,e){if(1&t){const t=w.Ub();w.Tb(0,"td",44),w.Tb(1,"button",47),w.bc("click",function(){w.xc(t);const o=e.$implicit;return w.fc(3).getDetalleOrdenCompra(o.orden_compra,o.orden_compra_detalle)}),w.Fc(2," Editar "),w.Sb(),w.Sb()}if(2&t){const t=w.fc(3);w.Cb(1),w.lc("disabled",w.nc(1,et).indexOf(+t.ordenCompra.estatus_movimiento)>=0)}}function Dt(t,e){1&t&&w.Ob(0,"tr",48)}function _t(t,e){1&t&&w.Ob(0,"tr",49)}function Ft(t,e){if(1&t&&(w.Tb(0,"table",31),w.Rb(1,32),w.Dc(2,ut,2,0,"th",33),w.Dc(3,ft,2,1,"td",34),w.Qb(),w.Rb(4,35),w.Dc(5,ht,2,0,"th",36),w.Dc(6,Ct,3,4,"td",37),w.Qb(),w.Rb(7,38),w.Dc(8,gt,2,0,"th",36),w.Dc(9,vt,3,4,"td",37),w.Qb(),w.Rb(10,39),w.Dc(11,Ot,2,0,"th",36),w.Dc(12,St,3,4,"td",37),w.Qb(),w.Rb(13,40),w.Dc(14,Tt,2,0,"th",33),w.Dc(15,Mt,3,2,"td",34),w.Qb(),w.Dc(16,Dt,1,0,"tr",41),w.Dc(17,_t,1,0,"tr",42),w.Sb()),2&t){const t=w.fc(2);w.lc("dataSource",t.dataSource),w.Cb(16),w.lc("matHeaderRowDef",t.displayedColumns),w.Cb(1),w.lc("matRowDefColumns",t.displayedColumns)}}function It(t,e){if(1&t&&(w.Tb(0,"mat-card",0),w.Tb(1,"mat-card-title"),w.Tb(2,"h4"),w.Fc(3),w.Dc(4,ct,3,0,"button",1),w.Dc(5,it,3,0,"button",1),w.Sb(),w.Sb(),w.Tb(6,"mat-card-content"),w.Dc(7,bt,13,7,"form",2),w.Dc(8,pt,1,0,"hr",3),w.Dc(9,Ft,18,3,"table",26),w.Sb(),w.Sb()),2&t){const t=w.fc();w.Cb(3),w.Hc(" Detalle de orden de compra No. ",t.ordenCompra.orden_compra," "),w.Cb(1),w.lc("ngIf",!t.showDetalleOrdenCompraForm),w.Cb(1),w.lc("ngIf",t.showDetalleOrdenCompraForm),w.Cb(2),w.lc("ngIf",t.showDetalleOrdenCompraForm),w.Cb(1),w.lc("ngIf",t.detallesOrdenCompra.length>0),w.Cb(1),w.lc("ngIf",t.detallesOrdenCompra.length>0)}}let yt=(()=>{class t{constructor(t,e,o,n,r,a,c){this.snackBar=t,this.ls=e,this.ordenCompraSrvc=o,this.proveedorSrvc=n,this.articuloSrvc=r,this.tipoMovimientoSrvc=a,this.bodegaSrvc=c,this.ordenCompraSavedEv=new w.o,this.showOrdenCompraForm=!0,this.showDetalleOrdenCompraForm=!0,this.detallesOrdenCompra=[],this.displayedColumns=["articulo","cantidad","monto","total","editItem"],this.proveedores=[],this.articulos=[],this.tiposMovimiento=[],this.bodegas=[],this.keyboardLayout=x.a.IDIOMA_TECLADO,this.esMovil=!1,this.loadProveedores=()=>{this.proveedorSrvc.get().subscribe(t=>{t&&(this.proveedores=t)})},this.loadTiposMovimiento=()=>{this.tipoMovimientoSrvc.get().subscribe(t=>{t&&(this.tiposMovimiento=t)})},this.loadBodegas=()=>{this.bodegaSrvc.get().subscribe(t=>{t&&(this.bodegas=t)})},this.resetOrdenCompra=()=>{this.ordenCompra={orden_compra:null,proveedor:null,usuario:this.ls.get(x.a.usrTokenVar).idusr||0,notas:null,estatus_movimiento:1,bodega:null,tipo_movimiento:null},this.resetDetalleOrdenCompra()},this.onSubmit=()=>{this.ordenCompraSrvc.save(this.ordenCompra).subscribe(t=>{t.exito&&(this.ordenCompraSavedEv.emit(),this.resetOrdenCompra(),this.ordenCompra={orden_compra:+t.compra.orden_compra,proveedor:t.compra.proveedor,fecha:t.compra.fecha,usuario:t.compra.usuario,notas:t.compra.notas,estatus_movimiento:1},this.loadDetalleOrdenCompra(this.ordenCompra.orden_compra))})},this.loadArticulos=()=>{this.articuloSrvc.getArticulos().subscribe(t=>{t&&(this.articulos=t)})},this.resetDetalleOrdenCompra=()=>this.detalleOrdenCompra={orden_compra_detalle:null,orden_compra:this.ordenCompra.orden_compra?this.ordenCompra.orden_compra:null,articulo:null,cantidad:null,monto:null,total:null},this.loadDetalleOrdenCompra=(t=+this.ordenCompra.orden_compra)=>{this.ordenCompraSrvc.getDetalle(t,{orden_compra:t}).subscribe(t=>{t&&(this.detallesOrdenCompra=t,this.updateTableDataSource())})},this.getDetalleOrdenCompra=(t=+this.ordenCompra.orden_compra,e)=>{this.ordenCompraSrvc.getDetalle(t,{orden_compra_detalle:e}).subscribe(t=>{t&&(this.detalleOrdenCompra={orden_compra_detalle:t[0].orden_compra_detalle,orden_compra:t[0].orden_compra,articulo:t[0].articulo.articulo,cantidad:+t[0].cantidad,monto:+t[0].monto,total:+t[0].total},this.showDetalleOrdenCompraForm=!0)})},this.onSubmitDetail=()=>{this.detalleOrdenCompra.orden_compra=this.ordenCompra.orden_compra,this.ordenCompraSrvc.saveDetalle(this.detalleOrdenCompra).subscribe(t=>{t&&(this.loadDetalleOrdenCompra(),this.resetDetalleOrdenCompra())})},this.updateTableDataSource=()=>this.dataSource=new u.k(this.detallesOrdenCompra),this.generarIngreso=()=>{this.ordenCompra.estatus_movimiento=2,this.onSubmit()}}ngOnInit(){this.esMovil=this.ls.get(x.a.usrTokenVar).enmovil||!1,this.resetOrdenCompra(),this.loadProveedores(),this.loadArticulos(),this.loadBodegas(),this.loadTiposMovimiento()}}return t.\u0275fac=function(e){return new(e||t)(w.Nb(g.b),w.Nb(k.a),w.Nb(z),w.Nb(R.a),w.Nb(W.a),w.Nb(G.a),w.Nb(B.a))},t.\u0275cmp=w.Hb({type:t,selectors:[["app-form-orden-compra"]],inputs:{ordenCompra:"ordenCompra"},outputs:{ordenCompraSavedEv:"ordenCompraSavedEv"},decls:10,vars:6,consts:[[1,"mat-elevation-z4","fullWidth"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmOrdenCompra","ngForm"],[1,"fullWidth"],["name","proveedor","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","fullWidth",4,"ngIf"],["name","tipo_movimiento",3,"ngModel","ngModelChange"],["name","bodega",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"disabled","click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],[3,"value"],["matInput","","placeholder","Notas","name","notas",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["matInput","","placeholder","Notas","name","notas",3,"ngModel","ngModelChange",4,"ngIf"],["matInput","","placeholder","Notas","name","notas",3,"matKeyboard","ngModel","ngModelChange"],["matInput","","placeholder","Notas","name","notas",3,"ngModel","ngModelChange"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button","color","accent",3,"click"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleOrdenCompra","ngForm"],["name","articulo","required","",3,"ngModel","ngModelChange"],["matInput","","type","number","placeholder","Cantidad","name","cantidad","required","",3,"ngModel","ngModelChange","change"],["matInput","","type","number","placeholder","Monto","name","monto","required","",3,"ngModel","ngModelChange","change"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","articulo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","cantidad"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","monto"],["matColumnDef","total"],["matColumnDef","editItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(w.Tb(0,"mat-card",0),w.Tb(1,"mat-card-title"),w.Tb(2,"h4"),w.Fc(3),w.Dc(4,Q,3,0,"button",1),w.Dc(5,q,3,0,"button",1),w.Sb(),w.Sb(),w.Tb(6,"mat-card-content"),w.Dc(7,rt,23,11,"form",2),w.Sb(),w.Sb(),w.Dc(8,at,1,0,"hr",3),w.Dc(9,It,10,6,"mat-card",4)),2&t&&(w.Cb(3),w.Hc(" Orden de compra",e.ordenCompra.orden_compra?" No. "+e.ordenCompra.orden_compra:""," "),w.Cb(1),w.lc("ngIf",!e.showOrdenCompraForm),w.Cb(1),w.lc("ngIf",e.showOrdenCompraForm),w.Cb(2),w.lc("ngIf",e.showOrdenCompraForm),w.Cb(1),w.lc("ngIf",e.ordenCompra.orden_compra),w.Cb(1),w.lc("ngIf",e.ordenCompra.orden_compra))},directives:[m.a,m.h,n.m,m.c,C.a,l.a,a.r,a.l,a.m,d.b,d.f,f.a,a.p,a.k,a.n,n.l,E.m,s.b,F.a,a.c,a.o,u.j,u.c,u.e,u.b,u.g,u.i,u.d,u.a,u.f,u.h],pipes:[n.f],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}"]}),t})();const xt=["lstOrdenCompra"],wt=["frmOrdenCompra"],kt=[{path:"ordcomp",component:(()=>{class t{constructor(t){this.ls=t,this.setOrdenCompra=t=>{this.ordenCompra=t,this.frmOrdenCompra.loadDetalleOrdenCompra(+this.ordenCompra.orden_compra)},this.refreshOrdenCompraList=()=>{this.lstOrdenCompraComponent.loadOrdenesCompra()},this.ordenCompra={orden_compra:null,proveedor:null,usuario:this.ls.get(x.a.usrTokenVar).idusr||0,notas:null,estatus_movimiento:1,bodega:null,tipo_movimiento:null}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(w.Nb(k.a))},t.\u0275cmp=w.Hb({type:t,selectors:[["app-orden-compra"]],viewQuery:function(t,e){if(1&t&&(w.Kc(xt,1),w.Kc(wt,1)),2&t){let t;w.sc(t=w.cc())&&(e.lstOrdenCompraComponent=t.first),w.sc(t=w.cc())&&(e.frmOrdenCompra=t.first)}},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getOrdenCompraEv"],["lstOrdenCompra",""],[1,"col","m7","s12"],[3,"ordenCompra","ordenCompraSavedEv"],["frmOrdenCompra",""]],template:function(t,e){1&t&&(w.Tb(0,"div",0),w.Tb(1,"div",1),w.Tb(2,"app-lista-orden-compra",2,3),w.bc("getOrdenCompraEv",function(t){return e.setOrdenCompra(t)}),w.Sb(),w.Sb(),w.Tb(4,"div",4),w.Tb(5,"app-form-orden-compra",5,6),w.bc("ordenCompraSavedEv",function(){return e.refreshOrdenCompraList()}),w.Sb(),w.Sb(),w.Sb()),2&t&&(w.Cb(5),w.lc("ordenCompra",e.ordenCompra))},directives:[P,yt],styles:[""]}),t})(),canActivate:[y.a]},{path:"**",redirectTo:"/admin/dashboard",pathMatch:"full"}];let $t=(()=>{class t{}return t.\u0275mod=w.Lb({type:t}),t.\u0275inj=w.Kb({factory:function(e){return new(e||t)},imports:[[I.d.forChild(kt)],I.d]}),t})(),Ht=(()=>{class t{}return t.\u0275mod=w.Lb({type:t}),t.\u0275inj=w.Kb({factory:function(e){return new(e||t)},imports:[[n.c,$t,c.a,r.c,a.e,F.b,i.d,l.b,d.d,s.c,m.f,b.b,p.c,u.l,f.b,h.b,C.b,g.c,v.b,O.d,S.b,T.b,M.e,D.d,_.c]]}),t})()}}]);