!function(){function t(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=l(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){c=!0,i=t},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw i}}}}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,a=r(t);if(e){var i=r(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return o(this,n)}}function o(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?i(t):e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,o=!1,i=void 0;try{for(var r,c=t[Symbol.iterator]();!(a=(r=c.next()).done)&&(n.push(r.value),!e||n.length!==e);a=!0);}catch(s){o=!0,i=s}finally{try{a||null==c.return||c.return()}finally{if(o)throw i}}return n}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function m(t,e,n){return e&&b(t.prototype,e),n&&b(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{k2MF:function(n,o,r){"use strict";r.r(o),r.d(o,"RestauranteModule",function(){return Zs});var l,u,b=r("ofXK"),f=r("tk/3"),p=r("3Pt+"),h=r("PCNd"),g=r("vtFA"),v=r("qodq"),C=r("jkDv"),S=r("YUcS"),_=r("MutI"),T=r("NFeN"),y=r("kmnG"),k=r("qFsG"),D=r("Wp6s"),w=r("f0Cb"),E=r("wZkO"),x=r("+0xr"),P=r("d3UM"),O=r("bSwM"),M=r("bTqV"),R=r("dNgK"),I=r("/t3+"),F=r("STbY"),A=r("zkoq"),N=r("M9IT"),U=r("0IaG"),j=r("XhcP"),B=r("u47x"),L=r("rDax"),H=r("+rOU"),z=r("fXoL"),q=r("vxfF"),$=r("FKr1"),V=r("XNiG"),W=r("quSY"),G=r("VRyK"),Q=(r("LRne"),r("FtGj")),J=r("IzEk"),X=r("JX91"),Z=(r("pLZG"),r("8LU1")),K=r("R0Ic"),Y=r("cH1L"),tt=((l=function(){function t(){d(this,t),this.changes=new V.a,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 20 years",this.nextMultiYearLabel="Next 20 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}return m(t,[{key:"formatYearRange",value:function(t,e){return"".concat(t," \u2013 ").concat(e)}}]),t}()).\u0275fac=function(t){return new(t||l)},l.\u0275prov=Object(z.Jb)({factory:function(){return new l},token:l,providedIn:"root"}),l),et={provide:new z.s("mat-datepicker-scroll-strategy"),deps:[L.c],useFactory:function(t){return function(){return t.scrollStrategies.reposition()}}},nt=((u=function t(){d(this,t)}).\u0275mod=z.Lb({type:u}),u.\u0275inj=z.Kb({factory:function(t){return new(t||u)},providers:[tt,et],imports:[[b.c,M.b,U.e,L.f,B.a,H.f,$.g],q.b]}),u),at=r("nLfN"),ot=r("HDdC"),it=r("D0XW"),rt=r("Y7HM");function ct(t){var e=t.subscriber,n=t.counter,a=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:a},a)}var st=r("eNwd"),lt=r("1G5W"),ut=r("lJxs"),dt=r("vkgz"),bt=r("eIep");function mt(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function ft(t,e){var n=e?"":"none";mt(t.style,{touchAction:e?"":"none",webkitUserDrag:e?"":"none",webkitTapHighlightColor:e?"":"transparent",userSelect:n,msUserSelect:n,webkitUserSelect:n,MozUserSelect:n})}function pt(t,e){var n=t.style;n.position=e?"":"fixed",n.top=n.opacity=e?"":"0",n.left=e?"":"-999em"}function ht(t){var e=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*e}function gt(t,e){return t.getPropertyValue(e).split(",").map(function(t){return t.trim()})}function vt(t){var e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}function Ct(t,e,n){var a=t.top,o=t.bottom,i=t.left,r=t.right;return n>=a&&n<=o&&e>=i&&e<=r}function St(t,e,n){t.top+=e,t.bottom=t.top+t.height,t.left+=n,t.right=t.left+t.width}function _t(t,e,n,a){var o=t.top,i=t.right,r=t.bottom,c=t.left,s=t.width*e,l=t.height*e;return a>o-l&&a<r+l&&n>c-s&&n<i+s}var Tt=function(){function t(e,n){d(this,t),this._document=e,this._viewportRuler=n,this.positions=new Map}return m(t,[{key:"clear",value:function(){this.positions.clear()}},{key:"cache",value:function(t){var e=this;this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),t.forEach(function(t){e.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:vt(t)})})}},{key:"handleScroll",value:function(t){var e=t.target,n=this.positions.get(e);if(!n)return null;var a,o,i=e===this._document?e.documentElement:e,r=n.scrollPosition;if(e===this._document){var c=this._viewportRuler.getViewportScrollPosition();a=c.top,o=c.left}else a=e.scrollTop,o=e.scrollLeft;var s=r.top-a,l=r.left-o;return this.positions.forEach(function(t,n){t.clientRect&&e!==n&&i.contains(n)&&St(t.clientRect,s,l)}),r.top=a,r.left=o,{top:s,left:l}}}]),t}();function yt(t){var e=t.cloneNode(!0),n=e.querySelectorAll("[id]"),a=t.nodeName.toLowerCase();e.removeAttribute("id");for(var o=0;o<n.length;o++)n[o].removeAttribute("id");return"canvas"===a?Et(t,e):"input"!==a&&"select"!==a&&"textarea"!==a||wt(t,e),kt("canvas",t,e,Et),kt("input, textarea, select",t,e,wt),e}function kt(t,e,n,a){var o=e.querySelectorAll(t);if(o.length)for(var i=n.querySelectorAll(t),r=0;r<o.length;r++)a(o[r],i[r])}var Dt=0;function wt(t,e){"file"!==e.type&&(e.value=t.value),"radio"===e.type&&e.name&&(e.name="mat-clone-".concat(e.name,"-").concat(Dt++))}function Et(t,e){var n=e.getContext("2d");if(n)try{n.drawImage(t,0,0)}catch(a){}}var xt=Object(at.f)({passive:!0}),Pt=Object(at.f)({passive:!1}),Ot=function(){function t(e,n,a,o,i,r){var c=this;d(this,t),this._config=n,this._document=a,this._ngZone=o,this._viewportRuler=i,this._dragDropRegistry=r,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new V.a,this._pointerMoveSubscription=W.a.EMPTY,this._pointerUpSubscription=W.a.EMPTY,this._scrollSubscription=W.a.EMPTY,this._resizeSubscription=W.a.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new V.a,this.started=new V.a,this.released=new V.a,this.ended=new V.a,this.entered=new V.a,this.exited=new V.a,this.dropped=new V.a,this.moved=this._moveEvents,this._pointerDown=function(t){if(c.beforeStarted.next(),c._handles.length){var e=c._handles.find(function(e){var n=t.target;return!!n&&(n===e||e.contains(n))});!e||c._disabledHandles.has(e)||c.disabled||c._initializeDragSequence(e,t)}else c.disabled||c._initializeDragSequence(c._rootElement,t)},this._pointerMove=function(t){var e=c._getPointerPositionOnPage(t);if(c._hasStartedDragging){c._boundaryElement&&(c._previewRect&&(c._previewRect.width||c._previewRect.height)||(c._previewRect=(c._preview||c._rootElement).getBoundingClientRect())),t.preventDefault();var n=c._getConstrainedPointerPosition(e);if(c._hasMoved=!0,c._lastKnownPointerPosition=e,c._updatePointerDirectionDelta(n),c._dropContainer)c._updateActiveDropContainer(n,e);else{var a=c._activeTransform;a.x=n.x-c._pickupPositionOnPage.x+c._passiveTransform.x,a.y=n.y-c._pickupPositionOnPage.y+c._passiveTransform.y,c._applyRootElementTransform(a.x,a.y),"undefined"!=typeof SVGElement&&c._rootElement instanceof SVGElement&&c._rootElement.setAttribute("transform","translate(".concat(a.x," ").concat(a.y,")"))}c._moveEvents.observers.length&&c._ngZone.run(function(){c._moveEvents.next({source:c,pointerPosition:n,event:t,distance:c._getDragDistance(n),delta:c._pointerDirectionDelta})})}else if(Math.abs(e.x-c._pickupPositionOnPage.x)+Math.abs(e.y-c._pickupPositionOnPage.y)>=c._config.dragStartThreshold){var o=Date.now()>=c._dragStartTime+c._getDragStartDelay(t),i=c._dropContainer;if(!o)return void c._endDragSequence(t);i&&(i.isDragging()||i.isReceiving())||(c._hasStartedDragging=!0,c._ngZone.run(function(){return c._startDragSequence(t)}))}},this._pointerUp=function(t){c._endDragSequence(t)},this.withRootElement(e).withParent(n.parentDragRef||null),this._parentPositions=new Tt(a,i),r.registerDragItem(this)}return m(t,[{key:"getPlaceholderElement",value:function(){return this._placeholder}},{key:"getRootElement",value:function(){return this._rootElement}},{key:"getVisibleElement",value:function(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}},{key:"withHandles",value:function(t){var e=this;this._handles=t.map(function(t){return Object(Z.e)(t)}),this._handles.forEach(function(t){return ft(t,e.disabled)}),this._toggleNativeDragInteractions();var n=new Set;return this._disabledHandles.forEach(function(t){e._handles.indexOf(t)>-1&&n.add(t)}),this._disabledHandles=n,this}},{key:"withPreviewTemplate",value:function(t){return this._previewTemplate=t,this}},{key:"withPlaceholderTemplate",value:function(t){return this._placeholderTemplate=t,this}},{key:"withRootElement",value:function(t){var e=this,n=Object(Z.e)(t);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(function(){n.addEventListener("mousedown",e._pointerDown,Pt),n.addEventListener("touchstart",e._pointerDown,xt)}),this._initialTransform=void 0,this._rootElement=n),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}},{key:"withBoundaryElement",value:function(t){var e=this;return this._boundaryElement=t?Object(Z.e)(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(function(){return e._containInsideBoundaryOnResize()})),this}},{key:"withParent",value:function(t){return this._parentDragRef=t,this}},{key:"dispose",value:function(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&It(this._rootElement),It(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}},{key:"isDragging",value:function(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}},{key:"reset",value:function(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}},{key:"disableHandle",value:function(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),ft(t,!0))}},{key:"enableHandle",value:function(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),ft(t,this.disabled))}},{key:"withDirection",value:function(t){return this._direction=t,this}},{key:"_withDropContainer",value:function(t){this._dropContainer=t}},{key:"getFreeDragPosition",value:function(){var t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}},{key:"setFreeDragPosition",value:function(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}},{key:"_sortFromLastPointerPosition",value:function(){var t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}},{key:"_removeSubscriptions",value:function(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}},{key:"_destroyPreview",value:function(){this._preview&&It(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}},{key:"_destroyPlaceholder",value:function(){this._placeholder&&It(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}},{key:"_endDragSequence",value:function(t){var e=this;this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging&&(this.released.next({source:this}),this._dropContainer?(this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(function(){e._cleanupDragArtifacts(t),e._cleanupCachedDimensions(),e._dragDropRegistry.stopDragging(e)})):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(function(){e.ended.next({source:e,distance:e._getDragDistance(e._getPointerPositionOnPage(t))})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this))))}},{key:"_startDragSequence",value:function(t){Ft(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();var e=this._dropContainer;if(e){var n=this._rootElement,a=n.parentNode,o=this._preview=this._createPreviewElement(),i=this._placeholder=this._createPlaceholderElement(),r=this._anchor=this._anchor||this._document.createComment(""),c=this._getShadowRoot();a.insertBefore(r,n),pt(n,!1),this._document.body.appendChild(a.replaceChild(i,n)),function(t,e){return e||t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement||t.body}(this._document,c).appendChild(o),this.started.next({source:this}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}},{key:"_initializeDragSequence",value:function(t,e){var n=this;this._parentDragRef&&e.stopPropagation();var a=this.isDragging(),o=Ft(e),i=!o&&0!==e.button,r=this._rootElement,c=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(e.target&&e.target.draggable&&"mousedown"===e.type&&e.preventDefault(),!(a||i||c)){this._handles.length&&(this._rootElementTapHighlight=r.style.webkitTapHighlightColor||"",r.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scroll.subscribe(function(t){n._updateOnScroll(t)}),this._boundaryElement&&(this._boundaryRect=vt(this._boundaryElement));var s=this._previewTemplate;this._pickupPositionInElement=s&&s.template&&!s.matchSize?{x:0,y:0}:this._getPointerPositionInElement(t,e);var l=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:l.x,y:l.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}}},{key:"_cleanupDragArtifacts",value:function(t){var e=this;pt(this._rootElement,!0),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(function(){var n=e._dropContainer,a=n.getItemIndex(e),o=e._getPointerPositionOnPage(t),i=e._getDragDistance(e._getPointerPositionOnPage(t)),r=n._isOverContainer(o.x,o.y);e.ended.next({source:e,distance:i}),e.dropped.next({item:e,currentIndex:a,previousIndex:e._initialIndex,container:n,previousContainer:e._initialContainer,isPointerOverContainer:r,distance:i}),n.drop(e,a,e._initialIndex,e._initialContainer,r,i),e._dropContainer=e._initialContainer})}},{key:"_updateActiveDropContainer",value:function(t,e){var n=this,a=t.x,o=t.y,i=e.x,r=e.y,c=this._initialContainer._getSiblingContainerFromPosition(this,a,o);!c&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(a,o)&&(c=this._initialContainer),c&&c!==this._dropContainer&&this._ngZone.run(function(){n.exited.next({item:n,container:n._dropContainer}),n._dropContainer.exit(n),n._dropContainer=c,n._dropContainer.enter(n,a,o,c===n._initialContainer&&c.sortingDisabled?n._initialIndex:void 0),n.entered.next({item:n,container:c,currentIndex:c.getItemIndex(n)})}),this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,a,o,this._pointerDirectionDelta),this._preview.style.transform=Mt(a-this._pickupPositionInElement.x,o-this._pickupPositionInElement.y)}},{key:"_createPreviewElement",value:function(){var t,e=this._previewTemplate,n=this.previewClass,a=e?e.template:null;if(a&&e){var o=e.matchSize?this._rootElement.getBoundingClientRect():null,i=e.viewContainer.createEmbeddedView(a,e.context);i.detectChanges(),t=At(i,this._document),this._previewRef=i,e.matchSize?Nt(t,o):t.style.transform=Mt(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{var r=this._rootElement;Nt(t=yt(r),r.getBoundingClientRect())}return mt(t.style,{pointerEvents:"none",margin:"0",position:"fixed",top:"0",left:"0",zIndex:"".concat(this._config.zIndex||1e3)}),ft(t,!1),t.classList.add("cdk-drag-preview"),t.setAttribute("dir",this._direction),n&&(Array.isArray(n)?n.forEach(function(e){return t.classList.add(e)}):t.classList.add(n)),t}},{key:"_animatePreviewToPlaceholder",value:function(){var t=this;if(!this._hasMoved)return Promise.resolve();var e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=Mt(e.left,e.top);var n=function(t){var e=getComputedStyle(t),n=gt(e,"transition-property"),a=n.find(function(t){return"transform"===t||"all"===t});if(!a)return 0;var o=n.indexOf(a),i=gt(e,"transition-duration"),r=gt(e,"transition-delay");return ht(i[o])+ht(r[o])}(this._preview);return 0===n?Promise.resolve():this._ngZone.runOutsideAngular(function(){return new Promise(function(e){var a=function n(a){(!a||a.target===t._preview&&"transform"===a.propertyName)&&(t._preview.removeEventListener("transitionend",n),e(),clearTimeout(o))},o=setTimeout(a,1.5*n);t._preview.addEventListener("transitionend",a)})})}},{key:"_createPlaceholderElement",value:function(){var t,e=this._placeholderTemplate,n=e?e.template:null;return n?(this._placeholderRef=e.viewContainer.createEmbeddedView(n,e.context),this._placeholderRef.detectChanges(),t=At(this._placeholderRef,this._document)):t=yt(this._rootElement),t.classList.add("cdk-drag-placeholder"),t}},{key:"_getPointerPositionInElement",value:function(t,e){var n=this._rootElement.getBoundingClientRect(),a=t===this._rootElement?null:t,o=a?a.getBoundingClientRect():n,i=Ft(e)?e.targetTouches[0]:e,r=this._getViewportScrollPosition();return{x:o.left-n.left+(i.pageX-o.left-r.left),y:o.top-n.top+(i.pageY-o.top-r.top)}}},{key:"_getPointerPositionOnPage",value:function(t){var e=this._getViewportScrollPosition(),n=Ft(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,a=n.pageX-e.left,o=n.pageY-e.top;if(this._ownerSVGElement){var i=this._ownerSVGElement.getScreenCTM();if(i){var r=this._ownerSVGElement.createSVGPoint();return r.x=a,r.y=o,r.matrixTransform(i.inverse())}}return{x:a,y:o}}},{key:"_getConstrainedPointerPosition",value:function(t){var e=this._dropContainer?this._dropContainer.lockAxis:null,n=this.constrainPosition?this.constrainPosition(t,this):t,a=n.x,o=n.y;if("x"===this.lockAxis||"x"===e?o=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==e||(a=this._pickupPositionOnPage.x),this._boundaryRect){var i=this._pickupPositionInElement,r=i.x,c=i.y,s=this._boundaryRect,l=this._previewRect,u=s.top+c,d=s.bottom-(l.height-c);a=Rt(a,s.left+r,s.right-(l.width-r)),o=Rt(o,u,d)}return{x:a,y:o}}},{key:"_updatePointerDirectionDelta",value:function(t){var e=t.x,n=t.y,a=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,i=Math.abs(e-o.x),r=Math.abs(n-o.y);return i>this._config.pointerDirectionChangeThreshold&&(a.x=e>o.x?1:-1,o.x=e),r>this._config.pointerDirectionChangeThreshold&&(a.y=n>o.y?1:-1,o.y=n),a}},{key:"_toggleNativeDragInteractions",value:function(){if(this._rootElement&&this._handles){var t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,ft(this._rootElement,t))}}},{key:"_removeRootElementListeners",value:function(t){t.removeEventListener("mousedown",this._pointerDown,Pt),t.removeEventListener("touchstart",this._pointerDown,xt)}},{key:"_applyRootElementTransform",value:function(t,e){var n=Mt(t,e);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?n+" "+this._initialTransform:n}},{key:"_getDragDistance",value:function(t){var e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}},{key:"_cleanupCachedDimensions",value:function(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}},{key:"_containInsideBoundaryOnResize",value:function(){var t=this._passiveTransform,e=t.x,n=t.y;if(!(0===e&&0===n||this.isDragging())&&this._boundaryElement){var a=this._boundaryElement.getBoundingClientRect(),o=this._rootElement.getBoundingClientRect();if(!(0===a.width&&0===a.height||0===o.width&&0===o.height)){var i=a.left-o.left,r=o.right-a.right,c=a.top-o.top,s=o.bottom-a.bottom;a.width>o.width?(i>0&&(e+=i),r>0&&(e-=r)):e=0,a.height>o.height?(c>0&&(n+=c),s>0&&(n-=s)):n=0,e===this._passiveTransform.x&&n===this._passiveTransform.y||this.setFreeDragPosition({y:n,x:e})}}}},{key:"_getDragStartDelay",value:function(t){var e=this.dragStartDelay;return"number"==typeof e?e:Ft(t)?e.touch:e?e.mouse:0}},{key:"_updateOnScroll",value:function(t){var e=this._parentPositions.handleScroll(t);if(e){var n=t.target;this._boundaryRect&&(n===this._document||n!==this._boundaryElement&&n.contains(this._boundaryElement))&&St(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}},{key:"_getViewportScrollPosition",value:function(){var t=this._parentPositions.positions.get(this._document);return t?t.scrollPosition:this._viewportRuler.getViewportScrollPosition()}},{key:"_getShadowRoot",value:function(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=Object(at.c)(this._rootElement)),this._cachedShadowRoot}},{key:"disabled",get:function(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)},set:function(t){var e=Object(Z.c)(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(function(t){return ft(t,e)}))}}]),t}();function Mt(t,e){return"translate3d(".concat(Math.round(t),"px, ").concat(Math.round(e),"px, 0)")}function Rt(t,e,n){return Math.max(e,Math.min(n,t))}function It(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Ft(t){return"t"===t.type[0]}function At(t,e){var n=t.rootNodes;if(1===n.length&&n[0].nodeType===e.ELEMENT_NODE)return n[0];var a=e.createElement("div");return n.forEach(function(t){return a.appendChild(t)}),a}function Nt(t,e){t.style.width="".concat(e.width,"px"),t.style.height="".concat(e.height,"px"),t.style.transform=Mt(e.left,e.top)}function Ut(t,e){return Math.max(0,Math.min(e,t))}var jt=function(){function t(e,n,a,o,i){var r=this;d(this,t),this._dragDropRegistry=n,this._ngZone=o,this._viewportRuler=i,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=function(){return!0},this.sortPredicate=function(){return!0},this.beforeStarted=new V.a,this.entered=new V.a,this.exited=new V.a,this.dropped=new V.a,this.sorted=new V.a,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=W.a.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new V.a,this._cachedShadowRoot=null,this._startScrollInterval=function(){r._stopScrolling(),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:it.a;return(!Object(rt.a)(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=it.a),new ot.a(function(n){return n.add(e.schedule(ct,t,{subscriber:n,counter:0,period:t})),n})}(0,st.a).pipe(Object(lt.a)(r._stopScrollTimers)).subscribe(function(){var t=r._scrollNode,e=r.autoScrollStep;1===r._verticalScrollDirection?Lt(t,-e):2===r._verticalScrollDirection&&Lt(t,e),1===r._horizontalScrollDirection?Ht(t,-e):2===r._horizontalScrollDirection&&Ht(t,e)})},this.element=Object(Z.e)(e),this._document=a,this.withScrollableParents([this.element]),n.registerDropContainer(this),this._parentPositions=new Tt(a,i)}return m(t,[{key:"dispose",value:function(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}},{key:"isDragging",value:function(){return this._isDragging}},{key:"start",value:function(){this._draggingStarted(),this._notifyReceivingSiblings()}},{key:"enter",value:function(t,e,n,a){var o;this._draggingStarted(),null==a?-1===(o=this.sortingDisabled?this._draggables.indexOf(t):-1)&&(o=this._getItemIndexFromPointerPosition(t,e,n)):o=a;var i=this._activeDraggables,r=i.indexOf(t),c=t.getPlaceholderElement(),s=i[o];if(s===t&&(s=i[o+1]),r>-1&&i.splice(r,1),s&&!this._dragDropRegistry.isDragging(s)){var l=s.getRootElement();l.parentElement.insertBefore(c,l),i.splice(o,0,t)}else if(this._shouldEnterAsFirstChild(e,n)){var u=i[0].getRootElement();u.parentNode.insertBefore(c,u),i.unshift(t)}else Object(Z.e)(this.element).appendChild(c),i.push(t);c.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}},{key:"exit",value:function(t){this._reset(),this.exited.next({item:t,container:this})}},{key:"drop",value:function(t,e,n,a,o,i){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:n,container:this,previousContainer:a,isPointerOverContainer:o,distance:i})}},{key:"withItems",value:function(t){var e=this,n=this._draggables;return this._draggables=t,t.forEach(function(t){return t._withDropContainer(e)}),this.isDragging()&&(n.filter(function(t){return t.isDragging()}).every(function(e){return-1===t.indexOf(e)})?this._reset():this._cacheItems()),this}},{key:"withDirection",value:function(t){return this._direction=t,this}},{key:"connectedTo",value:function(t){return this._siblings=t.slice(),this}},{key:"withOrientation",value:function(t){return this._orientation=t,this}},{key:"withScrollableParents",value:function(t){var e=Object(Z.e)(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e].concat(s(t)):t.slice(),this}},{key:"getScrollableParents",value:function(){return this._scrollableElements}},{key:"getItemIndex",value:function(t){return this._isDragging?Bt("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,function(e){return e.drag===t}):this._draggables.indexOf(t)}},{key:"isReceiving",value:function(){return this._activeSiblings.size>0}},{key:"_sortItem",value:function(t,e,n,a){if(!this.sortingDisabled&&this._clientRect&&_t(this._clientRect,.05,e,n)){var o=this._itemPositions,i=this._getItemIndexFromPointerPosition(t,e,n,a);if(!(-1===i&&o.length>0)){var r="horizontal"===this._orientation,c=Bt(o,function(e){return e.drag===t}),s=o[i],l=s.clientRect,u=c>i?1:-1,d=this._getItemOffsetPx(o[c].clientRect,l,u),b=this._getSiblingOffsetPx(c,o,u),m=o.slice();!function(t,e,n){var a=Ut(e,t.length-1),o=Ut(n,t.length-1);if(a!==o){for(var i=t[a],r=o<a?-1:1,c=a;c!==o;c+=r)t[c]=t[c+r];t[o]=i}}(o,c,i),this.sorted.next({previousIndex:c,currentIndex:i,container:this,item:t}),o.forEach(function(e,n){if(m[n]!==e){var a=e.drag===t,o=a?d:b,i=a?t.getPlaceholderElement():e.drag.getRootElement();e.offset+=o,r?(i.style.transform="translate3d(".concat(Math.round(e.offset),"px, 0, 0)"),St(e.clientRect,0,o)):(i.style.transform="translate3d(0, ".concat(Math.round(e.offset),"px, 0)"),St(e.clientRect,o,0))}}),this._previousSwap.overlaps=Ct(l,e,n),this._previousSwap.drag=s.drag,this._previousSwap.delta=r?a.x:a.y}}}},{key:"_startScrollingIfNecessary",value:function(t,e){var n=this;if(!this.autoScrollDisabled){var a,o=0,i=0;if(this._parentPositions.positions.forEach(function(r,s){var l;s!==n._document&&r.clientRect&&!a&&_t(r.clientRect,.05,t,e)&&(l=c(function(t,e,n,a){var o=zt(e,a),i=qt(e,n),r=0,c=0;if(o){var s=t.scrollTop;1===o?s>0&&(r=1):t.scrollHeight-s>t.clientHeight&&(r=2)}if(i){var l=t.scrollLeft;1===i?l>0&&(c=1):t.scrollWidth-l>t.clientWidth&&(c=2)}return[r,c]}(s,r.clientRect,t,e),2),o=l[0],i=l[1],(o||i)&&(a=s))}),!o&&!i){var r=this._viewportRuler.getViewportSize(),s=r.width,l=r.height,u={width:s,height:l,top:0,right:s,bottom:l,left:0};o=zt(u,e),i=qt(u,t),a=window}!a||o===this._verticalScrollDirection&&i===this._horizontalScrollDirection&&a===this._scrollNode||(this._verticalScrollDirection=o,this._horizontalScrollDirection=i,this._scrollNode=a,(o||i)&&a?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}}},{key:"_stopScrolling",value:function(){this._stopScrollTimers.next()}},{key:"_draggingStarted",value:function(){var t=Object(Z.e)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}},{key:"_cacheParentPositions",value:function(){var t=Object(Z.e)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}},{key:"_cacheItemPositions",value:function(){var t="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(function(t){var e=t.getVisibleElement();return{drag:t,offset:0,clientRect:vt(e)}}).sort(function(e,n){return t?e.clientRect.left-n.clientRect.left:e.clientRect.top-n.clientRect.top})}},{key:"_reset",value:function(){var t=this;this._isDragging=!1;var e=Object(Z.e)(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(function(t){var e=t.getRootElement();e&&(e.style.transform="")}),this._siblings.forEach(function(e){return e._stopReceiving(t)}),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}},{key:"_getSiblingOffsetPx",value:function(t,e,n){var a="horizontal"===this._orientation,o=e[t].clientRect,i=e[t+-1*n],r=o[a?"width":"height"]*n;if(i){var c=a?"left":"top",s=a?"right":"bottom";-1===n?r-=i.clientRect[c]-o[s]:r+=o[c]-i.clientRect[s]}return r}},{key:"_getItemOffsetPx",value:function(t,e,n){var a="horizontal"===this._orientation,o=a?e.left-t.left:e.top-t.top;return-1===n&&(o+=a?e.width-t.width:e.height-t.height),o}},{key:"_shouldEnterAsFirstChild",value:function(t,e){if(!this._activeDraggables.length)return!1;var n=this._itemPositions,a="horizontal"===this._orientation;if(n[0].drag!==this._activeDraggables[0]){var o=n[n.length-1].clientRect;return a?t>=o.right:e>=o.bottom}var i=n[0].clientRect;return a?t<=i.left:e<=i.top}},{key:"_getItemIndexFromPointerPosition",value:function(t,e,n,a){var o=this,i="horizontal"===this._orientation,r=Bt(this._itemPositions,function(r,c,s){var l=r.drag,u=r.clientRect;if(l===t)return s.length<2;if(a){var d=i?a.x:a.y;if(l===o._previousSwap.drag&&o._previousSwap.overlaps&&d===o._previousSwap.delta)return!1}return i?e>=Math.floor(u.left)&&e<Math.floor(u.right):n>=Math.floor(u.top)&&n<Math.floor(u.bottom)});return-1!==r&&this.sortPredicate(r,t,this)?r:-1}},{key:"_cacheItems",value:function(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}},{key:"_isOverContainer",value:function(t,e){return null!=this._clientRect&&Ct(this._clientRect,t,e)}},{key:"_getSiblingContainerFromPosition",value:function(t,e,n){return this._siblings.find(function(a){return a._canReceive(t,e,n)})}},{key:"_canReceive",value:function(t,e,n){if(!this._clientRect||!Ct(this._clientRect,e,n)||!this.enterPredicate(t,this))return!1;var a=this._getShadowRoot().elementFromPoint(e,n);if(!a)return!1;var o=Object(Z.e)(this.element);return a===o||o.contains(a)}},{key:"_startReceiving",value:function(t,e){var n=this,a=this._activeSiblings;!a.has(t)&&e.every(function(t){return n.enterPredicate(t,n)||n._draggables.indexOf(t)>-1})&&(a.add(t),this._cacheParentPositions(),this._listenToScrollEvents())}},{key:"_stopReceiving",value:function(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe()}},{key:"_listenToScrollEvents",value:function(){var t=this;this._viewportScrollSubscription=this._dragDropRegistry.scroll.subscribe(function(e){if(t.isDragging()){var n=t._parentPositions.handleScroll(e);n&&(t._itemPositions.forEach(function(t){St(t.clientRect,n.top,n.left)}),t._itemPositions.forEach(function(e){var n=e.drag;t._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()}))}else t.isReceiving()&&t._cacheParentPositions()})}},{key:"_getShadowRoot",value:function(){if(!this._cachedShadowRoot){var t=Object(at.c)(Object(Z.e)(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}},{key:"_notifyReceivingSiblings",value:function(){var t=this,e=this._activeDraggables.filter(function(t){return t.isDragging()});this._siblings.forEach(function(n){return n._startReceiving(t,e)})}}]),t}();function Bt(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return n;return-1}function Lt(t,e){t===window?t.scrollBy(0,e):t.scrollTop+=e}function Ht(t,e){t===window?t.scrollBy(e,0):t.scrollLeft+=e}function zt(t,e){var n=t.top,a=t.bottom,o=.05*t.height;return e>=n-o&&e<=n+o?1:e>=a-o&&e<=a+o?2:0}function qt(t,e){var n=t.left,a=t.right,o=.05*t.width;return e>=n-o&&e<=n+o?1:e>=a-o&&e<=a+o?2:0}var $t,Vt,Wt,Gt=Object(at.f)({passive:!1,capture:!0}),Qt=(($t=function(){function t(e,n){var a=this;d(this,t),this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=function(t){return t.isDragging()},this.pointerMove=new V.a,this.pointerUp=new V.a,this.scroll=new V.a,this._preventDefaultWhileDragging=function(t){a._activeDragInstances.length>0&&t.preventDefault()},this._persistentTouchmoveListener=function(t){a._activeDragInstances.length>0&&(a._activeDragInstances.some(a._draggingPredicate)&&t.preventDefault(),a.pointerMove.next(t))},this._document=n}return m(t,[{key:"registerDropContainer",value:function(t){this._dropInstances.has(t)||this._dropInstances.add(t)}},{key:"registerDragItem",value:function(t){var e=this;this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(function(){e._document.addEventListener("touchmove",e._persistentTouchmoveListener,Gt)})}},{key:"removeDropContainer",value:function(t){this._dropInstances.delete(t)}},{key:"removeDragItem",value:function(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Gt)}},{key:"startDragging",value:function(t,e){var n=this;if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){var a=e.type.startsWith("touch");this._globalListeners.set(a?"touchend":"mouseup",{handler:function(t){return n.pointerUp.next(t)},options:!0}).set("scroll",{handler:function(t){return n.scroll.next(t)},options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Gt}),a||this._globalListeners.set("mousemove",{handler:function(t){return n.pointerMove.next(t)},options:Gt}),this._ngZone.runOutsideAngular(function(){n._globalListeners.forEach(function(t,e){n._document.addEventListener(e,t.handler,t.options)})})}}},{key:"stopDragging",value:function(t){var e=this._activeDragInstances.indexOf(t);e>-1&&(this._activeDragInstances.splice(e,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}},{key:"isDragging",value:function(t){return this._activeDragInstances.indexOf(t)>-1}},{key:"ngOnDestroy",value:function(){var t=this;this._dragInstances.forEach(function(e){return t.removeDragItem(e)}),this._dropInstances.forEach(function(e){return t.removeDropContainer(e)}),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}},{key:"_clearGlobalListeners",value:function(){var t=this;this._globalListeners.forEach(function(e,n){t._document.removeEventListener(n,e.handler,e.options)}),this._globalListeners.clear()}}]),t}()).\u0275fac=function(t){return new(t||$t)(z.Xb(z.B),z.Xb(b.d))},$t.\u0275prov=Object(z.Jb)({factory:function(){return new $t(Object(z.Xb)(z.B),Object(z.Xb)(b.d))},token:$t,providedIn:"root"}),$t),Jt={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Xt=((Vt=function(){function t(e,n,a,o){d(this,t),this._document=e,this._ngZone=n,this._viewportRuler=a,this._dragDropRegistry=o}return m(t,[{key:"createDrag",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jt;return new Ot(t,e,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}},{key:"createDropList",value:function(t){return new jt(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}]),t}()).\u0275fac=function(t){return new(t||Vt)(z.Xb(b.d),z.Xb(z.B),z.Xb(q.e),z.Xb(Qt))},Vt.\u0275prov=Object(z.Jb)({factory:function(){return new Vt(Object(z.Xb)(b.d),Object(z.Xb)(z.B),Object(z.Xb)(q.e),Object(z.Xb)(Qt))},token:Vt,providedIn:"root"}),Vt),Zt=new z.s("CDK_DRAG_PARENT"),Kt=new z.s("CDK_DRAG_CONFIG"),Yt=new z.s("CdkDropList"),te=new z.s("CdkDragHandle"),ee=new z.s("CdkDragPlaceholder"),ne=new z.s("CdkDragPreview"),ae=((Wt=function(){function t(e,n,a,o,i,r,c,s,l,u,b){var m=this;d(this,t),this.element=e,this.dropContainer=n,this._ngZone=o,this._viewContainerRef=i,this._dir=c,this._changeDetectorRef=l,this._selfHandle=u,this._parentDrag=b,this._destroyed=new V.a,this.started=new z.o,this.released=new z.o,this.ended=new z.o,this.entered=new z.o,this.exited=new z.o,this.dropped=new z.o,this.moved=new ot.a(function(t){var e=m._dragRef.moved.pipe(Object(ut.a)(function(t){return{source:m,pointerPosition:t.pointerPosition,event:t.event,delta:t.delta,distance:t.distance}})).subscribe(t);return function(){e.unsubscribe()}}),this._dragRef=s.createDrag(e,{dragStartThreshold:r&&null!=r.dragStartThreshold?r.dragStartThreshold:5,pointerDirectionChangeThreshold:r&&null!=r.pointerDirectionChangeThreshold?r.pointerDirectionChangeThreshold:5,zIndex:null==r?void 0:r.zIndex}),this._dragRef.data=this,t._dragInstances.push(this),r&&this._assignDefaults(r),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}return m(t,[{key:"getPlaceholderElement",value:function(){return this._dragRef.getPlaceholderElement()}},{key:"getRootElement",value:function(){return this._dragRef.getRootElement()}},{key:"reset",value:function(){this._dragRef.reset()}},{key:"getFreeDragPosition",value:function(){return this._dragRef.getFreeDragPosition()}},{key:"ngAfterViewInit",value:function(){var t=this;this._ngZone.onStable.pipe(Object(J.a)(1),Object(lt.a)(this._destroyed)).subscribe(function(){t._updateRootElement(),t._handles.changes.pipe(Object(X.a)(t._handles),Object(dt.a)(function(e){var n=e.filter(function(e){return e._parentDrag===t}).map(function(t){return t.element});t._selfHandle&&t.rootElementSelector&&n.push(t.element),t._dragRef.withHandles(n)}),Object(bt.a)(function(t){return Object(G.a).apply(void 0,s(t.map(function(t){return t._stateChanges.pipe(Object(X.a)(t))})))}),Object(lt.a)(t._destroyed)).subscribe(function(e){var n=t._dragRef,a=e.element.nativeElement;e.disabled?n.disableHandle(a):n.enableHandle(a)}),t.freeDragPosition&&t._dragRef.setFreeDragPosition(t.freeDragPosition)})}},{key:"ngOnChanges",value:function(t){var e=t.rootElementSelector,n=t.freeDragPosition;e&&!e.firstChange&&this._updateRootElement(),n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}},{key:"ngOnDestroy",value:function(){this.dropContainer&&this.dropContainer.removeItem(this);var e=t._dragInstances.indexOf(this);e>-1&&t._dragInstances.splice(e,-1),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}},{key:"_updateRootElement",value:function(){var t=this.element.nativeElement,e=this.rootElementSelector?oe(t,this.rootElementSelector):t;this._dragRef.withRootElement(e||t)}},{key:"_getBoundaryElement",value:function(){var t=this.boundaryElement;return t?"string"==typeof t?oe(this.element.nativeElement,t):Object(Z.e)(t):null}},{key:"_syncInputs",value:function(e){var n=this;e.beforeStarted.subscribe(function(){if(!e.isDragging()){var t=n._dir,a=n.dragStartDelay,o=n._placeholderTemplate?{template:n._placeholderTemplate.templateRef,context:n._placeholderTemplate.data,viewContainer:n._viewContainerRef}:null,i=n._previewTemplate?{template:n._previewTemplate.templateRef,context:n._previewTemplate.data,matchSize:n._previewTemplate.matchSize,viewContainer:n._viewContainerRef}:null;e.disabled=n.disabled,e.lockAxis=n.lockAxis,e.dragStartDelay="object"==typeof a&&a?a:Object(Z.f)(a),e.constrainPosition=n.constrainPosition,e.previewClass=n.previewClass,e.withBoundaryElement(n._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(i),t&&e.withDirection(t.value)}}),e.beforeStarted.pipe(Object(J.a)(1)).subscribe(function(){var a,o;if(n._parentDrag)e.withParent(n._parentDrag._dragRef);else for(var i=n.element.nativeElement.parentElement;i;){if(null===(a=i.classList)||void 0===a?void 0:a.contains("cdk-drag")){e.withParent((null===(o=t._dragInstances.find(function(t){return t.element.nativeElement===i}))||void 0===o?void 0:o._dragRef)||null);break}i=i.parentElement}})}},{key:"_handleEvents",value:function(t){var e=this;t.started.subscribe(function(){e.started.emit({source:e}),e._changeDetectorRef.markForCheck()}),t.released.subscribe(function(){e.released.emit({source:e})}),t.ended.subscribe(function(t){e.ended.emit({source:e,distance:t.distance}),e._changeDetectorRef.markForCheck()}),t.entered.subscribe(function(t){e.entered.emit({container:t.container.data,item:e,currentIndex:t.currentIndex})}),t.exited.subscribe(function(t){e.exited.emit({container:t.container.data,item:e})}),t.dropped.subscribe(function(t){e.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,isPointerOverContainer:t.isPointerOverContainer,item:e,distance:t.distance})})}},{key:"_assignDefaults",value:function(t){var e=t.lockAxis,n=t.dragStartDelay,a=t.constrainPosition,o=t.previewClass,i=t.boundaryElement,r=t.draggingDisabled,c=t.rootElementSelector;this.disabled=null!=r&&r,this.dragStartDelay=n||0,e&&(this.lockAxis=e),a&&(this.constrainPosition=a),o&&(this.previewClass=o),i&&(this.boundaryElement=i),c&&(this.rootElementSelector=c)}},{key:"disabled",get:function(){return this._disabled||this.dropContainer&&this.dropContainer.disabled},set:function(t){this._disabled=Object(Z.c)(t),this._dragRef.disabled=this._disabled}}]),t}()).\u0275fac=function(t){return new(t||Wt)(z.Nb(z.l),z.Nb(Yt,12),z.Nb(b.d),z.Nb(z.B),z.Nb(z.R),z.Nb(Kt,8),z.Nb(Y.b,8),z.Nb(Xt),z.Nb(z.h),z.Nb(te,10),z.Nb(Zt,12))},Wt.\u0275dir=z.Ib({type:Wt,selectors:[["","cdkDrag",""]],contentQueries:function(t,e,n){var a;1&t&&(z.Gb(n,ne,1),z.Gb(n,ee,1),z.Gb(n,te,1)),2&t&&(z.sc(a=z.cc())&&(e._previewTemplate=a.first),z.sc(a=z.cc())&&(e._placeholderTemplate=a.first),z.sc(a=z.cc())&&(e._handles=a))},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,e){2&t&&z.Fb("cdk-drag-disabled",e.disabled)("cdk-drag-dragging",e._dragRef.isDragging())},inputs:{disabled:["cdkDragDisabled","disabled"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],lockAxis:["cdkDragLockAxis","lockAxis"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],boundaryElement:["cdkDragBoundary","boundaryElement"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],data:["cdkDragData","data"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[z.Bb([{provide:Zt,useExisting:Wt}]),z.Ab]}),Wt._dragInstances=[],Wt);function oe(t,e){for(var n=t.parentElement;n;){if(n.matches?n.matches(e):n.msMatchesSelector(e))return n;n=n.parentElement}return null}var ie,re,ce,se,le,ue,de,be,me,fe=((ie=function t(){d(this,t)}).\u0275mod=z.Lb({type:ie}),ie.\u0275inj=z.Kb({factory:function(t){return new(t||ie)},providers:[Xt],imports:[q.b]}),ie),pe=r("R1ws"),he=0,ge=Object($.w)(function t(){d(this,t)}),ve=((ce=function(t){e(o,t);var n=a(o);function o(t,e,a,i,r){var c;return d(this,o),(c=n.call(this))._ngZone=t,c._elementRef=e,c._ariaDescriber=a,c._renderer=i,c._animationMode=r,c._hasContent=!1,c._color="primary",c._overlap=!0,c.position="above after",c.size="medium",c._id=he++,c}return m(o,[{key:"isAbove",value:function(){return-1===this.position.indexOf("below")}},{key:"isAfter",value:function(){return-1===this.position.indexOf("before")}},{key:"ngOnChanges",value:function(t){var e=t.content;if(e){var n=e.currentValue;this._hasContent=null!=n&&"".concat(n).trim().length>0,this._updateTextContent()}}},{key:"ngOnDestroy",value:function(){var t=this._badgeElement;t&&(this.description&&this._ariaDescriber.removeDescription(t,this.description),this._renderer.destroyNode&&this._renderer.destroyNode(t))}},{key:"getBadgeElement",value:function(){return this._badgeElement}},{key:"_updateTextContent",value:function(){return this._badgeElement?this._badgeElement.textContent=this._stringifyContent():this._badgeElement=this._createBadgeElement(),this._badgeElement}},{key:"_createBadgeElement",value:function(){var t=this._renderer.createElement("span");return this._clearExistingBadges("mat-badge-content"),t.setAttribute("id","mat-badge-content-".concat(this._id)),t.classList.add("mat-badge-content"),t.textContent=this._stringifyContent(),"NoopAnimations"===this._animationMode&&t.classList.add("_mat-animation-noopable"),this.description&&t.setAttribute("aria-label",this.description),this._elementRef.nativeElement.appendChild(t),"function"==typeof requestAnimationFrame&&"NoopAnimations"!==this._animationMode?this._ngZone.runOutsideAngular(function(){requestAnimationFrame(function(){t.classList.add("mat-badge-active")})}):t.classList.add("mat-badge-active"),t}},{key:"_updateHostAriaDescription",value:function(t,e){var n=this._updateTextContent();e&&this._ariaDescriber.removeDescription(n,e),t&&this._ariaDescriber.describe(n,t)}},{key:"_setColor",value:function(t){if(t!==this._color){var e=this._elementRef.nativeElement.classList;this._color&&e.remove("mat-badge-".concat(this._color)),t&&e.add("mat-badge-".concat(t))}}},{key:"_clearExistingBadges",value:function(t){for(var e=this._elementRef.nativeElement,n=e.children.length;n--;){var a=e.children[n];a.classList.contains(t)&&e.removeChild(a)}}},{key:"_stringifyContent",value:function(){var t=this.content;return null==t?"":"".concat(t)}},{key:"color",get:function(){return this._color},set:function(t){this._setColor(t),this._color=t}},{key:"overlap",get:function(){return this._overlap},set:function(t){this._overlap=Object(Z.c)(t)}},{key:"description",get:function(){return this._description},set:function(t){if(t!==this._description){var e=this._badgeElement;this._updateHostAriaDescription(t,this._description),this._description=t,e&&(t?e.setAttribute("aria-label",t):e.removeAttribute("aria-label"))}}},{key:"hidden",get:function(){return this._hidden},set:function(t){this._hidden=Object(Z.c)(t)}}]),o}(ge)).\u0275fac=function(t){return new(t||ce)(z.Nb(z.B),z.Nb(z.l),z.Nb(B.c),z.Nb(z.G),z.Nb(pe.a,8))},ce.\u0275dir=z.Ib({type:ce,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(t,e){2&t&&z.Fb("mat-badge-overlap",e.overlap)("mat-badge-above",e.isAbove())("mat-badge-below",!e.isAbove())("mat-badge-before",!e.isAfter())("mat-badge-after",e.isAfter())("mat-badge-small","small"===e.size)("mat-badge-medium","medium"===e.size)("mat-badge-large","large"===e.size)("mat-badge-hidden",e.hidden||!e._hasContent)("mat-badge-disabled",e.disabled)},inputs:{disabled:["matBadgeDisabled","disabled"],position:["matBadgePosition","position"],size:["matBadgeSize","size"],color:["matBadgeColor","color"],overlap:["matBadgeOverlap","overlap"],description:["matBadgeDescription","description"],hidden:["matBadgeHidden","hidden"],content:["matBadge","content"]},features:[z.zb,z.Ab]}),ce),Ce=((re=function t(){d(this,t)}).\u0275mod=z.Lb({type:re}),re.\u0275inj=z.Kb({factory:function(t){return new(t||re)},imports:[[B.a,$.g],$.g]}),re),Se=r("tyNb"),_e=[],Te=((le=function t(){d(this,t)}).\u0275mod=z.Lb({type:le}),le.\u0275inj=z.Kb({factory:function(t){return new(t||le)},imports:[[Se.d.forChild(_e)],Se.d]}),le),ye=((se=function t(){d(this,t)}).\u0275mod=z.Lb({type:se}),se.\u0275inj=z.Kb({factory:function(t){return new(t||se)},imports:[[b.c,Te,f.c,p.e,h.a,C.AdminModule,S.a,_.d,T.b,y.d,k.c,D.f,w.b,E.c,x.l,P.b,O.b,M.b,R.b,I.b,F.d,A.b,N.b,U.e,j.d,nt,$.j,fe,Ce]]}),se),ke=r("0EQZ"),De=["*"],we=new z.s("MatChipRemove"),Ee=new z.s("MatChipAvatar"),xe=new z.s("MatChipTrailingIcon"),Pe=Object($.z)(Object($.u)(Object($.v)(function t(e){d(this,t),this._elementRef=e}),"primary"),-1),Oe=((ue=function(t){e(o,t);var n=a(o);function o(t,e,a,r,c,s,l,u){var b;return d(this,o),(b=n.call(this,t))._elementRef=t,b._ngZone=e,b._changeDetectorRef=c,b._hasFocus=!1,b.chipListSelectable=!0,b._chipListMultiple=!1,b._chipListDisabled=!1,b._selected=!1,b._selectable=!0,b._disabled=!1,b._removable=!0,b._onFocus=new V.a,b._onBlur=new V.a,b.selectionChange=new z.o,b.destroyed=new z.o,b.removed=new z.o,b._addHostClassName(),b._chipRippleTarget=s.createElement("div"),b._chipRippleTarget.classList.add("mat-chip-ripple"),b._elementRef.nativeElement.appendChild(b._chipRippleTarget),b._chipRipple=new $.r(i(b),e,b._chipRippleTarget,a),b._chipRipple.setupTriggerEvents(t),b.rippleConfig=r||{},b._animationsDisabled="NoopAnimations"===l,b.tabIndex=null!=u&&parseInt(u)||-1,b}return m(o,[{key:"_addHostClassName",value:function(){var t=this._elementRef.nativeElement;t.hasAttribute("mat-basic-chip")||"mat-basic-chip"===t.tagName.toLowerCase()?t.classList.add("mat-basic-chip"):t.classList.add("mat-standard-chip")}},{key:"ngOnDestroy",value:function(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}},{key:"select",value:function(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}},{key:"deselect",value:function(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}},{key:"selectViaInteraction",value:function(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}},{key:"toggleSelected",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._selected=!this.selected,this._dispatchSelectionChange(t),this._changeDetectorRef.markForCheck(),this.selected}},{key:"focus",value:function(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}},{key:"remove",value:function(){this.removable&&this.removed.emit({chip:this})}},{key:"_handleClick",value:function(t){this.disabled?t.preventDefault():t.stopPropagation()}},{key:"_handleKeydown",value:function(t){if(!this.disabled)switch(t.keyCode){case Q.c:case Q.b:this.remove(),t.preventDefault();break;case Q.n:this.selectable&&this.toggleSelected(!0),t.preventDefault()}}},{key:"_blur",value:function(){var t=this;this._ngZone.onStable.pipe(Object(J.a)(1)).subscribe(function(){t._ngZone.run(function(){t._hasFocus=!1,t._onBlur.next({chip:t})})})}},{key:"_dispatchSelectionChange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.selectionChange.emit({source:this,isUserInput:t,selected:this._selected})}},{key:"rippleDisabled",get:function(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}},{key:"selected",get:function(){return this._selected},set:function(t){var e=Object(Z.c)(t);e!==this._selected&&(this._selected=e,this._dispatchSelectionChange())}},{key:"value",get:function(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent},set:function(t){this._value=t}},{key:"selectable",get:function(){return this._selectable&&this.chipListSelectable},set:function(t){this._selectable=Object(Z.c)(t)}},{key:"disabled",get:function(){return this._chipListDisabled||this._disabled},set:function(t){this._disabled=Object(Z.c)(t)}},{key:"removable",get:function(){return this._removable},set:function(t){this._removable=Object(Z.c)(t)}},{key:"ariaSelected",get:function(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}}]),o}(Pe)).\u0275fac=function(t){return new(t||ue)(z.Nb(z.l),z.Nb(z.B),z.Nb(at.a),z.Nb($.f,8),z.Nb(z.h),z.Nb(b.d),z.Nb(pe.a,8),z.Yb("tabindex"))},ue.\u0275dir=z.Ib({type:ue,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(t,e,n){var a;1&t&&(z.Gb(n,Ee,1),z.Gb(n,xe,1),z.Gb(n,we,1)),2&t&&(z.sc(a=z.cc())&&(e.avatar=a.first),z.sc(a=z.cc())&&(e.trailingIcon=a.first),z.sc(a=z.cc())&&(e.removeIcon=a.first))},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(t,e){1&t&&z.bc("click",function(t){return e._handleClick(t)})("keydown",function(t){return e._handleKeydown(t)})("focus",function(){return e.focus()})("blur",function(){return e._blur()}),2&t&&(z.Db("tabindex",e.disabled?null:e.tabIndex)("disabled",e.disabled||null)("aria-disabled",e.disabled.toString())("aria-selected",e.ariaSelected),z.Fb("mat-chip-selected",e.selected)("mat-chip-with-avatar",e.avatar)("mat-chip-with-trailing-icon",e.trailingIcon||e.removeIcon)("mat-chip-disabled",e.disabled)("_mat-animation-noopable",e._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[z.zb]}),ue),Me=new z.s("mat-chips-default-options"),Re=Object($.x)(function t(e,n,a,o){d(this,t),this._defaultErrorStateMatcher=e,this._parentForm=n,this._parentFormGroup=a,this.ngControl=o}),Ie=0,Fe=function t(e,n){d(this,t),this.source=e,this.value=n},Ae=((de=function(t){e(o,t);var n=a(o);function o(t,e,a,r,c,s,l){var u;return d(this,o),(u=n.call(this,s,r,c,l))._elementRef=t,u._changeDetectorRef=e,u._dir=a,u.ngControl=l,u.controlType="mat-chip-list",u._lastDestroyedChipIndex=null,u._destroyed=new V.a,u._uid="mat-chip-list-"+Ie++,u._tabIndex=0,u._userTabIndex=null,u._onTouched=function(){},u._onChange=function(){},u._multiple=!1,u._compareWith=function(t,e){return t===e},u._required=!1,u._disabled=!1,u.ariaOrientation="horizontal",u._selectable=!0,u.change=new z.o,u.valueChange=new z.o,u.ngControl&&(u.ngControl.valueAccessor=i(u)),u}return m(o,[{key:"ngAfterContentInit",value:function(){var t=this;this._keyManager=new B.g(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(Object(lt.a)(this._destroyed)).subscribe(function(e){return t._keyManager.withHorizontalOrientation(e)}),this._keyManager.tabOut.pipe(Object(lt.a)(this._destroyed)).subscribe(function(){t._allowFocusEscape()}),this.chips.changes.pipe(Object(X.a)(null),Object(lt.a)(this._destroyed)).subscribe(function(){t.disabled&&Promise.resolve().then(function(){t._syncChipsState()}),t._resetChips(),t._initializeSelection(),t._updateTabIndex(),t._updateFocusForDestroyedChips(),t.stateChanges.next()})}},{key:"ngOnInit",value:function(){this._selectionModel=new ke.c(this.multiple,void 0,!1),this.stateChanges.next()}},{key:"ngDoCheck",value:function(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}},{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}},{key:"registerInput",value:function(t){this._chipInput=t,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",t.id)}},{key:"setDescribedByIds",value:function(t){this._ariaDescribedby=t.join(" ")}},{key:"writeValue",value:function(t){this.chips&&this._setSelectionByValue(t,!1)}},{key:"registerOnChange",value:function(t){this._onChange=t}},{key:"registerOnTouched",value:function(t){this._onTouched=t}},{key:"setDisabledState",value:function(t){this.disabled=t,this.stateChanges.next()}},{key:"onContainerClick",value:function(t){this._originatesFromChip(t)||this.focus()}},{key:"focus",value:function(t){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(t),this.stateChanges.next()))}},{key:"_focusInput",value:function(t){this._chipInput&&this._chipInput.focus(t)}},{key:"_keydown",value:function(t){var e=t.target;t.keyCode===Q.b&&this._isInputEmpty(e)?(this._keyManager.setLastItemActive(),t.preventDefault()):e&&e.classList.contains("mat-chip")&&(this._keyManager.onKeydown(t),this.stateChanges.next())}},{key:"_updateTabIndex",value:function(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}},{key:"_updateFocusForDestroyedChips",value:function(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){var t=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(t)}else this.focus();this._lastDestroyedChipIndex=null}},{key:"_isValidIndex",value:function(t){return t>=0&&t<this.chips.length}},{key:"_isInputEmpty",value:function(t){return!(!t||"input"!==t.nodeName.toLowerCase()||t.value)}},{key:"_setSelectionByValue",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._clearSelection(),this.chips.forEach(function(t){return t.deselect()}),Array.isArray(t))t.forEach(function(t){return e._selectValue(t,n)}),this._sortValues();else{var a=this._selectValue(t,n);a&&n&&this._keyManager.setActiveItem(a)}}},{key:"_selectValue",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this.chips.find(function(n){return null!=n.value&&e._compareWith(n.value,t)});return a&&(n?a.selectViaInteraction():a.select(),this._selectionModel.select(a)),a}},{key:"_initializeSelection",value:function(){var t=this;Promise.resolve().then(function(){(t.ngControl||t._value)&&(t._setSelectionByValue(t.ngControl?t.ngControl.value:t._value,!1),t.stateChanges.next())})}},{key:"_clearSelection",value:function(t){this._selectionModel.clear(),this.chips.forEach(function(e){e!==t&&e.deselect()}),this.stateChanges.next()}},{key:"_sortValues",value:function(){var t=this;this._multiple&&(this._selectionModel.clear(),this.chips.forEach(function(e){e.selected&&t._selectionModel.select(e)}),this.stateChanges.next())}},{key:"_propagateChanges",value:function(t){var e;e=Array.isArray(this.selected)?this.selected.map(function(t){return t.value}):this.selected?this.selected.value:t,this._value=e,this.change.emit(new Fe(this,e)),this.valueChange.emit(e),this._onChange(e),this._changeDetectorRef.markForCheck()}},{key:"_blur",value:function(){var t=this;this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(function(){t.focused||t._markAsTouched()}):this._markAsTouched())}},{key:"_markAsTouched",value:function(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}},{key:"_allowFocusEscape",value:function(){var t=this;-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(function(){t._tabIndex=t._userTabIndex||0,t._changeDetectorRef.markForCheck()}))}},{key:"_resetChips",value:function(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}},{key:"_dropSubscriptions",value:function(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}},{key:"_listenToChipsSelection",value:function(){var t=this;this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(function(e){e.source.selected?t._selectionModel.select(e.source):t._selectionModel.deselect(e.source),t.multiple||t.chips.forEach(function(e){!t._selectionModel.isSelected(e)&&e.selected&&e.deselect()}),e.isUserInput&&t._propagateChanges()})}},{key:"_listenToChipsFocus",value:function(){var t=this;this._chipFocusSubscription=this.chipFocusChanges.subscribe(function(e){var n=t.chips.toArray().indexOf(e.chip);t._isValidIndex(n)&&t._keyManager.updateActiveItem(n),t.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(function(){t._blur(),t.stateChanges.next()})}},{key:"_listenToChipsRemoved",value:function(){var t=this;this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(function(e){var n=e.chip,a=t.chips.toArray().indexOf(e.chip);t._isValidIndex(a)&&n._hasFocus&&(t._lastDestroyedChipIndex=a)})}},{key:"_originatesFromChip",value:function(t){for(var e=t.target;e&&e!==this._elementRef.nativeElement;){if(e.classList.contains("mat-chip"))return!0;e=e.parentElement}return!1}},{key:"_hasFocusedChip",value:function(){return this.chips&&this.chips.some(function(t){return t._hasFocus})}},{key:"_syncChipsState",value:function(){var t=this;this.chips&&this.chips.forEach(function(e){e._chipListDisabled=t._disabled,e._chipListMultiple=t.multiple})}},{key:"selected",get:function(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}},{key:"role",get:function(){return this.empty?null:"listbox"}},{key:"multiple",get:function(){return this._multiple},set:function(t){this._multiple=Object(Z.c)(t),this._syncChipsState()}},{key:"compareWith",get:function(){return this._compareWith},set:function(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}},{key:"value",get:function(){return this._value},set:function(t){this.writeValue(t),this._value=t}},{key:"id",get:function(){return this._chipInput?this._chipInput.id:this._uid}},{key:"required",get:function(){return this._required},set:function(t){this._required=Object(Z.c)(t),this.stateChanges.next()}},{key:"placeholder",get:function(){return this._chipInput?this._chipInput.placeholder:this._placeholder},set:function(t){this._placeholder=t,this.stateChanges.next()}},{key:"focused",get:function(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}},{key:"empty",get:function(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}},{key:"shouldLabelFloat",get:function(){return!this.empty||this.focused}},{key:"disabled",get:function(){return this.ngControl?!!this.ngControl.disabled:this._disabled},set:function(t){this._disabled=Object(Z.c)(t),this._syncChipsState()}},{key:"selectable",get:function(){return this._selectable},set:function(t){var e=this;this._selectable=Object(Z.c)(t),this.chips&&this.chips.forEach(function(t){return t.chipListSelectable=e._selectable})}},{key:"tabIndex",set:function(t){this._userTabIndex=t,this._tabIndex=t}},{key:"chipSelectionChanges",get:function(){return Object(G.a).apply(void 0,s(this.chips.map(function(t){return t.selectionChange})))}},{key:"chipFocusChanges",get:function(){return Object(G.a).apply(void 0,s(this.chips.map(function(t){return t._onFocus})))}},{key:"chipBlurChanges",get:function(){return Object(G.a).apply(void 0,s(this.chips.map(function(t){return t._onBlur})))}},{key:"chipRemoveChanges",get:function(){return Object(G.a).apply(void 0,s(this.chips.map(function(t){return t.destroyed})))}}]),o}(Re)).\u0275fac=function(t){return new(t||de)(z.Nb(z.l),z.Nb(z.h),z.Nb(Y.b,8),z.Nb(p.m,8),z.Nb(p.d,8),z.Nb($.b),z.Nb(p.j,10))},de.\u0275cmp=z.Hb({type:de,selectors:[["mat-chip-list"]],contentQueries:function(t,e,n){var a;1&t&&z.Gb(n,Oe,1),2&t&&z.sc(a=z.cc())&&(e.chips=a)},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(t,e){1&t&&z.bc("focus",function(){return e.focus()})("blur",function(){return e._blur()})("keydown",function(t){return e._keydown(t)}),2&t&&(z.Wb("id",e._uid),z.Db("tabindex",e.disabled?null:e._tabIndex)("aria-describedby",e._ariaDescribedby||null)("aria-required",e.role?e.required:null)("aria-disabled",e.disabled.toString())("aria-invalid",e.errorState)("aria-multiselectable",e.multiple)("role",e.role)("aria-orientation",e.ariaOrientation),z.Fb("mat-chip-list-disabled",e.disabled)("mat-chip-list-invalid",e.errorState)("mat-chip-list-required",e.required))},inputs:{ariaOrientation:["aria-orientation","ariaOrientation"],multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",selectable:"selectable",tabIndex:"tabIndex",errorStateMatcher:"errorStateMatcher"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[z.Bb([{provide:y.c,useExisting:de}]),z.zb],ngContentSelectors:De,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(t,e){1&t&&(z.kc(),z.Tb(0,"div",0),z.jc(1),z.Sb())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;transform:translateZ(0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove.mat-icon{width:18px;height:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),de),Ne={separatorKeyCodes:[Q.f]},Ue=((be=function t(){d(this,t)}).\u0275mod=z.Lb({type:be}),be.\u0275inj=z.Kb({factory:function(t){return new(t||be)},providers:[$.b,{provide:Me,useValue:Ne}],imports:[[$.g]]}),be),je=r("JbvS"),Be=r("0T/Q"),Le=r("sKxO"),He=r("R5jZ"),ze=r("un/a"),qe=r("JIr8"),$e=r("Qyje"),Ve=((me=function(){function t(e){d(this,t),this.http=e,this.moduleUrl="mante/area",this.srvcErrHndl=new He.a}return m(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Le.a.url,"/").concat(this.moduleUrl,"/get_areas?").concat($e.stringify(t))).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(t){return this.http.post("".concat(Le.a.url,"/").concat(this.moduleUrl,"/guardar").concat(t.area?"/"+t.area:""),t).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||me)(z.Xb(f.b))},me.\u0275prov=z.Jb({token:me,factory:me.\u0275fac,providedIn:"root"}),me),We=r("FY0D");function Ge(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-list-item",5),z.bc("click",function(){z.wc(n);var t=e.$implicit;return z.fc().getEntidad(t.area)}),z.Tb(1,"mat-icon",6),z.Dc(2,"settings"),z.Sb(),z.Tb(3,"h5",7),z.Dc(4),z.Sb(),z.Sb()}if(2&t){var a=e.$implicit;z.Cb(4),z.Ec(a.nombre)}}var Qe,Je,Xe=function(){return{standalone:!0}},Ze=((Je=function(){function t(e,n){var a=this;d(this,t),this.areaSrvc=e,this.ls=n,this.getEntidadEv=new z.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadEntidades=function(){a.areaSrvc.get({sede:a.ls.get(Le.a.usrTokenVar).sede||0,debaja:1}).subscribe(function(t){t&&t.length>0&&(a.lstEntidades=t,a.applyFilter())})},this.getEntidad=function(t){a.areaSrvc.get({area:t,debaja:1}).subscribe(function(t){t&&t.length>0&&a.getEntidadEv.emit(t[0])})},this.pageChange=function(t){a.pageSize=t.pageSize,a.pageIndex=t.pageIndex,a.applyFilter()}}return m(t,[{key:"ngOnInit",value:function(){this.loadEntidades()}},{key:"applyFilter",value:function(){if(this.txtFiltro.length>0){var t=Object(Le.b)(this.lstEntidades,this.txtFiltro);this.length=t.length,this.lstEntidadesPaged=Object(Le.c)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstEntidades.length,this.lstEntidadesPaged=Object(Le.c)(this.lstEntidades,this.pageSize,this.pageIndex+1)}}]),t}()).\u0275fac=function(t){return new(t||Je)(z.Nb(Ve),z.Nb(We.a))},Je.\u0275cmp=z.Hb({type:Je,selectors:[["app-lista-area"]],outputs:{getEntidadEv:"getEntidadEv"},decls:7,vars:7,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],["matRipple","",3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["matRipple","",3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,e){1&t&&(z.Tb(0,"mat-card",0),z.Tb(1,"mat-card-content"),z.Tb(2,"mat-form-field",1),z.Tb(3,"input",2),z.bc("keyup",function(){return e.applyFilter()})("ngModelChange",function(t){return e.txtFiltro=t}),z.Sb(),z.Sb(),z.Tb(4,"mat-nav-list"),z.Cc(5,Ge,5,1,"mat-list-item",3),z.Sb(),z.Tb(6,"mat-paginator",4),z.bc("page",function(t){return e.pageChange(t)}),z.Sb(),z.Sb(),z.Sb()),2&t&&(z.Cb(3),z.lc("ngModel",e.txtFiltro)("ngModelOptions",z.nc(6,Xe)),z.Cb(2),z.lc("ngForOf",e.lstEntidadesPaged),z.Cb(1),z.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[D.a,D.c,y.b,k.b,p.c,p.k,p.n,_.e,b.l,N.a,_.c,T.a,_.b,$.h],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),Je),Ke=((Qe=function(){function t(e){d(this,t),this.http=e,this.moduleUrl="mesa",this.srvcErrHndl=new He.a}return m(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Le.a.urlMantenimientos,"/").concat(this.moduleUrl,"/buscar?").concat($e.stringify(t))).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(t){return this.http.post("".concat(Le.a.urlMantenimientos,"/mesa/guardar").concat(t.mesa?"/"+t.mesa:""),t).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"getDisponibles",value:function(){return this.http.get("".concat(Le.a.urlMantenimientos,"/area/get_mesas_disponibles?")).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||Qe)(z.Xb(f.b))},Qe.\u0275prov=z.Jb({token:Qe,factory:Qe.\u0275fac,providedIn:"root"}),Qe),Ye=r("qMXL");function tn(t,e){if(1&t&&(z.Tb(0,"mat-option",12),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n.impresora),z.Cb(1),z.Fc(" ",n.nombre," ")}}function en(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-form-field",4),z.Tb(1,"mat-label"),z.Dc(2,"Impresora"),z.Sb(),z.Tb(3,"mat-select",10),z.bc("ngModelChange",function(t){return z.wc(n),z.fc().mesa.impresora=t}),z.Cc(4,tn,2,2,"mat-option",11),z.Sb(),z.Sb()}if(2&t){var a=z.fc();z.Cb(3),z.lc("ngModel",a.mesa.impresora),z.Cb(1),z.lc("ngForOf",a.impresoras)}}var nn,an,on=((nn=function(){function t(e,n,a,o,i){var r=this;d(this,t),this.mesaSrvc=e,this.impresoraSrvc=n,this.snackBar=a,this.dialogRef=o,this.data=i,this.impresoras=[],this.mesa={},this.loadImpresoras=function(){return r.impresoraSrvc.get().subscribe(function(t){return r.impresoras=t})},this.cancelar=function(){return r.dialogRef.close(!1)},this.guardarConfiguracion=function(){r.mesaSrvc.save(r.mesa).subscribe(function(t){t.exito?r.snackBar.open(t.mesa?"Mesa #".concat(t.mesa.numero," actualizada..."):"Mesa #".concat(r.mesa.numero," actualizada..."),"Configuraci\xf3n de mesa",{duration:3e3}):r.snackBar.open("ERROR:".concat(t.mensaje,"."),"Configuraci\xf3n de mesa",{duration:7e3}),r.dialogRef.close(!0)})}}return m(t,[{key:"ngOnInit",value:function(){this.mesa=this.data.mesa,this.loadImpresoras()}}]),t}()).\u0275fac=function(t){return new(t||nn)(z.Nb(Ke),z.Nb(Ye.a),z.Nb(R.a),z.Nb(U.f),z.Nb(U.a))},nn.\u0275cmp=z.Hb({type:nn,selectors:[["app-configura-mesa"]],decls:13,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate",""],["frmConfigMesa","ngForm"],[1,"fullWidth"],["type","text","matInput","","placeholder","Etiqueta","name","etiqueta","maxlength","3",3,"ngModel","ngModelChange"],["class","fullWidth",4,"ngIf"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],["name","impresora",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){if(1&t&&(z.Tb(0,"h1",0),z.Dc(1),z.Sb(),z.Tb(2,"div",1),z.Tb(3,"form",2,3),z.Tb(5,"mat-form-field",4),z.Tb(6,"input",5),z.bc("ngModelChange",function(t){return e.mesa.etiqueta=t}),z.Sb(),z.Sb(),z.Cc(7,en,5,2,"mat-form-field",6),z.Sb(),z.Sb(),z.Tb(8,"div",7),z.Tb(9,"button",8),z.bc("click",function(){return e.cancelar()}),z.Dc(10," Cancelar "),z.Sb(),z.Tb(11,"button",9),z.bc("click",function(){return e.guardarConfiguracion()}),z.Dc(12," Guardar "),z.Sb(),z.Sb()),2&t){var n=z.tc(4);z.Cb(1),z.Fc("Configuraci\xf3n de mesa ",e.mesa.numero,""),z.Cb(5),z.lc("ngModel",e.mesa.etiqueta),z.Cb(1),z.lc("ngIf",1==+e.mesa.esmostrador),z.Cb(4),z.lc("disabled",!n.form.valid)}},directives:[U.g,U.d,p.r,p.l,p.m,y.b,k.b,p.c,p.f,p.k,p.n,b.m,U.c,M.a,y.e,P.a,b.l,$.k],styles:[""]}),nn),rn=r("IJgu"),cn=r("znSr"),sn=["divMesa"],ln=function(t,e,n,a,o){return{disponible:t,ocupada:e,debaja:n,"call-center-ocupado":a,"call-center-disponible":o}},un=((an=function(){function t(e,n){var a=this;d(this,t),this.snackBar=e,this.mesaSrvc=n,this.configuracion={mesa:0,area:0,numero:0,posx:0,posy:0,tamanio:48,estatus:1,ancho:null,alto:null,esmostrador:0,vertical:0,etiqueta:null,escallcenter:0},this.dontAllowDrag=!0,this.isDisabled=!1,this.onClickMesa=new z.o,this.urlImage="/assets/img/mesas/",this.ngAfterViewInit=function(){return a.objMesa=a.divMesa.nativeElement},this.clickMesa=function(){return a.onClickMesa.emit({mesaSelected:a.configuracion})},this.getAncho=function(){return a.configuracion.ancho&&+a.configuracion.ancho>0?a.configuracion.ancho:a.configuracion.tamanio},this.getAlto=function(){return a.configuracion.alto&&+a.configuracion.alto>0?a.configuracion.alto:a.configuracion.tamanio},this.dragEnded=function(t){var e=t.source.element.nativeElement,n=e.offsetParent.scrollHeight,o=t.distance,i={mesa:a.configuracion.mesa,area:a.configuracion.area,numero:a.configuracion.numero,posx:Math.abs(100*(e.offsetLeft+o.x)/e.offsetParent.scrollWidth),posy:Math.abs(100*(e.offsetTop+o.y)/n),tamanio:a.configuracion.tamanio,estatus:a.configuracion.estatus};a.mesaSrvc.save(i).subscribe(function(t){t.exito?t.mesa?(a.configuracion.mesa=t.mesa.mesa,a.snackBar.open("Mesa #".concat(t.mesa.numero," actualizada..."),"Dise\xf1o de \xe1rea",{duration:3e3})):a.snackBar.open("Mesa #".concat(a.configuracion.numero," actualizada..."),"Dise\xf1o de \xe1rea",{duration:3e3}):a.snackBar.open("ERROR:".concat(t.mensaje,"."),"Dise\xf1o de \xe1rea",{duration:3e3})})},this.moviendo=function(t){}}return m(t,[{key:"ngOnInit",value:function(){this.urlImage+=0==+this.configuracion.esmostrador?"table_03.svg":0==+this.configuracion.escallcenter?0==+this.configuracion.vertical?"mostrador_horizontal.svg":"mostrador_vertical.svg":"callcenter.svg"}}]),t}()).\u0275fac=function(t){return new(t||an)(z.Nb(R.a),z.Nb(Ke))},an.\u0275cmp=z.Hb({type:an,selectors:[["app-mesa"]],viewQuery:function(t,e){var n;1&t&&z.Ic(sn,1),2&t&&z.sc(n=z.cc())&&(e.divMesa=n.first)},inputs:{configuracion:"configuracion",dontAllowDrag:"dontAllowDrag",isDisabled:"isDisabled"},outputs:{onClickMesa:"onClickMesa"},decls:4,vars:20,consts:[["cdkDrag","","cdkDragBoundary",".areaPosicionamiento",1,"divMesa","mat-elevation-z6",3,"cdkDragDisabled","ngClass","cdkDragEnded","cdkDragMoved","click"],["divMesa",""]],template:function(t,e){1&t&&(z.Tb(0,"div",0,1),z.bc("cdkDragEnded",function(t){return e.dragEnded(t)})("cdkDragMoved",function(t){return e.moviendo(t)})("click",function(){return e.clickMesa()}),z.Tb(2,"span"),z.Dc(3),z.Sb(),z.Sb()),2&t&&(z.zc("width",e.getAncho(),"px")("height",e.getAlto(),"px")("left",e.configuracion.posx,"%")("top",e.configuracion.posy,"%")("background-image","url("+e.urlImage+")"),z.lc("cdkDragDisabled",e.dontAllowDrag)("ngClass",z.rc(14,ln,1==+e.configuracion.estatus&&0==+e.configuracion.debaja,2==+e.configuracion.estatus&&0==+e.configuracion.debaja,1==+e.configuracion.debaja,2==+e.configuracion.estatus&&1==+e.configuracion.escallcenter,1==+e.configuracion.estatus&&1==+e.configuracion.escallcenter)),z.Db("disabled",!!e.isDisabled||null),z.Cb(3),z.Ec(e.configuracion.etiqueta||e.configuracion.numero))},directives:[ae,b.k,cn.a],styles:[".divMesa[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:50%;position:absolute;text-align:right;padding-top:0;background-size:90% 90%}span[_ngcontent-%COMP%]{font-size:12pt;font-weight:700;text-shadow:-1px 0 #fff,0 1px #fff,1px 0 #fff,0 -1px #fff}.disponible[_ngcontent-%COMP%]{background-color:#90ee90}.ocupada[_ngcontent-%COMP%]{background-color:#da332d}.debaja[_ngcontent-%COMP%]{background-color:#000}.call-center-ocupado[_ngcontent-%COMP%]{background-color:#da332d;background-image:url(/assets/img/mesas/callcenter_alt.svg)}.call-center-disponible[_ngcontent-%COMP%]{background-color:#90ee90;background-image:url(/assets/img/mesas/callcenter.svg)}"]}),an);function dn(t,e){if(1&t){var n=z.Ub();z.Tb(0,"app-mesa",11),z.bc("onClickMesa",function(t){return z.wc(n),z.fc().onClickMesa(t)})("contextmenu",function(t){z.wc(n);var a=e.$implicit;return z.fc().onContextMenu(t,a)}),z.Sb()}2&t&&z.lc("configuracion",e.$implicit)("dontAllowDrag",!1)}function bn(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",16),z.bc("click",function(){z.wc(n);var t=z.fc().item;return z.fc().configurarMesa(t)}),z.Tb(1,"mat-icon",3),z.Dc(2,"settings"),z.Sb(),z.Dc(3,"Configuracion "),z.Sb()}}function mn(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",17),z.bc("click",function(){z.wc(n);var t=z.fc().item;return z.fc().toggleDeBaja(t)}),z.Tb(1,"mat-icon",3),z.Dc(2,"thumb_down"),z.Sb(),z.Dc(3,"Dar de baja "),z.Sb()}if(2&t){var a=z.fc().item;z.lc("disabled",2==+a.estatus)}}function fn(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",18),z.bc("click",function(){z.wc(n);var t=z.fc().item;return z.fc().toggleDeBaja(t,0)}),z.Tb(1,"mat-icon",3),z.Dc(2,"thumb_up"),z.Sb(),z.Dc(3,"Habilitar "),z.Sb()}if(2&t){var a=z.fc().item;z.lc("disabled",2==+a.estatus)}}function pn(t,e){if(1&t&&(z.Tb(0,"span",12),z.Dc(1),z.Sb(),z.Ob(2,"mat-divider"),z.Cc(3,bn,4,0,"button",13),z.Cc(4,mn,4,1,"button",14),z.Cc(5,fn,4,1,"button",15)),2&t){var n=e.item;z.Cb(1),z.Gc("Mesa #",n.numero," (",n.mesa,")"),z.Cb(2),z.lc("ngIf",0==+n.debaja),z.Cb(1),z.lc("ngIf",0==+n.debaja),z.Cb(1),z.lc("ngIf",1==+n.debaja)}}var hn,gn=((hn=function(){function t(e,n,a,o,i){var r=this;d(this,t),this.snackBar=e,this.mesaSrvc=n,this.dialogRef=a,this.dialog=o,this.data=i,this.mesas=[],this.contextMenuPosition={x:"0px",y:"0px"},this.getNextTableNumber=function(){return r.mesas.length>0?r.mesas.reduce(function(t,e){return+e.numero>t?+e.numero:t},r.mesas[0].numero?+r.mesas[0].numero:0)+1:1},this.addTable=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:72,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:72,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;r.mesas.push({mesa:null,area:r.data.area,numero:r.getNextTableNumber(),posx:1,posy:1,tamanio:72,estatus:1,ancho:t,alto:e,esmostrador:n,vertical:a,escallcenter:o}),r.saveNewMesa(r.mesas[r.mesas.length-1],r.mesas.length-1)},this.addMostrador=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return r.addTable(t?72:144,t?144:72,1,t?1:0)},this.addCallCenter=function(){return r.addTable(72,72,1,0,1)},this.saveNewMesa=function(t,e){r.mesaSrvc.save(t).subscribe(function(t){t.exito?t.mesa&&(r.mesas[e]=t.mesa):r.snackBar.open("ERROR: ".concat(t.mensaje),"Mesa",{duration:7e3})})},this.onClickMesa=function(t){},this.terminar=function(){return r.dialogRef.close(r.mesas)},this.configurarMesa=function(t){r.dialog.open(on,{width:"50%",data:{mesa:t}}).afterClosed().subscribe(function(t){})},this.toggleDeBaja=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;r.dialog.open(rn.a,{maxWidth:"400px",data:new rn.b(0==+t.esmostrador?"Mesa":"Mostrador","\xbfSeguro que desea ".concat(1===e?"dar de baja":"habilitar"," ").concat(0==+t.esmostrador?"la mesa":"el mostrador"," #").concat(t.numero,"?"),"S\xed","No")}).afterClosed().subscribe(function(n){n&&(t.debaja=e,r.mesaSrvc.save(t).subscribe(function(t){if(t.exito){if(t.mesa){var e=r.mesas.findIndex(function(e){return+e.mesa==+t.mesa.mesa});e>-1&&(r.mesas[e]=t.mesa),r.snackBar.open(t.mensaje,"Mesa",{duration:3e3})}}else r.snackBar.open("ERROR: ".concat(t.mensaje),"Mesa",{duration:7e3})}))})}}return m(t,[{key:"ngOnInit",value:function(){this.mesas=this.data.mesas}},{key:"onContextMenu",value:function(t,e){t.preventDefault(),this.contextMenuPosition.x=t.clientX+"px",this.contextMenuPosition.y=t.clientY+"px",this.contextMenu.menuData={item:e},this.contextMenu.menu.focusFirstItem("mouse"),this.contextMenu.openMenu()}}]),t}()).\u0275fac=function(t){return new(t||hn)(z.Nb(R.a),z.Nb(Ke),z.Nb(U.f),z.Nb(U.b),z.Nb(U.a))},hn.\u0275cmp=z.Hb({type:hn,selectors:[["app-area-designer"]],viewQuery:function(t,e){var n;1&t&&z.Ic(F.e,1),2&t&&z.sc(n=z.cc())&&(e.contextMenu=n.first)},decls:27,vars:6,consts:[[1,"diseniador"],["align","center",2,"height","55px"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"click"],[1,"btnIconSize"],["mat-raised-button","","type","button","color","accent",3,"click"],[2,"height","5px","width","100%"],["id","divAreaPosicionamiento",1,"areaPosicionamiento"],[3,"configuracion","dontAllowDrag","onClickMesa","contextmenu",4,"ngFor","ngForOf"],[2,"visibility","hidden","position","fixed",3,"matMenuTriggerFor"],["contextMenu","matMenu"],["matMenuContent",""],[3,"configuracion","dontAllowDrag","onClickMesa","contextmenu"],["mat-menu-item","","disableRipple","true",1,"mesaTitle"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","","class","customize",3,"disabled","click",4,"ngIf"],["mat-menu-item","","class","customizeUp",3,"disabled","click",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-menu-item","",1,"customize",3,"disabled","click"],["mat-menu-item","",1,"customizeUp",3,"disabled","click"]],template:function(t,e){if(1&t&&(z.Tb(0,"div",0),z.Tb(1,"div",1),z.Tb(2,"button",2),z.bc("click",function(){return e.addTable()}),z.Tb(3,"mat-icon",3),z.Dc(4,"add"),z.Sb(),z.Dc(5,"\xa0Mesa "),z.Sb(),z.Tb(6,"button",2),z.bc("click",function(){return e.addMostrador()}),z.Tb(7,"mat-icon",3),z.Dc(8,"add"),z.Sb(),z.Dc(9,"\xa0Mostrador "),z.Sb(),z.Tb(10,"button",2),z.bc("click",function(){return e.addMostrador(!0)}),z.Tb(11,"mat-icon",3),z.Dc(12,"add"),z.Sb(),z.Dc(13,"\xa0Mostrador vertical "),z.Sb(),z.Tb(14,"button",2),z.bc("click",function(){return e.addCallCenter()}),z.Tb(15,"mat-icon",3),z.Dc(16,"add"),z.Sb(),z.Dc(17,"\xa0Call center "),z.Sb(),z.Tb(18,"button",4),z.bc("click",function(){return e.terminar()}),z.Dc(19," Terminar "),z.Sb(),z.Sb(),z.Ob(20,"div",5),z.Tb(21,"div",6),z.Cc(22,dn,1,2,"app-mesa",7),z.Sb(),z.Ob(23,"div",8),z.Tb(24,"mat-menu",null,9),z.Cc(26,pn,6,5,"ng-template",10),z.Sb(),z.Sb()),2&t){var n=z.tc(25);z.Cb(22),z.lc("ngForOf",e.mesas),z.Cb(1),z.zc("left",e.contextMenuPosition.x)("top",e.contextMenuPosition.y),z.lc("matMenuTriggerFor",n)}},directives:[M.a,T.a,b.l,F.e,F.a,F.b,un,F.c,w.a,b.m],styles:[".diseniador[_ngcontent-%COMP%]{width:750px;height:650px}.areaPosicionamiento[_ngcontent-%COMP%], .diseniador[_ngcontent-%COMP%]{overflow:hidden!important;padding:0!important}.areaPosicionamiento[_ngcontent-%COMP%]{width:100%;height:600px;background-color:hsla(0,0%,78%,.28627450980392155);position:relative}.btnIconSize[_ngcontent-%COMP%]{font-size:17pt!important}  .customize{background:#ffffe0}  .customizeUp{background:#90ee90}.mesaTitle[_ngcontent-%COMP%]{font-weight:700}"]}),hn);function vn(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-form-field",4),z.Tb(1,"input",13),z.bc("ngModelChange",function(t){return z.wc(n),z.fc().entidad.nombre=t}),z.Sb(),z.Sb()}if(2&t){var a=z.fc();z.Cb(1),z.lc("ngModel",a.entidad.nombre)}}function Cn(t,e){if(1&t&&(z.Tb(0,"mat-option",14),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n.area),z.Cb(1),z.Fc(" ",n.nombre," ")}}function Sn(t,e){if(1&t&&(z.Tb(0,"mat-option",14),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n.impresora),z.Cb(1),z.Fc(" ",n.nombre," ")}}function _n(t,e){if(1&t&&(z.Tb(0,"mat-option",14),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n.impresora),z.Cb(1),z.Fc(" ",n.nombre," ")}}function Tn(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",15),z.bc("click",function(){return z.wc(n),z.fc().openDesigner()}),z.Dc(1," Dise\xf1ar "),z.Sb()}}function yn(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",16),z.bc("click",function(){return z.wc(n),z.fc().resetEntidad()}),z.Dc(1," Nuevo "),z.Sb()}}var kn,Dn,wn=((kn=function(){function t(e,n,a,o,i){var r=this;d(this,t),this.snackBar=e,this.dialog=n,this.entidadSrvc=a,this.impresoraSrvc=o,this.ls=i,this.entidadSavedEv=new z.o,this.sedeUsr=0,this.lstAreas=[],this.esMovil=!1,this.impresoras=[],this.loadAreas=function(){return r.entidadSrvc.get({sede:r.sedeUsr,debaja:1}).subscribe(function(t){return r.lstAreas=t})},this.loadImpresoras=function(){return r.impresoraSrvc.get().subscribe(function(t){return r.impresoras=t})},this.resetEntidad=function(){return r.entidad={area:null,sede:r.sedeUsr,nombre:null,mesas:[],impresora_factura:null,impresora:null}},this.onSubmit=function(){r.entidadSrvc.save(r.entidad).subscribe(function(t){t.exito?(r.snackBar.open("".concat(t.mensaje),"\xc1rea",{duration:3e3}),r.resetEntidad(),r.loadAreas(),r.entidadSavedEv.emit()):r.snackBar.open("ERROR: ".concat(t.mensaje),"\xc1rea",{duration:3e3})})},this.openDesigner=function(){r.dialog.open(gn,{width:"800px",disableClose:!1,data:{area:+r.entidad.area,mesas:r.entidad.mesas||[]}}).afterClosed().subscribe(function(t){t&&(r.entidadSavedEv.emit(),r.entidadSrvc.get({area:+r.entidad.area,debaja:1}).subscribe(function(t){t&&t.length>0&&(r.entidad=t[0])}))})}}return m(t,[{key:"ngOnInit",value:function(){this.sedeUsr=this.ls.get(Le.a.usrTokenVar).sede||0,this.esMovil=this.ls.get(Le.a.usrTokenVar).enmovil||!1,this.resetEntidad(),this.loadAreas(),this.loadImpresoras()}}]),t}()).\u0275fac=function(t){return new(t||kn)(z.Nb(R.a),z.Nb(U.b),z.Nb(Ve),z.Nb(Ye.a),z.Nb(We.a))},kn.\u0275cmp=z.Hb({type:kn,selectors:[["app-form-area"]],inputs:{entidad:"entidad"},outputs:{entidadSavedEv:"entidadSavedEv"},decls:30,vars:11,consts:[[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmEntidad","ngForm"],["class","fullWidth",4,"ngIf"],[1,"fullWidth"],["name","area_padre",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","impresora","required","",3,"ngModel","ngModelChange"],["name","impresora_factura",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["type","text","matInput","","placeholder","Nombre","name","nombre","required","",3,"ngModel","ngModelChange"],[3,"value"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"click"],["mat-raised-button","","type","button","color","accent",3,"click"]],template:function(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-card",0),z.Tb(1,"mat-card-title"),z.Tb(2,"h4"),z.Dc(3,"\xc1rea"),z.Sb(),z.Sb(),z.Tb(4,"mat-card-content"),z.Tb(5,"form",1,2),z.bc("ngSubmit",function(){return z.wc(n),z.tc(6).form.valid&&e.onSubmit()}),z.Cc(7,vn,2,1,"mat-form-field",3),z.Tb(8,"mat-form-field",4),z.Tb(9,"mat-label"),z.Dc(10,"\xc1rea padre"),z.Sb(),z.Tb(11,"mat-select",5),z.bc("ngModelChange",function(t){return e.entidad.area_padre=t}),z.Cc(12,Cn,2,2,"mat-option",6),z.Sb(),z.Sb(),z.Tb(13,"mat-form-field",4),z.Tb(14,"mat-label"),z.Dc(15,"Impresora"),z.Sb(),z.Tb(16,"mat-select",7),z.bc("ngModelChange",function(t){return e.entidad.impresora=t}),z.Cc(17,Sn,2,2,"mat-option",6),z.Sb(),z.Sb(),z.Tb(18,"mat-form-field",4),z.Tb(19,"mat-label"),z.Dc(20,"Impresora de factura"),z.Sb(),z.Tb(21,"mat-select",8),z.bc("ngModelChange",function(t){return e.entidad.impresora_factura=t}),z.Cc(22,_n,2,2,"mat-option",6),z.Sb(),z.Sb(),z.Tb(23,"h5"),z.Dc(24),z.Sb(),z.Tb(25,"div",9),z.Tb(26,"button",10),z.Dc(27," Guardar "),z.Sb(),z.Cc(28,Tn,2,0,"button",11),z.Cc(29,yn,2,0,"button",12),z.Sb(),z.Sb(),z.Sb(),z.Sb()}if(2&t){var a=z.tc(6);z.Cb(7),z.lc("ngIf",e.esMovil),z.Cb(4),z.lc("ngModel",e.entidad.area_padre),z.Cb(1),z.lc("ngForOf",e.lstAreas),z.Cb(4),z.lc("ngModel",e.entidad.impresora),z.Cb(1),z.lc("ngForOf",e.impresoras),z.Cb(4),z.lc("ngModel",e.entidad.impresora_factura),z.Cb(1),z.lc("ngForOf",e.impresoras),z.Cb(2),z.Fc("Mesas en el \xe1rea: ",e.entidad.mesas.length,""),z.Cb(2),z.lc("disabled",!a.form.valid),z.Cb(2),z.lc("ngIf",e.entidad.area),z.Cb(1),z.lc("ngIf",e.entidad.area)}},directives:[D.a,D.h,D.c,p.r,p.l,p.m,b.m,y.b,y.e,P.a,p.k,p.n,b.l,p.p,M.a,k.b,p.c,$.k],styles:[".full-width[_ngcontent-%COMP%]{width:100%}"]}),kn),En=["listaAreas"],xn=((Dn=function(){function t(){var e=this;d(this,t),this.setArea=function(t){return e.area=t},this.refreshAreaList=function(){e.lstAreasComponent.loadEntidades()},this.area={area:null,sede:null,nombre:null,impresora:null,impresora_factura:null}}return m(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Dn)},Dn.\u0275cmp=z.Hb({type:Dn,selectors:[["app-area"]],viewQuery:function(t,e){var n;1&t&&z.Ic(En,1),2&t&&z.sc(n=z.cc())&&(e.lstAreasComponent=n.first)},decls:6,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getEntidadEv"],["listaAreas",""],[1,"col","m7","s12"],[3,"entidad","entidadSavedEv"]],template:function(t,e){1&t&&(z.Tb(0,"div",0),z.Tb(1,"div",1),z.Tb(2,"app-lista-area",2,3),z.bc("getEntidadEv",function(t){return e.setArea(t)}),z.Sb(),z.Sb(),z.Tb(4,"div",4),z.Tb(5,"app-form-area",5),z.bc("entidadSavedEv",function(){return e.refreshAreaList()}),z.Sb(),z.Sb(),z.Sb()),2&t&&(z.Cb(5),z.lc("entidad",e.area))},directives:[Ze,wn],styles:[""]}),Dn),Pn=r("u01r"),On=r("M8s9");function Mn(t,e){if(1&t){var n=z.Ub();z.Tb(0,"tr"),z.Tb(1,"td"),z.Dc(2),z.Sb(),z.Tb(3,"td",9),z.Tb(4,"button",10),z.bc("click",function(){z.wc(n);var t=e.$implicit;return z.fc(2).seleccionarCliente(t)}),z.Dc(5," Seleccionar "),z.Sb(),z.Sb(),z.Sb()}if(2&t){var a=e.$implicit;z.Cb(2),z.Ec(a.nombre)}}function Rn(t,e){if(1&t&&(z.Tb(0,"table"),z.Tb(1,"thead"),z.Tb(2,"tr"),z.Tb(3,"td"),z.Dc(4,"\xbfQui\xe9n est\xe1 llamando?"),z.Sb(),z.Ob(5,"td"),z.Sb(),z.Sb(),z.Tb(6,"tbody"),z.Cc(7,Mn,6,1,"tr",8),z.Sb(),z.Sb()),2&t){var n=z.fc();z.Cb(7),z.lc("ngForOf",n.clientes)}}var In,Fn=function(){return{standalone:!0}},An=((In=function(){function t(e,n,a,o,i){var r=this;d(this,t),this.dialogRef=e,this.snackBar=n,this.data=a,this.clienteSrvc=o,this.dialog=i,this.telefonoPedido=null,this.clientes=[],this.validateKey=function(t){var e=String.fromCharCode(t.keyCode);return!!/[0-9]/.test(e)||(t.preventDefault(),!1)},this.cancelar=function(){return r.dialogRef.close()},this.buscar=function(){r.telefonoPedido&&r.telefonoPedido.length>=8?r.clienteSrvc.get({telefono:r.telefonoPedido}).subscribe(function(t){t&&t.length>0?r.clientes=t:r.dialog.open(Pn.a,{width:"50%",disableClose:!0,data:{cliente:{cliente:null,nombre:null,nit:null,telefono:r.telefonoPedido}}}).afterClosed().subscribe(function(t){(null==t?void 0:t.cliente)&&r.dialogRef.close(t)})}):r.snackBar.open("Favor ingresar un n\xfamero de tel\xe9fono v\xe1lido.","Pedido",{duration:5e3})},this.seleccionarCliente=function(t){r.dialogRef.close(t)}}return m(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||In)(z.Nb(U.f),z.Nb(R.a),z.Nb(U.a),z.Nb(On.a),z.Nb(U.b))},In.\u0275cmp=z.Hb({type:In,selectors:[["app-pide-telefono-dialog"]],decls:11,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"fullWidth"],["matInput","","type","text","placeholder","Tel\xe9fono","minlength","8","maxlength","25","required","",3,"ngModel","ngModelOptions","keypress","ngModelChange"],[4,"ngIf"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[4,"ngFor","ngForOf"],["align","center",2,"width","15%"],["mat-raised-button","","type","button","color","accent",3,"click"]],template:function(t,e){1&t&&(z.Tb(0,"h1",0),z.Dc(1,"Tel\xe9fono"),z.Sb(),z.Tb(2,"div",1),z.Tb(3,"mat-form-field",2),z.Tb(4,"input",3),z.bc("keypress",function(t){return e.validateKey(t)})("ngModelChange",function(t){return e.telefonoPedido=t}),z.Sb(),z.Sb(),z.Cc(5,Rn,8,1,"table",4),z.Sb(),z.Tb(6,"div",5),z.Tb(7,"button",6),z.bc("click",function(){return e.cancelar()}),z.Dc(8," Cancelar "),z.Sb(),z.Tb(9,"button",7),z.bc("click",function(){return e.buscar()}),z.Dc(10," Buscar "),z.Sb(),z.Sb()),2&t&&(z.Cb(4),z.lc("ngModel",e.telefonoPedido)("ngModelOptions",z.nc(4,Fn)),z.Cb(1),z.lc("ngIf",e.clientes.length>0),z.Cb(4),z.lc("disabled",!(e.telefonoPedido&&e.telefonoPedido.length>=8)))},directives:[U.g,U.d,y.b,k.b,p.c,p.g,p.f,p.p,p.k,p.n,b.m,U.c,M.a,b.l],styles:[""]}),In);function Nn(t,e){1&t&&(z.Tb(0,"th",12),z.Dc(1,"No."),z.Sb())}function Un(t,e){if(1&t&&(z.Tb(0,"td",13),z.Tb(1,"span"),z.Dc(2),z.Sb(),z.Sb()),2&t){var n=e.$implicit;z.Cb(2),z.Ec(n.numero)}}function jn(t,e){1&t&&(z.Tb(0,"th",12),z.Dc(1,"Nombre"),z.Sb())}function Bn(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-form-field",15),z.Tb(1,"input",16),z.bc("ngModelChange",function(t){return z.wc(n),z.fc().$implicit.nombre=t}),z.Sb(),z.Tb(2,"button",17),z.bc("click",function(){z.wc(n);var t=z.fc().$implicit;return z.fc().eliminarFila(t)}),z.Tb(3,"mat-icon",18),z.Dc(4,"close"),z.Sb(),z.Sb(),z.Sb()}if(2&t){var a=z.fc().$implicit;z.Cb(1),z.lc("ngModel",a.nombre)}}function Ln(t,e){if(1&t&&(z.Tb(0,"td",13),z.Cc(1,Bn,5,1,"mat-form-field",14),z.Sb()),2&t){var n=z.fc();z.Cb(1),z.lc("ngIf",n.esMovil)}}function Hn(t,e){1&t&&z.Ob(0,"tr",19)}function zn(t,e){1&t&&z.Ob(0,"tr",20)}var qn,$n=((qn=function(){function t(e,n,a,o){var i=this;d(this,t),this.dialogRef=e,this.data=n,this.snackBar=a,this.ls=o,this.displayedColumns=["numero","nombre"],this.esMovil=!1,this.terminar=function(){var t=i.todosConNombre(i.data.cuentas);t<0?i.dialogRef.close(i.data.cuentas):i.snackBar.open("Favor ingresar nombre a la cuenta #".concat(i.data.cuentas[t].cuenta,"..."),"Cuentas",{duration:5e3})},this.setTableDataSource=function(){return i.dataSource=new x.k(i.data.cuentas)},this.eliminarFila=function(t){var e=i.data.cuentas.findIndex(function(e){return+e.numero==+t.numero});e>0?(i.data.cuentas.splice(e,1),i.data.cuentas.map(function(t,e){return t.numero=e+1}),i.dataSource.data=i.data.cuentas):console.log("No se encuentra esta cuenta...")}}return m(t,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(Le.a.usrTokenVar).enmovil||!1,this.setTableDataSource();for(var t=0;t<+this.data.comensales-1;t++)this.agregarFila()}},{key:"todosConNombre",value:function(t){for(var e=0;e<t.length;e++)if(!t[e].nombre)return e;return-1}},{key:"agregarFila",value:function(){this.data.cuentas.push({cuenta:0,numero:this.data.cuentas.length+1,nombre:null,productos:[]}),this.dataSource.data=this.data.cuentas}}]),t}()).\u0275fac=function(t){return new(t||qn)(z.Nb(U.f),z.Nb(U.a),z.Nb(R.a),z.Nb(We.a))},qn.\u0275cmp=z.Hb({type:qn,selectors:[["app-pide-datos-cuentas"]],decls:18,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-table","",1,"fullWidth",3,"dataSource"],["tblCuentas",""],["matColumnDef","numero"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-header-cell",""],["mat-cell",""],["class","fullWidth",4,"ngIf"],[1,"fullWidth"],["type","text","matInput","","name","nombre","required","",3,"ngModel","ngModelChange"],["type","button","mat-button","","matSuffix","","mat-icon-button","",3,"click"],[1,"iconFontSize"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(z.Tb(0,"h1",0),z.Dc(1,"Ingreso de datos de cuentas"),z.Sb(),z.Tb(2,"div",1),z.Tb(3,"table",2,3),z.Rb(5,4),z.Cc(6,Nn,2,0,"th",5),z.Cc(7,Un,3,1,"td",6),z.Qb(),z.Rb(8,7),z.Cc(9,jn,2,0,"th",5),z.Cc(10,Ln,2,1,"td",6),z.Qb(),z.Cc(11,Hn,1,0,"tr",8),z.Cc(12,zn,1,0,"tr",9),z.Sb(),z.Sb(),z.Tb(13,"div",10),z.Tb(14,"button",11),z.bc("click",function(){return e.agregarFila()}),z.Dc(15," Agregar "),z.Sb(),z.Tb(16,"button",11),z.bc("click",function(){return e.terminar()}),z.Dc(17," Terminar "),z.Sb(),z.Sb()),2&t&&(z.Cb(3),z.lc("dataSource",e.dataSource),z.Cb(8),z.lc("matHeaderRowDef",e.displayedColumns),z.Cb(1),z.lc("matRowDefColumns",e.displayedColumns),z.Cb(2),z.lc("disabled",e.data.cuentas.length===+e.data.comensales),z.Cb(2),z.lc("disabled",e.data.cuentas.length!==+e.data.comensales))},directives:[U.g,U.d,x.j,x.c,x.e,x.b,x.g,x.i,U.c,M.a,x.d,x.a,b.m,y.b,k.b,p.c,p.p,p.k,p.n,y.f,T.a,x.f,x.h],styles:[".fullWidth[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:34pt!important}"]}),qn),Vn=r("K9lQ");function Wn(t,e){if(1&t&&(z.Tb(0,"mat-option",12),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n.usuario.usuario),z.Cb(1),z.Gc(" ",n.usuario.nombres," ",n.usuario.apellidos," ")}}function Gn(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-form-field",3),z.Tb(1,"input",13),z.bc("ngModelChange",function(t){return z.wc(n),z.fc().data.comensales=t}),z.Sb(),z.Sb()}if(2&t){var a=z.fc();z.Cb(1),z.lc("ngModel",a.data.comensales)}}var Qn,Jn,Xn=((Jn=function(){function t(e,n,a,o,i){var r=this;d(this,t),this.dialogRef=e,this.data=n,this.dialogDatosCuentas=a,this.usuarioSrvc=o,this.ls=i,this.lstMeseros=[],this.esMovil=!1,this.loadMeseros=function(){r.usuarioSrvc.getMeserosTurno().subscribe(function(t){t&&(r.lstMeseros=t)})},this.toNumber=function(t){return+t}}return m(t,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(Le.a.usrTokenVar).enmovil||!1,this.loadMeseros()}},{key:"pedirDatosDeCuentas",value:function(t){var e=this;this.dialogDatosCuentas.open($n,{width:"50%",disableClose:!0,data:{cuentas:t.cuentas,comensales:this.data.comensales}}).afterClosed().subscribe(function(n){t.cuentas=n,e.dialogRef.close(t)})}},{key:"terminar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?t.dividirCuentasPorSillas?this.pedirDatosDeCuentas(t):this.dialogRef.close(t):this.dialogRef.close()}}]),t}()).\u0275fac=function(t){return new(t||Jn)(z.Nb(U.f),z.Nb(U.a),z.Nb(U.b),z.Nb(Vn.a),z.Nb(We.a))},Jn.\u0275cmp=z.Hb({type:Jn,selectors:[["app-abrir-mesa"]],decls:20,vars:7,consts:[["mat-dialog-title",""],["novalidate","",3,"ngSubmit"],["frmAbrirMesa","ngForm"],[1,"separatorMargin"],["name","mesero",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","separatorMargin",4,"ngIf"],["name","esEvento",1,"separatorMargin",3,"ngModel","ngModelChange"],["name","dividirCuentasPorSillas",1,"separatorMargin",3,"ngModel","disabled","ngModelChange"],["align","end"],["mat-raised-button","","color","secondary",1,"btnAccion",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],[3,"value"],["type","text","matInput","","placeholder","# Comensales","name","comensales","required","",3,"ngModel","ngModelChange"]],template:function(t,e){if(1&t){var n=z.Ub();z.Tb(0,"h1",0),z.Dc(1,"Abrir mesa"),z.Sb(),z.Tb(2,"mat-dialog-content"),z.Tb(3,"form",1,2),z.bc("ngSubmit",function(){return z.wc(n),z.tc(4).form.valid}),z.Tb(5,"mat-form-field",3),z.Tb(6,"mat-label"),z.Dc(7,"Mesero"),z.Sb(),z.Tb(8,"mat-select",4),z.bc("ngModelChange",function(t){return e.data.mesero=t}),z.Cc(9,Wn,2,3,"mat-option",5),z.Sb(),z.Sb(),z.Cc(10,Gn,2,1,"mat-form-field",6),z.Tb(11,"mat-checkbox",7),z.bc("ngModelChange",function(t){return+(e.data.esEvento=t)}),z.Dc(12,"\xbfEs evento?"),z.Sb(),z.Tb(13,"mat-checkbox",8),z.bc("ngModelChange",function(t){return+(e.data.dividirCuentasPorSillas=t)}),z.Dc(14,"\xbfDividir cuentas?"),z.Sb(),z.Sb(),z.Sb(),z.Tb(15,"mat-dialog-actions",9),z.Tb(16,"button",10),z.bc("click",function(){return e.terminar()}),z.Dc(17," Cancelar "),z.Sb(),z.Tb(18,"button",11),z.bc("click",function(){return e.terminar(e.data)}),z.Dc(19," Abrir mesa "),z.Sb(),z.Sb()}if(2&t){var a=z.tc(4);z.Cb(8),z.lc("ngModel",e.data.mesero),z.Cb(1),z.lc("ngForOf",e.lstMeseros),z.Cb(1),z.lc("ngIf",e.esMovil),z.Cb(1),z.lc("ngModel",+e.data.esEvento),z.Cb(2),z.lc("ngModel",+e.data.dividirCuentasPorSillas)("disabled",+e.data.comensales<=1),z.Cb(5),z.lc("disabled",!a.form.valid)}},directives:[U.g,U.d,p.r,p.l,p.m,y.b,y.e,P.a,p.k,p.n,b.l,b.m,O.a,U.c,M.a,$.k,k.b,p.c,p.p],styles:[".contenido[_ngcontent-%COMP%]{height:50%!important}.separatorMargin[_ngcontent-%COMP%]{margin-right:8px}"]}),Jn),Zn=((Qn=function(){function t(e){d(this,t),this.http=e,this.moduleUrl="comanda",this.srvcErrHndl=new He.a}return m(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/buscar?").concat($e.stringify(t))).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"getComandaDeMesa",value:function(t){return this.http.get("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/get_comanda/").concat(t)).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(t){return this.http.post("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/guardar").concat(t.comanda?"/"+t.comanda:""),t).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"enviarPedido",value:function(t,e){return this.http.post("".concat(Le.a.urlAppRestaurante,"/callcenter/guardar_pedido/").concat(t),e).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"saveDetalleCombo",value:function(t,e,n){return this.http.post("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/guardar_detalle_combo/").concat(t,"/").concat(e),n).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"saveNotasGenerales",value:function(t){return this.http.post("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/guardar_notas_generales/").concat(t.comanda),t).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"saveNotasProducto",value:function(t){return this.http.post("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/guardar_notas_producto/").concat(t.detalle_comanda),t).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"saveDetalle",value:function(t,e,n){return this.http.post("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/guardar_detalle/").concat(t,"/").concat(e),n).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"setProductoImpreso",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.http.get("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/imprimir/").concat(t)).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"cerrarMesa",value:function(t){return this.http.post("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/cerrar_mesa/").concat(t),null).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"getComandasOnLIne",value:function(){return this.http.get("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/get_comanda")).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"validaPwdGerenteTurno",value:function(t){return this.http.post("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/validapwdgerenteturno"),{pwd:t}).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"cerrarEstacion",value:function(t){return this.http.get("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/cerrar_estacion/").concat(t)).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"getCuenta",value:function(t){return this.http.get("".concat(Le.a.urlAppRestaurante,"/cuenta/get_cuenta/").concat(t)).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"unificarCuentas",value:function(t,e){return this.http.get("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/unir_cuentas/").concat(t,"/").concat(e)).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"trasladarMesa",value:function(t,e,n){return this.http.get("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/trasladar_mesa/").concat(t,"/").concat(e,"/").concat(n)).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"getComandasCocina",value:function(){return this.http.get("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/get_comanda_cocina")).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"setComandaCocinada",value:function(t,e){return this.http.post("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/set_cocinado/").concat(t),e).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"distribuirCuentas",value:function(t){return this.http.post("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/distribuir_cuentas"),t).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"cancelarPedido",value:function(t,e){return this.http.post("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/anular_pedido/").concat(t),e).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"getComandasOnLine_Test",value:function(){return[{comanda:37,total:8,usuario:6,sede:1,estatus:1,turno:2,mesa:{mesa:1,area:{area:1,sede:1,area_padre:null,nombre:"Bar"},numero:1,posx:23.8667,posy:18.8333,tamanio:72,estatus:2},cuentas:[{cuenta:31,comanda:37,nombre:"\xdanica",numero:1,propina_monto:.8,propina_porcentaje:10,cerrada:1,productos:[{detalle_cuenta:75,cuenta_cuenta:31,detalle_comanda:79,comanda:37,articulo:{articulo:1,categoria_grupo:21,presentacion:null,descripcion:"Original",precio:8,bien_servicio:"B",existencias:969,impresora:{impresora:1,sede:1,nombre:"EPSON L120 Series",direccion_ip:null,ubicacion:null,bluetooth:0}},cantidad:1,precio:8,impreso:1,total:8,notas:"",numero_cuenta:1}]}]},{comanda:45,total:76,usuario:2,sede:1,estatus:1,turno:2,mesa:{mesa:3,area:{area:1,sede:1,area_padre:null,nombre:"Bar"},numero:3,posx:11.0667,posy:41.5,tamanio:72,estatus:2},cuentas:[{cuenta:39,comanda:45,nombre:"uno",numero:1,propina_monto:.8,propina_porcentaje:10,cerrada:1,productos:[{detalle_cuenta:84,cuenta_cuenta:39,detalle_comanda:88,comanda:45,articulo:{articulo:1,categoria_grupo:21,presentacion:null,descripcion:"Original",precio:8,bien_servicio:"B",existencias:969,impresora:{impresora:1,sede:1,nombre:"EPSON L120 Series",direccion_ip:null,ubicacion:null,bluetooth:0}},cantidad:1,precio:8,impreso:1,total:8,notas:"",numero_cuenta:1},{detalle_cuenta:85,cuenta_cuenta:40,detalle_comanda:89,comanda:45,articulo:{articulo:2,categoria_grupo:21,presentacion:null,descripcion:"Zero",precio:8,bien_servicio:"B",existencias:984,impresora:{impresora:1,sede:1,nombre:"EPSON L120 Series",direccion_ip:null,ubicacion:null,bluetooth:0}},cantidad:1,precio:8,impreso:1,total:8,notas:"",numero_cuenta:1},{detalle_cuenta:86,cuenta_cuenta:40,detalle_comanda:90,comanda:45,articulo:{articulo:6,categoria_grupo:23,presentacion:null,descripcion:"Fettuccine",precio:60,bien_servicio:"B",existencias:995,impresora:{impresora:2,sede:1,nombre:"EPSON L120 Series",direccion_ip:null,ubicacion:null,bluetooth:0}},cantidad:1,precio:60,impreso:1,total:60,notas:"",numero_cuenta:1}]}]}]}}]),t}()).\u0275fac=function(t){return new(t||Qn)(z.Xb(f.b))},Qn.\u0275prov=z.Jb({token:Qn,factory:Qn.\u0275fac,providedIn:"root"}),Qn);function Kn(t,e){if(1&t&&(z.Tb(0,"mat-option",10),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n)("disabled",1==+n.cerrada),z.Cb(1),z.Fc(" ",n.nombre," ")}}function Yn(t,e){if(1&t&&(z.Tb(0,"mat-option",10),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n)("disabled",1==+n.cerrada),z.Cb(1),z.Fc(" ",n.nombre," ")}}var ta,ea=((ta=function(){function t(e,n,a,o){d(this,t),this.dialogRef=e,this.comandaSrvc=n,this.snackBar=a,this.data=o}return m(t,[{key:"ngOnInit",value:function(){}},{key:"cancelar",value:function(){this.dialogRef.close(!1)}},{key:"unirCuentas",value:function(t,e){var n=this;this.comandaSrvc.unificarCuentas(t.cuenta,e.cuenta).subscribe(function(t){t.exito?(n.snackBar.open(t.mensaje,"Cuentas",{duration:3e3}),n.dialogRef.close(!0)):n.snackBar.open("ERROR:".concat(t.mensaje),"Cuentas",{duration:7e3})})}},{key:"unirTodas",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||ta)(z.Nb(U.f),z.Nb(Zn),z.Nb(R.a),z.Nb(U.a))},ta.\u0275cmp=z.Hb({type:ta,selectors:[["app-unir-cuenta"]],decls:20,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate",""],["frmUnirCuenta","ngForm"],["name","cuentaDe","required","",3,"ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],["name","cuentaA","required","",3,"ngModel","ngModelChange"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[3,"value","disabled"]],template:function(t,e){if(1&t&&(z.Tb(0,"h1",0),z.Dc(1,"Unir cuentas"),z.Sb(),z.Tb(2,"div",1),z.Tb(3,"form",2,3),z.Tb(5,"mat-form-field"),z.Tb(6,"mat-label"),z.Dc(7,"Unir cuenta de"),z.Sb(),z.Tb(8,"mat-select",4),z.bc("ngModelChange",function(t){return e.cuentaDe=t}),z.Cc(9,Kn,2,3,"mat-option",5),z.Sb(),z.Sb(),z.Tb(10,"mat-form-field"),z.Tb(11,"mat-label"),z.Dc(12,"con la cuenta de"),z.Sb(),z.Tb(13,"mat-select",6),z.bc("ngModelChange",function(t){return e.cuentaA=t}),z.Cc(14,Yn,2,3,"mat-option",5),z.Sb(),z.Sb(),z.Sb(),z.Sb(),z.Tb(15,"div",7),z.Tb(16,"button",8),z.bc("click",function(){return e.cancelar()}),z.Dc(17," Cancelar "),z.Sb(),z.Tb(18,"button",9),z.bc("click",function(){return e.unirCuentas(e.cuentaDe,e.cuentaA)}),z.Dc(19," Unir cuentas "),z.Sb(),z.Sb()),2&t){var n=z.tc(4);z.Cb(8),z.lc("ngModel",e.cuentaDe),z.Cb(1),z.lc("ngForOf",e.data.mesaEnUso.cuentas),z.Cb(4),z.lc("ngModel",e.cuentaA),z.Cb(1),z.lc("ngForOf",e.data.mesaEnUso.cuentas),z.Cb(4),z.lc("disabled",!n.form.valid||+e.cuentaDe.numero==+e.cuentaA.numero)}},directives:[U.g,U.d,p.r,p.l,p.m,y.b,y.e,P.a,p.p,p.k,p.n,b.l,U.c,M.a,$.k],styles:[""]}),ta);function na(t,e){if(1&t&&(z.Tb(0,"mat-option",10),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n),z.Cb(1),z.Gc(" ",n.area.nombre," - ",n.etiqueta||n.numero," ")}}var aa,oa,ia,ra=((aa=function(){function t(e,n,a,o,i){var r=this;d(this,t),this.dialogRef=e,this.snackBar=n,this.mesaSrvc=a,this.comandaSrvc=o,this.data=i,this.mesasDisponibles=[],this.loadMesasDisponibles=function(){return r.mesaSrvc.getDisponibles().subscribe(function(t){return r.mesasDisponibles=t})},this.cancelar=function(){return r.dialogRef.close(!1)},this.trasladar=function(){r.comandaSrvc.trasladarMesa(+r.data.mesaEnUso.comanda,+r.data.mesaEnUso.mesa.mesa,+r.destino.mesa).subscribe(function(t){t.exito?(r.snackBar.open(t.mensaje,"Traslado de mesa",{duration:3e3}),r.dialogRef.close(!0)):r.snackBar.open("ERROR:".concat(t.mensaje),"Traslado de mesa",{duration:7e3})})}}return m(t,[{key:"ngOnInit",value:function(){this.loadMesasDisponibles()}}]),t}()).\u0275fac=function(t){return new(t||aa)(z.Nb(U.f),z.Nb(R.a),z.Nb(Ke),z.Nb(Zn),z.Nb(U.a))},aa.\u0275cmp=z.Hb({type:aa,selectors:[["app-traslado-mesa"]],decls:15,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate",""],["frmTrasladarMesa","ngForm"],[1,"fullWidth"],["name","destino","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[3,"value"]],template:function(t,e){if(1&t&&(z.Tb(0,"h1",0),z.Dc(1,"Trasladar a otra mesa"),z.Sb(),z.Tb(2,"div",1),z.Tb(3,"form",2,3),z.Tb(5,"mat-form-field",4),z.Tb(6,"mat-label"),z.Dc(7,"Trasladar a mesa:"),z.Sb(),z.Tb(8,"mat-select",5),z.bc("ngModelChange",function(t){return e.destino=t}),z.Cc(9,na,2,3,"mat-option",6),z.Sb(),z.Sb(),z.Sb(),z.Sb(),z.Tb(10,"div",7),z.Tb(11,"button",8),z.bc("click",function(){return e.cancelar()}),z.Dc(12," Cancelar "),z.Sb(),z.Tb(13,"button",9),z.bc("click",function(){return e.trasladar()}),z.Dc(14," Trasladar "),z.Sb(),z.Sb()),2&t){var n=z.tc(4);z.Cb(8),z.lc("ngModel",e.destino),z.Cb(1),z.lc("ngForOf",e.mesasDisponibles),z.Cb(4),z.lc("disabled",!n.form.valid)}},directives:[U.g,U.d,p.r,p.l,p.m,y.b,y.e,P.a,p.p,p.k,p.n,b.l,U.c,M.a,$.k],styles:[""]}),aa),ca=r("wd/R"),sa=function t(e,n,a){d(this,t),this.tipo=e,this.subtitulo=n,this.etiquetaAceptar=a},la=((oa=function(){function t(e,n,a){var o=this;d(this,t),this.comandaSrvc=e,this.dialogRef=n,this.data=a,this.pwd=void 0,this.cancelar=function(){return o.dialogRef.close()},this.terminar=function(){switch(+o.data.tipo){case 1:o.validarPwdGerenteTurno()}},this.validarPwdGerenteTurno=function(){o.comandaSrvc.validaPwdGerenteTurno(o.pwd).subscribe(function(t){o.dialogRef.close(!!t.exito&&t.esgerente)})}}return m(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||oa)(z.Nb(Zn),z.Nb(U.f),z.Nb(U.a))},oa.\u0275cmp=z.Hb({type:oa,selectors:[["app-check-password"]],decls:14,vars:4,consts:[["mat-dialog-title",""],["novalidate","",3,"ngSubmit"],["frmValidaPwd","ngForm"],[1,"fullWidth"],["type","password","matInput","","placeholder","Contrase\xf1a","name","pwd","required","",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","color","secondary",1,"btnAccion",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"]],template:function(t,e){if(1&t){var n=z.Ub();z.Tb(0,"h1",0),z.Dc(1," Validar contrase\xf1a"),z.Ob(2,"br"),z.Dc(3),z.Sb(),z.Tb(4,"mat-dialog-content"),z.Tb(5,"form",1,2),z.bc("ngSubmit",function(){return z.wc(n),z.tc(6).form.valid}),z.Tb(7,"mat-form-field",3),z.Tb(8,"input",4),z.bc("ngModelChange",function(t){return e.pwd=t}),z.Sb(),z.Sb(),z.Sb(),z.Sb(),z.Tb(9,"mat-dialog-actions",5),z.Tb(10,"button",6),z.bc("click",function(){return e.cancelar()}),z.Dc(11," Cancelar "),z.Sb(),z.Tb(12,"button",7),z.bc("click",function(){return e.terminar()}),z.Dc(13),z.Sb(),z.Sb()}if(2&t){var a=z.tc(6);z.Cb(3),z.Fc(" ",e.data.subtitulo||"Gerente de turno","\n"),z.Cb(5),z.lc("ngModel",e.pwd),z.Cb(4),z.lc("disabled",!a.form.valid),z.Cb(1),z.Fc(" ",e.data.etiquetaAceptar||"Validar"," ")}},directives:[U.g,U.d,p.r,p.l,p.m,y.b,k.b,p.c,p.p,p.k,p.n,U.c,M.a],styles:[""]}),oa),ua=r("KZK3"),da=((ia=function(){function t(e){d(this,t),this.http=e,this.moduleUrl="cuenta",this.srvcErrHndl=new He.a}return m(t,[{key:"save",value:function(t){return this.http.post("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/cobrar/").concat(t.cuenta),t).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||ia)(z.Xb(f.b))},ia.\u0275prov=z.Jb({token:ia,factory:ia.\u0275fac,providedIn:"root"}),ia),ba=r("KFbY"),ma=r("7JkF"),fa=r("IHy4"),pa=r("FjVI"),ha=r("TOq3");function ga(t,e){if(1&t&&(z.Tb(0,"small"),z.Dc(1),z.Sb()),2&t){var n=z.fc();z.Cb(1),z.Fc(" - Factura a nombre de ",n.clienteSelected.nombre," ")}}function va(t,e){if(1&t&&(z.Tb(0,"tr"),z.Tb(1,"td"),z.Dc(2),z.Sb(),z.Tb(3,"td",21),z.Dc(4),z.gc(5,"number"),z.Sb(),z.Sb()),2&t){var n=e.$implicit;z.Cb(2),z.Gc("",n.cantidad,"\xa0",n.nombre||n.articulo.descripcion,""),z.Cb(2),z.Ec(z.ic(5,3,n.cantidad*n.precio+n.monto_extra,"1.2-2"))}}function Ca(t,e){if(1&t&&(z.Tb(0,"mat-option",34),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n.forma_pago),z.Cb(1),z.Fc(" ",n.descripcion," ")}}function Sa(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-form-field",13),z.Tb(1,"input",35),z.bc("ngModelChange",function(t){return z.wc(n),z.fc().formaPago.monto=t}),z.Sb(),z.Sb()}if(2&t){var a=z.fc();z.Cb(1),z.lc("ngModel",a.formaPago.monto)}}function _a(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-form-field",13),z.Tb(1,"input",36),z.bc("ngModelChange",function(t){return z.wc(n),z.fc().formaPago.propina=t}),z.Sb(),z.Sb()}if(2&t){var a=z.fc();z.Cb(1),z.lc("ngModel",a.formaPago.propina)}}function Ta(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-form-field",13),z.Tb(1,"input",37),z.bc("ngModelChange",function(t){return z.wc(n),z.fc().formaPago.documento=t}),z.Sb(),z.Sb()}if(2&t){var a=z.fc();z.Cb(1),z.lc("ngModel",a.formaPago.documento)("required",a.pideDocumento)}}function ya(t,e){if(1&t){var n=z.Ub();z.Tb(0,"tr"),z.Tb(1,"td"),z.Dc(2),z.Sb(),z.Tb(3,"td",21),z.Dc(4),z.gc(5,"number"),z.Sb(),z.Tb(6,"td",21),z.Dc(7),z.gc(8,"number"),z.Sb(),z.Tb(9,"td",38),z.Tb(10,"button",39),z.bc("click",function(){z.wc(n);var t=e.index;return z.fc().delFormaPago(t)}),z.Tb(11,"mat-icon"),z.Dc(12,"delete_forever"),z.Sb(),z.Sb(),z.Sb(),z.Sb()}if(2&t){var a=e.$implicit;z.Cb(2),z.Ec(a.forma_pago.descripcion),z.Cb(2),z.Ec(z.ic(5,3,a.monto,"1.2-2")),z.Cb(3),z.Ec(z.ic(8,6,a.propina,"1.2-2"))}}function ka(t,e){if(1&t&&(z.Tb(0,"mat-option",34),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n.sede),z.Cb(1),z.Fc(" ",n.nombre," ")}}function Da(t,e){if(1&t){var n=z.Ub();z.Tb(0,"table",25),z.Tb(1,"caption"),z.Tb(2,"strong"),z.Dc(3,"Datos de env\xedo"),z.Sb(),z.Sb(),z.Tb(4,"tbody"),z.Tb(5,"tr"),z.Tb(6,"td"),z.Tb(7,"mat-form-field",13),z.Tb(8,"mat-label"),z.Dc(9,"Atiende:"),z.Sb(),z.Tb(10,"mat-select",40),z.bc("ngModelChange",function(t){return z.wc(n),z.fc().datosPedido.sede=t}),z.Cc(11,ka,2,2,"mat-option",15),z.Sb(),z.Sb(),z.Sb(),z.Tb(12,"td"),z.Tb(13,"mat-form-field",13),z.Tb(14,"input",41),z.bc("ngModelChange",function(t){return z.wc(n),z.fc().datosPedido.direccion_entrega=t}),z.Sb(),z.Sb(),z.Sb(),z.Sb(),z.Tb(15,"tr"),z.Tb(16,"td"),z.Tb(17,"mat-form-field",13),z.Tb(18,"input",42),z.bc("ngModelChange",function(t){return z.wc(n),z.fc().datosPedido.nombre=t}),z.Sb(),z.Sb(),z.Sb(),z.Tb(19,"td"),z.Tb(20,"mat-form-field",13),z.Tb(21,"input",43),z.bc("ngModelChange",function(t){return z.wc(n),z.fc().datosPedido.telefono=t}),z.Sb(),z.Sb(),z.Sb(),z.Sb(),z.Sb(),z.Sb()}if(2&t){var a=z.fc();z.Cb(10),z.lc("ngModel",a.datosPedido.sede),z.Cb(1),z.lc("ngForOf",a.sedes),z.Cb(3),z.lc("ngModel",a.datosPedido.direccion_entrega),z.Cb(4),z.lc("ngModel",a.datosPedido.nombre),z.Cb(3),z.lc("ngModel",a.datosPedido.telefono)}}function wa(t,e){if(1&t&&z.Ob(0,"app-cargando",44),2&t){var n=z.fc();z.lc("configuracion",n.cargandoConf)}}function Ea(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",32),z.bc("click",function(){return z.wc(n),z.fc().cobrar()}),z.Dc(1,"Facturar"),z.Sb()}if(2&t){var a=z.fc();z.lc("disabled",0==a.formasPagoDeCuenta.length||+a.inputData.saldo>0||!a.factReq.cliente||a.facturando)}}function xa(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",32),z.bc("click",function(){return z.wc(n),z.fc().cobrar()}),z.Dc(1," Enviar "),z.Sb()}if(2&t){var a=z.fc();z.lc("disabled",0==a.formasPagoDeCuenta.length||+a.inputData.saldo>0||!a.factReq.cliente||a.facturando||!a.datosPedido.sede)}}var Pa,Oa=function(t,e,n){return{"saldo-pendiente":t,"saldo-exacto":e,"saldo-extra":n}},Ma=((Pa=function(){function e(n,a,o,i,r,c,s,l,u,b,m){var f=this;d(this,e),this.dialog=n,this.dialogRef=a,this.data=o,this.snackBar=i,this.formaPagoSrvc=r,this.cobroSrvc=c,this.facturaSrvc=s,this.ls=l,this.socket=u,this.sedeSrvc=b,this.comandaSrvc=m,this.inputData={},this.lstFormasPago=[],this.formaPago={},this.formasPagoDeCuenta=[],this.esMovil=!1,this.facturando=!1,this.cargandoConf={w:75,h:75},this.pideDocumento=!1,this.sedes=[],this.datosPedido={sede:null,direccion_entrega:null,telefono:null,nombre:null,cliente:null},this.resetFactReq=function(){f.factReq={cuentas:[],factura_serie:1,cliente:null,fecha_factura:ca().format(Le.a.dbDateFormat),moneda:1}},this.processData=function(){f.data?f.inputData=f.data:f.data=f.inputData,f.inputData.totalDeCuenta=0,f.inputData.productosACobrar.forEach(function(t){f.inputData.totalDeCuenta+=t.precio*t.cantidad+t.monto_extra}),f.calculaPropina(),f.actualizaSaldo(),f.formaPago.monto=parseFloat(f.inputData.saldo).toFixed(2),f.inputData.clientePedido&&f.setClienteFacturar(f.inputData.clientePedido)},this.loadSedes=function(){f.sedeSrvc.get().subscribe(function(t){t&&(f.sedes=t)})},this.calculaPropina=function(){f.inputData.montoPropina=parseFloat((f.inputData.porcentajePropina*f.inputData.totalDeCuenta/100).toFixed(2)),f.actualizaSaldo()},this.loadFormasPago=function(){f.formaPagoSrvc.get({activo:1}).subscribe(function(t){t&&t.length>0&&(f.lstFormasPago=t)})},this.addFormaPago=function(){var t=f.lstFormasPago.filter(function(t){return+t.forma_pago==+f.formaPago.forma_pago})[0];1==+t.pedirautorizacion?f.dialog.open(la,{width:"40%",disableClose:!0,data:new sa(1)}).afterClosed().subscribe(function(e){e?f.agregaFormaPago(t):f.snackBar.open("La contrase\xf1a no es correcta","Formas de pago",{duration:5e3})}):f.agregaFormaPago(t)},this.agregaFormaPago=function(t){f.formasPagoDeCuenta.push({forma_pago:t,monto:parseFloat(f.formaPago.monto).toFixed(2),propina:f.formaPago.propina||0,documento:f.formaPago.documento||null,comision_monto:+f.formaPago.monto*+t.comision_porcentaje/100}),f.actualizaSaldo(),f.pideDocumento=!1},this.delFormaPago=function(t){f.formasPagoDeCuenta.splice(t,1),f.actualizaSaldo()},this.actualizaSaldo=function(){var t=0;f.formasPagoDeCuenta.forEach(function(e){return t+=+e.monto}),f.inputData.saldo=(+f.inputData.totalDeCuenta-t).toFixed(2),f.formaPago={monto:f.inputData.saldo}},this.cancelar=function(){return f.dialogRef.close()},this.setClienteFacturar=function(t){f.clienteSelected=t,f.factReq.cliente=+t.cliente,1==+f.data.mesaenuso.mesa.escallcenter&&(f.datosPedido.nombre=t.nombre,f.datosPedido.direccion_entrega=t.direccion,f.datosPedido.telefono=t.telefono)},this.cobrar=function(){f.facturando=!0;var e,n={cuenta:f.inputData.idcuenta,forma_pago:[],total:f.inputData.totalDeCuenta+f.inputData.montoPropina,propina_monto:f.inputData.montoPropina,propina_porcentaje:f.inputData.porcentajePropina,comision_monto:0},a=0,o=t(f.formasPagoDeCuenta);try{for(o.s();!(e=o.n()).done;){var i=e.value;a+=i.comision_monto||0,n.forma_pago.push({forma_pago:+i.forma_pago.forma_pago,monto:+i.monto+ +i.comision_monto,propina:i.propina||0,documento:i.documento,comision_monto:i.comision_monto})}}catch(r){o.e(r)}finally{o.f()}n.comision_monto=a,n.total+=a,1!=+f.data.mesaenuso.mesa.escallcenter?(f.factReq.cuentas.push({cuenta:+f.inputData.idcuenta}),f.cobroSrvc.save(n).subscribe(function(t){t.exito&&!t.facturada?(f.snackBar.open("Cobro","".concat(t.mensaje),{duration:3e3}),t.facturar?f.facturaSrvc.facturar(f.factReq).subscribe(function(e){e.exito?f.dialog.open(rn.a,{maxWidth:"400px",data:new rn.b("Imprimir factura","\xbfDesea imprimir la factura?","S\xed","No")}).afterClosed().subscribe(function(n){n&&f.printFactura(e.factura),f.resetFactReq(),f.snackBar.open("Factura","".concat(e.mensaje),{duration:3e3}),f.facturando=!1,f.dialogRef.close(t.cuenta),f.socket.emit("refrescar:mesa",{mesaenuso:f.data.mesaenuso})}):(f.facturando=!1,f.snackBar.open("Factura","ERROR: ".concat(t.mensaje),{duration:7e3}),f.socket.emit("refrescar:mesa",{mesaenuso:f.data.mesaenuso}),f.dialogRef.close(t.cuenta))}):(f.socket.emit("refrescar:mesa",{mesaenuso:f.data.mesaenuso}),f.dialogRef.close(t.cuenta))):(f.facturando=!1,f.snackBar.open("Cobro","ERROR: ".concat(t.mensaje),{duration:7e3}),f.socket.emit("refrescar:mesa",{mesaenuso:f.data.mesaenuso}),f.dialogRef.close("closePanel"))})):f.enviarPedido(n)},this.enviarPedido=function(t){f.datosPedido.cliente={nombre:f.clienteSelected.nombre,apellidos:"",correo:f.clienteSelected.correo,telefono:f.datosPedido.telefono,nit:f.clienteSelected.nit,direccion:f.datosPedido.direccion_entrega};var e={cobro:t,pedido:f.datosPedido,factura:{cuentas:[{cuenta:t.cuenta}],factura_serie:1,cliente:f.clienteSelected.cliente,fecha_factura:ca().format(Le.a.dbDateFormat),moneda:1}};f.comandaSrvc.enviarPedido(+f.data.mesaenuso.comanda,e).subscribe(function(t){t.exito?(f.snackBar.open("Pedido","#".concat(t.pedido,". ").concat(t.mensaje),{duration:3e3}),f.dialogRef.close("closePanel")):f.snackBar.open("Pedido","ERROR: ".concat(t.mensaje),{duration:7e3}),f.facturando=!1,f.socket.emit("refrescar:mesa",{mesaenuso:f.data.mesaenuso})})},this.procesaDetalleFactura=function(t){var e=[];return t.forEach(function(t){return e.push({Cantidad:+t.cantidad,Descripcion:t.articulo.descripcion,Total:+t.total})}),e},this.getTotalDetalle=function(t){var e=0;return t.forEach(function(t){return e+=+t.total}),e},this.getTotalImpuestosAdicionales=function(t){var e=0;return t.forEach(function(t){return e+=+t.total}),e},this.printFactura=function(t){f.facturaSrvc.imprimir(+t.factura).subscribe(function(t){if(t.factura){var e={NombreEmpresa:t.factura.empresa.nombre,NitEmpresa:t.factura.empresa.nit,SedeEmpresa:t.factura.sedeFactura.nombre,DireccionEmpresa:t.factura.empresa.direccion,Fecha:ca(t.factura.fecha_factura).format(Le.a.dateFormat),Nit:t.factura.receptor.nit,Nombre:t.factura.receptor.nombre,Direccion:t.factura.receptor.direccion,Serie:t.factura.serie_factura,Numero:t.factura.numero_factura,Total:f.getTotalDetalle(t.factura.detalle)+f.getTotalImpuestosAdicionales(t.factura.impuestos_adicionales||[]),NoAutorizacion:t.factura.fel_uuid,NombreCertificador:t.factura.certificador_fel.nombre,NitCertificador:t.factura.certificador_fel.nit,FechaDeAutorizacion:t.factura.fecha_autorizacion,NoOrdenEnLinea:"",FormaDePago:"",DetalleFactura:f.procesaDetalleFactura(t.factura.detalle),Impresora:f.data.impresora,ImpuestosAdicionales:t.factura.impuestos_adicionales||[]};f.data.impresora?0==+f.data.impresora.bluetooth?f.socket.emit("print:factura","".concat(JSON.stringify(e))):(e.Fecha=ca(t.factura.fecha_factura).format(Le.a.dateFormatBT),f.printToBT(JSON.stringify(e))):f.socket.emit("print:factura","".concat(JSON.stringify(e))),f.snackBar.open("Imprimiendo factura ".concat(t.factura.serie_factura,"-").concat(t.factura.numero_factura),"Impresi\xf3n",{duration:3e3})}else f.snackBar.open("ERROR: ".concat(t.mensaje),"Impresi\xf3n",{duration:7e3})})},this.printToBT=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=window.open("com.restouch.impresion://impresion/".concat(t),"PrntBT","height=200,width=200,menubar=no,location=no,resizable=no,scrollbars=no,status=no");setTimeout(function(){return e.close()},1e3)},this.onSelectionChangeFP=function(t){var e=f.lstFormasPago.findIndex(function(e){return+e.forma_pago==+t.value});e>-1&&(f.pideDocumento=1==+f.lstFormasPago[e].pedirdocumento)}}return m(e,[{key:"ngOnInit",value:function(){var t=this;this.esMovil=this.ls.get(Le.a.usrTokenVar).enmovil||!1,this.resetFactReq(),this.processData(),this.loadFormasPago(),this.ls.get(Le.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(Le.a.usrTokenVar).sede_uuid),this.socket.on("reconnect",function(){return t.socket.emit("joinRestaurant",t.ls.get(Le.a.usrTokenVar).sede_uuid)})),this.loadSedes()}},{key:"calculaPorcentajePropina",value:function(){this.inputData.porcentajePropina=parseFloat((100*this.inputData.montoPropina/this.inputData.totalDeCuenta).toFixed(2)),this.actualizaSaldo()}}]),e}()).\u0275fac=function(t){return new(t||Pa)(z.Nb(U.b),z.Nb(U.f),z.Nb(U.a),z.Nb(R.a),z.Nb(ua.a),z.Nb(da),z.Nb(ba.a),z.Nb(We.a),z.Nb(ma.a),z.Nb(fa.a),z.Nb(Zn))},Pa.\u0275cmp=z.Hb({type:Pa,selectors:[["app-cobrar-pedido"]],inputs:{inputData:"inputData"},decls:63,vars:29,consts:[["mat-dialog-title",""],[4,"ngIf"],["mat-dialog-content","",2,"height","650px"],[1,"row"],[1,"col","m5","s12","mat-elevation-z4","colHeight",2,"overflow-y","auto"],[3,"showAddButton","getClienteEv"],["lstClientes",""],[1,"col","m3","s12","mat-elevation-z4","colHeight",2,"overflow-y","auto"],[1,"table","table-sm","table-borderless","table-striped"],[4,"ngFor","ngForOf"],[1,"col","m4","s12","mat-elevation-z4","colHeight",2,"overflow-y","auto"],["novalidate",""],["frmFormasPago","ngForm"],[1,"fullWidth"],["name","forma_pago","cdkFocusInitial","","required","",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["class","fullWidth",4,"ngIf"],["align","end"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[1,"table","table-sm"],[1,"text-left"],[1,"text-right"],[1,"col","m8","s8"],["class","table table-sm table-borderless",4,"ngIf"],[1,"col","m4","s4"],[1,"table","table-sm","table-borderless"],[1,"text-right","font-weight-bold"],[1,"text-right","font-weight-bold","totalCuenta",2,"max-width","15%"],[1,"text-right","font-weight-bold",2,"max-width","15%"],[3,"ngClass"],["mat-dialog-actions","","align","end"],[3,"configuracion",4,"ngIf"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-raised-button","","color","accent",3,"disabled","click",4,"ngIf"],[3,"value"],["matInput","","placeholder","monto","name","monto","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Propina","name","propina",3,"ngModel","ngModelChange"],["matInput","","placeholder","Documento","name","documento",3,"ngModel","required","ngModelChange"],[1,"text-center"],["mat-icon-button","","type","button","color","warn",3,"click"],["name","sede","required","",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","Direcci\xf3n de entrega","name","direccion_entrega","maxlength","1000","required","",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","Nombre","name","nombre","maxlength","1000",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","Tel\xe9fono","name","telefono","maxlength","1000",3,"ngModel","ngModelChange"],[3,"configuracion"]],template:function(t,e){if(1&t&&(z.Tb(0,"h1",0),z.Dc(1),z.Cc(2,ga,2,1,"small",1),z.Sb(),z.Tb(3,"div",2),z.Tb(4,"div",3),z.Tb(5,"div",4),z.Tb(6,"app-lista-cliente",5,6),z.bc("getClienteEv",function(t){return e.setClienteFacturar(t)}),z.Sb(),z.Sb(),z.Tb(8,"div",7),z.Tb(9,"table",8),z.Tb(10,"tbody"),z.Cc(11,va,6,6,"tr",9),z.Sb(),z.Sb(),z.Sb(),z.Tb(12,"div",10),z.Tb(13,"form",11,12),z.Tb(15,"mat-form-field",13),z.Tb(16,"mat-label"),z.Dc(17,"Forma de pago"),z.Sb(),z.Tb(18,"mat-select",14),z.bc("ngModelChange",function(t){return e.formaPago.forma_pago=t})("selectionChange",function(t){return e.onSelectionChangeFP(t)}),z.Cc(19,Ca,2,2,"mat-option",15),z.Sb(),z.Sb(),z.Cc(20,Sa,2,1,"mat-form-field",16),z.Cc(21,_a,2,1,"mat-form-field",16),z.Cc(22,Ta,2,2,"mat-form-field",16),z.Tb(23,"div",17),z.Tb(24,"button",18),z.bc("click",function(){return e.addFormaPago()}),z.Dc(25," Agregar "),z.Sb(),z.Sb(),z.Sb(),z.Ob(26,"hr"),z.Tb(27,"table",19),z.Tb(28,"thead"),z.Tb(29,"tr"),z.Tb(30,"th",20),z.Dc(31,"FP"),z.Sb(),z.Tb(32,"th",21),z.Dc(33,"Mon"),z.Sb(),z.Tb(34,"th",21),z.Dc(35,"Prop"),z.Sb(),z.Sb(),z.Sb(),z.Tb(36,"tbody"),z.Cc(37,ya,13,9,"tr",9),z.Sb(),z.Sb(),z.Sb(),z.Sb(),z.Tb(38,"div",3),z.Tb(39,"div",22),z.Cc(40,Da,22,5,"table",23),z.Sb(),z.Tb(41,"div",24),z.Tb(42,"table",25),z.Tb(43,"tbody"),z.Tb(44,"tr"),z.Tb(45,"td",26),z.Dc(46,"TOTAL DE CUENTA:"),z.Sb(),z.Tb(47,"td",27),z.Dc(48),z.gc(49,"number"),z.Sb(),z.Sb(),z.Tb(50,"tr"),z.Tb(51,"td",26),z.Dc(52,"PENDIENTE:"),z.Sb(),z.Tb(53,"td",28),z.Tb(54,"span",29),z.Dc(55),z.gc(56,"number"),z.Sb(),z.Sb(),z.Sb(),z.Sb(),z.Sb(),z.Sb(),z.Sb(),z.Sb(),z.Tb(57,"div",30),z.Cc(58,wa,1,1,"app-cargando",31),z.Tb(59,"button",32),z.bc("click",function(){return e.cancelar()}),z.Dc(60,"Cancelar"),z.Sb(),z.Cc(61,Ea,2,1,"button",33),z.Cc(62,xa,2,1,"button",33),z.Sb()),2&t){var n=z.tc(14);z.Cb(1),z.Fc(" Cobrar cuenta de ",e.data.cuenta," "),z.Cb(1),z.lc("ngIf",e.clienteSelected&&!!e.clienteSelected.cliente),z.Cb(4),z.lc("showAddButton",!0),z.Cb(5),z.lc("ngForOf",e.inputData.productosACobrar),z.Cb(7),z.lc("ngModel",e.formaPago.forma_pago),z.Cb(1),z.lc("ngForOf",e.lstFormasPago),z.Cb(1),z.lc("ngIf",e.esMovil),z.Cb(1),z.lc("ngIf",e.esMovil),z.Cb(1),z.lc("ngIf",e.esMovil&&e.pideDocumento),z.Cb(2),z.lc("disabled",!n.form.valid||e.inputData.saldo<=0),z.Cb(13),z.lc("ngForOf",e.formasPagoDeCuenta),z.Cb(3),z.lc("ngIf",1==+e.data.mesaenuso.mesa.escallcenter),z.Cb(8),z.Ec(z.ic(49,19,e.inputData.totalDeCuenta,"1.2-2")),z.Cb(6),z.lc("ngClass",z.qc(25,Oa,+e.inputData.saldo>0,0==+e.inputData.saldo,+e.inputData.saldo<0)),z.Cb(1),z.Ec(z.ic(56,22,e.inputData.saldo,"1.2-2")),z.Cb(3),z.lc("ngIf",e.facturando),z.Cb(1),z.lc("disabled",e.facturando),z.Cb(2),z.lc("ngIf",0==+e.data.mesaenuso.mesa.escallcenter),z.Cb(1),z.lc("ngIf",1==+e.data.mesaenuso.mesa.escallcenter)}},directives:[U.g,b.m,U.d,pa.a,b.l,p.r,p.l,p.m,y.b,y.e,P.a,p.p,p.k,p.n,M.a,b.k,U.c,$.k,k.b,p.c,T.a,p.f,ha.a],pipes:[b.f],styles:[".spacer[_ngcontent-%COMP%]{flex:1 1 auto}.totalCuenta[_ngcontent-%COMP%]{border-top:1px solid #000;border-bottom:5px double #000}.colHeight[_ngcontent-%COMP%]{height:400px}.saldo-pendiente[_ngcontent-%COMP%]{color:#da332d;border-bottom:5px double #da332d}.saldo-extra[_ngcontent-%COMP%]{color:#87ceeb;border-bottom:5px double #87ceeb}.saldo-exacto[_ngcontent-%COMP%]{color:green;border-bottom:5px double green}.propina[_ngcontent-%COMP%]{font-style:italic}"]}),Pa),Ra=r("XiUz");function Ia(t,e){if(1&t){var n=z.Ub();z.Tb(0,"div",6),z.Tb(1,"mat-card",7),z.Ob(2,"mat-card-header"),z.Tb(3,"mat-card-content"),z.Rb(4),z.Tb(5,"div",0),z.Tb(6,"div",8),z.Tb(7,"button",9),z.bc("click",function(){z.wc(n);var t=e.$implicit;return z.fc().onConfirm(t.numero)}),z.Dc(8),z.Sb(),z.Sb(),z.Sb(),z.Qb(),z.Sb(),z.Sb(),z.Sb()}if(2&t){var a=e.$implicit;z.Cb(8),z.Ec(a.numero)}}var Fa,Aa=function t(e,n,a,o){d(this,t),this.titlew=e,this.cantidadPedido=n,this.lblBtnConfirm=a,this.lblBtnDeny=o},Na=((Fa=function(){function t(e,n){d(this,t),this.dialogRef=e,this.data=n,this.pedidos=[],this.datos={respuesta:!1,pedido:""},this.title=n.titlew,this.lblBtnConfirm=n.lblBtnConfirm,this.lblBtnDeny=n.lblBtnDeny,this.cantidadPedido=n.cantidadPedido,console.log(+this.cantidadPedido);for(var a=0;a<+this.cantidadPedido;a++)console.log("asdf"),this.pedidos.push({numero:a+1});console.log(this.pedidos)}return m(t,[{key:"ngOnInit",value:function(){}},{key:"onConfirm",value:function(t){this.datos.respuesta=!0,this.datos.pedido=t,this.dialogRef.close(this.datos)}},{key:"onDismiss",value:function(){this.datos.respuesta=!1,this.dialogRef.close(this.datos)}}]),t}()).\u0275fac=function(t){return new(t||Fa)(z.Nb(U.f),z.Nb(U.a))},Fa.\u0275cmp=z.Hb({type:Fa,selectors:[["app-dialog-pedido"]],decls:9,vars:2,consts:[[1,"row"],["mat-dialog-title",""],["fxFlex","100%","fxFlex.xs","100%",1,"bordeRght"],["fxLayout","row wrap","fxLayoutGap","10px grid","fxFlexFill","","fxLayoutAlign","start start",1,"divContenedor"],["fxFlex","100%","fxLayoutAlign","center start"],["fxFlex","20%","fxFlex.xs","100%","fxFlex.sm","100%","fxFlex.md","50%",4,"ngFor","ngForOf"],["fxFlex","20%","fxFlex.xs","100%","fxFlex.sm","100%","fxFlex.md","50%"],[1,"mat-elevation-z4"],[1,"col"],["mat-raised-button","","color","accent","type","button",3,"click"]],template:function(t,e){1&t&&(z.Tb(0,"div",0),z.Tb(1,"h1",1),z.Dc(2),z.Sb(),z.Sb(),z.Tb(3,"mat-dialog-content"),z.Tb(4,"div",2),z.Tb(5,"div",3),z.Ob(6,"div",4),z.Cc(7,Ia,9,1,"div",5),z.Sb(),z.Sb(),z.Ob(8,"mat-dialog-content"),z.Sb()),2&t&&(z.Cb(2),z.Fc(" ",e.title," "),z.Cb(5),z.lc("ngForOf",e.pedidos))},directives:[U.g,U.d,Ra.a,Ra.c,Ra.d,Ra.e,Ra.b,b.l,D.a,D.d,D.c,M.a],styles:[""]}),Fa),Ua=r("NGYs");function ja(t,e){if(1&t&&(z.Tb(0,"div"),z.Tb(1,"h5"),z.Dc(2),z.Sb(),z.Sb()),2&t){var n=z.fc().$implicit;z.Cb(2),z.Fc(" ",n.descripcion," ")}}function Ba(t,e){if(1&t&&(z.Tb(0,"mat-option",12),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n),z.Cb(1),z.Fc(" ",n.descripcion," ")}}var La=function(){return{standalone:!0}};function Ha(t,e){if(1&t&&(z.Rb(0),z.Tb(1,"mat-select",10),z.bc("ngModelChange",function(t){return e.$implicit.seleccion=t}),z.Cc(2,Ba,2,2,"mat-option",11),z.Sb(),z.Ob(3,"mat-divider"),z.Ob(4,"br"),z.Qb()),2&t){var n=e.$implicit,a=z.fc(2).$implicit;z.Cb(1),z.lc("ngModel",n.seleccion)("ngModelOptions",z.nc(3,La)),z.Cb(1),z.lc("ngForOf",a.receta)}}function za(t,e){if(1&t&&(z.Tb(0,"div",0),z.Tb(1,"div",1),z.Cc(2,Ha,5,4,"ng-container",5),z.Sb(),z.Sb()),2&t){var n=z.fc().$implicit;z.Cb(2),z.lc("ngForOf",n.input)}}function qa(t,e){if(1&t&&(z.Tb(0,"div"),z.Cc(1,ja,3,1,"div",8),z.Cc(2,za,3,1,"div",9),z.Sb()),2&t){var n=e.$implicit;z.Cb(1),z.lc("ngIf",n.receta.length>0),z.Cb(1),z.lc("ngIf",n.receta.length>0)}}var $a,Va,Wa,Ga=function t(e,n,a){d(this,t),this.producto=e,this.lblBtnConfirm=n,this.lblBtnDeny=a},Qa=((Wa=function(){function e(n,a,o,i){var r=this;d(this,e),this.dialogRef=n,this.data=a,this.articuloSvr=o,this.snackBar=i,this.getArticulos=function(){r.articuloSvr.getArticuloCombo({articulo:r.producto.id}).subscribe(function(t){r.combo=t;for(var e=0;e<r.combo.receta.length;e++){var n=r.combo.receta[e];if(r.combo.receta[e].seleccionado=!1,1==+n.multiple){for(var a=[],o=0;o<+r.combo.receta[e].cantidad_maxima;o++)a.push({id:o,seleccion:{}});r.combo.receta[e].input=a}else r.seleccion.receta.push(r.combo.receta[e])}})},this.setCantidad=function(){for(var t=0;t<r.combo.receta.length;t++)if(1==+r.combo.receta[t].multiple){for(var e=[],n=0;n<+r.combo.receta[t].cantidad_maxima*r.seleccion.cantidad;n++)e.push({id:n,seleccion:{}});r.combo.receta[t].input=e}},this.todosSeleccionados=function(e){var n,a=!0,o=t(e);try{t:for(o.s();!(n=o.n()).done;){var i,r=t(n.value.input);try{for(r.s();!(i=r.n()).done;)if(void 0===i.value.seleccion.articulo){a=!1;break t}}catch(c){r.e(c)}finally{r.f()}}}catch(c){o.e(c)}finally{o.f()}return a},this.datos={respuesta:!1,seleccion:[]},this.lblBtnConfirm=a.lblBtnConfirm,this.lblBtnDeny=a.lblBtnDeny,this.producto=a.producto,this.seleccion={cantidad:1,articulo:this.producto.id,descripcion:this.producto.nombre,receta:[]}}return m(e,[{key:"ngOnInit",value:function(){this.combo=[],this.getArticulos()}},{key:"onConfirm",value:function(){var e=this,n=this.combo.receta.filter(function(t){return 1==+t.multiple});if(this.todosSeleccionados(n)){var a,o=t(n);try{var i=function(){var n=a.value;e.seleccion.receta.push({articulo:n.articulo,descripcion:n.descripcion,receta:[]});var o,i=e.seleccion.receta.findIndex(function(t){return+t.articulo==+n.articulo}),r=t(n.input);try{for(r.s();!(o=r.n()).done;){var c=o.value;e.seleccion.receta[i].receta.push(c.seleccion)}}catch(s){r.e(s)}finally{r.f()}};for(o.s();!(a=o.n()).done;)i()}catch(r){o.e(r)}finally{o.f()}this.datos.respuesta=!0,this.datos.seleccion=this.seleccion,this.dialogRef.close(this.datos)}else this.snackBar.open("Por favor seleccione todas las opciones para completar.","Combos",{duration:7e3})}},{key:"onDismiss",value:function(){this.datos.respuesta=!1,this.dialogRef.close(this.datos)}}]),e}()).\u0275fac=function(t){return new(t||Wa)(z.Nb(U.f),z.Nb(U.a),z.Nb(Ua.a),z.Nb(R.a))},Wa.\u0275cmp=z.Hb({type:Wa,selectors:[["app-dialog-combo"]],decls:16,vars:4,consts:[[1,"row"],[1,"col","m12","s12"],[1,"fullWidth"],["type","number","matInput","","placeholder","Cantidad","min","1","step","1",3,"ngModel","ngModelOptions","change","ngModelChange"],[1,"col-sm-12"],[4,"ngFor","ngForOf"],["align","right",1,"row","text-right"],["mat-raised-button","","color","accent",1,"btnAccion",3,"click"],[4,"ngIf"],["class","row",4,"ngIf"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(z.Tb(0,"mat-dialog-content"),z.Tb(1,"div",0),z.Tb(2,"div",1),z.Tb(3,"h5"),z.Dc(4,"Cantidad"),z.Sb(),z.Tb(5,"mat-form-field",2),z.Tb(6,"input",3),z.bc("change",function(){return e.setCantidad()})("ngModelChange",function(t){return e.seleccion.cantidad=t}),z.Sb(),z.Sb(),z.Sb(),z.Sb(),z.Tb(7,"div",0),z.Tb(8,"div",4),z.Cc(9,qa,3,2,"div",5),z.Sb(),z.Sb(),z.Tb(10,"div",6),z.Tb(11,"div",1),z.Tb(12,"button",7),z.bc("click",function(){return e.onDismiss()}),z.Dc(13," Cancelar "),z.Sb(),z.Tb(14,"button",7),z.bc("click",function(){return e.onConfirm()}),z.Dc(15," Aceptar "),z.Sb(),z.Sb(),z.Sb(),z.Sb()),2&t&&(z.Cb(6),z.lc("ngModel",e.seleccion.cantidad)("ngModelOptions",z.nc(3,La)),z.Cb(3),z.lc("ngForOf",e.combo.receta))},directives:[U.d,y.b,p.o,k.b,p.c,p.k,p.n,b.l,M.a,b.m,P.a,w.a,$.k],styles:[""]}),Wa),Ja=((Va=function(){function t(e,n){var a=this;d(this,t),this.dialogRef=e,this.data=n,this.terminar=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return a.dialogRef.close(t)}}return m(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Va)(z.Nb(U.f),z.Nb(U.a))},Va.\u0275cmp=z.Hb({type:Va,selectors:[["app-notas-generales-comanda"]],decls:12,vars:1,consts:[["mat-dialog-title",""],["novalidate",""],["frmNotasGenCom","ngForm"],[1,"fullWidth"],["matInput","","placeholder","Notas generales","name","notasGenerales","maxlength","1000",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","color","secondary",1,"btnAccion",3,"click"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(z.Tb(0,"h1",0),z.Dc(1,"Notas generales de comanda"),z.Sb(),z.Tb(2,"mat-dialog-content"),z.Tb(3,"form",1,2),z.Tb(5,"mat-form-field",3),z.Tb(6,"textarea",4),z.bc("ngModelChange",function(t){return e.data.notasGenerales=t}),z.Sb(),z.Sb(),z.Sb(),z.Sb(),z.Tb(7,"mat-dialog-actions",5),z.Tb(8,"button",6),z.bc("click",function(){return e.terminar()}),z.Dc(9," Cancelar "),z.Sb(),z.Tb(10,"button",7),z.bc("click",function(){return e.terminar(e.data.notasGenerales)}),z.Dc(11," Guardar "),z.Sb(),z.Sb()),2&t&&(z.Cb(6),z.lc("ngModel",e.data.notasGenerales))},directives:[U.g,U.d,p.r,p.l,p.m,y.b,k.b,p.c,p.f,p.k,p.n,U.c,M.a],styles:[""]}),Va),Xa=(($a=function(){function t(e,n,a,o){var i=this;d(this,t),this.dialogRef=e,this.snackBar=n,this.comandaSrvc=a,this.data=o,this.cancelar=function(){return i.dialogRef.close(!1)},this.guardar=function(){i.nuevaCuenta.nombre&&(i.comanda.cuentas.findIndex(function(t){return t.nombre.toUpperCase().trim()===i.nuevaCuenta.nombre.toUpperCase().trim()})<0?(i.comanda.cuentas.push(i.nuevaCuenta),i.comandaSrvc.save(i.comanda).subscribe(function(t){t.exito?(i.snackBar.open("Cuenta agregada con \xe9xito","Cuentas",{duration:3e3}),i.dialogRef.close(!0)):i.snackBar.open("ERROR: ".concat(t.mensaje),"Cuentas",{duration:7e3})})):i.snackBar.open("Ya existe una cuenta con ese nombre. Por favor ingrese otro nombre.","Cuentas",{duration:7e3}))}}return m(t,[{key:"ngOnInit",value:function(){if(+this.data.mesaEnUso.comanda>0){var t=this.data.mesaEnUso;this.comanda={area:+t.mesa.area.area,mesa:+t.mesa.mesa,mesero:+t.mesero.usuario,comensales:t.cuentas.length+1,dividirCuentasPorSillas:1,comanda:+t.comanda,cuentas:t.cuentas,replaceUnica:!1},this.nuevaCuenta={cuenta:0,numero:this.comanda.cuentas.length+1,nombre:void 0,productos:[]}}}}]),t}()).\u0275fac=function(t){return new(t||$a)(z.Nb(U.f),z.Nb(R.a),z.Nb(Zn),z.Nb(U.a))},$a.\u0275cmp=z.Hb({type:$a,selectors:[["app-nueva-cuenta"]],decls:12,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate",""],["frmNuevaCuenta","ngForm"],[1,"fullWidth"],["type","text","matInput","","placeholder","Nombre","name","nombre","required","",3,"ngModel","ngModelChange"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"]],template:function(t,e){if(1&t&&(z.Tb(0,"h1",0),z.Dc(1),z.Sb(),z.Tb(2,"div",1),z.Tb(3,"form",2,3),z.Tb(5,"mat-form-field",4),z.Tb(6,"input",5),z.bc("ngModelChange",function(t){return e.nuevaCuenta.nombre=t}),z.Sb(),z.Sb(),z.Sb(),z.Sb(),z.Tb(7,"div",6),z.Tb(8,"button",7),z.bc("click",function(){return e.cancelar()}),z.Dc(9," Cancelar "),z.Sb(),z.Tb(10,"button",8),z.bc("click",function(){return e.guardar()}),z.Dc(11," Guardar "),z.Sb(),z.Sb()),2&t){var n=z.tc(4);z.Cb(1),z.Fc("Nueva cuenta - Comanda #",e.data.mesaEnUso.comanda,""),z.Cb(5),z.lc("ngModel",e.nuevaCuenta.nombre),z.Cb(4),z.lc("disabled",!n.form.valid)}},directives:[U.g,U.d,p.r,p.l,p.m,y.b,k.b,p.c,p.p,p.k,p.n,U.c,M.a],styles:[""]}),$a);function Za(t,e){if(1&t&&(z.Tb(0,"mat-option",12),z.Dc(1),z.Sb()),2&t){var n=e.$implicit,a=z.fc().$implicit;z.lc("value",+n.cuenta)("disabled",1==+n.cerrada||+a.idcuenta==+n.cuenta),z.Cb(1),z.Fc(" ",n.nombre," ")}}function Ka(t,e){if(1&t&&(z.Tb(0,"tr"),z.Tb(1,"td"),z.Dc(2),z.Sb(),z.Tb(3,"td",7),z.Tb(4,"mat-form-field",8),z.Tb(5,"input",9),z.bc("ngModelChange",function(t){return e.$implicit.cantidad=t}),z.Sb(),z.Sb(),z.Sb(),z.Tb(6,"td"),z.Tb(7,"mat-select",10),z.bc("ngModelChange",function(t){return e.$implicit.idcuenta=t}),z.Cc(8,Za,2,3,"mat-option",11),z.Sb(),z.Sb(),z.Sb()),2&t){var n=e.$implicit,a=e.index,o=z.fc();z.Cb(2),z.Ec(n.nombre),z.Cb(3),z.lc("max",o.cantidadProducto[a])("ngModel",n.cantidad)("disabled",1==+n.combo),z.Cb(2),z.lc("ngModel",n.idcuenta),z.Cb(1),z.lc("ngForOf",o.comanda.cuentas)}}var Ya,to=((Ya=function(){function e(n,a,o,i){var r=this;d(this,e),this.dialogRef=n,this.snackBar=a,this.comandaSrvc=o,this.data=i,this.cantidadProducto=[],this.cpLstProductos=[],this.compLstProductos=[],this.cancelar=function(){return r.dialogRef.close(!1)},this.guardar=function(){var e,n=[],a=0,o=t(r.cpLstProductos);try{for(o.s();!(e=o.n()).done;){var i=e.value;+i.idcuenta!=+r.compLstProductos[a].idcuenta&&n.push({detalle_comanda:+i.detalle_comanda,cuenta:+i.idcuenta,cantidad:+i.cantidad}),a++}}catch(c){o.e(c)}finally{o.f()}n.length>0?r.comandaSrvc.distribuirCuentas(n).subscribe(function(t){t.exito?(r.snackBar.open("Productos redistribuidos","Cuentas",{duration:3e3}),r.dialogRef.close(!0)):(r.snackBar.open("ERROR: ".concat(t.mensaje),"Cuentas",{duration:7e3}),r.cancelar())}):(r.snackBar.open("Sin cambios en las cuentas.","Cuentas",{duration:7e3}),r.dialogRef.close(!0))}}return m(e,[{key:"ngOnInit",value:function(){var t=this;if(+this.data.mesaEnUso.comanda>0){var e=this.data.mesaEnUso;this.comanda={area:+e.mesa.area.area,mesa:+e.mesa.mesa,mesero:+e.mesero.usuario,comensales:e.cuentas.length+1,dividirCuentasPorSillas:1,comanda:+e.comanda,cuentas:e.cuentas,replaceUnica:!1}}this.cpLstProductos=[],this.data.lstProductos.length>0&&(this.data.lstProductos.forEach(function(e){0==+t.data.mesaEnUso.cuentas.find(function(t){return+t.cuenta==+e.idcuenta}).cerrada&&(t.cpLstProductos.push(e),t.cantidadProducto.push(+e.cantidad))}),this.cpLstProductos=JSON.parse(JSON.stringify(this.cpLstProductos)),this.compLstProductos=JSON.parse(JSON.stringify(this.cpLstProductos)))}}]),e}()).\u0275fac=function(t){return new(t||Ya)(z.Nb(U.f),z.Nb(R.a),z.Nb(Zn),z.Nb(U.a))},Ya.\u0275cmp=z.Hb({type:Ya,selectors:[["app-distribuir-productos-cuentas"]],decls:17,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"rtxt","size-cantidad"],[4,"ngFor","ngForOf"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","type","button","color","accent",3,"click"],[1,"rtxt"],[1,"size-cantidad"],["type","number","matInput","","name","cantidad","min","1","required","",3,"max","ngModel","disabled","ngModelChange"],["name","cuenta","required","",3,"ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"]],template:function(t,e){1&t&&(z.Tb(0,"h1",0),z.Dc(1),z.Sb(),z.Tb(2,"div",1),z.Tb(3,"table"),z.Tb(4,"tr"),z.Tb(5,"th"),z.Dc(6,"Art\xedculo"),z.Sb(),z.Tb(7,"th",2),z.Dc(8,"Cantidad"),z.Sb(),z.Tb(9,"th"),z.Dc(10,"Cuenta"),z.Sb(),z.Sb(),z.Cc(11,Ka,9,6,"tr",3),z.Sb(),z.Sb(),z.Tb(12,"div",4),z.Tb(13,"button",5),z.bc("click",function(){return e.cancelar()}),z.Dc(14," Cancelar "),z.Sb(),z.Tb(15,"button",6),z.bc("click",function(){return e.guardar()}),z.Dc(16," Guardar "),z.Sb(),z.Sb()),2&t&&(z.Cb(1),z.Fc("Distribuci\xf3n de productos - Comanda #",e.data.mesaEnUso.comanda,""),z.Cb(10),z.lc("ngForOf",e.cpLstProductos))},directives:[U.g,U.d,b.l,U.c,M.a,y.b,p.o,k.b,p.c,p.p,p.k,p.n,P.a,$.k],styles:[".size-cantidad[_ngcontent-%COMP%]{width:25%}"]}),Ya),eo=r("FHMA"),no=r("qXgu"),ao=["txtCodigoBarras"];function oo(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-chip",13),z.bc("click",function(){z.wc(n);var t=e.$implicit;return z.fc().setSelectedCuenta(t.numero)}),z.Dc(1),z.Sb()}if(2&t){var a=e.$implicit,o=z.fc();z.lc("disabled",1==+a.cerrada||o.bloqueoBotones),z.Cb(1),z.Fc(" ",a.nombre," ")}}function io(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-chip",14),z.bc("click",function(){z.wc(n);var t=e.$implicit;return z.fc().loadSubcategorias(t)}),z.Dc(1),z.Sb()}if(2&t){var a=e.$implicit,o=z.fc();z.lc("disabled",o.bloqueoBotones),z.Cb(1),z.Fc(" ",a.descripcion," ")}}function ro(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-chip",17),z.bc("click",function(){z.wc(n);var t=e.$implicit,a=z.fc().index;return z.fc().loadSubcategorias({categoria:t.categoria},t,a)}),z.Dc(1),z.Sb()}if(2&t){var a=e.$implicit,o=z.fc(2);z.lc("disabled",o.bloqueoBotones),z.Cb(1),z.Fc(" ",a.descripcion," ")}}function co(t,e){if(1&t&&(z.Tb(0,"div",15),z.Tb(1,"mat-chip-list"),z.Cc(2,ro,2,2,"mat-chip",16),z.Sb(),z.Sb()),2&t){var n=e.$implicit;z.Cb(2),z.lc("ngForOf",n)}}function so(t,e){if(1&t){var n=z.Ub();z.Tb(0,"div",18),z.Tb(1,"mat-card",19),z.bc("click",function(){z.wc(n);var t=e.$implicit;return z.fc().addArticulo(t)}),z.Tb(2,"mat-card-content"),z.Tb(3,"p"),z.Dc(4),z.Sb(),z.Sb(),z.Tb(5,"mat-card-actions",20),z.Tb(6,"span",21),z.Dc(7,"Por comandar"),z.Sb(),z.Tb(8,"span",21),z.Dc(9,"Comandados"),z.Sb(),z.Sb(),z.Sb(),z.Sb()}if(2&t){var a=e.$implicit;z.Cb(4),z.Ec(a.descripcion)}}var lo,uo=((lo=function(t){e(o,t);var n=a(o);function o(t,e,a,i,r,c,s,l,u,b){var m;return d(this,o),(m=n.call(this,a,i,r,c,s,l,u,b)).dialogRef=t,m.data=e,m.dialog=a,m.snackBar=i,m.comandaSrvc=r,m.socket=c,m.ls=s,m.pdfServicio=l,m.configSrvc=u,m.articuloSrvc=b,m.closeSideNavEv=new z.o,m.mesaSavedEv=new z.o,m.subCategorias=[],m.listaSubCategorias=[],m.articulos=[],m.fullListArticulos=[],m.setDatos=function(){m.data&&m.data.mesa&&(m.mesaEnUso=m.data.mesa,m.setSelectedCuenta(m.mesaEnUso.cuentas[0].numero))},m.cerrar=function(){return m.dialogRef.close()},m.resetArticulos=function(){return m.articulos=[]},m.resetListaSubCategorias=function(){return m.listaSubCategorias=[]},m.loadArticulosDePOS=function(){m.articuloSrvc.getArticulosDePOS().subscribe(function(t){t&&(m.categorias=t.categorias,m.subCategorias=t.subcategorias,m.articulos=t.articulos,m.fullListArticulos=JSON.parse(JSON.stringify(m.articulos)))})},m.loadSubcategorias=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!m.bloqueoBotones){var a={categoria:t.categoria};e?a.categoria_grupo_grupo=e.categoria_grupo:m.resetListaSubCategorias(),m.listaSubCategorias.length>0&&m.listaSubCategorias.splice(n+1),e||(m.listaSubCategorias=m.subCategorias.filter(function(e){return+e.categoria==+t.categoria})),m.articuloSrvc.getCategoriaGrupoImpresora(a).subscribe(function(t){t.length>0?m.listaSubCategorias.push(t):m.filterArticulos(+e.categoria_grupo)})}},m.loadArticulos=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!m.bloqueoBotones){var e={mostrar_pos:1,categoria_grupo:null};t?e.categoria_grupo=t:delete e.categoria_grupo,m.articuloSrvc.getArticulos(e).subscribe(function(t){m.articulos=t})}},m.filterArticulos=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;m.bloqueoBotones||(m.articulos=t?m.fullListArticulos.filter(function(e){return+e.categoria_grupo==+t}):m.fullListArticulos)},m.addArticulo=function(t){m.bloqueoBotones||m.agregarProductos({id:+t.articulo,nombre:t.descripcion,precio:+t.precio,impresora:t.impresora,presentacion:t.presentacion,codigo:t.codigo,combo:t.combo,multiple:t.multiple})},m}return m(o,[{key:"ngOnInit",value:function(){this.alIniciar(),this.loadArticulosDePOS(),this.loadArticulos(),this.setDatos()}}]),o}(function(){function e(n,a,o,i,r,c,s,l){var u=this;d(this,e),this.dialog=n,this.snackBar=a,this.comandaSrvc=o,this.socket=i,this.ls=r,this.pdfServicio=c,this.configSrvc=s,this.articuloSrvc=l,this.clientePedido=null,this.closeSideNavEv=new z.o,this.mesaSavedEv=new z.o,this.showPortalComanda=!1,this.showPortalCuenta=!1,this.noComanda=0,this.sumCuenta=0,this.categorias=[],this.bloqueoBotones=!1,this.rolesUsuario=[],this.impreso=0,this.usaCodigoBarras=!1,this.codigoBarras=null,this.alIniciar=function(){u.resetMesaEnUso(),u.resetLstProductosSeleccionados(),u.resetLstProductosDeCuenta(),u.resetCuentaActiva(),u.impreso=0,u.noComanda=u.mesaEnUso.comanda||0,u.llenaProductosSeleccionados(),u.ls.get(Le.a.usrTokenVar).sede_uuid&&(u.socket.emit("joinRestaurant",u.ls.get(Le.a.usrTokenVar).sede_uuid),u.socket.on("reconnect",function(){return u.socket.emit("joinRestaurant",u.ls.get(Le.a.usrTokenVar).sede_uuid)})),u.usaCodigoBarras=u.configSrvc.getConfig(Le.a.CONSTANTES.RT_USA_CODIGO_BARRAS)||!1},this.resetMesaEnUso=function(){return u.mesaEnUso={exito:!0,comanda:null,usuario:null,sede:null,estatus:null,mesa:{mesa:null,area:{area:null,sede:null,area_padre:null,nombre:null},numero:null,posx:null,posy:null,tamanio:null,estatus:null},numero_pedido:null,cuentas:[]}},this.resetLstProductosSeleccionados=function(){return u.lstProductosSeleccionados=[]},this.resetLstProductosDeCuenta=function(){return u.lstProductosDeCuenta=[]},this.resetCuentaActiva=function(){return u.cuentaActiva={cuenta:null,numero:null,nombre:null,productos:[]}},this.resetListadoArticulos=function(){return u.appLstProdAlt.loadArbolArticulos()},this.setListaCategorias=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return u.categorias=u.setVerBotones(t)},this.setVerBotones=function(e){var n,a=t(e);try{for(a.s();!(n=a.n()).done;){var o,i=n.value,r=t(i.categoria_grupo);try{t:for(r.s();!(o=r.n()).done;){var c,s=o.value,l=t(s.articulo);try{for(l.s();!(c=l.n()).done;)if(1==+c.value.mostrar_pos){s.mostrarEnPos=!0,i.mostrarEnPos=!0;continue t}}catch(u){l.e(u)}finally{l.f()}}}catch(u){r.e(u)}finally{r.f()}}}catch(u){a.e(u)}finally{a.f()}return e},this.clickOnCategoria=function(t){return u.appLstProdAlt.fillSubCategorias(t.categoria_grupo)},this.buscarArticulo=function(){u.codigoBarras&&u.codigoBarras.trim().length>0&&u.articuloSrvc.getArticulos({codigo:u.codigoBarras.trim()}).subscribe(function(t){if(t&&t.length>0){var e=t[0];u.agregarProductos({id:+e.articulo,nombre:e.descripcion,precio:+e.precio,impresora:e.impresora,presentacion:e.presentacion,codigo:e.codigo,combo:e.combo,multiple:e.multiple}),u.codigoBarras=null,u.txtCodigoBarras.focus()}})},this.llenaProductosSeleccionados=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.mesaEnUso;null==u.mesaEnUso.comanda&&(u.mesaEnUso=e),u.lstProductosSeleccionados=[];var n,a=t(e.cuentas);try{for(a.s();!(n=a.n()).done;){var o,i=n.value,r=t(i.productos);try{for(r.s();!(o=r.n()).done;){var c=o.value;u.lstProductosSeleccionados.push({id:+c.articulo.articulo,nombre:c.articulo.descripcion,cuenta:+c.numero_cuenta||1,idcuenta:+i.cuenta,cantidad:+c.cantidad,impreso:+c.impreso,precio:parseFloat(c.precio)||10,total:parseFloat(c.total)||parseFloat(c.cantidad)*parseFloat(c.precio),notas:c.notas||"",showInputNotas:!1,itemListHeight:"70px",detalle_comanda:+c.detalle_comanda,detalle_cuenta:+c.detalle_cuenta,impresora:c.articulo.impresora,detalle:c.detalle,monto_extra:+c.monto_extra||0,multiple:+c.articulo.multiple,combo:+c.articulo.combo})}}catch(s){r.e(s)}finally{r.f()}}}catch(s){a.e(s)}finally{a.f()}},this.cerrarMesa=function(){u.comandaSrvc.cerrarMesa(u.mesaEnUso.mesa.mesa).subscribe(function(t){t.exito?(u.snackBar.open(t.mensaje,"Comanda",{duration:3e3}),u.mesaEnUso.mesa.estatus=1,u.mesaSavedEv.emit(),u.socket.emit("refrescar:mesa",{mesaenuso:u.mesaEnUso})):u.snackBar.open("ERROR: ".concat(t.mensaje),"Comanda",{duration:7e3})})},this.printToBT=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=window.open("com.restouch.impresion://impresion/".concat(t),"PrntBT","height=200,width=200,menubar=no,location=no,resizable=no,scrollbars=no,status=no");setTimeout(function(){return e.close()},1e3),u.bloqueoBotones=!1},this.printComandaPDF=function(){var t=+u.cuentaActiva.cuenta;u.pdfServicio.getComanda(t).subscribe(function(e){if(e){var n=new Blob([e],{type:"application/pdf"}),a=window.URL.createObjectURL(n);window.open(a,"cuenta_".concat(t),"height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no")}else u.snackBar.open("No se pudo generar la comanda...","Comanda",{duration:3e3})})},this.sumaDetalle=function(e){var n,a=0,o=t(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;a+=+i.total||0,a+=+i.monto_extra||0}}catch(r){o.e(r)}finally{o.f()}return a},this.enviarPedido=function(){var t=u.mesaEnUso.cuentas[0];u.cuentaActiva=u.mesaEnUso.cuentas.find(function(e){return+e.numero==+t.numero});var e=u.lstProductosSeleccionados.filter(function(t){return+t.cuenta==+u.cuentaActiva.numero});e.map(function(t){return t.impreso=1}),u.noComanda=u.mesaEnUso.comanda,u.cuentaActiva.productos=u.prepProductosComanda(e),u.mesaEnUso.cuentas.findIndex(function(t){return+t.cuenta==+u.cuentaActiva.cuenta})>-1&&u.comandaSrvc.save({area:u.mesaEnUso.mesa.area.area,mesa:u.mesaEnUso.mesa.mesa,mesero:u.mesaEnUso.usuario,comanda:u.mesaEnUso.comanda,cuentas:u.mesaEnUso.cuentas,numero_pedido:u.mesaEnUso.numero_pedido}).subscribe(function(e){e.exito&&(u.mesaEnUso.numero_pedido=e.comanda.numero_pedido,u.comandaSrvc.setProductoImpreso(t.cuenta).subscribe(function(e){u.llenaProductosSeleccionados(e.comanda),u.setSelectedCuenta(t.numero),u.cobrarCuenta()}))})},this.cambiarEstatusCuenta=function(t){var e=u.mesaEnUso.cuentas.findIndex(function(e){return+e.cuenta==+t.cuenta});u.mesaEnUso.cuentas[e].cerrada=+t.cerrada},this.esCajero=function(){return!1},this.trasladoMesa=function(){u.dialog.open(ra,{width:"55%",data:{mesaEnUso:u.mesaEnUso}}).afterClosed().subscribe(function(t){t&&(u.socket.emit("refrescar:mesa",{mesaenuso:u.mesaEnUso}),u.closeSideNavEv.emit(u.mesaEnUso))})},this.getNotasGenerales=function(){u.dialog.open(Ja,{width:"50%",data:{notasGenerales:u.mesaEnUso.notas_generales||""}}).afterClosed().subscribe(function(t){null!==t&&t.trim().length>0&&u.comandaSrvc.saveNotasGenerales({comanda:u.mesaEnUso.comanda,notas_generales:t}).subscribe(function(e){e.exito?(u.mesaEnUso.notas_generales=t,u.snackBar.open(e.mensaje,"Comanda",{duration:3e3})):u.snackBar.open("ERROR: ".concat(e.mensaje),"Comanda",{duration:7e3})})})},this.nuevaCuenta=function(){u.dialog.open(Xa,{width:"50%",data:{mesaEnUso:u.mesaEnUso}}).afterClosed().subscribe(function(t){t&&u.closeSideNavEv.emit()})},this.distribuirProductos=function(){u.dialog.open(to,{width:"50%",data:{mesaEnUso:u.mesaEnUso,lstProductos:u.lstProductosSeleccionados||[]}}).afterClosed().subscribe(function(t){t&&u.closeSideNavEv.emit()})}}return m(e,[{key:"setSelectedCuenta",value:function(t){this.bloqueoBotones=!0,this.cuentaActiva=this.mesaEnUso.cuentas.find(function(e){return+e.numero==+t}),this.setLstProductosDeCuenta(),this.bloqueoBotones=!1}},{key:"setSumaCuenta",value:function(e){var n,a=0,o=t(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;a+=i.precio*i.cantidad}}catch(r){o.e(r)}finally{o.f()}this.sumCuenta=a}},{key:"setLstProductosDeCuenta",value:function(){var t=this;this.lstProductosDeCuenta=this.lstProductosSeleccionados.filter(function(e){return+e.cuenta==+t.cuentaActiva.numero})}},{key:"agregarProductos",value:function(t){var e=this;1==+t.combo||1==+t.multiple?(this.bloqueoBotones=!0,this.dialog.open(Qa,{maxWidth:"50%",data:new Ga(t,"S\xed","No")}).afterClosed().subscribe(function(t){t&&t.respuesta&&t.seleccion.receta.length>0?e.comandaSrvc.saveDetalleCombo(e.mesaEnUso.comanda,e.cuentaActiva.cuenta,t.seleccion).subscribe(function(t){t.exito?(e.mesaEnUso=t.comanda,e.llenaProductosSeleccionados(e.mesaEnUso),e.setSelectedCuenta(+e.cuentaActiva.numero)):e.snackBar.open("ERROR:".concat(t.mensaje),"Comanda",{duration:3e3}),e.bloqueoBotones=!1}):(e.bloqueoBotones=!1,e.snackBar.open("Error, Debe seleccionar los productos del combo","Comanda",{duration:7e3}))})):this.addProductoSelected(t)}},{key:"addProductoSelected",value:function(t){var e=this;if(this.bloqueoBotones=!0,+this.cuentaActiva.numero){var n=this.lstProductosSeleccionados.findIndex(function(n){return+n.id==+t.id&&+n.cuenta==+e.cuentaActiva.numero&&0==+n.impreso});if(n<0)this.detalleComanda={articulo:t.id,cantidad:1,precio:+t.precio,total:1*+t.precio,notas:""},this.comandaSrvc.saveDetalle(this.mesaEnUso.comanda,this.cuentaActiva.cuenta,this.detalleComanda).subscribe(function(t){t.exito?(e.mesaEnUso=t.comanda,e.llenaProductosSeleccionados(e.mesaEnUso),e.setSelectedCuenta(+e.cuentaActiva.numero)):e.snackBar.open("ERROR:".concat(t.mensaje),"Comanda",{duration:3e3}),e.bloqueoBotones=!1});else{var a=this.lstProductosSeleccionados[n];this.detalleComanda={detalle_cuenta:a.detalle_cuenta,detalle_comanda:a.detalle_comanda,articulo:a.id,cantidad:+a.cantidad+1,precio:+a.precio,total:(+a.cantidad+1)*+a.precio,notas:a.notas},this.comandaSrvc.saveDetalle(this.mesaEnUso.comanda,this.cuentaActiva.cuenta,this.detalleComanda).subscribe(function(t){t.exito?(e.mesaEnUso=t.comanda,e.llenaProductosSeleccionados(e.mesaEnUso),e.setSelectedCuenta(+e.cuentaActiva.numero)):e.snackBar.open("ERROR:".concat(t.mensaje),"Comanda",{duration:3e3}),e.bloqueoBotones=!1})}this.setLstProductosDeCuenta()}}},{key:"updProductosCuenta",value:function(t){var e=this,n=t.listaProductos||[],a=this.lstProductosSeleccionados.filter(function(t){return+t.cuenta!=+e.cuentaActiva.numero});this.lstProductosSeleccionados=n.length>0?a.concat(n):a,t.comanda&&(this.mesaEnUso=t.comanda,this.llenaProductosSeleccionados(this.mesaEnUso),this.setSelectedCuenta(+this.cuentaActiva.numero))}},{key:"prepProductosComanda",value:function(e){var n,a=[],o=t(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;a.push({articulo:i.id,cantidad:i.cantidad,precio:i.precio,total:i.total,notas:i.notas,impreso:1,detalle_comanda:i.detalle_comanda,detalle_cuenta:i.detalle_cuenta})}}catch(r){o.e(r)}finally{o.f()}return a}},{key:"validarImpresion",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.configSrvc.getConfig(Le.a.CONSTANTES.RT_INGRESO_NUMERO_PEDIDO);if(1==+this.mesaEnUso.mesa.esmostrador&&n&&!this.mesaEnUso.numero_pedido){var a=this.configSrvc.getConfig(Le.a.CONSTANTES.RT_TOTAL_NUMEROS_PEDIDO);(!a||a<=0)&&(a=30),this.dialog.open(Na,{maxWidth:"50%",data:new Aa("Numero de Pedido",a,"S\xed","No")}).afterClosed().subscribe(function(n){n&&n.respuesta&&n.pedido?(t.mesaEnUso.numero_pedido=n.pedido,t.printComanda(e)):t.snackBar.open("Error, Debe seleccionar un numero de pedido","Comanda",{duration:7e3})})}else this.printComanda(e)}},{key:"printComanda",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.bloqueoBotones=!0,this.impreso=0;for(var n=this.configSrvc.getConfig(Le.a.CONSTANTES.RT_MODO_COMANDA)||1,a=function(a){var o=t.mesaEnUso.cuentas[a];t.cuentaActiva=t.mesaEnUso.cuentas.find(function(t){return+t.numero==+o.numero});var i=t.lstProductosSeleccionados.filter(function(e){return+e.cuenta==+t.cuentaActiva.numero}),r=i.filter(function(t){return 0==+t.impreso&&+t.cantidad>0});r.length>0?(i.map(function(t){return t.impreso=1}),t.noComanda=t.mesaEnUso.comanda,t.cuentaActiva.productos=t.prepProductosComanda(i),t.mesaEnUso.cuentas.findIndex(function(e){return+e.cuenta==+t.cuentaActiva.cuenta})>-1&&t.comandaSrvc.save({area:t.mesaEnUso.mesa.area.area,mesa:t.mesaEnUso.mesa.mesa,mesero:t.mesaEnUso.usuario,comanda:t.mesaEnUso.comanda,cuentas:t.mesaEnUso.cuentas,numero_pedido:t.mesaEnUso.numero_pedido}).subscribe(function(a){a.exito?(t.mesaEnUso.numero_pedido=a.comanda.numero_pedido,t.comandaSrvc.setProductoImpreso(o.cuenta).subscribe(function(a){a.exito&&t.impreso++,t.llenaProductosSeleccionados(a.comanda),t.setSelectedCuenta(o.numero),t.snackBar.open("Cuenta actualizada","Cuenta #".concat(o.numero),{duration:3e3});var i=[],c=[];try{i=r.filter(function(t){return 0==+t.impresora.bluetooth}),c=r.filter(function(t){return 1==+t.impresora.bluetooth})}catch(s){console.log("PRODUCTOS A IMPRIMIR = ",r),console.log("NORMAL = ",i),console.log("BT = ",c),console.log(s)}e?t.printComandaPDF():(i.length>0&&(3!==n?(t.socket.emit("print:comanda","".concat(JSON.stringify({Tipo:"Comanda",Nombre:t.cuentaActiva.nombre,Numero:t.noComanda,DetalleCuenta:i,Ubicacion:"".concat(t.mesaEnUso.mesa.area.nombre," - Mesa ").concat(t.mesaEnUso.mesa.etiqueta||t.mesaEnUso.mesa.numero),Mesero:"".concat(t.mesaEnUso.mesero.nombres," ").concat(t.mesaEnUso.mesero.apellidos),Total:null,NumeroPedido:t.mesaEnUso.numero_pedido,NotasGenerales:t.mesaEnUso.notas_generales||""}))),t.snackBar.open("Imprimiendo comanda #".concat(t.noComanda),"Comanda",{duration:7e3})):t.snackBar.open("Comanda #".concat(t.noComanda," enviada a cocina"),"Comanda",{duration:7e3}),t.bloqueoBotones=!1),c.length>0&&3!==n&&t.printToBT(JSON.stringify({Tipo:"Comanda",Nombre:t.cuentaActiva.nombre,Numero:t.noComanda,DetalleCuenta:c,Ubicacion:"".concat(t.mesaEnUso.mesa.area.nombre," - Mesa ").concat(t.mesaEnUso.mesa.etiqueta||t.mesaEnUso.mesa.numero),Mesero:"".concat(t.mesaEnUso.mesero.nombres," ").concat(t.mesaEnUso.mesero.apellidos),Total:null,NumeroPedido:t.mesaEnUso.numero_pedido}))),+t.impreso===t.mesaEnUso.cuentas.length&&(t.impreso=0,t.socket.emit("refrescar:mesa",{mesaenuso:t.mesaEnUso}),t.socket.emit("refrescar:listaCocina",{mesaenuso:t.mesaEnUso}),0==+t.mesaEnUso.mesa.esmostrador?t.closeSideNavEv.emit():t.cobrarCuenta())})):t.snackBar.open("ERROR: ".concat(a.mensaje),"Cuenta #".concat(t.cuentaActiva.numero),{duration:3e3}),t.bloqueoBotones=!1})):(t.impreso++,t.bloqueoBotones=!1)},o=0;o<this.mesaEnUso.cuentas.length;o++)a(o)}},{key:"printCuenta",value:function(){this.bloqueoBotones=!0,this.lstProductosAImprimir=this.lstProductosDeCuenta.filter(function(t){return 1==+t.impreso}),this.setSumaCuenta(this.lstProductosAImprimir);var t=this.sumaDetalle(this.lstProductosAImprimir),e=this.mesaEnUso.mesa.impresora||this.mesaEnUso.mesa.area.impresora,n=this.configSrvc.getConfig(Le.a.CONSTANTES.RT_IMPRIME_PROPINA_SUGERIDA),a={Tipo:"Cuenta",Nombre:this.cuentaActiva.nombre,Numero:null,DetalleCuenta:this.lstProductosAImprimir,Total:t,Empresa:this.ls.get(Le.a.usrTokenVar).empresa,Restaurante:this.ls.get(Le.a.usrTokenVar).restaurante,PropinaSugerida:n?(.1*t).toFixed(2):null,Impresora:e,Ubicacion:"".concat(this.mesaEnUso.mesa.area.nombre," - Mesa ").concat(this.mesaEnUso.mesa.etiqueta||this.mesaEnUso.mesa.numero," - Comanda ").concat(this.mesaEnUso.comanda),Mesero:"".concat(this.mesaEnUso.mesero.nombres," ").concat(this.mesaEnUso.mesero.apellidos)};0==+e.bluetooth?this.socket.emit("print:cuenta","".concat(JSON.stringify(a))):this.printToBT(JSON.stringify(a)),this.snackBar.open("Imprimiendo cuenta de ".concat(this.cuentaActiva.nombre),"Cuenta",{duration:7e3}),this.bloqueoBotones=!1,this.closeSideNavEv.emit()}},{key:"unirCuentas",value:function(){var t=this;this.dialog.open(ea,{width:"55%",data:{lstProductosSeleccionados:this.lstProductosSeleccionados,mesaEnUso:this.mesaEnUso}}).afterClosed().subscribe(function(e){e&&t.closeSideNavEv.emit()})}},{key:"cobrarCuenta",value:function(){var t=this;this.comandaSrvc.getCuenta(this.cuentaActiva.cuenta).subscribe(function(e){if(e.pendiente.length>0)t.snackBar.open("Cobro","Tiene productos sin comandar",{duration:3e3});else{var n=t.lstProductosDeCuenta.filter(function(t){return 1==+t.impreso});n.length>0?t.dialog.open(Ma,{width:"95%",data:{mesaenuso:t.mesaEnUso,cuenta:t.cuentaActiva.nombre,idcuenta:t.cuentaActiva.cuenta,productosACobrar:n,porcentajePropina:0,impresora:0==+t.mesaEnUso.mesa.esmostrador?t.mesaEnUso.mesa.area.impresora_factura||null:t.mesaEnUso.mesa.impresora||t.mesaEnUso.mesa.area.impresora,clientePedido:t.clientePedido}}).afterClosed().subscribe(function(e){e&&"closePanel"!==e?(t.cambiarEstatusCuenta(e),t.closeSideNavEv.emit()):"closePanel"===e&&t.closeSideNavEv.emit()}):t.snackBar.open("Cobro","Sin productos a cobrar.",{duration:3e3})}})}}]),e}())).\u0275fac=function(t){return new(t||lo)(z.Nb(U.f),z.Nb(U.a),z.Nb(U.b),z.Nb(R.a),z.Nb(Zn),z.Nb(ma.a),z.Nb(We.a),z.Nb(eo.a),z.Nb(no.a),z.Nb(Ua.a))},lo.\u0275cmp=z.Hb({type:lo,selectors:[["app-tran-comanda-alt"]],viewQuery:function(t,e){var n;1&t&&z.Ic(ao,1),2&t&&z.sc(n=z.cc())&&(e.txtCodigoBarras=n.first)},outputs:{closeSideNavEv:"closeSideNavEv",mesaSavedEv:"mesaSavedEv"},features:[z.zb],decls:19,vars:8,consts:[["fxLayout","row","fxLayout.xs","column"],["fxFlex","50%","fxFelx.xs","100%","fxLayoutAlign","start start"],[1,"bld",2,"font-size","16pt","margin-left","10px"],["fxFlex","50%","fxFelx.xs","100%","fxLayoutAlign","end start"],["mat-raised-button","","type","button","color","accent",2,"margin-left","8px",3,"disabled","click"],["mat-dialog-content","",1,"contenido","bordeTest"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","center center"],["color","accent","selected","",3,"disabled","click",4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","start center"],["selected","","color","accent",3,"disabled","click",4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","start center","class","divSubCategorias",4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayoutGap","8px grid",1,"divArticulos"],["fxFlex","20%","fxFlex.xs","100%","fxFlex.sm","33%","fxFlex.md","25%",4,"ngFor","ngForOf"],["color","accent","selected","",3,"disabled","click"],["selected","","color","accent",3,"disabled","click"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","start center",1,"divSubCategorias"],["selected","","color","warn","class","btnAccion",3,"disabled","click",4,"ngFor","ngForOf"],["selected","","color","warn",1,"btnAccion",3,"disabled","click"],["fxFlex","20%","fxFlex.xs","100%","fxFlex.sm","33%","fxFlex.md","25%"],[1,"mat-elevation-z4",3,"click"],["align","around"],["matBadge","4","matBadgeOverlap","false"]],template:function(t,e){1&t&&(z.Tb(0,"div",0),z.Tb(1,"div",1),z.Tb(2,"span",2),z.Dc(3),z.Sb(),z.Sb(),z.Tb(4,"div",3),z.Tb(5,"button",4),z.bc("click",function(){return e.cerrar()}),z.Dc(6," Cerrar "),z.Sb(),z.Sb(),z.Sb(),z.Tb(7,"div",5),z.Tb(8,"div",6),z.Tb(9,"mat-chip-list"),z.Cc(10,oo,2,2,"mat-chip",7),z.Sb(),z.Sb(),z.Ob(11,"mat-divider"),z.Tb(12,"div",8),z.Tb(13,"mat-chip-list"),z.Cc(14,io,2,2,"mat-chip",9),z.Sb(),z.Sb(),z.Ob(15,"mat-divider"),z.Cc(16,co,3,1,"div",10),z.Tb(17,"div",11),z.Cc(18,so,10,1,"div",12),z.Sb(),z.Sb()),2&t&&(z.Cb(3),z.Hc(" ",e.mesaEnUso.mesa.area.nombre," - Mesa",e.mesaEnUso.mesa.numero," - Comanda ",e.mesaEnUso.comanda," "),z.Cb(2),z.lc("disabled",e.bloqueoBotones),z.Cb(5),z.lc("ngForOf",e.mesaEnUso.cuentas),z.Cb(4),z.lc("ngForOf",e.categorias),z.Cb(2),z.lc("ngForOf",e.listaSubCategorias),z.Cb(2),z.lc("ngForOf",e.articulos))},directives:[Ra.c,Ra.a,Ra.b,M.a,U.d,Ae,b.l,w.a,Ra.d,Oe,D.a,D.c,D.b,ve],styles:[".contenido[_ngcontent-%COMP%]{max-height:85vh!important;height:100%}.lnkCategorias[_ngcontent-%COMP%]{margin-right:8px;text-decoration:underline}.divSubCategorias[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0;padding-top:2px;padding-bottom:2px}.divArticulos[_ngcontent-%COMP%]{padding:16px}.divArticulos[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]{width:200px}"]}),lo);function bo(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",6),z.bc("click",function(){z.wc(n);var t=z.fc().$implicit;return z.fc().clickOnSubCategoria(t)}),z.Dc(1),z.Sb()}if(2&t){var a=z.fc().$implicit,o=z.fc();z.lc("disabled",o.bloqueoBotones),z.Cb(1),z.Fc(" ",a.descripcion," ")}}function mo(t,e){if(1&t&&(z.Rb(0),z.Cc(1,bo,2,2,"button",5),z.Qb()),2&t){var n=e.$implicit;z.Cb(1),z.lc("ngIf",n.mostrarEnPos)}}function fo(t,e){1&t&&z.Ob(0,"hr")}function po(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",7),z.bc("click",function(){z.wc(n);var t=e.$implicit;return z.fc().clickOnArticulo(t)}),z.Dc(1),z.Sb()}if(2&t){var a=e.$implicit,o=z.fc();z.lc("disabled",o.bloqueoBotones),z.Cb(1),z.Fc(" ",a.descripcion," ")}}var ho,go,vo=((go=function(){function e(n,a){var o=this;d(this,e),this.articuloSrvc=n,this.ls=a,this.bloqueoBotones=!1,this.productoClickedEv=new z.o,this.categoriasFilledEv=new z.o,this.categorias=[],this.subcategorias=[],this.articulos=[],this.loadArbolArticulos=function(){o.articuloSrvc.getArbolArticulos(o.ls.get(Le.a.usrTokenVar).sede||0).subscribe(function(t){o.fillCategorias(t)})},this.fillCategorias=function(e){o.categorias=[],o.subcategorias=[],o.articulos=[];var n,a=t(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;o.categorias.push(i)}}catch(r){a.e(r)}finally{a.f()}o.categoriasFilledEv.emit(o.categorias)},this.fillSubCategorias=function(e){o.subcategorias=[],o.articulos=[];var n,a=t(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;o.subcategorias.push(i)}}catch(r){a.e(r)}finally{a.f()}},this.fillArticulos=function(e){o.articulos=[];var n,a=t(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;o.articulos.push(i)}}catch(r){a.e(r)}finally{a.f()}},this.clickOnCategoria=function(t){t.categoria_grupo.length>0&&o.fillSubCategorias(t.categoria_grupo)},this.clickOnSubCategoria=function(t){t.articulo.length>0&&o.fillArticulos(t.articulo)},this.clickOnArticulo=function(t){o.productoClickedEv.emit({id:+t.articulo,nombre:t.descripcion,precio:+t.precio,impresora:t.impresora,presentacion:t.presentacion,codigo:t.codigo,combo:t.combo,multiple:t.multiple})}}return m(e,[{key:"ngOnInit",value:function(){this.loadArbolArticulos()}}]),e}()).\u0275fac=function(t){return new(t||go)(z.Nb(Ua.a),z.Nb(We.a))},go.\u0275cmp=z.Hb({type:go,selectors:[["app-lista-producto-alt"]],inputs:{bloqueoBotones:"bloqueoBotones"},outputs:{productoClickedEv:"productoClickedEv",categoriasFilledEv:"categoriasFilledEv"},decls:7,vars:3,consts:[[1,"row"],[1,"col","m12","s12"],[4,"ngFor","ngForOf"],[4,"ngIf"],["mat-raised-button","","class","btnAccion","color","warn",3,"disabled","click",4,"ngFor","ngForOf"],["mat-raised-button","","class","btnAccion","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","color","warn",1,"btnAccion",3,"disabled","click"]],template:function(t,e){1&t&&(z.Tb(0,"div",0),z.Tb(1,"div",1),z.Cc(2,mo,2,1,"ng-container",2),z.Sb(),z.Sb(),z.Cc(3,fo,1,0,"hr",3),z.Tb(4,"div",0),z.Tb(5,"div",1),z.Cc(6,po,2,2,"button",4),z.Sb(),z.Sb()),2&t&&(z.Cb(2),z.lc("ngForOf",e.subcategorias),z.Cb(1),z.lc("ngIf",e.articulos.length>0),z.Cb(3),z.lc("ngForOf",e.articulos))},directives:[b.l,b.m,M.a],styles:[""]}),go),Co=((ho=function(){function t(e,n){var a=this;d(this,t),this.dialogRef=e,this.comandaSrvc=n,this.data={pwd:void 0},this.cancelar=function(){return a.dialogRef.close()},this.terminar=function(){a.comandaSrvc.validaPwdGerenteTurno(a.data.pwd).subscribe(function(t){a.dialogRef.close(!!t.exito&&t.esgerente)})}}return m(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||ho)(z.Nb(U.f),z.Nb(Zn))},ho.\u0275cmp=z.Hb({type:ho,selectors:[["app-valida-pwd-gerente-turno"]],decls:12,vars:2,consts:[["mat-dialog-title",""],["novalidate","",3,"ngSubmit"],["frmValidarPwdGerenteTurno","ngForm"],[1,"fullWidth"],["type","password","matInput","","placeholder","Contrase\xf1a del gerente de turno","name","pwd","required","",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","color","secondary",1,"btnAccion",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"]],template:function(t,e){if(1&t){var n=z.Ub();z.Tb(0,"h1",0),z.Dc(1,"Contrase\xf1a del gerente de turno"),z.Sb(),z.Tb(2,"mat-dialog-content"),z.Tb(3,"form",1,2),z.bc("ngSubmit",function(){return z.wc(n),z.tc(4).form.valid}),z.Tb(5,"mat-form-field",3),z.Tb(6,"input",4),z.bc("ngModelChange",function(t){return e.data.pwd=t}),z.Sb(),z.Sb(),z.Sb(),z.Sb(),z.Tb(7,"mat-dialog-actions",5),z.Tb(8,"button",6),z.bc("click",function(){return e.cancelar()}),z.Dc(9," Cancelar "),z.Sb(),z.Tb(10,"button",7),z.bc("click",function(){return e.terminar()}),z.Dc(11," Eliminar producto "),z.Sb(),z.Sb()}if(2&t){var a=z.tc(4);z.Cb(6),z.lc("ngModel",e.data.pwd),z.Cb(4),z.lc("disabled",!a.form.valid)}},directives:[U.g,U.d,p.r,p.l,p.m,y.b,k.b,p.c,p.p,p.k,p.n,U.c,M.a],styles:[""]}),ho);function So(t,e){if(1&t&&(z.Rb(0),z.Dc(1),z.Qb()),2&t){var n=z.fc(2).$implicit;z.Cb(1),z.Fc(" ",n.cantidad," ")}}function _o(t,e){if(1&t&&(z.Tb(0,"div",7),z.Tb(1,"span",12),z.Dc(2),z.Sb(),z.Sb()),2&t){var n=e.$implicit;z.Cb(2),z.Ec(n)}}function To(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",16),z.bc("click",function(){z.wc(n);var t=z.fc(3),e=t.$implicit,a=t.index;return z.fc().removeProducto(e,a)}),z.Tb(1,"mat-icon",17),z.Dc(2,"remove_circle"),z.Sb(),z.Sb()}if(2&t){var a=z.fc(4);z.lc("disabled",a.bloqueoBotones)}}function yo(t,e){if(1&t){var n=z.Ub();z.Tb(0,"eco-fab-speed-dial",13),z.Tb(1,"eco-fab-speed-dial-trigger"),z.Tb(2,"button",14),z.Tb(3,"mat-icon",15),z.Dc(4,"keyboard_arrow_left"),z.Sb(),z.Sb(),z.Sb(),z.Tb(5,"eco-fab-speed-dial-actions"),z.Tb(6,"button",16),z.bc("click",function(){z.wc(n);var t=z.fc(2),e=t.$implicit,a=t.index;return z.fc().deleteProductoFromList(e,a)}),z.Tb(7,"mat-icon",17),z.Dc(8,"delete_forever"),z.Sb(),z.Sb(),z.Cc(9,To,3,1,"button",18),z.Tb(10,"button",19),z.bc("click",function(){z.wc(n);var t=z.fc(2).$implicit;return z.fc().toggleShowInputNotas(t)}),z.Tb(11,"mat-icon",17),z.Dc(12,"notes"),z.Sb(),z.Sb(),z.Sb(),z.Sb()}if(2&t){var a=z.fc(2).$implicit,o=z.fc();z.Cb(6),z.lc("disabled",o.bloqueoBotones),z.Cb(3),z.lc("ngIf",a.detalle.length<=1),z.Cb(1),z.lc("disabled",o.bloqueoBotones)}}function ko(t,e){if(1&t){var n=z.Ub();z.Tb(0,"eco-fab-speed-dial",13),z.Tb(1,"eco-fab-speed-dial-trigger"),z.Tb(2,"button",14),z.Tb(3,"mat-icon",15),z.Dc(4,"keyboard_arrow_left"),z.Sb(),z.Sb(),z.Sb(),z.Tb(5,"eco-fab-speed-dial-actions"),z.Tb(6,"button",16),z.bc("click",function(){z.wc(n);var t=z.fc(2),e=t.$implicit,a=t.index;return z.fc().deleteProductoFromListAfterPrinted(e,a)}),z.Tb(7,"mat-icon",17),z.Dc(8,"delete_forever"),z.Sb(),z.Sb(),z.Sb(),z.Sb()}if(2&t){var a=z.fc(3);z.Cb(6),z.lc("disabled",a.bloqueoBotones)}}function Do(t,e){if(1&t&&(z.Tb(0,"div",4),z.Tb(1,"div",5),z.Tb(2,"div",6),z.Tb(3,"span",7),z.Cc(4,So,2,1,"ng-container",8),z.Dc(5),z.Sb(),z.Cc(6,_o,3,1,"div",9),z.Sb(),z.Tb(7,"div",10),z.Tb(8,"span"),z.Dc(9),z.gc(10,"number"),z.Sb(),z.Dc(11,"\xa0 "),z.Cc(12,yo,13,3,"eco-fab-speed-dial",11),z.Cc(13,ko,9,1,"eco-fab-speed-dial",11),z.Sb(),z.Sb(),z.Sb()),2&t){var n=z.fc().$implicit;z.Cb(4),z.lc("ngIf",0==+n.multiple),z.Cb(1),z.Fc(" ",n.nombre," "),z.Cb(1),z.lc("ngForOf",n.detalle),z.Cb(3),z.Ec(z.ic(10,6,n.cantidad*n.precio+n.monto_extra,"1.2-2")),z.Cb(3),z.lc("ngIf",0==+n.impreso),z.Cb(1),z.lc("ngIf",1==+n.impreso)}}function wo(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-form-field",0),z.Tb(1,"input",21),z.bc("ngModelChange",function(t){return z.wc(n),z.fc(2).$implicit.notas=t})("keyup.enter",function(){z.wc(n);var t=z.fc(2).$implicit;return z.fc().toggleShowInputNotas(t)})("blur",function(){z.wc(n);var t=z.fc(2).$implicit;return z.fc().saveNotasProducto(t)}),z.Sb(),z.Sb()}if(2&t){var a=z.fc(2).$implicit;z.Cb(1),z.lc("ngModel",a.notas)}}function Eo(t,e){if(1&t&&(z.Tb(0,"div",4),z.Cc(1,wo,2,1,"mat-form-field",20),z.Sb()),2&t){var n=z.fc().$implicit,a=z.fc();z.Cb(1),z.lc("ngIf",n.showInputNotas&&a.esMovil)}}var xo=function(t){return{noImpreso:t}};function Po(t,e){if(1&t&&(z.Tb(0,"mat-list-item",2),z.Cc(1,Do,14,9,"div",3),z.Cc(2,Eo,2,1,"div",3),z.Sb()),2&t){var n=e.$implicit;z.lc("ngClass",z.oc(3,xo,0==+n.impreso)),z.Cb(1),z.lc("ngIf",+n.cantidad>0),z.Cb(1),z.lc("ngIf",+n.cantidad>0)}}var Oo,Mo=((Oo=function(){function t(e,n,a,o,i){var r=this;d(this,t),this.snackBar=e,this.ls=n,this.comandaSrvc=a,this.socket=o,this.dialog=i,this.listaProductos=[],this.noCuenta=null,this.listHeight="450px",this.IdComanda=0,this.IdCuenta=0,this.bloqueoBotones=!1,this.mesaEnUso={},this.productoRemovedEv=new z.o,this.esMovil=!1,this.removeProducto=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r.bloqueoBotones=!0,r.detalleComanda={detalle_cuenta:t.detalle_cuenta,detalle_comanda:t.detalle_comanda,articulo:t.id,cantidad:+t.cantidad>1?+t.cantidad-1:0,precio:+t.precio,total:+t.cantidad>1?(+t.cantidad-1)*+t.precio:0,notas:t.notas,autorizado:n},r.comandaSrvc.saveDetalle(r.IdComanda,r.IdCuenta,r.detalleComanda).subscribe(function(e){e.exito?(t.cantidad=r.detalleComanda.cantidad,r.productoRemovedEv.emit({listaProductos:r.listaProductos,comanda:e.comanda}),0==+t.cantidad&&(r.socket.emit("refrescar:mesa",{mesaenuso:r.mesaEnUso}),r.socket.emit("refrescar:listaCocina",{mesaenuso:r.mesaEnUso}))):r.snackBar.open("ERROR: ".concat(e.mensaje),"Comanda",{duration:3e3}),r.bloqueoBotones=!1})},this.deleteProductoFromList=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.cantidad=0,t.notas="",r.removeProducto(t,e,n)},this.deleteProductoFromListAfterPrinted=function(t,e){r.bloqueoBotones=!0,r.dialog.open(Co,{width:"40%",disableClose:!0}).afterClosed().subscribe(function(n){n?(r.deleteProductoFromList(t,e,!0),r.snackBar.open("Se eliminar\xe1 el producto seleccionado.","Comanda",{duration:5e3})):r.snackBar.open("La contrase\xf1a no es correcta","Comanda",{duration:5e3}),r.bloqueoBotones=!1})},this.saveNotasProducto=function(t){r.comandaSrvc.saveNotasProducto({detalle_comanda:t.detalle_comanda,notas:t.notas}).subscribe(function(t){t.exito&&r.snackBar.open("Notas de producto guardadas con \xe9xito...","Producto",{duration:3e3})})}}return m(t,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(Le.a.usrTokenVar).enmovil||!1}},{key:"toggleShowInputNotas",value:function(t){console.log("ARTICULO = ",t),t.showInputNotas=!t.showInputNotas,t.showInputNotas?t.itemListHeight="140px":(t.itemListHeight="70px",this.saveNotasProducto(t))}},{key:"doAction",value:function(t){console.log(t)}}]),t}()).\u0275fac=function(t){return new(t||Oo)(z.Nb(R.a),z.Nb(We.a),z.Nb(Zn),z.Nb(ma.a),z.Nb(U.b))},Oo.\u0275cmp=z.Hb({type:Oo,selectors:[["app-lista-productos-comanda"]],inputs:{listaProductos:"listaProductos",noCuenta:"noCuenta",listHeight:"listHeight",IdComanda:"IdComanda",IdCuenta:"IdCuenta",bloqueoBotones:"bloqueoBotones",mesaEnUso:"mesaEnUso"},outputs:{productoRemovedEv:"productoRemovedEv"},decls:2,vars:3,consts:[[1,"fullWidth"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["matLine","","class","fullWidth",4,"ngIf"],["matLine","",1,"fullWidth"],[1,"row"],[1,"col","m6","s12"],["matLine",""],[4,"ngIf"],["matLine","",4,"ngFor","ngForOf"],["align","end",1,"col","m6","s12"],["direction","left",4,"ngIf"],[1,"tabulador"],["direction","left"],["mat-fab",""],[2,"font-size","18pt !important"],["mat-mini-fab","","color","warn",3,"disabled","click"],[2,"font-size","16pt !important"],["mat-mini-fab","","color","warn",3,"disabled","click",4,"ngIf"],["mat-mini-fab","","color","accent",3,"disabled","click"],["class","fullWidth",4,"ngIf"],["matInput","","placeholder","Notas de producto","maxlength","1000",3,"ngModel","ngModelChange","keyup.enter","blur"]],template:function(t,e){1&t&&(z.Tb(0,"mat-list",0),z.Cc(1,Po,3,5,"mat-list-item",1),z.Sb()),2&t&&(z.zc("height",e.listHeight),z.Cb(1),z.lc("ngForOf",e.listaProductos))},directives:[_.a,b.l,_.c,b.k,cn.a,b.m,$.h,je.b,je.d,M.a,T.a,je.a,y.b,k.b,p.c,p.f,p.k,p.n],pipes:[b.f],styles:[".fullWidth[_ngcontent-%COMP%]{width:100%!important}.spacer[_ngcontent-%COMP%]{flex:1 1 auto!important}.noImpreso[_ngcontent-%COMP%]{background-color:#c7c7c7}.text-pre-wrap[_ngcontent-%COMP%]{white-space:pre-wrap!important}"]}),Oo),Ro=["appLstProdAlt"],Io=["txtCodigoBarras"];function Fo(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",27),z.bc("click",function(){z.wc(n);var t=e.$implicit;return z.fc().setSelectedCuenta(t.numero)}),z.Dc(1),z.Sb()}if(2&t){var a=e.$implicit;z.lc("disabled",1==+a.cerrada),z.Cb(1),z.Fc(" ",a.nombre," ")}}function Ao(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",28),z.bc("click",function(){return z.wc(n),z.fc().nuevaCuenta()}),z.Dc(1," Nueva "),z.Sb()}}var No=function(){return{standalone:!0}};function Uo(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-form-field",29),z.Tb(1,"input",30,31),z.bc("ngModelChange",function(t){return z.wc(n),z.fc().codigoBarras=t})("keyup.enter",function(){return z.wc(n),z.fc().buscarArticulo()}),z.Sb(),z.Sb()}if(2&t){var a=z.fc();z.Cb(1),z.lc("ngModel",a.codigoBarras)("ngModelOptions",z.nc(2,No))}}function jo(t,e){1&t&&z.Ob(0,"br")}function Bo(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",33),z.bc("click",function(){z.wc(n);var t=z.fc().$implicit;return z.fc().clickOnCategoria(t)}),z.Dc(1),z.Sb()}if(2&t){var a=z.fc().$implicit,o=z.fc();z.lc("disabled",o.bloqueoBotones||!o.cuentaActiva.cuenta),z.Cb(1),z.Fc(" ",a.descripcion," ")}}function Lo(t,e){if(1&t&&(z.Rb(0),z.Cc(1,Bo,2,2,"button",32),z.Qb()),2&t){var n=e.$implicit;z.Cb(1),z.lc("ngIf",n.mostrarEnPos)}}function Ho(t,e){if(1&t&&(z.Tb(0,"span",11),z.Dc(1),z.Sb()),2&t){var n=z.fc();z.Cb(1),z.Fc("Cuenta de ",n.cuentaActiva.nombre,"")}}function zo(t,e){1&t&&(z.Tb(0,"span",11),z.Dc(1,"Por favor seleccione una cuenta. Gracias."),z.Sb())}function qo(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",20),z.bc("click",function(){return z.wc(n),z.fc().validarImpresion()}),z.Dc(1," Comanda "),z.Sb()}if(2&t){var a=z.fc();z.lc("disabled",!a.cuentaActiva.nombre||a.bloqueoBotones)}}function $o(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",20),z.bc("click",function(){return z.wc(n),z.fc().printCuenta()}),z.Dc(1," Cuenta "),z.Sb()}if(2&t){var a=z.fc();z.lc("disabled",!a.cuentaActiva.nombre||a.bloqueoBotones)}}function Vo(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",20),z.bc("click",function(){return z.wc(n),z.fc().distribuirProductos()}),z.Dc(1," Distribuir "),z.Sb()}if(2&t){var a=z.fc();z.lc("disabled",a.mesaEnUso.cuentas.length<2||a.bloqueoBotones)}}function Wo(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",20),z.bc("click",function(){return z.wc(n),z.fc().unirCuentas()}),z.Dc(1," Unir cuentas "),z.Sb()}if(2&t){var a=z.fc();z.lc("disabled",a.mesaEnUso.cuentas.length<2||a.bloqueoBotones)}}function Go(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",20),z.bc("click",function(){return z.wc(n),z.fc().cobrarCuenta()}),z.Dc(1," Cobrar cuenta "),z.Sb()}if(2&t){var a=z.fc();z.lc("disabled",!a.cuentaActiva.nombre||a.esCajero()||a.bloqueoBotones)}}function Qo(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",20),z.bc("click",function(){return z.wc(n),z.fc().enviarPedido()}),z.Dc(1," Enviar pedido "),z.Sb()}if(2&t){var a=z.fc();z.lc("disabled",!a.cuentaActiva.nombre||a.esCajero()||a.bloqueoBotones)}}function Jo(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",20),z.bc("click",function(){return z.wc(n),z.fc().trasladoMesa()}),z.Dc(1," Trasladar "),z.Sb()}if(2&t){var a=z.fc();z.lc("disabled",a.bloqueoBotones)}}function Xo(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",34),z.bc("click",function(){return z.wc(n),z.fc().cerrarMesa()}),z.Dc(1),z.Sb()}if(2&t){var a=z.fc();z.Cb(1),z.Fc(" Cerrar ",0==+a.mesaEnUso.mesa.esmostrador?"Mesa":0==+a.mesaEnUso.mesa.escallcenter?"Mostrador":"Pedido"," ")}}var Zo,Ko=((Zo=function(){function e(n,a,o,i,r,c,s,l){var u=this;d(this,e),this.dialog=n,this.snackBar=a,this.comandaSrvc=o,this.socket=i,this.ls=r,this.pdfServicio=c,this.configSrvc=s,this.articuloSrvc=l,this.clientePedido=null,this.closeSideNavEv=new z.o,this.mesaSavedEv=new z.o,this.showPortalComanda=!1,this.showPortalCuenta=!1,this.noComanda=0,this.sumCuenta=0,this.categorias=[],this.bloqueoBotones=!1,this.rolesUsuario=[],this.impreso=0,this.usaCodigoBarras=!1,this.codigoBarras=null,this.resetMesaEnUso=function(){return u.mesaEnUso={exito:!0,comanda:null,usuario:null,sede:null,estatus:null,mesa:{mesa:null,area:{area:null,sede:null,area_padre:null,nombre:null},numero:null,posx:null,posy:null,tamanio:null,estatus:null},numero_pedido:null,cuentas:[]}},this.resetLstProductosSeleccionados=function(){return u.lstProductosSeleccionados=[]},this.resetLstProductosDeCuenta=function(){return u.lstProductosDeCuenta=[]},this.resetCuentaActiva=function(){return u.cuentaActiva={cuenta:null,numero:null,nombre:null,productos:[]}},this.resetListadoArticulos=function(){return u.appLstProdAlt.loadArbolArticulos()},this.setListaCategorias=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return u.categorias=u.setVerBotones(t)},this.setVerBotones=function(e){var n,a=t(e);try{for(a.s();!(n=a.n()).done;){var o,i=n.value,r=t(i.categoria_grupo);try{t:for(r.s();!(o=r.n()).done;){var c,s=o.value,l=t(s.articulo);try{for(l.s();!(c=l.n()).done;)if(1==+c.value.mostrar_pos){s.mostrarEnPos=!0,i.mostrarEnPos=!0;continue t}}catch(u){l.e(u)}finally{l.f()}}}catch(u){r.e(u)}finally{r.f()}}}catch(u){a.e(u)}finally{a.f()}return e},this.clickOnCategoria=function(t){return u.appLstProdAlt.fillSubCategorias(t.categoria_grupo)},this.buscarArticulo=function(){u.codigoBarras&&u.codigoBarras.trim().length>0&&u.articuloSrvc.getArticulos({codigo:u.codigoBarras.trim()}).subscribe(function(t){if(t&&t.length>0){var e=t[0];u.agregarProductos({id:+e.articulo,nombre:e.descripcion,precio:+e.precio,impresora:e.impresora,presentacion:e.presentacion,codigo:e.codigo,combo:e.combo,multiple:e.multiple}),u.codigoBarras=null,u.txtCodigoBarras.focus()}})},this.llenaProductosSeleccionados=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.mesaEnUso;null==u.mesaEnUso.comanda&&(u.mesaEnUso=e),u.lstProductosSeleccionados=[];var n,a=t(e.cuentas);try{for(a.s();!(n=a.n()).done;){var o,i=n.value,r=t(i.productos);try{for(r.s();!(o=r.n()).done;){var c=o.value;u.lstProductosSeleccionados.push({id:+c.articulo.articulo,nombre:c.articulo.descripcion,cuenta:+c.numero_cuenta||1,idcuenta:+i.cuenta,cantidad:+c.cantidad,impreso:+c.impreso,precio:parseFloat(c.precio)||10,total:parseFloat(c.total)||parseFloat(c.cantidad)*parseFloat(c.precio),notas:c.notas||"",showInputNotas:!1,itemListHeight:"70px",detalle_comanda:+c.detalle_comanda,detalle_cuenta:+c.detalle_cuenta,impresora:c.articulo.impresora,detalle:c.detalle,monto_extra:+c.monto_extra||0,multiple:+c.articulo.multiple,combo:+c.articulo.combo})}}catch(s){r.e(s)}finally{r.f()}}}catch(s){a.e(s)}finally{a.f()}},this.cerrarMesa=function(){u.comandaSrvc.cerrarMesa(u.mesaEnUso.mesa.mesa).subscribe(function(t){t.exito?(u.snackBar.open(t.mensaje,"Comanda",{duration:3e3}),u.mesaEnUso.mesa.estatus=1,u.mesaSavedEv.emit(),u.socket.emit("refrescar:mesa",{mesaenuso:u.mesaEnUso})):u.snackBar.open("ERROR: ".concat(t.mensaje),"Comanda",{duration:7e3})})},this.printToBT=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=window.open("com.restouch.impresion://impresion/".concat(t),"PrntBT","height=200,width=200,menubar=no,location=no,resizable=no,scrollbars=no,status=no");setTimeout(function(){return e.close()},1e3),u.bloqueoBotones=!1},this.printComandaPDF=function(){var t=+u.cuentaActiva.cuenta;u.pdfServicio.getComanda(t).subscribe(function(e){if(e){var n=new Blob([e],{type:"application/pdf"}),a=window.URL.createObjectURL(n);window.open(a,"cuenta_".concat(t),"height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no")}else u.snackBar.open("No se pudo generar la comanda...","Comanda",{duration:3e3})})},this.sumaDetalle=function(e){var n,a=0,o=t(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;a+=+i.total||0,a+=+i.monto_extra||0}}catch(r){o.e(r)}finally{o.f()}return a},this.enviarPedido=function(){var t=u.mesaEnUso.cuentas[0];u.cuentaActiva=u.mesaEnUso.cuentas.find(function(e){return+e.numero==+t.numero});var e=u.lstProductosSeleccionados.filter(function(t){return+t.cuenta==+u.cuentaActiva.numero});e.map(function(t){return t.impreso=1}),u.noComanda=u.mesaEnUso.comanda,u.cuentaActiva.productos=u.prepProductosComanda(e),u.mesaEnUso.cuentas.findIndex(function(t){return+t.cuenta==+u.cuentaActiva.cuenta})>-1&&u.comandaSrvc.save({area:u.mesaEnUso.mesa.area.area,mesa:u.mesaEnUso.mesa.mesa,mesero:u.mesaEnUso.usuario,comanda:u.mesaEnUso.comanda,cuentas:u.mesaEnUso.cuentas,numero_pedido:u.mesaEnUso.numero_pedido}).subscribe(function(e){e.exito&&(u.mesaEnUso.numero_pedido=e.comanda.numero_pedido,u.comandaSrvc.setProductoImpreso(t.cuenta).subscribe(function(e){u.llenaProductosSeleccionados(e.comanda),u.setSelectedCuenta(t.numero),u.cobrarCuenta()}))})},this.cambiarEstatusCuenta=function(t){var e=u.mesaEnUso.cuentas.findIndex(function(e){return+e.cuenta==+t.cuenta});u.mesaEnUso.cuentas[e].cerrada=+t.cerrada},this.esCajero=function(){return!1},this.trasladoMesa=function(){u.dialog.open(ra,{width:"55%",data:{mesaEnUso:u.mesaEnUso}}).afterClosed().subscribe(function(t){t&&(u.socket.emit("refrescar:mesa",{mesaenuso:u.mesaEnUso}),u.closeSideNavEv.emit(u.mesaEnUso))})},this.getNotasGenerales=function(){u.dialog.open(Ja,{width:"50%",data:{notasGenerales:u.mesaEnUso.notas_generales||""}}).afterClosed().subscribe(function(t){null!==t&&t.trim().length>0&&u.comandaSrvc.saveNotasGenerales({comanda:u.mesaEnUso.comanda,notas_generales:t}).subscribe(function(e){e.exito?(u.mesaEnUso.notas_generales=t,u.snackBar.open(e.mensaje,"Comanda",{duration:3e3})):u.snackBar.open("ERROR: ".concat(e.mensaje),"Comanda",{duration:7e3})})})},this.nuevaCuenta=function(){u.dialog.open(Xa,{width:"50%",data:{mesaEnUso:u.mesaEnUso}}).afterClosed().subscribe(function(t){t&&u.closeSideNavEv.emit()})},this.distribuirProductos=function(){u.dialog.open(to,{width:"50%",data:{mesaEnUso:u.mesaEnUso,lstProductos:u.lstProductosSeleccionados||[]}}).afterClosed().subscribe(function(t){t&&u.closeSideNavEv.emit()})}}return m(e,[{key:"ngOnInit",value:function(){var t=this;this.resetMesaEnUso(),this.resetLstProductosSeleccionados(),this.resetLstProductosDeCuenta(),this.resetCuentaActiva(),this.impreso=0,this.noComanda=this.mesaEnUso.comanda||0,this.llenaProductosSeleccionados(),this.ls.get(Le.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(Le.a.usrTokenVar).sede_uuid),this.socket.on("reconnect",function(){return t.socket.emit("joinRestaurant",t.ls.get(Le.a.usrTokenVar).sede_uuid)})),this.usaCodigoBarras=this.configSrvc.getConfig(Le.a.CONSTANTES.RT_USA_CODIGO_BARRAS)||!1}},{key:"setSelectedCuenta",value:function(t){this.bloqueoBotones=!0,this.cuentaActiva=this.mesaEnUso.cuentas.find(function(e){return+e.numero==+t}),this.setLstProductosDeCuenta(),this.bloqueoBotones=!1}},{key:"setSumaCuenta",value:function(e){var n,a=0,o=t(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;a+=i.precio*i.cantidad}}catch(r){o.e(r)}finally{o.f()}this.sumCuenta=a}},{key:"setLstProductosDeCuenta",value:function(){var t=this;this.lstProductosDeCuenta=this.lstProductosSeleccionados.filter(function(e){return+e.cuenta==+t.cuentaActiva.numero})}},{key:"agregarProductos",value:function(t){var e=this;1==+t.combo||1==+t.multiple?(this.bloqueoBotones=!0,this.dialog.open(Qa,{maxWidth:"50%",data:new Ga(t,"S\xed","No")}).afterClosed().subscribe(function(t){t&&t.respuesta&&t.seleccion.receta.length>0?e.comandaSrvc.saveDetalleCombo(e.mesaEnUso.comanda,e.cuentaActiva.cuenta,t.seleccion).subscribe(function(t){t.exito?(e.mesaEnUso=t.comanda,e.llenaProductosSeleccionados(e.mesaEnUso),e.setSelectedCuenta(+e.cuentaActiva.numero)):e.snackBar.open("ERROR:".concat(t.mensaje),"Comanda",{duration:3e3}),e.bloqueoBotones=!1}):(e.bloqueoBotones=!1,e.snackBar.open("Error, Debe seleccionar los productos del combo","Comanda",{duration:7e3}))})):this.addProductoSelected(t)}},{key:"addProductoSelected",value:function(t){var e=this;if(this.bloqueoBotones=!0,+this.cuentaActiva.numero){var n=this.lstProductosSeleccionados.findIndex(function(n){return+n.id==+t.id&&+n.cuenta==+e.cuentaActiva.numero&&0==+n.impreso});if(n<0)this.detalleComanda={articulo:t.id,cantidad:1,precio:+t.precio,total:1*+t.precio,notas:""},this.comandaSrvc.saveDetalle(this.mesaEnUso.comanda,this.cuentaActiva.cuenta,this.detalleComanda).subscribe(function(t){t.exito?(e.mesaEnUso=t.comanda,e.llenaProductosSeleccionados(e.mesaEnUso),e.setSelectedCuenta(+e.cuentaActiva.numero)):e.snackBar.open("ERROR:".concat(t.mensaje),"Comanda",{duration:3e3}),e.bloqueoBotones=!1});else{var a=this.lstProductosSeleccionados[n];this.detalleComanda={detalle_cuenta:a.detalle_cuenta,detalle_comanda:a.detalle_comanda,articulo:a.id,cantidad:+a.cantidad+1,precio:+a.precio,total:(+a.cantidad+1)*+a.precio,notas:a.notas},this.comandaSrvc.saveDetalle(this.mesaEnUso.comanda,this.cuentaActiva.cuenta,this.detalleComanda).subscribe(function(t){t.exito?(e.mesaEnUso=t.comanda,e.llenaProductosSeleccionados(e.mesaEnUso),e.setSelectedCuenta(+e.cuentaActiva.numero)):e.snackBar.open("ERROR:".concat(t.mensaje),"Comanda",{duration:3e3}),e.bloqueoBotones=!1})}this.setLstProductosDeCuenta()}}},{key:"updProductosCuenta",value:function(t){var e=this,n=t.listaProductos||[],a=this.lstProductosSeleccionados.filter(function(t){return+t.cuenta!=+e.cuentaActiva.numero});this.lstProductosSeleccionados=n.length>0?a.concat(n):a,t.comanda&&(this.mesaEnUso=t.comanda,this.llenaProductosSeleccionados(this.mesaEnUso),this.setSelectedCuenta(+this.cuentaActiva.numero))}},{key:"prepProductosComanda",value:function(t){for(var e=[],n=0;n<t.length;n++)e.push({articulo:t[n].id,cantidad:t[n].cantidad,precio:t[n].precio,total:t[n].total,notas:t[n].notas,impreso:1,detalle_comanda:t[n].detalle_comanda,detalle_cuenta:t[n].detalle_cuenta});return e}},{key:"validarImpresion",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.configSrvc.getConfig(Le.a.CONSTANTES.RT_INGRESO_NUMERO_PEDIDO);if(1==+this.mesaEnUso.mesa.esmostrador&&n&&!this.mesaEnUso.numero_pedido){var a=this.configSrvc.getConfig(Le.a.CONSTANTES.RT_TOTAL_NUMEROS_PEDIDO);(!a||a<=0)&&(a=30),this.dialog.open(Na,{maxWidth:"50%",data:new Aa("Numero de Pedido",a,"S\xed","No")}).afterClosed().subscribe(function(n){n&&n.respuesta&&n.pedido?(t.mesaEnUso.numero_pedido=n.pedido,t.printComanda(e)):t.snackBar.open("Error, Debe seleccionar un numero de pedido","Comanda",{duration:7e3})})}else this.printComanda(e)}},{key:"printComanda",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.bloqueoBotones=!0,this.impreso=0;for(var n=this.configSrvc.getConfig(Le.a.CONSTANTES.RT_MODO_COMANDA)||1,a=function(a){var o=t.mesaEnUso.cuentas[a];t.cuentaActiva=t.mesaEnUso.cuentas.find(function(t){return+t.numero==+o.numero});var i=t.lstProductosSeleccionados.filter(function(e){return+e.cuenta==+t.cuentaActiva.numero}),r=i.filter(function(t){return 0==+t.impreso&&+t.cantidad>0});r.length>0?(i.map(function(t){return t.impreso=1}),t.noComanda=t.mesaEnUso.comanda,t.cuentaActiva.productos=t.prepProductosComanda(i),t.mesaEnUso.cuentas.findIndex(function(e){return+e.cuenta==+t.cuentaActiva.cuenta})>-1&&t.comandaSrvc.save({area:t.mesaEnUso.mesa.area.area,mesa:t.mesaEnUso.mesa.mesa,mesero:t.mesaEnUso.mesero.usuario,comanda:t.mesaEnUso.comanda,cuentas:t.mesaEnUso.cuentas,numero_pedido:t.mesaEnUso.numero_pedido}).subscribe(function(a){a.exito?(t.mesaEnUso.numero_pedido=a.comanda.numero_pedido,t.comandaSrvc.setProductoImpreso(o.cuenta).subscribe(function(a){a.exito&&t.impreso++,t.llenaProductosSeleccionados(a.comanda),t.setSelectedCuenta(o.numero),t.snackBar.open("Cuenta actualizada","Cuenta #".concat(o.numero),{duration:3e3});var i=[],c=[];try{i=r.filter(function(t){return 0==+t.impresora.bluetooth}),c=r.filter(function(t){return 1==+t.impresora.bluetooth})}catch(s){console.log("PRODUCTOS A IMPRIMIR = ",r),console.log("NORMAL = ",i),console.log("BT = ",c),console.log(s)}e?t.printComandaPDF():(i.length>0&&(3!==n?(t.socket.emit("print:comanda","".concat(JSON.stringify({Tipo:"Comanda",Nombre:t.cuentaActiva.nombre,Numero:t.noComanda,DetalleCuenta:i,Ubicacion:"".concat(t.mesaEnUso.mesa.area.nombre," - Mesa ").concat(t.mesaEnUso.mesa.etiqueta||t.mesaEnUso.mesa.numero),Mesero:"".concat(t.mesaEnUso.mesero.nombres," ").concat(t.mesaEnUso.mesero.apellidos),Total:null,NumeroPedido:t.mesaEnUso.numero_pedido,NotasGenerales:t.mesaEnUso.notas_generales||""}))),t.snackBar.open("Imprimiendo comanda #".concat(t.noComanda),"Comanda",{duration:7e3})):t.snackBar.open("Comanda #".concat(t.noComanda," enviada a cocina"),"Comanda",{duration:7e3}),t.bloqueoBotones=!1),c.length>0&&3!==n&&t.printToBT(JSON.stringify({Tipo:"Comanda",Nombre:t.cuentaActiva.nombre,Numero:t.noComanda,DetalleCuenta:c,Ubicacion:"".concat(t.mesaEnUso.mesa.area.nombre," - Mesa ").concat(t.mesaEnUso.mesa.etiqueta||t.mesaEnUso.mesa.numero),Mesero:"".concat(t.mesaEnUso.mesero.nombres," ").concat(t.mesaEnUso.mesero.apellidos),Total:null,NumeroPedido:t.mesaEnUso.numero_pedido}))),+t.impreso===t.mesaEnUso.cuentas.length&&(t.impreso=0,t.socket.emit("refrescar:mesa",{mesaenuso:t.mesaEnUso}),t.socket.emit("refrescar:listaCocina",{mesaenuso:t.mesaEnUso}),0==+t.mesaEnUso.mesa.esmostrador?t.closeSideNavEv.emit():t.cobrarCuenta())})):t.snackBar.open("ERROR: ".concat(a.mensaje),"Cuenta #".concat(t.cuentaActiva.numero),{duration:3e3}),t.bloqueoBotones=!1})):(t.impreso++,t.bloqueoBotones=!1)},o=0;o<this.mesaEnUso.cuentas.length;o++)a(o)}},{key:"printCuenta",value:function(){this.bloqueoBotones=!0,this.lstProductosAImprimir=this.lstProductosDeCuenta.filter(function(t){return 1==+t.impreso}),this.setSumaCuenta(this.lstProductosAImprimir);var t=this.sumaDetalle(this.lstProductosAImprimir),e=this.mesaEnUso.mesa.impresora||this.mesaEnUso.mesa.area.impresora,n=this.configSrvc.getConfig(Le.a.CONSTANTES.RT_IMPRIME_PROPINA_SUGERIDA),a={Tipo:"Cuenta",Nombre:this.cuentaActiva.nombre,Numero:null,DetalleCuenta:this.lstProductosAImprimir,Total:t,Empresa:this.ls.get(Le.a.usrTokenVar).empresa,Restaurante:this.ls.get(Le.a.usrTokenVar).restaurante,PropinaSugerida:n?(.1*t).toFixed(2):null,Impresora:e,Ubicacion:"".concat(this.mesaEnUso.mesa.area.nombre," - Mesa ").concat(this.mesaEnUso.mesa.etiqueta||this.mesaEnUso.mesa.numero," - Comanda ").concat(this.mesaEnUso.comanda),Mesero:"".concat(this.mesaEnUso.mesero.nombres," ").concat(this.mesaEnUso.mesero.apellidos)};0==+e.bluetooth?this.socket.emit("print:cuenta","".concat(JSON.stringify(a))):this.printToBT(JSON.stringify(a)),this.snackBar.open("Imprimiendo cuenta de ".concat(this.cuentaActiva.nombre),"Cuenta",{duration:7e3}),this.bloqueoBotones=!1,this.closeSideNavEv.emit()}},{key:"unirCuentas",value:function(){var t=this;this.dialog.open(ea,{width:"55%",data:{lstProductosSeleccionados:this.lstProductosSeleccionados,mesaEnUso:this.mesaEnUso}}).afterClosed().subscribe(function(e){e&&t.closeSideNavEv.emit()})}},{key:"cobrarCuenta",value:function(){var t=this;this.comandaSrvc.getCuenta(this.cuentaActiva.cuenta).subscribe(function(e){if(e.pendiente.length>0)t.snackBar.open("Cobro","Tiene productos sin comandar",{duration:3e3});else{var n=t.lstProductosDeCuenta.filter(function(t){return 1==+t.impreso});n.length>0?t.dialog.open(Ma,{width:"95%",data:{mesaenuso:t.mesaEnUso,cuenta:t.cuentaActiva.nombre,idcuenta:t.cuentaActiva.cuenta,productosACobrar:n,porcentajePropina:0,impresora:0==+t.mesaEnUso.mesa.esmostrador?t.mesaEnUso.mesa.area.impresora_factura||null:t.mesaEnUso.mesa.impresora||t.mesaEnUso.mesa.area.impresora,clientePedido:t.clientePedido}}).afterClosed().subscribe(function(e){e&&"closePanel"!==e?(t.cambiarEstatusCuenta(e),t.closeSideNavEv.emit()):"closePanel"===e&&t.closeSideNavEv.emit()}):t.snackBar.open("Cobro","Sin productos a cobrar.",{duration:3e3})}})}}]),e}()).\u0275fac=function(t){return new(t||Zo)(z.Nb(U.b),z.Nb(R.a),z.Nb(Zn),z.Nb(ma.a),z.Nb(We.a),z.Nb(eo.a),z.Nb(no.a),z.Nb(Ua.a))},Zo.\u0275cmp=z.Hb({type:Zo,selectors:[["app-tran-comanda"]],viewQuery:function(t,e){var n;1&t&&(z.Ic(Ro,1),z.Ic(Io,1)),2&t&&(z.sc(n=z.cc())&&(e.appLstProdAlt=n.first),z.sc(n=z.cc())&&(e.txtCodigoBarras=n.first))},inputs:{mesaEnUso:"mesaEnUso",clientePedido:"clientePedido"},outputs:{closeSideNavEv:"closeSideNavEv",mesaSavedEv:"mesaSavedEv"},decls:46,vars:26,consts:[["fxLayout","row","fxLayout.xs","column"],["fxFlex","50%","fxFelx.xs","100%","fxLayoutAlign","center start"],[1,"bld",2,"font-size","16pt","margin-left","10px"],["fxFlex","50%","fxFelx.xs","100%","fxLayoutAlign","end start"],["mat-raised-button","","type","button","color","accent",2,"margin-left","8px",3,"click"],[1,"divFullSize"],[1,"row"],["align","center",1,"col","m12","s12",2,"padding","0 !important"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"disabled","click",4,"ngFor","ngForOf"],["mat-raised-button","","type","button","class","btnAccion",3,"click",4,"ngIf"],["align","center",1,"col","m6","s12",2,"padding","0 !important"],[1,"bld"],["class","fullWidth","style","margin-left: 10px; margin-right: 10px;",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","bld",4,"ngIf"],["align","center"],["direction","down"],["mat-fab","","color","warn"],[2,"font-size","18pt !important"],["mat-mini-fab","","type","button","color","warn",1,"btnAccion","btnAccionComanda",3,"disabled","click"],["mat-mini-fab","","type","button","color","warn","class","btnAccion btnAccionComanda",3,"disabled","click",4,"ngIf"],["mat-mini-fab","","type","button","color","warn","class","btnAccionComanda",3,"click",4,"ngIf"],[1,"col","m6","s12","mat-elevation-z3","colProductos"],[3,"bloqueoBotones","productoClickedEv","categoriasFilledEv"],["appLstProdAlt",""],[3,"listaProductos","noCuenta","IdComanda","IdCuenta","bloqueoBotones","mesaEnUso","productoRemovedEv"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button",1,"btnAccion",3,"click"],[1,"fullWidth",2,"margin-left","10px","margin-right","10px"],["matInput","","cdkFocusInitial","","type","text","placeholder","C\xf3digo","name","codigoBarras",3,"ngModel","ngModelOptions","ngModelChange","keyup.enter"],["txtCodigoBarras","matInput"],["mat-raised-button","","class","btnAccion","color","accent",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","accent",1,"btnAccion",3,"disabled","click"],["mat-mini-fab","","type","button","color","warn",1,"btnAccionComanda",3,"click"]],template:function(t,e){1&t&&(z.Tb(0,"div",0),z.Tb(1,"div",1),z.Tb(2,"span",2),z.Dc(3),z.Sb(),z.Sb(),z.Tb(4,"div",3),z.Tb(5,"button",4),z.bc("click",function(){return e.closeSideNavEv.emit()}),z.Dc(6," Cerrar Panel "),z.Sb(),z.Sb(),z.Sb(),z.Tb(7,"div",5),z.Tb(8,"div",6),z.Tb(9,"div",7),z.Cc(10,Fo,2,2,"button",8),z.Cc(11,Ao,2,0,"button",9),z.Sb(),z.Sb(),z.Tb(12,"div",6),z.Tb(13,"div",10),z.Tb(14,"span",11),z.Dc(15,"Productos"),z.Sb(),z.Ob(16,"br"),z.Cc(17,Uo,3,3,"mat-form-field",12),z.Cc(18,jo,1,0,"br",13),z.Cc(19,Lo,2,1,"ng-container",14),z.Sb(),z.Tb(20,"div",10),z.Cc(21,Ho,2,1,"span",15),z.Cc(22,zo,2,0,"span",15),z.Tb(23,"div",16),z.Tb(24,"eco-fab-speed-dial",17),z.Tb(25,"eco-fab-speed-dial-trigger"),z.Tb(26,"button",18),z.Tb(27,"mat-icon",19),z.Dc(28,"keyboard_arrow_down"),z.Sb(),z.Sb(),z.Sb(),z.Tb(29,"eco-fab-speed-dial-actions"),z.Tb(30,"button",20),z.bc("click",function(){return e.getNotasGenerales()}),z.Dc(31," Notas "),z.Sb(),z.Cc(32,qo,2,1,"button",21),z.Cc(33,$o,2,1,"button",21),z.Cc(34,Vo,2,1,"button",21),z.Cc(35,Wo,2,1,"button",21),z.Cc(36,Go,2,1,"button",21),z.Cc(37,Qo,2,1,"button",21),z.Cc(38,Jo,2,1,"button",21),z.Cc(39,Xo,2,1,"button",22),z.Sb(),z.Sb(),z.Sb(),z.Sb(),z.Sb(),z.Tb(40,"div",6),z.Tb(41,"div",23),z.Tb(42,"app-lista-producto-alt",24,25),z.bc("productoClickedEv",function(t){return e.agregarProductos(t)})("categoriasFilledEv",function(t){return e.setListaCategorias(t)}),z.Sb(),z.Sb(),z.Tb(44,"div",23),z.Tb(45,"app-lista-productos-comanda",26),z.bc("productoRemovedEv",function(t){return e.updProductosCuenta(t)}),z.Sb(),z.Sb(),z.Sb(),z.Sb()),2&t&&(z.Cb(3),z.Hc(" ",e.mesaEnUso.mesa.area.nombre," - Mesa ",e.mesaEnUso.mesa.etiqueta||e.mesaEnUso.mesa.numero," - Comanda ",e.mesaEnUso.comanda," "),z.Cb(7),z.lc("ngForOf",e.mesaEnUso.cuentas),z.Cb(1),z.lc("ngIf",0==+e.mesaEnUso.mesa.esmostrador&&0==+e.mesaEnUso.mesa.escallcenter),z.Cb(6),z.lc("ngIf",e.usaCodigoBarras),z.Cb(1),z.lc("ngIf",e.usaCodigoBarras),z.Cb(1),z.lc("ngForOf",e.categorias),z.Cb(2),z.lc("ngIf",e.cuentaActiva.nombre),z.Cb(1),z.lc("ngIf",!e.cuentaActiva.nombre),z.Cb(8),z.lc("disabled",e.bloqueoBotones),z.Cb(2),z.lc("ngIf",0==+e.mesaEnUso.mesa.escallcenter),z.Cb(1),z.lc("ngIf",0==+e.mesaEnUso.mesa.esmostrador),z.Cb(1),z.lc("ngIf",0==+e.mesaEnUso.mesa.esmostrador),z.Cb(1),z.lc("ngIf",0==+e.mesaEnUso.mesa.esmostrador),z.Cb(1),z.lc("ngIf",0==+e.mesaEnUso.mesa.escallcenter),z.Cb(1),z.lc("ngIf",1==+e.mesaEnUso.mesa.escallcenter),z.Cb(1),z.lc("ngIf",0==+e.mesaEnUso.mesa.esmostrador),z.Cb(1),z.lc("ngIf",e.lstProductosSeleccionados.length<=0),z.Cb(3),z.lc("bloqueoBotones",e.bloqueoBotones),z.Cb(3),z.lc("listaProductos",e.lstProductosDeCuenta)("noCuenta",+e.cuentaActiva.numero)("IdComanda",e.mesaEnUso.comanda)("IdCuenta",e.cuentaActiva.cuenta)("bloqueoBotones",e.bloqueoBotones)("mesaEnUso",e.mesaEnUso))},directives:[Ra.c,Ra.a,Ra.b,M.a,b.l,b.m,je.b,je.d,T.a,je.a,vo,Mo,y.b,k.b,p.c,p.k,p.n],styles:[".divFullSize[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:hidden}.col[_ngcontent-%COMP%]{padding-top:1px;padding-bottom:1px}.btnAccionComanda[_ngcontent-%COMP%]{width:135px}.colProductos[_ngcontent-%COMP%]{overflow-y:auto;height:450px!important}@media (max-width:400px){.colProductos[_ngcontent-%COMP%]{height:300px!important}}@media (min-width:401px) and (max-width:1024px){.colProductos[_ngcontent-%COMP%]{height:450px!important}}@media (min-height:985px){.colProductos[_ngcontent-%COMP%]{height:600px!important}}@media (max-height:768px){.colProductos[_ngcontent-%COMP%]{height:400px!important}}"]}),Zo),Yo=["matTabArea"],ti=["rightSidenav"],ei=["tabArea"],ni=["snTranComanda"];function ai(t,e){if(1&t){var n=z.Ub();z.Tb(0,"app-mesa",12),z.bc("onClickMesa",function(t){return z.wc(n),z.fc(2).onClickMesa(t)}),z.Sb()}if(2&t){var a=e.$implicit,o=z.fc(2);z.lc("configuracion",a)("isDisabled",o.cargando)}}function oi(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-tab",7,8),z.Tb(2,"div",9,10),z.bc("resize",function(t){return z.wc(n),z.fc().onResize(t)},!1,z.vc),z.Cc(4,ai,1,2,"app-mesa",11),z.Sb(),z.Sb()}if(2&t){var a=e.$implicit;z.mc("label",a.nombre),z.Cb(4),z.lc("ngForOf",a.mesas)}}var ii,ri,ci=((ri=function(){function e(n,a,o,i,r,c,s){var l=this;d(this,e),this.dialog=n,this.snackBar=a,this.ls=o,this.areaSrvc=i,this.comandaSrvc=r,this.configSrvc=c,this.socket=s,this.divSize={h:0,w:0},this.cargando=!1,this.lstTabsAreas=[],this.lstTabsAreasForUpdate=[],this.configTipoPantalla=1,this.clientePedido=null,this.actualizar=function(){var t=l.lstTabsAreas.find(function(t){return+t.area==+l.mesaSeleccionada.mesa.area.area}),e=l.lstTabsAreas.findIndex(function(t){return+t.area==+l.mesaSeleccionada.mesa.area.area}),n=t.mesas.findIndex(function(t){return+t.mesa==+l.mesaSeleccionada.mesa.mesa});l.lstTabsAreas[e].mesas[n].estatus=1,l.toggleRightSidenav()},this.resetMesaSeleccionada=function(){return l.mesaSeleccionada={comanda:null,usuario:null,sede:null,estatus:null,mesa:{mesa:null,area:{area:null,sede:null,area_padre:null,nombre:null},numero:null,posx:null,posy:null,tamanio:null,estatus:null},cuentas:[]}},this.loadAreas=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l.cargando=!0,l.areaSrvc.get({sede:+l.ls.get(Le.a.usrTokenVar).sede||0}).subscribe(function(n){t?(l.lstTabsAreasForUpdate=n,l.updateTableStatus(e.mesaenuso)):(l.lstTabsAreas=n,l.cargando=!1)})},this.updateTableStatus=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t(l.lstTabsAreasForUpdate);try{for(a.s();!(e=a.n()).done;){var o,i=e.value,r=t(i.mesas);try{for(r.s();!(o=r.n()).done;){var c=o.value;l.setEstatusMesa({area:+i.area,mesa:+c.mesa},+c.estatus)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){a.e(s)}finally{a.f()}l.cargando=!1,l.rightSidenav.opened&&+l.mesaSeleccionada.comanda==+n.comanda&&l.toggleRightSidenav()},this.onResize=function(t){return l.setDivSize()},this.aperturaCargaMesa=function(t){switch(+t.mesaSelected.estatus){case 1:l.openAbrirMesaDialog(t.mesaSelected);break;case 2:l.loadComandaMesa(t.mesaSelected)}},this.setEstatusMesa=function(t,e){var n=l.lstTabsAreas.findIndex(function(e){return+e.area==+t.area});if(n>-1){var a=l.lstTabsAreas[n].mesas.findIndex(function(e){return+e.mesa==+t.mesa});a>-1&&(l.lstTabsAreas[n].mesas[a].estatus=e)}},this.guardarMesa=function(t){l.comandaSrvc.save(l.mesaSeleccionadaToOpen).subscribe(function(e){e.exito?(l.socket.emit("refrescar:mesa",{}),l.mesaSeleccionada=e.comanda,l.setEstatusMesa(t,+e.comanda.mesa.estatus),l.snTrancomanda.llenaProductosSeleccionados(l.mesaSeleccionada),l.snTrancomanda.setSelectedCuenta(l.mesaSeleccionada.cuentas[0].numero),l.snTrancomanda.rolesUsuario=l.mesaSeleccionada.turno_rol,l.toggleRightSidenav()):l.snackBar.open("".concat(e.mensaje),"ERROR",{duration:5e3})})},this.toggleRightSidenav=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;l.rightSidenav.toggle().then(function(e){"close"===e?(l.checkEstatusMesa(),t&&l.loadAreas(!0,{mesaenuso:t})):"open"===e&&1===l.mesaSeleccionada.cuentas.length&&l.snTrancomanda.setSelectedCuenta(l.mesaSeleccionada.cuentas[0].numero)})},this.cerrandoRightSideNav=function(){l.snTrancomanda.resetMesaEnUso(),l.snTrancomanda.resetLstProductosDeCuenta(),l.snTrancomanda.resetLstProductosSeleccionados(),l.snTrancomanda.resetCuentaActiva(),l.snTrancomanda.resetListadoArticulos(),l.fuerzaCierreComanda(!1)},this.checkEstatusMesa=function(){l.mesaSeleccionada&&l.mesaSeleccionada.cuentas&&l.mesaSeleccionada.cuentas.length>0&&0===(l.mesaSeleccionada.cuentas.filter(function(t){return 0==+t.cerrada}).length||0)&&l.setEstatusMesa({area:l.mesaSeleccionada.mesa.area.area,mesa:l.mesaSeleccionada.mesa.mesa},1)},this.fuerzaCierreComanda=function(t){l.comandaSrvc.cerrarEstacion(l.mesaSeleccionada.comanda).subscribe(function(e){l.loadComandaMesa(l.mesaSeleccionada.mesa,t)})},this.openTranComandaAlt=function(){l.dialog.open(uo,{maxWidth:"100vw",maxHeight:"100vh",width:"99vw",height:"99vh",disableClose:!0,data:{mesa:l.mesaSeleccionada}}).afterClosed().subscribe(function(t){console.log(t)})},this.loadComandaMesa=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];l.comandaSrvc.getComandaDeMesa(t.mesa).subscribe(function(t){if(t.exito)if(Array.isArray(t)?(0===t.length&&(l.mesaSeleccionada={mesa:l.mesaSeleccionada.mesa,cuentas:[{cerrada:1}]}),l.checkEstatusMesa()):(l.mesaSeleccionada=t,l.snTrancomanda.rolesUsuario=l.mesaSeleccionada.turno_rol),l.checkEstatusMesa(),e)switch(l.snTrancomanda.llenaProductosSeleccionados(l.mesaSeleccionada),l.configTipoPantalla){case 1:l.toggleRightSidenav();break;case 2:l.openTranComandaAlt();break;default:l.toggleRightSidenav()}else l.checkEstatusMesa();else t.mensaje&&l.snackBar.open("".concat(t.mensaje),"ERROR",{duration:5e3}),Array.isArray(t)&&0===t.length&&(l.mesaSeleccionada={mesa:l.mesaSeleccionada.mesa,cuentas:[{cerrada:1}]}),l.checkEstatusMesa();l.checkEstatusMesa()})}}return m(e,[{key:"ngOnInit",value:function(){var t=this;this.loadAreas(),this.resetMesaSeleccionada(),this.ls.get(Le.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(Le.a.usrTokenVar).sede_uuid),this.socket.on("reconnect",function(){return t.socket.emit("joinRestaurant",t.ls.get(Le.a.usrTokenVar).sede_uuid)}),this.socket.on("refrescar:mesa",function(e){t.loadAreas(!0,e)})),this.configTipoPantalla=this.configSrvc.getConfig(Le.a.CONSTANTES.RT_PANTALLA_TOMA_COMANDA)}},{key:"ngAfterViewInit",value:function(){var t=this;setTimeout(function(){t.setDivSize(),t.snTrancomanda.resetMesaEnUso()},600)}},{key:"setDivSize",value:function(){}},{key:"onClickMesa",value:function(t){var e=this;if(0==+t.mesaSelected.escallcenter)this.aperturaCargaMesa(t);else{var n="".concat(Le.a.rtClientePedido,"_").concat(t.mesaSelected.mesa);1==+t.mesaSelected.estatus?(this.ls.clear(n),this.dialog.open(An,{width:"50%",disableClose:!0,data:{mesa:t.mesaSelected}}).afterClosed().subscribe(function(a){a&&(e.clientePedido=a,e.ls.set(n,e.clientePedido),e.aperturaCargaMesa(t))})):(this.clientePedido=this.ls.get(n),this.aperturaCargaMesa(t))}}},{key:"openAbrirMesaDialog",value:function(t){var e,n=this;this.mesaSeleccionadaToOpen={nombreArea:this.tabArea.textLabel,area:+t.area,mesa:+t.mesa,numero:+t.numero,mesero:"",comensales:"1",comanda:0,esEvento:!1,dividirCuentasPorSillas:!1,estatus:1,clientePedido:this.clientePedido||null,cuentas:[{numero:1,nombre:(null===(e=this.clientePedido)||void 0===e?void 0:e.nombre)||"\xdanica",productos:[]}]},0==+t.esmostrador?this.dialog.open(Xn,{width:"50%",height:"auto",disableClose:!0,data:this.mesaSeleccionadaToOpen}).afterClosed().subscribe(function(e){e&&(n.mesaSeleccionadaToOpen=e,n.guardarMesa(t))}):(this.mesaSeleccionadaToOpen.mesero=this.ls.get(Le.a.usrTokenVar).idusr,this.guardarMesa(t))}}]),e}()).\u0275fac=function(t){return new(t||ri)(z.Nb(U.b),z.Nb(R.a),z.Nb(We.a),z.Nb(Ve),z.Nb(Zn),z.Nb(no.a),z.Nb(ma.a))},ri.\u0275cmp=z.Hb({type:ri,selectors:[["app-tran-areas"]],viewQuery:function(t,e){var n;1&t&&(z.Ic(Yo,1),z.Ic(ti,1),z.Ic(ei,1),z.Ic(ni,1)),2&t&&(z.sc(n=z.cc())&&(e.pestania=n.first),z.sc(n=z.cc())&&(e.rightSidenav=n.first),z.sc(n=z.cc())&&(e.tabArea=n.first),z.sc(n=z.cc())&&(e.snTrancomanda=n.first))},decls:8,vars:4,consts:[[1,"matSideNavContainer"],["mode","over","position","end","disableClose","",3,"opened","openedChange","closedStart"],["rightSidenav",""],[3,"mesaEnUso","clientePedido","mesaSavedEv","closeSideNavEv"],["snTranComanda",""],["dynamicHeight","","backgroundColor","primary"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],["tabArea",""],[1,"divAreaMesa",3,"resize"],["matTabArea",""],[3,"configuracion","isDisabled","onClickMesa",4,"ngFor","ngForOf"],[3,"configuracion","isDisabled","onClickMesa"]],template:function(t,e){1&t&&(z.Tb(0,"mat-sidenav-container",0),z.Tb(1,"mat-sidenav",1,2),z.bc("openedChange",function(t){return e.openedRightPanel=t})("closedStart",function(){return e.cerrandoRightSideNav()}),z.Tb(3,"app-tran-comanda",3,4),z.bc("mesaSavedEv",function(){return e.actualizar()})("closeSideNavEv",function(t){return e.toggleRightSidenav(t)}),z.Sb(),z.Sb(),z.Tb(5,"mat-sidenav-content"),z.Tb(6,"mat-tab-group",5),z.Cc(7,oi,5,2,"mat-tab",6),z.Sb(),z.Sb(),z.Sb()),2&t&&(z.Cb(1),z.lc("opened",e.openedRightPanel),z.Cb(2),z.lc("mesaEnUso",e.mesaSeleccionada)("clientePedido",e.clientePedido),z.Cb(4),z.lc("ngForOf",e.lstTabsAreas))},directives:[j.b,j.a,Ko,j.c,E.b,b.l,E.a,un],styles:[".matSideNavContainer[_ngcontent-%COMP%]{height:90%;overflow:hidden!important}.divAreaMesa[_ngcontent-%COMP%]{width:100vw;height:90vh;background-color:hsla(0,0%,78%,.28627450980392155)}mat-sidenav[_ngcontent-%COMP%]{width:97vw}  .mat-drawer-inner-container{overflow-y:auto!important;overflow-x:hidden!important}"]}),ri),si=((ii=function(){function t(e){d(this,t),this.http=e,this.moduleUrl="turno",this.srvcErrHndl=new He.a}return m(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Le.a.urlMantenimientos,"/").concat(this.moduleUrl,"/buscar?").concat($e.stringify(t))).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(t){return this.http.post("".concat(Le.a.urlMantenimientos,"/").concat(this.moduleUrl,"/guardar").concat(t.turno?"/"+t.turno:""),t).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"getDetalle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.http.get("".concat(Le.a.urlMantenimientos,"/").concat(this.moduleUrl,"/buscar_usuario/").concat(t,"?").concat($e.stringify(e))).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"saveDetalle",value:function(t){return this.http.post("".concat(Le.a.urlMantenimientos,"/").concat(this.moduleUrl,"/agregar_usuario/").concat(t.turno),t).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"anularDetalle",value:function(t){return this.http.post("".concat(Le.a.urlMantenimientos,"/").concat(this.moduleUrl,"/anular_usuario/").concat(t.turno),t).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||ii)(z.Xb(f.b))},ii.\u0275prov=z.Jb({token:ii,factory:ii.\u0275fac,providedIn:"root"}),ii);function li(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-list-item",5),z.bc("click",function(){z.wc(n);var t=e.$implicit;return z.fc().getTurno(t)}),z.Tb(1,"mat-icon",6),z.Dc(2,"schedule"),z.Sb(),z.Tb(3,"h5",7),z.Dc(4),z.gc(5,"date"),z.Sb(),z.Ob(6,"br"),z.Tb(7,"p",7),z.Dc(8),z.gc(9,"date"),z.Sb(),z.Sb()}if(2&t){var a=e.$implicit;z.Cb(4),z.Fc("Inicio: ",z.ic(5,2,a.inicio,"dd/MM/yyyy HH:mm:ss"),""),z.Cb(4),z.Fc(" Fin: ",z.ic(9,5,a.fin,"dd/MM/yyyy")," ")}}var ui,di,bi,mi=function(){return{standalone:!0}},fi=((bi=function(){function t(e,n){var a=this;d(this,t),this.ls=e,this.turnoSrvc=n,this.getTurnoEv=new z.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadTurnos=function(){a.turnoSrvc.get({sede:+a.ls.get(Le.a.usrTokenVar).sede||0}).subscribe(function(t){t&&t.length>0&&(a.lstTurnos=t,a.applyFilter())})},this.getTurno=function(t){a.getTurnoEv.emit({turno:t.turno,turno_tipo:t.turno_tipo.turno_tipo,fecha:t.fecha,inicio:t.inicio,fin:t.fin})},this.pageChange=function(t){a.pageSize=t.pageSize,a.pageIndex=t.pageIndex,a.applyFilter()}}return m(t,[{key:"ngOnInit",value:function(){this.loadTurnos()}},{key:"applyFilter",value:function(){if(this.txtFiltro.length>0){var t=Object(Le.b)(this.lstTurnos,this.txtFiltro);this.length=t.length,this.lstTurnosPaged=Object(Le.c)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstTurnos.length,this.lstTurnosPaged=Object(Le.c)(this.lstTurnos,this.pageSize,this.pageIndex+1)}}]),t}()).\u0275fac=function(t){return new(t||bi)(z.Nb(We.a),z.Nb(si))},bi.\u0275cmp=z.Hb({type:bi,selectors:[["app-lista-turno"]],outputs:{getTurnoEv:"getTurnoEv"},decls:7,vars:7,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,e){1&t&&(z.Tb(0,"mat-card",0),z.Tb(1,"mat-card-content"),z.Tb(2,"mat-form-field",1),z.Tb(3,"input",2),z.bc("keyup",function(){return e.applyFilter()})("ngModelChange",function(t){return e.txtFiltro=t}),z.Sb(),z.Sb(),z.Tb(4,"mat-nav-list"),z.Cc(5,li,10,8,"mat-list-item",3),z.Sb(),z.Tb(6,"mat-paginator",4),z.bc("page",function(t){return e.pageChange(t)}),z.Sb(),z.Sb(),z.Sb()),2&t&&(z.Cb(3),z.lc("ngModel",e.txtFiltro)("ngModelOptions",z.nc(6,mi)),z.Cb(2),z.lc("ngForOf",e.lstTurnosPaged),z.Cb(1),z.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[D.a,D.c,y.b,k.b,p.c,p.k,p.n,_.e,b.l,N.a,_.c,T.a,_.b,$.h],pipes:[b.e],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),bi),pi=((di=function(){function t(e){d(this,t),this.http=e,this.moduleUrl="turno",this.srvcErrHndl=new He.a}return m(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Le.a.urlMantenimientos,"/").concat(this.moduleUrl,"/get_turno_tipo?").concat($e.stringify(t))).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(t){return this.http.post("".concat(Le.a.urlMantenimientos,"/").concat(this.moduleUrl,"/guardar_turno_tipo").concat(t.turno_tipo?"/"+t.turno_tipo:""),t).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||di)(z.Xb(f.b))},di.\u0275prov=z.Jb({token:di,factory:di.\u0275fac,providedIn:"root"}),di),hi=((ui=function(){function t(e){d(this,t),this.http=e,this.srvcErrHndl=new He.a}return m(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Le.a.urlCatalogos,"/get_tipo_usuario?").concat($e.stringify(t))).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||ui)(z.Xb(f.b))},ui.\u0275prov=z.Jb({token:ui,factory:ui.\u0275fac,providedIn:"root"}),ui);function gi(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",5),z.bc("click",function(){return z.wc(n),z.fc().showTurnoForm=!0}),z.Tb(1,"mat-icon",6),z.Dc(2,"expand_more"),z.Sb(),z.Sb()}}function vi(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",5),z.bc("click",function(){return z.wc(n),z.fc().showTurnoForm=!1}),z.Tb(1,"mat-icon",6),z.Dc(2,"expand_less"),z.Sb(),z.Sb()}}function Ci(t,e){if(1&t&&(z.Tb(0,"mat-option",17),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n.turno_tipo),z.Cb(1),z.Fc(" ",n.descripcion," ")}}function Si(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",21),z.bc("click",function(){z.wc(n);var t=z.fc(3);return t.turno.inicio=t.getNow()}),z.Tb(1,"mat-icon",6),z.Dc(2,"query_builder"),z.Sb(),z.Sb()}}function _i(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",22),z.bc("click",function(){return z.wc(n),z.fc(3).turno.inicio=null}),z.Tb(1,"mat-icon",6),z.Dc(2,"close"),z.Sb(),z.Sb()}}function Ti(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-form-field",10),z.Tb(1,"input",18),z.bc("ngModelChange",function(t){return z.wc(n),z.fc(2).turno.inicio=t}),z.Sb(),z.Cc(2,Si,3,0,"button",19),z.Cc(3,_i,3,0,"button",20),z.Sb()}if(2&t){var a=z.fc(2);z.Cb(1),z.lc("ngModel",a.turno.inicio),z.Cb(1),z.lc("ngIf",!a.turno.inicio),z.Cb(1),z.lc("ngIf",a.turno.inicio)}}function yi(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",21),z.bc("click",function(){z.wc(n);var t=z.fc(3);return t.turno.fin=t.getNow()}),z.Tb(1,"mat-icon",6),z.Dc(2,"query_builder"),z.Sb(),z.Sb()}}function ki(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",22),z.bc("click",function(){return z.wc(n),z.fc(3).turno.fin=null}),z.Tb(1,"mat-icon",6),z.Dc(2,"close"),z.Sb(),z.Sb()}}function Di(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-form-field",10),z.Tb(1,"input",23),z.bc("ngModelChange",function(t){return z.wc(n),z.fc(2).turno.fin=t}),z.Sb(),z.Cc(2,yi,3,0,"button",19),z.Cc(3,ki,3,0,"button",20),z.Sb()}if(2&t){var a=z.fc(2);z.Cb(1),z.lc("ngModel",a.turno.fin),z.Cb(1),z.lc("ngIf",!a.turno.fin),z.Cb(1),z.lc("ngIf",a.turno.fin)}}function wi(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",24),z.bc("click",function(){return z.wc(n),z.fc(2).resetTurno()}),z.Dc(1," Nuevo "),z.Sb()}}function Ei(t,e){if(1&t&&(z.Tb(0,"li"),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.Cb(1),z.Ec(n)}}function xi(t,e){if(1&t&&(z.Tb(0,"li"),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.Cb(1),z.Ec(n)}}function Pi(t,e){if(1&t&&(z.Tb(0,"div"),z.Tb(1,"h6"),z.Dc(2,"Documentos Pendientes"),z.Sb(),z.Tb(3,"div",25),z.Tb(4,"div",26),z.Tb(5,"label"),z.Tb(6,"b"),z.Dc(7,"Comandas sin facturar"),z.Sb(),z.Sb(),z.Tb(8,"ul"),z.Cc(9,Ei,2,1,"li",27),z.Sb(),z.Sb(),z.Tb(10,"div",26),z.Tb(11,"label"),z.Tb(12,"b"),z.Dc(13,"Facturas sin firmar"),z.Sb(),z.Sb(),z.Tb(14,"ul"),z.Cc(15,xi,2,1,"li",27),z.Sb(),z.Sb(),z.Sb(),z.Sb()),2&t){var n=z.fc(2);z.Cb(9),z.lc("ngForOf",n.comandas),z.Cb(6),z.lc("ngForOf",n.facturas)}}function Oi(t,e){if(1&t){var n=z.Ub();z.Tb(0,"form",7,8),z.bc("ngSubmit",function(){z.wc(n);var t=z.tc(1),e=z.fc();return t.form.valid&&e.onSubmit()}),z.Tb(2,"div",9),z.Tb(3,"mat-form-field",10),z.Tb(4,"mat-label"),z.Dc(5,"Tipo de turno"),z.Sb(),z.Tb(6,"mat-select",11),z.bc("ngModelChange",function(t){return z.wc(n),z.fc().turno.turno_tipo=t}),z.Cc(7,Ci,2,2,"mat-option",12),z.Sb(),z.Sb(),z.Sb(),z.Tb(8,"div",9),z.Cc(9,Ti,4,3,"mat-form-field",13),z.Sb(),z.Tb(10,"div",9),z.Cc(11,Di,4,3,"mat-form-field",13),z.Sb(),z.Tb(12,"div",14),z.Tb(13,"button",15),z.Dc(14," Guardar "),z.Sb(),z.Cc(15,wi,2,0,"button",16),z.Sb(),z.Cc(16,Pi,16,2,"div",3),z.Sb()}if(2&t){var a=z.tc(1),o=z.fc();z.Cb(6),z.lc("ngModel",o.turno.turno_tipo),z.Cb(1),z.lc("ngForOf",o.tiposTurno),z.Cb(2),z.lc("ngIf",o.esMovil),z.Cb(2),z.lc("ngIf",o.esMovil),z.Cb(2),z.lc("disabled",!a.form.valid),z.Cb(2),z.lc("ngIf",o.turno.turno),z.Cb(1),z.lc("ngIf",o.pendientes)}}function Mi(t,e){1&t&&z.Ob(0,"hr")}function Ri(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",5),z.bc("click",function(){return z.wc(n),z.fc(2).showDetalleTurnoForm=!0}),z.Tb(1,"mat-icon",6),z.Dc(2,"expand_more"),z.Sb(),z.Sb()}}function Ii(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",5),z.bc("click",function(){return z.wc(n),z.fc(2).showDetalleTurnoForm=!1}),z.Tb(1,"mat-icon",6),z.Dc(2,"expand_less"),z.Sb(),z.Sb()}}function Fi(t,e){if(1&t&&(z.Tb(0,"mat-option",17),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n.usuario_tipo),z.Cb(1),z.Fc(" ",n.descripcion," ")}}function Ai(t,e){if(1&t&&(z.Tb(0,"mat-option",17),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n.usuario),z.Cb(1),z.Gc(" ",n.nombres," ",n.apellidos," ")}}function Ni(t,e){if(1&t){var n=z.Ub();z.Tb(0,"form",7,29),z.bc("ngSubmit",function(){z.wc(n);var t=z.tc(1),e=z.fc(2);return t.form.valid&&e.onSubmitDetail()}),z.Tb(2,"div",9),z.Tb(3,"mat-form-field",10),z.Tb(4,"mat-label"),z.Dc(5,"Tipo"),z.Sb(),z.Tb(6,"mat-select",30),z.bc("ngModelChange",function(t){return z.wc(n),z.fc(2).detalleTurno.usuario_tipo=t}),z.Cc(7,Fi,2,2,"mat-option",12),z.Sb(),z.Sb(),z.Sb(),z.Tb(8,"div",9),z.Tb(9,"mat-form-field",10),z.Tb(10,"mat-label"),z.Dc(11,"Usuario"),z.Sb(),z.Tb(12,"mat-select",31),z.bc("ngModelChange",function(t){return z.wc(n),z.fc(2).detalleTurno.usuario=t}),z.Cc(13,Ai,2,3,"mat-option",12),z.Sb(),z.Sb(),z.Sb(),z.Tb(14,"div",32),z.Tb(15,"button",15),z.Dc(16," Guardar "),z.Sb(),z.Sb(),z.Sb()}if(2&t){var a=z.tc(1),o=z.fc(2);z.Cb(6),z.lc("ngModel",o.detalleTurno.usuario_tipo),z.Cb(1),z.lc("ngForOf",o.tiposUsuario),z.Cb(5),z.lc("ngModel",o.detalleTurno.usuario),z.Cb(1),z.lc("ngForOf",o.usuarios),z.Cb(2),z.lc("disabled",!a.form.valid||!!o.turno.fin)}}function Ui(t,e){1&t&&z.Ob(0,"hr")}function ji(t,e){1&t&&(z.Tb(0,"th",43),z.Dc(1,"Tipo"),z.Sb())}function Bi(t,e){if(1&t&&(z.Tb(0,"td",44),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.Cb(1),z.Ec(n.usuario_tipo.descripcion)}}function Li(t,e){1&t&&(z.Tb(0,"th",45),z.Dc(1,"Usuario"),z.Sb())}function Hi(t,e){if(1&t&&(z.Tb(0,"td",46),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.Cb(1),z.Gc("",n.usuario.nombres," ",n.usuario.apellidos,"")}}function zi(t,e){1&t&&(z.Tb(0,"th",43),z.Dc(1,"\xa0"),z.Sb())}function qi(t,e){if(1&t){var n=z.Ub();z.Tb(0,"td",44),z.Tb(1,"button",47),z.bc("click",function(){z.wc(n);var t=e.$implicit;return z.fc(3).anularDetalleTurno(t)}),z.Dc(2," Anular "),z.Sb(),z.Sb()}if(2&t){var a=z.fc(3);z.Cb(1),z.lc("disabled",!!a.turno.fin)}}function $i(t,e){1&t&&z.Ob(0,"tr",48)}function Vi(t,e){1&t&&z.Ob(0,"tr",49)}function Wi(t,e){if(1&t&&(z.Tb(0,"table",33),z.Rb(1,34),z.Cc(2,ji,2,0,"th",35),z.Cc(3,Bi,2,1,"td",36),z.Qb(),z.Rb(4,37),z.Cc(5,Li,2,0,"th",38),z.Cc(6,Hi,2,2,"td",39),z.Qb(),z.Rb(7,40),z.Cc(8,zi,2,0,"th",35),z.Cc(9,qi,3,1,"td",36),z.Qb(),z.Cc(10,$i,1,0,"tr",41),z.Cc(11,Vi,1,0,"tr",42),z.Sb()),2&t){var n=z.fc(2);z.lc("dataSource",n.dataSource),z.Cb(10),z.lc("matHeaderRowDef",n.displayedColumns),z.Cb(1),z.lc("matRowDefColumns",n.displayedColumns)}}function Gi(t,e){if(1&t&&(z.Tb(0,"mat-card",0),z.Tb(1,"mat-card-title"),z.Tb(2,"h4"),z.Dc(3),z.gc(4,"date"),z.Cc(5,Ri,3,0,"button",1),z.Cc(6,Ii,3,0,"button",1),z.Sb(),z.Sb(),z.Tb(7,"mat-card-content"),z.Cc(8,Ni,17,5,"form",2),z.Cc(9,Ui,1,0,"hr",3),z.Cc(10,Wi,12,3,"table",28),z.Sb(),z.Sb()),2&t){var n=z.fc();z.Cb(3),z.Fc(" Detalle del turno ",z.ic(4,6,n.turno.inicio,"dd/MM/yyyy HH:mm:ss")," "),z.Cb(2),z.lc("ngIf",!n.showDetalleTurnoForm),z.Cb(1),z.lc("ngIf",n.showDetalleTurnoForm),z.Cb(2),z.lc("ngIf",n.showDetalleTurnoForm),z.Cb(1),z.lc("ngIf",n.detallesTurno.length>0),z.Cb(1),z.lc("ngIf",n.detallesTurno.length>0)}}var Qi,Ji,Xi,Zi=((Qi=function(){function t(e,n,a,o,i,r,c){var s=this;d(this,t),this.snackBar=e,this.ls=n,this.tipoTurnoSrvc=a,this.turnoSrvc=o,this.usuarioTipoSrvc=i,this.usuarioSrvc=r,this.dialog=c,this.turnoSavedEv=new z.o,this.showTurnoForm=!0,this.showDetalleTurnoForm=!0,this.detallesTurno=[],this.displayedColumns=["usuario_tipo","usuario","editItem"],this.tiposTurno=[],this.tiposUsuario=[],this.usuarios=[],this.esMovil=!1,this.comandas=[],this.facturas=[],this.pendientes=!1,this.loadTiposTurno=function(){s.tipoTurnoSrvc.get().subscribe(function(t){t&&(s.tiposTurno=t)})},this.loadTiposUsuario=function(){s.usuarioTipoSrvc.get().subscribe(function(t){t&&(s.tiposUsuario=t)})},this.loadUsuarios=function(){s.usuarioSrvc.get({sede:s.ls.get(Le.a.usrTokenVar).sede||0}).subscribe(function(t){t&&(s.usuarios=t)})},this.resetTurno=function(){s.pendientes=!1,s.comandas=[],s.facturas=[],s.turno={turno:null,turno_tipo:null,inicio:ca().format(Le.a.dbDateTimeFormat),fin:null},s.resetDetalleTurno()},this.saveInfoTurno=function(){s.pendientes=!1,s.turnoSrvc.save(s.turno).subscribe(function(t){t.exito?(s.turnoSavedEv.emit(),s.resetTurno(),s.turno=t.turno,s.snackBar.open("Turno modificado con \xe9xito...","Turno",{duration:3e3})):(t.pendientes&&(s.snackBar.open("ERROR: Error al cerrar el turno","Turno",{duration:3e3}),s.pendientes=!0,s.comandas=t.comandas,s.facturas=t.facturas),s.snackBar.open("ERROR: ".concat(t.mensaje),"Turno",{duration:3e3}))})},this.onSubmit=function(){ca(s.turno.fin).isValid()?s.dialog.open(rn.a,{maxWidth:"400px",data:new rn.b("Cerrar turno","La fecha de finalizaci\xf3n cerrar\xe1 el turno. \xbfDesea continuar?","S\xed","No")}).afterClosed().subscribe(function(t){t&&s.saveInfoTurno()}):s.saveInfoTurno()},this.resetDetalleTurno=function(){return s.detalleTurno={turno:s.turno.turno?s.turno.turno:null,usuario:null,usuario_tipo:null}},this.loadDetalleTurno=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+s.turno.turno;s.turnoSrvc.getDetalle(t,{turno:t}).subscribe(function(t){t&&(s.detallesTurno=t,s.updateTableDataSource())})},this.onSubmitDetail=function(){s.detalleTurno.turno=s.turno.turno,s.turnoSrvc.saveDetalle(s.detalleTurno).subscribe(function(t){t.exito?(s.loadDetalleTurno(),s.resetDetalleTurno(),s.snackBar.open("Usuario agregado al turno...","Turno",{duration:3e3})):s.snackBar.open("ERROR: ".concat(t.mensaje),"Turno",{duration:3e3})})},this.anularDetalleTurno=function(t){s.turnoSrvc.anularDetalle({turno:t.turno,usuario:t.usuario.usuario,usuario_tipo:t.usuario_tipo.usuario_tipo}).subscribe(function(t){t.exito?(s.loadDetalleTurno(),s.resetDetalleTurno(),s.snackBar.open("Se quit\xf3 al usuario del turno...","Turno",{duration:3e3})):s.snackBar.open("ERROR: ".concat(t.mensaje),"Turno",{duration:3e3})})},this.updateTableDataSource=function(){return s.dataSource=new x.k(s.detallesTurno)},this.getNow=function(){return ca().format(Le.a.dbDateTimeFormat)}}return m(t,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(Le.a.usrTokenVar).enmovil||!1,this.resetTurno(),this.loadTiposTurno(),this.loadTiposUsuario(),this.loadUsuarios()}}]),t}()).\u0275fac=function(t){return new(t||Qi)(z.Nb(R.a),z.Nb(We.a),z.Nb(pi),z.Nb(si),z.Nb(hi),z.Nb(Vn.a),z.Nb(U.b))},Qi.\u0275cmp=z.Hb({type:Qi,selectors:[["app-form-turno"]],inputs:{turno:"turno"},outputs:{turnoSavedEv:"turnoSavedEv"},decls:11,vars:9,consts:[[1,"mat-elevation-z4","fullWidth"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmTurno","ngForm"],[1,"form-group"],[1,"fullWidth"],["name","turno_tipo","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","fullWidth",4,"ngIf"],["role","group","align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],[3,"value"],["matInput","","type","datetime-locale","placeholder","Inicio","name","inicio","required","",3,"ngModel","ngModelChange"],["type","button","mat-button","","matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],["type","button","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["type","button","mat-button","","matSuffix","","mat-icon-button","",3,"click"],["type","button","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["matInput","","type","datetime-locale","placeholder","Fin","name","fin",3,"ngModel","ngModelChange"],["mat-raised-button","","type","button","color","accent",3,"click"],[1,"row"],[1,"col"],[4,"ngFor","ngForOf"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleTurno","ngForm"],["name","usuario_tipo","required","",3,"ngModel","ngModelChange"],["name","usuario","required","",3,"ngModel","ngModelChange"],["role","group",1,"btn-group","d-flex","justify-content-end"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","usuario_tipo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","usuario"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","editItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(z.Tb(0,"mat-card",0),z.Tb(1,"mat-card-title"),z.Tb(2,"h4"),z.Dc(3),z.gc(4,"date"),z.Cc(5,gi,3,0,"button",1),z.Cc(6,vi,3,0,"button",1),z.Sb(),z.Sb(),z.Tb(7,"mat-card-content"),z.Cc(8,Oi,17,7,"form",2),z.Sb(),z.Sb(),z.Cc(9,Mi,1,0,"hr",3),z.Cc(10,Gi,11,9,"mat-card",4)),2&t&&(z.Cb(3),z.Fc(" Turno ",e.turno.turno?z.ic(4,6,e.turno.inicio,"dd/MM/yyyy HH:mm:ss"):""," "),z.Cb(2),z.lc("ngIf",!e.showTurnoForm),z.Cb(1),z.lc("ngIf",e.showTurnoForm),z.Cb(2),z.lc("ngIf",e.showTurnoForm),z.Cb(1),z.lc("ngIf",e.turno.turno),z.Cb(1),z.lc("ngIf",e.turno.turno))},directives:[D.a,D.h,b.m,D.c,M.a,T.a,p.r,p.l,p.m,y.b,y.e,P.a,p.p,p.k,p.n,b.l,$.k,k.b,p.c,y.f,x.j,x.c,x.e,x.b,x.g,x.i,x.d,x.a,x.f,x.h],pipes:[b.e],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:34pt!important}"]}),Qi),Ki=["lstTurno"],Yi=["frmTurno"],tr=((Ji=function(){function t(){var e=this;d(this,t),this.setTurno=function(t){e.turno=t,e.frmTurno.loadDetalleTurno(+e.turno.turno),e.frmTurno.pendientes=!1,e.frmTurno.comandas=[],e.frmTurno.facturas=[]},this.refreshTurnoList=function(){return e.lstTurnoComponent.loadTurnos()},this.turno={turno:null,turno_tipo:null,inicio:ca().format(Le.a.dbDateTimeFormat),fin:null}}return m(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Ji)},Ji.\u0275cmp=z.Hb({type:Ji,selectors:[["app-turno"]],viewQuery:function(t,e){var n;1&t&&(z.Ic(Ki,1),z.Ic(Yi,1)),2&t&&(z.sc(n=z.cc())&&(e.lstTurnoComponent=n.first),z.sc(n=z.cc())&&(e.frmTurno=n.first))},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getTurnoEv"],["lstTurno",""],[1,"col","m7","s12"],[3,"turno","turnoSavedEv"],["frmTurno",""]],template:function(t,e){1&t&&(z.Tb(0,"div",0),z.Tb(1,"div",1),z.Tb(2,"app-lista-turno",2,3),z.bc("getTurnoEv",function(t){return e.setTurno(t)}),z.Sb(),z.Sb(),z.Tb(4,"div",4),z.Tb(5,"app-form-turno",5,6),z.bc("turnoSavedEv",function(){return e.refreshTurnoList()}),z.Sb(),z.Sb(),z.Sb()),2&t&&(z.Cb(5),z.lc("turno",e.turno))},directives:[fi,Zi],styles:[""]}),Ji),er=r("Iab2"),nr=((Xi=function(){function t(e){d(this,t),this.http=e,this.moduleUrl="reporte/venta",this.srvcErrHndl=new He.a}return m(t,[{key:"porCategoria",value:function(t){return this.http.get("".concat(Le.a.urlFacturacion,"/").concat(this.moduleUrl,"/categoria?").concat($e.stringify(t))).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"porArticulo",value:function(t){return this.http.get("".concat(Le.a.urlFacturacion,"/").concat(this.moduleUrl,"/articulo?").concat($e.stringify(t))).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"porCategoriaPdf",value:function(t){var e={headers:new f.d({Accept:"application/pdf"}),responseType:"blob"};return this.http.get("".concat(Le.a.urlFacturacion,"/").concat(this.moduleUrl,"/categoriapdf/1?").concat($e.stringify(t)),e).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"porArticuloPdf",value:function(t){var e={headers:new f.d({Accept:"application/pdf"}),responseType:"blob"};return this.http.get("".concat(Le.a.urlFacturacion,"/").concat(this.moduleUrl,"/articulopdf/1?").concat($e.stringify(t)),e).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||Xi)(z.Xb(f.b))},Xi.\u0275prov=z.Jb({token:Xi,factory:Xi.\u0275fac,providedIn:"root"}),Xi),ar=r("2qVp"),or=r("NU9O");function ir(t,e){if(1&t&&(z.Rb(0),z.Tb(1,"tr"),z.Tb(2,"td",10),z.Dc(3),z.Sb(),z.Tb(4,"td",11),z.Dc(5),z.gc(6,"number"),z.Sb(),z.Tb(7,"td",11),z.Dc(8),z.gc(9,"number"),z.Sb(),z.Tb(10,"td",11),z.Dc(11),z.gc(12,"number"),z.Sb(),z.Tb(13,"td",11),z.Dc(14),z.gc(15,"number"),z.Sb(),z.Sb(),z.Qb()),2&t){var n=e.$implicit;z.Cb(3),z.Ec(n.descripcion),z.Cb(2),z.Ec(z.ic(6,5,n.cantidad,"1.2-2")),z.Cb(3),z.Ec(z.ic(9,8,n.porcentaje,"1.2-2")),z.Cb(3),z.Ec(z.ic(12,11,n.precio_unitario,"1.2-2")),z.Cb(3),z.Ec(z.ic(15,14,n.total,"1.2-2"))}}function rr(t,e){if(1&t&&(z.Rb(0),z.Tb(1,"tr"),z.Tb(2,"th",7),z.Dc(3),z.Sb(),z.Sb(),z.Cc(4,ir,16,17,"ng-container",4),z.Tb(5,"tr"),z.Tb(6,"th",8),z.Dc(7,"Total de subcategor\xeda:"),z.Sb(),z.Tb(8,"th",9),z.Dc(9),z.gc(10,"number"),z.Sb(),z.Sb(),z.Qb()),2&t){var n=z.fc().$implicit;z.Cb(3),z.Ec(n.descripcion),z.Cb(1),z.lc("ngForOf",n.articulos),z.Cb(5),z.Ec(z.ic(10,3,n.total,"1.2-2"))}}function cr(t,e){if(1&t&&(z.Rb(0),z.Cc(1,rr,11,6,"ng-container",5),z.Qb()),2&t){var n=e.$implicit;z.Cb(1),z.lc("ngIf",n.articulos.length>0)}}function sr(t,e){if(1&t&&(z.Rb(0),z.Tb(1,"tr"),z.Tb(2,"th",6),z.Dc(3),z.Sb(),z.Sb(),z.Cc(4,cr,2,1,"ng-container",4),z.Qb()),2&t){var n=z.fc().$implicit;z.Cb(3),z.Ec(n.descripcion),z.Cb(1),z.lc("ngForOf",n.subcategoria)}}function lr(t,e){if(1&t&&(z.Rb(0),z.Cc(1,sr,5,2,"ng-container",5),z.Qb()),2&t){var n=e.$implicit;z.Cb(1),z.lc("ngIf",n.subcategoria.length>0)}}var ur,dr=((ur=function(){function t(){d(this,t),this.params={},this.data=[]}return m(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||ur)},ur.\u0275cmp=z.Hb({type:ur,selectors:[["app-por-categoria"]],inputs:{params:"params",data:"data"},decls:26,vars:9,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"tbl"],[1,"brdTSingleBSingle"],[1,"rtxt","numWidth","brdTSingleBSingle"],[4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","5"],["colspan","5",1,"tab"],["colspan","4",1,"rtxt"],[1,"rtxt","brdTSingleBDouble","numWidth"],[1,"doubleTab","brdBSingle"],[1,"rtxt","numWidth","brdBSingle"]],template:function(t,e){1&t&&(z.Tb(0,"mat-card",0),z.Tb(1,"mat-card-header"),z.Tb(2,"mat-card-title"),z.Dc(3,"Reporte de ventas"),z.Sb(),z.Tb(4,"mat-card-subtitle"),z.Dc(5," Por categor\xeda"),z.Ob(6,"br"),z.Dc(7),z.gc(8,"date"),z.gc(9,"date"),z.Sb(),z.Sb(),z.Tb(10,"mat-card-content"),z.Tb(11,"table",1),z.Tb(12,"thead"),z.Tb(13,"tr"),z.Tb(14,"th",2),z.Dc(15,"Descripci\xf3n"),z.Sb(),z.Tb(16,"th",3),z.Dc(17,"Cantidad"),z.Sb(),z.Tb(18,"th",3),z.Dc(19,"Porcentaje"),z.Sb(),z.Tb(20,"th",3),z.Dc(21,"Precio unitario"),z.Sb(),z.Tb(22,"th",3),z.Dc(23,"Total"),z.Sb(),z.Sb(),z.Sb(),z.Tb(24,"tbody"),z.Cc(25,lr,2,1,"ng-container",4),z.Sb(),z.Sb(),z.Sb(),z.Sb()),2&t&&(z.Cb(7),z.Gc(" Del ",z.ic(8,3,e.params.fdel,"dd/MM/yyyy")," al ",z.ic(9,6,e.params.fal,"dd/MM/yyyy")," "),z.Cb(18),z.lc("ngForOf",e.data))},directives:[D.a,D.d,D.h,D.g,D.c,b.l,b.m],pipes:[b.e,b.f],styles:[".numWidth[_ngcontent-%COMP%]{width:10%}tr[_ngcontent-%COMP%]{border:none}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-top:.25em;padding-bottom:.25em}"]}),ur);function br(t,e){if(1&t&&(z.Rb(0),z.Tb(1,"tr"),z.Tb(2,"td",6),z.Dc(3),z.Sb(),z.Tb(4,"td",7),z.Dc(5),z.gc(6,"number"),z.Sb(),z.Tb(7,"td",7),z.Dc(8),z.gc(9,"number"),z.Sb(),z.Sb(),z.Qb()),2&t){var n=e.$implicit;z.Cb(3),z.Ec(n.articulo.descripcion),z.Cb(2),z.Ec(z.ic(6,3,n.cantidad,"1.2-2")),z.Cb(3),z.Ec(z.ic(9,6,n.total,"1.2-2"))}}function mr(t,e){if(1&t&&(z.Tb(0,"mat-card-content"),z.Tb(1,"table",2),z.Tb(2,"thead"),z.Tb(3,"tr"),z.Tb(4,"th",3),z.Dc(5,"Descripci\xf3n"),z.Sb(),z.Tb(6,"th",4),z.Dc(7,"Cantidad"),z.Sb(),z.Tb(8,"th",4),z.Dc(9,"Total"),z.Sb(),z.Sb(),z.Sb(),z.Tb(10,"tbody"),z.Cc(11,br,10,9,"ng-container",5),z.Sb(),z.Sb(),z.Sb()),2&t){var n=z.fc();z.Cb(11),z.lc("ngForOf",n.data.datos)}}function fr(t,e){if(1&t&&(z.Tb(0,"tr"),z.Tb(1,"td",6),z.Dc(2),z.Sb(),z.Tb(3,"td",7),z.Dc(4),z.gc(5,"number"),z.Sb(),z.Tb(6,"td",7),z.Dc(7),z.gc(8,"number"),z.Sb(),z.Sb()),2&t){var n=e.$implicit;z.Cb(2),z.Ec(n.articulo.descripcion),z.Cb(2),z.Ec(z.ic(5,3,n.cantidad,"1.2-2")),z.Cb(3),z.Ec(z.ic(8,6,n.total,"1.2-2"))}}function pr(t,e){if(1&t&&(z.Rb(0),z.Tb(1,"tr"),z.Tb(2,"th",8),z.Dc(3),z.Sb(),z.Sb(),z.Cc(4,fr,9,9,"tr",5),z.Qb()),2&t){var n=e.$implicit;z.Cb(3),z.Ec(n.sede),z.Cb(1),z.lc("ngForOf",n.articulos)}}function hr(t,e){if(1&t&&(z.Tb(0,"mat-card-content"),z.Tb(1,"table",2),z.Tb(2,"thead"),z.Tb(3,"tr"),z.Tb(4,"th",3),z.Dc(5,"Descripci\xf3n"),z.Sb(),z.Tb(6,"th",4),z.Dc(7,"Cantidad"),z.Sb(),z.Tb(8,"th",4),z.Dc(9,"Total"),z.Sb(),z.Sb(),z.Sb(),z.Tb(10,"tbody"),z.Cc(11,pr,5,2,"ng-container",5),z.Sb(),z.Sb(),z.Sb()),2&t){var n=z.fc();z.Cb(11),z.lc("ngForOf",n.data.datos)}}var gr,vr=((gr=function(){function t(){d(this,t),this.params={},this.data={}}return m(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||gr)},gr.\u0275cmp=z.Hb({type:gr,selectors:[["app-por-articulo"]],inputs:{params:"params",data:"data"},decls:12,vars:10,consts:[[1,"mat-elevation-z4","fullWidth"],[4,"ngIf"],[1,"tbl"],[1,"brdTSingleBSingle"],[1,"rtxt","numWidth","brdTSingleBSingle"],[4,"ngFor","ngForOf"],[1,"doubleTab","brdBSingle"],[1,"rtxt","numWidth","brdBSingle"],["colspan","3",1,"brdTSingleBSingle"]],template:function(t,e){1&t&&(z.Tb(0,"mat-card",0),z.Tb(1,"mat-card-header"),z.Tb(2,"mat-card-title"),z.Dc(3,"Reporte de ventas"),z.Sb(),z.Tb(4,"mat-card-subtitle"),z.Dc(5," Por art\xedculo"),z.Ob(6,"br"),z.Dc(7),z.gc(8,"date"),z.gc(9,"date"),z.Sb(),z.Sb(),z.Cc(10,mr,12,1,"mat-card-content",1),z.Cc(11,hr,12,1,"mat-card-content",1),z.Sb()),2&t&&(z.Cb(7),z.Gc(" Del ",z.ic(8,4,e.params.fdel,"dd/MM/yyyy")," al ",z.ic(9,7,e.params.fal,"dd/MM/yyyy")," "),z.Cb(3),z.lc("ngIf",1==e.data.grupo),z.Cb(1),z.lc("ngIf",2==e.data.grupo))},directives:[D.a,D.d,D.h,D.g,b.m,D.c,b.l],pipes:[b.e,b.f],styles:[".numWidth[_ngcontent-%COMP%]{width:10%}tr[_ngcontent-%COMP%]{border:none}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-top:.25em;padding-bottom:.25em}"]}),gr);function Cr(t,e){if(1&t&&(z.Tb(0,"mat-option",16),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n.tipo_reporte),z.Cb(1),z.Fc(" ",n.descripcion," ")}}function Sr(t,e){if(1&t&&(z.Tb(0,"mat-option",16),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n.turno_tipo),z.Cb(1),z.Fc(" ",n.descripcion," ")}}function _r(t,e){if(1&t&&(z.Tb(0,"mat-option",16),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n.sede.sede),z.Cb(1),z.Fc(" ",n.sede.nombre," ")}}function Tr(t,e){if(1&t&&(z.Tb(0,"mat-option",16),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n.id),z.Cb(1),z.Fc(" ",n.descripcion," ")}}function yr(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-form-field",5),z.Tb(1,"mat-label"),z.Dc(2,"Agrupar por"),z.Sb(),z.Tb(3,"mat-select",17),z.bc("ngModelChange",function(t){return z.wc(n),z.fc().params._grupo=t}),z.Cc(4,Tr,2,2,"mat-option",7),z.Sb(),z.Sb()}if(2&t){var a=z.fc();z.Cb(3),z.lc("ngModel",a.params._grupo),z.Cb(1),z.lc("ngForOf",a.grupos)}}function kr(t,e){1&t&&z.Ob(0,"app-cargando")}function Dr(t,e){if(1&t&&(z.Tb(0,"div",0),z.Tb(1,"div",1),z.Ob(2,"app-por-categoria",18),z.Sb(),z.Sb()),2&t){var n=z.fc();z.Cb(2),z.lc("params",n.params)("data",n.porCategoria)}}function wr(t,e){if(1&t&&(z.Tb(0,"div",0),z.Tb(1,"div",1),z.Ob(2,"app-por-articulo",18),z.Sb(),z.Sb()),2&t){var n=z.fc();z.Cb(2),z.lc("params",n.params)("data",n.porArticulo)}}var Er,xr,Pr=((xr=function(){function t(e,n,a,o){var i=this;d(this,t),this.snackBar=e,this.rptVentasSrvc=n,this.tipoTurnoSrvc=a,this.sedeSrvc=o,this.tiposReporte=[],this.params={},this.paramsToSend={},this.msgGenerandoReporte=null,this.porCategoria=[],this.porArticulo={datos:[]},this.tiposTurno=[],this.sedes=[],this.grupos=Le.a.grupos,this.tituloCategoria="Ventas por categoria",this.tituloArticulo="Ventas por articulo",this.cargando=!1,this.configBotones={showPdf:!0,showHtml:!0,showExcel:!0},this.loadSedes=function(){i.sedeSrvc.getSedes({reporte:!0}).subscribe(function(t){t&&(i.sedes=t)})},this.loadTiposTurno=function(){i.tipoTurnoSrvc.get().subscribe(function(t){t&&(i.tiposTurno=t)})},this.loadTiposReporte=function(){i.tiposReporte=[{tipo_reporte:1,descripcion:"Por categor\xeda"},{tipo_reporte:2,descripcion:"Por art\xedculo"}]},this.resetParams=function(){i.porCategoria=[],i.porArticulo=[],i.msgGenerandoReporte=null,i.params={tipo_reporte:void 0,fdel:ca().startOf("week").format(Le.a.dbDateFormat),fal:ca().endOf("week").format(Le.a.dbDateFormat)},i.cargando=!1},this.getReporte=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;switch(i.paramsToSend=JSON.parse(JSON.stringify(i.params)),i.msgGenerandoReporte="GENERANDO REPORTE EN ",t){case 1:i.getEnPantalla();break;case 2:i.getPdf();break;case 3:i.getExcel()}},this.getPdf=function(){switch(i.params.tipo_reporte){case 1:i.getPorCategoriaPdf();break;case 2:i.getPorArticuloPdf()}},this.getExcel=function(){switch(i.params.tipo_reporte){case 1:i.getPorCategoriaExcel();break;case 2:i.getPorArticuloExcel()}},this.getPorCategoriaExcel=function(){i.paramsToSend._excel=1,i.cargando=!0,i.cleanParams(),i.rptVentasSrvc.porCategoriaPdf(i.paramsToSend).subscribe(function(t){if(i.cargando=!1,t){var e=new Blob([t],{type:"application/vnd.ms-excel"});Object(er.saveAs)(e,"".concat(i.tituloCategoria,".xls"))}else i.snackBar.open("No se pudo generar el reporte...",i.tituloCategoria,{duration:3e3})})},this.getPorCategoriaPdf=function(){i.paramsToSend._excel=0,i.cargando=!0,i.cleanParams(),i.rptVentasSrvc.porCategoriaPdf(i.paramsToSend).subscribe(function(t){if(i.cargando=!1,t){var e=new Blob([t],{type:"application/pdf"});Object(er.saveAs)(e,"".concat(i.tituloCategoria,".pdf"))}else i.snackBar.open("No se pudo generar el reporte...",i.tituloCategoria,{duration:3e3})})},this.getPorArticuloPdf=function(){i.paramsToSend._excel=0,i.cargando=!0,i.cleanParams(),i.rptVentasSrvc.porArticuloPdf(i.paramsToSend).subscribe(function(t){if(i.cargando=!1,t){var e=new Blob([t],{type:"application/pdf"});Object(er.saveAs)(e,"".concat(i.tituloArticulo,".pdf"))}else i.snackBar.open("No se pudo generar el reporte...",i.tituloArticulo,{duration:3e3})})},this.getPorArticuloExcel=function(){i.paramsToSend._excel=1,i.cargando=!0,i.cleanParams(),i.rptVentasSrvc.porArticuloPdf(i.paramsToSend).subscribe(function(t){if(i.cargando=!1,t){var e=new Blob([t],{type:"application/vnd.ms-excel"});Object(er.saveAs)(e,"".concat(i.tituloArticulo,".xls"))}else i.snackBar.open("No se pudo generar el reporte...",i.tituloArticulo,{duration:3e3})})},this.getEnPantalla=function(){switch(i.params.tipo_reporte){case 1:i.getPorCategoriaEnPantalla();break;case 2:i.getPorArticuloEnPantalla()}},this.cleanParams=function(){return delete i.paramsToSend.tipo_reporte},this.getPorCategoriaEnPantalla=function(){i.cargando=!0,i.cleanParams(),i.rptVentasSrvc.porCategoria(i.paramsToSend).subscribe(function(t){i.cargando=!1,t?i.porCategoria=t:i.snackBar.open("No se pudo generar el reporte...","Ventas por categor\xeda",{duration:3e3})})},this.getPorArticuloEnPantalla=function(){i.cargando=!0,i.cleanParams(),i.rptVentasSrvc.porArticulo(i.paramsToSend).subscribe(function(t){i.cargando=!1,t?i.porArticulo=t:i.snackBar.open("No se pudo generar el reporte...","Ventas por art\xedculo",{duration:3e3})})}}return m(t,[{key:"ngOnInit",value:function(){this.resetParams(),this.loadTiposReporte(),this.loadTiposTurno(),this.loadSedes()}}]),t}()).\u0275fac=function(t){return new(t||xr)(z.Nb(R.a),z.Nb(nr),z.Nb(pi),z.Nb(ar.a))},xr.\u0275cmp=z.Hb({type:xr,selectors:[["app-rpt-ventas"]],decls:33,vars:13,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmEntidad","ngForm"],[1,"fullWidth"],["name","tipo_reporte","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","turno_tipo",3,"ngModel","ngModelChange"],["type","date","matInput","","placeholder","Del","name","fdel","required","",3,"ngModel","ngModelChange"],["type","date","matInput","","placeholder","Al","name","fal","required","",3,"ngModel","ngModelChange"],["name","sede","multiple","",3,"ngModel","ngModelChange"],["class","fullWidth",4,"ngIf"],[3,"configuracion","excelClick","htmlClick","pdfClick","resetParamsClick"],[4,"ngIf"],["class","row",4,"ngIf"],[3,"value"],["name","grupo",3,"ngModel","ngModelChange"],[3,"params","data"]],template:function(t,e){1&t&&(z.Tb(0,"div",0),z.Tb(1,"div",1),z.Tb(2,"mat-card",2),z.Tb(3,"mat-card-title"),z.Tb(4,"h4"),z.Dc(5,"Reporte de ventas"),z.Sb(),z.Sb(),z.Tb(6,"mat-card-content"),z.Tb(7,"form",3,4),z.Tb(9,"mat-form-field",5),z.Tb(10,"mat-label"),z.Dc(11,"Tipo"),z.Sb(),z.Tb(12,"mat-select",6),z.bc("ngModelChange",function(t){return e.params.tipo_reporte=t}),z.Cc(13,Cr,2,2,"mat-option",7),z.Sb(),z.Sb(),z.Tb(14,"mat-form-field",5),z.Tb(15,"mat-label"),z.Dc(16,"Tipo de turno"),z.Sb(),z.Tb(17,"mat-select",8),z.bc("ngModelChange",function(t){return e.params.turno_tipo=t}),z.Cc(18,Sr,2,2,"mat-option",7),z.Sb(),z.Sb(),z.Tb(19,"mat-form-field",5),z.Tb(20,"input",9),z.bc("ngModelChange",function(t){return e.params.fdel=t}),z.Sb(),z.Sb(),z.Tb(21,"mat-form-field",5),z.Tb(22,"input",10),z.bc("ngModelChange",function(t){return e.params.fal=t}),z.Sb(),z.Sb(),z.Tb(23,"mat-form-field",5),z.Tb(24,"mat-label"),z.Dc(25,"Sede"),z.Sb(),z.Tb(26,"mat-select",11),z.bc("ngModelChange",function(t){return e.params.sede=t}),z.Cc(27,_r,2,2,"mat-option",7),z.Sb(),z.Sb(),z.Cc(28,yr,5,2,"mat-form-field",12),z.Tb(29,"app-rpt-botones",13),z.bc("excelClick",function(){return e.getReporte(3)})("htmlClick",function(){return e.getReporte(1)})("pdfClick",function(){return e.getReporte(2)})("resetParamsClick",function(){return e.resetParams()}),z.Sb(),z.Sb(),z.Cc(30,kr,1,0,"app-cargando",14),z.Sb(),z.Sb(),z.Sb(),z.Sb(),z.Cc(31,Dr,3,2,"div",15),z.Cc(32,wr,3,2,"div",15)),2&t&&(z.Cb(12),z.lc("ngModel",e.params.tipo_reporte),z.Cb(1),z.lc("ngForOf",e.tiposReporte),z.Cb(4),z.lc("ngModel",e.params.turno_tipo),z.Cb(1),z.lc("ngForOf",e.tiposTurno),z.Cb(2),z.lc("ngModel",e.params.fdel),z.Cb(2),z.lc("ngModel",e.params.fal),z.Cb(4),z.lc("ngModel",e.params.sede),z.Cb(1),z.lc("ngForOf",e.sedes),z.Cb(1),z.lc("ngIf",e.params.sede&&e.params.sede.length>1),z.Cb(1),z.lc("configuracion",e.configBotones),z.Cb(1),z.lc("ngIf",e.cargando),z.Cb(1),z.lc("ngIf",1===e.params.tipo_reporte&&e.porCategoria.length>0),z.Cb(1),z.lc("ngIf",2===e.params.tipo_reporte))},directives:[D.a,D.h,D.c,p.r,p.l,p.m,y.b,y.e,P.a,p.p,p.k,p.n,b.l,k.b,p.c,b.m,or.a,$.k,ha.a,dr,vr],styles:[""]}),xr),Or=((Er=function(){function t(){var e=this;d(this,t),this.fdel=ca().format(Le.a.dbDateFormat),this.fdelChange=new z.o,this.fal=ca().format(Le.a.dbDateFormat),this.falChange=new z.o,this.configuracion={isRequiredFDel:!0,isRequiredFAl:!0},this.onFDelChange=function(){return e.fdelChange.emit(e.fdel)},this.onFAlChange=function(){return e.falChange.emit(e.fal)}}return m(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Er)},Er.\u0275cmp=z.Hb({type:Er,selectors:[["app-rpt-fechas"]],inputs:{fdel:"fdel",fal:"fal",configuracion:"configuracion"},outputs:{fdelChange:"fdelChange",falChange:"falChange"},decls:4,vars:4,consts:[[1,"fullWidth"],["type","date","matInput","","placeholder","Del","name","fdel",3,"ngModel","required","ngModelChange","change"],["type","date","matInput","","placeholder","Al","name","fal",3,"ngModel","required","ngModelChange","change"]],template:function(t,e){1&t&&(z.Tb(0,"mat-form-field",0),z.Tb(1,"input",1),z.bc("ngModelChange",function(t){return e.fdel=t})("change",function(){return e.onFDelChange()}),z.Sb(),z.Sb(),z.Tb(2,"mat-form-field",0),z.Tb(3,"input",2),z.bc("ngModelChange",function(t){return e.fal=t})("change",function(){return e.onFAlChange()}),z.Sb(),z.Sb()),2&t&&(z.Cb(1),z.lc("ngModel",e.fdel)("required",e.configuracion.isRequiredFDel),z.Cb(2),z.lc("ngModel",e.fal)("required",e.configuracion.isRequiredFAl))},directives:[y.b,k.b,p.c,p.k,p.n,p.p],styles:[""]}),Er);function Mr(t,e){1&t&&z.Ob(0,"app-cargando")}var Rr,Ir=((Rr=function(){function t(){var e=this;d(this,t),this.params={},this.configParams={isRequiredFDel:!0,isRequiredFAl:!0},this.configBotones={isHtmlDisabled:!1,isPdfDisabled:!1,isExcelDisabled:!1},this.cargando=!1,this.resetParams=function(){e.params={fdel:ca().startOf("week").format(Le.a.dbDateFormat),fal:ca().endOf("week").format(Le.a.dbDateFormat)}},this.getReporte=function(){console.log("GENERANDO CON PARAMETROS = ",e.params)}}return m(t,[{key:"ngOnInit",value:function(){this.resetParams()}}]),t}()).\u0275fac=function(t){return new(t||Rr)},Rr.\u0275cmp=z.Hb({type:Rr,selectors:[["app-turnos"]],decls:12,vars:5,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmEntidad","ngForm"],[3,"fdel","fal","configuracion","fdelChange","falChange"],[3,"configuracion","htmlClick","pdfClick","excelClick","resetParamsClick"],[4,"ngIf"]],template:function(t,e){1&t&&(z.Tb(0,"div",0),z.Tb(1,"div",1),z.Tb(2,"mat-card",2),z.Tb(3,"mat-card-title"),z.Tb(4,"h4"),z.Dc(5,"Reporte de Turnos"),z.Sb(),z.Sb(),z.Tb(6,"mat-card-content"),z.Tb(7,"form",3,4),z.Tb(9,"app-rpt-fechas",5),z.bc("fdelChange",function(t){return e.params.fdel=t})("falChange",function(t){return e.params.fal=t}),z.Sb(),z.Tb(10,"app-rpt-botones",6),z.bc("htmlClick",function(){return e.getReporte()})("pdfClick",function(){return e.getReporte()})("excelClick",function(){return e.getReporte()})("resetParamsClick",function(){return e.resetParams()}),z.Sb(),z.Sb(),z.Cc(11,Mr,1,0,"app-cargando",7),z.Sb(),z.Sb(),z.Sb(),z.Sb()),2&t&&(z.Cb(9),z.lc("fdel",e.params.fdel)("fal",e.params.fal)("configuracion",e.configParams),z.Cb(1),z.lc("configuracion",e.configBotones),z.Cb(1),z.lc("ngIf",e.cargando))},directives:[D.a,D.h,D.c,p.r,p.l,p.m,Or,or.a,b.m,ha.a],styles:[""]}),Rr);function Fr(t,e){1&t&&z.Ob(0,"app-cargando")}var Ar,Nr=function(){return{standalone:!0}},Ur=((Ar=function(){function t(e,n){var a=this;d(this,t),this.snackBar=e,this.pdfServicio=n,this.params={},this.titulo="Propinas",this.configBotones={isHtmlDisabled:!0,isPdfDisabled:!1,isExcelDisabled:!1,showHtml:!1,showExcel:!0,showPdf:!0},this.cargando=!1,this.resetParams=function(){a.params={},a.cargando=!1}}return m(t,[{key:"ngOnInit",value:function(){}},{key:"onSubmit",value:function(){var t=this;this.params._excel=0,this.cargando=!0,this.pdfServicio.getReportePropina(this.params).subscribe(function(e){if(t.cargando=!1,e){var n=new Blob([e],{type:"application/pdf"});Object(er.saveAs)(n,"".concat(t.titulo,".pdf"))}else t.snackBar.open("No se pudo generar el reporte...",t.titulo,{duration:3e3})})}},{key:"excelClick",value:function(){var t=this;this.params._excel=1,this.cargando=!0,this.pdfServicio.getReportePropina(this.params).subscribe(function(e){if(t.cargando=!1,e){var n=new Blob([e],{type:"application/vnd.ms-excel"});Object(er.saveAs)(n,"".concat(t.titulo,".xls"))}else t.snackBar.open("No se pudo generar el reporte...",t.titulo,{duration:3e3})})}}]),t}()).\u0275fac=function(t){return new(t||Ar)(z.Nb(R.a),z.Nb(eo.a))},Ar.\u0275cmp=z.Hb({type:Ar,selectors:[["app-propinas"]],decls:17,vars:9,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmRptPropinas","ngForm"],[1,"fullWidth"],["matInput","","type","date","placeholder","Del","required","",3,"ngModel","ngModelOptions","ngModelChange"],["matInput","","type","date","placeholder","Al","required","",3,"ngModel","ngModelOptions","ngModelChange"],["name","mostrar_detalle",1,"fullWidth",3,"ngModel","ngModelChange"],[3,"configuracion","pdfClick","resetParamsClick","excelClick"],[4,"ngIf"]],template:function(t,e){1&t&&(z.Tb(0,"div",0),z.Tb(1,"div",1),z.Tb(2,"mat-card",2),z.Tb(3,"mat-card-title"),z.Tb(4,"h4"),z.Dc(5,"Reporte de propinas"),z.Sb(),z.Sb(),z.Tb(6,"mat-card-content"),z.Tb(7,"form",3,4),z.Tb(9,"mat-form-field",5),z.Tb(10,"input",6),z.bc("ngModelChange",function(t){return e.params.fdel=t}),z.Sb(),z.Sb(),z.Tb(11,"mat-form-field",5),z.Tb(12,"input",7),z.bc("ngModelChange",function(t){return e.params.fal=t}),z.Sb(),z.Sb(),z.Tb(13,"mat-checkbox",8),z.bc("ngModelChange",function(t){return+(e.params._detalle=t)}),z.Dc(14,"Mostrar Detalle"),z.Sb(),z.Tb(15,"app-rpt-botones",9),z.bc("pdfClick",function(){return e.onSubmit()})("resetParamsClick",function(){return e.resetParams()})("excelClick",function(){return e.excelClick()}),z.Sb(),z.Sb(),z.Cc(16,Fr,1,0,"app-cargando",10),z.Sb(),z.Sb(),z.Sb(),z.Sb()),2&t&&(z.Cb(10),z.lc("ngModel",e.params.fdel)("ngModelOptions",z.nc(7,Nr)),z.Cb(2),z.lc("ngModel",e.params.fal)("ngModelOptions",z.nc(8,Nr)),z.Cb(1),z.lc("ngModel",+e.params._detalle),z.Cb(2),z.lc("configuracion",e.configBotones),z.Cb(1),z.lc("ngIf",e.cargando))},directives:[D.a,D.h,D.c,p.r,p.l,p.m,y.b,k.b,p.c,p.p,p.k,p.n,O.a,or.a,b.m,ha.a],styles:[""]}),Ar),jr=r("+iZS");function Br(t,e){1&t&&(z.Tb(0,"th",19),z.Dc(1,"No."),z.Sb())}function Lr(t,e){if(1&t&&(z.Tb(0,"td",20),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.Cb(1),z.Fc("",n.comanda," ")}}function Hr(t,e){1&t&&(z.Tb(0,"th",19),z.Dc(1,"Orden"),z.Sb())}function zr(t,e){if(1&t&&(z.Tb(0,"td",20),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.Cb(1),z.Ec(n.origen_datos.numero_orden||"")}}function qr(t,e){1&t&&(z.Tb(0,"th",19),z.Dc(1,"Fecha/Hora"),z.Sb())}function $r(t,e){if(1&t&&(z.Tb(0,"td",20),z.Dc(1),z.gc(2,"date"),z.Sb()),2&t){var n=e.$implicit;z.Cb(1),z.Ec(z.ic(2,1,n.fhcreacion,"dd/MM/yyyy HH:mm:ss")||"")}}function Vr(t,e){1&t&&(z.Tb(0,"th",19),z.Dc(1,"Cliente"),z.Sb())}function Wr(t,e){if(1&t&&(z.Tb(0,"td",20),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.Cb(1),z.Ec(n.cuentas[0].nombre)}}function Gr(t,e){1&t&&(z.Tb(0,"th",19),z.Dc(1,"Total"),z.Sb())}function Qr(t,e){if(1&t&&(z.Tb(0,"td",20),z.Dc(1),z.gc(2,"number"),z.Sb()),2&t){var n=e.$implicit;z.Cb(1),z.Ec(z.ic(2,1,n.total,"1.2-2"))}}function Jr(t,e){1&t&&(z.Tb(0,"th",21),z.Dc(1,"Imprimir"),z.Sb())}function Xr(t,e){if(1&t){var n=z.Ub();z.Tb(0,"td",22),z.Tb(1,"button",23),z.bc("click",function(){z.wc(n);var t=e.$implicit;return z.fc().imprimir(t)}),z.Dc(2," Imprimir "),z.Sb(),z.Sb()}}function Zr(t,e){1&t&&(z.Tb(0,"th",21),z.Dc(1,"Cancelar"),z.Sb())}function Kr(t,e){if(1&t){var n=z.Ub();z.Tb(0,"td",22),z.Tb(1,"button",23),z.bc("click",function(){z.wc(n);var t=e.$implicit;return z.fc().cancelarPedido(t)}),z.Dc(2," Cancelar "),z.Sb(),z.Sb()}}function Yr(t,e){1&t&&(z.Tb(0,"th",21),z.Dc(1,"Facturar"),z.Sb())}function tc(t,e){if(1&t){var n=z.Ub();z.Tb(0,"td",22),z.Tb(1,"button",23),z.bc("click",function(){z.wc(n);var t=e.$implicit;return z.fc().firmar(t)}),z.Dc(2," Facturar "),z.Sb(),z.Sb()}}function ec(t,e){if(1&t&&(z.Tb(0,"h6"),z.Dc(1),z.Sb()),2&t){var n=z.fc().$implicit;z.Cb(1),z.Fc("Orden #",n.origen_datos.numero_orden,"")}}function nc(t,e){if(1&t&&(z.Tb(0,"tr"),z.Tb(1,"td",29),z.Tb(2,"p",30),z.Dc(3),z.Sb(),z.Sb(),z.Sb()),2&t){var n=z.fc().$implicit;z.Cb(3),z.Ec(n.notas_generales)}}function ac(t,e){1&t&&z.Ob(0,"br")}function oc(t,e){if(1&t&&(z.Tb(0,"span"),z.Dc(1),z.Sb()),2&t){var n=z.fc().$implicit;z.Cb(1),z.Fc("\xa0\xa0\xa0",n.notas,"")}}function ic(t,e){if(1&t&&(z.Tb(0,"tr"),z.Tb(1,"td",31),z.Dc(2),z.Sb(),z.Sb()),2&t){var n=z.fc().$implicit;z.Cb(2),z.Fc(" ",n," ")}}function rc(t,e){if(1&t&&(z.Rb(0),z.Cc(1,ic,3,1,"tr",26),z.Qb()),2&t){var n=e.$implicit;z.Cb(1),z.lc("ngIf",n.length>0)}}function cc(t,e){if(1&t&&(z.Rb(0),z.Tb(1,"tr"),z.Tb(2,"td"),z.Dc(3),z.Cc(4,ac,1,0,"br",26),z.Cc(5,oc,2,1,"span",26),z.Sb(),z.Tb(6,"td",27),z.Dc(7),z.gc(8,"number"),z.Sb(),z.Sb(),z.Cc(9,rc,2,1,"ng-container",28),z.Qb()),2&t){var n=e.$implicit;z.Cb(3),z.Gc(" ",n.cantidad," ",n.articulo.descripcion,""),z.Cb(1),z.lc("ngIf",n.notas.length>0),z.Cb(1),z.lc("ngIf",n.notas.length>0),z.Cb(2),z.Ec(z.ic(8,6,+n.precio*+n.cantidad+ +n.monto_extra,"1.2-2")),z.Cb(2),z.lc("ngForOf",n.detalle)}}function sc(t,e){if(1&t&&(z.Tb(0,"td",20),z.Tb(1,"div",24),z.Tb(2,"table",25),z.Tb(3,"caption"),z.Tb(4,"h5"),z.Dc(5),z.Sb(),z.Cc(6,ec,2,1,"h6",26),z.Sb(),z.Tb(7,"thead"),z.Tb(8,"th"),z.Dc(9,"Producto"),z.Sb(),z.Tb(10,"th",27),z.Dc(11,"Total"),z.Sb(),z.Sb(),z.Tb(12,"tbody"),z.Cc(13,nc,4,1,"tr",26),z.Cc(14,cc,10,9,"ng-container",28),z.Sb(),z.Sb(),z.Sb(),z.Sb()),2&t){var n=e.$implicit,a=z.fc();z.Db("colspan",a.columnsToDisplay.length),z.Cb(1),z.lc("@detailExpand",n==a.expandedElement?"expanded":"collapsed"),z.Cb(4),z.Fc("Detalle del pedido #",n.comanda,""),z.Cb(1),z.lc("ngIf",n.origen_datos.numero_orden),z.Cb(7),z.lc("ngIf",n.notas_generales),z.Cb(1),z.lc("ngForOf",n.cuentas[0].productos)}}function lc(t,e){1&t&&z.Ob(0,"tr",32)}function uc(t,e){if(1&t){var n=z.Ub();z.Tb(0,"tr",33),z.bc("click",function(){z.wc(n);var t=e.$implicit,a=z.fc();return a.expandedElement=a.expandedElement===t?null:t}),z.Sb()}if(2&t){var a=e.$implicit,o=z.fc();z.Fb("example-expanded-row",o.expandedElement===a)}}function dc(t,e){1&t&&z.Ob(0,"tr",34)}var bc,mc=function(){return["expandedDetail"]},fc=((bc=function(){function e(n,a,o,i,r,c,s,l,u){var b=this;d(this,e),this.dialog=n,this.snackBar=a,this.socket=o,this.ls=i,this.comandaSrvc=r,this.facturaSrvc=c,this.dns=s,this.pdfServicio=l,this.configSrvc=u,this.dataSource=[],this.columnsToDisplay=["comanda","orden","fechahora","nombre","total","imprimir","cancelar","facturar"],this.comandasEnLinea=[],this.params={de:0,a:99},this.avisoSocketIOEvent=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";b.dialog.open(rn.a,{maxWidth:"400px",data:new rn.b("Socket.IO",t,"Aceptar","Cancelar")}).afterClosed().subscribe(function(t){})},this.notificarUsuario=function(){var t={icon:"assets/img/minilogo.png",body:"Se recibi\xf3 una nueva orden a las ".concat(ca().format(Le.a.dateTimeFormat),"."),dir:"auto"};b.dns.createNotification("Rest-Touch Pro",1e4,t)},this.loadComandasEnLinea=function(){b.comandaSrvc.getComandasOnLIne().subscribe(function(t){b.comandasEnLinea=t,b.dataSource=b.comandasEnLinea})},this.setToPrint=function(t){var e=[];return t.forEach(function(t){e.push({id:+t.articulo.articulo,nombre:t.articulo.descripcion,cantidad:+t.cantidad,total:+t.total,notas:t.notas||"",impresora:{bluetooth:+t.articulo.impresora.bluetooth,direccion_ip:t.articulo.impresora.direccion_ip||"",impresora:+t.articulo.impresora.impresora,nombre:t.articulo.impresora.nombre||"",sede:+t.articulo.impresora.sede,ubicacion:t.articulo.impresora.ubicacion||""},detalle:t.detalle})}),e},this.getPdf=function(t){var e=+t.cuentas[0].cuenta;b.pdfServicio.getComanda(e).subscribe(function(t){if(t){var n=new Blob([t],{type:"application/pdf"}),a=window.URL.createObjectURL(n);window.open(a,"cuenta_".concat(e),"height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no")}else b.snackBar.open("No se pudo generar la comanda...","Comanda",{duration:3e3})})},this.imprimir=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=b.setToPrint(t.cuentas[0].productos),a=n.filter(function(t){return 0==+t.impresora.bluetooth}),o=n.filter(function(t){return 1==+t.impresora.bluetooth}),i={};a.length>0&&(i={Indice:e+1,Tipo:"Comanda",Nombre:t.cuentas[0].nombre,Numero:t.comanda,NoOrdenEnLinea:t.origen_datos.numero_orden,DireccionEntrega:t.origen_datos.direccion_entrega,DetalleCuenta:a,Total:0,NotasGenerales:t.notas_generales||""},b.socket.emit("print:comanda","".concat(JSON.stringify(i)))),o.length>0&&(i={Tipo:"Comanda",Nombre:t.cuentas[0].nombre,Numero:t.comanda,NoOrdenEnLinea:t.origen_datos.numero_orden,DireccionEntrega:t.origen_datos.direccion_entrega,DetalleCuenta:o,Total:0},b.printToBT(JSON.stringify(i)))},this.printToBT=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=window.open("com.restouch.impresion://impresion/".concat(t),"PrntBT","height=200,width=200,menubar=no,location=no,resizable=no,scrollbars=no,status=no");setTimeout(function(){return e.close()},1e3)},this.firmar=function(t){b.facturaSrvc.firmar(+t.factura.factura).subscribe(function(e){e.exito&&(b.loadComandasEnLinea(),b.dialog.open(rn.a,{maxWidth:"400px",data:new rn.b("Imprimir factura","\xbfDesea imprimir la factura?","S\xed","No")}).afterClosed().subscribe(function(n){n&&(1===(b.configSrvc.getConfig(Le.a.CONSTANTES.RT_MODO_FACTURA)||1)?b.printFactura(e.factura,t.origen_datos):b.representacionGrafica(+t.factura.factura))})),b.snackBar.open(e.mensaje,"Facturaci\xf3n",{duration:e.exito?3e3:1e4})})},this.printFactura=function(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={NombreEmpresa:e.empresa.nombre_comercial,NitEmpresa:e.empresa.nit,SedeEmpresa:e.sedeFactura.nombre,DireccionEmpresa:e.empresa.direccion,Fecha:ca(e.fecha_factura).format(Le.a.dateFormat),Nit:e.receptor.nit,Nombre:e.receptor.nombre,Direccion:e.receptor.direccion,Serie:e.serie_factura,Numero:e.numero_factura,Total:0,NoAutorizacion:e.fel_uuid,NombreCertificador:e.certificador_fel.nombre,NitCertificador:e.certificador_fel.nit,FechaDeAutorizacion:e.fecha_autorizacion,NoOrdenEnLinea:a.numero_orden,FormaDePago:a.metodo_pago&&a.metodo_pago.length>0?a.metodo_pago.join(", "):"",DetalleFactura:[]},i=t(e.detalle);try{for(i.s();!(n=i.n()).done;){var r=n.value;o.DetalleFactura.push({Cantidad:r.cantidad,Descripcion:r.articulo.descripcion,Total:parseFloat(r.total)}),o.Total+=parseFloat(r.total)}}catch(c){i.e(c)}finally{i.f()}b.socket.emit("print:factura",JSON.stringify(o))},this.representacionGrafica=function(t){b.facturaSrvc.getGrafo(t).subscribe(function(t){if(t.exito)switch(t.tipo){case"link":b.openLinkWindow(t.documento);break;case"pdf":b.openPdfDocument(t.documento)}})},this.openLinkWindow=function(t){return window.open(t,"winFactPdf","height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no")},this.openPdfDocument=function(t){window.open("","winFactPdf","height=700,width=800,menubar=no,location=no,resizable=no,scrollbars=no,status=no").document.write('<iframe width="100%" style="margin: -8px;border: none;" height="100%" src="data:application/pdf;base64, '+encodeURI(t)+'"></iframe>')},this.imprimirLote=function(){for(var t=b.params.de;t<=b.params.a;t++)b.imprimir(b.comandasEnLinea[t],t)},this.cancelarPedido=function(e){b.dialog.open(rn.a,{maxWidth:"400px",data:new rn.b("Cancelar pedido","Si cancela el pedido, ser\xe1 necesario volver a ingresarlo. \xbfDesea continuar?","S\xed","No",{input:[{select:!1,label:"Comentario",valor:null,id:"comentario",requerido:!1}]})}).afterClosed().subscribe(function(n){if(n.resultado){var a,o={},i=t(n.config.input);try{for(i.s();!(a=i.n()).done;){var r=a.value;o[r.id]=r.valor}}catch(c){i.e(c)}finally{i.f()}b.comandaSrvc.cancelarPedido(e.comanda,o).subscribe(function(t){t.exito?b.snackBar.open("Pedido cancelado con \xe9xito...","Pedido",{duration:3e3}):b.snackBar.open("ERROR: ".concat(t.mensaje),"Pedido",{duration:7e3}),b.loadComandasEnLinea()})}})}}return m(e,[{key:"ngOnInit",value:function(){var t=this;this.ls.get(Le.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(Le.a.usrTokenVar).sede_uuid),this.socket.on("shopify:updlist",function(){t.loadComandasEnLinea(),t.notificarUsuario()}),this.socket.on("reconnect",function(){return t.socket.emit("joinRestaurant",t.ls.get(Le.a.usrTokenVar).sede_uuid)}),this.socket.on("connect_timeout",function(){var e="DESCONECTADO DEL SERVIDOR (TIMEOUT)";t.snackBar.open(e,"ERROR",{duration:5e3}),t.avisoSocketIOEvent(e)}),this.socket.on("reconnect_attempt",function(e){return t.snackBar.open("INTENTO DE RECONEXI\xd3N #".concat(e),"ERROR",{duration:1e4})}),this.socket.on("shopify:error",function(e){t.loadComandasEnLinea(),t.snackBar.open("ERROR: ".concat(e),"Firmar",{duration:1e4})})),this.loadComandasEnLinea()}},{key:"ngOnDestroy",value:function(){}}]),e}()).\u0275fac=function(t){return new(t||bc)(z.Nb(U.b),z.Nb(R.a),z.Nb(ma.a),z.Nb(We.a),z.Nb(Zn),z.Nb(ba.a),z.Nb(jr.a),z.Nb(eo.a),z.Nb(no.a))},bc.\u0275cmp=z.Hb({type:bc,selectors:[["app-comanda-en-linea"]],decls:32,vars:5,consts:[[1,"row"],[1,"col","m12","s12"],["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","comanda"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","orden"],["matColumnDef","fechahora"],["matColumnDef","nombre"],["matColumnDef","total"],["matColumnDef","imprimir"],["mat-header-cell","","style","width: 10%;",4,"matHeaderCellDef"],["mat-cell","","class","tamanioAmigable","style","width: 10%;",4,"matCellDef"],["matColumnDef","cancelar"],["matColumnDef","facturar"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",3,"example-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",2,"width","10%"],["mat-cell","",1,"tamanioAmigable",2,"width","10%"],["mat-flat-button","","type","button","color","accent",1,"btnCelSize",3,"click"],[1,"example-element-detail"],[2,"width","75%","background-color","#f5f5f5","table-layout","fixed"],[4,"ngIf"],[1,"rtxt"],[4,"ngFor","ngForOf"],["colspan","2"],[1,"long-notes"],["colspan","2",1,"tabulador-doble"],["mat-header-row",""],["mat-row","",1,"example-element-row",3,"click"],["mat-row","",1,"example-detail-row"]],template:function(t,e){1&t&&(z.Tb(0,"div",0),z.Tb(1,"div",1),z.Tb(2,"table",2),z.Rb(3,3),z.Cc(4,Br,2,0,"th",4),z.Cc(5,Lr,2,1,"td",5),z.Qb(),z.Rb(6,6),z.Cc(7,Hr,2,0,"th",4),z.Cc(8,zr,2,1,"td",5),z.Qb(),z.Rb(9,7),z.Cc(10,qr,2,0,"th",4),z.Cc(11,$r,3,4,"td",5),z.Qb(),z.Rb(12,8),z.Cc(13,Vr,2,0,"th",4),z.Cc(14,Wr,2,1,"td",5),z.Qb(),z.Rb(15,9),z.Cc(16,Gr,2,0,"th",4),z.Cc(17,Qr,3,4,"td",5),z.Qb(),z.Rb(18,10),z.Cc(19,Jr,2,0,"th",11),z.Cc(20,Xr,3,0,"td",12),z.Qb(),z.Rb(21,13),z.Cc(22,Zr,2,0,"th",11),z.Cc(23,Kr,3,0,"td",12),z.Qb(),z.Rb(24,14),z.Cc(25,Yr,2,0,"th",11),z.Cc(26,tc,3,0,"td",12),z.Qb(),z.Rb(27,15),z.Cc(28,sc,15,6,"td",5),z.Qb(),z.Cc(29,lc,1,0,"tr",16),z.Cc(30,uc,1,2,"tr",17),z.Cc(31,dc,1,0,"tr",18),z.Sb(),z.Sb(),z.Sb()),2&t&&(z.Cb(2),z.lc("dataSource",e.dataSource),z.Cb(27),z.lc("matHeaderRowDef",e.columnsToDisplay),z.Cb(1),z.lc("matRowDefColumns",e.columnsToDisplay),z.Cb(1),z.lc("matRowDefColumns",z.nc(4,mc)))},directives:[x.j,x.c,x.e,x.b,x.g,x.i,x.d,x.a,M.a,b.m,b.l,x.f,x.h],pipes:[b.e,b.f],styles:["table[_ngcontent-%COMP%]{width:100%}tr.example-detail-row[_ngcontent-%COMP%]{height:0}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):hover{background:#777}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):active{background:#efefef}.tamanioAmigable[_ngcontent-%COMP%]{padding:5px;width:10%!important;min-height:55px}.btnCelSize[_ngcontent-%COMP%]{min-width:55px;width:100%}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.example-element-diagram[_ngcontent-%COMP%]{min-width:80px;border:2px solid #000;padding:8px;font-weight:lighter;margin:8px 0;height:104px}.example-element-symbol[_ngcontent-%COMP%]{font-weight:700;font-size:40px;line-height:normal}.example-element-description[_ngcontent-%COMP%]{padding:16px}.example-element-description-attribution[_ngcontent-%COMP%]{opacity:.5}.long-notes[_ngcontent-%COMP%]{overflow-wrap:break-word}"],data:{animation:[Object(K.m)("detailExpand",[Object(K.j)("collapsed",Object(K.k)({height:"0px",minHeight:"0"})),Object(K.j)("expanded",Object(K.k)({height:"*"})),Object(K.l)("expanded <=> collapsed",Object(K.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),bc),pc=r("roIu");function hc(t,e){if(1&t&&(z.Tb(0,"mat-option",17),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n.turno_tipo),z.Cb(1),z.Fc(" ",n.descripcion," ")}}function gc(t,e){if(1&t&&(z.Tb(0,"mat-option",17),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n.sede.sede),z.Cb(1),z.Fc(" ",n.sede.nombre," ")}}function vc(t,e){if(1&t&&(z.Tb(0,"mat-option",17),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n.id),z.Cb(1),z.Fc(" ",n.descripcion," ")}}function Cc(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-form-field",5),z.Tb(1,"mat-label"),z.Dc(2,"Agrupar por"),z.Sb(),z.Tb(3,"mat-select",18),z.bc("ngModelChange",function(t){return z.wc(n),z.fc().params._grupo=t}),z.Cc(4,vc,2,2,"mat-option",7),z.Sb(),z.Sb()}if(2&t){var a=z.fc();z.Cb(3),z.lc("ngModel",a.params._grupo),z.Cb(1),z.lc("ngForOf",a.grupos)}}function Sc(t,e){1&t&&z.Ob(0,"hr")}var _c=function(){return{standalone:!0}};function Tc(t,e){if(1&t&&(z.Tb(0,"div"),z.Tb(1,"mat-form-field",5),z.Tb(2,"input",20),z.bc("ngModelChange",function(t){return e.$implicit.monto=t}),z.Sb(),z.Sb(),z.Sb()),2&t){var n=e.$implicit;z.Cb(2),z.mc("placeholder",n.descripcion),z.lc("ngModel",n.monto)("ngModelOptions",z.nc(3,_c))}}function yc(t,e){if(1&t&&(z.Tb(0,"form"),z.Cc(1,Tc,3,4,"div",19),z.Sb()),2&t){var n=z.fc();z.Cb(1),z.lc("ngForOf",n.fpagos)}}function kc(t,e){1&t&&z.Ob(0,"app-cargando")}var Dc,wc=((Dc=function(){function t(e,n,a,o,i){var r=this;d(this,t),this.snackBar=e,this.pdfServicio=n,this.tipoTurnoSrvc=a,this.fpagoSrvc=o,this.sedeSrvc=i,this.params={_validar:!1,sede:[]},this.titulo="Resumen de caja",this.tiposTurno=[],this.cargando=!1,this.fpagos=[],this.sedes=[],this.grupos=Le.a.grupos,this.configBotones={showPdf:!0,showHtml:!1,showExcel:!0},this.loadFormaPago=function(){r.fpagoSrvc.get().subscribe(function(t){t&&(r.fpagos=t)})},this.loadSedes=function(){r.sedeSrvc.getSedes({reporte:!0}).subscribe(function(t){t&&(r.sedes=t)})},this.loadTiposTurno=function(){r.tipoTurnoSrvc.get().subscribe(function(t){t&&(r.tiposTurno=t)})},this.resetParams=function(){r.params={},r.cargando=!1},this.excelClick=function(){r.cargando=!0,r.params._pagos=r.fpagos,r.params._excel=1,r.pdfServicio.getReporteCaja(r.params).subscribe(function(t){if(r.cargando=!1,t){var e=new Blob([t],{type:"application/vnd.ms-excel"});Object(er.saveAs)(e,"".concat(r.titulo,".xls"))}else r.snackBar.open("No se pudo generar el reporte...",r.titulo,{duration:3e3})})}}return m(t,[{key:"ngOnInit",value:function(){this.loadTiposTurno(),this.loadFormaPago(),this.loadSedes()}},{key:"onSubmit",value:function(){var t=this;this.cargando=!0,this.params._pagos=this.fpagos,this.params._excel=0,this.pdfServicio.getReporteCaja(this.params).subscribe(function(e){if(t.cargando=!1,e){var n=new Blob([e],{type:"application/pdf"});Object(er.saveAs)(n,"".concat(t.titulo,".pdf"))}else t.snackBar.open("No se pudo generar el reporte...",t.titulo,{duration:3e3})})}}]),t}()).\u0275fac=function(t){return new(t||Dc)(z.Nb(R.a),z.Nb(eo.a),z.Nb(pi),z.Nb(pc.a),z.Nb(ar.a))},Dc.\u0275cmp=z.Hb({type:Dc,selectors:[["app-caja"]],decls:35,vars:17,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmRptCaja","ngForm"],[1,"fullWidth"],["name","turno_tipo",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","date","placeholder","Del","required","",3,"ngModel","ngModelOptions","ngModelChange"],["matInput","","type","date","placeholder","Al","required","",3,"ngModel","ngModelOptions","ngModelChange"],["name","sede","multiple","",3,"ngModel","ngModelChange"],["class","fullWidth",4,"ngIf"],[1,"col"],["name","mostrar_detalle",1,"fullWidth",3,"ngModel","ngModelChange"],["name","validar",1,"fullWidth",3,"ngModel","ngModelChange"],[4,"ngIf"],[3,"configuracion","excelClick","pdfClick","resetParamsClick"],[3,"value"],["name","grupo",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["matInput","","type","number","step","0.01",3,"placeholder","ngModel","ngModelOptions","ngModelChange"]],template:function(t,e){1&t&&(z.Tb(0,"div",0),z.Tb(1,"div",1),z.Tb(2,"mat-card",2),z.Tb(3,"mat-card-title"),z.Tb(4,"h4"),z.Dc(5,"Reporte de caja"),z.Sb(),z.Sb(),z.Tb(6,"mat-card-content"),z.Tb(7,"form",3,4),z.Tb(9,"mat-form-field",5),z.Tb(10,"mat-label"),z.Dc(11,"Tipo de turno"),z.Sb(),z.Tb(12,"mat-select",6),z.bc("ngModelChange",function(t){return e.params.turno_tipo=t}),z.Cc(13,hc,2,2,"mat-option",7),z.Sb(),z.Sb(),z.Tb(14,"mat-form-field",5),z.Tb(15,"input",8),z.bc("ngModelChange",function(t){return e.params.fdel=t}),z.Sb(),z.Sb(),z.Tb(16,"mat-form-field",5),z.Tb(17,"input",9),z.bc("ngModelChange",function(t){return e.params.fal=t}),z.Sb(),z.Sb(),z.Tb(18,"mat-form-field",5),z.Tb(19,"mat-label"),z.Dc(20,"Sede"),z.Sb(),z.Tb(21,"mat-select",10),z.bc("ngModelChange",function(t){return e.params.sede=t}),z.Cc(22,gc,2,2,"mat-option",7),z.Sb(),z.Sb(),z.Cc(23,Cc,5,2,"mat-form-field",11),z.Tb(24,"div",0),z.Tb(25,"div",12),z.Tb(26,"mat-checkbox",13),z.bc("ngModelChange",function(t){return+(e.params._detalle=t)}),z.Dc(27,"Mostrar Detalle"),z.Sb(),z.Sb(),z.Tb(28,"div",12),z.Tb(29,"mat-checkbox",14),z.bc("ngModelChange",function(t){return+(e.params._validar=t)}),z.Dc(30,"Validar Montos"),z.Sb(),z.Sb(),z.Sb(),z.Cc(31,Sc,1,0,"hr",15),z.Cc(32,yc,2,1,"form",15),z.Tb(33,"app-rpt-botones",16),z.bc("excelClick",function(){return e.excelClick()})("pdfClick",function(){return e.onSubmit()})("resetParamsClick",function(){return e.resetParams()}),z.Sb(),z.Sb(),z.Cc(34,kc,1,0,"app-cargando",15),z.Sb(),z.Sb(),z.Sb(),z.Sb()),2&t&&(z.Cb(12),z.lc("ngModel",e.params.turno_tipo),z.Cb(1),z.lc("ngForOf",e.tiposTurno),z.Cb(2),z.lc("ngModel",e.params.fdel)("ngModelOptions",z.nc(15,_c)),z.Cb(2),z.lc("ngModel",e.params.fal)("ngModelOptions",z.nc(16,_c)),z.Cb(4),z.lc("ngModel",e.params.sede),z.Cb(1),z.lc("ngForOf",e.sedes),z.Cb(1),z.lc("ngIf",e.params.sede&&e.params.sede.length>1),z.Cb(3),z.lc("ngModel",+e.params._detalle),z.Cb(3),z.lc("ngModel",+e.params._validar),z.Cb(2),z.lc("ngIf",e.params._validar),z.Cb(1),z.lc("ngIf",e.params._validar),z.Cb(1),z.lc("configuracion",e.configBotones),z.Cb(1),z.lc("ngIf",e.cargando))},directives:[D.a,D.h,D.c,p.r,p.l,p.m,y.b,y.e,P.a,p.k,p.n,b.l,k.b,p.c,p.p,b.m,O.a,or.a,$.k,p.o,ha.a],styles:[""]}),Dc);function Ec(t,e){1&t&&z.Ob(0,"app-cargando")}var xc,Pc=((xc=function(){function t(e,n){var a=this;d(this,t),this.snackBar=e,this.pdfServicio=n,this.params={},this.titulo="Facturas",this.cargando=!1,this.configBotones={showPdf:!0,showHtml:!1,showExcel:!0,isPdfDisabled:!1,isExcelDisabled:!1},this.resetParams=function(){a.params={fdel:ca().startOf("month").format(Le.a.dbDateFormat),fal:ca().format(Le.a.dbDateFormat)},a.cargando=!1},this.chkDates=function(){a.configBotones.isPdfDisabled=!a.params.fdel||!a.params.fal,a.configBotones.isExcelDisabled=!a.params.fdel||!a.params.fal}}return m(t,[{key:"ngOnInit",value:function(){this.resetParams()}},{key:"onSubmit",value:function(){var t=this;this.cargando=!0,this.params._excel=0,this.pdfServicio.getReporteFactura(this.params).subscribe(function(e){if(t.cargando=!1,e){var n=new Blob([e],{type:"application/pdf"});Object(er.saveAs)(n,"".concat(t.titulo,".pdf"))}else t.snackBar.open("No se pudo generar el reporte...",t.titulo,{duration:3e3})})}},{key:"excelClick",value:function(){var t=this;this.cargando=!0,this.params._excel=1,this.pdfServicio.getReporteFactura(this.params).subscribe(function(e){if(t.cargando=!1,e){var n=new Blob([e],{type:"application/vnd.ms-excel"});Object(er.saveAs)(n,"".concat(t.titulo,".xls"))}else t.snackBar.open("No se pudo generar el reporte...",t.titulo,{duration:3e3})})}}]),t}()).\u0275fac=function(t){return new(t||xc)(z.Nb(R.a),z.Nb(eo.a))},xc.\u0275cmp=z.Hb({type:xc,selectors:[["app-factura"]],decls:22,vars:6,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmRptFactura","ngForm"],[1,"fullWidth"],["matInput","","type","date","placeholder","Del","name","fdel","required","",3,"ngModel","ngModelChange","change"],["matInput","","type","date","placeholder","Al","name","fal","required","",3,"ngModel","ngModelChange","change"],[1,"col"],["name","detalle",1,"fullWidth",3,"ngModel","ngModelChange"],["name","anuladas",1,"fullWidth",3,"ngModel","ngModelChange"],[3,"configuracion","excelClick","pdfClick","resetParamsClick"],[4,"ngIf"]],template:function(t,e){1&t&&(z.Tb(0,"div",0),z.Tb(1,"div",1),z.Tb(2,"mat-card",2),z.Tb(3,"mat-card-title"),z.Tb(4,"h4"),z.Dc(5,"Reporte de facturas"),z.Sb(),z.Sb(),z.Tb(6,"mat-card-content"),z.Tb(7,"form",3,4),z.Tb(9,"mat-form-field",5),z.Tb(10,"input",6),z.bc("ngModelChange",function(t){return e.params.fdel=t})("change",function(){return e.chkDates()}),z.Sb(),z.Sb(),z.Tb(11,"mat-form-field",5),z.Tb(12,"input",7),z.bc("ngModelChange",function(t){return e.params.fal=t})("change",function(){return e.chkDates()}),z.Sb(),z.Sb(),z.Tb(13,"div",0),z.Tb(14,"div",8),z.Tb(15,"mat-checkbox",9),z.bc("ngModelChange",function(t){return+(e.params._detalle=t)}),z.Dc(16,"Mostrar Detalle"),z.Sb(),z.Sb(),z.Tb(17,"div",8),z.Tb(18,"mat-checkbox",10),z.bc("ngModelChange",function(t){return+(e.params._anuladas=t)}),z.Dc(19,"Mostrar \xdanicamente Anuladas"),z.Sb(),z.Sb(),z.Sb(),z.Tb(20,"app-rpt-botones",11),z.bc("excelClick",function(){return e.excelClick()})("pdfClick",function(){return e.onSubmit()})("resetParamsClick",function(){return e.resetParams()}),z.Sb(),z.Sb(),z.Cc(21,Ec,1,0,"app-cargando",12),z.Sb(),z.Sb(),z.Sb(),z.Sb()),2&t&&(z.Cb(10),z.lc("ngModel",e.params.fdel),z.Cb(2),z.lc("ngModel",e.params.fal),z.Cb(3),z.lc("ngModel",+e.params._detalle),z.Cb(3),z.lc("ngModel",+e.params._anuladas),z.Cb(2),z.lc("configuracion",e.configBotones),z.Cb(1),z.lc("ngIf",e.cargando))},directives:[D.a,D.h,D.c,p.r,p.l,p.m,y.b,k.b,p.c,p.p,p.k,p.n,O.a,or.a,b.m,ha.a],styles:[""]}),xc);function Oc(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-list-item",5),z.bc("click",function(){z.wc(n);var t=e.$implicit;return z.fc().getTurno(t)}),z.Tb(1,"mat-icon",6),z.Dc(2,"line_weight"),z.Sb(),z.Tb(3,"h5",7),z.Dc(4),z.Sb(),z.Sb()}if(2&t){var a=e.$implicit;z.Cb(4),z.Ec(a.descripcion)}}var Mc,Rc=function(){return{standalone:!0}},Ic=((Mc=function(){function t(e){var n=this;d(this,t),this.turnoSrvc=e,this.getTurnoEv=new z.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadTurnos=function(){n.turnoSrvc.get().subscribe(function(t){t&&t.length>0&&(n.lstTurnos=t,n.applyFilter())})},this.getTurno=function(t){n.getTurnoEv.emit(t)},this.pageChange=function(t){n.pageSize=t.pageSize,n.pageIndex=t.pageIndex,n.applyFilter()}}return m(t,[{key:"ngOnInit",value:function(){this.loadTurnos()}},{key:"applyFilter",value:function(){if(this.txtFiltro.length>0){var t=Object(Le.b)(this.lstTurnos,this.txtFiltro);this.length=t.length,this.lstTurnosPaged=Object(Le.c)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstTurnos.length,this.lstTurnosPaged=Object(Le.c)(this.lstTurnos,this.pageSize,this.pageIndex+1)}}]),t}()).\u0275fac=function(t){return new(t||Mc)(z.Nb(pi))},Mc.\u0275cmp=z.Hb({type:Mc,selectors:[["app-lista-turno-tipo"]],outputs:{getTurnoEv:"getTurnoEv"},decls:7,vars:7,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,e){1&t&&(z.Tb(0,"mat-card",0),z.Tb(1,"mat-card-content"),z.Tb(2,"mat-form-field",1),z.Tb(3,"input",2),z.bc("keyup",function(){return e.applyFilter()})("ngModelChange",function(t){return e.txtFiltro=t}),z.Sb(),z.Sb(),z.Tb(4,"mat-nav-list"),z.Cc(5,Oc,5,1,"mat-list-item",3),z.Sb(),z.Tb(6,"mat-paginator",4),z.bc("page",function(t){return e.pageChange(t)}),z.Sb(),z.Sb(),z.Sb()),2&t&&(z.Cb(3),z.lc("ngModel",e.txtFiltro)("ngModelOptions",z.nc(6,Rc)),z.Cb(2),z.lc("ngForOf",e.lstTurnosPaged),z.Cb(1),z.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[D.a,D.c,y.b,k.b,p.c,p.k,p.n,_.e,b.l,N.a,_.c,T.a,_.b,$.h],styles:[""]}),Mc);function Fc(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",9),z.bc("click",function(){return z.wc(n),z.fc().resetTurno()}),z.Dc(1," Nuevo "),z.Sb()}}var Ac,Nc,Uc,jc=((Ac=function(){function t(e,n){var a=this;d(this,t),this._snackBar=e,this.turnoSrvc=n,this.turnoSavedEv=new z.o,this.resetTurno=function(){return a.turno={turno_tipo:null,descripcion:null,activo:1}},this.onSubmit=function(){a.turnoSrvc.save(a.turno).subscribe(function(t){t.exito?(a.turnoSavedEv.emit(),a.resetTurno(),a._snackBar.open("Tipo de Turno agregado...","Turno",{duration:3e3})):a._snackBar.open("ERROR: ".concat(t.mensaje),"Turno",{duration:3e3})})}}return m(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Ac)(z.Nb(R.a),z.Nb(pi))},Ac.\u0275cmp=z.Hb({type:Ac,selectors:[["app-form-turno-tipo"]],inputs:{turno:"turno"},outputs:{turnoSavedEv:"turnoSavedEv"},decls:15,vars:5,consts:[[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmTurno","ngForm"],[1,"fullWidth"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"ngModel","ngModelChange"],["name","activo",1,"fullWidth",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click"]],template:function(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-card",0),z.Tb(1,"mat-card-title"),z.Tb(2,"h4"),z.Dc(3),z.Sb(),z.Sb(),z.Tb(4,"mat-card-content"),z.Tb(5,"form",1,2),z.bc("ngSubmit",function(){return z.wc(n),z.tc(6).form.valid&&e.onSubmit()}),z.Tb(7,"mat-form-field",3),z.Tb(8,"input",4),z.bc("ngModelChange",function(t){return e.turno.descripcion=t}),z.Sb(),z.Sb(),z.Tb(9,"mat-checkbox",5),z.bc("ngModelChange",function(t){return+(e.turno.activo=t)}),z.Dc(10,"Activo"),z.Sb(),z.Tb(11,"div",6),z.Tb(12,"button",7),z.Dc(13," Guardar "),z.Sb(),z.Cc(14,Fc,2,0,"button",8),z.Sb(),z.Sb(),z.Sb(),z.Sb()}if(2&t){var a=z.tc(6);z.Cb(3),z.Fc(" Tipo de Turno ",e.turno.turno_tipo?e.turno.descripcion:""," "),z.Cb(5),z.lc("ngModel",e.turno.descripcion),z.Cb(1),z.lc("ngModel",+e.turno.activo),z.Cb(3),z.lc("disabled",!a.form.valid),z.Cb(2),z.lc("ngIf",e.turno.turno_tipo)}},directives:[D.a,D.h,D.c,p.r,p.l,p.m,y.b,k.b,p.c,p.p,p.k,p.n,O.a,M.a,b.m],styles:[""]}),Ac),Bc=["lstTurno"],Lc=((Uc=function(){function t(){var e=this;d(this,t),this.setTurno=function(t){return e.turno=t},this.refreshTurnoList=function(){return e.lstTurnoComponent.loadTurnos()},this.turno={turno_tipo:null,descripcion:null,activo:1}}return m(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Uc)},Uc.\u0275cmp=z.Hb({type:Uc,selectors:[["app-turno-tipo"]],viewQuery:function(t,e){var n;1&t&&z.Ic(Bc,1),2&t&&z.sc(n=z.cc())&&(e.lstTurnoComponent=n.first)},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getTurnoEv"],["lstTurno",""],[1,"col","m7","s12"],[3,"turno","turnoSavedEv"],["frmTurno",""]],template:function(t,e){1&t&&(z.Tb(0,"div",0),z.Tb(1,"div",1),z.Tb(2,"app-lista-turno-tipo",2,3),z.bc("getTurnoEv",function(t){return e.setTurno(t)}),z.Sb(),z.Sb(),z.Tb(4,"div",4),z.Tb(5,"app-form-turno-tipo",5,6),z.bc("turnoSavedEv",function(){return e.refreshTurnoList()}),z.Sb(),z.Sb(),z.Sb()),2&t&&(z.Cb(5),z.lc("turno",e.turno))},directives:[Ic,jc],styles:[""]}),Uc),Hc=((Nc=function(){function t(e){d(this,t),this.http=e,this.moduleUrl="propina",this.srvcErrHndl=new He.a}return m(t,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/buscar?").concat($e.stringify(t))).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(t){return this.http.post("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/guardar").concat(t.propina_distribucion?"/"+t.propina_distribucion:""),t).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||Nc)(z.Xb(f.b))},Nc.\u0275prov=z.Jb({token:Nc,factory:Nc.\u0275fac,providedIn:"root"}),Nc);function zc(t,e){if(1&t){var n=z.Ub();z.Tb(0,"td",7),z.bc("click",function(){z.wc(n);var t=e.$implicit;return z.fc().getPropina(t)}),z.Tb(1,"mat-list"),z.Tb(2,"mat-list-item"),z.Tb(3,"mat-icon",8),z.Dc(4,"line_weight"),z.Sb(),z.Tb(5,"h5",9),z.Dc(6),z.Sb(),z.Tb(7,"span",9),z.Dc(8),z.Sb(),z.Tb(9,"button",10),z.Tb(10,"mat-icon"),z.Dc(11,"arrow_right_alt"),z.Sb(),z.Sb(),z.Sb(),z.Sb(),z.Sb()}if(2&t){var a=e.$implicit;z.Cb(6),z.Fc("",a.porcentaje,"%"),z.Cb(2),z.Ec(a.usuario_tipo.descripcion)}}function qc(t,e){1&t&&z.Ob(0,"tr",11)}var $c,Vc=function(){return[5,10,20]},Wc=(($c=function(){function t(e){var n=this;d(this,t),this.propinaSrvc=e,this.displayedColumns=["propina"],this.getPropinaEv=new z.o,this.loadPropinas=function(){n.propinaSrvc.get().subscribe(function(t){t&&t.length>0&&(n.lstPropinas=t,n.dataSource=new x.k(n.lstPropinas),n.dataSource.paginator=n.paginator)})},this.getPropina=function(t){n.getPropinaEv.emit(t)}}return m(t,[{key:"ngOnInit",value:function(){this.loadPropinas()}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.trim().toLowerCase()}}]),t}()).\u0275fac=function(t){return new(t||$c)(z.Nb(Hc))},$c.\u0275cmp=z.Hb({type:$c,selectors:[["app-lista-propina"]],viewQuery:function(t,e){var n;1&t&&z.Ic(N.a,3),2&t&&z.sc(n=z.cc())&&(e.paginator=n.first)},outputs:{getPropinaEv:"getPropinaEv"},decls:9,vars:4,consts:[[1,"mat-elevation-z4","fullWidth"],["matInput","","placeholder","Buscar...",3,"keyup"],["mat-table","",3,"dataSource"],["matColumnDef","propina"],["mat-cell","",3,"click",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-cell","",3,"click"],["mat-list-icon",""],["mat-line",""],["mat-icon-button","","type","button","color","accent"],["mat-row",""]],template:function(t,e){1&t&&(z.Tb(0,"mat-card",0),z.Tb(1,"mat-card-content"),z.Tb(2,"mat-form-field"),z.Tb(3,"input",1),z.bc("keyup",function(t){return e.applyFilter(t.target.value)}),z.Sb(),z.Sb(),z.Tb(4,"table",2),z.Rb(5,3),z.Cc(6,zc,12,2,"td",4),z.Qb(),z.Cc(7,qc,1,0,"tr",5),z.Sb(),z.Ob(8,"mat-paginator",6),z.Sb(),z.Sb()),2&t&&(z.Cb(4),z.lc("dataSource",e.dataSource),z.Cb(3),z.lc("matRowDefColumns",e.displayedColumns),z.Cb(1),z.lc("pageSizeOptions",z.nc(3,Vc)))},directives:[D.a,D.c,y.b,k.b,x.j,x.c,x.b,x.i,N.a,x.a,_.a,_.c,T.a,_.b,$.h,M.a,x.h],styles:[""]}),$c);function Gc(t,e){if(1&t&&(z.Tb(0,"mat-option",14),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n.usuario_tipo),z.Cb(1),z.Fc(" ",n.descripcion," ")}}function Qc(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",15),z.bc("click",function(){return z.wc(n),z.fc().resetPropina()}),z.Tb(1,"mat-icon"),z.Dc(2,"add"),z.Sb(),z.Sb()}}var Jc,Xc,Zc,Kc=((Jc=function(){function t(e,n,a){var o=this;d(this,t),this.snackBar=e,this.propinaSrvc=n,this.usuarioSrvc=a,this.propinaSavedEv=new z.o,this.usuarios=[],this.loadUsuario=function(){o.usuarioSrvc.get().subscribe(function(t){o.usuarios=t})},this.resetPropina=function(){return o.propina={propina_distribucion:null,usuario_tipo:null,porcentaje:null,anulado:0,sede:null,grupal:0}},this.onSubmit=function(){o.propinaSrvc.save(o.propina).subscribe(function(t){t.exito?(o.propinaSavedEv.emit(),o.resetPropina(),o.snackBar.open("Propina agregada...","Distribucion de propinas",{duration:3e3})):o.snackBar.open("ERROR: ".concat(t.mensaje),"Distribucion de propinas",{duration:3e3})})}}return m(t,[{key:"ngOnInit",value:function(){this.resetPropina(),this.loadUsuario()}}]),t}()).\u0275fac=function(t){return new(t||Jc)(z.Nb(R.a),z.Nb(Hc),z.Nb(hi))},Jc.\u0275cmp=z.Hb({type:Jc,selectors:[["app-form-propina"]],inputs:{propina:"propina"},outputs:{propinaSavedEv:"propinaSavedEv"},decls:24,vars:7,consts:[[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmPropina","ngForm"],[1,"fullWidth"],["name","usuario","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","step","0.01","placeholder","Porcentaje","name","porcentaje","required","",3,"ngModel","ngModelChange"],[1,"row"],[1,"col","m6","s6"],["name","grupal",1,"fullWidth",3,"ngModel","ngModelChange"],["name","anulado",1,"fullWidth",3,"ngModel","ngModelChange"],["align","end"],["mat-icon-button","","type","submit","color","accent",3,"disabled"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],[3,"value"],["mat-icon-button","","type","button","color","accent",3,"click"]],template:function(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-card",0),z.Ob(1,"mat-card-title"),z.Tb(2,"mat-card-content"),z.Tb(3,"form",1,2),z.bc("ngSubmit",function(){return z.wc(n),z.tc(4).form.valid&&e.onSubmit()}),z.Tb(5,"mat-form-field",3),z.Tb(6,"mat-label"),z.Dc(7,"Tipo Usuario"),z.Sb(),z.Tb(8,"mat-select",4),z.bc("ngModelChange",function(t){return e.propina.usuario_tipo=t}),z.Cc(9,Gc,2,2,"mat-option",5),z.Sb(),z.Sb(),z.Tb(10,"mat-form-field",3),z.Tb(11,"input",6),z.bc("ngModelChange",function(t){return e.propina.porcentaje=t}),z.Sb(),z.Sb(),z.Tb(12,"div",7),z.Tb(13,"div",8),z.Tb(14,"mat-checkbox",9),z.bc("ngModelChange",function(t){return+(e.propina.grupal=t)}),z.Dc(15,"Propina Grupal"),z.Sb(),z.Sb(),z.Tb(16,"div",8),z.Tb(17,"mat-checkbox",10),z.bc("ngModelChange",function(t){return+(e.propina.anulado=t)}),z.Dc(18,"Anulado"),z.Sb(),z.Sb(),z.Sb(),z.Tb(19,"div",11),z.Tb(20,"button",12),z.Tb(21,"mat-icon"),z.Dc(22,"save"),z.Sb(),z.Sb(),z.Cc(23,Qc,3,0,"button",13),z.Sb(),z.Sb(),z.Sb(),z.Sb()}if(2&t){var a=z.tc(4);z.Cb(8),z.lc("ngModel",e.propina.usuario_tipo),z.Cb(1),z.lc("ngForOf",e.usuarios),z.Cb(2),z.lc("ngModel",e.propina.porcentaje),z.Cb(3),z.lc("ngModel",+e.propina.grupal),z.Cb(3),z.lc("ngModel",+e.propina.anulado),z.Cb(3),z.lc("disabled",!a.form.valid),z.Cb(3),z.lc("ngIf",e.propina.propina_distribucion)}},directives:[D.a,D.h,D.c,p.r,p.l,p.m,y.b,y.e,P.a,p.p,p.k,p.n,b.l,k.b,p.o,p.c,O.a,M.a,T.a,b.m,$.k],styles:[""]}),Jc),Yc=["lstPropina"],ts=((Zc=function(){function t(){var e=this;d(this,t),this.setPropina=function(t){return e.propina={propina_distribucion:t.propina_distribucion,usuario_tipo:t.usuario_tipo.usuario_tipo,porcentaje:t.porcentaje,anulado:t.anulado,sede:t.sede,grupal:t.grupal}},this.refreshPropinaList=function(){return e.lstPropinaComponent.loadPropinas()},this.propina={propina_distribucion:null,usuario_tipo:null,porcentaje:null,anulado:null,sede:null,grupal:null}}return m(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Zc)},Zc.\u0275cmp=z.Hb({type:Zc,selectors:[["app-propina"]],viewQuery:function(t,e){var n;1&t&&z.Ic(Yc,1),2&t&&z.sc(n=z.cc())&&(e.lstPropinaComponent=n.first)},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getPropinaEv"],["lstPropina",""],[1,"col","m7","s12"],[3,"propina","propinaSavedEv"],["frmPropina",""]],template:function(t,e){1&t&&(z.Tb(0,"div",0),z.Tb(1,"div",1),z.Tb(2,"app-lista-propina",2,3),z.bc("getPropinaEv",function(t){return e.setPropina(t)}),z.Sb(),z.Sb(),z.Tb(4,"div",4),z.Tb(5,"app-form-propina",5,6),z.bc("propinaSavedEv",function(){return e.refreshPropinaList()}),z.Sb(),z.Sb(),z.Sb()),2&t&&(z.Cb(5),z.lc("propina",e.propina))},directives:[Wc,Kc],styles:[""]}),Zc),es=((Xc=function(){function t(e){d(this,t),this.http=e,this.srvcErrHndl=new He.a}return m(t,[{key:"getCampos",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Le.a.urlCatalogos,"/get_campos?").concat($e.stringify(t))).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"getReporte",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={headers:new f.d({Accept:"application/vnd.ms-excel"}),responseType:"blob"};return this.http.post("".concat(Le.a.urlAppRestaurante,"/reporte/autoconsulta"),t,e).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||Xc)(z.Xb(f.b))},Xc.\u0275prov=z.Jb({token:Xc,factory:Xc.\u0275fac,providedIn:"root"}),Xc);function ns(t,e){if(1&t&&(z.Tb(0,"mat-option",14),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n.tabla_campo),z.Cb(1),z.Fc(" ",n.descripcion," ")}}function as(t,e){if(1&t&&(z.Tb(0,"mat-option",14),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n.tabla_campo),z.Cb(1),z.Fc(" ",n.descripcion," ")}}function os(t,e){if(1&t&&(z.Tb(0,"mat-option",14),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n.tabla_campo),z.Cb(1),z.Fc(" ",n.descripcion," ")}}function is(t,e){1&t&&z.Ob(0,"app-cargando")}var rs,cs,ss=((cs=function(){function t(e,n){var a=this;d(this,t),this.snackBar=e,this.autoconsultaSrvc=n,this.params={campos:[],datos:[]},this.titulo="Autoconsulta",this.campos=[],this.fechas=[],this.orden=[],this.cargando=!1,this.configBotones={showPdf:!1,showHtml:!1,showExcel:!0},this.resetParams=function(){a.params={campos:[],datos:[]},a.cargando=!1},this.getReporte=function(){for(var t in a.cargando=!0,a.params.campos)a.params.datos.push(a.params.campos[t]);a.autoconsultaSrvc.getReporte(a.params).subscribe(function(t){if(a.cargando=!1,t){var e=new Blob([t],{type:"application/vnd.ms-excel"});Object(er.saveAs)(e,"".concat(a.titulo,".xls"))}else a.snackBar.open("No se pudo generar el reporte...",a.titulo,{duration:3e3})})},this.getCampos=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;a.cargando=!0,a.autoconsultaSrvc.getCampos(t).subscribe(function(t){switch(a.cargando=!1,e){case 1:a.campos=t;break;case 2:a.fechas=t;break;case 3:a.orden=t}})}}return m(t,[{key:"ngOnInit",value:function(){this.getCampos(),this.getCampos({por_fecha:1},2),this.getCampos({ordenar_por:1},3)}}]),t}()).\u0275fac=function(t){return new(t||cs)(z.Nb(R.a),z.Nb(es))},cs.\u0275cmp=z.Hb({type:cs,selectors:[["app-autoconsulta"]],decls:30,vars:10,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmEntidad","ngForm"],[1,"fullWidth"],["name","campos","multiple","multiple","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","date","matInput","","placeholder","Del","name","fdel","required","",3,"ngModel","ngModelChange"],["type","date","matInput","","placeholder","Al","name","fal","required","",3,"ngModel","ngModelChange"],["name","campos","required","",3,"ngModel","ngModelChange"],["name","campos",3,"ngModel","ngModelChange"],[3,"configuracion","excelClick","resetParamsClick"],[4,"ngIf"],[3,"value"]],template:function(t,e){1&t&&(z.Tb(0,"div",0),z.Tb(1,"div",1),z.Tb(2,"mat-card",2),z.Tb(3,"mat-card-title"),z.Tb(4,"h4"),z.Dc(5,"Autoconsulta"),z.Sb(),z.Sb(),z.Tb(6,"mat-card-content"),z.Tb(7,"form",3,4),z.Tb(9,"mat-form-field",5),z.Tb(10,"mat-label"),z.Dc(11,"Campos"),z.Sb(),z.Tb(12,"mat-select",6),z.bc("ngModelChange",function(t){return e.params.campos=t}),z.Cc(13,ns,2,2,"mat-option",7),z.Sb(),z.Sb(),z.Tb(14,"mat-form-field",5),z.Tb(15,"input",8),z.bc("ngModelChange",function(t){return e.params.fdel=t}),z.Sb(),z.Sb(),z.Tb(16,"mat-form-field",5),z.Tb(17,"input",9),z.bc("ngModelChange",function(t){return e.params.fal=t}),z.Sb(),z.Sb(),z.Tb(18,"mat-form-field",5),z.Tb(19,"mat-label"),z.Dc(20,"Filtrar Por"),z.Sb(),z.Tb(21,"mat-select",10),z.bc("ngModelChange",function(t){return e.params.fecha=t}),z.Cc(22,as,2,2,"mat-option",7),z.Sb(),z.Sb(),z.Tb(23,"mat-form-field",5),z.Tb(24,"mat-label"),z.Dc(25,"Ordenar Por"),z.Sb(),z.Tb(26,"mat-select",11),z.bc("ngModelChange",function(t){return e.params.orden=t}),z.Cc(27,os,2,2,"mat-option",7),z.Sb(),z.Sb(),z.Tb(28,"app-rpt-botones",12),z.bc("excelClick",function(){return e.getReporte()})("resetParamsClick",function(){return e.resetParams()}),z.Sb(),z.Sb(),z.Cc(29,is,1,0,"app-cargando",13),z.Sb(),z.Sb(),z.Sb(),z.Sb()),2&t&&(z.Cb(12),z.lc("ngModel",e.params.campos),z.Cb(1),z.lc("ngForOf",e.campos),z.Cb(2),z.lc("ngModel",e.params.fdel),z.Cb(2),z.lc("ngModel",e.params.fal),z.Cb(4),z.lc("ngModel",e.params.fecha),z.Cb(1),z.lc("ngForOf",e.fechas),z.Cb(4),z.lc("ngModel",e.params.orden),z.Cb(1),z.lc("ngForOf",e.orden),z.Cb(1),z.lc("configuracion",e.configBotones),z.Cb(1),z.lc("ngIf",e.cargando))},directives:[D.a,D.h,D.c,p.r,p.l,p.m,y.b,y.e,P.a,p.p,p.k,p.n,b.l,k.b,p.c,or.a,b.m,$.k,ha.a],styles:[""]}),cs),ls=((rs=function(){function t(e){d(this,t),this.http=e,this.moduleUrl="cajacorte",this.srvcErrHndl=new He.a}return m(t,[{key:"buscar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/buscar?").concat($e.stringify(t))).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"getCajaCorteTipo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Le.a.urlCatalogos,"/get_caja_corte_tipo?").concat($e.stringify(t))).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"getCajaCorteNominacion",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(Le.a.urlCatalogos,"/get_caja_corte_nominacion?").concat($e.stringify(t))).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"guardar",value:function(t){return this.http.post("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/guardar"),t).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"anularCorte",value:function(t){return this.http.post("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/anular_caja"),t).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}},{key:"anularDetalle",value:function(t){return this.http.post("".concat(Le.a.urlAppRestaurante,"/").concat(this.moduleUrl,"/anular_caja_detalle"),t).pipe(Object(ze.a)(Le.a.reintentos),Object(qe.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(t){return new(t||rs)(z.Xb(f.b))},rs.\u0275prov=z.Jb({token:rs,factory:rs.\u0275fac,providedIn:"root"}),rs);function us(t,e){if(1&t){var n=z.Ub();z.Tb(0,"td",7),z.Tb(1,"mat-list"),z.Tb(2,"mat-list-item"),z.Tb(3,"mat-icon",8),z.bc("click",function(){z.wc(n);var t=e.$implicit;return z.fc().anularCaja(t)}),z.Dc(4,"close"),z.Sb(),z.Tb(5,"h5",9),z.Dc(6),z.Sb(),z.Tb(7,"span",9),z.Dc(8),z.Sb(),z.Tb(9,"span",9),z.Dc(10),z.Sb(),z.Tb(11,"button",10),z.bc("click",function(){z.wc(n);var t=e.$implicit;return z.fc().getCajacorte(t)}),z.Tb(12,"mat-icon"),z.Dc(13,"arrow_right_alt"),z.Sb(),z.Sb(),z.Sb(),z.Sb(),z.Sb()}if(2&t){var a=e.$implicit;z.Cb(6),z.Ec(a.descripcion),z.Cb(2),z.Ec(a.creacion),z.Cb(2),z.Fc("Total: ",a.total,"")}}function ds(t,e){1&t&&z.Ob(0,"tr",11)}var bs,ms=function(){return[5,10,20]},fs=((bs=function(){function t(e,n){var a=this;d(this,t),this.ccorteSrvc=e,this._snackBar=n,this.displayedColumns=["ccGeneral"],this.getCajacorteEv=new z.o,this.getCajascortes=function(){a.ccorteSrvc.buscar().subscribe(function(t){a.listacc=t,a.dataSource=new x.k(a.listacc),a.dataSource.paginator=a.paginator})},this.anularCaja=function(t){confirm("\xbfSi anula este corte, se anular\xe1 tambi\xe9n las nominaciones.?")&&a.ccorteSrvc.anularCorte(t).subscribe(function(t){t.exito&&a.getCajascortes(),a._snackBar.open("".concat(t.mensaje),"Corte de caja",{duration:3e3})})},this.getCajacorte=function(t){a.getCajacorteEv.emit(t)}}return m(t,[{key:"ngOnInit",value:function(){this.getCajascortes()}},{key:"filtrar",value:function(t){this.dataSource.filter=t.trim().toLowerCase()}}]),t}()).\u0275fac=function(t){return new(t||bs)(z.Nb(ls),z.Nb(R.a))},bs.\u0275cmp=z.Hb({type:bs,selectors:[["app-cajacorte-lista"]],viewQuery:function(t,e){var n;1&t&&z.Ic(N.a,3),2&t&&z.sc(n=z.cc())&&(e.paginator=n.first)},outputs:{getCajacorteEv:"getCajacorteEv"},decls:9,vars:4,consts:[[1,"mat-elevation-z4","fullWidth"],["matInput","","placeholder","Buscar...",3,"keyup"],["mat-table","",3,"dataSource"],["matColumnDef","ccGeneral"],["mat-cell","",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-cell",""],["mat-list-icon","",1,"anulaicon",3,"click"],["mat-line",""],["mat-icon-button","","type","button","color","accent",3,"click"],["mat-row",""]],template:function(t,e){1&t&&(z.Tb(0,"mat-card",0),z.Tb(1,"mat-card-content"),z.Tb(2,"mat-form-field"),z.Tb(3,"input",1),z.bc("keyup",function(t){return e.filtrar(t.target.value)}),z.Sb(),z.Sb(),z.Tb(4,"table",2),z.Rb(5,3),z.Cc(6,us,14,3,"td",4),z.Qb(),z.Cc(7,ds,1,0,"tr",5),z.Sb(),z.Ob(8,"mat-paginator",6),z.Sb(),z.Sb()),2&t&&(z.Cb(4),z.lc("dataSource",e.dataSource),z.Cb(3),z.lc("matRowDefColumns",e.displayedColumns),z.Cb(1),z.lc("pageSizeOptions",z.nc(3,ms)))},directives:[D.a,D.c,y.b,k.b,x.j,x.c,x.b,x.i,N.a,x.a,_.a,_.c,T.a,_.b,$.h,M.a,x.h],styles:[".anulaicon[_ngcontent-%COMP%]{cursor:pointer}"]}),bs);function ps(t,e){if(1&t&&(z.Tb(0,"mat-option",16),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n.caja_corte_tipo),z.Cb(1),z.Fc(" ",n.descripcion," ")}}function hs(t,e){if(1&t&&(z.Tb(0,"mat-option",16),z.Dc(1),z.Sb()),2&t){var n=e.$implicit;z.lc("value",n.caja_corte_nominacion),z.Cb(1),z.Fc(" ",n.nombre," ")}}function gs(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-grid-list",11),z.Tb(1,"mat-grid-tile"),z.Dc(2),z.Sb(),z.Tb(3,"mat-grid-tile"),z.Dc(4),z.Sb(),z.Tb(5,"mat-grid-tile"),z.Dc(6),z.Sb(),z.Tb(7,"mat-grid-tile"),z.Tb(8,"mat-icon",17),z.bc("click",function(){z.wc(n);var t=e.$implicit;return z.fc().anularCajaDetalle(t)}),z.Dc(9,"close"),z.Sb(),z.Sb(),z.Sb()}if(2&t){var a=e.$implicit;z.Cb(2),z.Ec(a.nombre),z.Cb(2),z.Ec(a.cantidad),z.Cb(2),z.Ec(a.total)}}function vs(t,e){if(1&t){var n=z.Ub();z.Tb(0,"button",18),z.bc("click",function(){return z.wc(n),z.fc().reseteGeneral()}),z.Tb(1,"mat-icon"),z.Dc(2,"add"),z.Sb(),z.Sb()}}var Cs,Ss,_s=((Cs=function(){function t(e,n){var a=this;d(this,t),this._snackBar=e,this.cajacorteSrvc=n,this.cajacorteSavedEv=new z.o,this.ccorteTipo=[],this.ccorteNomi=[],this.detalle={caja_corte_detalle:0,caja_corte:0,cantidad:0,total:0,anulado:0,caja_corte_nominacion:0,nombre:null},this.getCajaCorteTipo=function(){a.cajacorteSrvc.getCajaCorteTipo().subscribe(function(t){a.ccorteTipo=t})},this.getCajaCorteNominacion=function(){a.cajacorteSrvc.getCajaCorteNominacion().subscribe(function(t){a.ccorteNomi=t})},this.setTotal=function(){if(a.detalle.caja_corte_nominacion){var t=a.ccorteNomi.filter(function(t){return t.caja_corte_nominacion==a.detalle.caja_corte_nominacion})[0];a.detalle.total=1==t.calcula?a.detalle.cantidad*t.valor:a.detalle.cantidad}},this.setNamenomi=function(){var t=a.ccorteNomi.filter(function(t){return t.caja_corte_nominacion==a.detalle.caja_corte_nominacion})[0];console.log(t,a.detalle.caja_corte_nominacion),a.detalle.nombre=t.nombre},this.setNameTipo=function(){var t=a.ccorteTipo.filter(function(t){return t.caja_corte_tipo==a.ccorte.caja_corte_tipo})[0];console.log(t,a.ccorte.caja_corte_tipo),a.ccorte.descripcion=t.descripcion},this.reseteGeneral=function(){return a.ccorte={caja_corte:0,creacion:null,usuario:0,turno:0,confirmado:null,anulado:0,caja_corte_tipo:0,descripcion:null,detalle:[]}},this.resetDetalle=function(){return a.detalle={caja_corte_detalle:0,caja_corte:0,cantidad:0,total:0,anulado:0,caja_corte_nominacion:0,nombre:null}},this.agregarDetalle=function(){a.detalle.caja_corte_nominacion&&a.detalle.cantidad&&a.detalle.total?(a.ccorte.detalle.push(a.detalle),a.resetDetalle()):a._snackBar.open("Complete los datos de nominaciones","Corte de caja",{duration:3e3})},this.guardar=function(){if(confirm("\xbfEst\xe1 seguro?")){if(0==a.ccorte.detalle.length)return a._snackBar.open("Por favor agregue las nominaciones","Corte de caja",{duration:3e3}),!1;if(!a.ccorte.caja_corte_tipo)return a._snackBar.open("Seleccione el tipo de corte de caja.","Corte de caja",{duration:3e3}),!1;a.cajacorteSrvc.guardar(a.ccorte).subscribe(function(t){t.exito&&(a.cajacorteSavedEv.emit(),a.reseteGeneral()),a._snackBar.open("".concat(t.mensaje),"Corte de caja",{duration:3e3})})}},this.anularCajaDetalle=function(t){if(confirm("\xbfEst\xe1 seguro.?"))if(t.caja_corte_detalle)a.cajacorteSrvc.anularDetalle(t).subscribe(function(e){if(e.exito){var n=a.ccorte.detalle.indexOf(t);a.ccorte.detalle.splice(n,1)}a._snackBar.open("".concat(e.mensaje),"Corte de caja",{duration:3e3})});else{var e=a.ccorte.detalle.indexOf(t);a.ccorte.detalle.splice(e,1)}}}return m(t,[{key:"ngOnInit",value:function(){this.getCajaCorteTipo(),this.getCajaCorteNominacion()}}]),t}()).\u0275fac=function(t){return new(t||Cs)(z.Nb(R.a),z.Nb(ls))},Cs.\u0275cmp=z.Hb({type:Cs,selectors:[["app-cajacorte-form"]],inputs:{ccorte:"ccorte"},outputs:{cajacorteSavedEv:"cajacorteSavedEv"},decls:49,vars:9,consts:[[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmcc","ngForm"],[1,"fullWidth"],["name","tipo","required","",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"example-container"],["name","nominacion",3,"ngModel","ngModelChange","selectionChange"],["matInput","","type","number","step","0.01","name","cantidad",3,"ngModel","ngModelChange","blur"],["matInput","","type","number","step","0.01","name","total","readonly","",3,"ngModel","ngModelChange"],["mat-icon-button","","type","button","color","accent","title","Agregar el detalle",3,"click"],["cols","4","rowHeight","7:1"],["cols","4","rowHeight","7:1",4,"ngFor","ngForOf"],["align","end"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["mat-icon-button","","type","submit","color","accent","title","Guardar corte de caja",3,"disabled"],[3,"value"],["mat-list-icon","",1,"anulacion",3,"click"],["mat-icon-button","","type","button","color","accent",3,"click"]],template:function(t,e){if(1&t){var n=z.Ub();z.Tb(0,"mat-card",0),z.Tb(1,"mat-card-title"),z.Tb(2,"h5"),z.Dc(3,"Corte de caja"),z.Sb(),z.Sb(),z.Tb(4,"mat-card-content"),z.Tb(5,"form",1,2),z.bc("ngSubmit",function(){return z.wc(n),z.tc(6).form.valid&&e.guardar()}),z.Tb(7,"mat-form-field",3),z.Tb(8,"mat-label"),z.Dc(9,"Tipo de Corte"),z.Sb(),z.Tb(10,"mat-select",4),z.bc("ngModelChange",function(t){return e.ccorte.caja_corte_tipo=t})("selectionChange",function(){return e.setNameTipo()}),z.Cc(11,ps,2,2,"mat-option",5),z.Sb(),z.Sb(),z.Tb(12,"p"),z.Dc(13,"Agregar nominaciones"),z.Sb(),z.Tb(14,"div",6),z.Tb(15,"mat-form-field"),z.Tb(16,"mat-label"),z.Dc(17,"Nominaci\xf3n:"),z.Sb(),z.Tb(18,"mat-select",7),z.bc("ngModelChange",function(t){return e.detalle.caja_corte_nominacion=t})("selectionChange",function(){return e.setNamenomi()}),z.Cc(19,hs,2,2,"mat-option",5),z.Sb(),z.Sb(),z.Tb(20,"mat-form-field"),z.Tb(21,"mat-label"),z.Dc(22,"Cantidad:"),z.Sb(),z.Tb(23,"input",8),z.bc("ngModelChange",function(t){return e.detalle.cantidad=t})("blur",function(){return e.setTotal()}),z.Sb(),z.Sb(),z.Tb(24,"mat-form-field"),z.Tb(25,"mat-label"),z.Dc(26,"Total:"),z.Sb(),z.Tb(27,"input",9),z.bc("ngModelChange",function(t){return e.detalle.total=t}),z.Sb(),z.Sb(),z.Tb(28,"button",10),z.bc("click",function(){return e.agregarDetalle()}),z.Tb(29,"mat-icon"),z.Dc(30,"add"),z.Sb(),z.Sb(),z.Sb(),z.Tb(31,"mat-grid-list",11),z.Tb(32,"mat-grid-tile"),z.Tb(33,"b"),z.Dc(34,"Nominaci\xf3n"),z.Sb(),z.Sb(),z.Tb(35,"mat-grid-tile"),z.Tb(36,"b"),z.Dc(37,"Cantidad"),z.Sb(),z.Sb(),z.Tb(38,"mat-grid-tile"),z.Tb(39,"b"),z.Dc(40,"Total"),z.Sb(),z.Sb(),z.Ob(41,"mat-grid-tile"),z.Sb(),z.Cc(42,gs,10,3,"mat-grid-list",12),z.Ob(43,"hr"),z.Tb(44,"div",13),z.Cc(45,vs,3,0,"button",14),z.Tb(46,"button",15),z.Tb(47,"mat-icon"),z.Dc(48,"save"),z.Sb(),z.Sb(),z.Sb(),z.Sb(),z.Sb(),z.Sb()}if(2&t){var a=z.tc(6);z.Cb(10),z.lc("ngModel",e.ccorte.caja_corte_tipo),z.Cb(1),z.lc("ngForOf",e.ccorteTipo),z.Cb(7),z.lc("ngModel",e.detalle.caja_corte_nominacion),z.Cb(1),z.lc("ngForOf",e.ccorteNomi),z.Cb(4),z.lc("ngModel",e.detalle.cantidad),z.Cb(4),z.lc("ngModel",e.detalle.total),z.Cb(15),z.lc("ngForOf",e.ccorte.detalle),z.Cb(3),z.lc("ngIf",e.ccorte.caja_corte),z.Cb(1),z.lc("disabled",!a.form.valid)}},directives:[D.a,D.h,D.c,p.r,p.l,p.m,y.b,y.e,P.a,p.p,p.k,p.n,b.l,k.b,p.o,p.c,M.a,T.a,A.a,A.c,b.m,$.k,_.b],styles:[".example-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}mat-grid-tile[_ngcontent-%COMP%]{text-align:left}.anulacion[_ngcontent-%COMP%]{cursor:pointer}"]}),Cs),Ts=["lstCortecaja"],ys=((Ss=function(){function t(){var e=this;d(this,t),this.editarCajaCorte=function(t){return e.ccorte=t},this.actualizaLista=function(){return e.lstCajacorteComponent.getCajascortes()},this.ccorte={caja_corte:0,creacion:null,usuario:0,turno:0,confirmado:null,anulado:0,caja_corte_tipo:0,descripcion:null,detalle:[]}}return m(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Ss)},Ss.\u0275cmp=z.Hb({type:Ss,selectors:[["app-cajacorte"]],viewQuery:function(t,e){var n;1&t&&z.Ic(Ts,1),2&t&&z.sc(n=z.cc())&&(e.lstCajacorteComponent=n.first)},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getCajacorteEv"],["lstCortecaja",""],[1,"col","m7","s12"],[3,"ccorte","cajacorteSavedEv"],["frmCortecaja",""]],template:function(t,e){1&t&&(z.Tb(0,"div",0),z.Tb(1,"div",1),z.Tb(2,"app-cajacorte-lista",2,3),z.bc("getCajacorteEv",function(t){return e.editarCajaCorte(t)}),z.Sb(),z.Sb(),z.Tb(4,"div",4),z.Tb(5,"app-cajacorte-form",5,6),z.bc("cajacorteSavedEv",function(){return e.actualizaLista()}),z.Sb(),z.Sb(),z.Sb()),2&t&&(z.Cb(5),z.lc("ccorte",e.ccorte))},directives:[fs,_s],styles:[""]}),Ss),ks=function(){return{standalone:!0}};function Ds(t,e){if(1&t){var n=z.Ub();z.Tb(0,"form"),z.Tb(1,"mat-form-field",6),z.Tb(2,"input",7),z.bc("ngModelChange",function(t){return z.wc(n),z.fc().datos.tiempo=t}),z.Sb(),z.Sb(),z.Sb()}if(2&t){var a=z.fc();z.Cb(2),z.lc("ngModel",a.datos.tiempo)("ngModelOptions",z.nc(2,ks))}}var ws,Es=function t(e,n,a,o,i,r){d(this,t),this.title=e,this.message=n,this.lblBtnConfirm=a,this.lblBtnDeny=o,this.datos=i,this.showTimer=r},xs=((ws=function(){function t(e,n){d(this,t),this.dialogRef=e,this.data=n,this.title=n.title,this.message=n.message,this.lblBtnConfirm=n.lblBtnConfirm,this.lblBtnDeny=n.lblBtnDeny,this.datos={respuesta:!1,tiempo:"00:00"}}return m(t,[{key:"ngOnInit",value:function(){}},{key:"onConfirm",value:function(t){this.datos.respuesta=!0,this.datos.tiempo=t.tiempo,this.dialogRef.close(this.datos)}},{key:"onDismiss",value:function(){this.datos.respuesta=!1,this.dialogRef.close(this.datos)}}]),t}()).\u0275fac=function(t){return new(t||ws)(z.Nb(U.f),z.Nb(U.a))},ws.\u0275cmp=z.Hb({type:ws,selectors:[["app-dialog-cocina"]],decls:11,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[4,"ngIf"],["mat-dialog-actions","","align","center"],["mat-raised-button","",1,"btnConfig",3,"click"],["mat-raised-button","","color","accent",1,"btnConfig",3,"click"],[1,"fullWidth"],["type","number","matInput","","placeholder","Minutos","min","0","max","59","step","1",3,"ngModel","ngModelOptions","ngModelChange"]],template:function(t,e){1&t&&(z.Tb(0,"h1",0),z.Dc(1),z.Sb(),z.Tb(2,"div",1),z.Tb(3,"p"),z.Dc(4),z.Sb(),z.Sb(),z.Cc(5,Ds,3,3,"form",2),z.Tb(6,"div",3),z.Tb(7,"button",4),z.bc("click",function(){return e.onDismiss()}),z.Dc(8),z.Sb(),z.Tb(9,"button",5),z.bc("click",function(){return e.onConfirm(e.datos)}),z.Dc(10),z.Sb(),z.Sb()),2&t&&(z.Cb(1),z.Fc(" ",e.title," "),z.Cb(3),z.Ec(e.message),z.Cb(1),z.lc("ngIf",e.data.showTimer),z.Cb(3),z.Ec(e.lblBtnDeny),z.Cb(2),z.Ec(e.lblBtnConfirm))},directives:[U.g,U.d,b.m,U.c,M.a,p.r,p.l,p.m,y.b,p.o,k.b,p.c,p.k,p.n],styles:[""]}),ws);function Ps(t,e){1&t&&z.Ob(0,"br")}function Os(t,e){if(1&t&&(z.Rb(0),z.Tb(1,"span"),z.Dc(2),z.Sb(),z.Ob(3,"br"),z.Qb()),2&t){var n=e.$implicit;z.Cb(2),z.Ec(n.trim())}}function Ms(t,e){1&t&&z.Ob(0,"br")}function Rs(t,e){if(1&t&&(z.Tb(0,"span"),z.Tb(1,"strong"),z.Dc(2,"Notas:"),z.Sb(),z.Dc(3),z.Sb()),2&t){var n=z.fc().$implicit;z.Cb(3),z.Fc(" ",n.notas," ")}}function Is(t,e){if(1&t&&(z.Tb(0,"tr"),z.Tb(1,"td"),z.Dc(2),z.Cc(3,Ps,1,0,"br",11),z.Cc(4,Os,4,1,"ng-container",8),z.Cc(5,Ms,1,0,"br",11),z.Cc(6,Rs,4,1,"span",11),z.Sb(),z.Sb()),2&t){var n=e.$implicit;z.Cb(2),z.Gc(" ",n.cantidad," ",n.articulo.descripcion," "),z.Cb(1),z.lc("ngIf",n.detalle.length>0),z.Cb(1),z.lc("ngForOf",n.detalle),z.Cb(1),z.lc("ngIf",!!n.notas&&n.notas.length>0&&!n.detalle),z.Cb(1),z.lc("ngIf",!!n.notas&&n.notas.length>0)}}function Fs(t,e){if(1&t&&(z.Tb(0,"table"),z.Cc(1,Is,7,6,"tr",8),z.Sb()),2&t){var n=z.fc().$implicit;z.Cb(1),z.lc("ngForOf",n.productos)}}function As(t,e){if(1&t&&(z.Rb(0),z.Cc(1,Fs,2,1,"table",11),z.Qb()),2&t){var n=e.$implicit;z.Cb(1),z.lc("ngIf",n.productos.length>0)}}function Ns(t,e){if(1&t){var n=z.Ub();z.Tb(0,"div",6),z.Tb(1,"mat-card",7),z.Tb(2,"mat-card-header"),z.Tb(3,"mat-card-title"),z.Dc(4),z.Sb(),z.Tb(5,"mat-card-subtitle"),z.Dc(6),z.Ob(7,"br"),z.Dc(8),z.Sb(),z.Sb(),z.Tb(9,"mat-card-content"),z.Cc(10,As,2,1,"ng-container",8),z.Sb(),z.Tb(11,"mat-card-actions",9),z.Tb(12,"button",10),z.bc("click",function(){z.wc(n);var t=e.$implicit;return z.fc().setCocinado(t,1)}),z.Dc(13,"Vista"),z.Sb(),z.Sb(),z.Sb(),z.Sb()}if(2&t){var a=e.$implicit;z.Cb(4),z.Gc("Comanda #",a.comanda," - ",a.numero,""),z.Cb(2),z.Gc(" Area ",a.mesa.area.nombre," - Mesa #",a.mesa.etiqueta||a.mesa.numero,""),z.Cb(2),z.Gc(" Atiende: ",a.mesero.nombres," ",a.mesero.apellidos," "),z.Cb(2),z.lc("ngForOf",a.cuentas)}}function Us(t,e){1&t&&z.Ob(0,"br")}function js(t,e){if(1&t&&(z.Rb(0),z.Tb(1,"span"),z.Dc(2),z.Sb(),z.Ob(3,"br"),z.Qb()),2&t){var n=e.$implicit;z.Cb(2),z.Ec(n.trim())}}function Bs(t,e){1&t&&z.Ob(0,"br")}function Ls(t,e){if(1&t&&(z.Tb(0,"span"),z.Tb(1,"strong"),z.Dc(2,"Notas:"),z.Sb(),z.Dc(3),z.Sb()),2&t){var n=z.fc().$implicit;z.Cb(3),z.Fc(" ",n.notas," ")}}function Hs(t,e){if(1&t&&(z.Tb(0,"tr"),z.Tb(1,"td"),z.Dc(2),z.Cc(3,Us,1,0,"br",11),z.Cc(4,js,4,1,"ng-container",8),z.Cc(5,Bs,1,0,"br",11),z.Cc(6,Ls,4,1,"span",11),z.Sb(),z.Sb()),2&t){var n=e.$implicit;z.Cb(2),z.Gc(" ",n.cantidad," ",n.articulo.descripcion," "),z.Cb(1),z.lc("ngIf",n.detalle.length>0),z.Cb(1),z.lc("ngForOf",n.detalle),z.Cb(1),z.lc("ngIf",!!n.notas&&n.notas.length>0&&!n.detalle),z.Cb(1),z.lc("ngIf",!!n.notas&&n.notas.length>0)}}function zs(t,e){if(1&t&&(z.Tb(0,"table"),z.Cc(1,Hs,7,6,"tr",8),z.Sb()),2&t){var n=z.fc().$implicit;z.Cb(1),z.lc("ngForOf",n.productos)}}function qs(t,e){if(1&t&&(z.Rb(0),z.Cc(1,zs,2,1,"table",11),z.Qb()),2&t){var n=e.$implicit;z.Cb(1),z.lc("ngIf",n.productos.length>0)}}var $s=function(t){return{"text-danger":t}};function Vs(t,e){if(1&t){var n=z.Ub();z.Tb(0,"div",6),z.Tb(1,"mat-card",7),z.Tb(2,"mat-card-header"),z.Tb(3,"mat-card-title"),z.Dc(4),z.Sb(),z.Tb(5,"mat-card-subtitle"),z.Dc(6),z.Ob(7,"br"),z.Dc(8),z.Sb(),z.Sb(),z.Tb(9,"mat-card-content"),z.Tb(10,"div",12),z.Tb(11,"h6",13),z.Dc(12),z.gc(13,"date"),z.Sb(),z.Sb(),z.Cc(14,qs,2,1,"ng-container",8),z.Sb(),z.Tb(15,"mat-card-actions",9),z.Tb(16,"button",10),z.bc("click",function(){z.wc(n);var t=e.$implicit;return z.fc().setCocinado(t)}),z.Dc(17,"Cocinado"),z.Sb(),z.Sb(),z.Sb(),z.Sb()}if(2&t){var a=e.$implicit,o=z.fc();z.Cb(4),z.Gc("Comanda #",a.comanda," - ",a.numero,""),z.Cb(2),z.Gc(" Area ",a.mesa.area.nombre," - Mesa #",a.mesa.etiqueta||a.mesa.numero,""),z.Cb(2),z.Gc(" Atiende: ",a.mesero.nombres," ",a.mesero.apellidos," "),z.Cb(3),z.lc("ngClass",z.oc(12,$s,o.comparaFecha(a))),z.Cb(1),z.Fc(" ",z.ic(13,9,a.tiempo_transcurrido,"HH:mm:ss")," "),z.Cb(2),z.lc("ngForOf",a.cuentas)}}var Ws,Gs,Qs,Js=[{path:"mantareas",component:xn,canActivate:[Be.a]},{path:"tranareas",component:ci,canActivate:[Be.a]},{path:"turno",component:tr,canActivate:[Be.a]},{path:"rptvtascat",component:Pr,canActivate:[Be.a]},{path:"rptturnos",component:Ir,canActivate:[Be.a]},{path:"rptpropinas",component:Ur,canActivate:[Be.a]},{path:"rptcaja",component:wc,canActivate:[Be.a]},{path:"rptfactura",component:Pc,canActivate:[Be.a]},{path:"cmdonline",component:fc,canActivate:[Be.a]},{path:"tipoturno",component:Lc,canActivate:[Be.a]},{path:"propina",component:ts,canActivate:[Be.a]},{path:"autoconsulta",component:ss,canActivate:[Be.a]},{path:"cajacorte",component:ys,canActivate:[Be.a]},{path:"trancocina",component:(Ws=function(){function t(e,n,a,o,i,r){var c=this;d(this,t),this.ls=e,this.comandaSrvc=n,this.socket=a,this.dns=o,this.snackBar=i,this.dialog=r,this.lstComandasCocina=[],this.lstComandasCocinaEnProceso=[],this.notificarUsuario=function(){var t={icon:"assets/img/minilogo.png",body:"Se recibi\xf3 una nueva orden a las ".concat(ca().format(Le.a.dateTimeFormat),"."),dir:"auto"};c.dns.createNotification("Rest-Touch Pro",1e4,t)},this.loadComandasCocina=function(){return c.comandaSrvc.getComandasCocina().subscribe(function(t){c.lstComandasCocina=t.pendientes,c.lstComandasCocinaEnProceso=t.enproceso,c.setTiempo()})},this.setTiempo=function(){if(c.lstComandasCocinaEnProceso)for(var t=0;t<c.lstComandasCocinaEnProceso.length;t++){var e=c.lstComandasCocinaEnProceso[t],n=6e4,a=36e5,o=864e5,i=new Date(e.fecha_proceso);c.lstComandasCocinaEnProceso[t].inicio_proceso=i,e.inicio=i;var r=i.getTime(),s=(i=new Date).getTime()-r;s-=Math.floor(s/o)*o;var l=Math.floor(s/a);s-=l*a;var u=Math.floor(s/n);s-=u*n;var d=Math.floor(s/1e3),b=new Date;if(b.setHours(l),b.setMinutes(u),b.setSeconds(d),c.lstComandasCocinaEnProceso[t].tiempo_transcurrido=b,e.tiempo_preparacion){var m=e.tiempo_preparacion.split(":");e.inicio.setHours(e.inicio.getHours()+ +m[0]),e.inicio.setMinutes(e.inicio.getMinutes()+ +m[1]),c.lstComandasCocinaEnProceso[t].fin_proceso=e.inicio}else c.lstComandasCocinaEnProceso[t].fin_proceso=i}},this.comparaFecha=function(t){return new Date>t.fin_proceso},this.setCocinado=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;c.dialog.open(xs,{maxWidth:"400px",data:new Es("Cocina","\xbfSeguro de marcar como '".concat(1==+e?"vista":"cocinada","' la comanda #").concat(t.comanda,"?"),"S\xed","No",{respuesta:!1,tiempo:""},1==+e)}).afterClosed().subscribe(function(n){n&&n.respuesta&&n.tiempo&&c.comandaSrvc.setComandaCocinada(+t.comanda,{numero:+t.numero,estatus:e,tiempo:n.tiempo}).subscribe(function(t){t.exito?c.snackBar.open(t.mensaje,"Cocina",{duration:3e3}):c.snackBar.open("ERROR: ".concat(t.mensaje),"Cocina",{duration:7e3}),c.loadComandasCocina()})})}}return m(t,[{key:"ngOnInit",value:function(){var t=this;this.ls.get(Le.a.usrTokenVar).sede_uuid&&(this.socket.emit("joinRestaurant",this.ls.get(Le.a.usrTokenVar).sede_uuid),this.socket.on("refrescar:listaCocina",function(){t.loadComandasCocina(),t.notificarUsuario()}),setInterval(function(){t.setTiempo()},1e3)),this.loadComandasCocina()}}]),t}(),Ws.\u0275fac=function(t){return new(t||Ws)(z.Nb(We.a),z.Nb(Zn),z.Nb(ma.a),z.Nb(jr.a),z.Nb(R.a),z.Nb(U.b))},Ws.\u0275cmp=z.Hb({type:Ws,selectors:[["app-tran-cocina"]],decls:13,vars:2,consts:[["fxLayout","row","fxLayout.xs","column","fxFlexFill",""],["fxFlex","50%","fxFlex.xs","100%",1,"bordeRght"],["fxLayout","row wrap","fxLayoutGap","10px grid","fxFlexFill","","fxLayoutAlign","start start",1,"divContenedor"],["fxFlex","100%","fxLayoutAlign","center start"],["fxFlex","33%","fxFlex.xs","100%","fxFlex.sm","100%","fxFlex.md","50%",4,"ngFor","ngForOf"],["fxFlex","50%","fxFlex.xs","100%",1,"bordeLft"],["fxFlex","33%","fxFlex.xs","100%","fxFlex.sm","100%","fxFlex.md","50%"],[1,"mat-elevation-z4"],[4,"ngFor","ngForOf"],["align","end"],["mat-raised-button","","color","accent","type","button",3,"click"],[4,"ngIf"],["align","center"],[3,"ngClass"]],template:function(t,e){1&t&&(z.Tb(0,"div",0),z.Tb(1,"div",1),z.Tb(2,"div",2),z.Tb(3,"div",3),z.Tb(4,"h4"),z.Dc(5,"Pendientes"),z.Sb(),z.Sb(),z.Cc(6,Ns,14,7,"div",4),z.Sb(),z.Sb(),z.Tb(7,"div",5),z.Tb(8,"div",2),z.Tb(9,"div",3),z.Tb(10,"h4"),z.Dc(11,"En Proceso"),z.Sb(),z.Sb(),z.Cc(12,Vs,18,14,"div",4),z.Sb(),z.Sb(),z.Sb()),2&t&&(z.Cb(6),z.lc("ngForOf",e.lstComandasCocina),z.Cb(6),z.lc("ngForOf",e.lstComandasCocinaEnProceso))},directives:[Ra.c,Ra.e,Ra.a,Ra.d,Ra.b,b.l,D.a,D.d,D.h,D.g,D.c,D.b,M.a,b.m,b.k,cn.a],pipes:[b.e],styles:[".divContenedor[_ngcontent-%COMP%]{margin-left:5px!important}.bordeRght[_ngcontent-%COMP%]{border-right:1.5px solid #000}.bordeLft[_ngcontent-%COMP%]{border-left:1.5px solid #000}.text-danger[_ngcontent-%COMP%]{color:#dc143c}.item[_ngcontent-%COMP%]{display:block;height:auto;white-space:nowrap;word-wrap:break-word}"]}),Ws),canActivate:[Be.a]},{path:"**",redirectTo:"/admin/dashboard",pathMatch:"full"}],Xs=((Qs=function t(){d(this,t)}).\u0275mod=z.Lb({type:Qs}),Qs.\u0275inj=z.Kb({factory:function(t){return new(t||Qs)},imports:[[Se.d.forChild(Js)],Se.d]}),Qs),Zs=((Gs=function t(){d(this,t)}).\u0275mod=z.Lb({type:Gs}),Gs.\u0275inj=z.Kb({factory:function(t){return new(t||Gs)},providers:[$.j],imports:[[b.c,Xs,f.c,p.e,h.a,g.WmsModule,v.PosModule,ye,S.a,_.d,T.b,y.d,k.c,D.f,w.b,E.c,x.l,P.b,O.b,M.b,R.b,I.b,F.d,A.b,N.b,U.e,j.d,nt,$.j,je.c,fe,Ce,Ue]]}),Gs)}}])}();