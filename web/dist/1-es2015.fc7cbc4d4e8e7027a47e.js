(window.webpackJsonp=window.webpackJsonp||[]).push([[1,9],{"3e6T":function(t,e,i){"use strict";i.d(e,"a",function(){return d});var o=i("sKxO"),n=i("R5jZ"),c=i("un/a"),a=i("JIr8"),r=i("Qyje"),s=i("fXoL"),l=i("tk/3");let d=(()=>{class t{constructor(t){this.http=t,this.srvcErrHndl=new n.a}get(t={}){return this.http.get(`${o.a.urlCatalogos}/get_tipo_movimiento?${r.stringify(t)}`).pipe(Object(c.a)(o.a.reintentos),Object(a.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(s.Xb(l.b))},t.\u0275prov=s.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},A5z7:function(t,e,i){"use strict";i.d(e,"a",function(){return I}),i.d(e,"b",function(){return E}),i.d(e,"c",function(){return B});var o=i("FtGj"),n=i("fXoL"),c=i("FKr1"),a=i("8LU1"),r=i("ofXK"),s=i("R1ws"),l=i("XNiG"),d=i("VRyK"),b=i("IzEk"),u=i("1G5W"),g=i("JX91"),h=i("u47x"),p=i("0EQZ"),m=i("kmnG"),f=i("nLfN"),S=i("cH1L"),v=i("3Pt+");const C=["*"],T=new n.s("MatChipRemove"),_=new n.s("MatChipAvatar"),x=new n.s("MatChipTrailingIcon");class D{constructor(t){this._elementRef=t}}const M=Object(c.B)(Object(c.w)(Object(c.x)(D),"primary"),-1);let I=(()=>{class t extends M{constructor(t,e,i,o,a,r,s,d){super(t),this._elementRef=t,this._ngZone=e,this._changeDetectorRef=a,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListDisabled=!1,this._selected=!1,this._selectable=!0,this._disabled=!1,this._removable=!0,this._onFocus=new l.a,this._onBlur=new l.a,this.selectionChange=new n.o,this.destroyed=new n.o,this.removed=new n.o,this._addHostClassName(),this._chipRippleTarget=r.createElement("div"),this._chipRippleTarget.classList.add("mat-chip-ripple"),this._elementRef.nativeElement.appendChild(this._chipRippleTarget),this._chipRipple=new c.t(this,e,this._chipRippleTarget,i),this._chipRipple.setupTriggerEvents(t),this.rippleConfig=o||{},this._animationsDisabled="NoopAnimations"===s,this.tabIndex=null!=d&&parseInt(d)||-1}get rippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(t){const e=Object(a.c)(t);e!==this._selected&&(this._selected=e,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(t){this._value=t}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(t){this._selectable=Object(a.c)(t)}get disabled(){return this._chipListDisabled||this._disabled}set disabled(t){this._disabled=Object(a.c)(t)}get removable(){return this._removable}set removable(t){this._removable=Object(a.c)(t)}get ariaSelected(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const t=this._elementRef.nativeElement;t.hasAttribute("mat-basic-chip")||"mat-basic-chip"===t.tagName.toLowerCase()?t.classList.add("mat-basic-chip"):t.classList.add("mat-standard-chip")}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}deselect(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}toggleSelected(t=!1){return this._selected=!this.selected,this._dispatchSelectionChange(t),this._changeDetectorRef.markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&&this.removed.emit({chip:this})}_handleClick(t){this.disabled?t.preventDefault():t.stopPropagation()}_handleKeydown(t){if(!this.disabled)switch(t.keyCode){case o.c:case o.b:this.remove(),t.preventDefault();break;case o.n:this.selectable&&this.toggleSelected(!0),t.preventDefault()}}_blur(){this._ngZone.onStable.pipe(Object(b.a)(1)).subscribe(()=>{this._ngZone.run(()=>{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(t=!1){this.selectionChange.emit({source:this,isUserInput:t,selected:this._selected})}}return t.\u0275fac=function(e){return new(e||t)(n.Nb(n.l),n.Nb(n.B),n.Nb(f.a),n.Nb(c.h,8),n.Nb(n.h),n.Nb(r.d),n.Nb(s.a,8),n.Yb("tabindex"))},t.\u0275dir=n.Ib({type:t,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(t,e,i){if(1&t&&(n.Gb(i,_,1),n.Gb(i,x,1),n.Gb(i,T,1)),2&t){let t;n.sc(t=n.cc())&&(e.avatar=t.first),n.sc(t=n.cc())&&(e.trailingIcon=t.first),n.sc(t=n.cc())&&(e.removeIcon=t.first)}},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(t,e){1&t&&n.bc("click",function(t){return e._handleClick(t)})("keydown",function(t){return e._handleKeydown(t)})("focus",function(){return e.focus()})("blur",function(){return e._blur()}),2&t&&(n.Db("tabindex",e.disabled?null:e.tabIndex)("disabled",e.disabled||null)("aria-disabled",e.disabled.toString())("aria-selected",e.ariaSelected),n.Fb("mat-chip-selected",e.selected)("mat-chip-with-avatar",e.avatar)("mat-chip-with-trailing-icon",e.trailingIcon||e.removeIcon)("mat-chip-disabled",e.disabled)("_mat-animation-noopable",e._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[n.zb]}),t})();const F=new n.s("mat-chips-default-options");class y{constructor(t,e,i,o){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=i,this.ngControl=o}}const k=Object(c.z)(y);let O=0;class w{constructor(t,e){this.source=t,this.value=e}}let E=(()=>{class t extends k{constructor(t,e,i,o,c,a,r){super(a,o,c,r),this._elementRef=t,this._changeDetectorRef=e,this._dir=i,this.ngControl=r,this.controlType="mat-chip-list",this._lastDestroyedChipIndex=null,this._destroyed=new l.a,this._uid="mat-chip-list-"+O++,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=>{},this._onChange=()=>{},this._multiple=!1,this._compareWith=(t,e)=>t===e,this._required=!1,this._disabled=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.change=new n.o,this.valueChange=new n.o,this.ngControl&&(this.ngControl.valueAccessor=this)}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get role(){return this.empty?null:"listbox"}get multiple(){return this._multiple}set multiple(t){this._multiple=Object(a.c)(t),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this.writeValue(t),this._value=t}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){return this._required}set required(t){this._required=Object(a.c)(t),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get focused(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Object(a.c)(t),this._syncChipsState()}get selectable(){return this._selectable}set selectable(t){this._selectable=Object(a.c)(t),this.chips&&this.chips.forEach(t=>t.chipListSelectable=this._selectable)}set tabIndex(t){this._userTabIndex=t,this._tabIndex=t}get chipSelectionChanges(){return Object(d.a)(...this.chips.map(t=>t.selectionChange))}get chipFocusChanges(){return Object(d.a)(...this.chips.map(t=>t._onFocus))}get chipBlurChanges(){return Object(d.a)(...this.chips.map(t=>t._onBlur))}get chipRemoveChanges(){return Object(d.a)(...this.chips.map(t=>t.destroyed))}ngAfterContentInit(){this._keyManager=new h.g(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(Object(u.a)(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.tabOut.pipe(Object(u.a)(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.chips.changes.pipe(Object(g.a)(null),Object(u.a)(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new p.c(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(t){this._chipInput=t,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",t.id)}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}writeValue(t){this.chips&&this._setSelectionByValue(t,!1)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this.stateChanges.next()}onContainerClick(t){this._originatesFromChip(t)||this.focus()}focus(t){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(t),this.stateChanges.next()))}_focusInput(t){this._chipInput&&this._chipInput.focus(t)}_keydown(t){const e=t.target;t.keyCode===o.b&&this._isInputEmpty(e)?(this._keyManager.setLastItemActive(),t.preventDefault()):e&&e.classList.contains("mat-chip")&&(this._keyManager.onKeydown(t),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const t=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(t)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(t){return t>=0&&t<this.chips.length}_isInputEmpty(t){return!(!t||"input"!==t.nodeName.toLowerCase()||t.value)}_setSelectionByValue(t,e=!0){if(this._clearSelection(),this.chips.forEach(t=>t.deselect()),Array.isArray(t))t.forEach(t=>this._selectValue(t,e)),this._sortValues();else{const i=this._selectValue(t,e);i&&e&&this._keyManager.setActiveItem(i)}}_selectValue(t,e=!0){const i=this.chips.find(e=>null!=e.value&&this._compareWith(e.value,t));return i&&(e?i.selectViaInteraction():i.select(),this._selectionModel.select(i)),i}_initializeSelection(){Promise.resolve().then(()=>{(this.ngControl||this._value)&&(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(t){this._selectionModel.clear(),this.chips.forEach(e=>{e!==t&&e.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&&(this._selectionModel.clear(),this.chips.forEach(t=>{t.selected&&this._selectionModel.select(t)}),this.stateChanges.next())}_propagateChanges(t){let e=null;e=Array.isArray(this.selected)?this.selected.map(t=>t.value):this.selected?this.selected.value:t,this._value=e,this.change.emit(new w(this,e)),this.valueChange.emit(e),this._onChange(e),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=>{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(()=>{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(t=>{t.source.selected?this._selectionModel.select(t.source):this._selectionModel.deselect(t.source),this.multiple||this.chips.forEach(t=>{!this._selectionModel.isSelected(t)&&t.selected&&t.deselect()}),t.isUserInput&&this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(t=>{let e=this.chips.toArray().indexOf(t.chip);this._isValidIndex(e)&&this._keyManager.updateActiveItem(e),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=>{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(t=>{const e=t.chip,i=this.chips.toArray().indexOf(t.chip);this._isValidIndex(i)&&e._hasFocus&&(this._lastDestroyedChipIndex=i)})}_originatesFromChip(t){let e=t.target;for(;e&&e!==this._elementRef.nativeElement;){if(e.classList.contains("mat-chip"))return!0;e=e.parentElement}return!1}_hasFocusedChip(){return this.chips&&this.chips.some(t=>t._hasFocus)}_syncChipsState(){this.chips&&this.chips.forEach(t=>{t._chipListDisabled=this._disabled,t._chipListMultiple=this.multiple})}}return t.\u0275fac=function(e){return new(e||t)(n.Nb(n.l),n.Nb(n.h),n.Nb(S.b,8),n.Nb(v.m,8),n.Nb(v.d,8),n.Nb(c.d),n.Nb(v.j,10))},t.\u0275cmp=n.Hb({type:t,selectors:[["mat-chip-list"]],contentQueries:function(t,e,i){if(1&t&&n.Gb(i,I,1),2&t){let t;n.sc(t=n.cc())&&(e.chips=t)}},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(t,e){1&t&&n.bc("focus",function(){return e.focus()})("blur",function(){return e._blur()})("keydown",function(t){return e._keydown(t)}),2&t&&(n.Wb("id",e._uid),n.Db("tabindex",e.disabled?null:e._tabIndex)("aria-describedby",e._ariaDescribedby||null)("aria-required",e.role?e.required:null)("aria-disabled",e.disabled.toString())("aria-invalid",e.errorState)("aria-multiselectable",e.multiple)("role",e.role)("aria-orientation",e.ariaOrientation),n.Fb("mat-chip-list-disabled",e.disabled)("mat-chip-list-invalid",e.errorState)("mat-chip-list-required",e.required))},inputs:{ariaOrientation:["aria-orientation","ariaOrientation"],multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",selectable:"selectable",tabIndex:"tabIndex",errorStateMatcher:"errorStateMatcher"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[n.Bb([{provide:m.c,useExisting:t}]),n.zb],ngContentSelectors:C,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(t,e){1&t&&(n.kc(),n.Tb(0,"div",0),n.jc(1),n.Sb())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;transform:translateZ(0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove.mat-icon{width:18px;height:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),t})();const A={separatorKeyCodes:[o.f]};let B=(()=>{class t{}return t.\u0275mod=n.Lb({type:t}),t.\u0275inj=n.Kb({factory:function(e){return new(e||t)},providers:[c.d,{provide:F,useValue:A}],imports:[[c.i]]}),t})()},FHMA:function(t,e,i){"use strict";i.d(e,"a",function(){return d});var o=i("tk/3"),n=i("sKxO"),c=i("R5jZ"),a=i("un/a"),r=i("JIr8"),s=i("fXoL"),l=i("FY0D");let d=(()=>{class t{constructor(t,e){this.http=t,this.ls=e,this.usrToken=null,this.httpOptions={responseType:"blob"},this.srvcErrHndl=new c.a,this.usrToken=this.ls.get(n.a.usrTokenVar)?this.ls.get(n.a.usrTokenVar).token:null,this.httpOptions.headers=new o.d({Authorization:this.usrToken,Accept:"application/pdf"})}getReporteCaja(t){return this.http.post(`${n.a.urlAppRestaurante}/reporte/caja`,t,this.httpOptions).pipe(Object(a.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}getReporteExistencia(t){return this.httpOptions.params=t,this.http.get(`${n.a.urlWms}/reporte/existencia`,this.httpOptions).pipe(Object(a.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}getReporteValorizado(t){return this.httpOptions.params=t,this.http.get(`${n.a.urlWms}/reporte/valorizado`,this.httpOptions).pipe(Object(a.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}imprimirInventarioFisico(t,e){return this.httpOptions.params=e,this.http.get(`${n.a.urlWms}/fisico/imprimir/${t}`,this.httpOptions).pipe(Object(a.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}imprimirReceta(t){return this.http.get(`${n.a.urlMantenimientos}/articulo/imprimir_receta/${t}`,this.httpOptions).pipe(Object(a.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}getReporteKardex(t){return this.httpOptions.params=t,this.http.get(`${n.a.urlWms}/reporte/kardex`,this.httpOptions).pipe(Object(a.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}getReporteFactura(t){return this.httpOptions.params=t,this.http.get(`${n.a.urlAppRestaurante}/reporte/factura`,this.httpOptions).pipe(Object(a.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}getReportePropina(t){return this.httpOptions.params=t,this.http.get(`${n.a.urlAppRestaurante}/reporte/distribucion_propina`,this.httpOptions).pipe(Object(a.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}getComanda(t){return this.http.get(`${n.a.urlAppRestaurante}/comanda/imprimir/${t}/1`,this.httpOptions).pipe(Object(a.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(s.Xb(o.b),s.Xb(l.a))},t.\u0275prov=s.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},IJgu:function(t,e,i){"use strict";i.d(e,"b",function(){return S}),i.d(e,"a",function(){return v});var o=i("0IaG"),n=i("fXoL"),c=i("ofXK"),a=i("bTqV"),r=i("kmnG"),s=i("d3UM"),l=i("3Pt+"),d=i("FKr1"),b=i("qFsG");function u(t,e){if(1&t&&(n.Tb(0,"mat-option",11),n.Fc(1),n.Sb()),2&t){const t=e.$implicit,i=n.fc(2).$implicit;n.lc("value",t[i.id]),n.Cb(1),n.Hc(" ",t[i.descripcion]," ")}}const g=function(){return{standalone:!0}};function h(t,e){if(1&t){const t=n.Ub();n.Tb(0,"mat-form-field",8),n.Tb(1,"mat-label"),n.Fc(2),n.Sb(),n.Tb(3,"mat-select",9),n.bc("ngModelChange",function(e){return n.xc(t),n.fc().$implicit.valor=e}),n.Dc(4,u,2,2,"mat-option",10),n.Sb(),n.Sb()}if(2&t){const t=n.fc().$implicit;n.Cb(2),n.Gc(t.label),n.Cb(1),n.lc("ngModel",t.valor)("ngModelOptions",n.nc(5,g))("required",t.requerido),n.Cb(1),n.lc("ngForOf",t.datos)}}function p(t,e){if(1&t){const t=n.Ub();n.Tb(0,"mat-form-field",8),n.Tb(1,"input",12),n.bc("ngModelChange",function(e){return n.xc(t),n.fc().$implicit.valor=e}),n.Sb(),n.Sb()}if(2&t){const t=n.fc().$implicit;n.Cb(1),n.lc("placeholder",t.label)("name",t.label)("ngModel",t.valor)("required",t.requerido)}}function m(t,e){if(1&t&&(n.Tb(0,"p"),n.Dc(1,h,5,6,"mat-form-field",7),n.Dc(2,p,2,4,"mat-form-field",7),n.Sb()),2&t){const t=e.$implicit;n.Cb(1),n.lc("ngIf",t.select),n.Cb(1),n.lc("ngIf",!t.select)}}function f(t,e){if(1&t&&(n.Tb(0,"div"),n.Dc(1,m,3,2,"p",6),n.Sb()),2&t){const t=n.fc();n.Cb(1),n.lc("ngForOf",t.config.input)}}class S{constructor(t,e,i,o,n=null){this.title=t,this.message=e,this.lblBtnConfirm=i,this.lblBtnDeny=o,this.config=n}}let v=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.title=e.title,this.message=e.message,this.lblBtnConfirm=e.lblBtnConfirm,this.lblBtnDeny=e.lblBtnDeny,this.config=e.config}ngOnInit(){}onConfirm(){this.dialogRef.close(null===this.config||{resultado:!0,config:this.config})}onDismiss(){this.dialogRef.close(null!==this.config&&{resultado:!1,config:this.config})}}return t.\u0275fac=function(e){return new(e||t)(n.Nb(o.f),n.Nb(o.a))},t.\u0275cmp=n.Hb({type:t,selectors:[["app-confirm-dialog"]],decls:11,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[4,"ngIf"],["mat-dialog-actions","","align","center"],["mat-raised-button","",1,"btnConfig",3,"click"],["mat-raised-button","","color","accent",1,"btnConfig",3,"click"],[4,"ngFor","ngForOf"],["class","fullWidth",4,"ngIf"],[1,"fullWidth"],["name","input.label",3,"ngModel","ngModelOptions","required","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","type","text",3,"placeholder","name","ngModel","required","ngModelChange"]],template:function(t,e){1&t&&(n.Tb(0,"h1",0),n.Fc(1),n.Sb(),n.Tb(2,"div",1),n.Tb(3,"p"),n.Fc(4),n.Sb(),n.Dc(5,f,2,1,"div",2),n.Sb(),n.Tb(6,"div",3),n.Tb(7,"button",4),n.bc("click",function(){return e.onDismiss()}),n.Fc(8),n.Sb(),n.Tb(9,"button",5),n.bc("click",function(){return e.onConfirm()}),n.Fc(10),n.Sb(),n.Sb()),2&t&&(n.Cb(1),n.Hc(" ",e.title,"\n"),n.Cb(3),n.Gc(e.message),n.Cb(1),n.lc("ngIf",e.config&&e.config.input),n.Cb(3),n.Gc(e.lblBtnDeny),n.Cb(2),n.Gc(e.lblBtnConfirm))},directives:[o.g,o.d,c.m,o.c,a.a,c.l,r.b,r.e,s.a,l.k,l.n,l.p,d.m,b.b,l.c],styles:[".btnConfig[_ngcontent-%COMP%]{width:70px;height:48px}"]}),t})()},Iab2:function(t,e,i){var o,n;void 0===(n="function"==typeof(o=function(){"use strict";function e(t,e,i){var o=new XMLHttpRequest;o.open("GET",t),o.responseType="blob",o.onload=function(){a(o.response,e,i)},o.onerror=function(){console.error("could not download file")},o.send()}function i(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(i)}}var n="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,c=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=n.saveAs||("object"!=typeof window||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(t,c,a){var r=n.URL||n.webkitURL,s=document.createElement("a");s.download=c=c||t.name||"download",s.rel="noopener","string"==typeof t?(s.href=t,s.origin===location.origin?o(s):i(s.href)?e(t,c,a):o(s,s.target="_blank")):(s.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){o(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,n,c){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,c),n);else if(i(t))e(t,n,c);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout(function(){o(a)})}}:function(t,i,o,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof t)return e(t,i,o);var r="application/octet-stream"===t.type,s=/constructor/i.test(n.HTMLElement)||n.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||r&&s||c)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var t=d.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=t:location=t,a=null},d.readAsDataURL(t)}else{var b=n.URL||n.webkitURL,u=b.createObjectURL(t);a?a.location=u:location.href=u,a=null,setTimeout(function(){b.revokeObjectURL(u)},4e4)}});n.saveAs=a.saveAs=a,t.exports=a})?o.apply(e,[]):o)||(t.exports=n)},NU9O:function(t,e,i){"use strict";i.d(e,"a",function(){return l});var o=i("fXoL"),n=i("ofXK"),c=i("bTqV");function a(t,e){if(1&t){const t=o.Ub();o.Tb(0,"button",3),o.bc("click",function(){return o.xc(t),o.fc().onHtmlClick()}),o.Fc(1," Generar "),o.Sb()}if(2&t){const t=o.fc();o.lc("disabled",t.configuracion.isHtmlDisabled)}}function r(t,e){if(1&t){const t=o.Ub();o.Tb(0,"button",3),o.bc("click",function(){return o.xc(t),o.fc().onPdfClick()}),o.Fc(1," PDF "),o.Sb()}if(2&t){const t=o.fc();o.lc("disabled",t.configuracion.isPdfDisabled)}}function s(t,e){if(1&t){const t=o.Ub();o.Tb(0,"button",3),o.bc("click",function(){return o.xc(t),o.fc().onExcelClick()}),o.Fc(1," Excel "),o.Sb()}if(2&t){const t=o.fc();o.lc("disabled",t.configuracion.isExcelDisabled)}}let l=(()=>{class t{constructor(){this.htmlClick=new o.o,this.pdfClick=new o.o,this.excelClick=new o.o,this.resetParamsClick=new o.o,this.configuracion={isHtmlDisabled:!1,isPdfDisabled:!1,isExcelDisabled:!1,showHtml:!0,showPdf:!0,showExcel:!0},this.onHtmlClick=()=>this.htmlClick.emit(),this.onPdfClick=()=>this.pdfClick.emit(),this.onExcelClick=()=>this.excelClick.emit(),this.onResetParamsClick=()=>this.resetParamsClick.emit()}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Hb({type:t,selectors:[["app-rpt-botones"]],inputs:{configuracion:"configuracion"},outputs:{htmlClick:"htmlClick",pdfClick:"pdfClick",excelClick:"excelClick",resetParamsClick:"resetParamsClick"},decls:6,vars:3,consts:[["align","end"],["mat-raised-button","","type","button","class","btnAccion","color","accent",3,"disabled","click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Dc(1,a,2,1,"button",1),o.Dc(2,r,2,1,"button",1),o.Dc(3,s,2,1,"button",1),o.Tb(4,"button",2),o.bc("click",function(){return e.onResetParamsClick()}),o.Fc(5," Restaurar "),o.Sb(),o.Sb()),2&t&&(o.Cb(1),o.lc("ngIf",e.configuracion.showHtml),o.Cb(1),o.lc("ngIf",e.configuracion.showPdf),o.Cb(1),o.lc("ngIf",e.configuracion.showExcel))},directives:[n.m,c.a],styles:[""]}),t})()},TOq3:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var o=i("fXoL");let n=(()=>{class t{constructor(){this.configuracion={w:150,h:150,align:"center",size:100}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Hb({type:t,selectors:[["app-cargando"]],inputs:{configuracion:"configuracion"},decls:2,vars:7,consts:[[3,"align"],["id","imgCargando","src","/assets/img/loading.gif","alt","Cargando..."]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Ob(1,"img",1),o.Sb()),2&t&&(o.Ac("width",e.configuracion.size,"%"),o.lc("align",e.configuracion.align),o.Cb(1),o.Ac("width",e.configuracion.w,"px")("height",e.configuracion.h,"px"))},styles:[""]}),t})()},vtFA:function(t,e,i){"use strict";i.r(e),i.d(e,"WmsModule",function(){return Jn});var o=i("ofXK"),n=i("tk/3"),c=i("3Pt+"),a=i("YUcS"),r=i("PCNd"),s=i("MutI"),l=i("NFeN"),d=i("kmnG"),b=i("qFsG"),u=i("Wp6s"),g=i("f0Cb"),h=i("wZkO"),p=i("+0xr"),m=i("d3UM"),f=i("bSwM"),S=i("bTqV"),v=i("dNgK"),C=i("/t3+"),T=i("STbY"),_=i("zkoq"),x=i("M9IT"),D=i("0IaG"),M=i("XhcP"),I=i("8yBR"),F=i("/1cH"),y=i("A5z7"),k=i("uM5D"),O=i("tyNb"),w=i("0T/Q"),E=i("sKxO"),A=i("wd/R"),B=i("fXoL"),R=i("FY0D"),H=i("R5jZ"),$=i("un/a"),P=i("JIr8"),N=i("Qyje");let j=(()=>{class t{constructor(t){this.http=t,this.ingresoUrl="ingreso",this.documentoUrl="documento",this.srvcErrHndl=new H.a}get(t={}){return this.http.get(`${E.a.urlWms}/${this.ingresoUrl}/buscar_ingreso?${N.stringify(t)}`).pipe(Object($.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}save(t){return this.http.post(`${E.a.urlWms}/${this.ingresoUrl}/guardar${+t.ingreso>0?"/"+t.ingreso:""}`,t).pipe(Object($.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}getDetalle(t,e={}){return this.http.get(`${E.a.urlWms}/${this.ingresoUrl}/buscar_detalle/${t}?${N.stringify(e)}`).pipe(Object($.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}saveDetalle(t){return this.http.post(`${E.a.urlWms}/${this.ingresoUrl}/guardar_detalle/${t.ingreso}${+t.ingreso_detalle>0?"/"+t.ingreso_detalle:""}`,t).pipe(Object($.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}getDocumento(t={}){return this.http.get(`${E.a.urlWms}/${this.documentoUrl}/buscar?${N.stringify(t)}`).pipe(Object($.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}saveDocumento(t){return this.http.post(`${E.a.urlWms}/${this.documentoUrl}/guardar${+t.documento>0?"/"+t.documento:""}`,t).pipe(Object($.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}enviarDocumentoAConta(t){return this.http.get(`${E.a.urlWms}/${this.documentoUrl}/enviar/${t}`).pipe(Object($.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(B.Xb(n.b))},t.\u0275prov=B.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var U=i("FKr1");function G(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-list-item",5),B.bc("click",function(){B.xc(t);const i=e.$implicit;return B.fc().getIngreso(i)}),B.Tb(1,"mat-icon",6),B.Fc(2,"trending_up"),B.Sb(),B.Tb(3,"h5",7),B.Fc(4),B.Sb(),B.Ob(5,"br"),B.Tb(6,"p",7),B.Fc(7),B.gc(8,"date"),B.Ob(9,"br"),B.Fc(10),B.Ob(11,"br"),B.Sb(),B.Tb(12,"p",7),B.Fc(13),B.Sb(),B.Sb()}if(2&t){const t=e.$implicit;B.Cb(4),B.Hc("No. ",t.ingreso,""),B.Cb(3),B.Hc(" Fecha: ",B.ic(8,4,t.fecha,"dd/MM/yyyy"),""),B.Cb(3),B.Hc(" Bodega: ",t.bodega.descripcion,""),B.Cb(3),B.Hc(" Proveedor: ",t.proveedor.razon_social," ")}}const q=function(){return{standalone:!0}};let z=(()=>{class t{constructor(t){this.ingresoSrvc=t,this.getIngresoEv=new B.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadIngresos=()=>{this.ingresoSrvc.get().subscribe(t=>{t&&t.length>0&&(this.lstIngresos=t,this.applyFilter())})},this.getIngreso=t=>{this.getIngresoEv.emit({ingreso:t.ingreso,tipo_movimiento:t.tipo_movimiento.tipo_movimiento,fecha:t.fecha,bodega_origen:t.bodega_origen&&t.bodega_origen.bodega?t.bodega_origen.bodega:null,bodega:t.bodega.bodega,usuario:t.usuario.usuario,comentario:t.comentario,proveedor:t.proveedor.proveedor})},this.pageChange=t=>{this.pageSize=t.pageSize,this.pageIndex=t.pageIndex,this.applyFilter()}}ngOnInit(){this.loadIngresos()}applyFilter(){if(this.txtFiltro.length>0){const t=Object(E.b)(this.lstIngresos,this.txtFiltro);this.length=t.length,this.lstIngresosPaged=Object(E.c)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstIngresos.length,this.lstIngresosPaged=Object(E.c)(this.lstIngresos,this.pageSize,this.pageIndex+1)}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(j))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-lista-ingreso"]],outputs:{getIngresoEv:"getIngresoEv"},decls:7,vars:7,consts:[[1,"mat-elevation-z4","fullWidth",2,"height","100% important"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,e){1&t&&(B.Tb(0,"mat-card",0),B.Tb(1,"mat-card-content"),B.Tb(2,"mat-form-field",1),B.Tb(3,"input",2),B.bc("keyup",function(){return e.applyFilter()})("ngModelChange",function(t){return e.txtFiltro=t}),B.Sb(),B.Sb(),B.Tb(4,"mat-nav-list"),B.Dc(5,G,14,7,"mat-list-item",3),B.Sb(),B.Tb(6,"mat-paginator",4),B.bc("page",function(t){return e.pageChange(t)}),B.Sb(),B.Sb(),B.Sb()),2&t&&(B.Cb(3),B.lc("ngModel",e.txtFiltro)("ngModelOptions",B.nc(6,q)),B.Cb(2),B.lc("ngForOf",e.lstIngresosPaged),B.Cb(1),B.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[u.a,u.c,d.b,b.b,c.c,c.k,c.n,s.e,o.l,x.a,s.c,l.a,s.b,U.j],pipes:[o.e],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),t})();var L=i("IJgu"),W=i("50cD"),V=i("3e6T"),K=i("u5dX"),Q=i("NGYs"),X=i("C5NV"),J=i("yZ4O"),Z=i("DVqU");function Y(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",7),B.bc("click",function(){return B.xc(t),B.fc().showIngresoForm=!0}),B.Tb(1,"mat-icon",8),B.Fc(2,"expand_more"),B.Sb(),B.Sb()}}function tt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",7),B.bc("click",function(){return B.xc(t),B.fc().showIngresoForm=!1}),B.Tb(1,"mat-icon",8),B.Fc(2,"expand_less"),B.Sb(),B.Sb()}}function et(t,e){if(1&t&&(B.Tb(0,"mat-option",21),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.tipo_movimiento),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function it(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",12),B.Tb(1,"mat-label"),B.Fc(2,"Tipo de movimiento"),B.Sb(),B.Tb(3,"mat-select",20),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).ingreso.tipo_movimiento=e}),B.Dc(4,et,2,2,"mat-option",15),B.Sb(),B.Sb()}if(2&t){const t=B.fc(2);B.Cb(3),B.lc("ngModel",t.ingreso.tipo_movimiento),B.Cb(1),B.lc("ngForOf",t.tiposMovimiento)}}function ot(t,e){if(1&t&&(B.Tb(0,"mat-option",21),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.bodega),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function nt(t,e){if(1&t&&(B.Tb(0,"mat-option",21),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.bodega),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function ct(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",24),B.bc("click",function(){return B.xc(t),B.fc(3).ingreso.bodega_origen=void 0}),B.Tb(1,"mat-icon",8),B.Fc(2,"close"),B.Sb(),B.Sb()}}function at(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",12),B.Tb(1,"mat-label"),B.Fc(2,"Bodega de origen"),B.Sb(),B.Tb(3,"mat-select",22),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).ingreso.bodega_origen=e}),B.Dc(4,nt,2,2,"mat-option",15),B.Sb(),B.Dc(5,ct,3,0,"button",23),B.Sb()}if(2&t){const t=B.fc(2);B.Cb(3),B.lc("ngModel",t.ingreso.bodega_origen),B.Cb(1),B.lc("ngForOf",t.bodegas),B.Cb(1),B.lc("ngIf",t.ingreso.bodega_origen)}}function rt(t,e){if(1&t&&(B.Tb(0,"mat-option",21),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t),B.Cb(1),B.Ic(" (",t.nit,") ",t.razon_social," ")}}const st=function(){return{standalone:!0}};function lt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",12),B.Tb(1,"mat-label"),B.Fc(2,"Proveedor"),B.Sb(),B.Tb(3,"input",25),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).txtProveedorSelected=e})("keyup",function(){B.xc(t);const e=B.fc(2);return e.filtrarProveedores(e.txtProveedorSelected)}),B.Sb(),B.Tb(4,"mat-autocomplete",26,27),B.Dc(6,rt,2,3,"mat-option",15),B.Sb(),B.Sb()}if(2&t){const t=B.tc(5),e=B.fc(2);B.Cb(3),B.lc("ngModel",e.txtProveedorSelected)("ngModelOptions",B.nc(5,st))("matAutocomplete",t),B.Cb(1),B.lc("displayWith",e.displayProveedor),B.Cb(2),B.lc("ngForOf",e.filteredProveedores)}}function dt(t,e){if(1&t&&(B.Tb(0,"button",28),B.Fc(1," Guardar "),B.Sb()),2&t){B.fc();const t=B.tc(1),e=B.fc();B.lc("disabled",!t.form.valid||e.bloqueoBotones||1==+e.documento.enviado)}}function bt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",29),B.bc("click",function(){return B.xc(t),B.fc(2).resetIngreso()}),B.Fc(1," Nuevo "),B.Sb()}}function ut(t,e){if(1&t){const t=B.Ub();B.Tb(0,"form",9,10),B.bc("ngSubmit",function(){B.xc(t);const e=B.tc(1),i=B.fc();return e.form.valid&&i.onSubmit()}),B.Dc(2,it,5,2,"mat-form-field",11),B.Tb(3,"mat-form-field",12),B.Tb(4,"input",13),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().ingreso.fecha=e}),B.Sb(),B.Sb(),B.Tb(5,"mat-form-field",12),B.Tb(6,"mat-label"),B.Fc(7,"Bodega"),B.Sb(),B.Tb(8,"mat-select",14),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().ingreso.bodega=e}),B.Dc(9,ot,2,2,"mat-option",15),B.Sb(),B.Sb(),B.Dc(10,at,6,3,"mat-form-field",11),B.Dc(11,lt,7,6,"mat-form-field",11),B.Tb(12,"mat-form-field",12),B.Tb(13,"input",16),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().ingreso.comentario=e}),B.Sb(),B.Sb(),B.Tb(14,"div",17),B.Dc(15,dt,2,1,"button",18),B.Dc(16,bt,2,0,"button",19),B.Sb(),B.Sb()}if(2&t){const t=B.fc();B.Cb(2),B.lc("ngIf",t.saveToDB),B.Cb(2),B.lc("ngModel",t.ingreso.fecha),B.Cb(4),B.lc("ngModel",t.ingreso.bodega),B.Cb(1),B.lc("ngForOf",t.bodegas),B.Cb(1),B.lc("ngIf",t.saveToDB),B.Cb(1),B.lc("ngIf",t.saveToDB),B.Cb(2),B.lc("ngModel",t.ingreso.comentario),B.Cb(2),B.lc("ngIf",t.saveToDB),B.Cb(1),B.lc("ngIf",t.ingreso.ingreso)}}function gt(t,e){1&t&&B.Ob(0,"hr")}function ht(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",7),B.bc("click",function(){return B.xc(t),B.fc(2).showDetalleIngresoForm=!0}),B.Tb(1,"mat-icon",8),B.Fc(2,"expand_more"),B.Sb(),B.Sb()}}function pt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",7),B.bc("click",function(){return B.xc(t),B.fc(2).showDetalleIngresoForm=!1}),B.Tb(1,"mat-icon",8),B.Fc(2,"expand_less"),B.Sb(),B.Sb()}}function mt(t,e){if(1&t&&(B.Tb(0,"mat-option",21),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function ft(t,e){if(1&t&&(B.Tb(0,"mat-option",21),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.presentacion),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function St(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",12),B.Tb(1,"input",39),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(3).detalleIngreso.precio_unitario=e})("change",function(){B.xc(t);const e=B.fc(3);return e.detalleIngreso.precio_total=+e.detalleIngreso.precio_unitario*+e.detalleIngreso.cantidad}),B.Sb(),B.Sb()}if(2&t){const t=B.fc(3);B.Cb(1),B.lc("ngModel",t.detalleIngreso.precio_unitario)}}function vt(t,e){if(1&t&&(B.Tb(0,"button",28),B.Fc(1," Guardar "),B.Sb()),2&t){B.fc();const t=B.tc(1),e=B.fc(2);B.lc("disabled",!t.form.valid||e.bloqueoBotones||1==+e.documento.enviado)}}const Ct=function(){return[2,3]};function Tt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",40),B.bc("click",function(){return B.xc(t),B.fc(3).addToDetail()}),B.Fc(1," Nuevo "),B.Sb()}if(2&t){B.fc();const t=B.tc(1),e=B.fc(2);B.lc("disabled",!t.form.valid||B.nc(1,Ct).indexOf(+e.ingreso.estatus_movimiento)>=0)}}function _t(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",29),B.bc("click",function(){return B.xc(t),B.fc(3).resetDetalleIngreso()}),B.Fc(1," Nuevo "),B.Sb()}}function xt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"form",9,32),B.bc("ngSubmit",function(){B.xc(t);const e=B.tc(1),i=B.fc(2);return e.form.valid&&i.onSubmitDetail()}),B.Tb(2,"mat-form-field",12),B.Tb(3,"mat-label"),B.Fc(4,"Art\xedculo"),B.Sb(),B.Tb(5,"input",33),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).txtArticuloSelected=e})("keyup",function(){B.xc(t);const e=B.fc(2);return e.filtrarArticulos(e.txtArticuloSelected)}),B.Sb(),B.Tb(6,"mat-autocomplete",34,35),B.bc("optionSelected",function(){return B.xc(t),B.fc(2).setPresentaciones()}),B.Dc(8,mt,2,2,"mat-option",15),B.Sb(),B.Sb(),B.Tb(9,"mat-form-field",12),B.Tb(10,"mat-label"),B.Fc(11,"Presentaci\xf3n"),B.Sb(),B.Tb(12,"mat-select",36),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).detalleIngreso.presentacion=e}),B.Dc(13,ft,2,2,"mat-option",15),B.Sb(),B.Sb(),B.Tb(14,"mat-form-field",12),B.Tb(15,"input",37),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).detalleIngreso.cantidad=e})("change",function(){B.xc(t);const e=B.fc(2);return e.detalleIngreso.precio_total=+e.detalleIngreso.precio_unitario*+e.detalleIngreso.cantidad}),B.Sb(),B.Sb(),B.Dc(16,St,2,1,"mat-form-field",11),B.Tb(17,"div",17),B.Dc(18,vt,2,1,"button",18),B.Dc(19,Tt,2,2,"button",38),B.Dc(20,_t,2,0,"button",19),B.Sb(),B.Sb()}if(2&t){const t=B.tc(7),e=B.fc(2);B.Cb(5),B.lc("ngModel",e.txtArticuloSelected)("ngModelOptions",B.nc(12,st))("matAutocomplete",t),B.Cb(1),B.lc("displayWith",e.displayArticulo),B.Cb(2),B.lc("ngForOf",e.filteredArticulos),B.Cb(4),B.lc("ngModel",e.detalleIngreso.presentacion),B.Cb(1),B.lc("ngForOf",e.fltrPresentaciones),B.Cb(2),B.lc("ngModel",e.detalleIngreso.cantidad),B.Cb(1),B.lc("ngIf",e.saveToDB),B.Cb(2),B.lc("ngIf",e.saveToDB),B.Cb(1),B.lc("ngIf",!e.saveToDB),B.Cb(1),B.lc("ngIf",e.detalleIngreso.ingreso_detalle)}}function Dt(t,e){1&t&&B.Ob(0,"hr")}function Mt(t,e){1&t&&(B.Tb(0,"th",54),B.Fc(1,"Art\xedculo"),B.Sb())}function It(t,e){if(1&t&&(B.Tb(0,"td",55),B.Fc(1),B.Sb()),2&t){const t=e.$implicit,i=B.fc(3);B.Cb(1),B.Hc(" ",i.saveToDB?t.articulo.descripcion:i.getDescripcionArticulo(t.articulo),"")}}function Ft(t,e){1&t&&(B.Tb(0,"th",54),B.Fc(1,"Presentaci\xf3n"),B.Sb())}function yt(t,e){if(1&t&&(B.Tb(0,"td",55),B.Fc(1),B.Sb()),2&t){const t=e.$implicit,i=B.fc(3);B.Cb(1),B.Hc(" ",i.saveToDB?t.presentacion.descripcion:i.getDescripcionPresentacion(t.presentacion)," ")}}function kt(t,e){1&t&&(B.Tb(0,"th",56),B.Fc(1,"Cantidad"),B.Sb())}function Ot(t,e){if(1&t&&(B.Tb(0,"td",57),B.Fc(1),B.gc(2,"number"),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Hc("",B.ic(2,1,t.cantidad,"1.2-2")," ")}}function wt(t,e){1&t&&(B.Tb(0,"th",56),B.Fc(1,"Costo Unitario Con IVA"),B.Sb())}function Et(t,e){if(1&t&&(B.Tb(0,"td",57),B.Fc(1),B.gc(2,"number"),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Hc("",B.ic(2,1,t.precio_unitario,"1.2-2")," ")}}function At(t,e){1&t&&(B.Tb(0,"th",56),B.Fc(1,"Costo Total con IVA"),B.Sb())}function Bt(t,e){if(1&t&&(B.Tb(0,"td",57),B.Fc(1),B.gc(2,"number"),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Gc(B.ic(2,1,t.precio_total,"1.2-2"))}}function Rt(t,e){1&t&&(B.Tb(0,"th",54),B.Fc(1,"\xa0"),B.Sb())}function Ht(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",40),B.bc("click",function(){B.xc(t);const e=B.fc().$implicit;return B.fc(3).getDetalleIngreso(e.ingreso,e.ingreso_detalle)}),B.Fc(1," Editar "),B.Sb()}if(2&t){const t=B.fc(4);B.lc("disabled",t.bloqueoBotones||1==+t.documento.enviado)}}function $t(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",40),B.bc("click",function(){B.xc(t);const e=B.fc().$implicit;return B.fc(3).removeFromDetail(e.articulo)}),B.Fc(1," Editar "),B.Sb()}if(2&t){const t=B.fc(4);B.lc("disabled",B.nc(1,Ct).indexOf(+t.ingreso.estatus_movimiento)>=0||t.bloqueoBotones)}}function Pt(t,e){if(1&t&&(B.Tb(0,"td",55),B.Dc(1,Ht,2,1,"button",38),B.Dc(2,$t,2,2,"button",38),B.Sb()),2&t){const t=B.fc(3);B.Cb(1),B.lc("ngIf",t.saveToDB),B.Cb(1),B.lc("ngIf",!t.saveToDB)}}function Nt(t,e){1&t&&B.Ob(0,"tr",58)}function jt(t,e){1&t&&B.Ob(0,"tr",59)}function Ut(t,e){if(1&t&&(B.Tb(0,"table",41),B.Rb(1,42),B.Dc(2,Mt,2,0,"th",43),B.Dc(3,It,2,1,"td",44),B.Qb(),B.Rb(4,45),B.Dc(5,Ft,2,0,"th",43),B.Dc(6,yt,2,1,"td",44),B.Qb(),B.Rb(7,46),B.Dc(8,kt,2,0,"th",47),B.Dc(9,Ot,3,4,"td",48),B.Qb(),B.Rb(10,49),B.Dc(11,wt,2,0,"th",47),B.Dc(12,Et,3,4,"td",48),B.Qb(),B.Rb(13,50),B.Dc(14,At,2,0,"th",47),B.Dc(15,Bt,3,4,"td",48),B.Qb(),B.Rb(16,51),B.Dc(17,Rt,2,0,"th",43),B.Dc(18,Pt,3,2,"td",44),B.Qb(),B.Dc(19,Nt,1,0,"tr",52),B.Dc(20,jt,1,0,"tr",53),B.Sb()),2&t){const t=B.fc(2);B.lc("dataSource",t.dataSource),B.Cb(19),B.lc("matHeaderRowDef",t.displayedColumns),B.Cb(1),B.lc("matRowDefColumns",t.displayedColumns)}}function Gt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-card",1),B.Tb(1,"mat-card-title"),B.Tb(2,"h4"),B.Fc(3),B.Dc(4,ht,3,0,"button",2),B.Dc(5,pt,3,0,"button",2),B.Sb(),B.Sb(),B.Tb(6,"mat-card-content"),B.Dc(7,xt,21,13,"form",3),B.Dc(8,Dt,1,0,"hr",4),B.Tb(9,"mat-form-field",12),B.Tb(10,"input",30),B.bc("keyup",function(e){return B.xc(t),B.fc().applyFilter(e.target.value)}),B.Sb(),B.Sb(),B.Dc(11,Ut,21,3,"table",31),B.Sb(),B.Sb()}if(2&t){const t=B.fc();B.Cb(3),B.Ic(" Detalle del ingreso ",t.saveToDB?"No.":""," ",t.ingreso.ingreso," "),B.Cb(1),B.lc("ngIf",!t.showDetalleIngresoForm),B.Cb(1),B.lc("ngIf",t.showDetalleIngresoForm),B.Cb(2),B.lc("ngIf",t.showDetalleIngresoForm),B.Cb(1),B.lc("ngIf",t.detallesIngreso.length>0),B.Cb(3),B.lc("ngIf",t.detallesIngreso.length>0)}}function qt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",7),B.bc("click",function(){return B.xc(t),B.fc(2).showDocumentoForm=!0}),B.Tb(1,"mat-icon",8),B.Fc(2,"expand_more"),B.Sb(),B.Sb()}}function zt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",7),B.bc("click",function(){return B.xc(t),B.fc(2).showDocumentoForm=!1}),B.Tb(1,"mat-icon",8),B.Fc(2,"expand_less"),B.Sb(),B.Sb()}}function Lt(t,e){if(1&t&&(B.Tb(0,"mat-option",21),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.documento_tipo),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Wt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",12),B.Tb(1,"mat-label"),B.Fc(2,"Tipo de documento"),B.Sb(),B.Tb(3,"mat-select",66),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(3).documento.documento_tipo=e}),B.Dc(4,Lt,2,2,"mat-option",15),B.Sb(),B.Sb()}if(2&t){const t=B.fc(3);B.Cb(3),B.lc("ngModel",t.documento.documento_tipo)("disabled",1==+t.documento.enviado),B.Cb(1),B.lc("ngForOf",t.documentosTipo)}}function Vt(t,e){if(1&t&&(B.Tb(0,"mat-option",21),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.tipo_compra_venta),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Kt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",12),B.Tb(1,"mat-label"),B.Fc(2,"Tipo de compra"),B.Sb(),B.Tb(3,"mat-select",67),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(3).documento.tipo_compra_venta=e}),B.Dc(4,Vt,2,2,"mat-option",15),B.Sb(),B.Sb()}if(2&t){const t=B.fc(3);B.Cb(3),B.lc("ngModel",t.documento.tipo_compra_venta)("disabled",1==+t.documento.enviado),B.Cb(1),B.lc("ngForOf",t.tiposCompraVenta)}}function Qt(t,e){if(1&t&&(B.Tb(0,"button",28),B.Fc(1," Guardar "),B.Sb()),2&t){B.fc();const t=B.tc(1),e=B.fc(2);B.lc("disabled",!t.form.valid||e.bloqueoBotones||1==+e.documento.enviado)}}function Xt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",68),B.bc("click",function(){return B.xc(t),B.fc(3).enviarAConta()}),B.Fc(1," Enviar a contabilidad "),B.Sb()}if(2&t){B.fc();const t=B.tc(1),e=B.fc(2);B.lc("disabled",!t.form.valid||e.bloqueoBotones||1==+e.documento.enviado)}}function Jt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"form",9,61),B.bc("ngSubmit",function(){B.xc(t);const e=B.tc(1),i=B.fc(2);return e.form.valid&&i.submitDocumento()}),B.Dc(2,Wt,5,3,"mat-form-field",11),B.Tb(3,"mat-form-field",12),B.Tb(4,"input",62),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).documento.serie=e}),B.Sb(),B.Sb(),B.Tb(5,"mat-form-field",12),B.Tb(6,"input",63),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).documento.numero=e}),B.Sb(),B.Sb(),B.Tb(7,"mat-form-field",12),B.Tb(8,"input",64),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).documento.fecha=e}),B.Sb(),B.Sb(),B.Dc(9,Kt,5,3,"mat-form-field",11),B.Tb(10,"div",17),B.Dc(11,Qt,2,1,"button",18),B.Dc(12,Xt,2,1,"button",65),B.Sb(),B.Sb()}if(2&t){const t=B.fc(2);B.Cb(2),B.lc("ngIf",t.saveToDB),B.Cb(2),B.lc("ngModel",t.documento.serie)("disabled",1==+t.documento.enviado),B.Cb(2),B.lc("ngModel",t.documento.numero)("disabled",1==+t.documento.enviado),B.Cb(2),B.lc("ngModel",t.documento.fecha)("disabled",1==+t.documento.enviado),B.Cb(1),B.lc("ngIf",t.saveToDB),B.Cb(2),B.lc("ngIf",t.saveToDB),B.Cb(1),B.lc("ngIf",t.saveToDB&&+t.documento.documento>0&&0==+t.documento.enviado)}}function Zt(t,e){if(1&t&&(B.Tb(0,"mat-tab",60),B.Tb(1,"mat-card",1),B.Tb(2,"mat-card-title"),B.Tb(3,"h4"),B.Fc(4),B.Dc(5,qt,3,0,"button",2),B.Dc(6,zt,3,0,"button",2),B.Sb(),B.Sb(),B.Tb(7,"mat-card-content"),B.Dc(8,Jt,13,10,"form",3),B.Sb(),B.Sb(),B.Sb()),2&t){const t=B.fc();B.Cb(4),B.Hc(" Documento del ingreso",t.ingreso.ingreso?" No. "+t.ingreso.ingreso:""," "),B.Cb(1),B.lc("ngIf",!t.showDocumentoForm),B.Cb(1),B.lc("ngIf",t.showDocumentoForm),B.Cb(2),B.lc("ngIf",t.showDocumentoForm)}}let Yt=(()=>{class t{constructor(t,e,i,o,n,c,a,r,s,l,d){this.dialog=t,this.snackBar=e,this.ls=i,this.ingresoSrvc=o,this.proveedorSrvc=n,this.tipoMovimientoSrvc=c,this.bodegaSrvc=a,this.articuloSrvc=r,this.presentacinSrvc=s,this.documentoTipoSrvc=l,this.tipoCompraVentaSrvc=d,this.saveToDB=!0,this.ingresoSavedEv=new B.o,this.showIngresoForm=!0,this.showDetalleIngresoForm=!0,this.showDocumentoForm=!0,this.detallesIngreso=[],this.displayedColumns=["articulo","presentacion","cantidad","costo_unitario","costo_total","deleteItem"],this.tiposMovimiento=[],this.proveedores=[],this.filteredProveedores=[],this.bodegas=[],this.articulos=[],this.filteredArticulos=[],this.presentaciones=[],this.fltrPresentaciones=[],this.esMovil=!1,this.bloqueoBotones=!1,this.txtArticuloSelected=void 0,this.txtProveedorSelected=void 0,this.documentosTipo=[],this.tiposCompraVenta=[],this.loadTiposMovimiento=()=>{this.tipoMovimientoSrvc.get({ingreso:1}).subscribe(t=>{t&&(this.tiposMovimiento=t)})},this.loadProveedores=()=>{this.proveedorSrvc.get().subscribe(t=>{t&&(this.proveedores=t)})},this.loadBodegas=()=>{this.bodegaSrvc.get({sede:+this.ls.get(E.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.bodegas=t)})},this.loadPresentaciones=()=>{this.presentacinSrvc.get().subscribe(t=>{t&&(this.presentaciones=t)})},this.loadDocumentosTipo=()=>{this.documentoTipoSrvc.get().subscribe(t=>{t&&(this.documentosTipo=t)})},this.loadTiposCompraVenta=()=>{this.tipoCompraVentaSrvc.get().subscribe(t=>{t&&(this.tiposCompraVenta=t)})},this.resetIngreso=()=>{this.ingreso={ingreso:null,tipo_movimiento:null,fecha:A().format(E.a.dbDateFormat),bodega:null,usuario:this.ls.get(E.a.usrTokenVar).idusr||0,comentario:null,proveedor:null,estatus_movimiento:1},this.resetDetalleIngreso(),this.detallesIngreso=[],this.resetDocumento(),this.updateTableDataSource(),this.txtProveedorSelected=void 0},this.onSubmit=()=>{this.bloqueoBotones=!0,this.ingresoSrvc.save(this.ingreso).subscribe(t=>{this.resetIngreso(),t.exito&&(this.ingreso=t.ingreso,this.setProveedor(+this.ingreso.proveedor)),this.ingresoSavedEv.emit(),this.bloqueoBotones=!1})},this.loadArticulos=()=>{this.articuloSrvc.getArticulosIngreso().subscribe(t=>{t&&(this.articulos=t)})},this.resetDetalleIngreso=()=>{this.detalleIngreso={ingreso_detalle:null,ingreso:this.ingreso.ingreso?this.ingreso.ingreso:null,articulo:null,cantidad:null,precio_unitario:null,precio_total:null,presentacion:0},this.txtArticuloSelected=void 0},this.loadDetalleIngreso=(t=+this.ingreso.ingreso)=>{this.ingresoSrvc.getDetalle(t,{ingreso:t}).subscribe(t=>{t&&(this.detallesIngreso=t,this.updateTableDataSource())})},this.getDetalleIngreso=(t=+this.ingreso.ingreso,e)=>{this.ingresoSrvc.getDetalle(t,{ingreso_detalle:e}).subscribe(t=>{t&&(this.detalleIngreso={ingreso_detalle:t[0].ingreso_detalle,ingreso:t[0].ingreso,articulo:t[0].articulo.articulo,cantidad:+t[0].cantidad,precio_unitario:+t[0].precio_unitario,precio_total:+t[0].precio_total,presentacion:t[0].presentacion.presentacion},this.setPresentaciones(),this.txtArticuloSelected=t[0].articulo,this.showDetalleIngresoForm=!0)})},this.onSubmitDetail=()=>{this.bloqueoBotones=!0,this.detalleIngreso.ingreso=this.ingreso.ingreso,this.detalleIngreso.precio_total=+this.detalleIngreso.cantidad*+this.detalleIngreso.precio_unitario,this.ingresoSrvc.saveDetalle(this.detalleIngreso).subscribe(t=>{t&&(this.loadDetalleIngreso(),this.resetDetalleIngreso()),this.bloqueoBotones=!1})},this.addToDetail=()=>{this.detallesIngreso.push(this.detalleIngreso),this.resetDetalleIngreso(),this.updateTableDataSource()},this.removeFromDetail=t=>this.detallesIngreso.splice(this.detallesIngreso.findIndex(e=>+e.articulo==+t),1),this.getDescripcionArticulo=t=>this.articulos.find(e=>+e.articulo==+t).descripcion||"",this.getDescripcionPresentacion=t=>this.presentaciones.find(e=>+e.presentacion==+t).descripcion||"",this.updateTableDataSource=()=>{this.dataSource=new p.k(this.detallesIngreso),this.dataSource.filterPredicate=(t,e)=>t.articulo.descripcion.toLowerCase().includes(e)},this.eliminarArticulo=t=>{this.detallesIngreso.splice(this.detallesIngreso.findIndex(e=>e.ingreso_detalle===t.ingreso_detalle),1),this.updateTableDataSource()},this.filtrarArticulos=t=>{if(t&&"string"==typeof t){const e=t.toLowerCase();this.filteredArticulos=this.articulos.filter(t=>t.descripcion.toLowerCase().includes(e))}else this.filteredArticulos=this.articulos},this.displayArticulo=t=>{if(t)return this.detalleIngreso.articulo=t.articulo,t.descripcion},this.filtrarProveedores=t=>{if(t&&"string"==typeof t){const e=t.toLowerCase();this.filteredProveedores=this.proveedores.filter(t=>t.razon_social.toLowerCase().includes(e)||t.nit.toLowerCase().includes(e))}else this.filteredProveedores=this.proveedores},this.displayProveedor=t=>{if(t)return this.ingreso.proveedor=t.proveedor,`(${t.nit}) ${t.razon_social}`},this.setPresentaciones=()=>{this.fltrPresentaciones=[];const t=this.articulos.findIndex(t=>+t.articulo==+this.detalleIngreso.articulo),e=this.articulos[t];this.fltrPresentaciones=this.presentaciones.filter(t=>+t.medida.medida==+e.presentacion.medida)},this.setProveedor=t=>this.txtProveedorSelected=this.proveedores.find(e=>+e.proveedor===t),this.applyFilter=t=>{this.dataSource.filter=t.toLocaleLowerCase()},this.resetDocumento=()=>this.documento={documento:null,ingreso:null,documento_tipo:null,serie:null,numero:null,fecha:null,tipo_compra_venta:null,enviado:0},this.setDocumentoIngreso=t=>{this.documento={documento:+t.documento,ingreso:+t.ingreso,documento_tipo:t.documento_tipo.documento_tipo,serie:t.serie,numero:t.numero,fecha:t.fecha,tipo_compra_venta:t.tipo_compra_venta.tipo_compra_venta,enviado:t.enviado}},this.loadDocumento=(t=this.ingreso.ingreso||null)=>{t&&this.ingresoSrvc.getDocumento({ingreso:t}).subscribe(t=>{t&&t.length>0?this.setDocumentoIngreso(t[0]):this.resetDocumento()})},this.submitDocumento=()=>{this.documento.ingreso=this.ingreso.ingreso,this.ingresoSrvc.saveDocumento(this.documento).subscribe(t=>{t.exito?(this.setDocumentoIngreso(t.documento),this.snackBar.open("Documento guardado con \xe9xito.","Ingreso",{duration:3e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Ingreso",{duration:7e3})})},this.enviarAConta=()=>{var t;+(null===(t=this.documento)||void 0===t?void 0:t.documento)>0&&this.dialog.open(L.a,{maxWidth:"400px",data:new L.b("Env\xedo a contabilidad","Una vez enviado a contabilidad no podr\xe1 modificar el ingreso ni el documento. \xbfDesea continuar?","S\xed","No")}).afterClosed().subscribe(t=>{t&&this.ingresoSrvc.enviarDocumentoAConta(this.documento.documento).subscribe(t=>{t.exito?(this.documento=t.documento,this.snackBar.open("Documento enviado a contabilidad.","Ingreso",{duration:3e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Ingreso",{duration:7e3})})})}}ngOnInit(){this.esMovil=this.ls.get(E.a.usrTokenVar).enmovil||!1,this.resetIngreso(),this.loadTiposMovimiento(),this.loadProveedores(),this.loadBodegas(),this.loadArticulos(),this.loadPresentaciones(),this.loadDocumentosTipo(),this.loadTiposCompraVenta()}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(D.b),B.Nb(v.b),B.Nb(R.a),B.Nb(j),B.Nb(W.a),B.Nb(V.a),B.Nb(K.a),B.Nb(Q.a),B.Nb(X.a),B.Nb(J.a),B.Nb(Z.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-form-ingreso"]],inputs:{ingreso:"ingreso",saveToDB:"saveToDB"},outputs:{ingresoSavedEv:"ingresoSavedEv"},decls:13,vars:7,consts:[["label","Ingreso"],[1,"mat-elevation-z4","fullWidth"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],["label","Documento",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmIngreso","ngForm"],["class","fullWidth",4,"ngIf"],[1,"fullWidth"],["matInput","","type","date","placeholder","Fecha","name","fecha","required","",3,"ngModel","ngModelChange"],["name","bodega","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Comentarios","name","comentario",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent","class","btnAccion",3,"disabled",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["name","tipo_movimiento","required","",3,"ngModel","ngModelChange"],[3,"value"],["name","bodega_origen",3,"ngModel","ngModelChange"],["type","button","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["type","button","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["type","text","placeholder","Proveedor","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith"],["autoProveedores","matAutocomplete"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",3,"click"],["matInput","","placeholder","Buscar",3,"keyup"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleIngreso","ngForm"],["type","text","placeholder","Art\xedculo","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith","optionSelected"],["autoArticulos","matAutocomplete"],["name","presentacion","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Cantidad","name","cantidad","required","",3,"ngModel","ngModelChange","change"],["mat-raised-button","","type","button","color","accent",3,"disabled","click",4,"ngIf"],["matInput","","placeholder","Costo unitario Con IVA","name","precio_unitario","required","",3,"ngModel","ngModelChange","change"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","articulo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","presentacion"],["matColumnDef","cantidad"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","costo_unitario"],["matColumnDef","costo_total"],["matColumnDef","deleteItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-header-row",""],["mat-row",""],["label","Documento"],["frmDocumento","ngForm"],["matInput","","type","text","placeholder","Serie","name","serie","minlength","1","maxlength","50","required","",3,"ngModel","disabled","ngModelChange"],["matInput","","type","text","placeholder","N\xfamero","name","numero","minlength","1","maxlength","50","required","",3,"ngModel","disabled","ngModelChange"],["matInput","","type","date","placeholder","Fecha","name","fecha","required","",3,"ngModel","disabled","ngModelChange"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"disabled","click",4,"ngIf"],["name","documento_tipo","required","",3,"ngModel","disabled","ngModelChange"],["name","tipo_compra_venta","required","",3,"ngModel","disabled","ngModelChange"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"]],template:function(t,e){1&t&&(B.Tb(0,"mat-tab-group"),B.Tb(1,"mat-tab",0),B.Tb(2,"mat-card",1),B.Tb(3,"mat-card-title"),B.Tb(4,"h4"),B.Fc(5),B.Dc(6,Y,3,0,"button",2),B.Dc(7,tt,3,0,"button",2),B.Sb(),B.Sb(),B.Tb(8,"mat-card-content"),B.Dc(9,ut,17,9,"form",3),B.Sb(),B.Sb(),B.Dc(10,gt,1,0,"hr",4),B.Dc(11,Gt,12,7,"mat-card",5),B.Sb(),B.Dc(12,Zt,9,4,"mat-tab",6),B.Sb()),2&t&&(B.Cb(5),B.Hc(" Ingreso",e.ingreso.ingreso?" No. "+e.ingreso.ingreso:""," "),B.Cb(1),B.lc("ngIf",!e.showIngresoForm),B.Cb(1),B.lc("ngIf",e.showIngresoForm),B.Cb(2),B.lc("ngIf",e.showIngresoForm),B.Cb(1),B.lc("ngIf",e.ingreso.ingreso||!e.saveToDB),B.Cb(1),B.lc("ngIf",e.ingreso.ingreso||!e.saveToDB),B.Cb(1),B.lc("ngIf",+e.ingreso.ingreso>0))},directives:[h.b,h.a,u.a,u.h,o.m,u.c,S.a,l.a,c.r,c.l,c.m,d.b,b.b,c.c,c.p,c.k,c.n,d.e,m.a,o.l,U.m,d.f,F.c,F.a,p.j,p.c,p.e,p.b,p.g,p.i,p.d,p.a,p.f,p.h,c.g,c.f],pipes:[o.f],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}"]}),t})();const te=["lstIngreso"],ee=["frmIngreso"];let ie=(()=>{class t{constructor(t){this.ls=t,this.breakpoint=2,this.onWindowResize=t=>{this.breakpoint=t.target.innerWidth<=360?1:2},this.setIngreso=t=>{this.ingreso=t,this.frmIngreso.setProveedor(+this.ingreso.proveedor),this.frmIngreso.loadDetalleIngreso(+this.ingreso.ingreso),this.frmIngreso.resetDetalleIngreso(),this.frmIngreso.loadDocumento(this.ingreso.ingreso)},this.refreshIngresoList=()=>{this.lstIngresoComponent.loadIngresos()},this.ingreso={ingreso:null,tipo_movimiento:null,fecha:A().format(E.a.dbDateFormat),bodega:null,usuario:this.ls.get(E.a.usrTokenVar).idusr||0,comentario:null,proveedor:null}}ngOnInit(){this.breakpoint=window.innerWidth<=360?1:2}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(R.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-ingreso"]],viewQuery:function(t,e){if(1&t&&(B.Kc(te,1),B.Kc(ee,1)),2&t){let t;B.sc(t=B.cc())&&(e.lstIngresoComponent=t.first),B.sc(t=B.cc())&&(e.frmIngreso=t.first)}},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getIngresoEv"],["lstIngreso",""],[1,"col","m7","s12"],[3,"ingreso","ingresoSavedEv"],["frmIngreso",""]],template:function(t,e){1&t&&(B.Tb(0,"div",0),B.Tb(1,"div",1),B.Tb(2,"app-lista-ingreso",2,3),B.bc("getIngresoEv",function(t){return e.setIngreso(t)}),B.Sb(),B.Sb(),B.Tb(4,"div",4),B.Tb(5,"app-form-ingreso",5,6),B.bc("ingresoSavedEv",function(){return e.refreshIngresoList()}),B.Sb(),B.Sb(),B.Sb()),2&t&&(B.Cb(5),B.lc("ingreso",e.ingreso))},directives:[z,Yt],styles:[""]}),t})(),oe=(()=>{class t{constructor(t){this.http=t,this.egresoUrl="egreso",this.srvcErrHndl=new H.a}get(t={}){return this.http.get(`${E.a.urlWms}/${this.egresoUrl}/buscar_egreso?${N.stringify(t)}`).pipe(Object($.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}save(t){return this.http.post(`${E.a.urlWms}/${this.egresoUrl}/guardar${+t.egreso>0?"/"+t.egreso:""}`,t).pipe(Object($.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}getDetalle(t,e={}){return this.http.get(`${E.a.urlWms}/${this.egresoUrl}/buscar_detalle/${t}?${N.stringify(e)}`).pipe(Object($.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}saveDetalle(t){return this.http.post(`${E.a.urlWms}/${this.egresoUrl}/guardar_detalle/${t.egreso}${+t.egreso_detalle>0?"/"+t.egreso_detalle:""}`,t).pipe(Object($.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(B.Xb(n.b))},t.\u0275prov=B.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const ne=function(){return{standalone:!0}};function ce(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",6),B.bc("input",function(){return B.xc(t),B.fc().applyFilter()})("ngModelChange",function(e){return B.xc(t),B.fc().txtFiltro=e}),B.Sb()}if(2&t){const t=B.fc();B.lc("matKeyboard",t.keyboardLayout)("ngModel",t.txtFiltro)("ngModelOptions",B.nc(3,ne))}}function ae(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",7),B.bc("keyup",function(){return B.xc(t),B.fc().applyFilter()})("ngModelChange",function(e){return B.xc(t),B.fc().txtFiltro=e}),B.Sb()}if(2&t){const t=B.fc();B.lc("ngModel",t.txtFiltro)("ngModelOptions",B.nc(2,ne))}}function re(t,e){if(1&t&&(B.Tb(0,"span",10),B.Fc(1),B.Sb()),2&t){const t=B.fc().$implicit;B.Cb(1),B.Hc("Comanda: #",t.idcomandafox,"")}}function se(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-list-item",8),B.bc("click",function(){B.xc(t);const i=e.$implicit;return B.fc().getEgreso(i)}),B.Tb(1,"mat-icon",9),B.Fc(2,"trending_down"),B.Sb(),B.Tb(3,"h5",10),B.Fc(4),B.Sb(),B.Ob(5,"br"),B.Tb(6,"p",10),B.Fc(7),B.gc(8,"date"),B.Ob(9,"br"),B.Fc(10),B.Ob(11,"br"),B.Sb(),B.Dc(12,re,2,1,"span",11),B.Sb()}if(2&t){const t=e.$implicit;B.Cb(4),B.Hc("No. ",t.egreso,""),B.Cb(3),B.Hc(" Fecha: ",B.ic(8,4,t.fecha,"dd/MM/yyyy"),""),B.Cb(3),B.Hc(" Bodega: ",t.bodega.descripcion,""),B.Cb(2),B.lc("ngIf",!!t.idcomandafox)}}let le=(()=>{class t{constructor(t,e){this.egresoSrvc=t,this.ls=e,this.getEgresoEv=new B.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.keyboardLayout=E.a.IDIOMA_TECLADO,this.esMovil=!1,this.loadEgresos=()=>{this.egresoSrvc.get().subscribe(t=>{t&&t.length>0&&(this.lstEgresos=t,this.applyFilter())})},this.getEgreso=t=>{this.getEgresoEv.emit({egreso:t.egreso,tipo_movimiento:t.tipo_movimiento.tipo_movimiento,bodega:t.bodega.bodega,fecha:t.fecha,usuario:t.usuario.usuario,estatus_movimiento:t.estatus_movimiento||1,traslado:t.traslado||0,idcomandafox:t.idcomandafox})},this.pageChange=t=>{this.pageSize=t.pageSize,this.pageIndex=t.pageIndex,this.applyFilter()}}ngOnInit(){this.esMovil=this.ls.get(E.a.usrTokenVar).enmovil||!1,this.loadEgresos()}applyFilter(){if(this.txtFiltro.length>0){const t=Object(E.b)(this.lstEgresos,this.txtFiltro);this.length=t.length,this.lstEgresosPaged=Object(E.c)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstEgresos.length,this.lstEgresosPaged=Object(E.c)(this.lstEgresos,this.pageSize,this.pageIndex+1)}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(oe),B.Nb(R.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-lista-egreso"]],outputs:{getEgresoEv:"getEgresoEv"},decls:8,vars:6,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"matKeyboard","ngModel","ngModelOptions","input","ngModelChange",4,"ngIf"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["matInput","","placeholder","Buscar...",3,"matKeyboard","ngModel","ngModelOptions","input","ngModelChange"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click"],["mat-list-icon",""],["mat-line",""],["mat-line","",4,"ngIf"]],template:function(t,e){1&t&&(B.Tb(0,"mat-card",0),B.Tb(1,"mat-card-content"),B.Tb(2,"mat-form-field",1),B.Dc(3,ce,1,4,"input",2),B.Dc(4,ae,1,3,"input",3),B.Sb(),B.Tb(5,"mat-nav-list"),B.Dc(6,se,13,7,"mat-list-item",4),B.Sb(),B.Tb(7,"mat-paginator",5),B.bc("page",function(t){return e.pageChange(t)}),B.Sb(),B.Sb(),B.Sb()),2&t&&(B.Cb(3),B.lc("ngIf",!e.esMovil),B.Cb(1),B.lc("ngIf",e.esMovil),B.Cb(2),B.lc("ngForOf",e.lstEgresosPaged),B.Cb(1),B.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[u.a,u.c,d.b,o.m,s.e,o.l,x.a,b.b,k.a,c.c,c.k,c.n,s.c,l.a,s.b,U.j],pipes:[o.e],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),t})(),de=(()=>{class t{constructor(t){this.http=t,this.conversorUrl="conversor",this.srvcErrHndl=new H.a}transformar(t){return this.http.post(`${E.a.urlWms}/${this.conversorUrl}/transformar`,t).pipe(Object($.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}producir(t){return this.http.post(`${E.a.urlWms}/${this.conversorUrl}/producir`,t).pipe(Object($.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(B.Xb(n.b))},t.\u0275prov=B.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function be(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",5),B.bc("click",function(){return B.xc(t),B.fc().showEgresoForm=!0}),B.Tb(1,"mat-icon",6),B.Fc(2,"expand_more"),B.Sb(),B.Sb()}}function ue(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",5),B.bc("click",function(){return B.xc(t),B.fc().showEgresoForm=!1}),B.Tb(1,"mat-icon",6),B.Fc(2,"expand_less"),B.Sb(),B.Sb()}}function ge(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.tipo_movimiento),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function he(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",10),B.Tb(1,"mat-label"),B.Fc(2,"Tipo de movimiento"),B.Sb(),B.Tb(3,"mat-select",19),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).egreso.tipo_movimiento=e}),B.Dc(4,ge,2,2,"mat-option",13),B.Sb(),B.Sb()}if(2&t){const t=B.fc(2);B.Cb(3),B.lc("ngModel",t.egreso.tipo_movimiento),B.Cb(1),B.lc("ngForOf",t.tiposMovimiento)}}function pe(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.bodega),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function me(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-checkbox",21),B.bc("ngModelChange",function(e){return B.xc(t),+(B.fc(2).egreso.traslado=e)}),B.Fc(1,"\xbfEs traslado entre bodegas de la misma sede? "),B.Sb()}if(2&t){const t=B.fc(2);B.lc("ngModel",+t.egreso.traslado)}}function fe(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.bodega),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Se(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",10),B.Tb(1,"mat-label"),B.Fc(2,"Bodega destino"),B.Sb(),B.Tb(3,"mat-select",22),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).egreso.bodega_destino=e}),B.Dc(4,fe,2,2,"mat-option",13),B.Sb(),B.Sb()}if(2&t){const t=B.fc(2);B.Cb(3),B.lc("ngModel",t.egreso.bodega_destino)("required",1==+t.egreso.traslado),B.Cb(1),B.lc("ngForOf",t.bodegas)}}function ve(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.tipo_movimiento),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Ce(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",10),B.Tb(1,"mat-label"),B.Fc(2,"Tipo de movimiento destino"),B.Sb(),B.Tb(3,"mat-select",23),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).egreso.tipo_movimiento_destino=e}),B.Dc(4,ve,2,2,"mat-option",13),B.Sb(),B.Sb()}if(2&t){const t=B.fc(2);B.Cb(3),B.lc("ngModel",t.egreso.tipo_movimiento_destino)("required",1==+t.egreso.traslado),B.Cb(1),B.lc("ngForOf",t.tiposMovimientoIngreso)}}function Te(t,e){if(1&t&&(B.Tb(0,"span"),B.Ob(1,"br"),B.Tb(2,"strong"),B.Fc(3),B.Sb(),B.Sb()),2&t){const t=B.fc(2);B.Cb(3),B.Hc("Comanda: #",t.egreso.idcomandafox,"")}}const _e=function(){return[2,3]};function xe(t,e){if(1&t&&(B.Tb(0,"button",24),B.Fc(1," Guardar "),B.Sb()),2&t){B.fc();const t=B.tc(1),e=B.fc();B.lc("disabled",!t.form.valid||B.nc(1,_e).indexOf(+e.egreso.estatus_movimiento)>=0||e.bloqueoBotones)}}function De(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",25),B.bc("click",function(){return B.xc(t),B.fc(2).confirmarEgreso()}),B.Fc(1," Confirmar "),B.Sb()}if(2&t){B.fc();const t=B.tc(1),e=B.fc();B.lc("disabled",!t.form.valid||B.nc(1,_e).indexOf(+e.egreso.estatus_movimiento)>=0)}}function Me(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",26),B.bc("click",function(){return B.xc(t),B.fc(2).resetEgreso()}),B.Fc(1," Nuevo "),B.Sb()}}function Ie(t,e){if(1&t){const t=B.Ub();B.Tb(0,"form",7,8),B.bc("ngSubmit",function(){B.xc(t);const e=B.tc(1),i=B.fc();return e.form.valid&&i.onSubmit()}),B.Dc(2,he,5,2,"mat-form-field",9),B.Tb(3,"mat-form-field",10),B.Tb(4,"input",11),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().egreso.fecha=e}),B.Sb(),B.Sb(),B.Tb(5,"mat-form-field",10),B.Tb(6,"mat-label"),B.Fc(7,"Bodega"),B.Sb(),B.Tb(8,"mat-select",12),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().egreso.bodega=e}),B.Dc(9,pe,2,2,"mat-option",13),B.Sb(),B.Sb(),B.Dc(10,me,2,1,"mat-checkbox",14),B.Dc(11,Se,5,3,"mat-form-field",9),B.Dc(12,Ce,5,3,"mat-form-field",9),B.Dc(13,Te,4,1,"span",3),B.Tb(14,"div",15),B.Dc(15,xe,2,2,"button",16),B.Dc(16,De,2,2,"button",17),B.Dc(17,Me,2,0,"button",18),B.Sb(),B.Sb()}if(2&t){const t=B.fc();B.Cb(2),B.lc("ngIf",t.saveToDB),B.Cb(2),B.lc("ngModel",t.egreso.fecha),B.Cb(4),B.lc("ngModel",t.egreso.bodega),B.Cb(1),B.lc("ngForOf",t.bodegas),B.Cb(1),B.lc("ngIf",t.saveToDB),B.Cb(1),B.lc("ngIf",1==+t.egreso.traslado&&B.nc(11,_e).indexOf(+t.egreso.estatus_movimiento)<0),B.Cb(1),B.lc("ngIf",1==+t.egreso.traslado&&B.nc(12,_e).indexOf(+t.egreso.estatus_movimiento)<0),B.Cb(1),B.lc("ngIf",!!t.egreso.idcomandafox),B.Cb(2),B.lc("ngIf",t.saveToDB),B.Cb(1),B.lc("ngIf",t.egreso.egreso&&t.detallesEgreso.length>0),B.Cb(1),B.lc("ngIf",t.egreso.egreso)}}function Fe(t,e){1&t&&B.Ob(0,"hr")}function ye(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",5),B.bc("click",function(){return B.xc(t),B.fc(2).showDetalleEgresoForm=!0}),B.Tb(1,"mat-icon",6),B.Fc(2,"expand_more"),B.Sb(),B.Sb()}}function ke(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",5),B.bc("click",function(){return B.xc(t),B.fc(2).showDetalleEgresoForm=!1}),B.Tb(1,"mat-icon",6),B.Fc(2,"expand_less"),B.Sb(),B.Sb()}}function Oe(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function we(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.presentacion),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Ee(t,e){if(1&t&&(B.Tb(0,"button",24),B.Fc(1," Guardar "),B.Sb()),2&t){B.fc();const t=B.tc(1),e=B.fc(2);B.lc("disabled",!t.form.valid||B.nc(1,_e).indexOf(+e.egreso.estatus_movimiento)>=0||e.bloqueoBotones)}}function Ae(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",37),B.bc("click",function(){return B.xc(t),B.fc(3).addToDetail()}),B.Fc(1," Nuevo "),B.Sb()}if(2&t){B.fc();const t=B.tc(1),e=B.fc(2);B.lc("disabled",!t.form.valid||B.nc(1,_e).indexOf(+e.egreso.estatus_movimiento)>=0)}}function Be(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",26),B.bc("click",function(){return B.xc(t),B.fc(3).resetDetalleEgreso()}),B.Fc(1," Nuevo "),B.Sb()}}const Re=function(){return{standalone:!0}};function He(t,e){if(1&t){const t=B.Ub();B.Tb(0,"form",7,30),B.bc("ngSubmit",function(){B.xc(t);const e=B.tc(1),i=B.fc(2);return e.form.valid&&i.onSubmitDetail()}),B.Tb(2,"mat-form-field",10),B.Tb(3,"mat-label"),B.Fc(4,"Art\xedculo"),B.Sb(),B.Tb(5,"input",31),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).txtArticuloSelected=e})("keyup",function(){B.xc(t);const e=B.fc(2);return e.filtrarArticulos(e.txtArticuloSelected)}),B.Sb(),B.Tb(6,"mat-autocomplete",32,33),B.bc("optionSelected",function(){return B.xc(t),B.fc(2).setPresentaciones()}),B.Dc(8,Oe,2,2,"mat-option",13),B.Sb(),B.Sb(),B.Tb(9,"mat-form-field",10),B.Tb(10,"mat-label"),B.Fc(11,"Presentaci\xf3n"),B.Sb(),B.Tb(12,"mat-select",34),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).detalleEgreso.presentacion=e}),B.Dc(13,we,2,2,"mat-option",13),B.Sb(),B.Sb(),B.Tb(14,"mat-form-field",10),B.Tb(15,"input",35),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).detalleEgreso.cantidad=e})("change",function(){B.xc(t);const e=B.fc(2);return e.detalleEgreso.precio_total=+e.detalleEgreso.precio_unitario*+e.detalleEgreso.cantidad}),B.Sb(),B.Sb(),B.Tb(16,"div",15),B.Dc(17,Ee,2,2,"button",16),B.Dc(18,Ae,2,2,"button",36),B.Dc(19,Be,2,0,"button",18),B.Sb(),B.Sb()}if(2&t){const t=B.tc(7),e=B.fc(2);B.Cb(5),B.lc("ngModel",e.txtArticuloSelected)("ngModelOptions",B.nc(11,Re))("matAutocomplete",t),B.Cb(1),B.lc("displayWith",e.displayArticulo),B.Cb(2),B.lc("ngForOf",e.filteredArticulos),B.Cb(4),B.lc("ngModel",e.detalleEgreso.presentacion),B.Cb(1),B.lc("ngForOf",e.fltrPresentaciones),B.Cb(2),B.lc("ngModel",e.detalleEgreso.cantidad),B.Cb(2),B.lc("ngIf",e.saveToDB),B.Cb(1),B.lc("ngIf",!e.saveToDB),B.Cb(1),B.lc("ngIf",e.detalleEgreso.egreso_detalle)}}function $e(t,e){1&t&&B.Ob(0,"hr")}function Pe(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",38),B.bc("input",function(e){return B.xc(t),B.fc(2).applyFilter(e.target.value)}),B.Sb()}if(2&t){const t=B.fc(2);B.lc("matKeyboard",t.keyboardLayout)}}function Ne(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",39),B.bc("keyup",function(e){return B.xc(t),B.fc(2).applyFilter(e.target.value)}),B.Sb()}}function je(t,e){1&t&&(B.Tb(0,"th",53),B.Fc(1,"Art\xedculo"),B.Sb())}function Ue(t,e){if(1&t&&(B.Tb(0,"td",54),B.Fc(1),B.Sb()),2&t){const t=e.$implicit,i=B.fc(3);B.Cb(1),B.Hc(" ",i.saveToDB?t.articulo.descripcion:i.getDescripcionArticulo(t.articulo),"")}}function Ge(t,e){1&t&&(B.Tb(0,"th",53),B.Fc(1,"Presentaci\xf3n"),B.Sb())}function qe(t,e){if(1&t&&(B.Tb(0,"td",54),B.Fc(1),B.Sb()),2&t){const t=e.$implicit,i=B.fc(3);B.Cb(1),B.Hc(" ",i.saveToDB?t.presentacion.descripcion:i.getDescripcionPresentacion(t.presentacion)," ")}}function ze(t,e){1&t&&(B.Tb(0,"th",55),B.Fc(1,"Cantidad"),B.Sb())}function Le(t,e){if(1&t&&(B.Tb(0,"td",56),B.Fc(1),B.gc(2,"number"),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Gc(B.ic(2,1,t.cantidad,"1.2-2"))}}function We(t,e){1&t&&(B.Tb(0,"th",55),B.Fc(1,"Costo Unitario"),B.Sb())}function Ve(t,e){if(1&t&&(B.Tb(0,"td",56),B.Fc(1),B.gc(2,"number"),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Hc("",B.ic(2,1,t.precio_unitario,"1.2-2")," ")}}function Ke(t,e){1&t&&(B.Tb(0,"th",55),B.Fc(1,"Costo Total"),B.Sb())}function Qe(t,e){if(1&t&&(B.Tb(0,"td",56),B.Fc(1),B.gc(2,"number"),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Gc(B.ic(2,1,t.precio_total,"1.2-2"))}}function Xe(t,e){1&t&&(B.Tb(0,"th",53),B.Fc(1,"\xa0"),B.Sb())}function Je(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",25),B.bc("click",function(){B.xc(t);const e=B.fc().$implicit;return B.fc(3).getDetalleEgreso(e.egreso,e.egreso_detalle)}),B.Fc(1," Editar "),B.Sb()}if(2&t){const t=B.fc(4);B.lc("disabled",B.nc(1,_e).indexOf(+t.egreso.estatus_movimiento)>=0||t.bloqueoBotones)}}function Ze(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",37),B.bc("click",function(){B.xc(t);const e=B.fc().$implicit;return B.fc(3).removeFromDetail(e.articulo)}),B.Fc(1," Eliminar "),B.Sb()}if(2&t){const t=B.fc(4);B.lc("disabled",B.nc(1,_e).indexOf(+t.egreso.estatus_movimiento)>=0||t.bloqueoBotones)}}function Ye(t,e){if(1&t&&(B.Tb(0,"td",54),B.Dc(1,Je,2,2,"button",17),B.Dc(2,Ze,2,2,"button",36),B.Sb()),2&t){const t=B.fc(3);B.Cb(1),B.lc("ngIf",t.saveToDB),B.Cb(1),B.lc("ngIf",!t.saveToDB)}}function ti(t,e){1&t&&B.Ob(0,"tr",57)}function ei(t,e){1&t&&B.Ob(0,"tr",58)}function ii(t,e){if(1&t&&(B.Tb(0,"table",40),B.Rb(1,41),B.Dc(2,je,2,0,"th",42),B.Dc(3,Ue,2,1,"td",43),B.Qb(),B.Rb(4,44),B.Dc(5,Ge,2,0,"th",42),B.Dc(6,qe,2,1,"td",43),B.Qb(),B.Rb(7,45),B.Dc(8,ze,2,0,"th",46),B.Dc(9,Le,3,4,"td",47),B.Qb(),B.Rb(10,48),B.Dc(11,We,2,0,"th",46),B.Dc(12,Ve,3,4,"td",47),B.Qb(),B.Rb(13,49),B.Dc(14,Ke,2,0,"th",46),B.Dc(15,Qe,3,4,"td",47),B.Qb(),B.Rb(16,50),B.Dc(17,Xe,2,0,"th",42),B.Dc(18,Ye,3,2,"td",43),B.Qb(),B.Dc(19,ti,1,0,"tr",51),B.Dc(20,ei,1,0,"tr",52),B.Sb()),2&t){const t=B.fc(2);B.lc("dataSource",t.dataSource),B.Cb(19),B.lc("matHeaderRowDef",t.displayedColumns),B.Cb(1),B.lc("matRowDefColumns",t.displayedColumns)}}function oi(t,e){if(1&t&&(B.Tb(0,"mat-card",0),B.Tb(1,"mat-card-title"),B.Tb(2,"h4"),B.Fc(3),B.Dc(4,ye,3,0,"button",1),B.Dc(5,ke,3,0,"button",1),B.Sb(),B.Sb(),B.Tb(6,"mat-card-content"),B.Dc(7,He,20,12,"form",2),B.Dc(8,$e,1,0,"hr",3),B.Tb(9,"mat-form-field",10),B.Dc(10,Pe,1,1,"input",27),B.Dc(11,Ne,1,0,"input",28),B.Sb(),B.Dc(12,ii,21,3,"table",29),B.Sb(),B.Sb()),2&t){const t=B.fc();B.Cb(3),B.Ic(" Detalle del egreso ",t.saveToDB?"No.":""," ",t.egreso.egreso," "),B.Cb(1),B.lc("ngIf",!t.showDetalleEgresoForm),B.Cb(1),B.lc("ngIf",t.showDetalleEgresoForm),B.Cb(2),B.lc("ngIf",t.showDetalleEgresoForm),B.Cb(1),B.lc("ngIf",t.detallesEgreso.length>0),B.Cb(2),B.lc("ngIf",!t.esMovil),B.Cb(1),B.lc("ngIf",t.esMovil),B.Cb(1),B.lc("ngIf",t.detallesEgreso.length>0)}}function ni(t,e){1&t&&B.Ob(0,"hr")}function ci(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",5),B.bc("click",function(){return B.xc(t),B.fc(2).showDetalleEgresoForm=!0}),B.Tb(1,"mat-icon",6),B.Fc(2,"expand_more"),B.Sb(),B.Sb()}}function ai(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",5),B.bc("click",function(){return B.xc(t),B.fc(2).showDetalleEgresoForm=!1}),B.Tb(1,"mat-icon",6),B.Fc(2,"expand_less"),B.Sb(),B.Sb()}}function ri(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function si(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.presentacion),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function li(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",37),B.bc("click",function(){return B.xc(t),B.fc(3).addToDetailMerma()}),B.Fc(1," Nuevo "),B.Sb()}if(2&t){B.fc();const t=B.tc(1),e=B.fc(2);B.lc("disabled",!t.form.valid||B.nc(1,_e).indexOf(+e.egreso.estatus_movimiento)>=0)}}function di(t,e){if(1&t){const t=B.Ub();B.Tb(0,"form",7,59),B.bc("ngSubmit",function(){B.xc(t);const e=B.tc(1),i=B.fc(2);return e.form.valid&&i.onSubmitDetail()}),B.Tb(2,"mat-form-field",10),B.Tb(3,"mat-label"),B.Fc(4,"Art\xedculo"),B.Sb(),B.Tb(5,"input",31),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).txtArticuloSelected=e})("keyup",function(){B.xc(t);const e=B.fc(2);return e.filtrarArticulos(e.txtArticuloSelected)}),B.Sb(),B.Tb(6,"mat-autocomplete",32,33),B.bc("optionSelected",function(){return B.xc(t),B.fc(2).setPresentacionesMerma()}),B.Dc(8,ri,2,2,"mat-option",13),B.Sb(),B.Sb(),B.Tb(9,"mat-form-field",10),B.Tb(10,"mat-label"),B.Fc(11,"Presentaci\xf3n"),B.Sb(),B.Tb(12,"mat-select",34),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).detalleMerma.presentacion=e}),B.Dc(13,si,2,2,"mat-option",13),B.Sb(),B.Sb(),B.Tb(14,"mat-form-field",10),B.Tb(15,"input",35),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).detalleMerma.cantidad=e})("change",function(){B.xc(t);const e=B.fc(2);return e.detalleMerma.precio_total=+e.detalleMerma.precio_unitario*+e.detalleMerma.cantidad}),B.Sb(),B.Sb(),B.Tb(16,"mat-form-field",10),B.Tb(17,"input",60),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).detalleMerma.precio_unitario=e})("change",function(){B.xc(t);const e=B.fc(2);return e.detalleMerma.precio_total=+e.detalleMerma.precio_unitario*+e.detalleMerma.cantidad}),B.Sb(),B.Sb(),B.Tb(18,"div",15),B.Dc(19,li,2,2,"button",36),B.Sb(),B.Sb()}if(2&t){const t=B.tc(7),e=B.fc(2);B.Cb(5),B.lc("ngModel",e.txtArticuloSelected)("ngModelOptions",B.nc(10,Re))("matAutocomplete",t),B.Cb(1),B.lc("displayWith",e.displayArticuloMerma),B.Cb(2),B.lc("ngForOf",e.filteredArticulos),B.Cb(4),B.lc("ngModel",e.detalleMerma.presentacion),B.Cb(1),B.lc("ngForOf",e.fltrPresentacionesMerma),B.Cb(2),B.lc("ngModel",e.detalleMerma.cantidad),B.Cb(2),B.lc("ngModel",e.detalleMerma.precio_unitario),B.Cb(2),B.lc("ngIf",!e.saveToDB)}}function bi(t,e){1&t&&B.Ob(0,"hr")}function ui(t,e){1&t&&(B.Tb(0,"th",53),B.Fc(1,"Art\xedculo"),B.Sb())}function gi(t,e){if(1&t&&(B.Tb(0,"td",54),B.Fc(1),B.Sb()),2&t){const t=e.$implicit,i=B.fc(3);B.Cb(1),B.Hc(" ",i.saveToDB?t.articulo.descripcion:i.getDescripcionArticulo(t.articulo),"")}}function hi(t,e){1&t&&(B.Tb(0,"th",53),B.Fc(1,"Presentaci\xf3n"),B.Sb())}function pi(t,e){if(1&t&&(B.Tb(0,"td",54),B.Fc(1),B.Sb()),2&t){const t=e.$implicit,i=B.fc(3);B.Cb(1),B.Hc(" ",i.saveToDB?t.presentacion.descripcion:i.getDescripcionPresentacion(t.presentacion)," ")}}function mi(t,e){1&t&&(B.Tb(0,"th",55),B.Fc(1,"Cantidad"),B.Sb())}function fi(t,e){if(1&t&&(B.Tb(0,"td",56),B.Fc(1),B.gc(2,"number"),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Gc(B.ic(2,1,t.cantidad,"1.2-2"))}}function Si(t,e){1&t&&(B.Tb(0,"th",55),B.Fc(1,"Costo Unitario"),B.Sb())}function vi(t,e){if(1&t&&(B.Tb(0,"td",56),B.Fc(1),B.gc(2,"number"),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Hc("",B.ic(2,1,t.precio_unitario,"1.2-2")," ")}}function Ci(t,e){1&t&&(B.Tb(0,"th",55),B.Fc(1,"Costo Total"),B.Sb())}function Ti(t,e){if(1&t&&(B.Tb(0,"td",56),B.Fc(1),B.gc(2,"number"),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Gc(B.ic(2,1,t.precio_total,"1.2-2"))}}function _i(t,e){1&t&&(B.Tb(0,"th",53),B.Fc(1,"\xa0"),B.Sb())}function xi(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",25),B.bc("click",function(){B.xc(t);const e=B.fc().$implicit;return B.fc(3).getDetalleEgreso(e.egreso,e.egreso_detalle)}),B.Fc(1," Editar "),B.Sb()}if(2&t){const t=B.fc(4);B.lc("disabled",B.nc(1,_e).indexOf(+t.egreso.estatus_movimiento)>=0||t.bloqueoBotones)}}function Di(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",37),B.bc("click",function(){B.xc(t);const e=B.fc().$implicit;return B.fc(3).removeFromDetail(e.articulo)}),B.Fc(1," Eliminar "),B.Sb()}if(2&t){const t=B.fc(4);B.lc("disabled",B.nc(1,_e).indexOf(+t.egreso.estatus_movimiento)>=0||t.bloqueoBotones)}}function Mi(t,e){if(1&t&&(B.Tb(0,"td",54),B.Dc(1,xi,2,2,"button",17),B.Dc(2,Di,2,2,"button",36),B.Sb()),2&t){const t=B.fc(3);B.Cb(1),B.lc("ngIf",t.saveToDB),B.Cb(1),B.lc("ngIf",!t.saveToDB)}}function Ii(t,e){1&t&&B.Ob(0,"tr",57)}function Fi(t,e){1&t&&B.Ob(0,"tr",58)}function yi(t,e){if(1&t&&(B.Tb(0,"table",40),B.Rb(1,41),B.Dc(2,ui,2,0,"th",42),B.Dc(3,gi,2,1,"td",43),B.Qb(),B.Rb(4,44),B.Dc(5,hi,2,0,"th",42),B.Dc(6,pi,2,1,"td",43),B.Qb(),B.Rb(7,45),B.Dc(8,mi,2,0,"th",46),B.Dc(9,fi,3,4,"td",47),B.Qb(),B.Rb(10,48),B.Dc(11,Si,2,0,"th",46),B.Dc(12,vi,3,4,"td",47),B.Qb(),B.Rb(13,49),B.Dc(14,Ci,2,0,"th",46),B.Dc(15,Ti,3,4,"td",47),B.Qb(),B.Rb(16,50),B.Dc(17,_i,2,0,"th",42),B.Dc(18,Mi,3,2,"td",43),B.Qb(),B.Dc(19,Ii,1,0,"tr",51),B.Dc(20,Fi,1,0,"tr",52),B.Sb()),2&t){const t=B.fc(2);B.lc("dataSource",t.dataSource),B.Cb(19),B.lc("matHeaderRowDef",t.displayedColumns),B.Cb(1),B.lc("matRowDefColumns",t.displayedColumns)}}function ki(t,e){if(1&t&&(B.Tb(0,"mat-card",0),B.Tb(1,"mat-card-title"),B.Tb(2,"h4"),B.Fc(3),B.Dc(4,ci,3,0,"button",1),B.Dc(5,ai,3,0,"button",1),B.Sb(),B.Sb(),B.Tb(6,"mat-card-content"),B.Dc(7,di,20,11,"form",2),B.Dc(8,bi,1,0,"hr",3),B.Dc(9,yi,21,3,"table",29),B.Sb(),B.Sb()),2&t){const t=B.fc();B.Cb(3),B.Ic(" Merma ",t.saveToDB?"No.":""," ",t.egreso.egreso," "),B.Cb(1),B.lc("ngIf",!t.showDetalleEgresoForm),B.Cb(1),B.lc("ngIf",t.showDetalleEgresoForm),B.Cb(2),B.lc("ngIf",t.showDetalleEgresoForm),B.Cb(1),B.lc("ngIf",t.detallesMerma.length>0),B.Cb(1),B.lc("ngIf",t.detallesMerma.length>0)}}let Oi=(()=>{class t{constructor(t,e,i,o,n,c,a,r,s){this.snackBar=t,this.ls=e,this.egresoSrvc=i,this.tipoMovimientoSrvc=o,this.bodegaSrvc=n,this.articuloSrvc=c,this.proveedorSrvc=a,this.transformacionSrvc=r,this.presentacionSrvc=s,this.saveToDB=!0,this.egresoSavedEv=new B.o,this.showEgresoForm=!0,this.showDetalleEgresoForm=!0,this.detallesEgreso=[],this.detallesMerma=[],this.displayedColumns=["articulo","presentacion","cantidad","precio_unitario","precio_total","editItem"],this.tiposMovimiento=[],this.tiposMovimientoIngreso=[],this.bodegas=[],this.articulos=[],this.filteredArticulos=[],this.proveedores=[],this.filteredProveedores=[],this.presentaciones=[],this.fltrPresentaciones=[],this.fltrPresentacionesMerma=[],this.keyboardLayout=E.a.IDIOMA_TECLADO,this.esMovil=!1,this.bloqueoBotones=!1,this.txtArticuloSelected=void 0,this.txtProveedorSelected=void 0,this.loadTiposMovimiento=(t=!0)=>{this.tipoMovimientoSrvc.get(t?{egreso:1}:{ingreso:1}).subscribe(e=>{e&&(t?this.tiposMovimiento=e:this.tiposMovimientoIngreso=e)})},this.loadBodegas=()=>{this.bodegaSrvc.get({sede:this.ls.get(E.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.bodegas=t)})},this.loadProveedores=()=>{this.proveedorSrvc.get().subscribe(t=>{t&&(this.proveedores=t)})},this.loadPresentaciones=()=>{this.presentacionSrvc.get().subscribe(t=>{t&&(this.presentaciones=t)})},this.resetEgreso=()=>{this.egreso={egreso:null,tipo_movimiento:null,bodega:null,fecha:A().format(E.a.dbDateFormat),usuario:this.ls.get(E.a.usrTokenVar).idusr||0,estatus_movimiento:1,traslado:0},this.resetDetalleEgreso(),this.updateTableDataSource(),this.resetDetalleMerma(),this.updateTableDataSourceM()},this.onSubmit=()=>{this.bloqueoBotones=!0,this.egresoSrvc.save(this.egreso).subscribe(t=>{t.exito&&(this.egresoSavedEv.emit(),this.resetEgreso(),this.egreso={egreso:t.egreso.egreso,tipo_movimiento:t.egreso.tipo_movimiento,fecha:t.egreso.fecha,bodega:t.egreso.bodega,creacion:t.egreso.creacion,usuario:t.egreso.usuario,estatus_movimiento:t.egreso.estatus_movimiento,traslado:t.egreso.traslado},this.loadDetalleEgreso(this.egreso.egreso)),this.bloqueoBotones=!1})},this.confirmarEgreso=()=>{this.egreso.estatus_movimiento=2,this.onSubmit()},this.loadArticulos=()=>{this.articuloSrvc.getArticulosIngreso().subscribe(t=>{t&&(this.articulos=t)})},this.resetDetalleEgreso=()=>{this.detalleEgreso={egreso_detalle:null,egreso:this.egreso.egreso?this.egreso.egreso:null,articulo:null,cantidad:null,precio_unitario:null,precio_total:null,presentacion:0},this.txtArticuloSelected=void 0},this.resetDetalleMerma=()=>this.detalleMerma={egreso_detalle:null,egreso:this.egreso.egreso?this.egreso.egreso:null,articulo:null,cantidad:null,precio_unitario:null,precio_total:null,presentacion:0},this.loadDetalleEgreso=(t=+this.egreso.egreso)=>{this.egresoSrvc.getDetalle(t,{egreso:t}).subscribe(t=>{t&&(this.detallesEgreso=t,this.updateTableDataSource())})},this.getDetalleEgreso=(t=+this.egreso.egreso,e)=>{this.egresoSrvc.getDetalle(t,{egreso_detalle:e}).subscribe(t=>{t&&(this.detalleEgreso={egreso_detalle:t[0].egreso_detalle,egreso:t[0].egreso,articulo:t[0].articulo.articulo,cantidad:+t[0].cantidad,precio_unitario:+t[0].precio_unitario,precio_total:+t[0].precio_total,presentacion:t[0].presentacion.presentacion},this.setPresentaciones(),this.saveToDB||this.setPresentacionesMerma(),this.txtArticuloSelected=t[0].articulo,this.showDetalleEgresoForm=!0)})},this.onSubmitDetail=()=>{this.bloqueoBotones=!0,this.detalleEgreso.egreso=this.egreso.egreso,this.egresoSrvc.saveDetalle(this.detalleEgreso).subscribe(t=>{t.exito?(this.loadDetalleEgreso(),this.resetDetalleEgreso(),this.snackBar.open("Egreso guardado con \xe9xito...","Egreso",{duration:3e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Egreso",{duration:3e3}),this.bloqueoBotones=!1})},this.addToDetail=()=>{this.detallesEgreso.push(this.detalleEgreso),this.resetDetalleEgreso(),this.updateTableDataSource()},this.addToDetailMerma=()=>{this.detallesMerma.push(this.detalleMerma),this.resetDetalleMerma(),this.updateTableDataSourceM()},this.removeFromDetail=t=>this.detallesEgreso.splice(this.detallesEgreso.findIndex(e=>+e.articulo==+t),1),this.getDescripcionArticulo=t=>this.articulos.find(e=>+e.articulo==+t).descripcion||"",this.getDescripcionPresentacion=t=>this.presentaciones.find(e=>+e.presentacion==+t).descripcion||"",this.updateTableDataSource=()=>{this.dataSource=new p.k(this.detallesEgreso),this.dataSource.filterPredicate=(t,e)=>t.articulo.descripcion.toLowerCase().includes(e)},this.updateTableDataSourceM=()=>this.dataSource=new p.k(this.detallesMerma),this.filtrarArticulos=t=>{if(t&&"string"==typeof t){const e=t.toLowerCase();this.filteredArticulos=this.articulos.filter(t=>t.descripcion.toLowerCase().includes(e))}else this.filteredArticulos=this.articulos},this.setPresentaciones=()=>{this.fltrPresentaciones=[];const t=this.articulos.findIndex(t=>+t.articulo==+this.detalleEgreso.articulo),e=this.articulos[t];this.fltrPresentaciones=this.presentaciones.filter(t=>+t.medida.medida==+e.presentacion.medida)},this.setPresentacionesMerma=()=>{this.fltrPresentacionesMerma=[];const t=this.articulos.findIndex(t=>+t.articulo==+this.detalleMerma.articulo),e=this.articulos[t];this.fltrPresentacionesMerma=this.presentaciones.filter(t=>+t.medida.medida==+e.presentacion.medida)},this.displayArticulo=t=>{if(t)return this.detalleEgreso.articulo=t.articulo,t.descripcion},this.displayArticuloMerma=t=>{if(t)return this.detalleMerma.articulo=t.articulo,t.descripcion},this.filtrarProveedores=t=>{if(t&&"string"==typeof t){const e=t.toLowerCase();this.filteredProveedores=this.proveedores.filter(t=>t.razon_social.toLowerCase().includes(e)||t.nit.toLowerCase().includes(e))}else this.filteredProveedores=this.proveedores},this.displayProveedor=t=>{if(t)return this.egreso.proveedor=t.proveedor,`(${t.nit}) ${t.razon_social}`},this.applyFilter=t=>{this.dataSource.filter=t}}ngOnInit(){this.esMovil=this.ls.get(E.a.usrTokenVar).enmovil||!1,this.resetEgreso(),this.loadTiposMovimiento(),this.loadTiposMovimiento(!1),this.loadBodegas(),this.loadArticulos(),this.loadProveedores(),this.loadPresentaciones()}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(v.b),B.Nb(R.a),B.Nb(oe),B.Nb(V.a),B.Nb(K.a),B.Nb(Q.a),B.Nb(W.a),B.Nb(de),B.Nb(X.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-form-egreso"]],inputs:{egreso:"egreso",saveToDB:"saveToDB"},outputs:{egresoSavedEv:"egresoSavedEv"},decls:12,vars:8,consts:[[1,"mat-elevation-z4","fullWidth"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmEgreso","ngForm"],["class","fullWidth",4,"ngIf"],[1,"fullWidth"],["matInput","","type","date","placeholder","Fecha","name","fecha","required","",3,"ngModel","ngModelChange"],["name","bodega","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","traslado","class","fullWidth",3,"ngModel","ngModelChange",4,"ngIf"],["align","end"],["mat-raised-button","","type","submit","color","accent","class","btnAccion",3,"disabled",4,"ngIf"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"disabled","click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["name","tipo_movimiento","required","",3,"ngModel","ngModelChange"],[3,"value"],["name","traslado",1,"fullWidth",3,"ngModel","ngModelChange"],["name","bodega_destino",3,"ngModel","required","ngModelChange"],["name","tipo_movimiento_destino",3,"ngModel","required","ngModelChange"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button","color","accent",3,"click"],["matInput","","placeholder","Buscar",3,"matKeyboard","input",4,"ngIf"],["matInput","","placeholder","Buscar",3,"keyup",4,"ngIf"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleEgreso","ngForm"],["type","text","placeholder","Art\xedculo","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith","optionSelected"],["autoArticulos","matAutocomplete"],["name","presentacion","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Cantidad","name","cantidad","required","",3,"ngModel","ngModelChange","change"],["mat-raised-button","","type","button","color","accent",3,"disabled","click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["matInput","","placeholder","Buscar",3,"matKeyboard","input"],["matInput","","placeholder","Buscar",3,"keyup"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","articulo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","presentacion"],["matColumnDef","cantidad"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","precio_unitario"],["matColumnDef","precio_total"],["matColumnDef","editItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-header-row",""],["mat-row",""],["frmMerma","ngForm"],["matInput","","placeholder","Costo unitario","name","precio_unitario","required","",3,"ngModel","ngModelChange","change"]],template:function(t,e){1&t&&(B.Tb(0,"mat-card",0),B.Tb(1,"mat-card-title"),B.Tb(2,"h4"),B.Fc(3),B.Dc(4,be,3,0,"button",1),B.Dc(5,ue,3,0,"button",1),B.Sb(),B.Sb(),B.Tb(6,"mat-card-content"),B.Dc(7,Ie,18,13,"form",2),B.Sb(),B.Sb(),B.Dc(8,Fe,1,0,"hr",3),B.Dc(9,oi,13,9,"mat-card",4),B.Dc(10,ni,1,0,"hr",3),B.Dc(11,ki,10,7,"mat-card",4)),2&t&&(B.Cb(3),B.Hc(" Egreso",e.egreso.egreso?" No. "+e.egreso.egreso:""," "),B.Cb(1),B.lc("ngIf",!e.showEgresoForm),B.Cb(1),B.lc("ngIf",e.showEgresoForm),B.Cb(2),B.lc("ngIf",e.showEgresoForm),B.Cb(1),B.lc("ngIf",e.egreso.egreso||!e.saveToDB),B.Cb(1),B.lc("ngIf",e.egreso.egreso||!e.saveToDB),B.Cb(1),B.lc("ngIf",e.egreso.egreso||!e.saveToDB),B.Cb(1),B.lc("ngIf",!e.saveToDB))},directives:[u.a,u.h,o.m,u.c,S.a,l.a,c.r,c.l,c.m,d.b,b.b,c.c,c.p,c.k,c.n,d.e,m.a,o.l,U.m,f.a,F.c,F.a,k.a,p.j,p.c,p.e,p.b,p.g,p.i,p.d,p.a,p.f,p.h],pipes:[o.f],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}"]}),t})();const wi=["lstEgreso"],Ei=["frmEgreso"];let Ai=(()=>{class t{constructor(t){this.ls=t,this.setEgreso=t=>{this.egreso=t,this.frmEgreso.resetDetalleEgreso(),this.frmEgreso.loadDetalleEgreso(+this.egreso.egreso)},this.refreshEgresoList=()=>{this.lstEgresoComponent.loadEgresos()},this.egreso={egreso:null,tipo_movimiento:null,bodega:null,fecha:A().format(E.a.dbDateFormat),usuario:this.ls.get(E.a.usrTokenVar).idusr||0,estatus_movimiento:1,traslado:0}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(R.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-egreso"]],viewQuery:function(t,e){if(1&t&&(B.Kc(wi,1),B.Kc(Ei,1)),2&t){let t;B.sc(t=B.cc())&&(e.lstEgresoComponent=t.first),B.sc(t=B.cc())&&(e.frmEgreso=t.first)}},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getEgresoEv"],["lstEgreso",""],[1,"col","m7","s12"],[3,"egreso","egresoSavedEv"],["frmEgreso",""]],template:function(t,e){1&t&&(B.Tb(0,"div",0),B.Tb(1,"div",1),B.Tb(2,"app-lista-egreso",2,3),B.bc("getEgresoEv",function(t){return e.setEgreso(t)}),B.Sb(),B.Sb(),B.Tb(4,"div",4),B.Tb(5,"app-form-egreso",5,6),B.bc("egresoSavedEv",function(){return e.refreshEgresoList()}),B.Sb(),B.Sb(),B.Sb()),2&t&&(B.Cb(5),B.lc("egreso",e.egreso))},directives:[le,Oi],styles:[""]}),t})();function Bi(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",10),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().categoria.descripcion=e}),B.Sb()}if(2&t){const t=B.fc();B.lc("matKeyboard",t.keyboardLayout)("ngModel",t.categoria.descripcion)}}function Ri(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",11),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().categoria.descripcion=e}),B.Sb()}if(2&t){const t=B.fc();B.lc("ngModel",t.categoria.descripcion)}}function Hi(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-chip",12),B.bc("click",function(){B.xc(t);const i=e.$implicit;return B.fc().categoria=i}),B.Fc(1),B.Sb()}if(2&t){const t=e.$implicit;B.Cb(1),B.Hc(" ",t.descripcion," ")}}let $i=(()=>{class t{constructor(t,e,i){this.snackBar=t,this.ls=e,this.articuloSrvc=i,this.categoriaGrupoSvd=new B.o,this.onChangeSubCategoriaEv=new B.o,this.categorias=[],this.categoriasGruposPadre=[],this.categoriasGrupos=[],this.editCategoriaMode=!1,this.editSubCategoriaMode=!1,this.showCategoriasForm=!0,this.keyboardLayout=E.a.IDIOMA_TECLADO,this.esMovil=!1,this.impresoras=[],this.resetCategoria=()=>{this.categoria={categoria:null,sede:this.ls.get(E.a.usrTokenVar).sede||0,descripcion:null},this.resetCategoriaGrupo(),this.editCategoriaMode=!1},this.resetCategoriaGrupo=()=>{this.categoriaGrupo={categoria_grupo:null,categoria:this.categoria.categoria,categoria_grupo_grupo:null,descripcion:null,receta:0,impresora:null,descuento:0,antecesores:null},this.editSubCategoriaMode=!1},this.loadCategorias=()=>{this.articuloSrvc.getCategorias({sede:+this.ls.get(E.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.categorias=t)})},this.onCategoriaSelected=t=>this.loadSubCategorias(+t.value.categoria),this.loadSubCategorias=t=>{this.articuloSrvc.getCategoriasGrupos({categoria:+t}).subscribe(t=>{t&&(this.categoriasGruposPadre=this.articuloSrvc.adaptCategoriaGrupoResponse(t),this.categoriasGrupos=this.categoriasGruposPadre)})},this.loadImpresoras=()=>{this.articuloSrvc.getImpresoras({sede:+this.ls.get(E.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.impresoras=t)})},this.onSubCategoriaPadreSelected=t=>this.loadSubCategoriasSubcategorias(+t.value),this.loadSubCategoriasSubcategorias=t=>{this.articuloSrvc.getCategoriasGrupos({categoria_grupo_grupo:t}).subscribe(t=>{t&&(this.categoriasGrupos=this.articuloSrvc.adaptCategoriaGrupoResponse(t))})},this.onSubmitCategoria=()=>{this.articuloSrvc.saveCategoria(this.categoria).subscribe(t=>{t.exito?(this.editCategoriaMode=!1,this.resetCategoria(),this.loadCategorias(),this.snackBar.open("Grabada con \xe9xito.","Categor\xeda",{duration:5e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Categor\xeda",{duration:5e3})})},this.onSubCategoriaSelected=t=>this.onChangeSubCategoriaEv.emit(+t.value.categoria_grupo),this.onSubmitSubCategoria=()=>{this.articuloSrvc.saveCategoriaGrupo(this.categoriaGrupo).subscribe(t=>{t.exito?(this.resetCategoriaGrupo(),this.loadSubCategorias(+this.categoria.categoria),this.snackBar.open("Grabada con \xe9xito.","Sub - Categor\xeda",{duration:5e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Sub - Categor\xeda",{duration:5e3})})}}ngOnInit(){this.esMovil=this.ls.get(E.a.usrTokenVar).enmovil||!1,this.resetCategoria(),this.loadCategorias(),this.loadImpresoras()}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(v.b),B.Nb(R.a),B.Nb(Q.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-categoria-producto"]],outputs:{categoriaGrupoSvd:"categoriaGrupoSvd",onChangeSubCategoriaEv:"onChangeSubCategoriaEv"},decls:18,vars:4,consts:[[1,"mat-elevation-z4"],["novalidate",""],["frmCategoria","ngForm"],[1,"fullWidth"],["type","text","matInput","","placeholder","Descripcion de la categor\xeda","name","descripcion","minlength","1","maxlength","150","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["type","text","matInput","","placeholder","Descripcion de la categor\xeda","name","descripcion","minlength","1","maxlength","150","required","",3,"ngModel","ngModelChange",4,"ngIf"],["align","end"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button","color","warn",3,"click"],["color","accent","selected","",3,"click",4,"ngFor","ngForOf"],["type","text","matInput","","placeholder","Descripcion de la categor\xeda","name","descripcion","minlength","1","maxlength","150","required","",3,"matKeyboard","ngModel","ngModelChange"],["type","text","matInput","","placeholder","Descripcion de la categor\xeda","name","descripcion","minlength","1","maxlength","150","required","",3,"ngModel","ngModelChange"],["color","accent","selected","",3,"click"]],template:function(t,e){if(1&t&&(B.Tb(0,"mat-card",0),B.Tb(1,"mat-card-title"),B.Tb(2,"h4"),B.Fc(3,"Categor\xedas"),B.Sb(),B.Sb(),B.Tb(4,"mat-card-content"),B.Tb(5,"form",1,2),B.Tb(7,"mat-form-field",3),B.Dc(8,Bi,1,2,"input",4),B.Dc(9,Ri,1,1,"input",5),B.Sb(),B.Tb(10,"div",6),B.Tb(11,"button",7),B.bc("click",function(){return e.onSubmitCategoria()}),B.Fc(12," Guardar "),B.Sb(),B.Tb(13,"button",8),B.bc("click",function(){return e.resetCategoria()}),B.Fc(14," Cancelar "),B.Sb(),B.Sb(),B.Sb(),B.Ob(15,"hr"),B.Tb(16,"mat-chip-list"),B.Dc(17,Hi,2,1,"mat-chip",9),B.Sb(),B.Sb(),B.Sb()),2&t){const t=B.tc(6);B.Cb(8),B.lc("ngIf",!e.esMovil),B.Cb(1),B.lc("ngIf",e.esMovil),B.Cb(2),B.lc("disabled",!t.form.valid),B.Cb(6),B.lc("ngForOf",e.categorias)}},directives:[u.a,u.h,u.c,c.r,c.l,c.m,d.b,o.m,S.a,y.b,o.l,b.b,k.a,c.c,c.g,c.f,c.p,c.k,c.n,y.a],styles:[".fullWidth[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:18pt}"]}),t})();function Pi(t,e){if(1&t&&(B.Tb(0,"mat-option",16),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.categoria),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Ni(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",17),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().categoriaGrupo.descripcion=e}),B.Sb()}if(2&t){const t=B.fc();B.lc("matKeyboard",t.keyboardLayout)("ngModel",t.categoriaGrupo.descripcion)}}function ji(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",18),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().categoriaGrupo.descripcion=e}),B.Sb()}if(2&t){const t=B.fc();B.lc("ngModel",t.categoriaGrupo.descripcion)}}function Ui(t,e){if(1&t&&(B.Tb(0,"mat-option",16),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.impresora),B.Cb(1),B.Hc(" ",t.nombre," ")}}function Gi(t,e){if(1&t&&(B.Tb(0,"mat-option",16),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.categoria_grupo),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function qi(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-chip",19),B.bc("click",function(){B.xc(t);const i=e.$implicit,o=B.fc();return o.categoria=i,o.loadSubCategorias(i.categoria)}),B.Fc(1),B.Sb()}if(2&t){const t=e.$implicit;B.Cb(1),B.Hc(" ",t.descripcion," ")}}function zi(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-chip",20),B.bc("click",function(){B.xc(t);const i=e.$implicit;return B.fc().categoriaGrupo=i}),B.Fc(1),B.Sb()}if(2&t){const t=e.$implicit;B.Cb(1),B.Hc(" ",t.descripcion," ")}}let Li=(()=>{class t{constructor(t,e,i){this.snackBar=t,this.articuloSrvc=e,this.ls=i,this.categorias=[],this.impresoras=[],this.categoriasGruposPadre=[],this.categoriasGrupos=[],this.keyboardLayout=E.a.IDIOMA_TECLADO,this.esMovil=!1,this.loadCategorias=()=>{this.articuloSrvc.getCategorias({sede:+this.ls.get(E.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.categorias=t)})},this.loadImpresoras=()=>{this.articuloSrvc.getImpresoras({sede:+this.ls.get(E.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.impresoras=t)})},this.loadSubCategorias=t=>{this.resetCategoriaGrupo(),this.categoriaGrupo.categoria=t,this.articuloSrvc.getCategoriasGrupos({categoria:+t}).subscribe(t=>{t&&(this.categoriasGruposPadre=this.articuloSrvc.adaptCategoriaGrupoResponse(t),this.categoriasGrupos=JSON.parse(JSON.stringify(this.categoriasGruposPadre)))})},this.resetCategoriaGrupo=()=>{var t;this.categoriaGrupo={categoria_grupo:null,categoria:(null===(t=this.categoria)||void 0===t?void 0:t.categoria)||null,categoria_grupo_grupo:null,descripcion:null,receta:0,impresora:null,descuento:0,antecesores:null}},this.onSubmitSubCategoria=()=>{this.articuloSrvc.saveCategoriaGrupo(this.categoriaGrupo).subscribe(t=>{t.exito?(this.loadSubCategorias(+this.categoriaGrupo.categoria),this.resetCategoriaGrupo(),this.snackBar.open("Grabada con \xe9xito.","Sub - Categor\xeda",{duration:5e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Sub - Categor\xeda",{duration:5e3})})},this.resetCategoriaGrupo()}ngOnInit(){this.esMovil=this.ls.get(E.a.usrTokenVar).enmovil||!1,this.loadCategorias(),this.loadImpresoras()}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(v.b),B.Nb(Q.a),B.Nb(R.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-sub-categoria-producto"]],decls:37,vars:12,consts:[[1,"mat-elevation-z4"],["novalidate",""],["frmCategoriaGrupo","ngForm"],[1,"fullWidth"],["name","categoria","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","matInput","","placeholder","Descripcion de la sub - categor\xeda","name","descripcion","minlength","1","maxlength","45","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["type","text","matInput","","placeholder","Descripcion de la sub - categor\xeda","name","descripcion","minlength","1","maxlength","45","required","",3,"ngModel","ngModelChange",4,"ngIf"],["name","descuento",1,"fullWidth",3,"ngModel","ngModelChange"],["name","impresora","required","",3,"ngModel","ngModelChange"],["name","categoriaGrupoPadre",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button","color","warn",3,"click"],["color","accent","selected","",3,"click",4,"ngFor","ngForOf"],["color","warn","selected","",3,"click",4,"ngFor","ngForOf"],[3,"value"],["type","text","matInput","","placeholder","Descripcion de la sub - categor\xeda","name","descripcion","minlength","1","maxlength","45","required","",3,"matKeyboard","ngModel","ngModelChange"],["type","text","matInput","","placeholder","Descripcion de la sub - categor\xeda","name","descripcion","minlength","1","maxlength","45","required","",3,"ngModel","ngModelChange"],["color","accent","selected","",3,"click"],["color","warn","selected","",3,"click"]],template:function(t,e){if(1&t&&(B.Tb(0,"mat-card",0),B.Tb(1,"mat-card-title"),B.Tb(2,"h4"),B.Fc(3,"Sub - categor\xedas"),B.Sb(),B.Sb(),B.Tb(4,"mat-card-content"),B.Tb(5,"form",1,2),B.Tb(7,"mat-form-field",3),B.Tb(8,"mat-label"),B.Fc(9,"Categor\xeda"),B.Sb(),B.Tb(10,"mat-select",4),B.bc("ngModelChange",function(t){return e.categoriaGrupo.categoria=t}),B.Dc(11,Pi,2,2,"mat-option",5),B.Sb(),B.Sb(),B.Tb(12,"mat-form-field",3),B.Dc(13,Ni,1,2,"input",6),B.Dc(14,ji,1,1,"input",7),B.Sb(),B.Tb(15,"mat-checkbox",8),B.bc("ngModelChange",function(t){return+(e.categoriaGrupo.descuento=t)}),B.Fc(16,"\xbfAplica Descuento?"),B.Sb(),B.Tb(17,"mat-form-field",3),B.Tb(18,"mat-label"),B.Fc(19,"Impresora"),B.Sb(),B.Tb(20,"mat-select",9),B.bc("ngModelChange",function(t){return e.categoriaGrupo.impresora=t}),B.Dc(21,Ui,2,2,"mat-option",5),B.Sb(),B.Sb(),B.Tb(22,"mat-form-field",3),B.Tb(23,"mat-label"),B.Fc(24,"Anidar dentro de"),B.Sb(),B.Tb(25,"mat-select",10),B.bc("ngModelChange",function(t){return e.categoriaGrupo.categoria_grupo_grupo=t}),B.Dc(26,Gi,2,2,"mat-option",5),B.Sb(),B.Sb(),B.Tb(27,"div",11),B.Tb(28,"button",12),B.bc("click",function(){return e.onSubmitSubCategoria()}),B.Fc(29," Guardar "),B.Sb(),B.Tb(30,"button",13),B.bc("click",function(){return e.resetCategoriaGrupo()}),B.Fc(31," Cancelar "),B.Sb(),B.Sb(),B.Sb(),B.Ob(32,"hr"),B.Tb(33,"mat-chip-list"),B.Dc(34,qi,2,1,"mat-chip",14),B.Sb(),B.Tb(35,"mat-chip-list"),B.Dc(36,zi,2,1,"mat-chip",15),B.Sb(),B.Sb(),B.Sb()),2&t){const t=B.tc(6);B.Cb(10),B.lc("ngModel",e.categoriaGrupo.categoria),B.Cb(1),B.lc("ngForOf",e.categorias),B.Cb(2),B.lc("ngIf",!e.esMovil),B.Cb(1),B.lc("ngIf",e.esMovil),B.Cb(1),B.lc("ngModel",+e.categoriaGrupo.descuento),B.Cb(5),B.lc("ngModel",e.categoriaGrupo.impresora),B.Cb(1),B.lc("ngForOf",e.impresoras),B.Cb(4),B.lc("ngModel",e.categoriaGrupo.categoria_grupo_grupo),B.Cb(1),B.lc("ngForOf",e.categoriasGruposPadre),B.Cb(2),B.lc("disabled",!t.form.valid),B.Cb(6),B.lc("ngForOf",e.categorias),B.Cb(2),B.lc("ngForOf",e.categoriasGrupos)}},directives:[u.a,u.h,u.c,c.r,c.l,c.m,d.b,d.e,m.a,c.p,c.k,c.n,o.l,o.m,f.a,S.a,y.b,U.m,b.b,k.a,c.c,c.g,c.f,y.a],styles:[""]}),t})();var Wi=i("XiUz"),Vi=i("Iab2"),Ki=i("IHy4"),Qi=i("TOq3");function Xi(t,e){if(1&t&&(B.Tb(0,"mat-option",11),B.Fc(1),B.Sb()),2&t){const t=e.$implicit,i=B.fc();B.lc("value",t.sede)("disabled",+t.sede==+i.miSede),B.Cb(1),B.Hc(" ",t.nombre," ")}}function Ji(t,e){1&t&&B.Ob(0,"app-cargando")}let Zi=(()=>{class t{constructor(t,e,i,o,n){this.sedeSrvc=t,this.ls=e,this.snackBar=i,this.dialog=o,this.articuloSrvc=n,this.articulo=null,this.cargando=!1,this.sedes=[],this.params={},this.miSede=0,this.loadSedes=()=>{this.sedeSrvc.get().subscribe(t=>{t&&(this.sedes=t)})},this.onSubmit=()=>{this.dialog.open(L.a,{maxWidth:"400px",data:new L.b("Replicar art\xedculos","Este proceso replicar\xe1 TODOS los art\xedculos a las sedes seleccionadas. \xbfDesea continuar?","S\xed","No")}).afterClosed().subscribe(t=>{if(t){this.cargando=!0;const t={sedes:[],articulo:null};this.params.sede.forEach(e=>t.sedes.push({sede:+e})),this.articulo&&(t.articulo=+this.articulo.articulo),this.articuloSrvc.replicaArticulosEnSedes(t).subscribe(t=>{t.exito?this.snackBar.open(t.mensaje,"Replicar art\xedculos",{duration:3e3}):this.snackBar.open(`ERROR: ${t.mensaje}`,"Replicar art\xedculos",{duration:7e3}),this.params={},this.cargando=!1})}})}}ngOnInit(){this.miSede=this.ls.get(E.a.usrTokenVar).sede||0,this.loadSedes()}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(Ki.a),B.Nb(R.a),B.Nb(v.b),B.Nb(D.b),B.Nb(Q.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-replicar-asedes"]],inputs:{articulo:"articulo"},decls:18,vars:5,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmReplicaArticulosSedes","ngForm"],[1,"fullWidth"],["name","sede","multiple","","required","",3,"ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],[4,"ngIf"],[3,"value","disabled"]],template:function(t,e){if(1&t){const t=B.Ub();B.Tb(0,"div",0),B.Tb(1,"div",1),B.Tb(2,"mat-card",2),B.Tb(3,"mat-card-title"),B.Tb(4,"h4"),B.Fc(5),B.Sb(),B.Sb(),B.Tb(6,"mat-card-content"),B.Tb(7,"form",3,4),B.bc("ngSubmit",function(){return B.xc(t),B.tc(8).form.valid&&e.onSubmit()}),B.Tb(9,"mat-form-field",5),B.Tb(10,"mat-label"),B.Fc(11,"Sede"),B.Sb(),B.Tb(12,"mat-select",6),B.bc("ngModelChange",function(t){return e.params.sede=t}),B.Dc(13,Xi,2,3,"mat-option",7),B.Sb(),B.Sb(),B.Tb(14,"div",8),B.Tb(15,"button",9),B.Fc(16," Replicar "),B.Sb(),B.Sb(),B.Sb(),B.Dc(17,Ji,1,0,"app-cargando",10),B.Sb(),B.Sb(),B.Sb(),B.Sb()}if(2&t){const t=B.tc(8);B.Cb(5),B.Hc("Replicar ",(null==e.articulo?null:e.articulo.descripcion)||"TODOS los art\xedculos"," a las sedes"),B.Cb(7),B.lc("ngModel",e.params.sede),B.Cb(1),B.lc("ngForOf",e.sedes),B.Cb(2),B.lc("disabled",!t.form.valid||e.cargando),B.Cb(2),B.lc("ngIf",e.cargando)}},directives:[u.a,u.h,u.c,c.r,c.l,c.m,d.b,d.e,m.a,c.p,c.k,c.n,o.l,S.a,o.m,U.m,Qi.a],styles:[""]}),t})(),Yi=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.articulo=null}ngOnInit(){this.data.articulo&&(this.articulo=this.data.articulo)}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(D.f),B.Nb(D.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-replicar-a-sedes-dialog"]],decls:5,vars:1,consts:[["mat-dialog-content",""],[3,"articulo"],["mat-dialog-actions","","align","end"],["mat-raised-button","","type","button","color","accent",3,"click"]],template:function(t,e){1&t&&(B.Tb(0,"div",0),B.Ob(1,"app-replicar-asedes",1),B.Sb(),B.Tb(2,"div",2),B.Tb(3,"button",3),B.bc("click",function(){return e.dialogRef.close()}),B.Fc(4," Terminar "),B.Sb(),B.Sb()),2&t&&(B.Cb(1),B.lc("articulo",e.articulo))},directives:[D.d,Zi,D.c,S.a],styles:[""]}),t})();var to=i("pJXi"),eo=i("1wH6"),io=i("FHMA");function oo(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",5),B.bc("click",function(){return B.xc(t),B.fc().showArticuloForm=!0}),B.Tb(1,"mat-icon",6),B.Fc(2,"expand_more"),B.Sb(),B.Sb()}}function no(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",5),B.bc("click",function(){return B.xc(t),B.fc().showArticuloForm=!1}),B.Tb(1,"mat-icon",6),B.Fc(2,"expand_less"),B.Sb(),B.Sb()}}function co(t,e){if(1&t&&(B.Tb(0,"mat-chip",35),B.Fc(1),B.Sb()),2&t){const t=B.fc(2);B.Cb(1),B.Hc(" ",t.categoria.descripcion," ")}}function ao(t,e){if(1&t&&(B.Tb(0,"mat-chip",36),B.Fc(1),B.Sb()),2&t){const t=B.fc(2);B.Cb(1),B.Hc(" ",t.subcategoria.descripcion," ")}}function ro(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",37),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).articulo.descripcion=e}),B.Sb()}if(2&t){const t=B.fc(2);B.lc("matKeyboard",t.keyboardLayout)("ngModel",t.articulo.descripcion)}}function so(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",38),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).articulo.descripcion=e}),B.Sb()}if(2&t){const t=B.fc(2);B.lc("ngModel",t.articulo.descripcion)}}function lo(t,e){if(1&t&&(B.Tb(0,"mat-option",39),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.presentacion),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function bo(t,e){if(1&t&&(B.Tb(0,"mat-option",39),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.presentacion),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function uo(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",40),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).articulo.codigo=e}),B.Sb()}if(2&t){const t=B.fc(2);B.lc("matKeyboard",t.keyboardLayout)("ngModel",t.articulo.codigo)}}function go(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",41),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).articulo.codigo=e}),B.Sb()}if(2&t){const t=B.fc(2);B.lc("ngModel",t.articulo.codigo)}}function ho(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",42),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).articulo.shopify_id=e}),B.Sb()}if(2&t){const t=B.fc(2);B.lc("matKeyboard",t.keyboardLayout)("ngModel",t.articulo.shopify_id)}}function po(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",43),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).articulo.shopify_id=e}),B.Sb()}if(2&t){const t=B.fc(2);B.lc("ngModel",t.articulo.shopify_id)}}function mo(t,e){if(1&t&&(B.Tb(0,"mat-option",39),B.Fc(1),B.gc(2,"number"),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.impuesto_especial),B.Cb(1),B.Ic(" ",t.descripcion," (",B.ic(2,3,t.porcentaje,"1.2-2"),"%) ")}}function fo(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",11),B.Tb(1,"input",44),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).articulo.rendimiento=e}),B.Sb(),B.Sb()}if(2&t){const t=B.fc(2);B.Cb(1),B.lc("ngModel",t.articulo.rendimiento)}}function So(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",11),B.Tb(1,"input",45),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).articulo.cantidad_minima=e}),B.Sb(),B.Sb()}if(2&t){const t=B.fc(2);B.Cb(1),B.lc("ngModel",t.articulo.cantidad_minima)}}function vo(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",11),B.Tb(1,"input",46),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).articulo.cantidad_maxima=e}),B.Sb(),B.Sb()}if(2&t){const t=B.fc(2);B.Cb(1),B.lc("ngModel",t.articulo.cantidad_maxima)}}function Co(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",47),B.bc("click",function(){return B.xc(t),B.fc(2).replicarASedes()}),B.Fc(1," Replicar a sedes "),B.Sb()}}function To(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",48),B.bc("click",function(){return B.xc(t),B.fc(2).resetArticulo()}),B.Fc(1," Nuevo "),B.Sb()}}function _o(t,e){if(1&t){const t=B.Ub();B.Tb(0,"form",7,8),B.bc("ngSubmit",function(){B.xc(t);const e=B.tc(1),i=B.fc();return e.form.valid&&i.onSubmit()}),B.Tb(2,"mat-chip-list"),B.Dc(3,co,2,1,"mat-chip",9),B.Dc(4,ao,2,1,"mat-chip",10),B.Sb(),B.Tb(5,"mat-form-field",11),B.Dc(6,ro,1,2,"input",12),B.Dc(7,so,1,1,"input",13),B.Sb(),B.Tb(8,"mat-form-field",11),B.Tb(9,"input",14),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().articulo.precio=e}),B.Sb(),B.Sb(),B.Tb(10,"mat-form-field",11),B.Tb(11,"mat-label"),B.Fc(12,"Presentaci\xf3n Venta"),B.Sb(),B.Tb(13,"mat-select",15),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().articulo.presentacion=e}),B.Dc(14,lo,2,2,"mat-option",16),B.Sb(),B.Sb(),B.Tb(15,"mat-form-field",11),B.Tb(16,"mat-label"),B.Fc(17,"Presentaci\xf3n Reportes"),B.Sb(),B.Tb(18,"mat-select",17),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().articulo.presentacion_reporte=e}),B.Dc(19,bo,2,2,"mat-option",16),B.Sb(),B.Sb(),B.Tb(20,"mat-form-field",11),B.Dc(21,uo,1,2,"input",18),B.Dc(22,go,1,1,"input",19),B.Sb(),B.Tb(23,"mat-form-field",11),B.Dc(24,ho,1,2,"input",20),B.Dc(25,po,1,1,"input",21),B.Sb(),B.Tb(26,"mat-form-field",11),B.Tb(27,"mat-label"),B.Fc(28,"Impuesto Especial"),B.Sb(),B.Tb(29,"mat-select",22),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().articulo.impuesto_especial=e}),B.Dc(30,mo,3,6,"mat-option",16),B.Sb(),B.Sb(),B.Dc(31,fo,2,1,"mat-form-field",23),B.Dc(32,So,2,1,"mat-form-field",23),B.Dc(33,vo,2,1,"mat-form-field",23),B.Tb(34,"div",24),B.Tb(35,"div",25),B.Tb(36,"mat-checkbox",26),B.bc("ngModelChange",function(e){return B.xc(t),+(B.fc().articulo.produccion=e)}),B.Fc(37,"\xbfEs produccion?"),B.Sb(),B.Sb(),B.Tb(38,"div",25),B.Tb(39,"mat-checkbox",27),B.bc("ngModelChange",function(e){return B.xc(t),+(B.fc().articulo.mostrar_pos=e)}),B.Fc(40,"Mostrar en POS"),B.Sb(),B.Sb(),B.Tb(41,"div",25),B.Tb(42,"mat-checkbox",28),B.bc("ngModelChange",function(e){return B.xc(t),+(B.fc().articulo.combo=e)}),B.Fc(43,"Combo"),B.Sb(),B.Sb(),B.Tb(44,"div",25),B.Tb(45,"mat-checkbox",29),B.bc("ngModelChange",function(e){return B.xc(t),+(B.fc().articulo.multiple=e)}),B.Fc(46,"Opcion multiple"),B.Sb(),B.Sb(),B.Sb(),B.Tb(47,"div",24),B.Tb(48,"div",25),B.Tb(49,"mat-checkbox",30),B.bc("ngModelChange",function(e){return B.xc(t),+(B.fc().articulo.mostrar_inventario=e)}),B.Fc(50,"Mostrar en Inventario"),B.Sb(),B.Sb(),B.Sb(),B.Tb(51,"div",31),B.Tb(52,"button",32),B.Fc(53," Guardar "),B.Sb(),B.Dc(54,Co,2,0,"button",33),B.Dc(55,To,2,0,"button",34),B.Sb(),B.Sb()}if(2&t){const t=B.tc(1),e=B.fc();B.Cb(3),B.lc("ngIf",e.categoria),B.Cb(1),B.lc("ngIf",e.subcategoria),B.Cb(2),B.lc("ngIf",!e.esMovil),B.Cb(1),B.lc("ngIf",e.esMovil),B.Cb(2),B.lc("ngModel",e.articulo.precio),B.Cb(4),B.lc("ngModel",e.articulo.presentacion),B.Cb(1),B.lc("ngForOf",e.presentaciones),B.Cb(4),B.lc("ngModel",e.articulo.presentacion_reporte),B.Cb(1),B.lc("ngForOf",e.presentaciones),B.Cb(2),B.lc("ngIf",!e.esMovil),B.Cb(1),B.lc("ngIf",e.esMovil),B.Cb(2),B.lc("ngIf",!e.esMovil),B.Cb(1),B.lc("ngIf",e.esMovil),B.Cb(4),B.lc("ngModel",e.articulo.impuesto_especial),B.Cb(1),B.lc("ngForOf",e.impuestosEspeciales),B.Cb(1),B.lc("ngIf",1==+e.articulo.produccion),B.Cb(1),B.lc("ngIf",1==+e.articulo.multiple||+e.articulo.combo),B.Cb(1),B.lc("ngIf",1==+e.articulo.multiple||+e.articulo.combo),B.Cb(3),B.lc("ngModel",+e.articulo.produccion),B.Cb(3),B.lc("ngModel",+e.articulo.mostrar_pos),B.Cb(3),B.lc("ngModel",+e.articulo.combo),B.Cb(3),B.lc("ngModel",+e.articulo.multiple),B.Cb(4),B.lc("ngModel",+e.articulo.mostrar_inventario),B.Cb(3),B.lc("disabled",!t.form.valid||!e.articulo.categoria_grupo),B.Cb(2),B.lc("ngIf",e.articulo.articulo),B.Cb(1),B.lc("ngIf",e.articulo.articulo)}}function xo(t,e){1&t&&B.Ob(0,"hr")}function Do(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",5),B.bc("click",function(){return B.xc(t),B.fc(2).showDetalleForm=!0}),B.Tb(1,"mat-icon",6),B.Fc(2,"expand_more"),B.Sb(),B.Sb()}}function Mo(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",5),B.bc("click",function(){return B.xc(t),B.fc(2).showDetalleForm=!1}),B.Tb(1,"mat-icon",6),B.Fc(2,"expand_less"),B.Sb(),B.Sb()}}function Io(t,e){if(1&t&&(B.Tb(0,"mat-option",39),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Fo(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",11),B.Tb(1,"input",59),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(3).receta.precio=e}),B.Sb(),B.Sb()}if(2&t){const t=B.fc(3);B.Cb(1),B.lc("ngModel",t.receta.precio)}}function yo(t,e){if(1&t&&(B.Tb(0,"mat-option",39),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.medida),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function ko(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",48),B.bc("click",function(){return B.xc(t),B.fc(3).resetReceta()}),B.Fc(1," Nuevo "),B.Sb()}}function Oo(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",48),B.bc("click",function(){return B.xc(t),B.fc(3).imprimirReceta()}),B.Fc(1," Imprimir "),B.Sb()}}const wo=function(){return{standalone:!0}};function Eo(t,e){if(1&t){const t=B.Ub();B.Tb(0,"form",7,51),B.bc("ngSubmit",function(){B.xc(t);const e=B.tc(1),i=B.fc(2);return e.form.valid&&i.onSubmitDetail()}),B.Tb(2,"mat-form-field",11),B.Tb(3,"mat-label"),B.Fc(4,"Art\xedculo"),B.Sb(),B.Tb(5,"input",52),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).txtArticuloSelected=e})("keyup",function(){B.xc(t);const e=B.fc(2);return e.filtrarArticulos(e.txtArticuloSelected)}),B.Sb(),B.Tb(6,"mat-autocomplete",53,54),B.Dc(8,Io,2,2,"mat-option",16),B.Sb(),B.Sb(),B.Tb(9,"mat-form-field",11),B.Tb(10,"input",55),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).receta.cantidad=e}),B.Sb(),B.Sb(),B.Dc(11,Fo,2,1,"mat-form-field",23),B.Tb(12,"mat-form-field",11),B.Tb(13,"mat-label"),B.Fc(14,"Unidad de medida"),B.Sb(),B.Tb(15,"mat-select",56),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).receta.medida=e}),B.Dc(16,yo,2,2,"mat-option",16),B.Sb(),B.Sb(),B.Tb(17,"div",24),B.Tb(18,"div",25),B.Tb(19,"mat-checkbox",57),B.bc("ngModelChange",function(e){return B.xc(t),+(B.fc(2).receta.racionable=e)}),B.Fc(20,"\xbfEs racionable?"),B.Sb(),B.Sb(),B.Tb(21,"div",25),B.Tb(22,"mat-checkbox",58),B.bc("ngModelChange",function(e){return B.xc(t),+(B.fc(2).receta.precio_extra=e)}),B.Fc(23," Precio Extra "),B.Sb(),B.Sb(),B.Sb(),B.Tb(24,"div",31),B.Tb(25,"button",32),B.Fc(26," Guardar "),B.Sb(),B.Dc(27,ko,2,0,"button",34),B.Dc(28,Oo,2,0,"button",34),B.Sb(),B.Sb()}if(2&t){const t=B.tc(1),e=B.tc(7),i=B.fc(2);B.Cb(5),B.lc("ngModel",i.txtArticuloSelected)("ngModelOptions",B.nc(14,wo))("matAutocomplete",e),B.Cb(1),B.lc("displayWith",i.displayArticulo),B.Cb(2),B.lc("ngForOf",i.filteredArticulos),B.Cb(2),B.lc("ngModel",i.receta.cantidad),B.Cb(1),B.lc("ngIf",i.receta.precio_extra&&i.receta.precio_extra>0),B.Cb(4),B.lc("ngModel",i.receta.medida),B.Cb(1),B.lc("ngForOf",i.medidas),B.Cb(3),B.lc("ngModel",+i.receta.racionable),B.Cb(3),B.lc("ngModel",+i.receta.precio_extra),B.Cb(3),B.lc("disabled",!t.form.valid),B.Cb(2),B.lc("ngIf",i.receta.articulo_detalle),B.Cb(1),B.lc("ngIf",i.recetas.length>0)}}function Ao(t,e){1&t&&B.Ob(0,"hr")}function Bo(t,e){1&t&&(B.Tb(0,"th",71),B.Fc(1,"Art\xedculo"),B.Sb())}function Ro(t,e){if(1&t&&(B.Tb(0,"td",72),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Gc(t.articulo.descripcion)}}function Ho(t,e){1&t&&(B.Tb(0,"th",73),B.Fc(1,"Cantidad"),B.Sb())}function $o(t,e){if(1&t&&(B.Tb(0,"td",74),B.Fc(1),B.gc(2,"number"),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Gc(B.ic(2,1,t.cantidad,"1.2-2"))}}function Po(t,e){1&t&&(B.Tb(0,"th",73),B.Fc(1,"Unida de medida"),B.Sb())}function No(t,e){if(1&t&&(B.Tb(0,"td",74),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Gc(t.medida.descripcion)}}function jo(t,e){1&t&&(B.Tb(0,"th",71),B.Fc(1,"\xa0"),B.Sb())}function Uo(t,e){if(1&t){const t=B.Ub();B.Tb(0,"td",72),B.Tb(1,"button",47),B.bc("click",function(){B.xc(t);const i=e.$implicit;return B.fc(3).getReceta(i.receta,i.articulo_detalle)}),B.Fc(2," Editar "),B.Sb(),B.Tb(3,"button",48),B.bc("click",function(){B.xc(t);const i=e.$implicit;return B.fc(3).eliminaReceta(i)}),B.Fc(4," Eliminar "),B.Sb(),B.Sb()}}function Go(t,e){1&t&&B.Ob(0,"tr",75)}function qo(t,e){1&t&&B.Ob(0,"tr",76)}function zo(t,e){if(1&t&&(B.Tb(0,"table",60),B.Rb(1,61),B.Dc(2,Bo,2,0,"th",62),B.Dc(3,Ro,2,1,"td",63),B.Qb(),B.Rb(4,64),B.Dc(5,Ho,2,0,"th",65),B.Dc(6,$o,3,4,"td",66),B.Qb(),B.Rb(7,67),B.Dc(8,Po,2,0,"th",65),B.Dc(9,No,2,1,"td",66),B.Qb(),B.Rb(10,68),B.Dc(11,jo,2,0,"th",62),B.Dc(12,Uo,5,0,"td",63),B.Qb(),B.Dc(13,Go,1,0,"tr",69),B.Dc(14,qo,1,0,"tr",70),B.Sb()),2&t){const t=B.fc(2);B.lc("dataSource",t.dataSource),B.Cb(13),B.lc("matHeaderRowDef",t.displayedColumns),B.Cb(1),B.lc("matRowDefColumns",t.displayedColumns)}}function Lo(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-card",0),B.Tb(1,"mat-card-title"),B.Tb(2,"h4"),B.Fc(3),B.Dc(4,Do,3,0,"button",1),B.Dc(5,Mo,3,0,"button",1),B.Sb(),B.Sb(),B.Tb(6,"mat-card-content"),B.Dc(7,Eo,29,15,"form",2),B.Dc(8,Ao,1,0,"hr",3),B.Tb(9,"mat-form-field",11),B.Tb(10,"input",49),B.bc("keyup",function(e){return B.xc(t),B.fc().applyFilter(e.target.value)}),B.Sb(),B.Sb(),B.Dc(11,zo,15,3,"table",50),B.Sb(),B.Sb()}if(2&t){const t=B.fc();B.Cb(3),B.Hc(" Detalle del art\xedculo ",t.articulo.descripcion," "),B.Cb(1),B.lc("ngIf",!t.showDetalleForm),B.Cb(1),B.lc("ngIf",t.showDetalleForm),B.Cb(2),B.lc("ngIf",t.showDetalleForm),B.Cb(1),B.lc("ngIf",t.recetas.length>0),B.Cb(3),B.lc("ngIf",t.recetas.length>0)}}let Wo=(()=>{class t{constructor(t,e,i,o,n,c,a,r){this.dialog=t,this.snackBar=e,this.ls=i,this.articuloSrvc=o,this.medidaSrvc=n,this.presentacionSrvc=c,this.impuestoEspecialSrvc=a,this.rptSrvc=r,this.categoria=null,this.subcategoria=null,this.articuloSvd=new B.o,this.titulo="Receta",this.showArticuloForm=!0,this.medidas=[],this.presentaciones=[],this.articulos=[],this.filteredArticulos=[],this.recetas=[],this.impuestosEspeciales=[],this.showDetalleForm=!0,this.displayedColumns=["articulo","cantidad","medida","editItem"],this.keyboardLayout=E.a.IDIOMA_TECLADO,this.esMovil=!1,this.txtArticuloSelected=void 0,this.resetArticulo=()=>{this.articulo={articulo:null,categoria_grupo:this.articulo.categoria_grupo,presentacion:null,descripcion:null,precio:null,bien_servicio:"B",produccion:0,mostrar_pos:1,presentacion_reporte:null,impuesto_especial:null,shopify_id:null,multiple:0,cantidad_minima:1,cantidad_maxima:1,combo:0,rendimiento:0,mostrar_inventario:0},this.recetas=[],this.resetReceta()},this.setArticuloCategoriaGrupo=t=>this.articulo.categoria_grupo=+t,this.onSubmit=()=>{this.articuloSrvc.saveArticulo(this.articulo).subscribe(t=>{t.exito?(this.articuloSvd.emit(),this.resetArticulo(),this.articulo=t.articulo,this.loadRecetas(this.articulo.articulo),this.loadArticulos(),this.snackBar.open("Articulo guardado con \xe9xito...","Articulo",{duration:3e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Articulo",{duration:3e3})})},this.loadMedidas=()=>{this.medidaSrvc.get().subscribe(t=>{t&&(this.medidas=t)})},this.loadPresentaciones=()=>{this.presentacionSrvc.get().subscribe(t=>{t&&(this.presentaciones=t)})},this.loadArticulos=()=>{this.articuloSrvc.getArticulos().subscribe(t=>{t&&(this.articulos=t)})},this.loadImpuestosEspeciales=()=>{this.impuestoEspecialSrvc.get().subscribe(t=>{t&&(this.impuestosEspeciales=t)})},this.displayArticulo=t=>{if(t)return this.receta.articulo=t.articulo,t.descripcion},this.filtrarArticulos=t=>{if(t&&"string"==typeof t){const e=t.toLowerCase();this.filteredArticulos=this.articulos.filter(t=>t.descripcion.toLowerCase().includes(e))}else this.filteredArticulos=this.articulos},this.resetReceta=()=>{this.receta={articulo_detalle:null,receta:this.articulo.articulo||0,racionable:0,articulo:null,cantidad:1,medida:null,anulado:0,precio_extra:0,precio:0},this.txtArticuloSelected=void 0,this.updateTableDataSource()},this.loadRecetas=(t=+this.articulo.articulo)=>{this.articuloSrvc.getArticuloDetalle(+t,{receta:+t}).subscribe(t=>{t&&(this.recetas=t,this.updateTableDataSource())})},this.getReceta=(t=+this.articulo.articulo,e)=>{this.articuloSrvc.getArticuloDetalle(t,{articulo_detalle:e}).subscribe(t=>{t&&(this.receta={articulo_detalle:t[0].articulo_detalle,receta:t[0].receta.articulo,racionable:t[0].articulo.articulo,articulo:t[0].articulo.articulo,cantidad:+t[0].cantidad,medida:t[0].medida.medida,anulado:t[0].anulado||0,precio_extra:t[0].precio_extra||0,precio:+t[0].precio},this.txtArticuloSelected=t[0].articulo,this.showDetalleForm=!0)})},this.eliminaReceta=t=>{this.dialog.open(L.a,{maxWidth:"400px",data:new L.b("Eliminar detalle",`\xbfDesea eliminar '${t.cantidad} de ${t.articulo.descripcion}' de la receta?`,"S\xed","No")}).afterClosed().subscribe(e=>{e&&(t.anulado=1,t.articulo=t.articulo.articulo,this.articuloSrvc.saveArticuloDetalle(t).subscribe(t=>{this.loadRecetas(),this.resetReceta()}))})},this.onSubmitDetail=()=>{this.receta.receta=this.articulo.articulo,this.articuloSrvc.saveArticuloDetalle(this.receta).subscribe(t=>{t&&(t.exito?(this.loadRecetas(),this.resetReceta()):this.snackBar.open(`ERROR: ${t.mensaje}`,"Articulo",{duration:3e3}))})},this.imprimirReceta=()=>{this.rptSrvc.imprimirReceta(this.articulo.articulo).subscribe(t=>{if(t){const e=new Blob([t],{type:"application/pdf"});Object(Vi.saveAs)(e,`${this.titulo}_${this.articulo.descripcion}.pdf`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})},this.updateTableDataSource=()=>{this.dataSource=new p.k(this.recetas),this.dataSource.filterPredicate=(t,e)=>t.articulo.descripcion.toLowerCase().includes(e)},this.replicarASedes=()=>{this.dialog.open(Yi,{width:"50%",data:{articulo:this.articulo}}).afterClosed().subscribe(t=>{})},this.applyFilter=t=>{this.dataSource.filter=t.toLocaleLowerCase()}}ngOnInit(){this.esMovil=this.ls.get(E.a.usrTokenVar).enmovil||!1,this.resetArticulo(),this.loadMedidas(),this.loadArticulos(),this.loadPresentaciones(),this.loadImpuestosEspeciales()}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(D.b),B.Nb(v.b),B.Nb(R.a),B.Nb(Q.a),B.Nb(to.a),B.Nb(X.a),B.Nb(eo.a),B.Nb(io.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-form-producto"]],inputs:{articulo:"articulo",categoria:"categoria",subcategoria:"subcategoria"},outputs:{articuloSvd:"articuloSvd"},decls:10,vars:6,consts:[[1,"mat-elevation-z4","fullWidth"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmArticulo","ngForm"],["color","accent","class","catSubCat","selected","",4,"ngIf"],["color","warn","class","catSubCat","selected","",4,"ngIf"],[1,"fullWidth"],["matInput","","type","text","placeholder","Descripcion","name","descripcion","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text","placeholder","Descripcion","name","descripcion","required","",3,"ngModel","ngModelChange",4,"ngIf"],["matInput","","type","number","placeholder","Precio","name","precio","required","",3,"ngModel","ngModelChange"],["name","presentacion","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","presentacion_reporte","required","",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","C\xf3digo","name","codigo","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text","placeholder","C\xf3digo","name","codigo","required","",3,"ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text","placeholder","Shopify ID","name","shopify_id",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text","placeholder","Shopify ID","name","shopify_id",3,"ngModel","ngModelChange",4,"ngIf"],["name","impuesto_especial",3,"ngModel","ngModelChange"],["class","fullWidth",4,"ngIf"],[1,"row"],[1,"col","m3","s3"],["name","produccion",1,"example-margin",3,"ngModel","ngModelChange"],["name","mostrar_pos",1,"example-margin",3,"ngModel","ngModelChange"],["name","combo",1,"example-margin",3,"ngModel","ngModelChange"],["name","multiple",1,"example-margin",3,"ngModel","ngModelChange"],["name","mostrar_inventario",1,"example-margin",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["color","accent","selected","",1,"catSubCat"],["color","warn","selected","",1,"catSubCat"],["matInput","","type","text","placeholder","Descripcion","name","descripcion","required","",3,"matKeyboard","ngModel","ngModelChange"],["matInput","","type","text","placeholder","Descripcion","name","descripcion","required","",3,"ngModel","ngModelChange"],[3,"value"],["matInput","","type","text","placeholder","C\xf3digo","name","codigo","required","",3,"matKeyboard","ngModel","ngModelChange"],["matInput","","type","text","placeholder","C\xf3digo","name","codigo","required","",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","Shopify ID","name","shopify_id",3,"matKeyboard","ngModel","ngModelChange"],["matInput","","type","text","placeholder","Shopify ID","name","shopify_id",3,"ngModel","ngModelChange"],["matInput","","type","number","step","0.05","placeholder","Rendimiento","name","rendimiento","required","",3,"ngModel","ngModelChange"],["matInput","","type","number","step","1","placeholder","Cantidad minima","name","minima","required","",3,"ngModel","ngModelChange"],["matInput","","type","number","step","1","placeholder","Cantidad maxima","name","maxima","required","",3,"ngModel","ngModelChange"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"click"],["mat-raised-button","","type","button","color","accent",3,"click"],["matInput","","placeholder","Buscar",3,"keyup"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleArticulo","ngForm"],["type","text","placeholder","Art\xedculo","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith"],["autoArticulos","matAutocomplete"],["matInput","","placeholder","Cantidad","name","cantidad","required","",3,"ngModel","ngModelChange"],["name","medida","required","",3,"ngModel","ngModelChange"],["name","racionable",1,"fullWidth",3,"ngModel","ngModelChange"],["name","extra",1,"fullWidth",3,"ngModel","ngModelChange"],["matInput","","placeholder","Precio","name","precio","required","",3,"ngModel","ngModelChange"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","articulo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","cantidad"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","medida"],["matColumnDef","editItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(B.Tb(0,"mat-card",0),B.Tb(1,"mat-card-title"),B.Tb(2,"h4"),B.Fc(3),B.Dc(4,oo,3,0,"button",1),B.Dc(5,no,3,0,"button",1),B.Sb(),B.Sb(),B.Tb(6,"mat-card-content"),B.Dc(7,_o,56,26,"form",2),B.Sb(),B.Sb(),B.Dc(8,xo,1,0,"hr",3),B.Dc(9,Lo,12,6,"mat-card",4)),2&t&&(B.Cb(3),B.Hc(" Art\xedculo ",e.articulo.articulo?e.articulo.descripcion:""," "),B.Cb(1),B.lc("ngIf",!e.showArticuloForm),B.Cb(1),B.lc("ngIf",e.showArticuloForm),B.Cb(2),B.lc("ngIf",e.showArticuloForm),B.Cb(1),B.lc("ngIf",e.articulo.articulo),B.Cb(1),B.lc("ngIf",e.articulo.articulo))},directives:[u.a,u.h,o.m,u.c,S.a,l.a,c.r,c.l,c.m,y.b,d.b,b.b,c.o,c.c,c.p,c.k,c.n,d.e,m.a,o.l,f.a,y.a,k.a,U.m,F.c,F.a,p.j,p.c,p.e,p.b,p.g,p.i,p.d,p.a,p.f,p.h],pipes:[o.f],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}.catSubCat[_ngcontent-%COMP%]{margin-bottom:10px}"]}),t})();const Vo=["frmProducto"];function Ko(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-chip",15),B.bc("click",function(){B.xc(t);const i=e.$implicit,o=B.fc();return o.categoria=i,o.categoriaGrupo=null,o.loadSubCategorias(i.categoria)}),B.Fc(1),B.Sb()}if(2&t){const t=e.$implicit;B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Qo(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-chip",18),B.bc("click",function(){B.xc(t);const i=e.$implicit,o=B.fc(2);return o.categoriaGrupo=i,o.loadSubCategorias(o.categoria.categoria,i.categoria_grupo)}),B.Fc(1),B.Sb()}if(2&t){const t=e.$implicit;B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Xo(t,e){if(1&t&&(B.Tb(0,"mat-chip-list",16),B.Dc(1,Qo,2,1,"mat-chip",17),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.lc("ngForOf",t)}}function Jo(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",19),B.bc("click",function(){B.xc(t);const i=e.$implicit;return B.fc().setArticulo(i)}),B.Fc(1),B.Sb()}if(2&t){const t=e.$implicit;B.Cb(1),B.Gc(t.descripcion)}}const Zo=function(){return{standalone:!0}};let Yo=(()=>{class t{constructor(t,e){this.articuloSrvc=t,this.ls=e,this.categorias=[],this.categoriasGrupos=[],this.listasCategoriasGrupo=[],this.articulos=[],this.articulosFull=[],this.txtFiltro="",this.setArticulo=t=>{this.articuloSrvc.getArticulo({articulo:t.articulo}).subscribe(t=>{if(t&&t.length>0){const e=t[0];this.articulo={articulo:+e.articulo,categoria_grupo:+e.categoria_grupo.categoria_grupo,presentacion:e.presentacion.presentacion,descripcion:e.descripcion,precio:+e.precio,codigo:e.codigo,produccion:e.produccion,presentacion_reporte:e.presentacion_reporte.presentacion,mostrar_pos:e.mostrar_pos,impuesto_especial:e.impuesto_especial,shopify_id:e.shopify_id,multiple:e.multiple,cantidad_minima:e.cantidad_minima,cantidad_maxima:e.cantidad_maxima,combo:e.combo,rendimiento:e.rendimiento,mostrar_inventario:e.mostrar_inventario},this.frmProductoComponent.loadRecetas(+this.articulo.articulo),this.frmProductoComponent.resetReceta()}})},this.setArticuloCategoriaGrupo=t=>{this.articulo.categoria_grupo=+t,this.frmProductoComponent.setArticuloCategoriaGrupo(+t)},this.refreshArticuloList=t=>{this.loadArticulos()},this.loadCategorias=()=>{this.articuloSrvc.getCategorias({sede:+this.ls.get(E.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.categorias=t)})},this.loadSubCategorias=(t,e=null)=>{const i={categoria:+t,categoria_grupo_grupo:null};e?(this.frmProductoComponent.articulo.categoria_grupo=e,i.categoria_grupo_grupo=e):(this.frmProductoComponent.articulo.categoria_grupo=null,delete i.categoria_grupo_grupo,this.listasCategoriasGrupo=[]),this.articuloSrvc.getCategoriasGrupos(i).subscribe(t=>{t&&t.length>0?this.listasCategoriasGrupo.push(this.articuloSrvc.adaptCategoriaGrupoResponse(t)):e&&this.loadArticulos(e)})},this.loadArticulos=(t=null)=>{const e={categoria_grupo:null};t?e.categoria_grupo=t:delete e.categoria_grupo,this.articuloSrvc.getArticulos(e).subscribe(t=>{t&&(this.articulosFull=t,this.articulos=JSON.parse(JSON.stringify(this.articulosFull)))})},this.articulo={articulo:null,categoria_grupo:null,presentacion:null,descripcion:null,precio:null,bien_servicio:"B",produccion:0,presentacion_reporte:null,mostrar_pos:0,impuesto_especial:null,rendimiento:1,mostrar_inventario:0}}ngOnInit(){this.loadCategorias(),this.loadArticulos()}applyFilter(){this.articulos=this.txtFiltro.length>0?Object(E.b)(this.articulosFull,this.txtFiltro):JSON.parse(JSON.stringify(this.articulosFull))}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(Q.a),B.Nb(R.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-producto"]],viewQuery:function(t,e){if(1&t&&B.Kc(Vo,1),2&t){let t;B.sc(t=B.cc())&&(e.frmProductoComponent=t.first)}},decls:19,vars:9,consts:[["label","Categorias"],[3,"categoriaGrupoSvd","onChangeSubCategoriaEv"],["label","Sub-categorias"],["label","Art\xedculos"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","start start"],["fxFlex","100%"],["color","accent","selected","",3,"click",4,"ngFor","ngForOf"],["class","divSubCategorias",4,"ngFor","ngForOf"],["fxFlex","40%","fxFlex.xs","100%","fxFlex.sm","100%","fxLayout","row wrap","fxLayoutGap","8px grid","fxLayoutAlign","start start",1,"divArticulos"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],["mat-list-item","","class","accion-comanda mat-elevation-z4",3,"click",4,"ngFor","ngForOf"],["fxFlex","60%","fxFlex.xs","100%","fxFlex.sm","100%",1,"divArticulos"],[3,"categoria","subcategoria","articulo","articuloSvd"],["frmProducto",""],["color","accent","selected","",3,"click"],[1,"divSubCategorias"],["color","warn","selected","",3,"click",4,"ngFor","ngForOf"],["color","warn","selected","",3,"click"],["mat-list-item","",1,"accion-comanda","mat-elevation-z4",3,"click"]],template:function(t,e){1&t&&(B.Tb(0,"mat-tab-group"),B.Tb(1,"mat-tab",0),B.Tb(2,"app-categoria-producto",1),B.bc("categoriaGrupoSvd",function(t){return e.refreshArticuloList(t)})("onChangeSubCategoriaEv",function(t){return e.setArticuloCategoriaGrupo(t)}),B.Sb(),B.Sb(),B.Tb(3,"mat-tab",2),B.Ob(4,"app-sub-categoria-producto"),B.Sb(),B.Tb(5,"mat-tab",3),B.Tb(6,"div",4),B.Tb(7,"div",5),B.Tb(8,"mat-chip-list"),B.Dc(9,Ko,2,1,"mat-chip",6),B.Sb(),B.Dc(10,Xo,2,1,"mat-chip-list",7),B.Sb(),B.Tb(11,"div",8),B.Tb(12,"mat-form-field",9),B.Tb(13,"input",10),B.bc("keyup",function(){return e.applyFilter()})("ngModelChange",function(t){return e.txtFiltro=t}),B.Sb(),B.Sb(),B.Tb(14,"mat-action-list"),B.Dc(15,Jo,2,1,"button",11),B.Sb(),B.Sb(),B.Tb(16,"div",12),B.Tb(17,"app-form-producto",13,14),B.bc("articuloSvd",function(t){return e.refreshArticuloList(t)}),B.Sb(),B.Sb(),B.Sb(),B.Sb(),B.Sb()),2&t&&(B.Cb(9),B.lc("ngForOf",e.categorias),B.Cb(1),B.lc("ngForOf",e.listasCategoriasGrupo),B.Cb(3),B.lc("ngModel",e.txtFiltro)("ngModelOptions",B.nc(8,Zo)),B.Cb(2),B.lc("ngForOf",e.articulos),B.Cb(2),B.lc("categoria",e.categoria)("subcategoria",e.categoriaGrupo)("articulo",e.articulo))},directives:[h.b,h.a,$i,Li,Wi.c,Wi.b,Wi.a,y.b,o.l,Wi.d,d.b,b.b,c.c,c.k,c.n,s.a,Wo,y.a,s.c],styles:[".divArticulos[_ngcontent-%COMP%]{padding:3px 8px;overflow-y:auto;margin:0;height:85vh}.divArticulos[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]{width:200px;max-height:95px}.divSubCategorias[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px}.accion-comanda[_ngcontent-%COMP%]{background-color:#fff;margin:10px 0}"]}),t})();const tn=["frmEgreso"],en=["frmIngreso"];let on=(()=>{class t{constructor(t,e,i){this.ls=t,this._snackBar=e,this.transformacionSrvc=i,this.mermaDetalle=[],this.showMerma=!0,this.transformar=()=>{this.egreso=this.frmEgreso.egreso,this.ingreso=this.frmIngreso.ingreso,this.transformacion={egreso:{tipo_movimiento:this.egreso.tipo_movimiento,fecha:this.egreso.fecha,proveedor:this.ingreso.proveedor,bodega:this.egreso.bodega,usuario:this.egreso.usuario,estatus_movimiento:this.egreso.estatus_movimiento,bodega_destino:this.egreso.bodega_destino,tipo_movimiento_destino:this.egreso.tipo_movimiento_destino,detalle:[]},ingreso:{tipo_movimiento:this.ingreso.tipo_movimiento,fecha:this.ingreso.fecha,proveedor:this.ingreso.proveedor,bodega:this.ingreso.bodega,usuario:this.ingreso.usuario,bodega_origen:this.ingreso.bodega_origen,comentario:this.ingreso.comentario,detalle:[]},merma:[]},this.frmEgreso.detallesMerma.forEach(t=>this.transformacion.merma.push({articulo:t.articulo,cantidad:t.cantidad,precio_unitario:t.precio_unitario,precio_total:t.precio_total,presentacion:t.presentacion})),this.frmEgreso.detallesEgreso.forEach(t=>this.transformacion.egreso.detalle.push({articulo:t.articulo,cantidad:t.cantidad,precio_unitario:t.precio_unitario,precio_total:t.precio_total,presentacion:t.presentacion})),this.frmIngreso.detallesIngreso.forEach(t=>this.transformacion.ingreso.detalle.push({articulo:t.articulo,cantidad:t.cantidad,precio_unitario:t.precio_unitario,precio_total:t.precio_total,presentacion:t.presentacion})),this.transformacion.egreso&&this.transformacion.egreso.detalle&&this.transformacion.egreso.detalle.length>0&&this.transformacion.ingreso&&this.transformacion.ingreso.detalle&&this.transformacion.ingreso.detalle.length>0?this.transformacionSrvc.transformar(this.transformacion).subscribe(t=>{t.exito?(this.frmEgreso.resetEgreso(),this.frmEgreso.detallesEgreso=[],this.frmIngreso.resetIngreso(),this.frmIngreso.detallesIngreso=[],this._snackBar.open("Transformaci\xf3n generada con \xe9xito...","Transformaci\xf3n",{duration:5e3})):this._snackBar.open(`ERROR: ${t.mensaje}`,"Transformaci\xf3n",{duration:3e3})}):this._snackBar.open("Faltan datos necesario. Favor complete los datos e intente de nuevo.","Transformaci\xf3n",{duration:3e3})}}ngOnInit(){this.egreso={egreso:null,tipo_movimiento:null,bodega:null,fecha:A().format(E.a.dbDateFormat),usuario:this.ls.get(E.a.usrTokenVar).idusr||0,estatus_movimiento:1,traslado:0},this.ingreso={ingreso:null,tipo_movimiento:null,fecha:A().format(E.a.dbDateFormat),bodega:null,usuario:this.ls.get(E.a.usrTokenVar).idusr||0,comentario:null,proveedor:null}}doSomething(){}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(R.a),B.Nb(v.b),B.Nb(de))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-transformacion"]],viewQuery:function(t,e){if(1&t&&(B.Kc(tn,1),B.Kc(en,1)),2&t){let t;B.sc(t=B.cc())&&(e.frmEgreso=t.first),B.sc(t=B.cc())&&(e.frmIngreso=t.first)}},decls:15,vars:4,consts:[[1,"row"],[1,"col","m12","s12",2,"padding-bottom","5px !important"],["align","end"],["mat-raised-button","","type","button","color","accent",3,"click"],[2,"font-size","18pt"],[1,"col","m6","s12"],[3,"egreso","saveToDB","egresoChange","egresoSavedEv"],["frmEgreso",""],[3,"ingreso","saveToDB","ingresoChange","ingresoSavedEv"],["frmIngreso",""]],template:function(t,e){1&t&&(B.Tb(0,"div",0),B.Tb(1,"div",1),B.Tb(2,"div",2),B.Tb(3,"button",3),B.bc("click",function(){return e.transformar()}),B.Tb(4,"mat-icon",4),B.Fc(5,"transform"),B.Sb(),B.Fc(6,"\xa0Transformar "),B.Sb(),B.Sb(),B.Sb(),B.Sb(),B.Tb(7,"div",0),B.Tb(8,"div",5),B.Tb(9,"app-form-egreso",6,7),B.bc("egresoChange",function(t){return e.egreso=t})("egresoSavedEv",function(){return e.doSomething()}),B.Sb(),B.Sb(),B.Tb(11,"div",5),B.Tb(12,"app-form-ingreso",8,9),B.bc("ingresoChange",function(t){return e.ingreso=t})("ingresoSavedEv",function(){return e.doSomething()}),B.Sb(),B.Sb(),B.Sb(),B.Ob(14,"div",0)),2&t&&(B.Cb(9),B.lc("egreso",e.egreso)("saveToDB",!1),B.Cb(3),B.lc("ingreso",e.ingreso)("saveToDB",!1))},directives:[S.a,l.a,Oi,Yt],styles:[""]}),t})();var nn=i("NU9O");function cn(t,e){if(1&t&&(B.Tb(0,"mat-option",13),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.bodega),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function an(t,e){if(1&t&&(B.Tb(0,"mat-option",13),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.sede),B.Cb(1),B.Hc(" ",t.nombre," ")}}function rn(t,e){1&t&&B.Ob(0,"app-cargando")}const sn=function(){return{standalone:!0}};let ln=(()=>{class t{constructor(t,e,i,o){this.snackBar=t,this.pdfServicio=e,this.sedeSrvc=i,this.bodegaSrvc=o,this.bodegas=[],this.sedes=[],this.params={},this.titulo="Existencias",this.cargando=!1,this.configBotones={showPdf:!0,showHtml:!1,showExcel:!0},this.getSede=(t={})=>{this.sedeSrvc.get(t).subscribe(t=>{this.sedes=t})},this.getBodega=(t={})=>{this.bodegaSrvc.get(t).subscribe(t=>{this.bodegas=t})},this.excelClick=()=>{this.params._excel=1,this.cargando=!0,this.pdfServicio.getReporteExistencia(this.params).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/vnd.ms-excel"});Object(Vi.saveAs)(e,`${this.titulo}.xls`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})},this.resetParams=()=>{this.params={},this.cargando=!1}}ngOnInit(){this.getSede(),this.getBodega()}onSubmit(){this.params._excel=0,this.cargando=!0,this.pdfServicio.getReporteExistencia(this.params).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/pdf"});Object(Vi.saveAs)(e,`${this.titulo}.pdf`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(v.b),B.Nb(io.a),B.Nb(Ki.a),B.Nb(K.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-existencias"]],decls:24,vars:9,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmRptExistencias","ngForm"],[1,"fullWidth"],["name","bodega",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","sede",3,"ngModel","ngModelChange"],["matInput","","type","date","placeholder","Al","required","",3,"ngModel","ngModelOptions","ngModelChange"],["align","end"],[3,"configuracion","excelClick","pdfClick","resetParamsClick"],[4,"ngIf"],[3,"value"]],template:function(t,e){1&t&&(B.Tb(0,"div",0),B.Tb(1,"div",1),B.Tb(2,"mat-card",2),B.Tb(3,"mat-card-title"),B.Tb(4,"h4"),B.Fc(5,"Reporte de existencias"),B.Sb(),B.Sb(),B.Tb(6,"mat-card-content"),B.Tb(7,"form",3,4),B.Tb(9,"mat-form-field",5),B.Tb(10,"mat-label"),B.Fc(11,"Bodega"),B.Sb(),B.Tb(12,"mat-select",6),B.bc("ngModelChange",function(t){return e.params.bodega=t}),B.Dc(13,cn,2,2,"mat-option",7),B.Sb(),B.Sb(),B.Tb(14,"mat-form-field",5),B.Tb(15,"mat-label"),B.Fc(16,"Sede"),B.Sb(),B.Tb(17,"mat-select",8),B.bc("ngModelChange",function(t){return e.params.sede=t}),B.Dc(18,an,2,2,"mat-option",7),B.Sb(),B.Sb(),B.Tb(19,"mat-form-field",5),B.Tb(20,"input",9),B.bc("ngModelChange",function(t){return e.params.fecha=t}),B.Sb(),B.Sb(),B.Tb(21,"div",10),B.Tb(22,"app-rpt-botones",11),B.bc("excelClick",function(){return e.excelClick()})("pdfClick",function(){return e.onSubmit()})("resetParamsClick",function(){return e.resetParams()}),B.Sb(),B.Sb(),B.Sb(),B.Dc(23,rn,1,0,"app-cargando",12),B.Sb(),B.Sb(),B.Sb(),B.Sb()),2&t&&(B.Cb(12),B.lc("ngModel",e.params.bodega),B.Cb(1),B.lc("ngForOf",e.bodegas),B.Cb(4),B.lc("ngModel",e.params.sede),B.Cb(1),B.lc("ngForOf",e.sedes),B.Cb(2),B.lc("ngModel",e.params.fecha)("ngModelOptions",B.nc(8,sn)),B.Cb(2),B.lc("configuracion",e.configBotones),B.Cb(1),B.lc("ngIf",e.cargando))},directives:[u.a,u.h,u.c,c.r,c.l,c.m,d.b,d.e,m.a,c.k,c.n,o.l,b.b,c.c,c.p,nn.a,o.m,U.m,Qi.a],styles:[""]}),t})();function dn(t,e){if(1&t&&(B.Tb(0,"mat-option",14),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.articulo),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function bn(t,e){if(1&t&&(B.Tb(0,"mat-option",14),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.bodega),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function un(t,e){if(1&t&&(B.Tb(0,"mat-option",14),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.sede),B.Cb(1),B.Hc(" ",t.nombre," ")}}function gn(t,e){1&t&&B.Ob(0,"app-cargando")}const hn=function(){return{standalone:!0}};let pn=(()=>{class t{constructor(t,e,i,o,n){this.snackBar=t,this.pdfServicio=e,this.sedeSrvc=i,this.bodegaSrvc=o,this.articuloSrvc=n,this.bodegas=[],this.sedes=[],this.articulos=[],this.params={},this.titulo="Kardex",this.cargando=!1,this.configBotones={showPdf:!0,showHtml:!1,showExcel:!0},this.getSede=(t={})=>{this.sedeSrvc.get(t).subscribe(t=>{this.sedes=t})},this.getArticulo=(t={})=>{this.articuloSrvc.getArticulosIngreso(t).subscribe(t=>{this.articulos=t})},this.getBodega=(t={})=>{this.bodegaSrvc.get(t).subscribe(t=>{this.bodegas=t})},this.excelClick=()=>{this.params._excel=1,this.cargando=!0,this.pdfServicio.getReporteKardex(this.params).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/vnd.ms-excel"});Object(Vi.saveAs)(e,`${this.titulo}.xls`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})},this.resetParams=()=>{this.params={},this.cargando=!1}}ngOnInit(){this.getSede(),this.getBodega(),this.getArticulo()}onSubmit(){this.params._excel=0,this.pdfServicio.getReporteKardex(this.params).subscribe(t=>{if(t){const e=new Blob([t],{type:"application/pdf"});Object(Vi.saveAs)(e,`${this.titulo}.pdf`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(v.b),B.Nb(io.a),B.Nb(Ki.a),B.Nb(K.a),B.Nb(Q.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-kardex"]],decls:30,vars:14,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],[1,"fullWidth"],["name","articulo","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","bodega",3,"ngModel","ngModelChange"],["name","sede",3,"ngModel","ngModelChange"],["matInput","","type","date","placeholder","Del","required","",3,"ngModel","ngModelOptions","ngModelChange"],["matInput","","type","date","placeholder","Al","required","",3,"ngModel","ngModelOptions","ngModelChange"],["align","end"],[3,"configuracion","excelClick","pdfClick","resetParamsClick"],[4,"ngIf"],[3,"value"]],template:function(t,e){1&t&&(B.Tb(0,"div",0),B.Tb(1,"div",1),B.Tb(2,"mat-card",2),B.Tb(3,"mat-card-title"),B.Tb(4,"h4"),B.Fc(5,"Kardex"),B.Sb(),B.Sb(),B.Tb(6,"mat-card-content"),B.Tb(7,"form",3),B.Tb(8,"mat-form-field",4),B.Tb(9,"mat-label"),B.Fc(10,"Articulo"),B.Sb(),B.Tb(11,"mat-select",5),B.bc("ngModelChange",function(t){return e.params.articulo=t}),B.Dc(12,dn,2,2,"mat-option",6),B.Sb(),B.Sb(),B.Tb(13,"mat-form-field",4),B.Tb(14,"mat-label"),B.Fc(15,"Bodega"),B.Sb(),B.Tb(16,"mat-select",7),B.bc("ngModelChange",function(t){return e.params.bodega=t}),B.Dc(17,bn,2,2,"mat-option",6),B.Sb(),B.Sb(),B.Tb(18,"mat-form-field",4),B.Tb(19,"mat-label"),B.Fc(20,"Sede"),B.Sb(),B.Tb(21,"mat-select",8),B.bc("ngModelChange",function(t){return e.params.sede=t}),B.Dc(22,un,2,2,"mat-option",6),B.Sb(),B.Sb(),B.Tb(23,"mat-form-field",4),B.Tb(24,"input",9),B.bc("ngModelChange",function(t){return e.params.fdel=t}),B.Sb(),B.Sb(),B.Tb(25,"mat-form-field",4),B.Tb(26,"input",10),B.bc("ngModelChange",function(t){return e.params.fal=t}),B.Sb(),B.Sb(),B.Tb(27,"div",11),B.Tb(28,"app-rpt-botones",12),B.bc("excelClick",function(){return e.excelClick()})("pdfClick",function(){return e.onSubmit()})("resetParamsClick",function(){return e.resetParams()}),B.Sb(),B.Sb(),B.Sb(),B.Dc(29,gn,1,0,"app-cargando",13),B.Sb(),B.Sb(),B.Sb(),B.Sb()),2&t&&(B.Cb(11),B.lc("ngModel",e.params.articulo),B.Cb(1),B.lc("ngForOf",e.articulos),B.Cb(4),B.lc("ngModel",e.params.bodega),B.Cb(1),B.lc("ngForOf",e.bodegas),B.Cb(4),B.lc("ngModel",e.params.sede),B.Cb(1),B.lc("ngForOf",e.sedes),B.Cb(2),B.lc("ngModel",e.params.fdel)("ngModelOptions",B.nc(12,hn)),B.Cb(2),B.lc("ngModel",e.params.fal)("ngModelOptions",B.nc(13,hn)),B.Cb(2),B.lc("configuracion",e.configBotones),B.Cb(1),B.lc("ngIf",e.cargando))},directives:[u.a,u.h,u.c,c.r,c.l,c.m,d.b,d.e,m.a,c.p,c.k,c.n,o.l,b.b,c.c,nn.a,o.m,U.m,Qi.a],styles:[""]}),t})();const mn=["frmIngreso"];let fn=(()=>{class t{constructor(t,e,i){this.ls=t,this.snackBar=e,this.transformacionSrvc=i,this.transformar=()=>{this.ingreso=this.frmIngreso.ingreso,this.produccion={tipo_movimiento:this.ingreso.tipo_movimiento,fecha:this.ingreso.fecha,proveedor:this.ingreso.proveedor,bodega:this.ingreso.bodega,usuario:this.ingreso.usuario,bodega_origen:this.ingreso.bodega_origen,comentario:this.ingreso.comentario,detalle:[]},this.frmIngreso.detallesIngreso.forEach(t=>this.produccion.detalle.push({articulo:t.articulo,cantidad:t.cantidad,precio_unitario:t.precio_unitario,precio_total:t.precio_total,presentacion:t.presentacion})),this.produccion&&this.produccion.detalle&&this.produccion.detalle.length>0?this.transformacionSrvc.producir(this.produccion).subscribe(t=>{t.exito?(this.frmIngreso.resetIngreso(),this.frmIngreso.detallesIngreso=[],this.snackBar.open("Producto generado con \xe9xito...","Producci\xf3n",{duration:5e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Producci\xf3n",{duration:3e3})}):this.snackBar.open("Faltan datos necesario. Favor complete los datos e intente de nuevo.","Transformaci\xf3n",{duration:3e3})},this.doSomething=()=>{}}ngOnInit(){this.ingreso={ingreso:null,tipo_movimiento:null,fecha:A().format(E.a.dbDateFormat),bodega:null,usuario:this.ls.get(E.a.usrTokenVar).idusr||0,comentario:null,proveedor:null}}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(R.a),B.Nb(v.b),B.Nb(de))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-produccion"]],viewQuery:function(t,e){if(1&t&&B.Kc(mn,1),2&t){let t;B.sc(t=B.cc())&&(e.frmIngreso=t.first)}},decls:11,vars:2,consts:[[1,"row"],[1,"col","m12","s12",2,"padding-bottom","5px !important"],["align","end"],["mat-raised-button","","type","button","color","accent",3,"click"],[2,"font-size","18pt"],[1,"col","m12","s12"],[3,"ingreso","saveToDB","ingresoChange","ingresoSavedEv"],["frmIngreso",""]],template:function(t,e){1&t&&(B.Tb(0,"div",0),B.Tb(1,"div",1),B.Tb(2,"div",2),B.Tb(3,"button",3),B.bc("click",function(){return e.transformar()}),B.Tb(4,"mat-icon",4),B.Fc(5,"transform"),B.Sb(),B.Fc(6,"\xa0Transformar "),B.Sb(),B.Sb(),B.Sb(),B.Sb(),B.Tb(7,"div",0),B.Tb(8,"div",5),B.Tb(9,"app-form-ingreso",6,7),B.bc("ingresoChange",function(t){return e.ingreso=t})("ingresoSavedEv",function(){return e.doSomething()}),B.Sb(),B.Sb(),B.Sb()),2&t&&(B.Cb(9),B.lc("ingreso",e.ingreso)("saveToDB",!1))},directives:[S.a,l.a,Yt],styles:[""]}),t})();function Sn(t,e){if(1&t&&(B.Tb(0,"mat-option",13),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.bodega),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function vn(t,e){if(1&t&&(B.Tb(0,"mat-option",13),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.sede),B.Cb(1),B.Hc(" ",t.nombre," ")}}function Cn(t,e){1&t&&B.Ob(0,"app-cargando")}const Tn=function(){return{standalone:!0}};let _n=(()=>{class t{constructor(t,e,i,o){this.snackBar=t,this.pdfServicio=e,this.sedeSrvc=i,this.bodegaSrvc=o,this.bodegas=[],this.sedes=[],this.params={},this.titulo="Valorizado",this.cargando=!1,this.configBotones={showPdf:!0,showHtml:!1,showExcel:!0},this.getSede=(t={})=>{this.sedeSrvc.get(t).subscribe(t=>{this.sedes=t})},this.getBodega=(t={})=>{this.bodegaSrvc.get(t).subscribe(t=>{this.bodegas=t})},this.excelClick=()=>{this.params._excel=1,this.cargando=!0,this.pdfServicio.getReporteValorizado(this.params).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/vnd.ms-excel"});Object(Vi.saveAs)(e,`${this.titulo}.xls`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})},this.resetParams=()=>{this.params={},this.cargando=!1}}ngOnInit(){this.getSede(),this.getBodega()}onSubmit(){this.params._excel=0,this.cargando=!0,this.pdfServicio.getReporteValorizado(this.params).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/pdf"});Object(Vi.saveAs)(e,`${this.titulo}.pdf`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(v.b),B.Nb(io.a),B.Nb(Ki.a),B.Nb(K.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-valorizado"]],decls:24,vars:9,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmRptValorizado","ngForm"],[1,"fullWidth"],["name","bodega",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","sede",3,"ngModel","ngModelChange"],["matInput","","type","date","placeholder","Al","required","",3,"ngModel","ngModelOptions","ngModelChange"],["align","end"],[3,"configuracion","excelClick","pdfClick","resetParamsClick"],[4,"ngIf"],[3,"value"]],template:function(t,e){1&t&&(B.Tb(0,"div",0),B.Tb(1,"div",1),B.Tb(2,"mat-card",2),B.Tb(3,"mat-card-title"),B.Tb(4,"h4"),B.Fc(5,"Inventario Valorizado"),B.Sb(),B.Sb(),B.Tb(6,"mat-card-content"),B.Tb(7,"form",3,4),B.Tb(9,"mat-form-field",5),B.Tb(10,"mat-label"),B.Fc(11,"Bodega"),B.Sb(),B.Tb(12,"mat-select",6),B.bc("ngModelChange",function(t){return e.params.bodega=t}),B.Dc(13,Sn,2,2,"mat-option",7),B.Sb(),B.Sb(),B.Tb(14,"mat-form-field",5),B.Tb(15,"mat-label"),B.Fc(16,"Sede"),B.Sb(),B.Tb(17,"mat-select",8),B.bc("ngModelChange",function(t){return e.params.sede=t}),B.Dc(18,vn,2,2,"mat-option",7),B.Sb(),B.Sb(),B.Tb(19,"mat-form-field",5),B.Tb(20,"input",9),B.bc("ngModelChange",function(t){return e.params.fecha=t}),B.Sb(),B.Sb(),B.Tb(21,"div",10),B.Tb(22,"app-rpt-botones",11),B.bc("excelClick",function(){return e.excelClick()})("pdfClick",function(){return e.onSubmit()})("resetParamsClick",function(){return e.resetParams()}),B.Sb(),B.Sb(),B.Sb(),B.Dc(23,Cn,1,0,"app-cargando",12),B.Sb(),B.Sb(),B.Sb(),B.Sb()),2&t&&(B.Cb(12),B.lc("ngModel",e.params.bodega),B.Cb(1),B.lc("ngForOf",e.bodegas),B.Cb(4),B.lc("ngModel",e.params.sede),B.Cb(1),B.lc("ngForOf",e.sedes),B.Cb(2),B.lc("ngModel",e.params.fecha)("ngModelOptions",B.nc(8,Tn)),B.Cb(2),B.lc("configuracion",e.configBotones),B.Cb(1),B.lc("ngIf",e.cargando))},directives:[u.a,u.h,u.c,c.r,c.l,c.m,d.b,d.e,m.a,c.k,c.n,o.l,b.b,c.c,c.p,nn.a,o.m,U.m,Qi.a],styles:[""]}),t})(),xn=(()=>{class t{constructor(t){this.http=t,this.fisicoUrl="fisico",this.srvcErrHndl=new H.a}generarInventarioFisico(t){return this.http.post(`${E.a.urlWms}/${this.fisicoUrl}/generar`,t).pipe(Object($.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}confirmar(t){return this.http.post(`${E.a.urlWms}/${this.fisicoUrl}/confirmar/${+t.inventario_fisico>0?"/"+t.inventario_fisico:""}`,{}).pipe(Object($.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}getDetalle(t,e={}){return this.http.get(`${E.a.urlWms}/${this.fisicoUrl}/buscar_detalle/${t}?${N.stringify(e)}`).pipe(Object($.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}saveDetalle(t){return this.http.post(`${E.a.urlWms}/${this.fisicoUrl}/actualizar/`,t).pipe(Object($.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(B.Xb(n.b))},t.\u0275prov=B.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Dn(t,e){1&t&&(B.Tb(0,"mat-icon",8),B.Fc(1,"expand_more"),B.Sb())}function Mn(t,e){1&t&&(B.Tb(0,"mat-icon",8),B.Fc(1,"expand_less"),B.Sb())}function In(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.bodega),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Fn(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.sede),B.Cb(1),B.Hc(" ",t.nombre," ")}}function yn(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function kn(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.categoria_grupo),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function On(t,e){1&t&&B.Ob(0,"app-cargando")}const wn=function(){return{standalone:!0}};function En(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-card-content"),B.Tb(1,"form",9),B.bc("ngSubmit",function(){return B.xc(t),B.fc().onSubmit()}),B.Tb(2,"mat-form-field",10),B.Tb(3,"mat-label"),B.Fc(4,"Bodega"),B.Sb(),B.Tb(5,"mat-select",11),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().params.bodega=e}),B.Dc(6,In,2,2,"mat-option",12),B.Sb(),B.Sb(),B.Tb(7,"mat-form-field",10),B.Tb(8,"mat-label"),B.Fc(9,"Sede"),B.Sb(),B.Tb(10,"mat-select",13),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().params.sede=e}),B.Dc(11,Fn,2,2,"mat-option",12),B.Sb(),B.Sb(),B.Tb(12,"mat-form-field",10),B.Tb(13,"mat-label"),B.Fc(14,"Categor\xeda"),B.Sb(),B.Tb(15,"mat-select",14),B.bc("selectionChange",function(e){return B.xc(t),B.fc().onCategoriaSelected(e)}),B.Dc(16,yn,2,2,"mat-option",12),B.Sb(),B.Sb(),B.Tb(17,"mat-form-field",10),B.Tb(18,"mat-label"),B.Fc(19,"Sub-categor\xeda"),B.Sb(),B.Tb(20,"mat-select",15),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().params.categoria_grupo_grupo=e}),B.Dc(21,kn,2,2,"mat-option",12),B.Sb(),B.Sb(),B.Tb(22,"mat-form-field",10),B.Tb(23,"input",16),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().params.fecha=e}),B.Sb(),B.Sb(),B.Tb(24,"mat-checkbox",17),B.bc("ngModelChange",function(e){return B.xc(t),+(B.fc().params._excel=e)}),B.Fc(25,"Generar en Excel "),B.Sb(),B.Tb(26,"div",18),B.Tb(27,"button",19),B.Fc(28,"GENERAR"),B.Sb(),B.Sb(),B.Sb(),B.Dc(29,On,1,0,"app-cargando",7),B.Sb()}if(2&t){const t=B.fc();B.Cb(5),B.lc("ngModel",t.params.bodega),B.Cb(1),B.lc("ngForOf",t.bodegas),B.Cb(4),B.lc("ngModel",t.params.sede),B.Cb(1),B.lc("ngForOf",t.sedes),B.Cb(5),B.lc("ngForOf",t.categorias),B.Cb(4),B.lc("ngModel",t.params.categoria_grupo_grupo),B.Cb(1),B.lc("ngForOf",t.categoriasGruposPadre),B.Cb(2),B.lc("ngModel",t.params.fecha)("ngModelOptions",B.nc(11,wn)),B.Cb(1),B.lc("ngModel",+t.params._excel),B.Cb(5),B.lc("ngIf",t.cargando)}}let An=(()=>{class t{constructor(t,e,i,o,n,c,a){this.snackBar=t,this.pdfServicio=e,this.sedeSrvc=i,this.bodegaSrvc=o,this.articuloSrvc=n,this.fisicoSrvc=c,this.ls=a,this.bodegas=[],this.sedes=[],this.params={},this.categorias=[],this.categoriasGruposPadre=[],this.categoriasGrupos=[],this.titulo="Fisico",this.cargando=!1,this.showReporte=!0,this.getSede=(t={})=>{this.sedeSrvc.get(t).subscribe(t=>{this.sedes=t})},this.getBodega=(t={})=>{this.bodegaSrvc.get(t).subscribe(t=>{this.bodegas=t})},this.loadCategorias=()=>{this.articuloSrvc.getCategorias({sede:+this.ls.get(E.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.categorias=t)})},this.onCategoriaSelected=t=>this.loadSubCategorias(+t.value.categoria),this.loadSubCategorias=t=>{this.articuloSrvc.getCategoriasGrupos({categoria:+t}).subscribe(t=>{t&&(this.categoriasGruposPadre=this.articuloSrvc.adaptCategoriaGrupoResponse(t),this.categoriasGrupos=this.categoriasGruposPadre)})},this.onSubCategoriaPadreSelected=t=>this.loadSubCategoriasSubcategorias(+t.value),this.loadSubCategoriasSubcategorias=t=>{this.articuloSrvc.getCategoriasGrupos({categoria_grupo_grupo:t}).subscribe(t=>{t&&(this.categoriasGrupos=this.articuloSrvc.adaptCategoriaGrupoResponse(t))})}}ngOnInit(){this.getSede(),this.getBodega(),this.loadCategorias()}onSubmit(){this.cargando=!0,this.fisicoSrvc.generarInventarioFisico(this.params).subscribe(t=>{this.cargando=!1,console.log(t),t.exito?this.pdfServicio.imprimirInventarioFisico(t.inventario,this.params).subscribe(t=>{if(this.params._excel){const e=new Blob([t],{type:"application/vnd.ms-excel"});Object(Vi.saveAs)(e,`${this.titulo}.xls`)}else{const e=new Blob([t],{type:"application/pdf"});Object(Vi.saveAs)(e,`${this.titulo}.pdf`)}}):this.snackBar.open("No se pudo generar el reporte... "+t.mensaje,this.titulo,{duration:3e3})})}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(v.b),B.Nb(io.a),B.Nb(Ki.a),B.Nb(K.a),B.Nb(Q.a),B.Nb(xn),B.Nb(R.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-reporte"]],decls:13,vars:3,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],[1,"col"],[1,"col",2,"float","right"],["mat-button","","type","button","color","accent",3,"click"],["class","iconFontSize",4,"ngIf"],[4,"ngIf"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],[1,"fullWidth"],["name","bodega",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","sede",3,"ngModel","ngModelChange"],["name","categoria",3,"selectionChange"],["name","categoriaGrupoPadre",3,"ngModel","ngModelChange"],["matInput","","type","date","placeholder","Fecha","required","",3,"ngModel","ngModelOptions","ngModelChange"],["name","excel",1,"fullWidth",3,"ngModel","ngModelChange"],["align","end"],["mat-button","","color","accent","type","submit"],[3,"value"]],template:function(t,e){1&t&&(B.Tb(0,"div",0),B.Tb(1,"div",1),B.Tb(2,"mat-card",2),B.Tb(3,"mat-card-title"),B.Tb(4,"div",0),B.Tb(5,"div",3),B.Tb(6,"h4"),B.Fc(7,"Inventario Fisico"),B.Sb(),B.Sb(),B.Tb(8,"div",4),B.Tb(9,"button",5),B.bc("click",function(){return e.showReporte=!e.showReporte}),B.Dc(10,Dn,2,0,"mat-icon",6),B.Dc(11,Mn,2,0,"mat-icon",6),B.Sb(),B.Sb(),B.Sb(),B.Sb(),B.Dc(12,En,30,12,"mat-card-content",7),B.Sb(),B.Sb(),B.Sb()),2&t&&(B.Cb(10),B.lc("ngIf",e.showReporte),B.Cb(1),B.lc("ngIf",!e.showReporte),B.Cb(1),B.lc("ngIf",e.showReporte))},directives:[u.a,u.h,S.a,o.m,l.a,u.c,c.r,c.l,c.m,d.b,d.e,m.a,c.k,c.n,o.l,b.b,c.c,c.p,f.a,U.m,Qi.a],styles:[""]}),t})();function Bn(t,e){1&t&&(B.Tb(0,"mat-icon",9),B.Fc(1,"expand_more"),B.Sb())}function Rn(t,e){1&t&&(B.Tb(0,"mat-icon",9),B.Fc(1,"expand_less"),B.Sb())}function Hn(t,e){1&t&&B.Ob(0,"app-cargando")}function $n(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-card-content"),B.Tb(1,"form",10),B.bc("ngSubmit",function(){return B.xc(t),B.fc().buscar()}),B.Tb(2,"mat-form-field",11),B.Tb(3,"input",12),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().params.numero=e}),B.Sb(),B.Tb(4,"button",13),B.Fc(5,"Buscar"),B.Sb(),B.Sb(),B.Sb(),B.Dc(6,Hn,1,0,"app-cargando",7),B.Sb()}if(2&t){const t=B.fc();B.Cb(3),B.lc("ngModel",t.params.numero),B.Cb(3),B.lc("ngIf",t.cargando)}}const Pn=function(){return{standalone:!0}};function Nn(t,e){if(1&t&&(B.Tb(0,"tr"),B.Tb(1,"td",23),B.Fc(2),B.Sb(),B.Tb(3,"td",23),B.Tb(4,"mat-form-field",11),B.Tb(5,"input",24),B.bc("ngModelChange",function(t){return e.$implicit.existencia_fisica=t}),B.Sb(),B.Sb(),B.Sb(),B.Sb()),2&t){const t=e.$implicit;B.Cb(2),B.Hc(" ",t.narticulo," "),B.Cb(3),B.lc("ngModel",t.existencia_fisica)("ngModelOptions",B.nc(3,Pn))}}function jn(t,e){if(1&t&&(B.Rb(0),B.Tb(1,"tr"),B.Tb(2,"th",22),B.Fc(3),B.Sb(),B.Sb(),B.Dc(4,Nn,6,4,"tr",17),B.Qb()),2&t){const t=e.$implicit;B.Cb(3),B.Gc(t.descripcion),B.Cb(1),B.lc("ngForOf",t.datos)}}function Un(t,e){if(1&t&&(B.Rb(0),B.Tb(1,"tr"),B.Tb(2,"th",22),B.Tb(3,"mat-label"),B.Fc(4),B.Sb(),B.Sb(),B.Sb(),B.Dc(5,jn,5,2,"ng-container",17),B.Qb()),2&t){const t=e.$implicit;B.Cb(4),B.Gc(t.descripcion),B.Cb(1),B.lc("ngForOf",t.datos)}}function Gn(t,e){1&t&&(B.Tb(0,"button",25),B.Fc(1,"Guardar"),B.Sb())}function qn(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",20),B.bc("click",function(){return B.xc(t),B.fc(2).confirmar()}),B.Fc(1,"Confirmar"),B.Sb()}}function zn(t,e){1&t&&B.Ob(0,"app-cargando")}function Ln(t,e){if(1&t){const t=B.Ub();B.Tb(0,"div",0),B.Tb(1,"div",1),B.Tb(2,"mat-card",2),B.Ob(3,"mat-card-title"),B.Tb(4,"mat-card-content"),B.Tb(5,"form",14,15),B.bc("ngSubmit",function(){B.xc(t);const e=B.tc(6),i=B.fc();return e.form.valid&&i.actualizar()}),B.Tb(7,"table",16),B.Dc(8,Un,6,2,"ng-container",17),B.Sb(),B.Tb(9,"div",18),B.Dc(10,Gn,2,0,"button",19),B.Tb(11,"button",20),B.bc("click",function(){return B.xc(t),B.fc().imprimir()}),B.Fc(12,"PDF"),B.Sb(),B.Tb(13,"button",20),B.bc("click",function(){return B.xc(t),B.fc().imprimirXls()}),B.Fc(14,"Excel"),B.Sb(),B.Dc(15,qn,2,0,"button",21),B.Sb(),B.Sb(),B.Dc(16,zn,1,0,"app-cargando",7),B.Sb(),B.Sb(),B.Sb(),B.Sb()}if(2&t){const t=B.fc();B.Cb(8),B.lc("ngForOf",t.articulos),B.Cb(2),B.lc("ngIf",0==t.inventario.confirmado),B.Cb(5),B.lc("ngIf",0==t.inventario.confirmado),B.Cb(1),B.lc("ngIf",t.cargando)}}let Wn=(()=>{class t{constructor(t,e,i,o){this.snackBar=t,this.pdfServicio=e,this.fisicoSrvc=i,this.dialog=o,this.showForm=!0,this.params={},this.cargando=!1,this.articulos=[],this.inventario={},this.titulo="Inventario_Fisico",this.resetDatos=()=>{this.articulos=[],this.inventario={inventario_fisico:0,sede:null,usuario:null,categoria_grupo:null,fhcreacion:null,fecha:null,notas:null,confirmado:0}},this.buscar=()=>{this.resetDatos(),this.fisicoSrvc.getDetalle(this.params.numero).subscribe(t=>{t&&(this.articulos=t.detalle,this.inventario=t.inventario)})},this.actualizar=()=>{this.fisicoSrvc.saveDetalle(this.articulos).subscribe(t=>{this.snackBar.open(t.exito?"Datos actualizados exitosamente":`ERROR: ${t.mensaje}`,"Inventario",{duration:3e3})})},this.confirmar=()=>{this.dialog.open(L.a,{maxWidth:"400px",data:new L.b("Confirmar Inventario Fisico","No podr\xe1 modificar los datos ingresados. \xbfDesea continuar?","S\xed","No")}).afterClosed().subscribe(t=>{t&&this.fisicoSrvc.confirmar(this.inventario).subscribe(t=>{t.exito?(this.inventario=t.inventario,this.snackBar.open("Inventario confirmado exitosamente","Inventario",{duration:3e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Inventario",{duration:3e3})})})},this.imprimir=()=>{this.pdfServicio.imprimirInventarioFisico(this.inventario.inventario_fisico,{existencia_fisica:!0}).subscribe(t=>{const e=new Blob([t],{type:"application/pdf"});Object(Vi.saveAs)(e,`${this.titulo}.pdf`)})},this.imprimirXls=()=>{this.pdfServicio.imprimirInventarioFisico(this.inventario.inventario_fisico,{existencia_fisica:!0,_excel:!0}).subscribe(t=>{const e=new Blob([t],{type:"application/vnd.ms-excel"});Object(Vi.saveAs)(e,`${this.titulo}.xls`)})}}ngOnInit(){this.resetDatos()}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(v.b),B.Nb(io.a),B.Nb(xn),B.Nb(D.b))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-form-inventario-fisico"]],decls:14,vars:4,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],[1,"col"],[1,"col",2,"float","right"],["mat-button","","type","button","color","accent",3,"click"],["class","iconFontSize",4,"ngIf"],[4,"ngIf"],["class","row",4,"ngIf"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],[1,"fullWidth"],["matInput","","type","text","placeholder","N\xfamero","name","numero","required","",3,"ngModel","ngModelChange"],["mat-raised-button","","matSuffix","","color","accent","type","submit"],["novalidate","","autocomplete","off",3,"ngSubmit"],["frmConteoFisico","ngForm"],[1,"tbl"],[4,"ngFor","ngForOf"],["align","end"],["mat-button","","color","accent","type","submit",4,"ngIf"],["mat-button","","color","accent","type","button",3,"click"],["mat-button","","color","accent","type","button",3,"click",4,"ngIf"],["colspan","2",1,"brdTSingleBSingle"],[1,"brdTSingleBSingle"],["matInput","","type","number","step","0.01","placeholder","Cantidad","required","",3,"ngModel","ngModelOptions","ngModelChange"],["mat-button","","color","accent","type","submit"]],template:function(t,e){1&t&&(B.Tb(0,"div",0),B.Tb(1,"div",1),B.Tb(2,"mat-card",2),B.Tb(3,"mat-card-title"),B.Tb(4,"div",0),B.Tb(5,"div",3),B.Tb(6,"h4"),B.Fc(7,"Ingreso Inventario Fisico"),B.Sb(),B.Sb(),B.Tb(8,"div",4),B.Tb(9,"button",5),B.bc("click",function(){return e.showForm=!e.showForm}),B.Dc(10,Bn,2,0,"mat-icon",6),B.Dc(11,Rn,2,0,"mat-icon",6),B.Sb(),B.Sb(),B.Sb(),B.Sb(),B.Dc(12,$n,7,2,"mat-card-content",7),B.Sb(),B.Sb(),B.Sb(),B.Dc(13,Ln,17,4,"div",8)),2&t&&(B.Cb(10),B.lc("ngIf",e.showForm),B.Cb(1),B.lc("ngIf",!e.showForm),B.Cb(1),B.lc("ngIf",e.showForm),B.Cb(1),B.lc("ngIf",e.articulos.length>0))},directives:[u.a,u.h,S.a,o.m,l.a,u.c,c.r,c.l,c.m,d.b,b.b,c.c,c.p,c.k,c.n,d.f,Qi.a,o.l,d.e,c.o],styles:[""]}),t})();const Vn=["rptInventario"],Kn=["frmInventario"],Qn=[{path:"ingresos",component:ie,canActivate:[w.a]},{path:"egresos",component:Ai,canActivate:[w.a]},{path:"articulos",component:Yo,canActivate:[w.a]},{path:"transformaciones",component:on,canActivate:[w.a]},{path:"rptexistencia",component:ln,canActivate:[w.a]},{path:"rptkardex",component:pn,canActivate:[w.a]},{path:"produccion",component:fn,canActivate:[w.a]},{path:"rptvalorizado",component:_n,canActivate:[w.a]},{path:"fisico",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=B.Hb({type:t,selectors:[["app-fisico"]],viewQuery:function(t,e){if(1&t&&(B.Kc(Vn,1),B.Kc(Kn,1)),2&t){let t;B.sc(t=B.cc())&&(e.rptInventarioComponent=t.first),B.sc(t=B.cc())&&(e.frmInventarioComponent=t.first)}},decls:6,vars:0,consts:[[1,"row"],[1,"col","s12","m12"]],template:function(t,e){1&t&&(B.Tb(0,"div",0),B.Tb(1,"div",1),B.Ob(2,"app-reporte"),B.Sb(),B.Sb(),B.Tb(3,"div",0),B.Tb(4,"div",1),B.Ob(5,"app-form-inventario-fisico"),B.Sb(),B.Sb())},directives:[An,Wn],styles:[""]}),t})(),canActivate:[w.a]},{path:"replicar_articulos_sedes",component:Zi,canActivate:[w.a]},{path:"**",redirectTo:"/admin/dashboard",pathMatch:"full"}];let Xn=(()=>{class t{}return t.\u0275mod=B.Lb({type:t}),t.\u0275inj=B.Kb({factory:function(e){return new(e||t)},imports:[[O.d.forChild(Qn)],O.d]}),t})(),Jn=(()=>{class t{}return t.\u0275mod=B.Lb({type:t}),t.\u0275inj=B.Kb({factory:function(e){return new(e||t)},providers:[],imports:[[o.c,Xn,a.a,r.a,n.c,c.e,k.b,s.d,l.b,d.d,b.c,u.f,g.b,h.c,p.l,m.b,f.b,S.b,v.c,C.b,T.d,_.b,x.b,D.e,M.d,I.c,F.b,y.c]]}),t})()}}]);