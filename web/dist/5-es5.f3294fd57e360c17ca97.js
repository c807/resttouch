!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"3e6T":function(t,n,i){"use strict";i.d(n,"a",function(){return b});var a=i("sKxO"),r=i("R5jZ"),c=i("un/a"),l=i("JIr8"),s=i("Qyje"),u=i("fXoL"),d=i("tk/3"),b=function(){var t=function(){function t(o){e(this,t),this.http=o,this.srvcErrHndl=new r.a}return o(t,[{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(a.b.urlCatalogos,"/get_tipo_movimiento?").concat(s.stringify(e))).pipe(Object(c.a)(a.b.reintentos),Object(l.a)(this.srvcErrHndl.errorHandler))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Xb(d.b))},t.\u0275prov=u.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},FHMA:function(t,n,i){"use strict";i.d(n,"a",function(){return b});var a=i("tk/3"),r=i("sKxO"),c=i("R5jZ"),l=i("un/a"),s=i("JIr8"),u=i("fXoL"),d=i("FY0D"),b=function(){var t=function(){function t(o,n){e(this,t),this.http=o,this.ls=n,this.usrToken=null,this.httpOptions={responseType:"blob"},this.srvcErrHndl=new c.a,this.usrToken=this.ls.get(r.b.usrTokenVar)?this.ls.get(r.b.usrTokenVar).token:null,this.httpOptions.headers=new a.d({Authorization:this.usrToken,Accept:"application/pdf"})}return o(t,[{key:"getReporteCaja",value:function(e){return this.http.post("".concat(r.b.urlAppRestaurante,"/reporte/caja"),e,this.httpOptions).pipe(Object(l.a)(r.b.reintentos),Object(s.a)(this.srvcErrHndl.errorHandler))}},{key:"getReporteExistencia",value:function(e){return this.http.post("".concat(r.b.urlWms,"/reporte/existencia"),e,this.httpOptions).pipe(Object(l.a)(r.b.reintentos),Object(s.a)(this.srvcErrHndl.errorHandler))}},{key:"getReporteValorizado",value:function(e){return this.http.post("".concat(r.b.urlWms,"/reporte/valorizado"),e,this.httpOptions).pipe(Object(l.a)(r.b.reintentos),Object(s.a)(this.srvcErrHndl.errorHandler))}},{key:"imprimirInventarioFisico",value:function(e,t){return this.httpOptions.params=t,this.http.get("".concat(r.b.urlWms,"/fisico/imprimir/").concat(e),this.httpOptions).pipe(Object(l.a)(r.b.reintentos),Object(s.a)(this.srvcErrHndl.errorHandler))}},{key:"imprimirReceta",value:function(e){return this.http.get("".concat(r.b.urlMantenimientos,"/articulo/imprimir_receta/").concat(e),this.httpOptions).pipe(Object(l.a)(r.b.reintentos),Object(s.a)(this.srvcErrHndl.errorHandler))}},{key:"getReporteKardex",value:function(e){return this.http.post("".concat(r.b.urlWms,"/reporte/kardex"),e,this.httpOptions).pipe(Object(l.a)(r.b.reintentos),Object(s.a)(this.srvcErrHndl.errorHandler))}},{key:"getReporteFactura",value:function(e){return this.httpOptions.params=e,this.http.get("".concat(r.b.urlAppRestaurante,"/reporte/factura"),this.httpOptions).pipe(Object(l.a)(r.b.reintentos),Object(s.a)(this.srvcErrHndl.errorHandler))}},{key:"getReportePropina",value:function(e){return this.httpOptions.params=e,this.http.get("".concat(r.b.urlAppRestaurante,"/reporte/distribucion_propina"),this.httpOptions).pipe(Object(l.a)(r.b.reintentos),Object(s.a)(this.srvcErrHndl.errorHandler))}},{key:"getComanda",value:function(e){return this.http.get("".concat(r.b.urlAppRestaurante,"/comanda/imprimir/").concat(e,"/1"),this.httpOptions).pipe(Object(l.a)(r.b.reintentos),Object(s.a)(this.srvcErrHndl.errorHandler))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Xb(a.b),u.Xb(d.a))},t.\u0275prov=u.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},TOq3:function(t,n,i){"use strict";i.d(n,"a",function(){return r});var a=i("fXoL"),r=function(){var t=function(){function t(){e(this,t),this.configuracion={w:150,h:150,align:"center",size:100}}return o(t,[{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Hb({type:t,selectors:[["app-cargando"]],inputs:{configuracion:"configuracion"},decls:2,vars:7,consts:[[3,"align"],["id","imgCargando","src","/assets/img/loading.gif","alt","Cargando..."]],template:function(e,t){1&e&&(a.Tb(0,"div",0),a.Ob(1,"img",1),a.Sb()),2&e&&(a.Ac("width",t.configuracion.size,"%"),a.lc("align",t.configuracion.align),a.Cb(1),a.Ac("width",t.configuracion.w,"px")("height",t.configuracion.h,"px"))},styles:[""]}),t}()},vtFA:function(t,n,i){"use strict";i.r(n),i.d(n,"WmsModule",function(){return $a});var a,r=i("ofXK"),c=i("tk/3"),l=i("3Pt+"),s=i("YUcS"),u=i("PCNd"),d=i("MutI"),b=i("NFeN"),g=i("kmnG"),f=i("qFsG"),m=i("Wp6s"),p=i("f0Cb"),h=i("wZkO"),v=i("+0xr"),S=i("d3UM"),C=i("bSwM"),T=i("bTqV"),M=i("dNgK"),D=i("/t3+"),I=i("STbY"),F=i("zkoq"),x=i("M9IT"),_=i("0IaG"),y=i("XhcP"),k=i("8yBR"),O=i("/1cH"),E=i("A5z7"),w=i("uM5D"),A=i("tyNb"),B=i("0T/Q"),R=i("sKxO"),H=i("wd/R"),P=i("fXoL"),N=i("FY0D"),U=i("R5jZ"),G=i("un/a"),z=i("JIr8"),q=i("Qyje"),j=((a=function(){function t(o){e(this,t),this.http=o,this.ingresoUrl="ingreso",this.documentoUrl="documento",this.srvcErrHndl=new U.a}return o(t,[{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(R.b.urlWms,"/").concat(this.ingresoUrl,"/buscar_ingreso?").concat(q.stringify(e))).pipe(Object(G.a)(R.b.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(e){return this.http.post("".concat(R.b.urlWms,"/").concat(this.ingresoUrl,"/guardar").concat(+e.ingreso>0?"/"+e.ingreso:""),e).pipe(Object(G.a)(R.b.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"getDetalle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.http.get("".concat(R.b.urlWms,"/").concat(this.ingresoUrl,"/buscar_detalle/").concat(e,"?").concat(q.stringify(t))).pipe(Object(G.a)(R.b.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"saveDetalle",value:function(e){return this.http.post("".concat(R.b.urlWms,"/").concat(this.ingresoUrl,"/guardar_detalle/").concat(e.ingreso).concat(+e.ingreso_detalle>0?"/"+e.ingreso_detalle:""),e).pipe(Object(G.a)(R.b.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"getDocumento",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(R.b.urlWms,"/").concat(this.documentoUrl,"/buscar?").concat(q.stringify(e))).pipe(Object(G.a)(R.b.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"saveDocumento",value:function(e){return this.http.post("".concat(R.b.urlWms,"/").concat(this.documentoUrl,"/guardar").concat(+e.documento>0?"/"+e.documento:""),e).pipe(Object(G.a)(R.b.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"enviarDocumentoAConta",value:function(e){return this.http.get("".concat(R.b.urlWms,"/").concat(this.documentoUrl,"/enviar/").concat(e)).pipe(Object(G.a)(R.b.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(e){return new(e||a)(P.Xb(c.b))},a.\u0275prov=P.Jb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),$=i("FKr1");function W(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-list-item",8),P.bc("click",function(){P.xc(o);var e=t.$implicit;return P.fc().getIngreso(e)}),P.Tb(1,"mat-icon",9),P.Fc(2,"trending_up"),P.Sb(),P.Tb(3,"h5",10),P.Fc(4),P.Sb(),P.Ob(5,"br"),P.Tb(6,"p",10),P.Fc(7),P.gc(8,"date"),P.Ob(9,"br"),P.Fc(10),P.Ob(11,"br"),P.Sb(),P.Tb(12,"p",10),P.Fc(13),P.Sb(),P.Sb()}if(2&e){var n=t.$implicit;P.Cb(4),P.Hc("No. ",n.ingreso,""),P.Cb(3),P.Hc(" Fecha: ",P.ic(8,4,n.fecha,"dd/MM/yyyy"),""),P.Cb(3),P.Hc(" Bodega: ",n.bodega.descripcion,""),P.Cb(3),P.Hc(" Proveedor: ",n.proveedor.razon_social," ")}}var L,V=function(){return{standalone:!0}},K=((L=function(){function t(o){var n=this;e(this,t),this.ingresoSrvc=o,this.getIngresoEv=new P.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.params={_fdel:H().startOf("month").format(R.b.dbDateFormat),_fal:H().endOf("month").format(R.b.dbDateFormat)},this.loadIngresos=function(){n.ingresoSrvc.get(n.params).subscribe(function(e){e&&(n.lstIngresos=e,n.applyFilter())})},this.getIngreso=function(e){n.getIngresoEv.emit({ingreso:e.ingreso,tipo_movimiento:e.tipo_movimiento.tipo_movimiento,fecha:e.fecha,bodega_origen:e.bodega_origen&&e.bodega_origen.bodega?e.bodega_origen.bodega:null,bodega:e.bodega.bodega,usuario:e.usuario.usuario,comentario:e.comentario,proveedor:e.proveedor.proveedor})},this.pageChange=function(e){n.pageSize=e.pageSize,n.pageIndex=e.pageIndex,n.applyFilter()}}return o(t,[{key:"ngOnInit",value:function(){this.loadIngresos()}},{key:"applyFilter",value:function(){if(this.txtFiltro.length>0){var e=Object(R.c)(this.lstIngresos,this.txtFiltro);this.length=e.length,this.lstIngresosPaged=Object(R.f)(e,this.pageSize,this.pageIndex+1)}else this.length=this.lstIngresos.length,this.lstIngresosPaged=Object(R.f)(this.lstIngresos,this.pageSize,this.pageIndex+1)}}]),t}()).\u0275fac=function(e){return new(e||L)(P.Nb(j))},L.\u0275cmp=P.Hb({type:L,selectors:[["app-lista-ingreso"]],outputs:{getIngresoEv:"getIngresoEv"},decls:13,vars:13,consts:[[1,"mat-elevation-z4","fullWidth",2,"height","100% important"],[1,"fullWidth"],["matInput","","type","date","placeholder","Del",3,"ngModel","ngModelOptions","ngModelChange"],["matInput","","type","date","placeholder","Al",3,"ngModel","ngModelOptions","ngModelChange"],["mat-raised-button","","type","button","color","accent",3,"click"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(e,t){1&e&&(P.Tb(0,"mat-card",0),P.Tb(1,"mat-card-content"),P.Tb(2,"mat-form-field",1),P.Tb(3,"input",2),P.bc("ngModelChange",function(e){return t.params._fdel=e}),P.Sb(),P.Sb(),P.Tb(4,"mat-form-field",1),P.Tb(5,"input",3),P.bc("ngModelChange",function(e){return t.params._fal=e}),P.Sb(),P.Sb(),P.Tb(6,"button",4),P.bc("click",function(){return t.loadIngresos()}),P.Fc(7," Buscar "),P.Sb(),P.Tb(8,"mat-form-field",1),P.Tb(9,"input",5),P.bc("keyup",function(){return t.applyFilter()})("ngModelChange",function(e){return t.txtFiltro=e}),P.Sb(),P.Sb(),P.Tb(10,"mat-nav-list"),P.Dc(11,W,14,7,"mat-list-item",6),P.Sb(),P.Tb(12,"mat-paginator",7),P.bc("page",function(e){return t.pageChange(e)}),P.Sb(),P.Sb(),P.Sb()),2&e&&(P.Cb(3),P.lc("ngModel",t.params._fdel)("ngModelOptions",P.nc(10,V)),P.Cb(2),P.lc("ngModel",t.params._fal)("ngModelOptions",P.nc(11,V)),P.Cb(4),P.lc("ngModel",t.txtFiltro)("ngModelOptions",P.nc(12,V)),P.Cb(2),P.lc("ngForOf",t.lstIngresosPaged),P.Cb(1),P.lc("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[m.a,m.c,g.b,f.b,l.c,l.k,l.n,T.a,d.e,r.l,x.a,d.c,b.a,d.b,$.j],pipes:[r.e],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),L),Q=i("IJgu"),J=i("50cD"),X=i("3e6T"),Y=i("u5dX"),Z=i("NGYs"),ee=i("C5NV"),te=i("yZ4O"),oe=i("DVqU");function ne(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",7),P.bc("click",function(){return P.xc(o),P.fc().showIngresoForm=!0}),P.Tb(1,"mat-icon",8),P.Fc(2,"expand_more"),P.Sb(),P.Sb()}}function ie(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",7),P.bc("click",function(){return P.xc(o),P.fc().showIngresoForm=!1}),P.Tb(1,"mat-icon",8),P.Fc(2,"expand_less"),P.Sb(),P.Sb()}}function ae(e,t){if(1&e&&(P.Tb(0,"mat-option",20),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.tipo_movimiento),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function re(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-form-field",12),P.Tb(1,"mat-label"),P.Fc(2,"Tipo de movimiento"),P.Sb(),P.Tb(3,"mat-select",18),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).ingreso.tipo_movimiento=e}),P.Dc(4,ae,2,2,"mat-option",19),P.Sb(),P.Sb()}if(2&e){var n=P.fc(2);P.Cb(3),P.lc("ngModel",n.ingreso.tipo_movimiento),P.Cb(1),P.lc("ngForOf",n.tiposMovimiento)}}function ce(e,t){if(1&e&&(P.Tb(0,"mat-option",20),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.bodega),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function le(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-form-field",12),P.Tb(1,"mat-label"),P.Fc(2,"Bodega"),P.Sb(),P.Tb(3,"mat-select",21),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).ingreso.bodega=e}),P.Dc(4,ce,2,2,"mat-option",19),P.Sb(),P.Sb()}if(2&e){var n=P.fc(2);P.Cb(3),P.lc("ngModel",n.ingreso.bodega),P.Cb(1),P.lc("ngForOf",n.bodegas)}}function se(e,t){if(1&e&&(P.Tb(0,"mat-option",20),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.bodega),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function ue(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",24),P.bc("click",function(){return P.xc(o),P.fc(3).ingreso.bodega_origen=void 0}),P.Tb(1,"mat-icon",8),P.Fc(2,"close"),P.Sb(),P.Sb()}}function de(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-form-field",12),P.Tb(1,"mat-label"),P.Fc(2,"Bodega de origen"),P.Sb(),P.Tb(3,"mat-select",22),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).ingreso.bodega_origen=e}),P.Dc(4,se,2,2,"mat-option",19),P.Sb(),P.Dc(5,ue,3,0,"button",23),P.Sb()}if(2&e){var n=P.fc(2);P.Cb(3),P.lc("ngModel",n.ingreso.bodega_origen),P.Cb(1),P.lc("ngForOf",n.bodegas),P.Cb(1),P.lc("ngIf",n.ingreso.bodega_origen)}}function be(e,t){if(1&e&&(P.Tb(0,"mat-option",20),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o),P.Cb(1),P.Ic(" (",o.nit,") ",o.razon_social," ")}}var ge=function(){return{standalone:!0}};function fe(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-form-field",12),P.Tb(1,"mat-label"),P.Fc(2,"Proveedor"),P.Sb(),P.Tb(3,"input",25),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).txtProveedorSelected=e})("keyup",function(){P.xc(o);var e=P.fc(2);return e.filtrarProveedores(e.txtProveedorSelected)}),P.Sb(),P.Tb(4,"mat-autocomplete",26,27),P.Dc(6,be,2,3,"mat-option",19),P.Sb(),P.Sb()}if(2&e){var n=P.tc(5),i=P.fc(2);P.Cb(3),P.lc("ngModel",i.txtProveedorSelected)("ngModelOptions",P.nc(5,ge))("matAutocomplete",n),P.Cb(1),P.lc("displayWith",i.displayProveedor),P.Cb(2),P.lc("ngForOf",i.filteredProveedores)}}function me(e,t){if(1&e&&(P.Tb(0,"button",28),P.Fc(1," Guardar "),P.Sb()),2&e){P.fc();var o=P.tc(1),n=P.fc();P.lc("disabled",!o.form.valid||n.bloqueoBotones||1==+n.documento.enviado)}}function pe(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",29),P.bc("click",function(){return P.xc(o),P.fc(2).resetIngreso()}),P.Fc(1," Nuevo "),P.Sb()}}function he(e,t){if(1&e){var o=P.Ub();P.Tb(0,"form",9,10),P.bc("ngSubmit",function(){P.xc(o);var e=P.tc(1),t=P.fc();return e.form.valid&&t.onSubmit()}),P.Dc(2,re,5,2,"mat-form-field",11),P.Tb(3,"mat-form-field",12),P.Tb(4,"input",13),P.bc("ngModelChange",function(e){return P.xc(o),P.fc().ingreso.fecha=e}),P.Sb(),P.Sb(),P.Dc(5,le,5,2,"mat-form-field",11),P.Dc(6,de,6,3,"mat-form-field",11),P.Dc(7,fe,7,6,"mat-form-field",11),P.Tb(8,"mat-form-field",12),P.Tb(9,"input",14),P.bc("ngModelChange",function(e){return P.xc(o),P.fc().ingreso.comentario=e}),P.Sb(),P.Sb(),P.Tb(10,"div",15),P.Dc(11,me,2,1,"button",16),P.Dc(12,pe,2,0,"button",17),P.Sb(),P.Sb()}if(2&e){var n=P.fc();P.Cb(2),P.lc("ngIf",n.saveToDB),P.Cb(2),P.lc("ngModel",n.ingreso.fecha),P.Cb(1),P.lc("ngIf",n.bodega),P.Cb(1),P.lc("ngIf",n.saveToDB),P.Cb(1),P.lc("ngIf",n.saveToDB),P.Cb(2),P.lc("ngModel",n.ingreso.comentario),P.Cb(2),P.lc("ngIf",n.saveToDB),P.Cb(1),P.lc("ngIf",n.ingreso.ingreso)}}function ve(e,t){1&e&&P.Ob(0,"hr")}function Se(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",7),P.bc("click",function(){return P.xc(o),P.fc(2).showDetalleIngresoForm=!0}),P.Tb(1,"mat-icon",8),P.Fc(2,"expand_more"),P.Sb(),P.Sb()}}function Ce(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",7),P.bc("click",function(){return P.xc(o),P.fc(2).showDetalleIngresoForm=!1}),P.Tb(1,"mat-icon",8),P.Fc(2,"expand_less"),P.Sb(),P.Sb()}}function Te(e,t){if(1&e&&(P.Tb(0,"mat-option",20),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function Me(e,t){if(1&e&&(P.Tb(0,"mat-option",20),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.presentacion),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function De(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-form-field",12),P.Tb(1,"mat-label"),P.Fc(2,"Presentaci\xf3n"),P.Sb(),P.Tb(3,"mat-select",38),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(3).detalleIngreso.presentacion=e}),P.Dc(4,Me,2,2,"mat-option",19),P.Sb(),P.Sb()}if(2&e){var n=P.fc(3);P.Cb(3),P.lc("ngModel",n.detalleIngreso.presentacion),P.Cb(1),P.lc("ngForOf",n.fltrPresentaciones)}}function Ie(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-form-field",12),P.Tb(1,"input",39),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(3).detalleIngreso.cantidad_utilizada=e}),P.Sb(),P.Sb()}if(2&e){var n=P.fc(3);P.Cb(1),P.lc("ngModel",n.detalleIngreso.cantidad_utilizada)}}function Fe(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-form-field",12),P.Tb(1,"input",40),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(3).detalleIngreso.precio_unitario=e})("change",function(){P.xc(o);var e=P.fc(3);return e.detalleIngreso.precio_total=+e.detalleIngreso.precio_unitario*+e.detalleIngreso.cantidad}),P.Sb(),P.Sb()}if(2&e){var n=P.fc(3);P.Cb(1),P.lc("ngModel",n.detalleIngreso.precio_unitario)}}function xe(e,t){if(1&e&&(P.Tb(0,"button",28),P.Fc(1," Guardar "),P.Sb()),2&e){P.fc();var o=P.tc(1),n=P.fc(2);P.lc("disabled",!o.form.valid||n.bloqueoBotones||1==+n.documento.enviado||+n.detalleIngreso.cantidad<1)}}var _e=function(){return[2,3]};function ye(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",41),P.bc("click",function(){return P.xc(o),P.fc(3).addToDetail()}),P.Fc(1," Guardar producci\xf3n "),P.Sb()}if(2&e){P.fc();var n=P.tc(1),i=P.fc(2);P.lc("disabled",!i.detalleIngreso.articulo||!n.form.valid||P.nc(1,_e).indexOf(+i.ingreso.estatus_movimiento)>=0||+i.detalleIngreso.cantidad<1)}}function ke(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",29),P.bc("click",function(){return P.xc(o),P.fc(3).resetDetalleIngreso()}),P.Fc(1," Nuevo "),P.Sb()}}function Oe(e,t){if(1&e){var o=P.Ub();P.Tb(0,"form",9,32),P.bc("ngSubmit",function(){P.xc(o);var e=P.tc(1),t=P.fc(2);return e.form.valid&&t.onSubmitDetail()}),P.Tb(2,"mat-form-field",12),P.Tb(3,"mat-label"),P.Fc(4,"Art\xedculo"),P.Sb(),P.Tb(5,"input",33),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).txtArticuloSelected=e})("keyup",function(){P.xc(o);var e=P.fc(2);return e.filtrarArticulos(e.txtArticuloSelected)}),P.Sb(),P.Tb(6,"mat-autocomplete",34,35),P.bc("optionSelected",function(){return P.xc(o),P.fc(2).setPresentaciones()}),P.Dc(8,Te,2,2,"mat-option",19),P.Sb(),P.Sb(),P.Dc(9,De,5,2,"mat-form-field",11),P.Dc(10,Ie,2,1,"mat-form-field",11),P.Tb(11,"mat-form-field",12),P.Tb(12,"input",36),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).detalleIngreso.cantidad=e})("change",function(){P.xc(o);var e=P.fc(2);return e.detalleIngreso.precio_total=+e.detalleIngreso.precio_unitario*+e.detalleIngreso.cantidad}),P.Sb(),P.Sb(),P.Dc(13,Fe,2,1,"mat-form-field",11),P.Tb(14,"div",15),P.Dc(15,xe,2,1,"button",16),P.Dc(16,ye,2,2,"button",37),P.Dc(17,ke,2,0,"button",17),P.Sb(),P.Sb()}if(2&e){var n=P.tc(7),i=P.fc(2);P.Cb(5),P.lc("ngModel",i.txtArticuloSelected)("ngModelOptions",P.nc(12,ge))("matAutocomplete",n),P.Cb(1),P.lc("displayWith",i.displayArticulo),P.Cb(2),P.lc("ngForOf",i.filteredArticulos),P.Cb(1),P.lc("ngIf",i.saveToDB),P.Cb(1),P.lc("ngIf",!i.bodega),P.Cb(2),P.lc("ngModel",i.detalleIngreso.cantidad),P.Cb(1),P.lc("ngIf",i.saveToDB),P.Cb(2),P.lc("ngIf",i.saveToDB),P.Cb(1),P.lc("ngIf",!i.saveToDB),P.Cb(1),P.lc("ngIf",i.detalleIngreso.ingreso_detalle)}}function Ee(e,t){1&e&&P.Ob(0,"hr")}function we(e,t){1&e&&(P.Tb(0,"th",56),P.Fc(1,"Art\xedculo"),P.Sb())}function Ae(e,t){if(1&e&&(P.Tb(0,"td",57),P.Fc(1),P.Sb()),2&e){var o=t.$implicit,n=P.fc(3);P.Cb(1),P.Hc(" ",n.saveToDB?o.articulo.descripcion:n.getDescripcionArticulo(o.articulo),"")}}function Be(e,t){1&e&&(P.Tb(0,"th",56),P.Fc(1,"Presentaci\xf3n"),P.Sb())}function Re(e,t){if(1&e&&(P.Tb(0,"td",57),P.Fc(1),P.Sb()),2&e){var o=t.$implicit,n=P.fc(3);P.Cb(1),P.Hc(" ",n.saveToDB?o.presentacion.descripcion:n.getDescripcionPresentacion(o.presentacion)," ")}}function He(e,t){1&e&&(P.Tb(0,"th",58),P.Fc(1,"Cantidad a Utilizar"),P.Sb())}function Pe(e,t){if(1&e&&(P.Tb(0,"td",59),P.Fc(1),P.gc(2,"number"),P.Sb()),2&e){var o=t.$implicit;P.Cb(1),P.Hc("",P.ic(2,1,o.cantidad_utilizada,"1.2-2")," ")}}function Ne(e,t){1&e&&(P.Tb(0,"th",58),P.Fc(1,"Cantidad"),P.Sb())}function Ue(e,t){if(1&e&&(P.Tb(0,"td",59),P.Fc(1),P.gc(2,"number"),P.Sb()),2&e){var o=t.$implicit;P.Cb(1),P.Hc("",P.ic(2,1,o.cantidad,"1.2-2")," ")}}function Ge(e,t){1&e&&(P.Tb(0,"th",58),P.Fc(1,"Costo Unitario Con IVA"),P.Sb())}function ze(e,t){if(1&e&&(P.Tb(0,"td",59),P.Fc(1),P.gc(2,"number"),P.Sb()),2&e){var o=t.$implicit;P.Cb(1),P.Hc("",P.ic(2,1,o.precio_unitario,"1.2-2")," ")}}function qe(e,t){1&e&&(P.Tb(0,"th",58),P.Fc(1,"Costo Total con IVA"),P.Sb())}function je(e,t){if(1&e&&(P.Tb(0,"td",59),P.Fc(1),P.gc(2,"number"),P.Sb()),2&e){var o=t.$implicit;P.Cb(1),P.Gc(P.ic(2,1,o.precio_total,"1.2-2"))}}function $e(e,t){1&e&&(P.Tb(0,"th",56),P.Fc(1,"\xa0"),P.Sb())}function We(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",41),P.bc("click",function(){P.xc(o);var e=P.fc().$implicit;return P.fc(3).getDetalleIngreso(e.ingreso,e.ingreso_detalle)}),P.Fc(1," Editar "),P.Sb()}if(2&e){var n=P.fc(4);P.lc("disabled",n.bloqueoBotones||1==+n.documento.enviado)}}function Le(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",41),P.bc("click",function(){P.xc(o);var e=P.fc().$implicit;return P.fc(3).editFromDetail(e.articulo)}),P.Fc(1," Editar "),P.Sb()}if(2&e){var n=P.fc(4);P.lc("disabled",P.nc(1,_e).indexOf(+n.ingreso.estatus_movimiento)>=0||n.bloqueoBotones)}}function Ve(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",41),P.bc("click",function(){P.xc(o);var e=P.fc().$implicit;return P.fc(3).removeFromDetail(e.articulo)}),P.Fc(1," Eliminar "),P.Sb()}if(2&e){var n=P.fc(4);P.lc("disabled",P.nc(1,_e).indexOf(+n.ingreso.estatus_movimiento)>=0||n.bloqueoBotones)}}function Ke(e,t){if(1&e&&(P.Tb(0,"td",57),P.Dc(1,We,2,1,"button",37),P.Dc(2,Le,2,2,"button",37),P.Dc(3,Ve,2,2,"button",37),P.Sb()),2&e){var o=P.fc(3);P.Cb(1),P.lc("ngIf",o.saveToDB),P.Cb(1),P.lc("ngIf",!o.saveToDB),P.Cb(1),P.lc("ngIf",!o.saveToDB)}}function Qe(e,t){1&e&&P.Ob(0,"td",57)}function Je(e,t){1&e&&P.Ob(0,"tr",60)}function Xe(e,t){1&e&&P.Ob(0,"tr",61)}function Ye(e,t){if(1&e&&(P.Tb(0,"table",42),P.Rb(1,43),P.Dc(2,we,2,0,"th",44),P.Dc(3,Ae,2,1,"td",45),P.Qb(),P.Rb(4,46),P.Dc(5,Be,2,0,"th",44),P.Dc(6,Re,2,1,"td",45),P.Qb(),P.Rb(7,47),P.Dc(8,He,2,0,"th",48),P.Dc(9,Pe,3,4,"td",49),P.Qb(),P.Rb(10,50),P.Dc(11,Ne,2,0,"th",48),P.Dc(12,Ue,3,4,"td",49),P.Qb(),P.Rb(13,51),P.Dc(14,Ge,2,0,"th",48),P.Dc(15,ze,3,4,"td",49),P.Qb(),P.Rb(16,52),P.Dc(17,qe,2,0,"th",48),P.Dc(18,je,3,4,"td",49),P.Qb(),P.Rb(19,53),P.Dc(20,$e,2,0,"th",44),P.Dc(21,Ke,4,3,"td",45),P.Dc(22,Qe,1,0,"td",45),P.Qb(),P.Dc(23,Je,1,0,"tr",54),P.Dc(24,Xe,1,0,"tr",55),P.Sb()),2&e){var o=P.fc(2);P.lc("dataSource",o.dataSource),P.Cb(23),P.lc("matHeaderRowDef",o.displayedColumns),P.Cb(1),P.lc("matRowDefColumns",o.displayedColumns)}}function Ze(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-card",1),P.Tb(1,"mat-card-title"),P.Tb(2,"h4"),P.Fc(3),P.Dc(4,Se,3,0,"button",2),P.Dc(5,Ce,3,0,"button",2),P.Sb(),P.Sb(),P.Tb(6,"mat-card-content"),P.Dc(7,Oe,18,13,"form",3),P.Dc(8,Ee,1,0,"hr",4),P.Tb(9,"mat-form-field",12),P.Tb(10,"input",30),P.bc("keyup",function(e){return P.xc(o),P.fc().applyFilter(e.target.value)}),P.Sb(),P.Sb(),P.Dc(11,Ye,25,3,"table",31),P.Sb(),P.Sb()}if(2&e){var n=P.fc();P.Cb(3),P.Ic(" Detalle del ingreso ",n.saveToDB?"No.":""," ",n.ingreso.ingreso," "),P.Cb(1),P.lc("ngIf",!n.showDetalleIngresoForm),P.Cb(1),P.lc("ngIf",n.showDetalleIngresoForm),P.Cb(2),P.lc("ngIf",n.showDetalleIngresoForm),P.Cb(1),P.lc("ngIf",n.detallesIngreso.length>0),P.Cb(3),P.lc("ngIf",n.detallesIngreso.length>0)}}function et(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",7),P.bc("click",function(){return P.xc(o),P.fc(2).showDocumentoForm=!0}),P.Tb(1,"mat-icon",8),P.Fc(2,"expand_more"),P.Sb(),P.Sb()}}function tt(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",7),P.bc("click",function(){return P.xc(o),P.fc(2).showDocumentoForm=!1}),P.Tb(1,"mat-icon",8),P.Fc(2,"expand_less"),P.Sb(),P.Sb()}}function ot(e,t){if(1&e&&(P.Tb(0,"mat-option",20),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.documento_tipo),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function nt(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-form-field",12),P.Tb(1,"mat-label"),P.Fc(2,"Tipo de documento"),P.Sb(),P.Tb(3,"mat-select",68),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(3).documento.documento_tipo=e}),P.Dc(4,ot,2,2,"mat-option",19),P.Sb(),P.Sb()}if(2&e){var n=P.fc(3);P.Cb(3),P.lc("ngModel",n.documento.documento_tipo)("disabled",1==+n.documento.enviado),P.Cb(1),P.lc("ngForOf",n.documentosTipo)}}function it(e,t){if(1&e&&(P.Tb(0,"mat-option",20),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.tipo_compra_venta),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function at(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-form-field",12),P.Tb(1,"mat-label"),P.Fc(2,"Tipo de compra"),P.Sb(),P.Tb(3,"mat-select",69),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(3).documento.tipo_compra_venta=e}),P.Dc(4,it,2,2,"mat-option",19),P.Sb(),P.Sb()}if(2&e){var n=P.fc(3);P.Cb(3),P.lc("ngModel",n.documento.tipo_compra_venta)("disabled",1==+n.documento.enviado),P.Cb(1),P.lc("ngForOf",n.tiposCompraVenta)}}function rt(e,t){if(1&e&&(P.Tb(0,"button",28),P.Fc(1," Guardar detalle "),P.Sb()),2&e){P.fc();var o=P.tc(1),n=P.fc(2);P.lc("disabled",!o.form.valid||n.bloqueoBotones||1==+n.documento.enviado)}}function ct(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",70),P.bc("click",function(){return P.xc(o),P.fc(3).enviarAConta()}),P.Fc(1," Enviar a contabilidad "),P.Sb()}if(2&e){P.fc();var n=P.tc(1),i=P.fc(2);P.lc("disabled",!n.form.valid||i.bloqueoBotones||1==+i.documento.enviado)}}function lt(e,t){if(1&e){var o=P.Ub();P.Tb(0,"form",9,63),P.bc("ngSubmit",function(){P.xc(o);var e=P.tc(1),t=P.fc(2);return e.form.valid&&t.submitDocumento()}),P.Dc(2,nt,5,3,"mat-form-field",11),P.Tb(3,"mat-form-field",12),P.Tb(4,"input",64),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).documento.serie=e}),P.Sb(),P.Sb(),P.Tb(5,"mat-form-field",12),P.Tb(6,"input",65),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).documento.numero=e}),P.Sb(),P.Sb(),P.Tb(7,"mat-form-field",12),P.Tb(8,"input",66),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).documento.fecha=e}),P.Sb(),P.Sb(),P.Dc(9,at,5,3,"mat-form-field",11),P.Tb(10,"div",15),P.Dc(11,rt,2,1,"button",16),P.Dc(12,ct,2,1,"button",67),P.Sb(),P.Sb()}if(2&e){var n=P.fc(2);P.Cb(2),P.lc("ngIf",n.saveToDB),P.Cb(2),P.lc("ngModel",n.documento.serie)("disabled",1==+n.documento.enviado),P.Cb(2),P.lc("ngModel",n.documento.numero)("disabled",1==+n.documento.enviado),P.Cb(2),P.lc("ngModel",n.documento.fecha)("disabled",1==+n.documento.enviado),P.Cb(1),P.lc("ngIf",n.saveToDB),P.Cb(2),P.lc("ngIf",n.saveToDB),P.Cb(1),P.lc("ngIf",n.saveToDB&&+n.documento.documento>0&&0==+n.documento.enviado)}}function st(e,t){if(1&e&&(P.Tb(0,"mat-tab",62),P.Tb(1,"mat-card",1),P.Tb(2,"mat-card-title"),P.Tb(3,"h4"),P.Fc(4),P.Dc(5,et,3,0,"button",2),P.Dc(6,tt,3,0,"button",2),P.Sb(),P.Sb(),P.Tb(7,"mat-card-content"),P.Dc(8,lt,13,10,"form",3),P.Sb(),P.Sb(),P.Sb()),2&e){var o=P.fc();P.Cb(4),P.Hc(" Documento del ingreso",o.ingreso.ingreso?" No. "+o.ingreso.ingreso:""," "),P.Cb(1),P.lc("ngIf",!o.showDocumentoForm),P.Cb(1),P.lc("ngIf",o.showDocumentoForm),P.Cb(2),P.lc("ngIf",o.showDocumentoForm)}}var ut,dt,bt,gt=((ut=function(){function t(o,n,i,a,r,c,l,s,u,d,b){var g=this;e(this,t),this.dialog=o,this.snackBar=n,this.ls=i,this.ingresoSrvc=a,this.proveedorSrvc=r,this.tipoMovimientoSrvc=c,this.bodegaSrvc=l,this.articuloSrvc=s,this.presentacinSrvc=u,this.documentoTipoSrvc=d,this.tipoCompraVentaSrvc=b,this.saveToDB=!0,this.bodega=!0,this.produccion=!1,this.ingresoSavedEv=new P.o,this.showIngresoForm=!0,this.showDetalleIngresoForm=!0,this.showDocumentoForm=!0,this.detallesIngreso=[],this.displayedColumns=["articulo","presentacion","cantidad","costo_unitario","costo_total","deleteItem"],this.tiposMovimiento=[],this.proveedores=[],this.filteredProveedores=[],this.bodegas=[],this.articulos=[],this.filteredArticulos=[],this.presentaciones=[],this.fltrPresentaciones=[],this.esMovil=!1,this.bloqueoBotones=!1,this.txtArticuloSelected=void 0,this.txtProveedorSelected=void 0,this.documentosTipo=[],this.tiposCompraVenta=[],this.loadTiposMovimiento=function(){g.tipoMovimientoSrvc.get({ingreso:1}).subscribe(function(e){e&&(g.tiposMovimiento=e)})},this.loadProveedores=function(){g.proveedorSrvc.get().subscribe(function(e){e&&(g.proveedores=e)})},this.loadBodegas=function(){g.bodegaSrvc.get({sede:+g.ls.get(R.b.usrTokenVar).sede||0}).subscribe(function(e){e&&(g.bodegas=e)})},this.loadPresentaciones=function(){g.presentacinSrvc.get().subscribe(function(e){e&&(g.presentaciones=e)})},this.loadDocumentosTipo=function(){g.documentoTipoSrvc.get().subscribe(function(e){e&&(g.documentosTipo=e)})},this.loadTiposCompraVenta=function(){g.tipoCompraVentaSrvc.get().subscribe(function(e){e&&(g.tiposCompraVenta=e)})},this.removeFromDetail=function(e){var t=g.detallesIngreso.findIndex(function(t){return+t.articulo==+e});t>=0&&(g.detallesIngreso.splice(t,1),g.updateTableDataSource())},this.resetIngreso=function(){g.ingreso={ingreso:null,tipo_movimiento:null,fecha:H().format(R.b.dbDateFormat),bodega:null,usuario:g.ls.get(R.b.usrTokenVar).idusr||0,comentario:null,proveedor:null,estatus_movimiento:1},g.resetDetalleIngreso(),g.detallesIngreso=[],g.resetDocumento(),g.updateTableDataSource(),g.txtProveedorSelected=void 0},this.onSubmit=function(){g.bloqueoBotones=!0,g.ingresoSrvc.save(g.ingreso).subscribe(function(e){g.resetIngreso(),e.exito&&(g.ingreso=e.ingreso,g.setProveedor(+g.ingreso.proveedor)),g.ingresoSavedEv.emit(),g.bloqueoBotones=!1})},this.loadArticulos=function(){var e={};g.produccion&&(e={produccion:1}),g.articuloSrvc.getArticulosIngreso(e).subscribe(function(e){e&&(g.articulos=e)})},this.resetDetalleIngreso=function(){g.detalleIngreso={ingreso_detalle:null,ingreso:g.ingreso.ingreso?g.ingreso.ingreso:null,articulo:null,cantidad:null,precio_unitario:null,precio_total:null,presentacion:0},g.txtArticuloSelected=void 0},this.loadDetalleIngreso=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+g.ingreso.ingreso;g.ingresoSrvc.getDetalle(e,{ingreso:e}).subscribe(function(e){e&&(g.detallesIngreso=e,g.updateTableDataSource())})},this.getDetalleIngreso=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+g.ingreso.ingreso,t=arguments.length>1?arguments[1]:void 0;g.ingresoSrvc.getDetalle(e,{ingreso_detalle:t}).subscribe(function(e){e&&(g.detalleIngreso={ingreso_detalle:e[0].ingreso_detalle,ingreso:e[0].ingreso,articulo:e[0].articulo.articulo,cantidad:+e[0].cantidad,precio_unitario:+e[0].precio_unitario,precio_total:+e[0].precio_total,presentacion:e[0].presentacion.presentacion},g.setPresentaciones(),g.txtArticuloSelected=e[0].articulo,g.showDetalleIngresoForm=!0)})},this.onSubmitDetail=function(){g.bloqueoBotones=!0,g.detalleIngreso.ingreso=g.ingreso.ingreso,g.detalleIngreso.precio_total=+g.detalleIngreso.cantidad*+g.detalleIngreso.precio_unitario,+g.detalleIngreso.cantidad<1&&(g.detalleIngreso.cantidad=1),g.ingresoSrvc.saveDetalle(g.detalleIngreso).subscribe(function(e){e&&(g.loadDetalleIngreso(),g.resetDetalleIngreso()),g.bloqueoBotones=!1})},this.agregaADetalle=function(){var e,t=g.detallesIngreso.findIndex(function(e){return+e.articulo==+g.detalleIngreso.articulo});t>-1&&g.detallesIngreso.splice(t,1),e=g.articulos.filter(function(e){return+e.articulo==g.detalleIngreso.articulo}),g.detalleIngreso.presentacion=e[0].presentacion_reporte,+g.detalleIngreso.cantidad<1&&(g.detalleIngreso.cantidad=1),g.detallesIngreso.push(g.detalleIngreso),g.resetDetalleIngreso(),g.updateTableDataSource()},this.addToDetail=function(){g.detalleIngreso.cantidad>0?g.produccion||g.detalleIngreso.cantidad_utilizada>0?g.agregaADetalle():g.snackBar.open("ERROR: La cantidad a utilizar debe ser mayor a 0","Egreso",{duration:3e3}):g.snackBar.open("ERROR: La cantidad debe ser mayor a 0","Egreso",{duration:3e3})},this.editFromDetail=function(e){var t=g.detallesIngreso.filter(function(t){return+t.articulo==+e})[0];g.detalleIngreso={ingreso_detalle:t.ingreso_detalle,ingreso:t.ingreso,articulo:t.articulo,cantidad:+t.cantidad<1?1:t.cantidad,precio_unitario:t.precio_unitario,precio_total:t.precio_total,presentacion:t.presentacion,cantidad_utilizada:t.cantidad_utilizada},g.setPresentaciones(),g.txtArticuloSelected=g.articulos.filter(function(e){return+e.articulo==g.detalleIngreso.articulo})[0]},this.getDescripcionArticulo=function(e){return g.articulos.find(function(t){return+t.articulo==+e}).descripcion||""},this.getDescripcionPresentacion=function(e){return g.presentaciones.find(function(t){return+t.presentacion==+e}).descripcion||""},this.updateTableDataSource=function(){g.dataSource=new v.l(g.detallesIngreso),g.dataSource.filterPredicate=function(e,t){return e.articulo.descripcion.toLowerCase().includes(t)}},this.eliminarArticulo=function(e){g.detallesIngreso.splice(g.detallesIngreso.findIndex(function(t){return t.ingreso_detalle===e.ingreso_detalle}),1),g.updateTableDataSource()},this.filtrarArticulos=function(e){if(e&&"string"==typeof e){var t=e.toLowerCase();g.filteredArticulos=g.articulos.filter(function(e){return e.descripcion.toLowerCase().includes(t)})}else g.filteredArticulos=g.articulos},this.displayArticulo=function(e){if(e)return g.detalleIngreso.articulo=e.articulo,e.descripcion},this.filtrarProveedores=function(e){if(e&&"string"==typeof e){var t=e.toLowerCase();g.filteredProveedores=g.proveedores.filter(function(e){return e.razon_social.toLowerCase().includes(t)||e.nit.toLowerCase().includes(t)})}else g.filteredProveedores=g.proveedores},this.displayProveedor=function(e){if(e)return g.ingreso.proveedor=e.proveedor,"(".concat(e.nit,") ").concat(e.razon_social)},this.setPresentaciones=function(){g.fltrPresentaciones=[];var e=g.articulos.findIndex(function(e){return+e.articulo==+g.detalleIngreso.articulo}),t=g.articulos[e];g.fltrPresentaciones=g.presentaciones.filter(function(e){return+e.medida.medida==+t.presentacion.medida})},this.setProveedor=function(e){return g.txtProveedorSelected=g.proveedores.find(function(t){return+t.proveedor===e})},this.applyFilter=function(e){g.dataSource.filter=e.toLocaleLowerCase()},this.resetDocumento=function(){return g.documento={documento:null,ingreso:null,documento_tipo:null,serie:null,numero:null,fecha:null,tipo_compra_venta:null,enviado:0}},this.setDocumentoIngreso=function(e){g.documento={documento:+e.documento,ingreso:+e.ingreso,documento_tipo:e.documento_tipo.documento_tipo,serie:e.serie,numero:e.numero,fecha:e.fecha,tipo_compra_venta:e.tipo_compra_venta.tipo_compra_venta,enviado:e.enviado}},this.loadDocumento=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.ingreso.ingreso||null;e&&g.ingresoSrvc.getDocumento({ingreso:e}).subscribe(function(e){e&&e.length>0?g.setDocumentoIngreso(e[0]):g.resetDocumento()})},this.submitDocumento=function(){g.documento.ingreso=g.ingreso.ingreso,g.ingresoSrvc.saveDocumento(g.documento).subscribe(function(e){e.exito?(g.setDocumentoIngreso(e.documento),g.snackBar.open("Documento guardado con \xe9xito.","Ingreso",{duration:3e3})):g.snackBar.open("ERROR: ".concat(e.mensaje),"Ingreso",{duration:7e3})})},this.enviarAConta=function(){var e;+(null===(e=g.documento)||void 0===e?void 0:e.documento)>0&&g.dialog.open(Q.a,{maxWidth:"400px",data:new Q.b("Env\xedo a contabilidad","Una vez enviado a contabilidad no podr\xe1 modificar el ingreso ni el documento. \xbfDesea continuar?","S\xed","No")}).afterClosed().subscribe(function(e){e&&g.ingresoSrvc.enviarDocumentoAConta(g.documento.documento).subscribe(function(e){e.exito?(g.documento=e.documento,g.snackBar.open("Documento enviado a contabilidad.","Ingreso",{duration:3e3})):g.snackBar.open("ERROR: ".concat(e.mensaje),"Ingreso",{duration:7e3})})})}}return o(t,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(R.b.usrTokenVar).enmovil||!1,this.resetIngreso(),this.loadTiposMovimiento(),this.loadProveedores(),this.loadBodegas(),this.loadArticulos(),this.loadPresentaciones(),this.loadDocumentosTipo(),this.loadTiposCompraVenta(),this.bodega||(this.displayedColumns=["cantidad_utilizada","articulo","presentacion","cantidad","deleteItem"]),this.produccion&&(this.displayedColumns=["articulo","presentacion","cantidad","deleteItem"])}}]),t}()).\u0275fac=function(e){return new(e||ut)(P.Nb(_.b),P.Nb(M.b),P.Nb(N.a),P.Nb(j),P.Nb(J.a),P.Nb(X.a),P.Nb(Y.a),P.Nb(Z.a),P.Nb(ee.a),P.Nb(te.a),P.Nb(oe.a))},ut.\u0275cmp=P.Hb({type:ut,selectors:[["app-form-ingreso"]],inputs:{ingreso:"ingreso",saveToDB:"saveToDB",bodega:"bodega",produccion:"produccion"},outputs:{ingresoSavedEv:"ingresoSavedEv"},decls:13,vars:7,consts:[["label","Ingreso"],[1,"mat-elevation-z4","fullWidth"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],["label","Documento",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmIngreso","ngForm"],["class","fullWidth",4,"ngIf"],[1,"fullWidth"],["matInput","","type","date","placeholder","Fecha","name","fecha","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Comentarios","name","comentario",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent","class","btnAccion",3,"disabled",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["name","tipo_movimiento","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["name","bodega","required","",3,"ngModel","ngModelChange"],["name","bodega_origen",3,"ngModel","ngModelChange"],["type","button","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["type","button","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["type","text","placeholder","Proveedor","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith"],["autoProveedores","matAutocomplete"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",3,"click"],["matInput","","placeholder","Buscar",3,"keyup"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleIngreso","ngForm"],["type","text","placeholder","Art\xedculo","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith","optionSelected"],["autoArticulos","matAutocomplete"],["matInput","","placeholder","Cantidad","name","cantidad","type","number","step","0.01","min","1","required","",3,"ngModel","ngModelChange","change"],["mat-raised-button","","type","button","color","accent",3,"disabled","click",4,"ngIf"],["name","presentacion","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Cantidad a Utilizar","name","cantidad_utilizada","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Costo unitario Con IVA","name","precio_unitario","type","number","step","0.01","required","",3,"ngModel","ngModelChange","change"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","articulo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","presentacion"],["matColumnDef","cantidad_utilizada"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","cantidad"],["matColumnDef","costo_unitario"],["matColumnDef","costo_total"],["matColumnDef","deleteItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-header-row",""],["mat-row",""],["label","Documento"],["frmDocumento","ngForm"],["matInput","","type","text","placeholder","Serie","name","serie","minlength","1","maxlength","50","required","",3,"ngModel","disabled","ngModelChange"],["matInput","","type","text","placeholder","N\xfamero","name","numero","minlength","1","maxlength","50","required","",3,"ngModel","disabled","ngModelChange"],["matInput","","type","date","placeholder","Fecha","name","fecha","required","",3,"ngModel","disabled","ngModelChange"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"disabled","click",4,"ngIf"],["name","documento_tipo","required","",3,"ngModel","disabled","ngModelChange"],["name","tipo_compra_venta","required","",3,"ngModel","disabled","ngModelChange"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"]],template:function(e,t){1&e&&(P.Tb(0,"mat-tab-group"),P.Tb(1,"mat-tab",0),P.Tb(2,"mat-card",1),P.Tb(3,"mat-card-title"),P.Tb(4,"h4"),P.Fc(5),P.Dc(6,ne,3,0,"button",2),P.Dc(7,ie,3,0,"button",2),P.Sb(),P.Sb(),P.Tb(8,"mat-card-content"),P.Dc(9,he,13,8,"form",3),P.Sb(),P.Sb(),P.Dc(10,ve,1,0,"hr",4),P.Dc(11,Ze,12,7,"mat-card",5),P.Sb(),P.Dc(12,st,9,4,"mat-tab",6),P.Sb()),2&e&&(P.Cb(5),P.Hc(" Ingreso",t.ingreso.ingreso?" No. "+t.ingreso.ingreso:""," "),P.Cb(1),P.lc("ngIf",!t.showIngresoForm),P.Cb(1),P.lc("ngIf",t.showIngresoForm),P.Cb(2),P.lc("ngIf",t.showIngresoForm),P.Cb(1),P.lc("ngIf",t.ingreso.ingreso||!t.saveToDB),P.Cb(1),P.lc("ngIf",t.ingreso.ingreso||!t.saveToDB),P.Cb(1),P.lc("ngIf",+t.ingreso.ingreso>0))},directives:[h.b,h.a,m.a,m.h,r.m,m.c,T.a,b.a,l.r,l.l,l.m,g.b,f.b,l.c,l.p,l.k,l.n,g.f,S.a,r.l,$.m,g.g,O.c,O.a,l.o,v.k,v.c,v.e,v.b,v.g,v.j,v.d,v.a,v.f,v.i,l.g,l.f],pipes:[r.f],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}"]}),ut),ft=["lstIngreso"],mt=["frmIngreso"],pt=((bt=function(){function t(o){var n=this;e(this,t),this.ls=o,this.breakpoint=2,this.onWindowResize=function(e){n.breakpoint=e.target.innerWidth<=360?1:2},this.setIngreso=function(e){n.ingreso=e,n.frmIngreso.setProveedor(+n.ingreso.proveedor),n.frmIngreso.loadDetalleIngreso(+n.ingreso.ingreso),n.frmIngreso.resetDetalleIngreso(),n.frmIngreso.loadDocumento(n.ingreso.ingreso)},this.refreshIngresoList=function(){n.lstIngresoComponent.loadIngresos()},this.ingreso={ingreso:null,tipo_movimiento:null,fecha:H().format(R.b.dbDateFormat),bodega:null,usuario:this.ls.get(R.b.usrTokenVar).idusr||0,comentario:null,proveedor:null}}return o(t,[{key:"ngOnInit",value:function(){this.breakpoint=window.innerWidth<=360?1:2}}]),t}()).\u0275fac=function(e){return new(e||bt)(P.Nb(N.a))},bt.\u0275cmp=P.Hb({type:bt,selectors:[["app-ingreso"]],viewQuery:function(e,t){var o;1&e&&(P.Kc(ft,1),P.Kc(mt,1)),2&e&&(P.sc(o=P.cc())&&(t.lstIngresoComponent=o.first),P.sc(o=P.cc())&&(t.frmIngreso=o.first))},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getIngresoEv"],["lstIngreso",""],[1,"col","m7","s12"],[3,"ingreso","ingresoSavedEv"],["frmIngreso",""]],template:function(e,t){1&e&&(P.Tb(0,"div",0),P.Tb(1,"div",1),P.Tb(2,"app-lista-ingreso",2,3),P.bc("getIngresoEv",function(e){return t.setIngreso(e)}),P.Sb(),P.Sb(),P.Tb(4,"div",4),P.Tb(5,"app-form-ingreso",5,6),P.bc("ingresoSavedEv",function(){return t.refreshIngresoList()}),P.Sb(),P.Sb(),P.Sb()),2&e&&(P.Cb(5),P.lc("ingreso",t.ingreso))},directives:[K,gt],styles:[""]}),bt),ht=((dt=function(){function t(o){e(this,t),this.http=o,this.egresoUrl="egreso",this.srvcErrHndl=new U.a}return o(t,[{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("".concat(R.b.urlWms,"/").concat(this.egresoUrl,"/buscar_egreso?").concat(q.stringify(e))).pipe(Object(G.a)(R.b.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"save",value:function(e){return this.http.post("".concat(R.b.urlWms,"/").concat(this.egresoUrl,"/guardar").concat(+e.egreso>0?"/"+e.egreso:""),e).pipe(Object(G.a)(R.b.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"getDetalle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.http.get("".concat(R.b.urlWms,"/").concat(this.egresoUrl,"/buscar_detalle/").concat(e,"?").concat(q.stringify(t))).pipe(Object(G.a)(R.b.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"saveDetalle",value:function(e){return this.http.post("".concat(R.b.urlWms,"/").concat(this.egresoUrl,"/guardar_detalle/").concat(e.egreso).concat(+e.egreso_detalle>0?"/"+e.egreso_detalle:""),e).pipe(Object(G.a)(R.b.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(e){return new(e||dt)(P.Xb(c.b))},dt.\u0275prov=P.Jb({token:dt,factory:dt.\u0275fac,providedIn:"root"}),dt),vt=function(){return{standalone:!0}};function St(e,t){if(1&e){var o=P.Ub();P.Tb(0,"input",9),P.bc("input",function(){return P.xc(o),P.fc().applyFilter()})("ngModelChange",function(e){return P.xc(o),P.fc().txtFiltro=e}),P.Sb()}if(2&e){var n=P.fc();P.lc("matKeyboard",n.keyboardLayout)("ngModel",n.txtFiltro)("ngModelOptions",P.nc(3,vt))}}function Ct(e,t){if(1&e){var o=P.Ub();P.Tb(0,"input",10),P.bc("keyup",function(){return P.xc(o),P.fc().applyFilter()})("ngModelChange",function(e){return P.xc(o),P.fc().txtFiltro=e}),P.Sb()}if(2&e){var n=P.fc();P.lc("ngModel",n.txtFiltro)("ngModelOptions",P.nc(2,vt))}}function Tt(e,t){if(1&e&&(P.Tb(0,"span",13),P.Fc(1),P.Sb()),2&e){var o=P.fc().$implicit;P.Cb(1),P.Hc("Comanda: #",o.idcomandafox,"")}}function Mt(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-list-item",11),P.bc("click",function(){P.xc(o);var e=t.$implicit;return P.fc().getEgreso(e)}),P.Tb(1,"mat-icon",12),P.Fc(2,"trending_down"),P.Sb(),P.Tb(3,"h5",13),P.Fc(4),P.Sb(),P.Ob(5,"br"),P.Tb(6,"p",13),P.Fc(7),P.gc(8,"date"),P.Ob(9,"br"),P.Fc(10),P.Ob(11,"br"),P.Sb(),P.Dc(12,Tt,2,1,"span",14),P.Sb()}if(2&e){var n=t.$implicit;P.Cb(4),P.Hc("No. ",n.egreso,""),P.Cb(3),P.Hc(" Fecha: ",P.ic(8,4,n.fecha,"dd/MM/yyyy"),""),P.Cb(3),P.Hc(" Bodega: ",n.bodega.descripcion,""),P.Cb(2),P.lc("ngIf",!!n.idcomandafox)}}var Dt,It,Ft=((It=function(){function t(o,n){var i=this;e(this,t),this.egresoSrvc=o,this.ls=n,this.getEgresoEv=new P.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.keyboardLayout=R.b.IDIOMA_TECLADO,this.esMovil=!1,this.params={_fdel:H().startOf("month").format(R.b.dbDateFormat),_fal:H().endOf("month").format(R.b.dbDateFormat)},this.loadEgresos=function(){i.egresoSrvc.get(i.params).subscribe(function(e){e&&(i.lstEgresos=e,i.applyFilter())})},this.getEgreso=function(e){i.getEgresoEv.emit({egreso:e.egreso,tipo_movimiento:e.tipo_movimiento.tipo_movimiento,bodega:e.bodega.bodega,fecha:e.fecha,usuario:e.usuario.usuario,estatus_movimiento:e.estatus_movimiento||1,traslado:e.traslado||0,idcomandafox:e.idcomandafox})},this.pageChange=function(e){i.pageSize=e.pageSize,i.pageIndex=e.pageIndex,i.applyFilter()}}return o(t,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(R.b.usrTokenVar).enmovil||!1,this.loadEgresos()}},{key:"applyFilter",value:function(){if(this.txtFiltro.length>0){var e=Object(R.c)(this.lstEgresos,this.txtFiltro);this.length=e.length,this.lstEgresosPaged=Object(R.f)(e,this.pageSize,this.pageIndex+1)}else this.length=this.lstEgresos.length,this.lstEgresosPaged=Object(R.f)(this.lstEgresos,this.pageSize,this.pageIndex+1)}}]),t}()).\u0275fac=function(e){return new(e||It)(P.Nb(ht),P.Nb(N.a))},It.\u0275cmp=P.Hb({type:It,selectors:[["app-lista-egreso"]],outputs:{getEgresoEv:"getEgresoEv"},decls:14,vars:12,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","type","date","placeholder","Del",3,"ngModel","ngModelOptions","ngModelChange"],["matInput","","type","date","placeholder","Al",3,"ngModel","ngModelOptions","ngModelChange"],["mat-raised-button","","type","button","color","accent",3,"click"],["matInput","","placeholder","Buscar...",3,"matKeyboard","ngModel","ngModelOptions","input","ngModelChange",4,"ngIf"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["matInput","","placeholder","Buscar...",3,"matKeyboard","ngModel","ngModelOptions","input","ngModelChange"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click"],["mat-list-icon",""],["mat-line",""],["mat-line","",4,"ngIf"]],template:function(e,t){1&e&&(P.Tb(0,"mat-card",0),P.Tb(1,"mat-card-content"),P.Tb(2,"mat-form-field",1),P.Tb(3,"input",2),P.bc("ngModelChange",function(e){return t.params._fdel=e}),P.Sb(),P.Sb(),P.Tb(4,"mat-form-field",1),P.Tb(5,"input",3),P.bc("ngModelChange",function(e){return t.params._fal=e}),P.Sb(),P.Sb(),P.Tb(6,"button",4),P.bc("click",function(){return t.loadEgresos()}),P.Fc(7," Buscar "),P.Sb(),P.Tb(8,"mat-form-field",1),P.Dc(9,St,1,4,"input",5),P.Dc(10,Ct,1,3,"input",6),P.Sb(),P.Tb(11,"mat-nav-list"),P.Dc(12,Mt,13,7,"mat-list-item",7),P.Sb(),P.Tb(13,"mat-paginator",8),P.bc("page",function(e){return t.pageChange(e)}),P.Sb(),P.Sb(),P.Sb()),2&e&&(P.Cb(3),P.lc("ngModel",t.params._fdel)("ngModelOptions",P.nc(10,vt)),P.Cb(2),P.lc("ngModel",t.params._fal)("ngModelOptions",P.nc(11,vt)),P.Cb(4),P.lc("ngIf",!t.esMovil),P.Cb(1),P.lc("ngIf",t.esMovil),P.Cb(2),P.lc("ngForOf",t.lstEgresosPaged),P.Cb(1),P.lc("length",t.length)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions))},directives:[m.a,m.c,g.b,f.b,l.c,l.k,l.n,T.a,r.m,d.e,r.l,x.a,w.a,d.c,b.a,d.b,$.j],pipes:[r.e],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),It),xt=((Dt=function(){function t(o){e(this,t),this.http=o,this.conversorUrl="conversor",this.srvcErrHndl=new U.a}return o(t,[{key:"transformar",value:function(e){return this.http.post("".concat(R.b.urlWms,"/").concat(this.conversorUrl,"/transformar"),e).pipe(Object(G.a)(R.b.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"producir",value:function(e){return this.http.post("".concat(R.b.urlWms,"/").concat(this.conversorUrl,"/producir"),e).pipe(Object(G.a)(R.b.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(e){return new(e||Dt)(P.Xb(c.b))},Dt.\u0275prov=P.Jb({token:Dt,factory:Dt.\u0275fac,providedIn:"root"}),Dt);function _t(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",5),P.bc("click",function(){return P.xc(o),P.fc().showEgresoForm=!0}),P.Tb(1,"mat-icon",6),P.Fc(2,"expand_more"),P.Sb(),P.Sb()}}function yt(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",5),P.bc("click",function(){return P.xc(o),P.fc().showEgresoForm=!1}),P.Tb(1,"mat-icon",6),P.Fc(2,"expand_less"),P.Sb(),P.Sb()}}function kt(e,t){if(1&e&&(P.Tb(0,"mat-option",20),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.tipo_movimiento),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function Ot(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-form-field",10),P.Tb(1,"mat-label"),P.Fc(2,"Tipo de movimiento"),P.Sb(),P.Tb(3,"mat-select",19),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).egreso.tipo_movimiento=e}),P.Dc(4,kt,2,2,"mat-option",13),P.Sb(),P.Sb()}if(2&e){var n=P.fc(2);P.Cb(3),P.lc("ngModel",n.egreso.tipo_movimiento),P.Cb(1),P.lc("ngForOf",n.tiposMovimiento)}}function Et(e,t){if(1&e&&(P.Tb(0,"mat-option",20),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.bodega),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function wt(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-checkbox",21),P.bc("ngModelChange",function(e){return P.xc(o),+(P.fc(2).egreso.traslado=e)}),P.Fc(1,"\xbfEs traslado entre bodegas de la misma sede? "),P.Sb()}if(2&e){var n=P.fc(2);P.lc("ngModel",+n.egreso.traslado)}}function At(e,t){if(1&e&&(P.Tb(0,"mat-option",20),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.bodega),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function Bt(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-form-field",10),P.Tb(1,"mat-label"),P.Fc(2,"Bodega destino"),P.Sb(),P.Tb(3,"mat-select",22),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).egreso.bodega_destino=e}),P.Dc(4,At,2,2,"mat-option",13),P.Sb(),P.Sb()}if(2&e){var n=P.fc(2);P.Cb(3),P.lc("ngModel",n.egreso.bodega_destino)("required",1==+n.egreso.traslado),P.Cb(1),P.lc("ngForOf",n.bodegas)}}function Rt(e,t){if(1&e&&(P.Tb(0,"mat-option",20),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.tipo_movimiento),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function Ht(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-form-field",10),P.Tb(1,"mat-label"),P.Fc(2,"Tipo de movimiento destino"),P.Sb(),P.Tb(3,"mat-select",23),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).egreso.tipo_movimiento_destino=e}),P.Dc(4,Rt,2,2,"mat-option",13),P.Sb(),P.Sb()}if(2&e){var n=P.fc(2);P.Cb(3),P.lc("ngModel",n.egreso.tipo_movimiento_destino)("required",1==+n.egreso.traslado),P.Cb(1),P.lc("ngForOf",n.tiposMovimientoIngreso)}}function Pt(e,t){if(1&e&&(P.Tb(0,"span"),P.Ob(1,"br"),P.Tb(2,"strong"),P.Fc(3),P.Sb(),P.Sb()),2&e){var o=P.fc(2);P.Cb(3),P.Hc("Comanda: #",o.egreso.idcomandafox,"")}}var Nt=function(){return[2,3]};function Ut(e,t){if(1&e&&(P.Tb(0,"button",24),P.Fc(1," Guardar "),P.Sb()),2&e){P.fc();var o=P.tc(1),n=P.fc();P.lc("disabled",!o.form.valid||P.nc(1,Nt).indexOf(+n.egreso.estatus_movimiento)>=0||n.bloqueoBotones)}}function Gt(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",25),P.bc("click",function(){return P.xc(o),P.fc(2).confirmarEgreso()}),P.Fc(1," Confirmar "),P.Sb()}if(2&e){P.fc();var n=P.tc(1),i=P.fc();P.lc("disabled",!n.form.valid||P.nc(1,Nt).indexOf(+i.egreso.estatus_movimiento)>=0)}}function zt(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",26),P.bc("click",function(){return P.xc(o),P.fc(2).resetEgreso()}),P.Fc(1," Nuevo "),P.Sb()}}function qt(e,t){if(1&e){var o=P.Ub();P.Tb(0,"form",7,8),P.bc("ngSubmit",function(){P.xc(o);var e=P.tc(1),t=P.fc();return e.form.valid&&t.onSubmit()}),P.Dc(2,Ot,5,2,"mat-form-field",9),P.Tb(3,"mat-form-field",10),P.Tb(4,"input",11),P.bc("ngModelChange",function(e){return P.xc(o),P.fc().egreso.fecha=e}),P.Sb(),P.Sb(),P.Tb(5,"mat-form-field",10),P.Tb(6,"mat-label"),P.Fc(7,"Bodega"),P.Sb(),P.Tb(8,"mat-select",12),P.bc("ngModelChange",function(e){return P.xc(o),P.fc().egreso.bodega=e}),P.Dc(9,Et,2,2,"mat-option",13),P.Sb(),P.Sb(),P.Dc(10,wt,2,1,"mat-checkbox",14),P.Dc(11,Bt,5,3,"mat-form-field",9),P.Dc(12,Ht,5,3,"mat-form-field",9),P.Dc(13,Pt,4,1,"span",3),P.Tb(14,"div",15),P.Dc(15,Ut,2,2,"button",16),P.Dc(16,Gt,2,2,"button",17),P.Dc(17,zt,2,0,"button",18),P.Sb(),P.Sb()}if(2&e){var n=P.fc();P.Cb(2),P.lc("ngIf",n.saveToDB),P.Cb(2),P.lc("ngModel",n.egreso.fecha),P.Cb(4),P.lc("ngModel",n.egreso.bodega),P.Cb(1),P.lc("ngForOf",n.bodegas),P.Cb(1),P.lc("ngIf",n.saveToDB),P.Cb(1),P.lc("ngIf",1==+n.egreso.traslado&&P.nc(11,Nt).indexOf(+n.egreso.estatus_movimiento)<0),P.Cb(1),P.lc("ngIf",1==+n.egreso.traslado&&P.nc(12,Nt).indexOf(+n.egreso.estatus_movimiento)<0),P.Cb(1),P.lc("ngIf",!!n.egreso.idcomandafox),P.Cb(2),P.lc("ngIf",n.saveToDB),P.Cb(1),P.lc("ngIf",n.egreso.egreso&&n.detallesEgreso.length>0),P.Cb(1),P.lc("ngIf",n.egreso.egreso)}}function jt(e,t){1&e&&P.Ob(0,"hr")}function $t(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",5),P.bc("click",function(){return P.xc(o),P.fc(2).showDetalleEgresoForm=!0}),P.Tb(1,"mat-icon",6),P.Fc(2,"expand_more"),P.Sb(),P.Sb()}}function Wt(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",5),P.bc("click",function(){return P.xc(o),P.fc(2).showDetalleEgresoForm=!1}),P.Tb(1,"mat-icon",6),P.Fc(2,"expand_less"),P.Sb(),P.Sb()}}function Lt(e,t){if(1&e&&(P.Tb(0,"mat-option",20),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function Vt(e,t){if(1&e&&(P.Tb(0,"mat-option",20),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.presentacion),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function Kt(e,t){if(1&e&&(P.Tb(0,"button",24),P.Fc(1," Guardar "),P.Sb()),2&e){P.fc();var o=P.tc(1),n=P.fc(2);P.lc("disabled",!o.form.valid||P.nc(1,Nt).indexOf(+n.egreso.estatus_movimiento)>=0||n.bloqueoBotones)}}function Qt(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",37),P.bc("click",function(){return P.xc(o),P.fc(3).addToDetail()}),P.Fc(1," Guardar "),P.Sb()}if(2&e){P.fc();var n=P.tc(1),i=P.fc(2);P.lc("disabled",!i.egreso.bodega||!n.form.valid||P.nc(1,Nt).indexOf(+i.egreso.estatus_movimiento)>=0)}}function Jt(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",26),P.bc("click",function(){return P.xc(o),P.fc(3).resetDetalleEgreso()}),P.Fc(1," Nuevo "),P.Sb()}}var Xt=function(){return{standalone:!0}};function Yt(e,t){if(1&e){var o=P.Ub();P.Tb(0,"form",7,30),P.bc("ngSubmit",function(){P.xc(o);var e=P.tc(1),t=P.fc(2);return e.form.valid&&t.onSubmitDetail()}),P.Tb(2,"mat-form-field",10),P.Tb(3,"mat-label"),P.Fc(4,"Art\xedculo"),P.Sb(),P.Tb(5,"input",31),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).txtArticuloSelected=e})("keyup",function(){P.xc(o);var e=P.fc(2);return e.filtrarArticulos(e.txtArticuloSelected)}),P.Sb(),P.Tb(6,"mat-autocomplete",32,33),P.bc("optionSelected",function(){return P.xc(o),P.fc(2).setPresentaciones()}),P.Dc(8,Lt,2,2,"mat-option",13),P.Sb(),P.Sb(),P.Tb(9,"mat-form-field",10),P.Tb(10,"mat-label"),P.Fc(11,"Presentaci\xf3n"),P.Sb(),P.Tb(12,"mat-select",34),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).detalleEgreso.presentacion=e}),P.Dc(13,Vt,2,2,"mat-option",13),P.Sb(),P.Sb(),P.Tb(14,"mat-form-field",10),P.Tb(15,"input",35),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).detalleEgreso.cantidad=e})("change",function(){P.xc(o);var e=P.fc(2);return e.detalleEgreso.precio_total=+e.detalleEgreso.precio_unitario*+e.detalleEgreso.cantidad}),P.Sb(),P.Sb(),P.Tb(16,"div",15),P.Dc(17,Kt,2,2,"button",16),P.Dc(18,Qt,2,2,"button",36),P.Dc(19,Jt,2,0,"button",18),P.Sb(),P.Sb()}if(2&e){var n=P.tc(7),i=P.fc(2);P.Cb(5),P.lc("ngModel",i.txtArticuloSelected)("ngModelOptions",P.nc(11,Xt))("matAutocomplete",n),P.Cb(1),P.lc("displayWith",i.displayArticulo),P.Cb(2),P.lc("ngForOf",i.filteredArticulos),P.Cb(4),P.lc("ngModel",i.detalleEgreso.presentacion),P.Cb(1),P.lc("ngForOf",i.fltrPresentaciones),P.Cb(2),P.lc("ngModel",i.detalleEgreso.cantidad),P.Cb(2),P.lc("ngIf",i.saveToDB),P.Cb(1),P.lc("ngIf",!i.saveToDB),P.Cb(1),P.lc("ngIf",i.detalleEgreso.egreso_detalle)}}function Zt(e,t){1&e&&P.Ob(0,"hr")}function eo(e,t){if(1&e){var o=P.Ub();P.Tb(0,"input",38),P.bc("input",function(e){return P.xc(o),P.fc(2).applyFilter(e.target.value)}),P.Sb()}if(2&e){var n=P.fc(2);P.lc("matKeyboard",n.keyboardLayout)}}function to(e,t){if(1&e){var o=P.Ub();P.Tb(0,"input",39),P.bc("keyup",function(e){return P.xc(o),P.fc(2).applyFilter(e.target.value)}),P.Sb()}}function oo(e,t){1&e&&(P.Tb(0,"th",53),P.Fc(1,"Art\xedculo"),P.Sb())}function no(e,t){if(1&e&&(P.Tb(0,"td",54),P.Fc(1),P.Sb()),2&e){var o=t.$implicit,n=P.fc(3);P.Cb(1),P.Hc(" ",n.saveToDB?o.articulo.descripcion:n.getDescripcionArticulo(o.articulo),"")}}function io(e,t){1&e&&(P.Tb(0,"th",53),P.Fc(1,"Presentaci\xf3n"),P.Sb())}function ao(e,t){if(1&e&&(P.Tb(0,"td",54),P.Fc(1),P.Sb()),2&e){var o=t.$implicit,n=P.fc(3);P.Cb(1),P.Hc(" ",n.saveToDB?o.presentacion.descripcion:n.getDescripcionPresentacion(o.presentacion)," ")}}function ro(e,t){1&e&&(P.Tb(0,"th",55),P.Fc(1,"Cantidad"),P.Sb())}function co(e,t){if(1&e&&(P.Tb(0,"td",56),P.Fc(1),P.gc(2,"number"),P.Sb()),2&e){var o=t.$implicit;P.Cb(1),P.Gc(P.ic(2,1,o.cantidad,"1.2-2"))}}function lo(e,t){1&e&&(P.Tb(0,"th",55),P.Fc(1,"Costo Unitario"),P.Sb())}function so(e,t){if(1&e&&(P.Tb(0,"td",56),P.Fc(1),P.gc(2,"number"),P.Sb()),2&e){var o=t.$implicit;P.Cb(1),P.Hc("",P.ic(2,1,o.precio_unitario,"1.2-2")," ")}}function uo(e,t){1&e&&(P.Tb(0,"th",55),P.Fc(1,"Costo Total"),P.Sb())}function bo(e,t){if(1&e&&(P.Tb(0,"td",56),P.Fc(1),P.gc(2,"number"),P.Sb()),2&e){var o=t.$implicit;P.Cb(1),P.Gc(P.ic(2,1,o.precio_total,"1.2-2"))}}function go(e,t){1&e&&(P.Tb(0,"th",53),P.Fc(1,"\xa0"),P.Sb())}function fo(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",25),P.bc("click",function(){P.xc(o);var e=P.fc().$implicit;return P.fc(3).getDetalleEgreso(e.egreso,e.egreso_detalle)}),P.Fc(1," Editar "),P.Sb()}if(2&e){var n=P.fc(4);P.lc("disabled",P.nc(1,Nt).indexOf(+n.egreso.estatus_movimiento)>=0||n.bloqueoBotones)}}function mo(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",37),P.bc("click",function(){P.xc(o);var e=P.fc().$implicit;return P.fc(3).editFromDetail(e.articulo)}),P.Fc(1," Editar "),P.Sb()}if(2&e){var n=P.fc(4);P.lc("disabled",P.nc(1,Nt).indexOf(+n.egreso.estatus_movimiento)>=0||n.bloqueoBotones)}}function po(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",37),P.bc("click",function(){P.xc(o);var e=P.fc().$implicit;return P.fc(3).removeFromDetail(e.articulo)}),P.Fc(1," Eliminar "),P.Sb()}if(2&e){var n=P.fc(4);P.lc("disabled",P.nc(1,Nt).indexOf(+n.egreso.estatus_movimiento)>=0||n.bloqueoBotones)}}function ho(e,t){if(1&e&&(P.Tb(0,"td",54),P.Dc(1,fo,2,2,"button",17),P.Dc(2,mo,2,2,"button",36),P.Dc(3,po,2,2,"button",36),P.Sb()),2&e){var o=P.fc(3);P.Cb(1),P.lc("ngIf",o.saveToDB),P.Cb(1),P.lc("ngIf",!o.saveToDB),P.Cb(1),P.lc("ngIf",!o.saveToDB)}}function vo(e,t){1&e&&P.Ob(0,"tr",57)}function So(e,t){1&e&&P.Ob(0,"tr",58)}function Co(e,t){if(1&e&&(P.Tb(0,"table",40),P.Rb(1,41),P.Dc(2,oo,2,0,"th",42),P.Dc(3,no,2,1,"td",43),P.Qb(),P.Rb(4,44),P.Dc(5,io,2,0,"th",42),P.Dc(6,ao,2,1,"td",43),P.Qb(),P.Rb(7,45),P.Dc(8,ro,2,0,"th",46),P.Dc(9,co,3,4,"td",47),P.Qb(),P.Rb(10,48),P.Dc(11,lo,2,0,"th",46),P.Dc(12,so,3,4,"td",47),P.Qb(),P.Rb(13,49),P.Dc(14,uo,2,0,"th",46),P.Dc(15,bo,3,4,"td",47),P.Qb(),P.Rb(16,50),P.Dc(17,go,2,0,"th",42),P.Dc(18,ho,4,3,"td",43),P.Qb(),P.Dc(19,vo,1,0,"tr",51),P.Dc(20,So,1,0,"tr",52),P.Sb()),2&e){var o=P.fc(2);P.lc("dataSource",o.dataSource),P.Cb(19),P.lc("matHeaderRowDef",o.displayedColumns),P.Cb(1),P.lc("matRowDefColumns",o.displayedColumns)}}function To(e,t){if(1&e&&(P.Tb(0,"mat-card",0),P.Tb(1,"mat-card-title"),P.Tb(2,"h4"),P.Fc(3),P.Dc(4,$t,3,0,"button",1),P.Dc(5,Wt,3,0,"button",1),P.Sb(),P.Sb(),P.Tb(6,"mat-card-content"),P.Dc(7,Yt,20,12,"form",2),P.Dc(8,Zt,1,0,"hr",3),P.Tb(9,"mat-form-field",10),P.Dc(10,eo,1,1,"input",27),P.Dc(11,to,1,0,"input",28),P.Sb(),P.Dc(12,Co,21,3,"table",29),P.Sb(),P.Sb()),2&e){var o=P.fc();P.Cb(3),P.Ic(" Detalle del egreso ",o.saveToDB?"No.":""," ",o.egreso.egreso," "),P.Cb(1),P.lc("ngIf",!o.showDetalleEgresoForm),P.Cb(1),P.lc("ngIf",o.showDetalleEgresoForm),P.Cb(2),P.lc("ngIf",o.showDetalleEgresoForm),P.Cb(1),P.lc("ngIf",o.detallesEgreso.length>0),P.Cb(2),P.lc("ngIf",!o.esMovil),P.Cb(1),P.lc("ngIf",o.esMovil),P.Cb(1),P.lc("ngIf",o.detallesEgreso.length>0)}}function Mo(e,t){1&e&&P.Ob(0,"hr")}function Do(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",5),P.bc("click",function(){return P.xc(o),P.fc(2).showDetalleEgresoForm=!0}),P.Tb(1,"mat-icon",6),P.Fc(2,"expand_more"),P.Sb(),P.Sb()}}function Io(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",5),P.bc("click",function(){return P.xc(o),P.fc(2).showDetalleEgresoForm=!1}),P.Tb(1,"mat-icon",6),P.Fc(2,"expand_less"),P.Sb(),P.Sb()}}function Fo(e,t){if(1&e&&(P.Tb(0,"mat-option",20),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function xo(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",37),P.bc("click",function(){return P.xc(o),P.fc(3).addToDetailMerma()}),P.Fc(1," Guardar "),P.Sb()}if(2&e){P.fc();var n=P.tc(1),i=P.fc(2);P.lc("disabled",!i.detalleMerma.articulo||!n.form.valid||P.nc(1,Nt).indexOf(+i.egreso.estatus_movimiento)>=0)}}function _o(e,t){if(1&e){var o=P.Ub();P.Tb(0,"form",7,59),P.bc("ngSubmit",function(){P.xc(o);var e=P.tc(1),t=P.fc(2);return e.form.valid&&t.onSubmitDetail()}),P.Tb(2,"mat-form-field",10),P.Tb(3,"mat-label"),P.Fc(4,"Art\xedculo"),P.Sb(),P.Tb(5,"input",31),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).txtArticuloSelectedM=e})("keyup",function(){P.xc(o);var e=P.fc(2);return e.filtrarArticulos(e.txtArticuloSelectedM)}),P.Sb(),P.Tb(6,"mat-autocomplete",32,33),P.bc("optionSelected",function(){return P.xc(o),P.fc(2).setPresentacionesMerma()}),P.Dc(8,Fo,2,2,"mat-option",13),P.Sb(),P.Sb(),P.Tb(9,"mat-form-field",10),P.Tb(10,"input",60),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).detalleMerma.cantidad_utilizada=e}),P.Sb(),P.Sb(),P.Tb(11,"mat-form-field",10),P.Tb(12,"input",61),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).detalleMerma.cantidad=e}),P.Sb(),P.Sb(),P.Tb(13,"div",15),P.Dc(14,xo,2,2,"button",36),P.Sb(),P.Sb()}if(2&e){var n=P.tc(7),i=P.fc(2);P.Cb(5),P.lc("ngModel",i.txtArticuloSelectedM)("ngModelOptions",P.nc(8,Xt))("matAutocomplete",n),P.Cb(1),P.lc("displayWith",i.displayArticuloMerma),P.Cb(2),P.lc("ngForOf",i.filteredArticulos),P.Cb(2),P.lc("ngModel",i.detalleMerma.cantidad_utilizada),P.Cb(2),P.lc("ngModel",i.detalleMerma.cantidad),P.Cb(2),P.lc("ngIf",!i.saveToDB)}}function yo(e,t){1&e&&P.Ob(0,"hr")}function ko(e,t){1&e&&(P.Tb(0,"th",53),P.Fc(1,"Art\xedculo"),P.Sb())}function Oo(e,t){if(1&e&&(P.Tb(0,"td",54),P.Fc(1),P.Sb()),2&e){var o=t.$implicit,n=P.fc(3);P.Cb(1),P.Hc(" ",n.saveToDB?o.articulo.descripcion:n.getDescripcionArticulo(o.articulo),"")}}function Eo(e,t){1&e&&(P.Tb(0,"th",53),P.Fc(1,"Presentaci\xf3n"),P.Sb())}function wo(e,t){if(1&e&&(P.Tb(0,"td",54),P.Fc(1),P.Sb()),2&e){var o=t.$implicit,n=P.fc(3);P.Cb(1),P.Hc(" ",n.saveToDB?o.presentacion.descripcion:n.getDescripcionPresentacion(o.presentacion)," ")}}function Ao(e,t){1&e&&(P.Tb(0,"th",55),P.Fc(1,"Cantidad a Utilizar"),P.Sb())}function Bo(e,t){if(1&e&&(P.Tb(0,"td",56),P.Fc(1),P.gc(2,"number"),P.Sb()),2&e){var o=t.$implicit;P.Cb(1),P.Gc(P.ic(2,1,o.cantidad_utilizada,"1.2-2"))}}function Ro(e,t){1&e&&(P.Tb(0,"th",55),P.Fc(1,"Cantidad"),P.Sb())}function Ho(e,t){if(1&e&&(P.Tb(0,"td",56),P.Fc(1),P.gc(2,"number"),P.Sb()),2&e){var o=t.$implicit;P.Cb(1),P.Gc(P.ic(2,1,o.cantidad,"1.2-2"))}}function Po(e,t){1&e&&(P.Tb(0,"th",53),P.Fc(1,"\xa0"),P.Sb())}function No(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",25),P.bc("click",function(){P.xc(o);var e=P.fc().$implicit;return P.fc(3).getDetalleEgreso(e.egreso,e.egreso_detalle)}),P.Fc(1," Editar "),P.Sb()}if(2&e){var n=P.fc(4);P.lc("disabled",P.nc(1,Nt).indexOf(+n.egreso.estatus_movimiento)>=0||n.bloqueoBotones)}}function Uo(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",37),P.bc("click",function(){P.xc(o);var e=P.fc().$implicit;return P.fc(3).editFromDetailMerma(e.articulo)}),P.Fc(1," Editar "),P.Sb()}if(2&e){var n=P.fc(4);P.lc("disabled",P.nc(1,Nt).indexOf(+n.egreso.estatus_movimiento)>=0||n.bloqueoBotones)}}function Go(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",37),P.bc("click",function(){P.xc(o);var e=P.fc().$implicit;return P.fc(3).removeFromDetailMerma(e.articulo)}),P.Fc(1," Eliminar "),P.Sb()}if(2&e){var n=P.fc(4);P.lc("disabled",P.nc(1,Nt).indexOf(+n.egreso.estatus_movimiento)>=0||n.bloqueoBotones)}}function zo(e,t){if(1&e&&(P.Tb(0,"td",54),P.Dc(1,No,2,2,"button",17),P.Dc(2,Uo,2,2,"button",36),P.Dc(3,Go,2,2,"button",36),P.Sb()),2&e){var o=P.fc(3);P.Cb(1),P.lc("ngIf",o.saveToDB),P.Cb(1),P.lc("ngIf",!o.saveToDB),P.Cb(1),P.lc("ngIf",!o.saveToDB)}}function qo(e,t){1&e&&P.Ob(0,"tr",57)}function jo(e,t){1&e&&P.Ob(0,"tr",58)}function $o(e,t){if(1&e&&(P.Tb(0,"table",40),P.Rb(1,41),P.Dc(2,ko,2,0,"th",42),P.Dc(3,Oo,2,1,"td",43),P.Qb(),P.Rb(4,44),P.Dc(5,Eo,2,0,"th",42),P.Dc(6,wo,2,1,"td",43),P.Qb(),P.Rb(7,62),P.Dc(8,Ao,2,0,"th",46),P.Dc(9,Bo,3,4,"td",47),P.Qb(),P.Rb(10,45),P.Dc(11,Ro,2,0,"th",46),P.Dc(12,Ho,3,4,"td",47),P.Qb(),P.Rb(13,50),P.Dc(14,Po,2,0,"th",42),P.Dc(15,zo,4,3,"td",43),P.Qb(),P.Dc(16,qo,1,0,"tr",51),P.Dc(17,jo,1,0,"tr",52),P.Sb()),2&e){var o=P.fc(2);P.lc("dataSource",o.dataSourceM),P.Cb(16),P.lc("matHeaderRowDef",o.displayedColumnsM),P.Cb(1),P.lc("matRowDefColumns",o.displayedColumnsM)}}function Wo(e,t){if(1&e&&(P.Tb(0,"mat-card",0),P.Tb(1,"mat-card-title"),P.Tb(2,"h4"),P.Fc(3),P.Dc(4,Do,3,0,"button",1),P.Dc(5,Io,3,0,"button",1),P.Sb(),P.Sb(),P.Tb(6,"mat-card-content"),P.Dc(7,_o,15,9,"form",2),P.Dc(8,yo,1,0,"hr",3),P.Dc(9,$o,18,3,"table",29),P.Sb(),P.Sb()),2&e){var o=P.fc();P.Cb(3),P.Ic(" Merma ",o.saveToDB?"No.":""," ",o.egreso.egreso," "),P.Cb(1),P.lc("ngIf",!o.showDetalleEgresoForm),P.Cb(1),P.lc("ngIf",o.showDetalleEgresoForm),P.Cb(2),P.lc("ngIf",o.showDetalleEgresoForm),P.Cb(1),P.lc("ngIf",o.detallesMerma.length>0),P.Cb(1),P.lc("ngIf",o.detallesMerma.length>0)}}var Lo,Vo,Ko=((Lo=function(){function t(o,n,i,a,r,c,l,s,u){var d=this;e(this,t),this.snackBar=o,this.ls=n,this.egresoSrvc=i,this.tipoMovimientoSrvc=a,this.bodegaSrvc=r,this.articuloSrvc=c,this.proveedorSrvc=l,this.transformacionSrvc=s,this.presentacionSrvc=u,this.saveToDB=!0,this.egresoSavedEv=new P.o,this.showEgresoForm=!0,this.showDetalleEgresoForm=!0,this.detallesEgreso=[],this.detallesMerma=[],this.displayedColumns=["articulo","presentacion","cantidad","precio_unitario","precio_total","editItem"],this.displayedColumnsM=["cantidad_utilizada","articulo","presentacion","cantidad","editItem"],this.tiposMovimiento=[],this.tiposMovimientoIngreso=[],this.bodegas=[],this.articulos=[],this.filteredArticulos=[],this.proveedores=[],this.filteredProveedores=[],this.presentaciones=[],this.fltrPresentaciones=[],this.fltrPresentacionesMerma=[],this.keyboardLayout=R.b.IDIOMA_TECLADO,this.esMovil=!1,this.bloqueoBotones=!1,this.txtArticuloSelected=void 0,this.txtArticuloSelectedM=void 0,this.txtProveedorSelected=void 0,this.loadTiposMovimiento=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];d.tipoMovimientoSrvc.get(e?{egreso:1}:{ingreso:1}).subscribe(function(t){t&&(e?d.tiposMovimiento=t:d.tiposMovimientoIngreso=t)})},this.loadBodegas=function(){d.bodegaSrvc.get({sede:d.ls.get(R.b.usrTokenVar).sede||0}).subscribe(function(e){e&&(d.bodegas=e)})},this.loadProveedores=function(){d.proveedorSrvc.get().subscribe(function(e){e&&(d.proveedores=e)})},this.loadPresentaciones=function(){d.presentacionSrvc.get().subscribe(function(e){e&&(d.presentaciones=e)})},this.resetEgreso=function(){d.egreso={egreso:null,tipo_movimiento:null,bodega:null,fecha:H().format(R.b.dbDateFormat),usuario:d.ls.get(R.b.usrTokenVar).idusr||0,estatus_movimiento:1,traslado:0},d.resetDetalleEgreso(),d.updateTableDataSource(),d.resetDetalleMerma(),d.updateTableDataSourceM()},this.onSubmit=function(){d.bloqueoBotones=!0,d.egresoSrvc.save(d.egreso).subscribe(function(e){e.exito&&(d.egresoSavedEv.emit(),d.resetEgreso(),d.egreso={egreso:e.egreso.egreso,tipo_movimiento:e.egreso.tipo_movimiento,fecha:e.egreso.fecha,bodega:e.egreso.bodega,creacion:e.egreso.creacion,usuario:e.egreso.usuario,estatus_movimiento:e.egreso.estatus_movimiento,traslado:e.egreso.traslado},d.loadDetalleEgreso(d.egreso.egreso)),d.bloqueoBotones=!1})},this.confirmarEgreso=function(){d.egreso.estatus_movimiento=2,d.onSubmit()},this.loadArticulos=function(){d.articuloSrvc.getArticulosIngreso().subscribe(function(e){e&&(d.articulos=e)})},this.resetDetalleEgreso=function(){d.detalleEgreso={egreso_detalle:null,egreso:d.egreso.egreso?d.egreso.egreso:null,articulo:null,cantidad:null,precio_unitario:null,precio_total:null,presentacion:0},d.txtArticuloSelected=void 0},this.resetDetalleMerma=function(){d.detalleMerma={egreso_detalle:null,egreso:d.egreso.egreso?d.egreso.egreso:null,articulo:null,cantidad:null,precio_unitario:null,precio_total:null,presentacion:0},d.txtArticuloSelectedM=void 0},this.loadDetalleEgreso=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+d.egreso.egreso;d.egresoSrvc.getDetalle(e,{egreso:e}).subscribe(function(e){e&&(d.detallesEgreso=e,d.updateTableDataSource())})},this.getDetalleEgreso=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+d.egreso.egreso,t=arguments.length>1?arguments[1]:void 0;d.egresoSrvc.getDetalle(e,{egreso_detalle:t}).subscribe(function(e){e&&(d.detalleEgreso={egreso_detalle:e[0].egreso_detalle,egreso:e[0].egreso,articulo:e[0].articulo.articulo,cantidad:+e[0].cantidad,precio_unitario:+e[0].precio_unitario,precio_total:+e[0].precio_total,presentacion:e[0].presentacion.presentacion},d.setPresentaciones(),d.saveToDB||d.setPresentacionesMerma(),d.txtArticuloSelected=e[0].articulo,d.showDetalleEgresoForm=!0)})},this.onSubmitDetail=function(){d.bloqueoBotones=!0,d.detalleEgreso.egreso=d.egreso.egreso,d.egresoSrvc.saveDetalle(d.detalleEgreso).subscribe(function(e){e.exito?(d.loadDetalleEgreso(),d.resetDetalleEgreso(),d.snackBar.open("Egreso guardado con \xe9xito...","Egreso",{duration:3e3})):d.snackBar.open("ERROR: ".concat(e.mensaje),"Egreso",{duration:3e3}),d.bloqueoBotones=!1})},this.addToDetail=function(){d.detalleEgreso.cantidad>0?(d.detallesEgreso.splice(d.detallesEgreso.findIndex(function(e){return+e.articulo==+d.detalleEgreso.articulo}),1),d.detallesEgreso.push(d.detalleEgreso),d.resetDetalleEgreso(),d.updateTableDataSource()):d.snackBar.open("ERROR: La cantidad debe ser mayor a 0","Egreso",{duration:3e3})},this.addToDetailMerma=function(){if(d.detalleMerma.cantidad>0&&d.detalleMerma.cantidad_utilizada>0){var e,t=d.detallesMerma.findIndex(function(e){return+e.articulo==+d.detalleMerma.articulo});t>-1&&d.detallesMerma.splice(t,1),e=d.articulos.filter(function(e){return+e.articulo==d.detalleMerma.articulo}),d.detalleMerma.presentacion=e[0].presentacion_reporte,d.detallesMerma.push(d.detalleMerma),d.txtArticuloSelectedM=void 0,d.resetDetalleMerma(),d.updateTableDataSourceM()}else d.detalleMerma.cantidad<=0?d.snackBar.open("ERROR: La cantidad debe ser mayor a 0","Egreso",{duration:3e3}):d.detalleMerma.cantidad_utilizada<=0&&d.snackBar.open("ERROR: La cantidad a utilizar debe ser mayor a 0","Egreso",{duration:3e3})},this.editFromDetail=function(e){var t=d.detallesEgreso.filter(function(t){return+t.articulo==+e})[0];d.detalleEgreso={egreso_detalle:t.egreso_detalle,egreso:t.egreso_detalle,articulo:t.articulo,cantidad:t.cantidad,precio_unitario:t.precio_unitario,precio_total:t.precio_unitario,presentacion:t.presentacion},d.setPresentaciones(!0),d.txtArticuloSelected=d.articulos.filter(function(e){return+e.articulo==d.detalleEgreso.articulo})[0]},this.editFromDetailMerma=function(e){var t=d.detallesMerma.filter(function(t){return+t.articulo==+e})[0];d.detalleMerma={egreso_detalle:t.egreso_detalle,egreso:t.egreso_detalle,articulo:t.articulo,cantidad:t.cantidad,precio_unitario:t.precio_unitario,precio_total:t.precio_unitario,presentacion:t.presentacion,cantidad_utilizada:t.cantidad_utilizada},d.setPresentacionesMerma(),d.txtArticuloSelectedM=d.articulos.filter(function(e){return+e.articulo==d.detalleMerma.articulo})[0]},this.removeFromDetailMerma=function(e){return d.detallesMerma.splice(d.detallesMerma.findIndex(function(t){return+t.articulo==+e}),1)},this.removeFromDetail=function(e){return d.detallesEgreso.splice(d.detallesEgreso.findIndex(function(t){return+t.articulo==+e}),1)},this.getDescripcionArticulo=function(e){return d.articulos.find(function(t){return+t.articulo==+e}).descripcion||""},this.getDescripcionPresentacion=function(e){return d.presentaciones.find(function(t){return+t.presentacion==+e}).descripcion||""},this.updateTableDataSource=function(){d.dataSource=new v.l(d.detallesEgreso),d.dataSource.filterPredicate=function(e,t){return e.articulo.descripcion.toLowerCase().includes(t)}},this.updateTableDataSourceM=function(){d.dataSourceM=new v.l(d.detallesMerma)},this.filtrarArticulos=function(e){if(e&&"string"==typeof e){var t=e.toLowerCase();d.filteredArticulos=d.articulos.filter(function(e){return e.descripcion.toLowerCase().includes(t)})}else d.filteredArticulos=d.articulos},this.setPresentaciones=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];d.fltrPresentaciones=[];var t=d.articulos.findIndex(function(e){return+e.articulo==+d.detalleEgreso.articulo}),o=d.articulos[t];d.fltrPresentaciones=d.presentaciones.filter(function(e){return+e.medida.medida==+o.presentacion.medida}),e||(d.detalleEgreso.presentacion=null)},this.setPresentacionesMerma=function(){d.fltrPresentacionesMerma=[];var e=d.articulos.findIndex(function(e){return+e.articulo==+d.detalleMerma.articulo}),t=d.articulos[e];d.fltrPresentacionesMerma=d.presentaciones.filter(function(e){return+e.medida.medida==+t.presentacion.medida})},this.displayArticulo=function(e){if(e)return d.detalleEgreso.articulo=e.articulo,e.descripcion},this.displayArticuloMerma=function(e){if(e)return d.detalleMerma.articulo=e.articulo,e.descripcion},this.filtrarProveedores=function(e){if(e&&"string"==typeof e){var t=e.toLowerCase();d.filteredProveedores=d.proveedores.filter(function(e){return e.razon_social.toLowerCase().includes(t)||e.nit.toLowerCase().includes(t)})}else d.filteredProveedores=d.proveedores},this.displayProveedor=function(e){if(e)return d.egreso.proveedor=e.proveedor,"(".concat(e.nit,") ").concat(e.razon_social)},this.applyFilter=function(e){d.dataSource.filter=e}}return o(t,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(R.b.usrTokenVar).enmovil||!1,this.resetEgreso(),this.loadTiposMovimiento(),this.loadTiposMovimiento(!1),this.loadBodegas(),this.loadArticulos(),this.loadProveedores(),this.loadPresentaciones(),this.saveToDB||(this.displayedColumns=["articulo","presentacion","cantidad","editItem"])}}]),t}()).\u0275fac=function(e){return new(e||Lo)(P.Nb(M.b),P.Nb(N.a),P.Nb(ht),P.Nb(X.a),P.Nb(Y.a),P.Nb(Z.a),P.Nb(J.a),P.Nb(xt),P.Nb(ee.a))},Lo.\u0275cmp=P.Hb({type:Lo,selectors:[["app-form-egreso"]],inputs:{egreso:"egreso",saveToDB:"saveToDB"},outputs:{egresoSavedEv:"egresoSavedEv"},decls:12,vars:8,consts:[[1,"mat-elevation-z4","fullWidth"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmEgreso","ngForm"],["class","fullWidth",4,"ngIf"],[1,"fullWidth"],["matInput","","type","date","placeholder","Fecha","name","fecha","required","",3,"ngModel","ngModelChange"],["name","bodega","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","traslado","class","fullWidth",3,"ngModel","ngModelChange",4,"ngIf"],["align","end"],["mat-raised-button","","type","submit","color","accent","class","btnAccion",3,"disabled",4,"ngIf"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"disabled","click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["name","tipo_movimiento","required","",3,"ngModel","ngModelChange"],[3,"value"],["name","traslado",1,"fullWidth",3,"ngModel","ngModelChange"],["name","bodega_destino",3,"ngModel","required","ngModelChange"],["name","tipo_movimiento_destino",3,"ngModel","required","ngModelChange"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button","color","accent",3,"click"],["matInput","","placeholder","Buscar",3,"matKeyboard","input",4,"ngIf"],["matInput","","placeholder","Buscar",3,"keyup",4,"ngIf"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleEgreso","ngForm"],["type","text","placeholder","Art\xedculo","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith","optionSelected"],["autoArticulos","matAutocomplete"],["name","presentacion","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Cantidad","name","cantidad","type","number","step","0.01","required","",3,"ngModel","ngModelChange","change"],["mat-raised-button","","type","button","color","accent",3,"disabled","click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["matInput","","placeholder","Buscar",3,"matKeyboard","input"],["matInput","","placeholder","Buscar",3,"keyup"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","articulo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","presentacion"],["matColumnDef","cantidad"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","precio_unitario"],["matColumnDef","precio_total"],["matColumnDef","editItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-header-row",""],["mat-row",""],["frmMerma","ngForm"],["type","number","step","0.01","matInput","","placeholder","Cantidad a Utilizar","name","cantidad_utilizar","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Cantidad","name","cantidad","type","number","step","0.01","required","",3,"ngModel","ngModelChange"],["matColumnDef","cantidad_utilizada"]],template:function(e,t){1&e&&(P.Tb(0,"mat-card",0),P.Tb(1,"mat-card-title"),P.Tb(2,"h4"),P.Fc(3),P.Dc(4,_t,3,0,"button",1),P.Dc(5,yt,3,0,"button",1),P.Sb(),P.Sb(),P.Tb(6,"mat-card-content"),P.Dc(7,qt,18,13,"form",2),P.Sb(),P.Sb(),P.Dc(8,jt,1,0,"hr",3),P.Dc(9,To,13,9,"mat-card",4),P.Dc(10,Mo,1,0,"hr",3),P.Dc(11,Wo,10,7,"mat-card",4)),2&e&&(P.Cb(3),P.Hc(" Egreso",t.egreso.egreso?" No. "+t.egreso.egreso:""," "),P.Cb(1),P.lc("ngIf",!t.showEgresoForm),P.Cb(1),P.lc("ngIf",t.showEgresoForm),P.Cb(2),P.lc("ngIf",t.showEgresoForm),P.Cb(1),P.lc("ngIf",t.egreso.egreso||!t.saveToDB),P.Cb(1),P.lc("ngIf",t.egreso.egreso||!t.saveToDB),P.Cb(1),P.lc("ngIf",t.egreso.egreso||!t.saveToDB),P.Cb(1),P.lc("ngIf",!t.saveToDB))},directives:[m.a,m.h,r.m,m.c,T.a,b.a,l.r,l.l,l.m,g.b,f.b,l.c,l.p,l.k,l.n,g.f,S.a,r.l,$.m,C.a,O.c,O.a,l.o,w.a,v.k,v.c,v.e,v.b,v.g,v.j,v.d,v.a,v.f,v.i],pipes:[r.f],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}"]}),Lo),Qo=["lstEgreso"],Jo=["frmEgreso"],Xo=((Vo=function(){function t(o){var n=this;e(this,t),this.ls=o,this.setEgreso=function(e){n.egreso=e,n.frmEgreso.resetDetalleEgreso(),n.frmEgreso.loadDetalleEgreso(+n.egreso.egreso)},this.refreshEgresoList=function(){n.lstEgresoComponent.loadEgresos()},this.egreso={egreso:null,tipo_movimiento:null,bodega:null,fecha:H().format(R.b.dbDateFormat),usuario:this.ls.get(R.b.usrTokenVar).idusr||0,estatus_movimiento:1,traslado:0}}return o(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||Vo)(P.Nb(N.a))},Vo.\u0275cmp=P.Hb({type:Vo,selectors:[["app-egreso"]],viewQuery:function(e,t){var o;1&e&&(P.Kc(Qo,1),P.Kc(Jo,1)),2&e&&(P.sc(o=P.cc())&&(t.lstEgresoComponent=o.first),P.sc(o=P.cc())&&(t.frmEgreso=o.first))},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getEgresoEv"],["lstEgreso",""],[1,"col","m7","s12"],[3,"egreso","egresoSavedEv"],["frmEgreso",""]],template:function(e,t){1&e&&(P.Tb(0,"div",0),P.Tb(1,"div",1),P.Tb(2,"app-lista-egreso",2,3),P.bc("getEgresoEv",function(e){return t.setEgreso(e)}),P.Sb(),P.Sb(),P.Tb(4,"div",4),P.Tb(5,"app-form-egreso",5,6),P.bc("egresoSavedEv",function(){return t.refreshEgresoList()}),P.Sb(),P.Sb(),P.Sb()),2&e&&(P.Cb(5),P.lc("egreso",t.egreso))},directives:[Ft,Ko],styles:[""]}),Vo),Yo=i("quSY");function Zo(e,t){if(1&e){var o=P.Ub();P.Tb(0,"input",10),P.bc("ngModelChange",function(e){return P.xc(o),P.fc().categoria.descripcion=e}),P.Sb()}if(2&e){var n=P.fc();P.lc("matKeyboard",n.keyboardLayout)("ngModel",n.categoria.descripcion)}}function en(e,t){if(1&e){var o=P.Ub();P.Tb(0,"input",11),P.bc("ngModelChange",function(e){return P.xc(o),P.fc().categoria.descripcion=e}),P.Sb()}if(2&e){var n=P.fc();P.lc("ngModel",n.categoria.descripcion)}}function tn(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-chip",12),P.bc("click",function(){P.xc(o);var e=t.$implicit;return P.fc().categoria=e}),P.Fc(1),P.Sb()}if(2&e){var n=t.$implicit;P.Cb(1),P.Hc(" ",n.descripcion," ")}}var on,nn=((on=function(){function t(o,n,i){var a=this;e(this,t),this.snackBar=o,this.ls=n,this.articuloSrvc=i,this.categoriaGrupoSvd=new P.o,this.onChangeSubCategoriaEv=new P.o,this.categorias=[],this.categoriasGruposPadre=[],this.categoriasGrupos=[],this.editCategoriaMode=!1,this.editSubCategoriaMode=!1,this.showCategoriasForm=!0,this.keyboardLayout=R.b.IDIOMA_TECLADO,this.esMovil=!1,this.impresoras=[],this.resetCategoria=function(){a.categoria={categoria:null,sede:a.ls.get(R.b.usrTokenVar).sede||0,descripcion:null},a.resetCategoriaGrupo(),a.editCategoriaMode=!1},this.resetCategoriaGrupo=function(){a.categoriaGrupo={categoria_grupo:null,categoria:a.categoria.categoria,categoria_grupo_grupo:null,descripcion:null,receta:0,impresora:null,descuento:0,antecesores:null},a.editSubCategoriaMode=!1},this.loadCategorias=function(){a.articuloSrvc.getCategorias({sede:+a.ls.get(R.b.usrTokenVar).sede||0}).subscribe(function(e){e&&(a.categorias=e)})},this.onCategoriaSelected=function(e){return a.loadSubCategorias(+e.value.categoria)},this.loadSubCategorias=function(e){a.articuloSrvc.getCategoriasGrupos({categoria:+e}).subscribe(function(e){e&&(a.categoriasGruposPadre=a.articuloSrvc.adaptCategoriaGrupoResponse(e),a.categoriasGrupos=a.categoriasGruposPadre)})},this.loadImpresoras=function(){a.articuloSrvc.getImpresoras({sede:+a.ls.get(R.b.usrTokenVar).sede||0}).subscribe(function(e){e&&(a.impresoras=e)})},this.onSubCategoriaPadreSelected=function(e){return a.loadSubCategoriasSubcategorias(+e.value)},this.loadSubCategoriasSubcategorias=function(e){a.articuloSrvc.getCategoriasGrupos({categoria_grupo_grupo:e}).subscribe(function(e){e&&(a.categoriasGrupos=a.articuloSrvc.adaptCategoriaGrupoResponse(e))})},this.onSubmitCategoria=function(){a.articuloSrvc.saveCategoria(a.categoria).subscribe(function(e){e.exito?(a.editCategoriaMode=!1,a.resetCategoria(),a.loadCategorias(),a.categoriaGrupoSvd.emit(),a.snackBar.open("Grabada con \xe9xito.","Categor\xeda",{duration:5e3})):a.snackBar.open("ERROR: ".concat(e.mensaje),"Categor\xeda",{duration:5e3})})},this.onSubCategoriaSelected=function(e){return a.onChangeSubCategoriaEv.emit(+e.value.categoria_grupo)},this.onSubmitSubCategoria=function(){a.articuloSrvc.saveCategoriaGrupo(a.categoriaGrupo).subscribe(function(e){e.exito?(a.resetCategoriaGrupo(),a.loadSubCategorias(+a.categoria.categoria),a.snackBar.open("Grabada con \xe9xito.","Sub - Categor\xeda",{duration:5e3})):a.snackBar.open("ERROR: ".concat(e.mensaje),"Sub - Categor\xeda",{duration:5e3})})}}return o(t,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(R.b.usrTokenVar).enmovil||!1,this.resetCategoria(),this.loadCategorias(),this.loadImpresoras()}}]),t}()).\u0275fac=function(e){return new(e||on)(P.Nb(M.b),P.Nb(N.a),P.Nb(Z.a))},on.\u0275cmp=P.Hb({type:on,selectors:[["app-categoria-producto"]],outputs:{categoriaGrupoSvd:"categoriaGrupoSvd",onChangeSubCategoriaEv:"onChangeSubCategoriaEv"},decls:18,vars:4,consts:[[1,"mat-elevation-z4"],["novalidate",""],["frmCategoria","ngForm"],[1,"fullWidth"],["type","text","matInput","","placeholder","Descripci\xf3n de la categor\xeda","name","descripcion","minlength","1","maxlength","150","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["type","text","matInput","","placeholder","Descripci\xf3n de la categor\xeda","name","descripcion","minlength","1","maxlength","150","required","",3,"ngModel","ngModelChange",4,"ngIf"],["align","end"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button","color","warn",3,"click"],["color","accent","selected","",3,"click",4,"ngFor","ngForOf"],["type","text","matInput","","placeholder","Descripci\xf3n de la categor\xeda","name","descripcion","minlength","1","maxlength","150","required","",3,"matKeyboard","ngModel","ngModelChange"],["type","text","matInput","","placeholder","Descripci\xf3n de la categor\xeda","name","descripcion","minlength","1","maxlength","150","required","",3,"ngModel","ngModelChange"],["color","accent","selected","",3,"click"]],template:function(e,t){if(1&e&&(P.Tb(0,"mat-card",0),P.Tb(1,"mat-card-title"),P.Tb(2,"h4"),P.Fc(3,"Categor\xedas"),P.Sb(),P.Sb(),P.Tb(4,"mat-card-content"),P.Tb(5,"form",1,2),P.Tb(7,"mat-form-field",3),P.Dc(8,Zo,1,2,"input",4),P.Dc(9,en,1,1,"input",5),P.Sb(),P.Tb(10,"div",6),P.Tb(11,"button",7),P.bc("click",function(){return t.onSubmitCategoria()}),P.Fc(12," Guardar "),P.Sb(),P.Tb(13,"button",8),P.bc("click",function(){return t.resetCategoria()}),P.Fc(14," Cancelar "),P.Sb(),P.Sb(),P.Sb(),P.Ob(15,"hr"),P.Tb(16,"mat-chip-list"),P.Dc(17,tn,2,1,"mat-chip",9),P.Sb(),P.Sb(),P.Sb()),2&e){var o=P.tc(6);P.Cb(8),P.lc("ngIf",!t.esMovil),P.Cb(1),P.lc("ngIf",t.esMovil),P.Cb(2),P.lc("disabled",!o.form.valid),P.Cb(6),P.lc("ngForOf",t.categorias)}},directives:[m.a,m.h,m.c,l.r,l.l,l.m,g.b,r.m,T.a,E.b,r.l,f.b,w.a,l.c,l.g,l.f,l.p,l.k,l.n,E.a],styles:[".fullWidth[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:18pt}"]}),on);function an(e,t){if(1&e&&(P.Tb(0,"mat-option",19),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.categoria),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function rn(e,t){if(1&e){var o=P.Ub();P.Tb(0,"input",20),P.bc("ngModelChange",function(e){return P.xc(o),P.fc().categoriaGrupo.descripcion=e}),P.Sb()}if(2&e){var n=P.fc();P.lc("matKeyboard",n.keyboardLayout)("ngModel",n.categoriaGrupo.descripcion)}}function cn(e,t){if(1&e){var o=P.Ub();P.Tb(0,"input",21),P.bc("ngModelChange",function(e){return P.xc(o),P.fc().categoriaGrupo.descripcion=e}),P.Sb()}if(2&e){var n=P.fc();P.lc("ngModel",n.categoriaGrupo.descripcion)}}function ln(e,t){if(1&e&&(P.Tb(0,"mat-option",19),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.impresora),P.Cb(1),P.Hc(" ",o.nombre," ")}}function sn(e,t){if(1&e&&(P.Tb(0,"mat-option",19),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.bodega),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function un(e,t){if(1&e){var o=P.Ub();P.Tb(0,"input",22),P.bc("ngModelChange",function(e){return P.xc(o),P.fc().categoriaGrupo.cuenta_contable=e}),P.Sb()}if(2&e){var n=P.fc();P.lc("matKeyboard",n.keyboardLayout)("ngModel",n.categoriaGrupo.cuenta_contable)}}function dn(e,t){if(1&e){var o=P.Ub();P.Tb(0,"input",23),P.bc("ngModelChange",function(e){return P.xc(o),P.fc().categoriaGrupo.cuenta_contable=e}),P.Sb()}if(2&e){var n=P.fc();P.lc("ngModel",n.categoriaGrupo.cuenta_contable)}}function bn(e,t){if(1&e&&(P.Tb(0,"mat-option",24),P.Fc(1),P.Sb()),2&e){var o=t.$implicit,n=P.fc();P.lc("value",o.categoria_grupo)("disabled",+o.categoria_grupo==+n.categoriaGrupo.categoria_grupo),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function gn(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-chip",25),P.bc("click",function(){P.xc(o);var e=t.$implicit,n=P.fc();return n.categoria=e,n.loadSubCategorias(e.categoria)}),P.Fc(1),P.Sb()}if(2&e){var n=t.$implicit;P.Cb(1),P.Hc(" ",n.descripcion," ")}}function fn(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-chip",26),P.bc("click",function(){P.xc(o);var e=t.$implicit;return P.fc().setCatGrp(e)}),P.Fc(1),P.Sb()}if(2&e){var n=t.$implicit;P.Cb(1),P.Hc(" ",n.descripcion," ")}}var mn,pn=((mn=function(){function t(o,n,i,a){var r=this;e(this,t),this.snackBar=o,this.articuloSrvc=n,this.bodegaSrvc=i,this.ls=a,this.categorias=[],this.impresoras=[],this.categoriasGruposPadre=[],this.categoriasGrupos=[],this.keyboardLayout=R.b.IDIOMA_TECLADO,this.esMovil=!1,this.bodegas=[],this.loadCategorias=function(){r.articuloSrvc.getCategorias({sede:+r.ls.get(R.b.usrTokenVar).sede||0}).subscribe(function(e){e&&(r.categorias=e)})},this.loadImpresoras=function(){r.articuloSrvc.getImpresoras({sede:+r.ls.get(R.b.usrTokenVar).sede||0}).subscribe(function(e){e&&(r.impresoras=e)})},this.loadBodegas=function(){r.bodegaSrvc.get({sede:r.ls.get(R.b.usrTokenVar).sede||0}).subscribe(function(e){e&&(r.bodegas=e)})},this.loadSubCategorias=function(e){r.resetCategoriaGrupo(),r.categoriaGrupo.categoria=e,r.articuloSrvc.getCategoriasGrupos({categoria:+e}).subscribe(function(e){e&&(r.categoriasGruposPadre=r.articuloSrvc.adaptCategoriaGrupoResponse(e),r.categoriasGrupos=JSON.parse(JSON.stringify(r.categoriasGruposPadre)))})},this.resetCategoriaGrupo=function(){r.categoriaGrupo={categoria_grupo:null,categoria:null,categoria_grupo_grupo:null,descripcion:null,receta:0,impresora:null,descuento:0,antecesores:null}},this.onSubmitSubCategoria=function(){r.articuloSrvc.saveCategoriaGrupo(r.categoriaGrupo).subscribe(function(e){e.exito?(r.loadSubCategorias(+r.categoriaGrupo.categoria),r.resetCategoriaGrupo(),r.snackBar.open("Grabada con \xe9xito.","Sub - Categor\xeda",{duration:5e3})):r.snackBar.open("ERROR: ".concat(e.mensaje),"Sub - Categor\xeda",{duration:5e3})})},this.setCatGrp=function(e){r.categoriaGrupo=e},this.resetCategoriaGrupo()}return o(t,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(R.b.usrTokenVar).enmovil||!1,this.loadCategorias(),this.loadImpresoras(),this.loadBodegas()}}]),t}()).\u0275fac=function(e){return new(e||mn)(P.Nb(M.b),P.Nb(Z.a),P.Nb(Y.a),P.Nb(N.a))},mn.\u0275cmp=P.Hb({type:mn,selectors:[["app-sub-categoria-producto"]],decls:43,vars:15,consts:[[1,"mat-elevation-z4"],["novalidate",""],["frmCategoriaGrupo","ngForm"],[1,"fullWidth"],["name","categoria","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","matInput","","placeholder","Descripci\xf3n de la sub - categor\xeda","name","descripcion","minlength","1","maxlength","45","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["type","text","matInput","","placeholder","Descripci\xf3n de la sub - categor\xeda","name","descripcion","minlength","1","maxlength","45","required","",3,"ngModel","ngModelChange",4,"ngIf"],["name","impresora","required","",3,"ngModel","ngModelChange"],["name","bodega","required","",3,"ngModel","ngModelChange"],["type","text","matInput","","placeholder","Cuenta contable (si aplica)","name","cuenta_contable","minlength","0","maxlength","10",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["type","text","matInput","","placeholder","Cuenta contable (si aplica)","name","cuenta_contable","minlength","0","maxlength","10",3,"ngModel","ngModelChange",4,"ngIf"],["name","categoriaGrupoPadre",3,"ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],["align","end"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button","color","warn",3,"click"],["color","accent","selected","",3,"click",4,"ngFor","ngForOf"],["color","warn","selected","",3,"click",4,"ngFor","ngForOf"],[3,"value"],["type","text","matInput","","placeholder","Descripci\xf3n de la sub - categor\xeda","name","descripcion","minlength","1","maxlength","45","required","",3,"matKeyboard","ngModel","ngModelChange"],["type","text","matInput","","placeholder","Descripci\xf3n de la sub - categor\xeda","name","descripcion","minlength","1","maxlength","45","required","",3,"ngModel","ngModelChange"],["type","text","matInput","","placeholder","Cuenta contable (si aplica)","name","cuenta_contable","minlength","0","maxlength","10",3,"matKeyboard","ngModel","ngModelChange"],["type","text","matInput","","placeholder","Cuenta contable (si aplica)","name","cuenta_contable","minlength","0","maxlength","10",3,"ngModel","ngModelChange"],[3,"value","disabled"],["color","accent","selected","",3,"click"],["color","warn","selected","",3,"click"]],template:function(e,t){if(1&e&&(P.Tb(0,"mat-card",0),P.Tb(1,"mat-card-title"),P.Tb(2,"h4"),P.Fc(3,"Sub - categor\xedas"),P.Sb(),P.Sb(),P.Tb(4,"mat-card-content"),P.Tb(5,"form",1,2),P.Tb(7,"mat-form-field",3),P.Tb(8,"mat-label"),P.Fc(9,"Categor\xeda"),P.Sb(),P.Tb(10,"mat-select",4),P.bc("ngModelChange",function(e){return t.categoriaGrupo.categoria=e}),P.Dc(11,an,2,2,"mat-option",5),P.Sb(),P.Sb(),P.Tb(12,"mat-form-field",3),P.Dc(13,rn,1,2,"input",6),P.Dc(14,cn,1,1,"input",7),P.Sb(),P.Tb(15,"mat-form-field",3),P.Tb(16,"mat-label"),P.Fc(17,"Impresora:"),P.Sb(),P.Tb(18,"mat-select",8),P.bc("ngModelChange",function(e){return t.categoriaGrupo.impresora=e}),P.Dc(19,ln,2,2,"mat-option",5),P.Sb(),P.Sb(),P.Tb(20,"mat-form-field",3),P.Tb(21,"mat-label"),P.Fc(22,"Sacar de la bodega:"),P.Sb(),P.Tb(23,"mat-select",9),P.bc("ngModelChange",function(e){return t.categoriaGrupo.bodega=e}),P.Dc(24,sn,2,2,"mat-option",5),P.Sb(),P.Sb(),P.Tb(25,"mat-form-field",3),P.Dc(26,un,1,2,"input",10),P.Dc(27,dn,1,1,"input",11),P.Sb(),P.Tb(28,"mat-form-field",3),P.Tb(29,"mat-label"),P.Fc(30,"Anidar dentro de"),P.Sb(),P.Tb(31,"mat-select",12),P.bc("ngModelChange",function(e){return t.categoriaGrupo.categoria_grupo_grupo=e}),P.Dc(32,bn,2,3,"mat-option",13),P.Sb(),P.Sb(),P.Tb(33,"div",14),P.Tb(34,"button",15),P.bc("click",function(){return t.onSubmitSubCategoria()}),P.Fc(35," Guardar "),P.Sb(),P.Tb(36,"button",16),P.bc("click",function(){return t.resetCategoriaGrupo()}),P.Fc(37," Cancelar "),P.Sb(),P.Sb(),P.Sb(),P.Ob(38,"hr"),P.Tb(39,"mat-chip-list"),P.Dc(40,gn,2,1,"mat-chip",17),P.Sb(),P.Tb(41,"mat-chip-list"),P.Dc(42,fn,2,1,"mat-chip",18),P.Sb(),P.Sb(),P.Sb()),2&e){var o=P.tc(6);P.Cb(10),P.lc("ngModel",t.categoriaGrupo.categoria),P.Cb(1),P.lc("ngForOf",t.categorias),P.Cb(2),P.lc("ngIf",!t.esMovil),P.Cb(1),P.lc("ngIf",t.esMovil),P.Cb(4),P.lc("ngModel",t.categoriaGrupo.impresora),P.Cb(1),P.lc("ngForOf",t.impresoras),P.Cb(4),P.lc("ngModel",t.categoriaGrupo.bodega),P.Cb(1),P.lc("ngForOf",t.bodegas),P.Cb(2),P.lc("ngIf",!t.esMovil),P.Cb(1),P.lc("ngIf",t.esMovil),P.Cb(4),P.lc("ngModel",t.categoriaGrupo.categoria_grupo_grupo),P.Cb(1),P.lc("ngForOf",t.categoriasGruposPadre),P.Cb(2),P.lc("disabled",!o.form.valid),P.Cb(6),P.lc("ngForOf",t.categorias),P.Cb(2),P.lc("ngForOf",t.categoriasGrupos)}},directives:[m.a,m.h,m.c,l.r,l.l,l.m,g.b,g.f,S.a,l.p,l.k,l.n,r.l,r.m,T.a,E.b,$.m,f.b,w.a,l.c,l.g,l.f,E.a],styles:[""]}),mn),hn=i("XiUz"),vn=i("Iab2"),Sn=i("IHy4"),Cn=i("TOq3");function Tn(e,t){if(1&e&&(P.Tb(0,"mat-option",11),P.Fc(1),P.Sb()),2&e){var o=t.$implicit,n=P.fc();P.lc("value",o.sede)("disabled",+o.sede==+n.miSede),P.Cb(1),P.Hc(" ",o.nombre," ")}}function Mn(e,t){1&e&&P.Ob(0,"app-cargando")}var Dn,In,Fn,xn=((In=function(){function t(o,n,i,a,r){var c=this;e(this,t),this.sedeSrvc=o,this.ls=n,this.snackBar=i,this.dialog=a,this.articuloSrvc=r,this.articulo=null,this.cargando=!1,this.sedes=[],this.params={},this.miSede=0,this.loadSedes=function(){c.sedeSrvc.get().subscribe(function(e){e&&(c.sedes=e)})},this.onSubmit=function(){c.dialog.open(Q.a,{maxWidth:"400px",data:new Q.b("Replicar art\xedculos","Este proceso replicar\xe1 TODOS los art\xedculos a las sedes seleccionadas. \xbfDesea continuar?","S\xed","No")}).afterClosed().subscribe(function(e){if(e){c.cargando=!0;var t={sedes:[],articulo:null};c.params.sede.forEach(function(e){return t.sedes.push({sede:+e})}),c.articulo&&(t.articulo=+c.articulo.articulo),c.articuloSrvc.replicaArticulosEnSedes(t).subscribe(function(e){e.exito?c.snackBar.open(e.mensaje,"Replicar art\xedculos",{duration:3e3}):c.snackBar.open("ERROR: ".concat(e.mensaje),"Replicar art\xedculos",{duration:7e3}),c.params={},c.cargando=!1})}})}}return o(t,[{key:"ngOnInit",value:function(){this.miSede=this.ls.get(R.b.usrTokenVar).sede||0,this.loadSedes()}}]),t}()).\u0275fac=function(e){return new(e||In)(P.Nb(Sn.a),P.Nb(N.a),P.Nb(M.b),P.Nb(_.b),P.Nb(Z.a))},In.\u0275cmp=P.Hb({type:In,selectors:[["app-replicar-asedes"]],inputs:{articulo:"articulo"},decls:18,vars:5,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmReplicaArticulosSedes","ngForm"],[2,"width","90%"],["name","sede","multiple","","required","",3,"ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],[4,"ngIf"],[3,"value","disabled"]],template:function(e,t){if(1&e){var o=P.Ub();P.Tb(0,"div",0),P.Tb(1,"div",1),P.Tb(2,"mat-card",2),P.Tb(3,"mat-card-title"),P.Tb(4,"h4"),P.Fc(5),P.Sb(),P.Sb(),P.Tb(6,"mat-card-content"),P.Tb(7,"form",3,4),P.bc("ngSubmit",function(){return P.xc(o),P.tc(8).form.valid&&t.onSubmit()}),P.Tb(9,"mat-form-field",5),P.Tb(10,"mat-label"),P.Fc(11,"Sede"),P.Sb(),P.Tb(12,"mat-select",6),P.bc("ngModelChange",function(e){return t.params.sede=e}),P.Dc(13,Tn,2,3,"mat-option",7),P.Sb(),P.Sb(),P.Tb(14,"div",8),P.Tb(15,"button",9),P.Fc(16," Replicar "),P.Sb(),P.Sb(),P.Sb(),P.Dc(17,Mn,1,0,"app-cargando",10),P.Sb(),P.Sb(),P.Sb(),P.Sb()}if(2&e){var n=P.tc(8);P.Cb(5),P.Hc("Replicar ",(null==t.articulo?null:t.articulo.descripcion)||"TODOS los art\xedculos"," a las sedes"),P.Cb(7),P.lc("ngModel",t.params.sede),P.Cb(1),P.lc("ngForOf",t.sedes),P.Cb(2),P.lc("disabled",!n.form.valid||t.cargando),P.Cb(2),P.lc("ngIf",t.cargando)}},directives:[m.a,m.h,m.c,l.r,l.l,l.m,g.b,g.f,S.a,l.p,l.k,l.n,r.l,T.a,r.m,$.m,Cn.a],styles:[""]}),In),_n=((Dn=function(){function t(o,n){e(this,t),this.dialogRef=o,this.data=n,this.articulo=null}return o(t,[{key:"ngOnInit",value:function(){this.data.articulo&&(this.articulo=this.data.articulo)}}]),t}()).\u0275fac=function(e){return new(e||Dn)(P.Nb(_.f),P.Nb(_.a))},Dn.\u0275cmp=P.Hb({type:Dn,selectors:[["app-replicar-a-sedes-dialog"]],decls:5,vars:1,consts:[["mat-dialog-content",""],[3,"articulo"],["mat-dialog-actions","","align","end"],["mat-raised-button","","type","button","color","accent",3,"click"]],template:function(e,t){1&e&&(P.Tb(0,"div",0),P.Ob(1,"app-replicar-asedes",1),P.Sb(),P.Tb(2,"div",2),P.Tb(3,"button",3),P.bc("click",function(){return t.dialogRef.close()}),P.Fc(4," Terminar "),P.Sb(),P.Sb()),2&e&&(P.Cb(1),P.lc("articulo",t.articulo))},directives:[_.d,xn,_.c,T.a],styles:[""]}),Dn),yn=i("pJXi"),kn=i("1wH6"),On=i("FHMA"),En=((Fn=function(){function t(){e(this,t)}return o(t,[{key:"transform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"...";return o&&(t=e.substr(0,t).lastIndexOf(" ")),e.length>t?e.substr(0,t)+n:e}}]),t}()).\u0275fac=function(e){return new(e||Fn)},Fn.\u0275pipe=P.Mb({name:"truncar",type:Fn,pure:!0}),Fn);function wn(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",5),P.bc("click",function(){return P.xc(o),P.fc().showArticuloForm=!0}),P.Tb(1,"mat-icon",6),P.Fc(2,"expand_more"),P.Sb(),P.Sb()}}function An(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",5),P.bc("click",function(){return P.xc(o),P.fc().showArticuloForm=!1}),P.Tb(1,"mat-icon",6),P.Fc(2,"expand_less"),P.Sb(),P.Sb()}}function Bn(e,t){1&e&&(P.Tb(0,"mat-hint",38),P.Tb(1,"strong"),P.Fc(2,"Por favor seleccione un categor\xeda."),P.Sb(),P.Sb())}function Rn(e,t){1&e&&P.Ob(0,"br")}function Hn(e,t){1&e&&(P.Tb(0,"mat-hint",38),P.Tb(1,"strong"),P.Fc(2,"Por favor seleccione un sub-categor\xeda."),P.Sb(),P.Sb())}function Pn(e,t){if(1&e&&(P.Tb(0,"mat-chip",39),P.Fc(1),P.Sb()),2&e){var o=P.fc(2);P.Cb(1),P.Hc(" ",o.categoria.descripcion," ")}}function Nn(e,t){if(1&e&&(P.Tb(0,"mat-chip",40),P.Fc(1),P.Sb()),2&e){var o=P.fc(2);P.Cb(1),P.Hc(" ",o.subcategoria.descripcion," ")}}function Un(e,t){if(1&e){var o=P.Ub();P.Tb(0,"input",41),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).articulo.descripcion=e}),P.Sb()}if(2&e){var n=P.fc(2);P.lc("matKeyboard",n.keyboardLayout)("ngModel",n.articulo.descripcion)}}function Gn(e,t){if(1&e){var o=P.Ub();P.Tb(0,"input",42),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).articulo.descripcion=e}),P.Sb()}if(2&e){var n=P.fc(2);P.lc("ngModel",n.articulo.descripcion)}}function zn(e,t){if(1&e&&(P.Tb(0,"mat-option",43),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.presentacion),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function qn(e,t){if(1&e&&(P.Tb(0,"mat-option",43),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.presentacion),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function jn(e,t){if(1&e){var o=P.Ub();P.Tb(0,"input",44),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).articulo.codigo=e}),P.Sb()}if(2&e){var n=P.fc(2);P.lc("matKeyboard",n.keyboardLayout)("ngModel",n.articulo.codigo)}}function $n(e,t){if(1&e){var o=P.Ub();P.Tb(0,"input",45),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).articulo.codigo=e}),P.Sb()}if(2&e){var n=P.fc(2);P.lc("ngModel",n.articulo.codigo)}}function Wn(e,t){if(1&e){var o=P.Ub();P.Tb(0,"input",46),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).articulo.shopify_id=e}),P.Sb()}if(2&e){var n=P.fc(2);P.lc("matKeyboard",n.keyboardLayout)("ngModel",n.articulo.shopify_id)}}function Ln(e,t){if(1&e){var o=P.Ub();P.Tb(0,"input",47),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).articulo.shopify_id=e}),P.Sb()}if(2&e){var n=P.fc(2);P.lc("ngModel",n.articulo.shopify_id)}}function Vn(e,t){if(1&e&&(P.Tb(0,"mat-option",43),P.Fc(1),P.gc(2,"number"),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.impuesto_especial),P.Cb(1),P.Ic(" ",o.descripcion," (",P.ic(2,3,o.porcentaje,"1.2-2"),"%) ")}}function Kn(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-form-field",15),P.Tb(1,"input",48),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).articulo.rendimiento=e}),P.Sb(),P.Sb()}if(2&e){var n=P.fc(2);P.Cb(1),P.lc("ngModel",n.articulo.rendimiento)}}function Qn(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-form-field",15),P.Tb(1,"input",49),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).articulo.cantidad_minima=e}),P.Sb(),P.Sb()}if(2&e){var n=P.fc(2);P.Cb(1),P.lc("ngModel",n.articulo.cantidad_minima)}}function Jn(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-form-field",15),P.Tb(1,"input",50),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).articulo.cantidad_maxima=e}),P.Sb(),P.Sb()}if(2&e){var n=P.fc(2);P.Cb(1),P.lc("ngModel",n.articulo.cantidad_maxima)}}function Xn(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",51),P.bc("click",function(){return P.xc(o),P.fc(2).replicarASedes()}),P.Fc(1," Replicar a sedes "),P.Sb()}}function Yn(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",52),P.bc("click",function(){return P.xc(o),P.fc(2).resetArticulo()}),P.Fc(1," Nuevo "),P.Sb()}}function Zn(e,t){if(1&e){var o=P.Ub();P.Tb(0,"form",7,8),P.bc("ngSubmit",function(){P.xc(o);var e=P.tc(1),t=P.fc();return e.form.valid&&t.onSubmit()}),P.Dc(2,Bn,3,0,"mat-hint",9),P.Dc(3,Rn,1,0,"br",3),P.Dc(4,Hn,3,0,"mat-hint",9),P.Tb(5,"mat-chip-list"),P.Dc(6,Pn,2,1,"mat-chip",10),P.Dc(7,Nn,2,1,"mat-chip",11),P.Sb(),P.Tb(8,"mat-form-field",12),P.Dc(9,Un,1,2,"input",13),P.Dc(10,Gn,1,1,"input",14),P.Sb(),P.Tb(11,"mat-form-field",15),P.Tb(12,"input",16),P.bc("ngModelChange",function(e){return P.xc(o),P.fc().articulo.precio=e}),P.Sb(),P.Sb(),P.Tb(13,"mat-form-field",15),P.Tb(14,"mat-label"),P.Fc(15,"Presentaci\xf3n Venta"),P.Sb(),P.Tb(16,"mat-select",17),P.bc("ngModelChange",function(e){return P.xc(o),P.fc().articulo.presentacion=e}),P.Dc(17,zn,2,2,"mat-option",18),P.Sb(),P.Sb(),P.Tb(18,"mat-form-field",15),P.Tb(19,"mat-label"),P.Fc(20,"Presentaci\xf3n Reportes"),P.Sb(),P.Tb(21,"mat-select",19),P.bc("ngModelChange",function(e){return P.xc(o),P.fc().articulo.presentacion_reporte=e}),P.Dc(22,qn,2,2,"mat-option",18),P.Sb(),P.Sb(),P.Tb(23,"mat-form-field",15),P.Dc(24,jn,1,2,"input",20),P.Dc(25,$n,1,1,"input",21),P.Sb(),P.Tb(26,"mat-form-field",15),P.Dc(27,Wn,1,2,"input",22),P.Dc(28,Ln,1,1,"input",23),P.Sb(),P.Tb(29,"mat-form-field",15),P.Tb(30,"mat-label"),P.Fc(31,"Impuesto Especial"),P.Sb(),P.Tb(32,"mat-select",24),P.bc("ngModelChange",function(e){return P.xc(o),P.fc().articulo.impuesto_especial=e}),P.Dc(33,Vn,3,6,"mat-option",18),P.Sb(),P.Sb(),P.Dc(34,Kn,2,1,"mat-form-field",25),P.Dc(35,Qn,2,1,"mat-form-field",25),P.Dc(36,Jn,2,1,"mat-form-field",25),P.Tb(37,"div",26),P.Tb(38,"div",27),P.Tb(39,"mat-checkbox",28),P.bc("ngModelChange",function(e){return P.xc(o),+(P.fc().articulo.produccion=e)}),P.Fc(40,"\xbfEs producci\xf3n?"),P.Sb(),P.Sb(),P.Tb(41,"div",27),P.Tb(42,"mat-checkbox",29),P.bc("ngModelChange",function(e){return P.xc(o),+(P.fc().articulo.mostrar_pos=e)}),P.Fc(43,"Mostrar en POS"),P.Sb(),P.Sb(),P.Tb(44,"div",27),P.Tb(45,"mat-checkbox",30),P.bc("ngModelChange",function(e){return P.xc(o),+(P.fc().articulo.combo=e)})("change",function(){return P.xc(o),P.fc().setOpcMultOff()}),P.Fc(46,"Combo"),P.Sb(),P.Sb(),P.Tb(47,"div",27),P.Tb(48,"mat-checkbox",31),P.bc("ngModelChange",function(e){return P.xc(o),+(P.fc().articulo.multiple=e)})("change",function(){return P.xc(o),P.fc().setComboOff()}),P.Fc(49,"Opci\xf3n m\xfaltiple"),P.Sb(),P.Sb(),P.Sb(),P.Tb(50,"div",26),P.Tb(51,"div",27),P.Tb(52,"mat-checkbox",32),P.bc("ngModelChange",function(e){return P.xc(o),+(P.fc().articulo.mostrar_inventario=e)}),P.Fc(53,"Mostrar en Inventario"),P.Sb(),P.Sb(),P.Tb(54,"div",27),P.Tb(55,"mat-checkbox",33),P.bc("ngModelChange",function(e){return P.xc(o),+(P.fc().articulo.esreceta=e)}),P.Fc(56,"Es receta"),P.Sb(),P.Sb(),P.Sb(),P.Tb(57,"div",34),P.Tb(58,"button",35),P.Fc(59," Guardar "),P.Sb(),P.Dc(60,Xn,2,0,"button",36),P.Dc(61,Yn,2,0,"button",37),P.Sb(),P.Sb()}if(2&e){var n=P.tc(1),i=P.fc();P.Cb(2),P.lc("ngIf",!i.categoria||!i.categoria.descripcion),P.Cb(1),P.lc("ngIf",!i.categoria||!i.categoria.descripcion),P.Cb(1),P.lc("ngIf",!i.subcategoria||!i.subcategoria.descripcion),P.Cb(2),P.lc("ngIf",i.categoria),P.Cb(1),P.lc("ngIf",i.subcategoria),P.Cb(2),P.lc("ngIf",!i.esMovil),P.Cb(1),P.lc("ngIf",i.esMovil),P.Cb(2),P.lc("ngModel",i.articulo.precio),P.Cb(4),P.lc("ngModel",i.articulo.presentacion),P.Cb(1),P.lc("ngForOf",i.presentaciones),P.Cb(4),P.lc("ngModel",i.articulo.presentacion_reporte),P.Cb(1),P.lc("ngForOf",i.presentacionesFiltered),P.Cb(2),P.lc("ngIf",!i.esMovil),P.Cb(1),P.lc("ngIf",i.esMovil),P.Cb(2),P.lc("ngIf",!i.esMovil),P.Cb(1),P.lc("ngIf",i.esMovil),P.Cb(4),P.lc("ngModel",i.articulo.impuesto_especial),P.Cb(1),P.lc("ngForOf",i.impuestosEspeciales),P.Cb(1),P.lc("ngIf",1==+i.articulo.produccion),P.Cb(1),P.lc("ngIf",1==+i.articulo.multiple||+i.articulo.combo),P.Cb(1),P.lc("ngIf",1==+i.articulo.multiple||+i.articulo.combo),P.Cb(3),P.lc("ngModel",+i.articulo.produccion),P.Cb(3),P.lc("ngModel",+i.articulo.mostrar_pos),P.Cb(3),P.lc("ngModel",+i.articulo.combo),P.Cb(3),P.lc("ngModel",+i.articulo.multiple),P.Cb(4),P.lc("ngModel",+i.articulo.mostrar_inventario),P.Cb(3),P.lc("ngModel",+i.articulo.esreceta),P.Cb(3),P.lc("disabled",!n.form.valid||!i.articulo.categoria_grupo),P.Cb(2),P.lc("ngIf",i.articulo.articulo),P.Cb(1),P.lc("ngIf",i.articulo.articulo)}}function ei(e,t){1&e&&P.Ob(0,"hr")}function ti(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",5),P.bc("click",function(){return P.xc(o),P.fc(2).showDetalleForm=!0}),P.Tb(1,"mat-icon",6),P.Fc(2,"expand_more"),P.Sb(),P.Sb()}}function oi(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",5),P.bc("click",function(){return P.xc(o),P.fc(2).showDetalleForm=!1}),P.Tb(1,"mat-icon",6),P.Fc(2,"expand_less"),P.Sb(),P.Sb()}}function ni(e,t){if(1&e&&(P.Tb(0,"mat-option",43),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o),P.Cb(1),P.Ic(" ",o.descripcion,"",o.subcategoria&&o.subcategoria.descripcion?" ("+o.subcategoria.descripcion+")":""," ")}}function ii(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-form-field",15),P.Tb(1,"input",63),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(3).receta.precio=e}),P.Sb(),P.Sb()}if(2&e){var n=P.fc(3);P.Cb(1),P.lc("ngModel",n.receta.precio)}}function ai(e,t){if(1&e&&(P.Tb(0,"mat-option",43),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.medida),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function ri(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",52),P.bc("click",function(){return P.xc(o),P.fc(3).resetReceta()}),P.Fc(1," Nuevo "),P.Sb()}}function ci(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",52),P.bc("click",function(){return P.xc(o),P.fc(3).imprimirReceta()}),P.Fc(1," Imprimir "),P.Sb()}}var li=function(){return{standalone:!0}};function si(e,t){if(1&e){var o=P.Ub();P.Tb(0,"form",7,55),P.bc("ngSubmit",function(){P.xc(o);var e=P.tc(1),t=P.fc(2);return e.form.valid&&t.onSubmitDetail()}),P.Tb(2,"mat-form-field",15),P.Tb(3,"mat-label"),P.Fc(4,"Art\xedculo"),P.Sb(),P.Tb(5,"input",56),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).txtArticuloSelected=e})("keyup",function(){P.xc(o);var e=P.fc(2);return e.filtrarArticulos(e.txtArticuloSelected)}),P.Sb(),P.Tb(6,"mat-autocomplete",57,58),P.Dc(8,ni,2,3,"mat-option",18),P.Sb(),P.Sb(),P.Tb(9,"mat-form-field",15),P.Tb(10,"input",59),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).receta.cantidad=e}),P.Sb(),P.Sb(),P.Dc(11,ii,2,1,"mat-form-field",25),P.Tb(12,"mat-form-field",15),P.Tb(13,"mat-label"),P.Fc(14,"Unidad de medida"),P.Sb(),P.Tb(15,"mat-select",60),P.bc("ngModelChange",function(e){return P.xc(o),P.fc(2).receta.medida=e}),P.Dc(16,ai,2,2,"mat-option",18),P.Sb(),P.Sb(),P.Tb(17,"div",26),P.Tb(18,"div",27),P.Tb(19,"mat-checkbox",61),P.bc("ngModelChange",function(e){return P.xc(o),+(P.fc(2).receta.racionable=e)}),P.Fc(20,"\xbfEs racionable?"),P.Sb(),P.Sb(),P.Tb(21,"div",27),P.Tb(22,"mat-checkbox",62),P.bc("ngModelChange",function(e){return P.xc(o),+(P.fc(2).receta.precio_extra=e)}),P.Fc(23," Precio Extra "),P.Sb(),P.Sb(),P.Sb(),P.Tb(24,"div",34),P.Tb(25,"button",35),P.Fc(26," Guardar "),P.Sb(),P.Dc(27,ri,2,0,"button",37),P.Dc(28,ci,2,0,"button",37),P.Sb(),P.Sb()}if(2&e){var n=P.tc(1),i=P.tc(7),a=P.fc(2);P.Cb(5),P.lc("ngModel",a.txtArticuloSelected)("ngModelOptions",P.nc(14,li))("matAutocomplete",i),P.Cb(1),P.lc("displayWith",a.displayArticulo),P.Cb(2),P.lc("ngForOf",a.filteredArticulos),P.Cb(2),P.lc("ngModel",a.receta.cantidad),P.Cb(1),P.lc("ngIf",a.receta.precio_extra&&a.receta.precio_extra>0),P.Cb(4),P.lc("ngModel",a.receta.medida),P.Cb(1),P.lc("ngForOf",a.medidas),P.Cb(3),P.lc("ngModel",+a.receta.racionable),P.Cb(3),P.lc("ngModel",+a.receta.precio_extra),P.Cb(3),P.lc("disabled",!n.form.valid),P.Cb(2),P.lc("ngIf",a.receta.articulo_detalle),P.Cb(1),P.lc("ngIf",a.recetas.length>0)}}function ui(e,t){1&e&&P.Ob(0,"hr")}function di(e,t){1&e&&(P.Tb(0,"th",76),P.Fc(1,"Art\xedculo"),P.Sb())}function bi(e,t){if(1&e&&(P.Tb(0,"td",77),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.Cb(1),P.Gc(o.articulo.descripcion)}}function gi(e,t){1&e&&(P.Tb(0,"th",78),P.Fc(1,"Cantidad"),P.Sb())}function fi(e,t){if(1&e&&(P.Tb(0,"td",79),P.Fc(1),P.gc(2,"number"),P.Sb()),2&e){var o=t.$implicit;P.Cb(1),P.Gc(P.ic(2,1,o.cantidad,"1.2-2"))}}function mi(e,t){1&e&&(P.Tb(0,"th",78),P.Fc(1,"Unida de medida"),P.Sb())}function pi(e,t){if(1&e&&(P.Tb(0,"td",79),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.Cb(1),P.Gc(o.medida.descripcion)}}function hi(e,t){1&e&&(P.Tb(0,"th",78),P.Fc(1,"Precio"),P.Sb())}function vi(e,t){if(1&e&&(P.Tb(0,"td",79),P.Fc(1),P.gc(2,"number"),P.Sb()),2&e){var o=t.$implicit;P.Cb(1),P.Gc(P.ic(2,1,o.precio,"1.2-2"))}}function Si(e,t){1&e&&(P.Tb(0,"th",76),P.Fc(1,"\xa0"),P.Sb())}function Ci(e,t){if(1&e){var o=P.Ub();P.Tb(0,"td",77),P.Tb(1,"button",51),P.bc("click",function(){P.xc(o);var e=t.$implicit;return P.fc(3).getReceta(e.receta,e.articulo_detalle)}),P.Fc(2," Editar "),P.Sb(),P.Tb(3,"button",52),P.bc("click",function(){P.xc(o);var e=t.$implicit;return P.fc(3).eliminaReceta(e)}),P.Fc(4," Eliminar "),P.Sb(),P.Sb()}}function Ti(e,t){1&e&&P.Ob(0,"tr",80)}function Mi(e,t){1&e&&P.Ob(0,"tr",81)}function Di(e,t){if(1&e&&(P.Tb(0,"table",64),P.Rb(1,65),P.Dc(2,di,2,0,"th",66),P.Dc(3,bi,2,1,"td",67),P.Qb(),P.Rb(4,68),P.Dc(5,gi,2,0,"th",69),P.Dc(6,fi,3,4,"td",70),P.Qb(),P.Rb(7,71),P.Dc(8,mi,2,0,"th",69),P.Dc(9,pi,2,1,"td",70),P.Qb(),P.Rb(10,72),P.Dc(11,hi,2,0,"th",69),P.Dc(12,vi,3,4,"td",70),P.Qb(),P.Rb(13,73),P.Dc(14,Si,2,0,"th",66),P.Dc(15,Ci,5,0,"td",67),P.Qb(),P.Dc(16,Ti,1,0,"tr",74),P.Dc(17,Mi,1,0,"tr",75),P.Sb()),2&e){var o=P.fc(2);P.lc("dataSource",o.dataSource),P.Cb(16),P.lc("matHeaderRowDef",o.displayedColumns),P.Cb(1),P.lc("matRowDefColumns",o.displayedColumns)}}function Ii(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-card",0),P.Tb(1,"mat-card-title"),P.Tb(2,"h4"),P.Fc(3),P.gc(4,"truncar"),P.Dc(5,ti,3,0,"button",1),P.Dc(6,oi,3,0,"button",1),P.Sb(),P.Sb(),P.Tb(7,"mat-card-content"),P.Dc(8,si,29,15,"form",2),P.Dc(9,ui,1,0,"hr",3),P.Tb(10,"mat-form-field",15),P.Tb(11,"input",53),P.bc("keyup",function(e){return P.xc(o),P.fc().applyFilter(e.target.value)}),P.Sb(),P.Sb(),P.Dc(12,Di,18,3,"table",54),P.Sb(),P.Sb()}if(2&e){var n=P.fc();P.Cb(3),P.Hc(" Detalle del art\xedculo ",P.ic(4,6,n.articulo.descripcion,35)," "),P.Cb(2),P.lc("ngIf",!n.showDetalleForm),P.Cb(1),P.lc("ngIf",n.showDetalleForm),P.Cb(2),P.lc("ngIf",n.showDetalleForm),P.Cb(1),P.lc("ngIf",n.recetas.length>0),P.Cb(3),P.lc("ngIf",n.recetas.length>0)}}var Fi,xi=((Fi=function(){function t(o,n,i,a,r,c,l,s){var u=this;e(this,t),this.dialog=o,this.snackBar=n,this.ls=i,this.articuloSrvc=a,this.medidaSrvc=r,this.presentacionSrvc=c,this.impuestoEspecialSrvc=l,this.rptSrvc=s,this.categoria=null,this.subcategoria=null,this.articuloSvd=new P.o,this.titulo="Receta",this.showArticuloForm=!0,this.medidas=[],this.medidasFull=[],this.presentaciones=[],this.presentacionesFiltered=[],this.articulos=[],this.filteredArticulos=[],this.recetas=[],this.impuestosEspeciales=[],this.showDetalleForm=!0,this.displayedColumns=["articulo","cantidad","medida","precio","editItem"],this.keyboardLayout=R.b.IDIOMA_TECLADO,this.esMovil=!1,this.txtArticuloSelected=void 0,this.endSubs=new Yo.a,this.resetArticulo=function(){u.articulo={articulo:null,categoria_grupo:u.articulo.categoria_grupo,presentacion:null,descripcion:null,precio:null,bien_servicio:"B",produccion:0,mostrar_pos:1,presentacion_reporte:null,impuesto_especial:null,shopify_id:null,multiple:0,cantidad_minima:1,cantidad_maxima:1,combo:0,rendimiento:0,mostrar_inventario:0},u.recetas=[],u.resetReceta(),u.presentacionesFiltered=JSON.parse(JSON.stringify(u.presentaciones))},this.setArticuloCategoriaGrupo=function(e){return u.articulo.categoria_grupo=+e},this.onSubmit=function(){u.endSubs.add(u.articuloSrvc.saveArticulo(u.articulo).subscribe(function(e){e.exito?(u.articuloSvd.emit(),u.resetArticulo(),u.articulo=e.articulo,u.loadRecetas(u.articulo.articulo),u.loadArticulos(),u.filtrarPresentaciones(u.articulo),u.snackBar.open("Art\xedculo guardado con \xe9xito...","Art\xedculo",{duration:3e3})):u.snackBar.open("ERROR: ".concat(e.mensaje),"Articulo",{duration:3e3})}))},this.loadMedidas=function(){u.endSubs.add(u.medidaSrvc.get().subscribe(function(e){e&&(u.medidasFull=e)}))},this.loadPresentaciones=function(){u.endSubs.add(u.presentacionSrvc.get().subscribe(function(e){e&&(u.presentaciones=e,u.filtrarPresentaciones())}))},this.filtrarPresentaciones=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;u.presentaciones&&u.presentaciones.length>0&&((null==e?void 0:e.articulo)?u.endSubs.add(u.articuloSrvc.tieneMovimientos(e.articulo).subscribe(function(t){if(t.exito)if(t.tiene_movimientos){var o=u.presentaciones.find(function(t){return+t.presentacion==+e.presentacion_reporte});u.presentacionesFiltered=u.presentaciones.filter(function(e){return+e.medida.medida==+o.medida.medida})}else u.presentacionesFiltered=JSON.parse(JSON.stringify(u.presentaciones));else u.snackBar.open("ERROR: ".concat(t.mensaje),"Art\xedculo",{duration:7e3})})):u.presentacionesFiltered=JSON.parse(JSON.stringify(u.presentaciones)))},this.loadArticulos=function(){u.endSubs.add(u.articuloSrvc.getArticulos().subscribe(function(e){e&&(u.articulos=e)}))},this.loadImpuestosEspeciales=function(){u.endSubs.add(u.impuestoEspecialSrvc.get().subscribe(function(e){e&&(u.impuestosEspeciales=e)}))},this.displayArticulo=function(e){if(e)return u.receta.articulo=e.articulo,u.filtrarMedidas(e),e.descripcion;u.medidas=[]},this.filtrarMedidas=function(e){var t=u.presentaciones.find(function(t){return+t.presentacion==+e.presentacion_reporte});u.medidas=t?u.medidasFull.filter(function(e){return+e.medida==+t.medida.medida}):[]},this.filtrarArticulos=function(e){if(e&&"string"==typeof e){var t=e.toLowerCase();u.filteredArticulos=u.articulos.filter(function(e){return e.descripcion.toLowerCase().includes(t)})}else u.filteredArticulos=JSON.parse(JSON.stringify(u.articulos))},this.resetReceta=function(){u.receta={articulo_detalle:null,receta:u.articulo.articulo||0,racionable:0,articulo:null,cantidad:1,medida:null,anulado:0,precio_extra:0,precio:0},u.txtArticuloSelected=void 0,u.updateTableDataSource()},this.loadRecetas=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+u.articulo.articulo;u.endSubs.add(u.articuloSrvc.getArticuloDetalle(+e,{receta:+e}).subscribe(function(e){e&&(u.recetas=e,u.updateTableDataSource())}))},this.getReceta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+u.articulo.articulo,t=arguments.length>1?arguments[1]:void 0;u.endSubs.add(u.articuloSrvc.getArticuloDetalle(e,{articulo_detalle:t}).subscribe(function(e){e&&(u.receta={articulo_detalle:e[0].articulo_detalle,receta:e[0].receta.articulo,racionable:e[0].articulo.articulo,articulo:e[0].articulo.articulo,cantidad:+e[0].cantidad,medida:e[0].medida.medida,anulado:e[0].anulado||0,precio_extra:e[0].precio_extra||0,precio:+e[0].precio},u.txtArticuloSelected=e[0].articulo,u.showDetalleForm=!0)}))},this.eliminaReceta=function(e){var t=u.dialog.open(Q.a,{maxWidth:"400px",data:new Q.b("Eliminar detalle","\xbfDesea eliminar '".concat(e.cantidad," de ").concat(e.articulo.descripcion,"' de la receta?"),"S\xed","No")});u.endSubs.add(t.afterClosed().subscribe(function(t){t&&(e.anulado=1,e.articulo=e.articulo.articulo,u.endSubs.add(u.articuloSrvc.saveArticuloDetalle(e).subscribe(function(e){u.loadRecetas(),u.resetReceta()})))}))},this.onSubmitDetail=function(){u.receta.receta=u.articulo.articulo,u.endSubs.add(u.articuloSrvc.saveArticuloDetalle(u.receta).subscribe(function(e){e&&(e.exito?(u.loadRecetas(),u.resetReceta()):u.snackBar.open("ERROR: ".concat(e.mensaje),"Art\xedculo",{duration:3e3}))}))},this.imprimirReceta=function(){u.endSubs.add(u.rptSrvc.imprimirReceta(u.articulo.articulo).subscribe(function(e){if(e){var t=new Blob([e],{type:"application/pdf"});Object(vn.saveAs)(t,"".concat(u.titulo,"_").concat(u.articulo.descripcion,".pdf"))}else u.snackBar.open("No se pudo generar el reporte...",u.titulo,{duration:3e3})}))},this.updateTableDataSource=function(){u.dataSource=new v.l(u.recetas),u.dataSource.filterPredicate=function(e,t){return e.articulo.descripcion.toLowerCase().includes(t)}},this.replicarASedes=function(){var e=u.dialog.open(_n,{width:"50%",data:{articulo:u.articulo}});u.endSubs.add(e.afterClosed().subscribe(function(e){}))},this.applyFilter=function(e){u.dataSource.filter=e.toLocaleLowerCase()},this.setOpcMultOff=function(){1==+u.articulo.combo&&(u.articulo.multiple=0)},this.setComboOff=function(){1==+u.articulo.multiple&&(u.articulo.combo=0)}}return o(t,[{key:"ngOnInit",value:function(){this.esMovil=this.ls.get(R.b.usrTokenVar).enmovil||!1,this.resetArticulo(),this.loadMedidas(),this.loadArticulos(),this.loadPresentaciones(),this.loadImpuestosEspeciales()}},{key:"ngOnDestroy",value:function(){this.endSubs.unsubscribe()}}]),t}()).\u0275fac=function(e){return new(e||Fi)(P.Nb(_.b),P.Nb(M.b),P.Nb(N.a),P.Nb(Z.a),P.Nb(yn.a),P.Nb(ee.a),P.Nb(kn.a),P.Nb(On.a))},Fi.\u0275cmp=P.Hb({type:Fi,selectors:[["app-form-producto"]],inputs:{articulo:"articulo",categoria:"categoria",subcategoria:"subcategoria"},outputs:{articuloSvd:"articuloSvd"},decls:11,vars:9,consts:[[1,"mat-elevation-z4","fullWidth"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmArticulo","ngForm"],["align","start",4,"ngIf"],["color","accent","class","catSubCat","selected","",4,"ngIf"],["color","warn","class","catSubCat","selected","",4,"ngIf"],[1,"fullWidth",2,"margin-top","10px"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","minlength","1","maxlength","250","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","minlength","1","maxlength","250","required","",3,"ngModel","ngModelChange",4,"ngIf"],[1,"fullWidth"],["matInput","","type","number","placeholder","Precio","name","precio","required","",3,"ngModel","ngModelChange"],["name","presentacion","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","presentacion_reporte","required","",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","C\xf3digo","name","codigo","minlength","1","maxlength","25","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text","placeholder","C\xf3digo","name","codigo","minlength","1","maxlength","25","required","",3,"ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text","placeholder","Shopify ID","name","shopify_id","minlength","1","maxlength","25",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text","placeholder","Shopify ID","name","shopify_id","minlength","1","maxlength","25",3,"ngModel","ngModelChange",4,"ngIf"],["name","impuesto_especial",3,"ngModel","ngModelChange"],["class","fullWidth",4,"ngIf"],[1,"row"],[1,"col","m3","s3"],["name","produccion",1,"example-margin",3,"ngModel","ngModelChange"],["name","mostrar_pos",1,"example-margin",3,"ngModel","ngModelChange"],["name","combo",1,"example-margin",3,"ngModel","ngModelChange","change"],["name","multiple",1,"example-margin",3,"ngModel","ngModelChange","change"],["name","mostrar_inventario",1,"example-margin",3,"ngModel","ngModelChange"],["name","esreceta",1,"example-margin",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["align","start"],["color","accent","selected","",1,"catSubCat"],["color","warn","selected","",1,"catSubCat"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","minlength","1","maxlength","250","required","",3,"matKeyboard","ngModel","ngModelChange"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","minlength","1","maxlength","250","required","",3,"ngModel","ngModelChange"],[3,"value"],["matInput","","type","text","placeholder","C\xf3digo","name","codigo","minlength","1","maxlength","25","required","",3,"matKeyboard","ngModel","ngModelChange"],["matInput","","type","text","placeholder","C\xf3digo","name","codigo","minlength","1","maxlength","25","required","",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","Shopify ID","name","shopify_id","minlength","1","maxlength","25",3,"matKeyboard","ngModel","ngModelChange"],["matInput","","type","text","placeholder","Shopify ID","name","shopify_id","minlength","1","maxlength","25",3,"ngModel","ngModelChange"],["matInput","","type","number","step","0.05","placeholder","Rendimiento","name","rendimiento","required","",3,"ngModel","ngModelChange"],["matInput","","type","number","step","1","placeholder","Cantidad minima","name","minima","required","",3,"ngModel","ngModelChange"],["matInput","","type","number","step","1","placeholder","Cantidad maxima","name","maxima","required","",3,"ngModel","ngModelChange"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"click"],["mat-raised-button","","type","button","color","accent",3,"click"],["matInput","","placeholder","Buscar",3,"keyup"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleArticulo","ngForm"],["type","text","placeholder","Art\xedculo","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith"],["autoArticulos","matAutocomplete"],["matInput","","placeholder","Cantidad","type","number","step","0.01","name","cantidad","required","",3,"ngModel","ngModelChange"],["name","medida","required","",3,"ngModel","ngModelChange"],["name","racionable",1,"fullWidth",3,"ngModel","ngModelChange"],["name","extra",1,"fullWidth",3,"ngModel","ngModelChange"],["matInput","","placeholder","Precio","name","precio","required","",3,"ngModel","ngModelChange"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","articulo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","cantidad"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","medida"],["matColumnDef","precio"],["matColumnDef","editItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(P.Tb(0,"mat-card",0),P.Tb(1,"mat-card-title"),P.Tb(2,"h4"),P.Fc(3),P.gc(4,"truncar"),P.Dc(5,wn,3,0,"button",1),P.Dc(6,An,3,0,"button",1),P.Sb(),P.Sb(),P.Tb(7,"mat-card-content"),P.Dc(8,Zn,62,30,"form",2),P.Sb(),P.Sb(),P.Dc(9,ei,1,0,"hr",3),P.Dc(10,Ii,13,9,"mat-card",4)),2&e&&(P.Cb(3),P.Hc(" Art\xedculo ",t.articulo.articulo?P.ic(4,6,t.articulo.descripcion,35):""," "),P.Cb(2),P.lc("ngIf",!t.showArticuloForm),P.Cb(1),P.lc("ngIf",t.showArticuloForm),P.Cb(2),P.lc("ngIf",t.showArticuloForm),P.Cb(1),P.lc("ngIf",t.articulo.articulo),P.Cb(1),P.lc("ngIf",t.articulo.articulo))},directives:[m.a,m.h,r.m,m.c,T.a,b.a,l.r,l.l,l.m,E.b,g.b,f.b,l.o,l.c,l.p,l.k,l.n,g.f,S.a,r.l,C.a,g.e,E.a,w.a,l.g,l.f,$.m,O.c,O.a,v.k,v.c,v.e,v.b,v.g,v.j,v.d,v.a,v.f,v.i],pipes:[En,r.f],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}.catSubCat[_ngcontent-%COMP%]{margin-bottom:10px}"]}),Fi),_i=["frmProducto"],yi=["frmSubcategoria"];function ki(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-chip",17),P.bc("click",function(){P.xc(o);var e=t.$implicit,n=P.fc();return!n.cargando&&n.selectCategoria(e)}),P.Fc(1),P.Sb()}if(2&e){var n=t.$implicit;P.Cb(1),P.Hc(" ",n.descripcion," ")}}function Oi(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-chip",20),P.bc("click",function(){P.xc(o);var e=t.$implicit,n=P.fc(2);return!n.cargando&&n.selectSubcat(e)}),P.Fc(1),P.Sb()}if(2&e){var n=t.$implicit;P.Cb(1),P.Hc(" ",n.descripcion," ")}}function Ei(e,t){if(1&e&&(P.Tb(0,"mat-chip-list",18),P.Dc(1,Oi,2,1,"mat-chip",19),P.Sb()),2&e){var o=t.$implicit;P.Cb(1),P.lc("ngForOf",o)}}function wi(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",21),P.bc("click",function(){P.xc(o);var e=t.$implicit;return P.fc().setArticulo(e)}),P.Fc(1),P.gc(2,"truncar"),P.Sb()}if(2&e){var n=t.$implicit;P.Cb(1),P.Gc(P.ic(2,1,n.descripcion,35))}}var Ai,Bi,Ri=function(){return{standalone:!0}},Hi=((Ai=function(){function t(o,n){var i=this;e(this,t),this.articuloSrvc=o,this.ls=n,this.categorias=[],this.categoriasGrupos=[],this.listasCategoriasGrupo=[],this.articulos=[],this.articulosFull=[],this.txtFiltro="",this.cargando=!1,this.endSubs=new Yo.a,this.setArticulo=function(e){i.endSubs.add(i.articuloSrvc.getArticulo({articulo:e.articulo}).subscribe(function(e){if(e&&e.length>0){var t=e[0];i.articulo={articulo:+t.articulo,categoria_grupo:+t.categoria_grupo.categoria_grupo,presentacion:t.presentacion.presentacion,descripcion:t.descripcion,precio:+t.precio,codigo:t.codigo,produccion:t.produccion,presentacion_reporte:t.presentacion_reporte.presentacion,mostrar_pos:t.mostrar_pos,impuesto_especial:t.impuesto_especial,shopify_id:t.shopify_id,multiple:t.multiple,cantidad_minima:t.cantidad_minima,cantidad_maxima:t.cantidad_maxima,combo:t.combo,rendimiento:t.rendimiento,mostrar_inventario:t.mostrar_inventario,esreceta:t.esreceta},i.categoria=i.categorias.find(function(e){return+e.categoria==+t.categoria_grupo.categoria}),i.categoriaGrupo={categoria_grupo:+t.categoria_grupo.categoria_grupo,categoria:+t.categoria_grupo.categoria,categoria_grupo_grupo:+t.categoria_grupo.categoria_grupo_grupo,descripcion:t.categoria_grupo.descripcion,receta:+t.categoria_grupo.receta,impresora:+t.categoria_grupo.impresora,descuento:+t.categoria_grupo.descuento},i.frmProductoComponent.loadRecetas(+i.articulo.articulo),i.frmProductoComponent.resetReceta(),i.frmProductoComponent.filtrarPresentaciones(i.articulo)}}))},this.setArticuloCategoriaGrupo=function(e){i.articulo.categoria_grupo=+e,i.frmProductoComponent.setArticuloCategoriaGrupo(+e)},this.refreshArticuloList=function(e){i.loadArticulos()},this.loadCategorias=function(){i.endSubs.add(i.articuloSrvc.getCategorias({sede:+i.ls.get(R.b.usrTokenVar).sede||0}).subscribe(function(e){e&&(i.categorias=e)}))},this.loadSubCategorias=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i.cargando=!0;var o={categoria:+e,categoria_grupo_grupo:null};t?(i.frmProductoComponent.articulo.categoria_grupo=t,o.categoria_grupo_grupo=t):delete o.categoria_grupo_grupo,i.endSubs.add(i.articuloSrvc.getCategoriasGrupos(o).subscribe(function(e){e&&e.length>0?(t||(i.frmProductoComponent.articulo.categoria_grupo=null,i.listasCategoriasGrupo=[]),i.listasCategoriasGrupo.push(i.articuloSrvc.adaptCategoriaGrupoResponse(e))):t&&i.loadArticulos(t),i.cargando=!1}))},this.loadArticulos=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={categoria_grupo:null};e?t.categoria_grupo=e:delete t.categoria_grupo,i.endSubs.add(i.articuloSrvc.getArticulos(t).subscribe(function(e){e&&(i.articulosFull=e,i.articulos=JSON.parse(JSON.stringify(i.articulosFull)),i.applyFilter())}))},this.reloadCategoriasInSubcategoriasArticulos=function(){i.loadCategorias(),i.frmSubcategoria.loadCategorias()},this.verTodos=function(){i.categoria=null,i.categoriaGrupo=null,i.frmProductoComponent.resetArticulo(),i.categoriasGrupos=[],i.listasCategoriasGrupo=[],i.loadArticulos()},this.selectCategoria=function(e){i.categoria=e,i.categoriaGrupo=null,i.frmProductoComponent.resetArticulo(),i.articulos=[],i.loadSubCategorias(e.categoria)},this.selectSubcat=function(e){i.categoriaGrupo=e,i.loadSubCategorias(i.categoria.categoria,e.categoria_grupo)},this.articulo={articulo:null,categoria_grupo:null,presentacion:null,descripcion:null,precio:null,bien_servicio:"B",produccion:0,presentacion_reporte:null,mostrar_pos:0,impuesto_especial:null,rendimiento:1,mostrar_inventario:0}}return o(t,[{key:"ngOnInit",value:function(){this.loadCategorias(),this.loadArticulos()}},{key:"ngOnDestroy",value:function(){this.endSubs.unsubscribe()}},{key:"applyFilter",value:function(){this.articulos=this.txtFiltro.length>0?Object(R.c)(this.articulosFull,this.txtFiltro):JSON.parse(JSON.stringify(this.articulosFull))}}]),t}()).\u0275fac=function(e){return new(e||Ai)(P.Nb(Z.a),P.Nb(N.a))},Ai.\u0275cmp=P.Hb({type:Ai,selectors:[["app-producto"]],viewQuery:function(e,t){var o;1&e&&(P.Kc(_i,1),P.Kc(yi,1)),2&e&&(P.sc(o=P.cc())&&(t.frmProductoComponent=o.first),P.sc(o=P.cc())&&(t.frmSubcategoria=o.first))},decls:22,vars:9,consts:[["label","Categor\xedas"],[3,"categoriaGrupoSvd","onChangeSubCategoriaEv"],["label","Sub-categor\xedas"],["frmSubcategoria",""],["label","Art\xedculos"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","start start"],["fxFlex","100%"],["color","primary","selected","",3,"click"],["color","accent","selected","",3,"click",4,"ngFor","ngForOf"],["class","divSubCategorias",4,"ngFor","ngForOf"],["fxFlex","40%","fxFlex.xs","100%","fxFlex.sm","100%","fxLayout","row wrap","fxLayoutGap","8px grid","fxLayoutAlign","start start",1,"divArticulos"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],["mat-list-item","","class","accion-comanda mat-elevation-z4",3,"click",4,"ngFor","ngForOf"],["fxFlex","60%","fxFlex.xs","100%","fxFlex.sm","100%",1,"divArticulos"],[3,"categoria","subcategoria","articulo","articuloSvd"],["frmProducto",""],["color","accent","selected","",3,"click"],[1,"divSubCategorias"],["color","warn","selected","",3,"click",4,"ngFor","ngForOf"],["color","warn","selected","",3,"click"],["mat-list-item","",1,"accion-comanda","mat-elevation-z4",3,"click"]],template:function(e,t){1&e&&(P.Tb(0,"mat-tab-group"),P.Tb(1,"mat-tab",0),P.Tb(2,"app-categoria-producto",1),P.bc("categoriaGrupoSvd",function(){return t.reloadCategoriasInSubcategoriasArticulos()})("onChangeSubCategoriaEv",function(e){return t.setArticuloCategoriaGrupo(e)}),P.Sb(),P.Sb(),P.Tb(3,"mat-tab",2),P.Ob(4,"app-sub-categoria-producto",null,3),P.Sb(),P.Tb(6,"mat-tab",4),P.Tb(7,"div",5),P.Tb(8,"div",6),P.Tb(9,"mat-chip-list"),P.Tb(10,"mat-chip",7),P.bc("click",function(){return t.verTodos()}),P.Fc(11," Ver todos "),P.Sb(),P.Dc(12,ki,2,1,"mat-chip",8),P.Sb(),P.Dc(13,Ei,2,1,"mat-chip-list",9),P.Sb(),P.Tb(14,"div",10),P.Tb(15,"mat-form-field",11),P.Tb(16,"input",12),P.bc("keyup",function(){return t.applyFilter()})("ngModelChange",function(e){return t.txtFiltro=e}),P.Sb(),P.Sb(),P.Tb(17,"mat-action-list"),P.Dc(18,wi,3,4,"button",13),P.Sb(),P.Sb(),P.Tb(19,"div",14),P.Tb(20,"app-form-producto",15,16),P.bc("articuloSvd",function(e){return t.refreshArticuloList(e)}),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Sb()),2&e&&(P.Cb(12),P.lc("ngForOf",t.categorias),P.Cb(1),P.lc("ngForOf",t.listasCategoriasGrupo),P.Cb(3),P.lc("ngModel",t.txtFiltro)("ngModelOptions",P.nc(8,Ri)),P.Cb(2),P.lc("ngForOf",t.articulos),P.Cb(2),P.lc("categoria",t.categoria)("subcategoria",t.categoriaGrupo)("articulo",t.articulo))},directives:[h.b,h.a,nn,pn,hn.c,hn.b,hn.a,E.b,E.a,r.l,hn.d,g.b,f.b,l.c,l.k,l.n,d.a,xi,d.c],pipes:[En],styles:[".divArticulos[_ngcontent-%COMP%]{padding:3px 8px;overflow-y:auto;margin:0;height:85vh}.divArticulos[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]{width:200px;max-height:95px}.divSubCategorias[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px}.accion-comanda[_ngcontent-%COMP%]{background-color:#fff;margin:10px 0}"]}),Ai),Pi=["frmEgreso"],Ni=["frmIngreso"],Ui=((Bi=function(){function t(o,n,i){var a=this;e(this,t),this.ls=o,this._snackBar=n,this.transformacionSrvc=i,this.mermaDetalle=[],this.showMerma=!0,this.bloqueoBotones=!1,this.transformar=function(){a.bloqueoBotones=!0,a.egreso=a.frmEgreso.egreso,a.ingreso=a.frmIngreso.ingreso,a.transformacion={egreso:{tipo_movimiento:a.egreso.tipo_movimiento,fecha:a.egreso.fecha,proveedor:a.ingreso.proveedor,bodega:a.egreso.bodega,usuario:a.egreso.usuario,estatus_movimiento:a.egreso.estatus_movimiento,bodega_destino:a.egreso.bodega_destino,tipo_movimiento_destino:a.egreso.tipo_movimiento_destino,detalle:[]},ingreso:{tipo_movimiento:a.ingreso.tipo_movimiento,fecha:a.ingreso.fecha,proveedor:a.ingreso.proveedor,bodega:a.ingreso.bodega,usuario:a.ingreso.usuario,bodega_origen:a.ingreso.bodega_origen,comentario:a.ingreso.comentario,detalle:[]},merma:[]},a.frmEgreso.detallesMerma.forEach(function(e){return a.transformacion.merma.push({articulo:e.articulo,cantidad:e.cantidad,precio_unitario:e.precio_unitario,precio_total:e.precio_total,presentacion:e.presentacion,cantidad_utilizada:e.cantidad_utilizada})}),a.frmEgreso.detallesEgreso.forEach(function(e){return a.transformacion.egreso.detalle.push({articulo:e.articulo,cantidad:e.cantidad,precio_unitario:e.precio_unitario,precio_total:e.precio_total,presentacion:e.presentacion})}),a.frmIngreso.detallesIngreso.forEach(function(e){return a.transformacion.ingreso.detalle.push({articulo:e.articulo,cantidad:e.cantidad,precio_unitario:e.precio_unitario,precio_total:e.precio_total,presentacion:e.presentacion,cantidad_utilizada:e.cantidad_utilizada})}),a.transformacion.egreso&&a.transformacion.egreso.detalle&&a.transformacion.egreso.detalle.length>0&&a.transformacion.ingreso&&a.transformacion.ingreso.detalle&&a.transformacion.ingreso.detalle.length>0?a.transformacionSrvc.transformar(a.transformacion).subscribe(function(e){a.bloqueoBotones=!1,e.exito?(a.frmEgreso.resetEgreso(),a.frmEgreso.detallesEgreso=[],a.frmEgreso.resetDetalleMerma(),a.frmEgreso.detallesMerma=[],a.frmIngreso.resetIngreso(),a.frmIngreso.detallesIngreso=[],a._snackBar.open("Transformaci\xf3n generada con \xe9xito...","Transformaci\xf3n",{duration:5e3})):a._snackBar.open("ERROR: ".concat(e.mensaje),"Transformaci\xf3n",{duration:3e3})}):(a.bloqueoBotones=!1,a._snackBar.open("Faltan datos necesario. Favor complete los datos e intente de nuevo.","Transformaci\xf3n",{duration:3e3}))}}return o(t,[{key:"ngOnInit",value:function(){this.egreso={egreso:null,tipo_movimiento:null,bodega:null,fecha:H().format(R.b.dbDateFormat),usuario:this.ls.get(R.b.usrTokenVar).idusr||0,estatus_movimiento:1,traslado:0},this.ingreso={ingreso:null,tipo_movimiento:null,fecha:H().format(R.b.dbDateFormat),bodega:null,usuario:this.ls.get(R.b.usrTokenVar).idusr||0,comentario:null,proveedor:null}}},{key:"doSomething",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||Bi)(P.Nb(N.a),P.Nb(M.b),P.Nb(xt))},Bi.\u0275cmp=P.Hb({type:Bi,selectors:[["app-transformacion"]],viewQuery:function(e,t){var o;1&e&&(P.Kc(Pi,1),P.Kc(Ni,1)),2&e&&(P.sc(o=P.cc())&&(t.frmEgreso=o.first),P.sc(o=P.cc())&&(t.frmIngreso=o.first))},decls:15,vars:6,consts:[[1,"row"],[1,"col","m12","s12",2,"padding-bottom","5px !important"],["align","end"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[2,"font-size","18pt"],[1,"col","m6","s12"],[3,"egreso","saveToDB","egresoChange","egresoSavedEv"],["frmEgreso",""],[3,"bodega","ingreso","saveToDB","ingresoChange","ingresoSavedEv"],["frmIngreso",""]],template:function(e,t){1&e&&(P.Tb(0,"div",0),P.Tb(1,"div",1),P.Tb(2,"div",2),P.Tb(3,"button",3),P.bc("click",function(){return t.transformar()}),P.Tb(4,"mat-icon",4),P.Fc(5,"transform"),P.Sb(),P.Fc(6,"\xa0Transformar "),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Tb(7,"div",0),P.Tb(8,"div",5),P.Tb(9,"app-form-egreso",6,7),P.bc("egresoChange",function(e){return t.egreso=e})("egresoSavedEv",function(){return t.doSomething()}),P.Sb(),P.Sb(),P.Tb(11,"div",5),P.Tb(12,"app-form-ingreso",8,9),P.bc("ingresoChange",function(e){return t.ingreso=e})("ingresoSavedEv",function(){return t.doSomething()}),P.Sb(),P.Sb(),P.Sb(),P.Ob(14,"div",0)),2&e&&(P.Cb(3),P.lc("disabled",t.bloqueoBotones),P.Cb(6),P.lc("egreso",t.egreso)("saveToDB",!1),P.Cb(3),P.lc("bodega",!1)("ingreso",t.ingreso)("saveToDB",!1))},directives:[T.a,b.a,Ko,gt],styles:[""]}),Bi),Gi=i("2qVp"),zi=i("NU9O");function qi(e,t){if(1&e&&(P.Tb(0,"mat-option",13),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.sede.sede),P.Cb(1),P.Hc(" ",o.sede.nombre," ")}}function ji(e,t){if(1&e&&(P.Tb(0,"mat-option",13),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.bodega),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function $i(e,t){1&e&&P.Ob(0,"app-cargando")}var Wi,Li=function(){return{standalone:!0}},Vi=((Wi=function(){function t(o,n,i,a){var r=this;e(this,t),this.snackBar=o,this.pdfServicio=n,this.sedeSrvc=i,this.bodegaSrvc=a,this.bodegas=[],this.sedes=[],this.params={},this.titulo="Existencias",this.cargando=!1,this.configBotones={showPdf:!0,showHtml:!1,showExcel:!0},this.endSubs=new Yo.a,this.getSede=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.endSubs.add(r.sedeSrvc.getSedes(e).subscribe(function(e){r.sedes=e}))},this.getBodega=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.endSubs.add(r.bodegaSrvc.get(e).subscribe(function(e){r.bodegas=e}))},this.onSedesSelected=function(e){r.getBodega({sede:r.params.sede})},this.resetParams=function(){r.params={fecha:H().format(R.b.dbDateFormat)},r.cargando=!1}}return o(t,[{key:"ngOnInit",value:function(){this.params.fecha=H().format(R.b.dbDateFormat),this.getSede()}},{key:"ngOnDestroy",value:function(){this.endSubs.unsubscribe()}},{key:"onSubmit",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.params.sede&&this.params.bodega&&this.params.sede.length>0&&this.params.bodega.length>0&&this.params.fecha&&H(this.params.fecha).isValid()?(this.params._excel=t,this.cargando=!0,this.endSubs.add(this.pdfServicio.getReporteExistencia(this.params).subscribe(function(o){if(e.cargando=!1,o){var n=new Blob([o],{type:0==+t?"application/pdf":"application/vnd.ms-excel"});Object(vn.saveAs)(n,"".concat(e.titulo,"_").concat(H().format(R.b.dateTimeFormatRptName),".").concat(0==+t?"pdf":"xls"))}else e.snackBar.open("No se pudo generar el reporte...",e.titulo,{duration:3e3})}))):this.snackBar.open("Por favor ingrese todos los par\xe1metros.","Existencias",{duration:7e3})}}]),t}()).\u0275fac=function(e){return new(e||Wi)(P.Nb(M.b),P.Nb(On.a),P.Nb(Gi.a),P.Nb(Y.a))},Wi.\u0275cmp=P.Hb({type:Wi,selectors:[["app-existencias"]],decls:24,vars:9,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmRptExistencias","ngForm"],[1,"fullWidth"],["name","sede","multiple","","required","",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["name","bodega","multiple","","required","",3,"ngModel","ngModelChange"],["matInput","","type","date","placeholder","Al","required","",3,"ngModel","ngModelOptions","ngModelChange"],["align","end"],[3,"configuracion","excelClick","pdfClick","resetParamsClick"],[4,"ngIf"],[3,"value"]],template:function(e,t){1&e&&(P.Tb(0,"div",0),P.Tb(1,"div",1),P.Tb(2,"mat-card",2),P.Tb(3,"mat-card-title"),P.Tb(4,"h4"),P.Fc(5,"Reporte de existencias"),P.Sb(),P.Sb(),P.Tb(6,"mat-card-content"),P.Tb(7,"form",3,4),P.Tb(9,"mat-form-field",5),P.Tb(10,"mat-label"),P.Fc(11,"Sede"),P.Sb(),P.Tb(12,"mat-select",6),P.bc("ngModelChange",function(e){return t.params.sede=e})("selectionChange",function(e){return t.onSedesSelected(e)}),P.Dc(13,qi,2,2,"mat-option",7),P.Sb(),P.Sb(),P.Tb(14,"mat-form-field",5),P.Tb(15,"mat-label"),P.Fc(16,"Bodega"),P.Sb(),P.Tb(17,"mat-select",8),P.bc("ngModelChange",function(e){return t.params.bodega=e}),P.Dc(18,ji,2,2,"mat-option",7),P.Sb(),P.Sb(),P.Tb(19,"mat-form-field",5),P.Tb(20,"input",9),P.bc("ngModelChange",function(e){return t.params.fecha=e}),P.Sb(),P.Sb(),P.Tb(21,"div",10),P.Tb(22,"app-rpt-botones",11),P.bc("excelClick",function(){return t.onSubmit(1)})("pdfClick",function(){return t.onSubmit()})("resetParamsClick",function(){return t.resetParams()}),P.Sb(),P.Sb(),P.Sb(),P.Dc(23,$i,1,0,"app-cargando",12),P.Sb(),P.Sb(),P.Sb(),P.Sb()),2&e&&(P.Cb(12),P.lc("ngModel",t.params.sede),P.Cb(1),P.lc("ngForOf",t.sedes),P.Cb(4),P.lc("ngModel",t.params.bodega),P.Cb(1),P.lc("ngForOf",t.bodegas),P.Cb(2),P.lc("ngModel",t.params.fecha)("ngModelOptions",P.nc(8,Li)),P.Cb(2),P.lc("configuracion",t.configBotones),P.Cb(1),P.lc("ngIf",t.cargando))},directives:[m.a,m.h,m.c,l.r,l.l,l.m,g.b,g.f,S.a,l.p,l.k,l.n,r.l,f.b,l.c,zi.a,r.m,$.m,Cn.a],styles:[""]}),Wi);function Ki(e,t){if(1&e&&(P.Tb(0,"mat-option",16),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function Qi(e,t){if(1&e&&(P.Tb(0,"mat-option",16),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.sede.sede),P.Cb(1),P.Hc(" ",o.sede.nombre," ")}}function Ji(e,t){if(1&e&&(P.Tb(0,"mat-option",16),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.bodega),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function Xi(e,t){1&e&&P.Ob(0,"app-cargando")}var Yi,Zi,ea=function(){return{standalone:!0}},ta=((Yi=function(){function t(o,n,i,a,r){var c=this;e(this,t),this.snackBar=o,this.pdfServicio=n,this.sedeSrvc=i,this.bodegaSrvc=a,this.articuloSrvc=r,this.bodegas=[],this.sedes=[],this.articulos=[],this.filteredArticulos=[],this.txtArticuloSelected=void 0,this.params={},this.titulo="Kardex",this.cargando=!1,this.configBotones={showPdf:!0,showHtml:!1,showExcel:!0},this.getDescripcionArticulo=function(e){return c.articulos.find(function(t){return+t.articulo==+e}).descripcion||""},this.filtrarArticulos=function(e){if(e&&"string"==typeof e){var t=e.toLowerCase();c.filteredArticulos=c.articulos.filter(function(e){return e.descripcion.toLowerCase().includes(t)})}else c.filteredArticulos=c.articulos},this.displayArticulo=function(e){if(e)return c.params.articulo=e.articulo,e.descripcion},this.getSede=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c.sedeSrvc.getSedes(e).subscribe(function(e){c.sedes=e})},this.getArticulo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c.articuloSrvc.getArticulosIngreso(e).subscribe(function(e){c.articulos=e})},this.getBodega=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c.bodegaSrvc.get(e).subscribe(function(e){c.bodegas=e})},this.excelClick=function(){c.params._excel=1,c.cargando=!0,c.pdfServicio.getReporteKardex(c.params).subscribe(function(e){if(c.cargando=!1,e){var t=new Blob([e],{type:"application/vnd.ms-excel"});Object(vn.saveAs)(t,"".concat(c.titulo,"_").concat(H().format(R.b.dateTimeFormatRptName),".xls"))}else c.snackBar.open("No se pudo generar el reporte...",c.titulo,{duration:3e3})})},this.onSedesSelected=function(e){c.getBodega({sede:c.params.sede})},this.resetParams=function(){c.params={},c.cargando=!1}}return o(t,[{key:"ngOnInit",value:function(){this.getSede(),this.getArticulo(),this.txtArticuloSelected=void 0,this.params.fdel=H().format(R.b.dbDateFormat),this.params.fal=H().format(R.b.dbDateFormat)}},{key:"onSubmit",value:function(){var e=this;this.params._excel=0,this.pdfServicio.getReporteKardex(this.params).subscribe(function(t){if(t){var o=new Blob([t],{type:"application/pdf"});Object(vn.saveAs)(o,"".concat(e.titulo,"_").concat(H().format(R.b.dateTimeFormatRptName),".pdf"))}else e.snackBar.open("No se pudo generar el reporte...",e.titulo,{duration:3e3})})}}]),t}()).\u0275fac=function(e){return new(e||Yi)(P.Nb(M.b),P.Nb(On.a),P.Nb(Gi.a),P.Nb(Y.a),P.Nb(Z.a))},Yi.\u0275cmp=P.Hb({type:Yi,selectors:[["app-kardex"]],decls:32,vars:18,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],[1,"fullWidth"],["type","text","placeholder","Art\xedculo","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith"],["autoArticulos","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["name","sede","multiple","",3,"ngModel","ngModelChange","selectionChange"],["name","bodega","multiple","",3,"ngModel","ngModelChange"],["matInput","","type","date","placeholder","Del","required","",3,"ngModel","ngModelOptions","ngModelChange"],["matInput","","type","date","placeholder","Al","required","",3,"ngModel","ngModelOptions","ngModelChange"],["align","end"],[3,"configuracion","excelClick","pdfClick","resetParamsClick"],[4,"ngIf"],[3,"value"]],template:function(e,t){if(1&e&&(P.Tb(0,"div",0),P.Tb(1,"div",1),P.Tb(2,"mat-card",2),P.Tb(3,"mat-card-title"),P.Tb(4,"h4"),P.Fc(5,"Kardex"),P.Sb(),P.Sb(),P.Tb(6,"mat-card-content"),P.Tb(7,"form",3),P.Tb(8,"mat-form-field",4),P.Tb(9,"mat-label"),P.Fc(10,"Art\xedculo"),P.Sb(),P.Tb(11,"input",5),P.bc("ngModelChange",function(e){return t.txtArticuloSelected=e})("keyup",function(){return t.filtrarArticulos(t.txtArticuloSelected)}),P.Sb(),P.Tb(12,"mat-autocomplete",6,7),P.Dc(14,Ki,2,2,"mat-option",8),P.Sb(),P.Sb(),P.Tb(15,"mat-form-field",4),P.Tb(16,"mat-label"),P.Fc(17,"Sede"),P.Sb(),P.Tb(18,"mat-select",9),P.bc("ngModelChange",function(e){return t.params.sede=e})("selectionChange",function(e){return t.onSedesSelected(e)}),P.Dc(19,Qi,2,2,"mat-option",8),P.Sb(),P.Sb(),P.Tb(20,"mat-form-field",4),P.Tb(21,"mat-label"),P.Fc(22,"Bodega"),P.Sb(),P.Tb(23,"mat-select",10),P.bc("ngModelChange",function(e){return t.params.bodega=e}),P.Dc(24,Ji,2,2,"mat-option",8),P.Sb(),P.Sb(),P.Tb(25,"mat-form-field",4),P.Tb(26,"input",11),P.bc("ngModelChange",function(e){return t.params.fdel=e}),P.Sb(),P.Sb(),P.Tb(27,"mat-form-field",4),P.Tb(28,"input",12),P.bc("ngModelChange",function(e){return t.params.fal=e}),P.Sb(),P.Sb(),P.Tb(29,"div",13),P.Tb(30,"app-rpt-botones",14),P.bc("excelClick",function(){return t.excelClick()})("pdfClick",function(){return t.onSubmit()})("resetParamsClick",function(){return t.resetParams()}),P.Sb(),P.Sb(),P.Sb(),P.Dc(31,Xi,1,0,"app-cargando",15),P.Sb(),P.Sb(),P.Sb(),P.Sb()),2&e){var o=P.tc(13);P.Cb(11),P.lc("ngModel",t.txtArticuloSelected)("ngModelOptions",P.nc(15,ea))("matAutocomplete",o),P.Cb(1),P.lc("displayWith",t.displayArticulo),P.Cb(2),P.lc("ngForOf",t.filteredArticulos),P.Cb(4),P.lc("ngModel",t.params.sede),P.Cb(1),P.lc("ngForOf",t.sedes),P.Cb(4),P.lc("ngModel",t.params.bodega),P.Cb(1),P.lc("ngForOf",t.bodegas),P.Cb(2),P.lc("ngModel",t.params.fdel)("ngModelOptions",P.nc(16,ea)),P.Cb(2),P.lc("ngModel",t.params.fal)("ngModelOptions",P.nc(17,ea)),P.Cb(2),P.lc("configuracion",t.configBotones),P.Cb(1),P.lc("ngIf",t.cargando)}},directives:[m.a,m.h,m.c,l.r,l.l,l.m,g.b,g.f,f.b,l.c,O.c,l.p,l.k,l.n,O.a,r.l,S.a,zi.a,r.m,$.m,Cn.a],styles:[""]}),Yi),oa=["frmIngreso"],na=((Zi=function(){function t(o,n,i){var a=this;e(this,t),this.ls=o,this.snackBar=n,this.transformacionSrvc=i,this.bloqueoBotones=!1,this.transformar=function(){a.bloqueoBotones=!0,a.ingreso=a.frmIngreso.ingreso,a.produccion={tipo_movimiento:a.ingreso.tipo_movimiento,fecha:a.ingreso.fecha,proveedor:a.ingreso.proveedor,bodega:a.ingreso.bodega,usuario:a.ingreso.usuario,bodega_origen:a.ingreso.bodega_origen,comentario:a.ingreso.comentario,detalle:[]},a.frmIngreso.detallesIngreso.forEach(function(e){return a.produccion.detalle.push({articulo:e.articulo,cantidad:e.cantidad,precio_unitario:e.precio_unitario,precio_total:e.precio_total,presentacion:e.presentacion})}),a.produccion&&a.produccion.detalle&&a.produccion.detalle.length>0?a.transformacionSrvc.producir(a.produccion).subscribe(function(e){a.bloqueoBotones=!1,e.exito?(a.frmIngreso.resetIngreso(),a.frmIngreso.detallesIngreso=[],a.snackBar.open("Producto generado con \xe9xito...","Producci\xf3n",{duration:5e3})):a.snackBar.open("ERROR: ".concat(e.mensaje),"Producci\xf3n",{duration:3e3})}):(a.bloqueoBotones=!1,a.snackBar.open("Faltan datos necesario. Favor complete los datos e intente de nuevo.","Transformaci\xf3n",{duration:3e3}))},this.doSomething=function(){}}return o(t,[{key:"ngOnInit",value:function(){this.ingreso={ingreso:null,tipo_movimiento:null,fecha:H().format(R.b.dbDateFormat),bodega:null,usuario:this.ls.get(R.b.usrTokenVar).idusr||0,comentario:null,proveedor:null}}}]),t}()).\u0275fac=function(e){return new(e||Zi)(P.Nb(N.a),P.Nb(M.b),P.Nb(xt))},Zi.\u0275cmp=P.Hb({type:Zi,selectors:[["app-produccion"]],viewQuery:function(e,t){var o;1&e&&P.Kc(oa,1),2&e&&P.sc(o=P.cc())&&(t.frmIngreso=o.first)},decls:11,vars:4,consts:[[1,"row"],[1,"col","m12","s12",2,"padding-bottom","5px !important"],["align","end"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[2,"font-size","18pt"],[1,"col","m12","s12"],[3,"produccion","ingreso","saveToDB","ingresoChange","ingresoSavedEv"],["frmIngreso",""]],template:function(e,t){1&e&&(P.Tb(0,"div",0),P.Tb(1,"div",1),P.Tb(2,"div",2),P.Tb(3,"button",3),P.bc("click",function(){return t.transformar()}),P.Tb(4,"mat-icon",4),P.Fc(5,"transform"),P.Sb(),P.Fc(6,"\xa0Producir "),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Tb(7,"div",0),P.Tb(8,"div",5),P.Tb(9,"app-form-ingreso",6,7),P.bc("ingresoChange",function(e){return t.ingreso=e})("ingresoSavedEv",function(){return t.doSomething()}),P.Sb(),P.Sb(),P.Sb()),2&e&&(P.Cb(3),P.lc("disabled",t.bloqueoBotones),P.Cb(6),P.lc("produccion",!0)("ingreso",t.ingreso)("saveToDB",!1))},directives:[T.a,b.a,gt],styles:[""]}),Zi);function ia(e,t){if(1&e&&(P.Tb(0,"mat-option",13),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.sede.sede),P.Cb(1),P.Hc(" ",o.sede.nombre," ")}}function aa(e,t){if(1&e&&(P.Tb(0,"mat-option",13),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.bodega),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function ra(e,t){1&e&&P.Ob(0,"app-cargando")}var ca,la,sa=function(){return{standalone:!0}},ua=((la=function(){function t(o,n,i,a){var r=this;e(this,t),this.snackBar=o,this.pdfServicio=n,this.sedeSrvc=i,this.bodegaSrvc=a,this.bodegas=[],this.sedes=[],this.params={},this.titulo="Valorizado",this.cargando=!1,this.configBotones={showPdf:!0,showHtml:!1,showExcel:!0},this.endSubs=new Yo.a,this.getSede=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.endSubs.add(r.sedeSrvc.getSedes(e).subscribe(function(e){r.sedes=e}))},this.getBodega=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.endSubs.add(r.bodegaSrvc.get(e).subscribe(function(e){r.bodegas=e}))},this.onSedesSelected=function(e){r.getBodega({sede:r.params.sede})},this.resetParams=function(){r.params={fecha:H().format(R.b.dbDateFormat)},r.cargando=!1}}return o(t,[{key:"ngOnInit",value:function(){this.params.fecha=H().format(R.b.dbDateFormat),this.getSede(),this.getBodega()}},{key:"ngOnDestroy",value:function(){this.endSubs.unsubscribe()}},{key:"onSubmit",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.params.sede&&this.params.bodega&&this.params.sede.length>0&&this.params.bodega.length>0&&this.params.fecha&&H(this.params.fecha).isValid()?(this.params._excel=t,this.cargando=!0,this.endSubs.add(this.pdfServicio.getReporteValorizado(this.params).subscribe(function(o){if(e.cargando=!1,o){var n=new Blob([o],{type:0==+t?"application/pdf":"application/vnd.ms-excel"});Object(vn.saveAs)(n,"".concat(e.titulo,"_").concat(H().format(R.b.dateTimeFormatRptName),".").concat(0==+t?"pdf":"xls"))}else e.snackBar.open("No se pudo generar el reporte...",e.titulo,{duration:3e3})}))):this.snackBar.open("Por favor ingrese todos los par\xe1metros.","Inventario Valorizado",{duration:7e3})}}]),t}()).\u0275fac=function(e){return new(e||la)(P.Nb(M.b),P.Nb(On.a),P.Nb(Gi.a),P.Nb(Y.a))},la.\u0275cmp=P.Hb({type:la,selectors:[["app-valorizado"]],decls:24,vars:9,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmRptValorizado","ngForm"],[1,"fullWidth"],["name","sede","multiple","","required","",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["name","bodega","multiple","","required","",3,"ngModel","ngModelChange"],["matInput","","type","date","placeholder","Al","required","",3,"ngModel","ngModelOptions","ngModelChange"],["align","end"],[3,"configuracion","excelClick","pdfClick","resetParamsClick"],[4,"ngIf"],[3,"value"]],template:function(e,t){1&e&&(P.Tb(0,"div",0),P.Tb(1,"div",1),P.Tb(2,"mat-card",2),P.Tb(3,"mat-card-title"),P.Tb(4,"h4"),P.Fc(5,"Inventario Valorizado"),P.Sb(),P.Sb(),P.Tb(6,"mat-card-content"),P.Tb(7,"form",3,4),P.Tb(9,"mat-form-field",5),P.Tb(10,"mat-label"),P.Fc(11,"Sede"),P.Sb(),P.Tb(12,"mat-select",6),P.bc("ngModelChange",function(e){return t.params.sede=e})("selectionChange",function(e){return t.onSedesSelected(e)}),P.Dc(13,ia,2,2,"mat-option",7),P.Sb(),P.Sb(),P.Tb(14,"mat-form-field",5),P.Tb(15,"mat-label"),P.Fc(16,"Bodega"),P.Sb(),P.Tb(17,"mat-select",8),P.bc("ngModelChange",function(e){return t.params.bodega=e}),P.Dc(18,aa,2,2,"mat-option",7),P.Sb(),P.Sb(),P.Tb(19,"mat-form-field",5),P.Tb(20,"input",9),P.bc("ngModelChange",function(e){return t.params.fecha=e}),P.Sb(),P.Sb(),P.Tb(21,"div",10),P.Tb(22,"app-rpt-botones",11),P.bc("excelClick",function(){return t.onSubmit(1)})("pdfClick",function(){return t.onSubmit()})("resetParamsClick",function(){return t.resetParams()}),P.Sb(),P.Sb(),P.Sb(),P.Dc(23,ra,1,0,"app-cargando",12),P.Sb(),P.Sb(),P.Sb(),P.Sb()),2&e&&(P.Cb(12),P.lc("ngModel",t.params.sede),P.Cb(1),P.lc("ngForOf",t.sedes),P.Cb(4),P.lc("ngModel",t.params.bodega),P.Cb(1),P.lc("ngForOf",t.bodegas),P.Cb(2),P.lc("ngModel",t.params.fecha)("ngModelOptions",P.nc(8,sa)),P.Cb(2),P.lc("configuracion",t.configBotones),P.Cb(1),P.lc("ngIf",t.cargando))},directives:[m.a,m.h,m.c,l.r,l.l,l.m,g.b,g.f,S.a,l.p,l.k,l.n,r.l,f.b,l.c,zi.a,r.m,$.m,Cn.a],styles:[""]}),la),da=((ca=function(){function t(o){e(this,t),this.http=o,this.fisicoUrl="fisico",this.srvcErrHndl=new U.a}return o(t,[{key:"generarInventarioFisico",value:function(e){return this.http.post("".concat(R.b.urlWms,"/").concat(this.fisicoUrl,"/generar"),e).pipe(Object(G.a)(R.b.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"confirmar",value:function(e){return this.http.post("".concat(R.b.urlWms,"/").concat(this.fisicoUrl,"/confirmar/").concat(+e.inventario_fisico>0?"/"+e.inventario_fisico:""),{}).pipe(Object(G.a)(R.b.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"getDetalle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.http.get("".concat(R.b.urlWms,"/").concat(this.fisicoUrl,"/buscar_detalle/").concat(e,"?").concat(q.stringify(t))).pipe(Object(G.a)(R.b.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}},{key:"saveDetalle",value:function(e){return this.http.post("".concat(R.b.urlWms,"/").concat(this.fisicoUrl,"/actualizar/"),e).pipe(Object(G.a)(R.b.reintentos),Object(z.a)(this.srvcErrHndl.errorHandler))}}]),t}()).\u0275fac=function(e){return new(e||ca)(P.Xb(c.b))},ca.\u0275prov=P.Jb({token:ca,factory:ca.\u0275fac,providedIn:"root"}),ca);function ba(e,t){1&e&&(P.Tb(0,"mat-icon",8),P.Fc(1,"expand_more"),P.Sb())}function ga(e,t){1&e&&(P.Tb(0,"mat-icon",8),P.Fc(1,"expand_less"),P.Sb())}function fa(e,t){if(1&e&&(P.Tb(0,"mat-option",21),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.bodega),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function ma(e,t){if(1&e&&(P.Tb(0,"mat-option",21),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.sede),P.Cb(1),P.Hc(" ",o.nombre," ")}}function pa(e,t){if(1&e&&(P.Tb(0,"mat-option",21),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function ha(e,t){if(1&e&&(P.Tb(0,"mat-option",21),P.Fc(1),P.Sb()),2&e){var o=t.$implicit;P.lc("value",o.categoria_grupo),P.Cb(1),P.Hc(" ",o.descripcion," ")}}function va(e,t){1&e&&P.Ob(0,"app-cargando")}var Sa=function(){return{standalone:!0}};function Ca(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-card-content"),P.Tb(1,"form",9,10),P.bc("ngSubmit",function(){P.xc(o);var e=P.tc(2),t=P.fc();return e.form.valid&&t.onSubmit()}),P.Tb(3,"mat-form-field",11),P.Tb(4,"mat-label"),P.Fc(5,"Bodega"),P.Sb(),P.Tb(6,"mat-select",12),P.bc("ngModelChange",function(e){return P.xc(o),P.fc().params.bodega=e}),P.Dc(7,fa,2,2,"mat-option",13),P.Sb(),P.Sb(),P.Tb(8,"mat-form-field",11),P.Tb(9,"mat-label"),P.Fc(10,"Sede"),P.Sb(),P.Tb(11,"mat-select",14),P.bc("ngModelChange",function(e){return P.xc(o),P.fc().params.sede=e}),P.Dc(12,ma,2,2,"mat-option",13),P.Sb(),P.Sb(),P.Tb(13,"mat-form-field",11),P.Tb(14,"mat-label"),P.Fc(15,"Categor\xeda"),P.Sb(),P.Tb(16,"mat-select",15),P.bc("selectionChange",function(e){return P.xc(o),P.fc().onCategoriaSelected(e)}),P.Dc(17,pa,2,2,"mat-option",13),P.Sb(),P.Sb(),P.Tb(18,"mat-form-field",11),P.Tb(19,"mat-label"),P.Fc(20,"Sub-categor\xeda"),P.Sb(),P.Tb(21,"mat-select",16),P.bc("ngModelChange",function(e){return P.xc(o),P.fc().params.categoria_grupo_grupo=e}),P.Dc(22,ha,2,2,"mat-option",13),P.Sb(),P.Sb(),P.Tb(23,"mat-form-field",11),P.Tb(24,"input",17),P.bc("ngModelChange",function(e){return P.xc(o),P.fc().params.fecha=e}),P.Sb(),P.Sb(),P.Tb(25,"mat-checkbox",18),P.bc("ngModelChange",function(e){return P.xc(o),+(P.fc().params._excel=e)}),P.Fc(26,"Generar en Excel "),P.Sb(),P.Tb(27,"div",19),P.Tb(28,"button",20),P.Fc(29,"GENERAR"),P.Sb(),P.Sb(),P.Sb(),P.Dc(30,va,1,0,"app-cargando",7),P.Sb()}if(2&e){var n=P.tc(2),i=P.fc();P.Cb(6),P.lc("ngModel",i.params.bodega),P.Cb(1),P.lc("ngForOf",i.bodegas),P.Cb(4),P.lc("ngModel",i.params.sede),P.Cb(1),P.lc("ngForOf",i.sedes),P.Cb(5),P.lc("ngForOf",i.categorias),P.Cb(4),P.lc("ngModel",i.params.categoria_grupo_grupo),P.Cb(1),P.lc("ngForOf",i.categoriasGruposPadre),P.Cb(2),P.lc("ngModel",i.params.fecha)("ngModelOptions",P.nc(12,Sa)),P.Cb(1),P.lc("ngModel",+i.params._excel),P.Cb(3),P.lc("disabled",!n.form.valid),P.Cb(2),P.lc("ngIf",i.cargando)}}var Ta,Ma=((Ta=function(){function t(o,n,i,a,r,c,l){var s=this;e(this,t),this.snackBar=o,this.pdfServicio=n,this.sedeSrvc=i,this.bodegaSrvc=a,this.articuloSrvc=r,this.fisicoSrvc=c,this.ls=l,this.bodegas=[],this.sedes=[],this.params={},this.categorias=[],this.categoriasGruposPadre=[],this.categoriasGrupos=[],this.titulo="Fisico",this.cargando=!1,this.showReporte=!0,this.getSede=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s.sedeSrvc.get(e).subscribe(function(e){s.sedes=e})},this.getBodega=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s.bodegaSrvc.get(e).subscribe(function(e){s.bodegas=e})},this.loadCategorias=function(){s.articuloSrvc.getCategorias({sede:+s.ls.get(R.b.usrTokenVar).sede||0}).subscribe(function(e){e&&(s.categorias=e)})},this.onCategoriaSelected=function(e){return s.loadSubCategorias(+e.value.categoria)},this.loadSubCategorias=function(e){s.articuloSrvc.getCategoriasGrupos({categoria:+e}).subscribe(function(e){e&&(s.categoriasGruposPadre=s.articuloSrvc.adaptCategoriaGrupoResponse(e),s.categoriasGrupos=s.categoriasGruposPadre)})},this.onSubCategoriaPadreSelected=function(e){return s.loadSubCategoriasSubcategorias(+e.value)},this.loadSubCategoriasSubcategorias=function(e){s.articuloSrvc.getCategoriasGrupos({categoria_grupo_grupo:e}).subscribe(function(e){e&&(s.categoriasGrupos=s.articuloSrvc.adaptCategoriaGrupoResponse(e))})}}return o(t,[{key:"ngOnInit",value:function(){this.getSede(),this.getBodega(),this.loadCategorias(),this.params.fecha=H().format(R.b.dbDateFormat)}},{key:"onSubmit",value:function(){var e=this;this.cargando=!0,this.fisicoSrvc.generarInventarioFisico(this.params).subscribe(function(t){e.cargando=!1,console.log(t),t.exito?e.pdfServicio.imprimirInventarioFisico(t.inventario,e.params).subscribe(function(t){if(e.params._excel){var o=new Blob([t],{type:"application/vnd.ms-excel"});Object(vn.saveAs)(o,"".concat(e.titulo,".xls"))}else{var n=new Blob([t],{type:"application/pdf"});Object(vn.saveAs)(n,"".concat(e.titulo,".pdf"))}}):e.snackBar.open("No se pudo generar el reporte... "+t.mensaje,e.titulo,{duration:3e3})})}}]),t}()).\u0275fac=function(e){return new(e||Ta)(P.Nb(M.b),P.Nb(On.a),P.Nb(Sn.a),P.Nb(Y.a),P.Nb(Z.a),P.Nb(da),P.Nb(N.a))},Ta.\u0275cmp=P.Hb({type:Ta,selectors:[["app-reporte"]],decls:13,vars:3,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],[1,"col"],[1,"col",2,"float","right"],["mat-button","","type","button","color","accent",3,"click"],["class","iconFontSize",4,"ngIf"],[4,"ngIf"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmFisicoReporte","ngForm"],[1,"fullWidth"],["name","bodega","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","sede","required","",3,"ngModel","ngModelChange"],["name","categoria",3,"selectionChange"],["name","categoriaGrupoPadre",3,"ngModel","ngModelChange"],["matInput","","type","date","placeholder","Fecha","readonly","","required","",3,"ngModel","ngModelOptions","ngModelChange"],["name","excel",1,"fullWidth",3,"ngModel","ngModelChange"],["align","end"],["mat-button","","color","accent","type","submit",3,"disabled"],[3,"value"]],template:function(e,t){1&e&&(P.Tb(0,"div",0),P.Tb(1,"div",1),P.Tb(2,"mat-card",2),P.Tb(3,"mat-card-title"),P.Tb(4,"div",0),P.Tb(5,"div",3),P.Tb(6,"h4"),P.Fc(7,"Inventario F\xedsico"),P.Sb(),P.Sb(),P.Tb(8,"div",4),P.Tb(9,"button",5),P.bc("click",function(){return t.showReporte=!t.showReporte}),P.Dc(10,ba,2,0,"mat-icon",6),P.Dc(11,ga,2,0,"mat-icon",6),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Dc(12,Ca,31,13,"mat-card-content",7),P.Sb(),P.Sb(),P.Sb()),2&e&&(P.Cb(10),P.lc("ngIf",t.showReporte),P.Cb(1),P.lc("ngIf",!t.showReporte),P.Cb(1),P.lc("ngIf",t.showReporte))},directives:[m.a,m.h,T.a,r.m,b.a,m.c,l.r,l.l,l.m,g.b,g.f,S.a,l.p,l.k,l.n,r.l,f.b,l.c,C.a,$.m,Cn.a],styles:[""]}),Ta);function Da(e,t){1&e&&(P.Tb(0,"mat-icon",9),P.Fc(1,"expand_more"),P.Sb())}function Ia(e,t){1&e&&(P.Tb(0,"mat-icon",9),P.Fc(1,"expand_less"),P.Sb())}function Fa(e,t){1&e&&P.Ob(0,"app-cargando")}function xa(e,t){if(1&e){var o=P.Ub();P.Tb(0,"mat-card-content"),P.Tb(1,"form",10),P.bc("ngSubmit",function(){return P.xc(o),P.fc().buscar()}),P.Tb(2,"mat-form-field",11),P.Tb(3,"input",12),P.bc("ngModelChange",function(e){return P.xc(o),P.fc().params.numero=e}),P.Sb(),P.Tb(4,"button",13),P.Fc(5,"Buscar"),P.Sb(),P.Sb(),P.Sb(),P.Dc(6,Fa,1,0,"app-cargando",7),P.Sb()}if(2&e){var n=P.fc();P.Cb(3),P.lc("ngModel",n.params.numero),P.Cb(3),P.lc("ngIf",n.cargando)}}var _a=function(){return{standalone:!0}};function ya(e,t){if(1&e&&(P.Tb(0,"tr"),P.Tb(1,"td",24),P.Fc(2),P.Sb(),P.Tb(3,"td",24),P.Tb(4,"mat-form-field"),P.Tb(5,"input",25),P.bc("ngModelChange",function(e){return t.$implicit.existencia_sistema=e}),P.Sb(),P.Sb(),P.Sb(),P.Tb(6,"td",24),P.Tb(7,"mat-form-field",11),P.Tb(8,"input",26),P.bc("ngModelChange",function(e){return t.$implicit.existencia_fisica=e}),P.Sb(),P.Sb(),P.Sb(),P.Sb()),2&e){var o=t.$implicit;P.Cb(2),P.Hc(" ",o.narticulo," "),P.Cb(3),P.lc("ngModel",o.existencia_sistema)("ngModelOptions",P.nc(5,_a)),P.Cb(3),P.lc("ngModel",o.existencia_fisica)("ngModelOptions",P.nc(6,_a))}}function ka(e,t){if(1&e&&(P.Rb(0),P.Tb(1,"tr"),P.Tb(2,"th",23),P.Fc(3),P.Sb(),P.Sb(),P.Dc(4,ya,9,7,"tr",17),P.Qb()),2&e){var o=t.$implicit;P.Cb(3),P.Gc(o.descripcion),P.Cb(1),P.lc("ngForOf",o.datos)}}function Oa(e,t){if(1&e&&(P.Rb(0),P.Tb(1,"tr"),P.Tb(2,"th",22),P.Tb(3,"mat-label"),P.Fc(4),P.Sb(),P.Sb(),P.Sb(),P.Dc(5,ka,5,2,"ng-container",17),P.Qb()),2&e){var o=t.$implicit;P.Cb(4),P.Gc(o.descripcion),P.Cb(1),P.lc("ngForOf",o.datos)}}function Ea(e,t){1&e&&(P.Tb(0,"button",27),P.Fc(1,"Guardar"),P.Sb())}function wa(e,t){if(1&e){var o=P.Ub();P.Tb(0,"button",20),P.bc("click",function(){return P.xc(o),P.fc(2).confirmar()}),P.Fc(1,"Confirmar"),P.Sb()}}function Aa(e,t){1&e&&P.Ob(0,"app-cargando")}function Ba(e,t){if(1&e){var o=P.Ub();P.Tb(0,"div",0),P.Tb(1,"div",1),P.Tb(2,"mat-card",2),P.Ob(3,"mat-card-title"),P.Tb(4,"mat-card-content"),P.Tb(5,"form",14,15),P.bc("ngSubmit",function(){P.xc(o);var e=P.tc(6),t=P.fc();return e.form.valid&&t.actualizar()}),P.Tb(7,"table",16),P.Dc(8,Oa,6,2,"ng-container",17),P.Sb(),P.Tb(9,"div",18),P.Dc(10,Ea,2,0,"button",19),P.Tb(11,"button",20),P.bc("click",function(){return P.xc(o),P.fc().imprimir()}),P.Fc(12,"PDF"),P.Sb(),P.Tb(13,"button",20),P.bc("click",function(){return P.xc(o),P.fc().imprimirXls()}),P.Fc(14,"Excel"),P.Sb(),P.Dc(15,wa,2,0,"button",21),P.Sb(),P.Sb(),P.Dc(16,Aa,1,0,"app-cargando",7),P.Sb(),P.Sb(),P.Sb(),P.Sb()}if(2&e){var n=P.fc();P.Cb(8),P.lc("ngForOf",n.articulos),P.Cb(2),P.lc("ngIf",0==n.inventario.confirmado),P.Cb(5),P.lc("ngIf",0==n.inventario.confirmado),P.Cb(1),P.lc("ngIf",n.cargando)}}var Ra,Ha,Pa,Na,Ua=((Ra=function(){function t(o,n,i,a){var r=this;e(this,t),this.snackBar=o,this.pdfServicio=n,this.fisicoSrvc=i,this.dialog=a,this.showForm=!0,this.params={},this.cargando=!1,this.articulos=[],this.inventario={},this.titulo="Inventario_Fisico",this.resetDatos=function(){r.articulos=[],r.inventario={inventario_fisico:0,sede:null,usuario:null,categoria_grupo:null,fhcreacion:null,fecha:null,notas:null,confirmado:0}},this.buscar=function(){(""+r.params.numero).length<19?(r.resetDatos(),r.fisicoSrvc.getDetalle(r.params.numero).subscribe(function(e){e&&e.exito?(r.articulos=e.detalle,r.inventario=e.inventario):r.snackBar.open("ERROR: ".concat(e.mensaje),"Inventario",{duration:3e3})})):r.snackBar.open("ERROR: El texto sobrepasa la longitud permitida","Inventario",{duration:3e3})},this.actualizar=function(){r.fisicoSrvc.saveDetalle(r.articulos).subscribe(function(e){r.snackBar.open(e.exito?"Datos actualizados exitosamente":"ERROR: ".concat(e.mensaje),"Inventario",{duration:3e3})})},this.confirmar=function(){r.dialog.open(Q.a,{maxWidth:"400px",data:new Q.b("Confirmar Inventario Fisico","No podr\xe1 modificar los datos ingresados. \xbfDesea continuar?","S\xed","No")}).afterClosed().subscribe(function(e){e&&r.fisicoSrvc.confirmar(r.inventario).subscribe(function(e){e.exito?(r.inventario=e.inventario,r.snackBar.open("Inventario confirmado exitosamente","Inventario",{duration:3e3})):r.snackBar.open("ERROR: ".concat(e.mensaje),"Inventario",{duration:3e3})})})},this.imprimir=function(){r.pdfServicio.imprimirInventarioFisico(r.inventario.inventario_fisico,{existencia_fisica:!0}).subscribe(function(e){var t=new Blob([e],{type:"application/pdf"});Object(vn.saveAs)(t,"".concat(r.titulo,".pdf"))})},this.imprimirXls=function(){r.pdfServicio.imprimirInventarioFisico(r.inventario.inventario_fisico,{existencia_fisica:!0,_excel:!0}).subscribe(function(e){var t=new Blob([e],{type:"application/vnd.ms-excel"});Object(vn.saveAs)(t,"".concat(r.titulo,".xls"))})}}return o(t,[{key:"ngOnInit",value:function(){this.resetDatos()}}]),t}()).\u0275fac=function(e){return new(e||Ra)(P.Nb(M.b),P.Nb(On.a),P.Nb(da),P.Nb(_.b))},Ra.\u0275cmp=P.Hb({type:Ra,selectors:[["app-form-inventario-fisico"]],decls:14,vars:4,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],[1,"col"],[1,"col",2,"float","right"],["mat-button","","type","button","color","accent",3,"click"],["class","iconFontSize",4,"ngIf"],[4,"ngIf"],["class","row",4,"ngIf"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],[1,"fullWidth"],["matInput","","type","number","maxlength","17","max","17","placeholder","N\xfamero","name","numero","required","",3,"ngModel","ngModelChange"],["mat-raised-button","","matSuffix","","color","accent","type","submit"],["novalidate","","autocomplete","off",3,"ngSubmit"],["frmConteoFisico","ngForm"],[1,"tbl"],[4,"ngFor","ngForOf"],["align","end"],["mat-button","","color","accent","type","submit",4,"ngIf"],["mat-button","","color","accent","type","button",3,"click"],["mat-button","","color","accent","type","button",3,"click",4,"ngIf"],["colspan","2",1,"brdTSingleBSingle"],["colspan","3",1,"brdTSingleBSingle"],[1,"brdTSingleBSingle"],["matInput","","type","number","step","0.01","placeholder","Existencia Sistema","disabled","",2,"color","black","-webkit-text-fill-color","black",3,"ngModel","ngModelOptions","ngModelChange"],["matInput","","type","number","step","0.01","placeholder","Cantidad","required","",3,"ngModel","ngModelOptions","ngModelChange"],["mat-button","","color","accent","type","submit"]],template:function(e,t){1&e&&(P.Tb(0,"div",0),P.Tb(1,"div",1),P.Tb(2,"mat-card",2),P.Tb(3,"mat-card-title"),P.Tb(4,"div",0),P.Tb(5,"div",3),P.Tb(6,"h4"),P.Fc(7,"Ingreso Inventario F\xedsico"),P.Sb(),P.Sb(),P.Tb(8,"div",4),P.Tb(9,"button",5),P.bc("click",function(){return t.showForm=!t.showForm}),P.Dc(10,Da,2,0,"mat-icon",6),P.Dc(11,Ia,2,0,"mat-icon",6),P.Sb(),P.Sb(),P.Sb(),P.Sb(),P.Dc(12,xa,7,2,"mat-card-content",7),P.Sb(),P.Sb(),P.Sb(),P.Dc(13,Ba,17,4,"div",8)),2&e&&(P.Cb(10),P.lc("ngIf",t.showForm),P.Cb(1),P.lc("ngIf",!t.showForm),P.Cb(1),P.lc("ngIf",t.showForm),P.Cb(1),P.lc("ngIf",t.articulos.length>0))},directives:[m.a,m.h,T.a,r.m,b.a,m.c,l.r,l.l,l.m,g.b,f.b,l.o,l.c,l.f,l.p,l.k,l.n,g.g,Cn.a,r.l,g.f],styles:[""]}),Ra),Ga=["rptInventario"],za=["frmInventario"],qa=[{path:"ingresos",component:pt,canActivate:[B.a]},{path:"egresos",component:Xo,canActivate:[B.a]},{path:"articulos",component:Hi,canActivate:[B.a]},{path:"transformaciones",component:Ui,canActivate:[B.a]},{path:"rptexistencia",component:Vi,canActivate:[B.a]},{path:"rptkardex",component:ta,canActivate:[B.a]},{path:"produccion",component:na,canActivate:[B.a]},{path:"rptvalorizado",component:ua,canActivate:[B.a]},{path:"fisico",component:(Ha=function(){function t(){e(this,t)}return o(t,[{key:"ngOnInit",value:function(){}}]),t}(),Ha.\u0275fac=function(e){return new(e||Ha)},Ha.\u0275cmp=P.Hb({type:Ha,selectors:[["app-fisico"]],viewQuery:function(e,t){var o;1&e&&(P.Kc(Ga,1),P.Kc(za,1)),2&e&&(P.sc(o=P.cc())&&(t.rptInventarioComponent=o.first),P.sc(o=P.cc())&&(t.frmInventarioComponent=o.first))},decls:6,vars:0,consts:[[1,"row"],[1,"col","s12","m12"]],template:function(e,t){1&e&&(P.Tb(0,"div",0),P.Tb(1,"div",1),P.Ob(2,"app-reporte"),P.Sb(),P.Sb(),P.Tb(3,"div",0),P.Tb(4,"div",1),P.Ob(5,"app-form-inventario-fisico"),P.Sb(),P.Sb())},directives:[Ma,Ua],styles:[""]}),Ha),canActivate:[B.a]},{path:"replicar_articulos_sedes",component:xn,canActivate:[B.a]},{path:"**",redirectTo:"/admin/dashboard",pathMatch:"full"}],ja=((Na=function t(){e(this,t)}).\u0275mod=P.Lb({type:Na}),Na.\u0275inj=P.Kb({factory:function(e){return new(e||Na)},imports:[[A.d.forChild(qa)],A.d]}),Na),$a=((Pa=function t(){e(this,t)}).\u0275mod=P.Lb({type:Pa}),Pa.\u0275inj=P.Kb({factory:function(e){return new(e||Pa)},providers:[],imports:[[r.c,ja,s.a,u.a,c.c,l.e,w.b,d.d,b.b,g.d,f.c,m.f,p.b,h.c,v.m,S.b,C.b,T.b,M.c,D.b,I.d,F.b,x.b,_.e,y.d,k.c,O.b,E.c]]}),Pa)}}])}();