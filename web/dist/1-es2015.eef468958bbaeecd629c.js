(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"3e6T":function(t,e,i){"use strict";i.d(e,"a",function(){return d});var o=i("sKxO"),n=i("R5jZ"),a=i("un/a"),c=i("JIr8"),r=i("Qyje"),s=i("fXoL"),l=i("tk/3");let d=(()=>{class t{constructor(t){this.http=t,this.srvcErrHndl=new n.a}get(t={}){return this.http.get(`${o.a.urlCatalogos}/get_tipo_movimiento?${r.stringify(t)}`).pipe(Object(a.a)(o.a.reintentos),Object(c.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(s.Xb(l.b))},t.\u0275prov=s.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},A5z7:function(t,e,i){"use strict";i.d(e,"a",function(){return D}),i.d(e,"b",function(){return E}),i.d(e,"c",function(){return B});var o=i("FtGj"),n=i("fXoL"),a=i("FKr1"),c=i("8LU1"),r=i("ofXK"),s=i("R1ws"),l=i("XNiG"),d=i("VRyK"),u=i("IzEk"),b=i("1G5W"),g=i("JX91"),h=i("u47x"),p=i("0EQZ"),m=i("kmnG"),f=i("nLfN"),S=i("cH1L"),v=i("3Pt+");const C=["*"],T=new n.s("MatChipRemove"),_=new n.s("MatChipAvatar"),x=new n.s("MatChipTrailingIcon");class M{constructor(t){this._elementRef=t}}const I=Object(a.B)(Object(a.w)(Object(a.x)(M),"primary"),-1);let D=(()=>{class t extends I{constructor(t,e,i,o,c,r,s,d){super(t),this._elementRef=t,this._ngZone=e,this._changeDetectorRef=c,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListDisabled=!1,this._selected=!1,this._selectable=!0,this._disabled=!1,this._removable=!0,this._onFocus=new l.a,this._onBlur=new l.a,this.selectionChange=new n.o,this.destroyed=new n.o,this.removed=new n.o,this._addHostClassName(),this._chipRippleTarget=r.createElement("div"),this._chipRippleTarget.classList.add("mat-chip-ripple"),this._elementRef.nativeElement.appendChild(this._chipRippleTarget),this._chipRipple=new a.t(this,e,this._chipRippleTarget,i),this._chipRipple.setupTriggerEvents(t),this.rippleConfig=o||{},this._animationsDisabled="NoopAnimations"===s,this.tabIndex=null!=d&&parseInt(d)||-1}get rippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(t){const e=Object(c.c)(t);e!==this._selected&&(this._selected=e,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(t){this._value=t}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(t){this._selectable=Object(c.c)(t)}get disabled(){return this._chipListDisabled||this._disabled}set disabled(t){this._disabled=Object(c.c)(t)}get removable(){return this._removable}set removable(t){this._removable=Object(c.c)(t)}get ariaSelected(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const t=this._elementRef.nativeElement;t.hasAttribute("mat-basic-chip")||"mat-basic-chip"===t.tagName.toLowerCase()?t.classList.add("mat-basic-chip"):t.classList.add("mat-standard-chip")}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}deselect(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}toggleSelected(t=!1){return this._selected=!this.selected,this._dispatchSelectionChange(t),this._changeDetectorRef.markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&&this.removed.emit({chip:this})}_handleClick(t){this.disabled?t.preventDefault():t.stopPropagation()}_handleKeydown(t){if(!this.disabled)switch(t.keyCode){case o.c:case o.b:this.remove(),t.preventDefault();break;case o.n:this.selectable&&this.toggleSelected(!0),t.preventDefault()}}_blur(){this._ngZone.onStable.pipe(Object(u.a)(1)).subscribe(()=>{this._ngZone.run(()=>{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(t=!1){this.selectionChange.emit({source:this,isUserInput:t,selected:this._selected})}}return t.\u0275fac=function(e){return new(e||t)(n.Nb(n.l),n.Nb(n.B),n.Nb(f.a),n.Nb(a.h,8),n.Nb(n.h),n.Nb(r.d),n.Nb(s.a,8),n.Yb("tabindex"))},t.\u0275dir=n.Ib({type:t,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(t,e,i){if(1&t&&(n.Gb(i,_,1),n.Gb(i,x,1),n.Gb(i,T,1)),2&t){let t;n.sc(t=n.cc())&&(e.avatar=t.first),n.sc(t=n.cc())&&(e.trailingIcon=t.first),n.sc(t=n.cc())&&(e.removeIcon=t.first)}},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(t,e){1&t&&n.bc("click",function(t){return e._handleClick(t)})("keydown",function(t){return e._handleKeydown(t)})("focus",function(){return e.focus()})("blur",function(){return e._blur()}),2&t&&(n.Db("tabindex",e.disabled?null:e.tabIndex)("disabled",e.disabled||null)("aria-disabled",e.disabled.toString())("aria-selected",e.ariaSelected),n.Fb("mat-chip-selected",e.selected)("mat-chip-with-avatar",e.avatar)("mat-chip-with-trailing-icon",e.trailingIcon||e.removeIcon)("mat-chip-disabled",e.disabled)("_mat-animation-noopable",e._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[n.zb]}),t})();const F=new n.s("mat-chips-default-options");class y{constructor(t,e,i,o){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=i,this.ngControl=o}}const k=Object(a.z)(y);let O=0;class w{constructor(t,e){this.source=t,this.value=e}}let E=(()=>{class t extends k{constructor(t,e,i,o,a,c,r){super(c,o,a,r),this._elementRef=t,this._changeDetectorRef=e,this._dir=i,this.ngControl=r,this.controlType="mat-chip-list",this._lastDestroyedChipIndex=null,this._destroyed=new l.a,this._uid="mat-chip-list-"+O++,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=>{},this._onChange=()=>{},this._multiple=!1,this._compareWith=(t,e)=>t===e,this._required=!1,this._disabled=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.change=new n.o,this.valueChange=new n.o,this.ngControl&&(this.ngControl.valueAccessor=this)}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get role(){return this.empty?null:"listbox"}get multiple(){return this._multiple}set multiple(t){this._multiple=Object(c.c)(t),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this.writeValue(t),this._value=t}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){return this._required}set required(t){this._required=Object(c.c)(t),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get focused(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Object(c.c)(t),this._syncChipsState()}get selectable(){return this._selectable}set selectable(t){this._selectable=Object(c.c)(t),this.chips&&this.chips.forEach(t=>t.chipListSelectable=this._selectable)}set tabIndex(t){this._userTabIndex=t,this._tabIndex=t}get chipSelectionChanges(){return Object(d.a)(...this.chips.map(t=>t.selectionChange))}get chipFocusChanges(){return Object(d.a)(...this.chips.map(t=>t._onFocus))}get chipBlurChanges(){return Object(d.a)(...this.chips.map(t=>t._onBlur))}get chipRemoveChanges(){return Object(d.a)(...this.chips.map(t=>t.destroyed))}ngAfterContentInit(){this._keyManager=new h.g(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(Object(b.a)(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.tabOut.pipe(Object(b.a)(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.chips.changes.pipe(Object(g.a)(null),Object(b.a)(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new p.c(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(t){this._chipInput=t,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",t.id)}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}writeValue(t){this.chips&&this._setSelectionByValue(t,!1)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this.stateChanges.next()}onContainerClick(t){this._originatesFromChip(t)||this.focus()}focus(t){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(t),this.stateChanges.next()))}_focusInput(t){this._chipInput&&this._chipInput.focus(t)}_keydown(t){const e=t.target;t.keyCode===o.b&&this._isInputEmpty(e)?(this._keyManager.setLastItemActive(),t.preventDefault()):e&&e.classList.contains("mat-chip")&&(this._keyManager.onKeydown(t),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const t=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(t)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(t){return t>=0&&t<this.chips.length}_isInputEmpty(t){return!(!t||"input"!==t.nodeName.toLowerCase()||t.value)}_setSelectionByValue(t,e=!0){if(this._clearSelection(),this.chips.forEach(t=>t.deselect()),Array.isArray(t))t.forEach(t=>this._selectValue(t,e)),this._sortValues();else{const i=this._selectValue(t,e);i&&e&&this._keyManager.setActiveItem(i)}}_selectValue(t,e=!0){const i=this.chips.find(e=>null!=e.value&&this._compareWith(e.value,t));return i&&(e?i.selectViaInteraction():i.select(),this._selectionModel.select(i)),i}_initializeSelection(){Promise.resolve().then(()=>{(this.ngControl||this._value)&&(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(t){this._selectionModel.clear(),this.chips.forEach(e=>{e!==t&&e.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&&(this._selectionModel.clear(),this.chips.forEach(t=>{t.selected&&this._selectionModel.select(t)}),this.stateChanges.next())}_propagateChanges(t){let e=null;e=Array.isArray(this.selected)?this.selected.map(t=>t.value):this.selected?this.selected.value:t,this._value=e,this.change.emit(new w(this,e)),this.valueChange.emit(e),this._onChange(e),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=>{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(()=>{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(t=>{t.source.selected?this._selectionModel.select(t.source):this._selectionModel.deselect(t.source),this.multiple||this.chips.forEach(t=>{!this._selectionModel.isSelected(t)&&t.selected&&t.deselect()}),t.isUserInput&&this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(t=>{let e=this.chips.toArray().indexOf(t.chip);this._isValidIndex(e)&&this._keyManager.updateActiveItem(e),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=>{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(t=>{const e=t.chip,i=this.chips.toArray().indexOf(t.chip);this._isValidIndex(i)&&e._hasFocus&&(this._lastDestroyedChipIndex=i)})}_originatesFromChip(t){let e=t.target;for(;e&&e!==this._elementRef.nativeElement;){if(e.classList.contains("mat-chip"))return!0;e=e.parentElement}return!1}_hasFocusedChip(){return this.chips&&this.chips.some(t=>t._hasFocus)}_syncChipsState(){this.chips&&this.chips.forEach(t=>{t._chipListDisabled=this._disabled,t._chipListMultiple=this.multiple})}}return t.\u0275fac=function(e){return new(e||t)(n.Nb(n.l),n.Nb(n.h),n.Nb(S.b,8),n.Nb(v.m,8),n.Nb(v.d,8),n.Nb(a.d),n.Nb(v.j,10))},t.\u0275cmp=n.Hb({type:t,selectors:[["mat-chip-list"]],contentQueries:function(t,e,i){if(1&t&&n.Gb(i,D,1),2&t){let t;n.sc(t=n.cc())&&(e.chips=t)}},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(t,e){1&t&&n.bc("focus",function(){return e.focus()})("blur",function(){return e._blur()})("keydown",function(t){return e._keydown(t)}),2&t&&(n.Wb("id",e._uid),n.Db("tabindex",e.disabled?null:e._tabIndex)("aria-describedby",e._ariaDescribedby||null)("aria-required",e.role?e.required:null)("aria-disabled",e.disabled.toString())("aria-invalid",e.errorState)("aria-multiselectable",e.multiple)("role",e.role)("aria-orientation",e.ariaOrientation),n.Fb("mat-chip-list-disabled",e.disabled)("mat-chip-list-invalid",e.errorState)("mat-chip-list-required",e.required))},inputs:{ariaOrientation:["aria-orientation","ariaOrientation"],multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",selectable:"selectable",tabIndex:"tabIndex",errorStateMatcher:"errorStateMatcher"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[n.Bb([{provide:m.c,useExisting:t}]),n.zb],ngContentSelectors:C,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(t,e){1&t&&(n.kc(),n.Tb(0,"div",0),n.jc(1),n.Sb())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;transform:translateZ(0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove.mat-icon{width:18px;height:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),t})();const A={separatorKeyCodes:[o.f]};let B=(()=>{class t{}return t.\u0275mod=n.Lb({type:t}),t.\u0275inj=n.Kb({factory:function(e){return new(e||t)},providers:[a.d,{provide:F,useValue:A}],imports:[[a.i]]}),t})()},FHMA:function(t,e,i){"use strict";i.d(e,"a",function(){return d});var o=i("tk/3"),n=i("sKxO"),a=i("R5jZ"),c=i("un/a"),r=i("JIr8"),s=i("fXoL"),l=i("FY0D");let d=(()=>{class t{constructor(t,e){this.http=t,this.ls=e,this.usrToken=null,this.httpOptions={responseType:"blob"},this.srvcErrHndl=new a.a,this.usrToken=this.ls.get(n.a.usrTokenVar)?this.ls.get(n.a.usrTokenVar).token:null,this.httpOptions.headers=new o.d({Authorization:this.usrToken,Accept:"application/pdf"})}getReporteCaja(t){return this.http.post(`${n.a.urlAppRestaurante}/reporte/caja`,t,this.httpOptions).pipe(Object(c.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}getReporteExistencia(t){return this.httpOptions.params=t,this.http.get(`${n.a.urlWms}/reporte/existencia`,this.httpOptions).pipe(Object(c.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}getReporteValorizado(t){return this.httpOptions.params=t,this.http.get(`${n.a.urlWms}/reporte/valorizado`,this.httpOptions).pipe(Object(c.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}imprimirInventarioFisico(t,e){return this.httpOptions.params=e,this.http.get(`${n.a.urlWms}/fisico/imprimir/${t}`,this.httpOptions).pipe(Object(c.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}imprimirReceta(t){return this.http.get(`${n.a.urlMantenimientos}/articulo/imprimir_receta/${t}`,this.httpOptions).pipe(Object(c.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}getReporteKardex(t){return this.httpOptions.params=t,this.http.get(`${n.a.urlWms}/reporte/kardex`,this.httpOptions).pipe(Object(c.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}getReporteFactura(t){return this.httpOptions.params=t,this.http.get(`${n.a.urlAppRestaurante}/reporte/factura`,this.httpOptions).pipe(Object(c.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}getReportePropina(t){return this.httpOptions.params=t,this.http.get(`${n.a.urlAppRestaurante}/reporte/distribucion_propina`,this.httpOptions).pipe(Object(c.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}getComanda(t){return this.http.get(`${n.a.urlAppRestaurante}/comanda/imprimir/${t}/1`,this.httpOptions).pipe(Object(c.a)(n.a.reintentos),Object(r.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(s.Xb(o.b),s.Xb(l.a))},t.\u0275prov=s.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},Iab2:function(t,e,i){var o,n;void 0===(n="function"==typeof(o=function(){"use strict";function e(t,e,i){var o=new XMLHttpRequest;o.open("GET",t),o.responseType="blob",o.onload=function(){c(o.response,e,i)},o.onerror=function(){console.error("could not download file")},o.send()}function i(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(i)}}var n="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=n.saveAs||("object"!=typeof window||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(t,a,c){var r=n.URL||n.webkitURL,s=document.createElement("a");s.download=a=a||t.name||"download",s.rel="noopener","string"==typeof t?(s.href=t,s.origin===location.origin?o(s):i(s.href)?e(t,a,c):o(s,s.target="_blank")):(s.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){o(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,n,a){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,a),n);else if(i(t))e(t,n,a);else{var c=document.createElement("a");c.href=t,c.target="_blank",setTimeout(function(){o(c)})}}:function(t,i,o,c){if((c=c||open("","_blank"))&&(c.document.title=c.document.body.innerText="downloading..."),"string"==typeof t)return e(t,i,o);var r="application/octet-stream"===t.type,s=/constructor/i.test(n.HTMLElement)||n.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||r&&s||a)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var t=d.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=t:location=t,c=null},d.readAsDataURL(t)}else{var u=n.URL||n.webkitURL,b=u.createObjectURL(t);c?c.location=b:location.href=b,c=null,setTimeout(function(){u.revokeObjectURL(b)},4e4)}});n.saveAs=c.saveAs=c,t.exports=c})?o.apply(e,[]):o)||(t.exports=n)},NU9O:function(t,e,i){"use strict";i.d(e,"a",function(){return l});var o=i("fXoL"),n=i("ofXK"),a=i("bTqV");function c(t,e){if(1&t){const t=o.Ub();o.Tb(0,"button",3),o.bc("click",function(){return o.xc(t),o.fc().onHtmlClick()}),o.Fc(1," Generar "),o.Sb()}if(2&t){const t=o.fc();o.lc("disabled",t.configuracion.isHtmlDisabled)}}function r(t,e){if(1&t){const t=o.Ub();o.Tb(0,"button",3),o.bc("click",function(){return o.xc(t),o.fc().onPdfClick()}),o.Fc(1," PDF "),o.Sb()}if(2&t){const t=o.fc();o.lc("disabled",t.configuracion.isPdfDisabled)}}function s(t,e){if(1&t){const t=o.Ub();o.Tb(0,"button",3),o.bc("click",function(){return o.xc(t),o.fc().onExcelClick()}),o.Fc(1," Excel "),o.Sb()}if(2&t){const t=o.fc();o.lc("disabled",t.configuracion.isExcelDisabled)}}let l=(()=>{class t{constructor(){this.htmlClick=new o.o,this.pdfClick=new o.o,this.excelClick=new o.o,this.resetParamsClick=new o.o,this.configuracion={isHtmlDisabled:!1,isPdfDisabled:!1,isExcelDisabled:!1,showHtml:!0,showPdf:!0,showExcel:!0},this.onHtmlClick=()=>this.htmlClick.emit(),this.onPdfClick=()=>this.pdfClick.emit(),this.onExcelClick=()=>this.excelClick.emit(),this.onResetParamsClick=()=>this.resetParamsClick.emit()}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Hb({type:t,selectors:[["app-rpt-botones"]],inputs:{configuracion:"configuracion"},outputs:{htmlClick:"htmlClick",pdfClick:"pdfClick",excelClick:"excelClick",resetParamsClick:"resetParamsClick"},decls:6,vars:3,consts:[["align","end"],["mat-raised-button","","type","button","class","btnAccion","color","accent",3,"disabled","click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Dc(1,c,2,1,"button",1),o.Dc(2,r,2,1,"button",1),o.Dc(3,s,2,1,"button",1),o.Tb(4,"button",2),o.bc("click",function(){return e.onResetParamsClick()}),o.Fc(5," Restaurar "),o.Sb(),o.Sb()),2&t&&(o.Cb(1),o.lc("ngIf",e.configuracion.showHtml),o.Cb(1),o.lc("ngIf",e.configuracion.showPdf),o.Cb(1),o.lc("ngIf",e.configuracion.showExcel))},directives:[n.m,a.a],styles:[""]}),t})()},TOq3:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var o=i("fXoL");let n=(()=>{class t{constructor(){this.configuracion={w:150,h:150,align:"center",size:100}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Hb({type:t,selectors:[["app-cargando"]],inputs:{configuracion:"configuracion"},decls:2,vars:7,consts:[[3,"align"],["id","imgCargando","src","/assets/img/loading.gif","alt","Cargando..."]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Ob(1,"img",1),o.Sb()),2&t&&(o.Ac("width",e.configuracion.size,"%"),o.lc("align",e.configuracion.align),o.Cb(1),o.Ac("width",e.configuracion.w,"px")("height",e.configuracion.h,"px"))},styles:[""]}),t})()},vtFA:function(t,e,i){"use strict";i.r(e),i.d(e,"WmsModule",function(){return ha});var o=i("ofXK"),n=i("tk/3"),a=i("3Pt+"),c=i("YUcS"),r=i("PCNd"),s=i("MutI"),l=i("NFeN"),d=i("kmnG"),u=i("qFsG"),b=i("Wp6s"),g=i("f0Cb"),h=i("wZkO"),p=i("+0xr"),m=i("d3UM"),f=i("bSwM"),S=i("bTqV"),v=i("dNgK"),C=i("/t3+"),T=i("STbY"),_=i("zkoq"),x=i("M9IT"),M=i("0IaG"),I=i("XhcP"),D=i("8yBR"),F=i("/1cH"),y=i("A5z7"),k=i("uM5D"),O=i("tyNb"),w=i("0T/Q"),E=i("sKxO"),A=i("wd/R"),B=i("fXoL"),R=i("FY0D"),$=i("R5jZ"),H=i("un/a"),P=i("JIr8"),N=i("Qyje");let U=(()=>{class t{constructor(t){this.http=t,this.ingresoUrl="ingreso",this.documentoUrl="documento",this.srvcErrHndl=new $.a}get(t={}){return this.http.get(`${E.a.urlWms}/${this.ingresoUrl}/buscar_ingreso?${N.stringify(t)}`).pipe(Object(H.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}save(t){return this.http.post(`${E.a.urlWms}/${this.ingresoUrl}/guardar${+t.ingreso>0?"/"+t.ingreso:""}`,t).pipe(Object(H.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}getDetalle(t,e={}){return this.http.get(`${E.a.urlWms}/${this.ingresoUrl}/buscar_detalle/${t}?${N.stringify(e)}`).pipe(Object(H.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}saveDetalle(t){return this.http.post(`${E.a.urlWms}/${this.ingresoUrl}/guardar_detalle/${t.ingreso}${+t.ingreso_detalle>0?"/"+t.ingreso_detalle:""}`,t).pipe(Object(H.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}getDocumento(t={}){return this.http.get(`${E.a.urlWms}/${this.documentoUrl}/buscar?${N.stringify(t)}`).pipe(Object(H.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}saveDocumento(t){return this.http.post(`${E.a.urlWms}/${this.documentoUrl}/guardar${+t.documento>0?"/"+t.documento:""}`,t).pipe(Object(H.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}enviarDocumentoAConta(t){return this.http.get(`${E.a.urlWms}/${this.documentoUrl}/enviar/${t}`).pipe(Object(H.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(B.Xb(n.b))},t.\u0275prov=B.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var j=i("FKr1");function G(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-list-item",5),B.bc("click",function(){B.xc(t);const i=e.$implicit;return B.fc().getIngreso(i)}),B.Tb(1,"mat-icon",6),B.Fc(2,"trending_up"),B.Sb(),B.Tb(3,"h5",7),B.Fc(4),B.Sb(),B.Ob(5,"br"),B.Tb(6,"p",7),B.Fc(7),B.gc(8,"date"),B.Ob(9,"br"),B.Fc(10),B.Ob(11,"br"),B.Sb(),B.Tb(12,"p",7),B.Fc(13),B.Sb(),B.Sb()}if(2&t){const t=e.$implicit;B.Cb(4),B.Hc("No. ",t.ingreso,""),B.Cb(3),B.Hc(" Fecha: ",B.ic(8,4,t.fecha,"dd/MM/yyyy"),""),B.Cb(3),B.Hc(" Bodega: ",t.bodega.descripcion,""),B.Cb(3),B.Hc(" Proveedor: ",t.proveedor.razon_social," ")}}const z=function(){return{standalone:!0}};let q=(()=>{class t{constructor(t){this.ingresoSrvc=t,this.getIngresoEv=new B.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadIngresos=()=>{this.ingresoSrvc.get().subscribe(t=>{t&&t.length>0&&(this.lstIngresos=t,this.applyFilter())})},this.getIngreso=t=>{this.getIngresoEv.emit({ingreso:t.ingreso,tipo_movimiento:t.tipo_movimiento.tipo_movimiento,fecha:t.fecha,bodega_origen:t.bodega_origen&&t.bodega_origen.bodega?t.bodega_origen.bodega:null,bodega:t.bodega.bodega,usuario:t.usuario.usuario,comentario:t.comentario,proveedor:t.proveedor.proveedor})},this.pageChange=t=>{this.pageSize=t.pageSize,this.pageIndex=t.pageIndex,this.applyFilter()}}ngOnInit(){this.loadIngresos()}applyFilter(){if(this.txtFiltro.length>0){const t=Object(E.b)(this.lstIngresos,this.txtFiltro);this.length=t.length,this.lstIngresosPaged=Object(E.e)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstIngresos.length,this.lstIngresosPaged=Object(E.e)(this.lstIngresos,this.pageSize,this.pageIndex+1)}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(U))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-lista-ingreso"]],outputs:{getIngresoEv:"getIngresoEv"},decls:7,vars:7,consts:[[1,"mat-elevation-z4","fullWidth",2,"height","100% important"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[3,"click"],["mat-list-icon",""],["mat-line",""]],template:function(t,e){1&t&&(B.Tb(0,"mat-card",0),B.Tb(1,"mat-card-content"),B.Tb(2,"mat-form-field",1),B.Tb(3,"input",2),B.bc("keyup",function(){return e.applyFilter()})("ngModelChange",function(t){return e.txtFiltro=t}),B.Sb(),B.Sb(),B.Tb(4,"mat-nav-list"),B.Dc(5,G,14,7,"mat-list-item",3),B.Sb(),B.Tb(6,"mat-paginator",4),B.bc("page",function(t){return e.pageChange(t)}),B.Sb(),B.Sb(),B.Sb()),2&t&&(B.Cb(3),B.lc("ngModel",e.txtFiltro)("ngModelOptions",B.nc(6,z)),B.Cb(2),B.lc("ngForOf",e.lstIngresosPaged),B.Cb(1),B.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[b.a,b.c,d.b,u.b,a.c,a.k,a.n,s.e,o.l,x.a,s.c,l.a,s.b,j.j],pipes:[o.e],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),t})();var L=i("IJgu"),W=i("50cD"),V=i("3e6T"),K=i("u5dX"),Q=i("NGYs"),X=i("C5NV"),J=i("yZ4O"),Z=i("DVqU");function Y(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",7),B.bc("click",function(){return B.xc(t),B.fc().showIngresoForm=!0}),B.Tb(1,"mat-icon",8),B.Fc(2,"expand_more"),B.Sb(),B.Sb()}}function tt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",7),B.bc("click",function(){return B.xc(t),B.fc().showIngresoForm=!1}),B.Tb(1,"mat-icon",8),B.Fc(2,"expand_less"),B.Sb(),B.Sb()}}function et(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.tipo_movimiento),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function it(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",12),B.Tb(1,"mat-label"),B.Fc(2,"Tipo de movimiento"),B.Sb(),B.Tb(3,"mat-select",18),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).ingreso.tipo_movimiento=e}),B.Dc(4,et,2,2,"mat-option",19),B.Sb(),B.Sb()}if(2&t){const t=B.fc(2);B.Cb(3),B.lc("ngModel",t.ingreso.tipo_movimiento),B.Cb(1),B.lc("ngForOf",t.tiposMovimiento)}}function ot(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.bodega),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function nt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",12),B.Tb(1,"mat-label"),B.Fc(2,"Bodega"),B.Sb(),B.Tb(3,"mat-select",21),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).ingreso.bodega=e}),B.Dc(4,ot,2,2,"mat-option",19),B.Sb(),B.Sb()}if(2&t){const t=B.fc(2);B.Cb(3),B.lc("ngModel",t.ingreso.bodega),B.Cb(1),B.lc("ngForOf",t.bodegas)}}function at(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.bodega),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function ct(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",24),B.bc("click",function(){return B.xc(t),B.fc(3).ingreso.bodega_origen=void 0}),B.Tb(1,"mat-icon",8),B.Fc(2,"close"),B.Sb(),B.Sb()}}function rt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",12),B.Tb(1,"mat-label"),B.Fc(2,"Bodega de origen"),B.Sb(),B.Tb(3,"mat-select",22),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).ingreso.bodega_origen=e}),B.Dc(4,at,2,2,"mat-option",19),B.Sb(),B.Dc(5,ct,3,0,"button",23),B.Sb()}if(2&t){const t=B.fc(2);B.Cb(3),B.lc("ngModel",t.ingreso.bodega_origen),B.Cb(1),B.lc("ngForOf",t.bodegas),B.Cb(1),B.lc("ngIf",t.ingreso.bodega_origen)}}function st(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t),B.Cb(1),B.Ic(" (",t.nit,") ",t.razon_social," ")}}const lt=function(){return{standalone:!0}};function dt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",12),B.Tb(1,"mat-label"),B.Fc(2,"Proveedor"),B.Sb(),B.Tb(3,"input",25),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).txtProveedorSelected=e})("keyup",function(){B.xc(t);const e=B.fc(2);return e.filtrarProveedores(e.txtProveedorSelected)}),B.Sb(),B.Tb(4,"mat-autocomplete",26,27),B.Dc(6,st,2,3,"mat-option",19),B.Sb(),B.Sb()}if(2&t){const t=B.tc(5),e=B.fc(2);B.Cb(3),B.lc("ngModel",e.txtProveedorSelected)("ngModelOptions",B.nc(5,lt))("matAutocomplete",t),B.Cb(1),B.lc("displayWith",e.displayProveedor),B.Cb(2),B.lc("ngForOf",e.filteredProveedores)}}function ut(t,e){if(1&t&&(B.Tb(0,"button",28),B.Fc(1," Guardar "),B.Sb()),2&t){B.fc();const t=B.tc(1),e=B.fc();B.lc("disabled",!t.form.valid||e.bloqueoBotones||1==+e.documento.enviado)}}function bt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",29),B.bc("click",function(){return B.xc(t),B.fc(2).resetIngreso()}),B.Fc(1," Nuevo "),B.Sb()}}function gt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"form",9,10),B.bc("ngSubmit",function(){B.xc(t);const e=B.tc(1),i=B.fc();return e.form.valid&&i.onSubmit()}),B.Dc(2,it,5,2,"mat-form-field",11),B.Tb(3,"mat-form-field",12),B.Tb(4,"input",13),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().ingreso.fecha=e}),B.Sb(),B.Sb(),B.Dc(5,nt,5,2,"mat-form-field",11),B.Dc(6,rt,6,3,"mat-form-field",11),B.Dc(7,dt,7,6,"mat-form-field",11),B.Tb(8,"mat-form-field",12),B.Tb(9,"input",14),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().ingreso.comentario=e}),B.Sb(),B.Sb(),B.Tb(10,"div",15),B.Dc(11,ut,2,1,"button",16),B.Dc(12,bt,2,0,"button",17),B.Sb(),B.Sb()}if(2&t){const t=B.fc();B.Cb(2),B.lc("ngIf",t.saveToDB),B.Cb(2),B.lc("ngModel",t.ingreso.fecha),B.Cb(1),B.lc("ngIf",t.bodega),B.Cb(1),B.lc("ngIf",t.saveToDB),B.Cb(1),B.lc("ngIf",t.saveToDB),B.Cb(2),B.lc("ngModel",t.ingreso.comentario),B.Cb(2),B.lc("ngIf",t.saveToDB),B.Cb(1),B.lc("ngIf",t.ingreso.ingreso)}}function ht(t,e){1&t&&B.Ob(0,"hr")}function pt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",7),B.bc("click",function(){return B.xc(t),B.fc(2).showDetalleIngresoForm=!0}),B.Tb(1,"mat-icon",8),B.Fc(2,"expand_more"),B.Sb(),B.Sb()}}function mt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",7),B.bc("click",function(){return B.xc(t),B.fc(2).showDetalleIngresoForm=!1}),B.Tb(1,"mat-icon",8),B.Fc(2,"expand_less"),B.Sb(),B.Sb()}}function ft(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function St(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.presentacion),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function vt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",12),B.Tb(1,"mat-label"),B.Fc(2,"Presentaci\xf3n"),B.Sb(),B.Tb(3,"mat-select",38),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(3).detalleIngreso.presentacion=e}),B.Dc(4,St,2,2,"mat-option",19),B.Sb(),B.Sb()}if(2&t){const t=B.fc(3);B.Cb(3),B.lc("ngModel",t.detalleIngreso.presentacion),B.Cb(1),B.lc("ngForOf",t.fltrPresentaciones)}}function Ct(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",12),B.Tb(1,"input",39),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(3).detalleIngreso.cantidad_utilizada=e}),B.Sb(),B.Sb()}if(2&t){const t=B.fc(3);B.Cb(1),B.lc("ngModel",t.detalleIngreso.cantidad_utilizada)}}function Tt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",12),B.Tb(1,"input",40),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(3).detalleIngreso.precio_unitario=e})("change",function(){B.xc(t);const e=B.fc(3);return e.detalleIngreso.precio_total=+e.detalleIngreso.precio_unitario*+e.detalleIngreso.cantidad}),B.Sb(),B.Sb()}if(2&t){const t=B.fc(3);B.Cb(1),B.lc("ngModel",t.detalleIngreso.precio_unitario)}}function _t(t,e){if(1&t&&(B.Tb(0,"button",28),B.Fc(1," Guardar "),B.Sb()),2&t){B.fc();const t=B.tc(1),e=B.fc(2);B.lc("disabled",!t.form.valid||e.bloqueoBotones||1==+e.documento.enviado||+e.detalleIngreso.cantidad<1)}}const xt=function(){return[2,3]};function Mt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",41),B.bc("click",function(){return B.xc(t),B.fc(3).addToDetail()}),B.Fc(1," Guardar producci\xf3n "),B.Sb()}if(2&t){B.fc();const t=B.tc(1),e=B.fc(2);B.lc("disabled",!e.detalleIngreso.articulo||!t.form.valid||B.nc(1,xt).indexOf(+e.ingreso.estatus_movimiento)>=0||+e.detalleIngreso.cantidad<1)}}function It(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",29),B.bc("click",function(){return B.xc(t),B.fc(3).resetDetalleIngreso()}),B.Fc(1," Nuevo "),B.Sb()}}function Dt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"form",9,32),B.bc("ngSubmit",function(){B.xc(t);const e=B.tc(1),i=B.fc(2);return e.form.valid&&i.onSubmitDetail()}),B.Tb(2,"mat-form-field",12),B.Tb(3,"mat-label"),B.Fc(4,"Art\xedculo"),B.Sb(),B.Tb(5,"input",33),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).txtArticuloSelected=e})("keyup",function(){B.xc(t);const e=B.fc(2);return e.filtrarArticulos(e.txtArticuloSelected)}),B.Sb(),B.Tb(6,"mat-autocomplete",34,35),B.bc("optionSelected",function(){return B.xc(t),B.fc(2).setPresentaciones()}),B.Dc(8,ft,2,2,"mat-option",19),B.Sb(),B.Sb(),B.Dc(9,vt,5,2,"mat-form-field",11),B.Dc(10,Ct,2,1,"mat-form-field",11),B.Tb(11,"mat-form-field",12),B.Tb(12,"input",36),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).detalleIngreso.cantidad=e})("change",function(){B.xc(t);const e=B.fc(2);return e.detalleIngreso.precio_total=+e.detalleIngreso.precio_unitario*+e.detalleIngreso.cantidad}),B.Sb(),B.Sb(),B.Dc(13,Tt,2,1,"mat-form-field",11),B.Tb(14,"div",15),B.Dc(15,_t,2,1,"button",16),B.Dc(16,Mt,2,2,"button",37),B.Dc(17,It,2,0,"button",17),B.Sb(),B.Sb()}if(2&t){const t=B.tc(7),e=B.fc(2);B.Cb(5),B.lc("ngModel",e.txtArticuloSelected)("ngModelOptions",B.nc(12,lt))("matAutocomplete",t),B.Cb(1),B.lc("displayWith",e.displayArticulo),B.Cb(2),B.lc("ngForOf",e.filteredArticulos),B.Cb(1),B.lc("ngIf",e.saveToDB),B.Cb(1),B.lc("ngIf",!e.bodega),B.Cb(2),B.lc("ngModel",e.detalleIngreso.cantidad),B.Cb(1),B.lc("ngIf",e.saveToDB),B.Cb(2),B.lc("ngIf",e.saveToDB),B.Cb(1),B.lc("ngIf",!e.saveToDB),B.Cb(1),B.lc("ngIf",e.detalleIngreso.ingreso_detalle)}}function Ft(t,e){1&t&&B.Ob(0,"hr")}function yt(t,e){1&t&&(B.Tb(0,"th",56),B.Fc(1,"Art\xedculo"),B.Sb())}function kt(t,e){if(1&t&&(B.Tb(0,"td",57),B.Fc(1),B.Sb()),2&t){const t=e.$implicit,i=B.fc(3);B.Cb(1),B.Hc(" ",i.saveToDB?t.articulo.descripcion:i.getDescripcionArticulo(t.articulo),"")}}function Ot(t,e){1&t&&(B.Tb(0,"th",56),B.Fc(1,"Presentaci\xf3n"),B.Sb())}function wt(t,e){if(1&t&&(B.Tb(0,"td",57),B.Fc(1),B.Sb()),2&t){const t=e.$implicit,i=B.fc(3);B.Cb(1),B.Hc(" ",i.saveToDB?t.presentacion.descripcion:i.getDescripcionPresentacion(t.presentacion)," ")}}function Et(t,e){1&t&&(B.Tb(0,"th",58),B.Fc(1,"Cantidad a Utilizar"),B.Sb())}function At(t,e){if(1&t&&(B.Tb(0,"td",59),B.Fc(1),B.gc(2,"number"),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Hc("",B.ic(2,1,t.cantidad_utilizada,"1.2-2")," ")}}function Bt(t,e){1&t&&(B.Tb(0,"th",58),B.Fc(1,"Cantidad"),B.Sb())}function Rt(t,e){if(1&t&&(B.Tb(0,"td",59),B.Fc(1),B.gc(2,"number"),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Hc("",B.ic(2,1,t.cantidad,"1.2-2")," ")}}function $t(t,e){1&t&&(B.Tb(0,"th",58),B.Fc(1,"Costo Unitario Con IVA"),B.Sb())}function Ht(t,e){if(1&t&&(B.Tb(0,"td",59),B.Fc(1),B.gc(2,"number"),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Hc("",B.ic(2,1,t.precio_unitario,"1.2-2")," ")}}function Pt(t,e){1&t&&(B.Tb(0,"th",58),B.Fc(1,"Costo Total con IVA"),B.Sb())}function Nt(t,e){if(1&t&&(B.Tb(0,"td",59),B.Fc(1),B.gc(2,"number"),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Gc(B.ic(2,1,t.precio_total,"1.2-2"))}}function Ut(t,e){1&t&&(B.Tb(0,"th",56),B.Fc(1,"\xa0"),B.Sb())}function jt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",41),B.bc("click",function(){B.xc(t);const e=B.fc().$implicit;return B.fc(3).getDetalleIngreso(e.ingreso,e.ingreso_detalle)}),B.Fc(1," Editar "),B.Sb()}if(2&t){const t=B.fc(4);B.lc("disabled",t.bloqueoBotones||1==+t.documento.enviado)}}function Gt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",41),B.bc("click",function(){B.xc(t);const e=B.fc().$implicit;return B.fc(3).editFromDetail(e.articulo)}),B.Fc(1," Editar "),B.Sb()}if(2&t){const t=B.fc(4);B.lc("disabled",B.nc(1,xt).indexOf(+t.ingreso.estatus_movimiento)>=0||t.bloqueoBotones)}}function zt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",41),B.bc("click",function(){B.xc(t);const e=B.fc().$implicit;return B.fc(3).removeFromDetail(e.articulo)}),B.Fc(1," Eliminar "),B.Sb()}if(2&t){const t=B.fc(4);B.lc("disabled",B.nc(1,xt).indexOf(+t.ingreso.estatus_movimiento)>=0||t.bloqueoBotones)}}function qt(t,e){if(1&t&&(B.Tb(0,"td",57),B.Dc(1,jt,2,1,"button",37),B.Dc(2,Gt,2,2,"button",37),B.Dc(3,zt,2,2,"button",37),B.Sb()),2&t){const t=B.fc(3);B.Cb(1),B.lc("ngIf",t.saveToDB),B.Cb(1),B.lc("ngIf",!t.saveToDB),B.Cb(1),B.lc("ngIf",!t.saveToDB)}}function Lt(t,e){1&t&&B.Ob(0,"td",57)}function Wt(t,e){1&t&&B.Ob(0,"tr",60)}function Vt(t,e){1&t&&B.Ob(0,"tr",61)}function Kt(t,e){if(1&t&&(B.Tb(0,"table",42),B.Rb(1,43),B.Dc(2,yt,2,0,"th",44),B.Dc(3,kt,2,1,"td",45),B.Qb(),B.Rb(4,46),B.Dc(5,Ot,2,0,"th",44),B.Dc(6,wt,2,1,"td",45),B.Qb(),B.Rb(7,47),B.Dc(8,Et,2,0,"th",48),B.Dc(9,At,3,4,"td",49),B.Qb(),B.Rb(10,50),B.Dc(11,Bt,2,0,"th",48),B.Dc(12,Rt,3,4,"td",49),B.Qb(),B.Rb(13,51),B.Dc(14,$t,2,0,"th",48),B.Dc(15,Ht,3,4,"td",49),B.Qb(),B.Rb(16,52),B.Dc(17,Pt,2,0,"th",48),B.Dc(18,Nt,3,4,"td",49),B.Qb(),B.Rb(19,53),B.Dc(20,Ut,2,0,"th",44),B.Dc(21,qt,4,3,"td",45),B.Dc(22,Lt,1,0,"td",45),B.Qb(),B.Dc(23,Wt,1,0,"tr",54),B.Dc(24,Vt,1,0,"tr",55),B.Sb()),2&t){const t=B.fc(2);B.lc("dataSource",t.dataSource),B.Cb(23),B.lc("matHeaderRowDef",t.displayedColumns),B.Cb(1),B.lc("matRowDefColumns",t.displayedColumns)}}function Qt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-card",1),B.Tb(1,"mat-card-title"),B.Tb(2,"h4"),B.Fc(3),B.Dc(4,pt,3,0,"button",2),B.Dc(5,mt,3,0,"button",2),B.Sb(),B.Sb(),B.Tb(6,"mat-card-content"),B.Dc(7,Dt,18,13,"form",3),B.Dc(8,Ft,1,0,"hr",4),B.Tb(9,"mat-form-field",12),B.Tb(10,"input",30),B.bc("keyup",function(e){return B.xc(t),B.fc().applyFilter(e.target.value)}),B.Sb(),B.Sb(),B.Dc(11,Kt,25,3,"table",31),B.Sb(),B.Sb()}if(2&t){const t=B.fc();B.Cb(3),B.Ic(" Detalle del ingreso ",t.saveToDB?"No.":""," ",t.ingreso.ingreso," "),B.Cb(1),B.lc("ngIf",!t.showDetalleIngresoForm),B.Cb(1),B.lc("ngIf",t.showDetalleIngresoForm),B.Cb(2),B.lc("ngIf",t.showDetalleIngresoForm),B.Cb(1),B.lc("ngIf",t.detallesIngreso.length>0),B.Cb(3),B.lc("ngIf",t.detallesIngreso.length>0)}}function Xt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",7),B.bc("click",function(){return B.xc(t),B.fc(2).showDocumentoForm=!0}),B.Tb(1,"mat-icon",8),B.Fc(2,"expand_more"),B.Sb(),B.Sb()}}function Jt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",7),B.bc("click",function(){return B.xc(t),B.fc(2).showDocumentoForm=!1}),B.Tb(1,"mat-icon",8),B.Fc(2,"expand_less"),B.Sb(),B.Sb()}}function Zt(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.documento_tipo),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Yt(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",12),B.Tb(1,"mat-label"),B.Fc(2,"Tipo de documento"),B.Sb(),B.Tb(3,"mat-select",68),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(3).documento.documento_tipo=e}),B.Dc(4,Zt,2,2,"mat-option",19),B.Sb(),B.Sb()}if(2&t){const t=B.fc(3);B.Cb(3),B.lc("ngModel",t.documento.documento_tipo)("disabled",1==+t.documento.enviado),B.Cb(1),B.lc("ngForOf",t.documentosTipo)}}function te(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.tipo_compra_venta),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function ee(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",12),B.Tb(1,"mat-label"),B.Fc(2,"Tipo de compra"),B.Sb(),B.Tb(3,"mat-select",69),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(3).documento.tipo_compra_venta=e}),B.Dc(4,te,2,2,"mat-option",19),B.Sb(),B.Sb()}if(2&t){const t=B.fc(3);B.Cb(3),B.lc("ngModel",t.documento.tipo_compra_venta)("disabled",1==+t.documento.enviado),B.Cb(1),B.lc("ngForOf",t.tiposCompraVenta)}}function ie(t,e){if(1&t&&(B.Tb(0,"button",28),B.Fc(1," Guardar detalle "),B.Sb()),2&t){B.fc();const t=B.tc(1),e=B.fc(2);B.lc("disabled",!t.form.valid||e.bloqueoBotones||1==+e.documento.enviado)}}function oe(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",70),B.bc("click",function(){return B.xc(t),B.fc(3).enviarAConta()}),B.Fc(1," Enviar a contabilidad "),B.Sb()}if(2&t){B.fc();const t=B.tc(1),e=B.fc(2);B.lc("disabled",!t.form.valid||e.bloqueoBotones||1==+e.documento.enviado)}}function ne(t,e){if(1&t){const t=B.Ub();B.Tb(0,"form",9,63),B.bc("ngSubmit",function(){B.xc(t);const e=B.tc(1),i=B.fc(2);return e.form.valid&&i.submitDocumento()}),B.Dc(2,Yt,5,3,"mat-form-field",11),B.Tb(3,"mat-form-field",12),B.Tb(4,"input",64),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).documento.serie=e}),B.Sb(),B.Sb(),B.Tb(5,"mat-form-field",12),B.Tb(6,"input",65),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).documento.numero=e}),B.Sb(),B.Sb(),B.Tb(7,"mat-form-field",12),B.Tb(8,"input",66),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).documento.fecha=e}),B.Sb(),B.Sb(),B.Dc(9,ee,5,3,"mat-form-field",11),B.Tb(10,"div",15),B.Dc(11,ie,2,1,"button",16),B.Dc(12,oe,2,1,"button",67),B.Sb(),B.Sb()}if(2&t){const t=B.fc(2);B.Cb(2),B.lc("ngIf",t.saveToDB),B.Cb(2),B.lc("ngModel",t.documento.serie)("disabled",1==+t.documento.enviado),B.Cb(2),B.lc("ngModel",t.documento.numero)("disabled",1==+t.documento.enviado),B.Cb(2),B.lc("ngModel",t.documento.fecha)("disabled",1==+t.documento.enviado),B.Cb(1),B.lc("ngIf",t.saveToDB),B.Cb(2),B.lc("ngIf",t.saveToDB),B.Cb(1),B.lc("ngIf",t.saveToDB&&+t.documento.documento>0&&0==+t.documento.enviado)}}function ae(t,e){if(1&t&&(B.Tb(0,"mat-tab",62),B.Tb(1,"mat-card",1),B.Tb(2,"mat-card-title"),B.Tb(3,"h4"),B.Fc(4),B.Dc(5,Xt,3,0,"button",2),B.Dc(6,Jt,3,0,"button",2),B.Sb(),B.Sb(),B.Tb(7,"mat-card-content"),B.Dc(8,ne,13,10,"form",3),B.Sb(),B.Sb(),B.Sb()),2&t){const t=B.fc();B.Cb(4),B.Hc(" Documento del ingreso",t.ingreso.ingreso?" No. "+t.ingreso.ingreso:""," "),B.Cb(1),B.lc("ngIf",!t.showDocumentoForm),B.Cb(1),B.lc("ngIf",t.showDocumentoForm),B.Cb(2),B.lc("ngIf",t.showDocumentoForm)}}let ce=(()=>{class t{constructor(t,e,i,o,n,a,c,r,s,l,d){this.dialog=t,this.snackBar=e,this.ls=i,this.ingresoSrvc=o,this.proveedorSrvc=n,this.tipoMovimientoSrvc=a,this.bodegaSrvc=c,this.articuloSrvc=r,this.presentacinSrvc=s,this.documentoTipoSrvc=l,this.tipoCompraVentaSrvc=d,this.saveToDB=!0,this.bodega=!0,this.produccion=!1,this.ingresoSavedEv=new B.o,this.showIngresoForm=!0,this.showDetalleIngresoForm=!0,this.showDocumentoForm=!0,this.detallesIngreso=[],this.displayedColumns=["articulo","presentacion","cantidad","costo_unitario","costo_total","deleteItem"],this.tiposMovimiento=[],this.proveedores=[],this.filteredProveedores=[],this.bodegas=[],this.articulos=[],this.filteredArticulos=[],this.presentaciones=[],this.fltrPresentaciones=[],this.esMovil=!1,this.bloqueoBotones=!1,this.txtArticuloSelected=void 0,this.txtProveedorSelected=void 0,this.documentosTipo=[],this.tiposCompraVenta=[],this.loadTiposMovimiento=()=>{this.tipoMovimientoSrvc.get({ingreso:1}).subscribe(t=>{t&&(this.tiposMovimiento=t)})},this.loadProveedores=()=>{this.proveedorSrvc.get().subscribe(t=>{t&&(this.proveedores=t)})},this.loadBodegas=()=>{this.bodegaSrvc.get({sede:+this.ls.get(E.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.bodegas=t)})},this.loadPresentaciones=()=>{this.presentacinSrvc.get().subscribe(t=>{t&&(this.presentaciones=t)})},this.loadDocumentosTipo=()=>{this.documentoTipoSrvc.get().subscribe(t=>{t&&(this.documentosTipo=t)})},this.loadTiposCompraVenta=()=>{this.tipoCompraVentaSrvc.get().subscribe(t=>{t&&(this.tiposCompraVenta=t)})},this.removeFromDetail=t=>{const e=this.detallesIngreso.findIndex(e=>+e.articulo==+t);e>=0&&(this.detallesIngreso.splice(e,1),this.updateTableDataSource())},this.resetIngreso=()=>{this.ingreso={ingreso:null,tipo_movimiento:null,fecha:A().format(E.a.dbDateFormat),bodega:null,usuario:this.ls.get(E.a.usrTokenVar).idusr||0,comentario:null,proveedor:null,estatus_movimiento:1},this.resetDetalleIngreso(),this.detallesIngreso=[],this.resetDocumento(),this.updateTableDataSource(),this.txtProveedorSelected=void 0},this.onSubmit=()=>{this.bloqueoBotones=!0,this.ingresoSrvc.save(this.ingreso).subscribe(t=>{this.resetIngreso(),t.exito&&(this.ingreso=t.ingreso,this.setProveedor(+this.ingreso.proveedor)),this.ingresoSavedEv.emit(),this.bloqueoBotones=!1})},this.loadArticulos=()=>{var t={};this.produccion&&(t={produccion:1}),this.articuloSrvc.getArticulosIngreso(t).subscribe(t=>{t&&(this.articulos=t)})},this.resetDetalleIngreso=()=>{this.detalleIngreso={ingreso_detalle:null,ingreso:this.ingreso.ingreso?this.ingreso.ingreso:null,articulo:null,cantidad:null,precio_unitario:null,precio_total:null,presentacion:0},this.txtArticuloSelected=void 0},this.loadDetalleIngreso=(t=+this.ingreso.ingreso)=>{this.ingresoSrvc.getDetalle(t,{ingreso:t}).subscribe(t=>{t&&(this.detallesIngreso=t,this.updateTableDataSource())})},this.getDetalleIngreso=(t=+this.ingreso.ingreso,e)=>{this.ingresoSrvc.getDetalle(t,{ingreso_detalle:e}).subscribe(t=>{t&&(this.detalleIngreso={ingreso_detalle:t[0].ingreso_detalle,ingreso:t[0].ingreso,articulo:t[0].articulo.articulo,cantidad:+t[0].cantidad,precio_unitario:+t[0].precio_unitario,precio_total:+t[0].precio_total,presentacion:t[0].presentacion.presentacion},this.setPresentaciones(),this.txtArticuloSelected=t[0].articulo,this.showDetalleIngresoForm=!0)})},this.onSubmitDetail=()=>{this.bloqueoBotones=!0,this.detalleIngreso.ingreso=this.ingreso.ingreso,this.detalleIngreso.precio_total=+this.detalleIngreso.cantidad*+this.detalleIngreso.precio_unitario,+this.detalleIngreso.cantidad<1&&(this.detalleIngreso.cantidad=1),this.ingresoSrvc.saveDetalle(this.detalleIngreso).subscribe(t=>{t&&(this.loadDetalleIngreso(),this.resetDetalleIngreso()),this.bloqueoBotones=!1})},this.agregaADetalle=()=>{var t,e=this.detallesIngreso.findIndex(t=>+t.articulo==+this.detalleIngreso.articulo);e>-1&&this.detallesIngreso.splice(e,1),t=this.articulos.filter(t=>+t.articulo==this.detalleIngreso.articulo),this.detalleIngreso.presentacion=t[0].presentacion_reporte,+this.detalleIngreso.cantidad<1&&(this.detalleIngreso.cantidad=1),this.detallesIngreso.push(this.detalleIngreso),this.resetDetalleIngreso(),this.updateTableDataSource()},this.addToDetail=()=>{this.detalleIngreso.cantidad>0?this.produccion||this.detalleIngreso.cantidad_utilizada>0?this.agregaADetalle():this.snackBar.open("ERROR: La cantidad a utilizar debe ser mayor a 0","Egreso",{duration:3e3}):this.snackBar.open("ERROR: La cantidad debe ser mayor a 0","Egreso",{duration:3e3})},this.editFromDetail=t=>{var e=this.detallesIngreso.filter(e=>+e.articulo==+t)[0];this.detalleIngreso={ingreso_detalle:e.ingreso_detalle,ingreso:e.ingreso,articulo:e.articulo,cantidad:+e.cantidad<1?1:e.cantidad,precio_unitario:e.precio_unitario,precio_total:e.precio_total,presentacion:e.presentacion,cantidad_utilizada:e.cantidad_utilizada},this.setPresentaciones(),this.txtArticuloSelected=this.articulos.filter(t=>+t.articulo==this.detalleIngreso.articulo)[0]},this.getDescripcionArticulo=t=>this.articulos.find(e=>+e.articulo==+t).descripcion||"",this.getDescripcionPresentacion=t=>this.presentaciones.find(e=>+e.presentacion==+t).descripcion||"",this.updateTableDataSource=()=>{this.dataSource=new p.k(this.detallesIngreso),this.dataSource.filterPredicate=(t,e)=>t.articulo.descripcion.toLowerCase().includes(e)},this.eliminarArticulo=t=>{this.detallesIngreso.splice(this.detallesIngreso.findIndex(e=>e.ingreso_detalle===t.ingreso_detalle),1),this.updateTableDataSource()},this.filtrarArticulos=t=>{if(t&&"string"==typeof t){const e=t.toLowerCase();this.filteredArticulos=this.articulos.filter(t=>t.descripcion.toLowerCase().includes(e))}else this.filteredArticulos=this.articulos},this.displayArticulo=t=>{if(t)return this.detalleIngreso.articulo=t.articulo,t.descripcion},this.filtrarProveedores=t=>{if(t&&"string"==typeof t){const e=t.toLowerCase();this.filteredProveedores=this.proveedores.filter(t=>t.razon_social.toLowerCase().includes(e)||t.nit.toLowerCase().includes(e))}else this.filteredProveedores=this.proveedores},this.displayProveedor=t=>{if(t)return this.ingreso.proveedor=t.proveedor,`(${t.nit}) ${t.razon_social}`},this.setPresentaciones=()=>{this.fltrPresentaciones=[];const t=this.articulos.findIndex(t=>+t.articulo==+this.detalleIngreso.articulo),e=this.articulos[t];this.fltrPresentaciones=this.presentaciones.filter(t=>+t.medida.medida==+e.presentacion.medida)},this.setProveedor=t=>this.txtProveedorSelected=this.proveedores.find(e=>+e.proveedor===t),this.applyFilter=t=>{this.dataSource.filter=t.toLocaleLowerCase()},this.resetDocumento=()=>this.documento={documento:null,ingreso:null,documento_tipo:null,serie:null,numero:null,fecha:null,tipo_compra_venta:null,enviado:0},this.setDocumentoIngreso=t=>{this.documento={documento:+t.documento,ingreso:+t.ingreso,documento_tipo:t.documento_tipo.documento_tipo,serie:t.serie,numero:t.numero,fecha:t.fecha,tipo_compra_venta:t.tipo_compra_venta.tipo_compra_venta,enviado:t.enviado}},this.loadDocumento=(t=this.ingreso.ingreso||null)=>{t&&this.ingresoSrvc.getDocumento({ingreso:t}).subscribe(t=>{t&&t.length>0?this.setDocumentoIngreso(t[0]):this.resetDocumento()})},this.submitDocumento=()=>{this.documento.ingreso=this.ingreso.ingreso,this.ingresoSrvc.saveDocumento(this.documento).subscribe(t=>{t.exito?(this.setDocumentoIngreso(t.documento),this.snackBar.open("Documento guardado con \xe9xito.","Ingreso",{duration:3e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Ingreso",{duration:7e3})})},this.enviarAConta=()=>{var t;+(null===(t=this.documento)||void 0===t?void 0:t.documento)>0&&this.dialog.open(L.a,{maxWidth:"400px",data:new L.b("Env\xedo a contabilidad","Una vez enviado a contabilidad no podr\xe1 modificar el ingreso ni el documento. \xbfDesea continuar?","S\xed","No")}).afterClosed().subscribe(t=>{t&&this.ingresoSrvc.enviarDocumentoAConta(this.documento.documento).subscribe(t=>{t.exito?(this.documento=t.documento,this.snackBar.open("Documento enviado a contabilidad.","Ingreso",{duration:3e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Ingreso",{duration:7e3})})})}}ngOnInit(){this.esMovil=this.ls.get(E.a.usrTokenVar).enmovil||!1,this.resetIngreso(),this.loadTiposMovimiento(),this.loadProveedores(),this.loadBodegas(),this.loadArticulos(),this.loadPresentaciones(),this.loadDocumentosTipo(),this.loadTiposCompraVenta(),this.bodega||(this.displayedColumns=["cantidad_utilizada","articulo","presentacion","cantidad","deleteItem"]),this.produccion&&(this.displayedColumns=["articulo","presentacion","cantidad","deleteItem"])}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(M.b),B.Nb(v.b),B.Nb(R.a),B.Nb(U),B.Nb(W.a),B.Nb(V.a),B.Nb(K.a),B.Nb(Q.a),B.Nb(X.a),B.Nb(J.a),B.Nb(Z.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-form-ingreso"]],inputs:{ingreso:"ingreso",saveToDB:"saveToDB",bodega:"bodega",produccion:"produccion"},outputs:{ingresoSavedEv:"ingresoSavedEv"},decls:13,vars:7,consts:[["label","Ingreso"],[1,"mat-elevation-z4","fullWidth"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],["label","Documento",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmIngreso","ngForm"],["class","fullWidth",4,"ngIf"],[1,"fullWidth"],["matInput","","type","date","placeholder","Fecha","name","fecha","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Comentarios","name","comentario",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent","class","btnAccion",3,"disabled",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["name","tipo_movimiento","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["name","bodega","required","",3,"ngModel","ngModelChange"],["name","bodega_origen",3,"ngModel","ngModelChange"],["type","button","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["type","button","mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["type","text","placeholder","Proveedor","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith"],["autoProveedores","matAutocomplete"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",3,"click"],["matInput","","placeholder","Buscar",3,"keyup"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleIngreso","ngForm"],["type","text","placeholder","Art\xedculo","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith","optionSelected"],["autoArticulos","matAutocomplete"],["matInput","","placeholder","Cantidad","name","cantidad","type","number","step","0.01","min","1","required","",3,"ngModel","ngModelChange","change"],["mat-raised-button","","type","button","color","accent",3,"disabled","click",4,"ngIf"],["name","presentacion","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Cantidad a Utilizar","name","cantidad_utilizada","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Costo unitario Con IVA","name","precio_unitario","type","number","step","0.01","required","",3,"ngModel","ngModelChange","change"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","articulo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","presentacion"],["matColumnDef","cantidad_utilizada"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","cantidad"],["matColumnDef","costo_unitario"],["matColumnDef","costo_total"],["matColumnDef","deleteItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-header-row",""],["mat-row",""],["label","Documento"],["frmDocumento","ngForm"],["matInput","","type","text","placeholder","Serie","name","serie","minlength","1","maxlength","50","required","",3,"ngModel","disabled","ngModelChange"],["matInput","","type","text","placeholder","N\xfamero","name","numero","minlength","1","maxlength","50","required","",3,"ngModel","disabled","ngModelChange"],["matInput","","type","date","placeholder","Fecha","name","fecha","required","",3,"ngModel","disabled","ngModelChange"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"disabled","click",4,"ngIf"],["name","documento_tipo","required","",3,"ngModel","disabled","ngModelChange"],["name","tipo_compra_venta","required","",3,"ngModel","disabled","ngModelChange"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"]],template:function(t,e){1&t&&(B.Tb(0,"mat-tab-group"),B.Tb(1,"mat-tab",0),B.Tb(2,"mat-card",1),B.Tb(3,"mat-card-title"),B.Tb(4,"h4"),B.Fc(5),B.Dc(6,Y,3,0,"button",2),B.Dc(7,tt,3,0,"button",2),B.Sb(),B.Sb(),B.Tb(8,"mat-card-content"),B.Dc(9,gt,13,8,"form",3),B.Sb(),B.Sb(),B.Dc(10,ht,1,0,"hr",4),B.Dc(11,Qt,12,7,"mat-card",5),B.Sb(),B.Dc(12,ae,9,4,"mat-tab",6),B.Sb()),2&t&&(B.Cb(5),B.Hc(" Ingreso",e.ingreso.ingreso?" No. "+e.ingreso.ingreso:""," "),B.Cb(1),B.lc("ngIf",!e.showIngresoForm),B.Cb(1),B.lc("ngIf",e.showIngresoForm),B.Cb(2),B.lc("ngIf",e.showIngresoForm),B.Cb(1),B.lc("ngIf",e.ingreso.ingreso||!e.saveToDB),B.Cb(1),B.lc("ngIf",e.ingreso.ingreso||!e.saveToDB),B.Cb(1),B.lc("ngIf",+e.ingreso.ingreso>0))},directives:[h.b,h.a,b.a,b.h,o.m,b.c,S.a,l.a,a.r,a.l,a.m,d.b,u.b,a.c,a.p,a.k,a.n,d.f,m.a,o.l,j.m,d.g,F.c,F.a,a.o,p.j,p.c,p.e,p.b,p.g,p.i,p.d,p.a,p.f,p.h,a.g,a.f],pipes:[o.f],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}"]}),t})();const re=["lstIngreso"],se=["frmIngreso"];let le=(()=>{class t{constructor(t){this.ls=t,this.breakpoint=2,this.onWindowResize=t=>{this.breakpoint=t.target.innerWidth<=360?1:2},this.setIngreso=t=>{this.ingreso=t,this.frmIngreso.setProveedor(+this.ingreso.proveedor),this.frmIngreso.loadDetalleIngreso(+this.ingreso.ingreso),this.frmIngreso.resetDetalleIngreso(),this.frmIngreso.loadDocumento(this.ingreso.ingreso)},this.refreshIngresoList=()=>{this.lstIngresoComponent.loadIngresos()},this.ingreso={ingreso:null,tipo_movimiento:null,fecha:A().format(E.a.dbDateFormat),bodega:null,usuario:this.ls.get(E.a.usrTokenVar).idusr||0,comentario:null,proveedor:null}}ngOnInit(){this.breakpoint=window.innerWidth<=360?1:2}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(R.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-ingreso"]],viewQuery:function(t,e){if(1&t&&(B.Kc(re,1),B.Kc(se,1)),2&t){let t;B.sc(t=B.cc())&&(e.lstIngresoComponent=t.first),B.sc(t=B.cc())&&(e.frmIngreso=t.first)}},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getIngresoEv"],["lstIngreso",""],[1,"col","m7","s12"],[3,"ingreso","ingresoSavedEv"],["frmIngreso",""]],template:function(t,e){1&t&&(B.Tb(0,"div",0),B.Tb(1,"div",1),B.Tb(2,"app-lista-ingreso",2,3),B.bc("getIngresoEv",function(t){return e.setIngreso(t)}),B.Sb(),B.Sb(),B.Tb(4,"div",4),B.Tb(5,"app-form-ingreso",5,6),B.bc("ingresoSavedEv",function(){return e.refreshIngresoList()}),B.Sb(),B.Sb(),B.Sb()),2&t&&(B.Cb(5),B.lc("ingreso",e.ingreso))},directives:[q,ce],styles:[""]}),t})(),de=(()=>{class t{constructor(t){this.http=t,this.egresoUrl="egreso",this.srvcErrHndl=new $.a}get(t={}){return this.http.get(`${E.a.urlWms}/${this.egresoUrl}/buscar_egreso?${N.stringify(t)}`).pipe(Object(H.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}save(t){return this.http.post(`${E.a.urlWms}/${this.egresoUrl}/guardar${+t.egreso>0?"/"+t.egreso:""}`,t).pipe(Object(H.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}getDetalle(t,e={}){return this.http.get(`${E.a.urlWms}/${this.egresoUrl}/buscar_detalle/${t}?${N.stringify(e)}`).pipe(Object(H.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}saveDetalle(t){return this.http.post(`${E.a.urlWms}/${this.egresoUrl}/guardar_detalle/${t.egreso}${+t.egreso_detalle>0?"/"+t.egreso_detalle:""}`,t).pipe(Object(H.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(B.Xb(n.b))},t.\u0275prov=B.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const ue=function(){return{standalone:!0}};function be(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",6),B.bc("input",function(){return B.xc(t),B.fc().applyFilter()})("ngModelChange",function(e){return B.xc(t),B.fc().txtFiltro=e}),B.Sb()}if(2&t){const t=B.fc();B.lc("matKeyboard",t.keyboardLayout)("ngModel",t.txtFiltro)("ngModelOptions",B.nc(3,ue))}}function ge(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",7),B.bc("keyup",function(){return B.xc(t),B.fc().applyFilter()})("ngModelChange",function(e){return B.xc(t),B.fc().txtFiltro=e}),B.Sb()}if(2&t){const t=B.fc();B.lc("ngModel",t.txtFiltro)("ngModelOptions",B.nc(2,ue))}}function he(t,e){if(1&t&&(B.Tb(0,"span",10),B.Fc(1),B.Sb()),2&t){const t=B.fc().$implicit;B.Cb(1),B.Hc("Comanda: #",t.idcomandafox,"")}}function pe(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-list-item",8),B.bc("click",function(){B.xc(t);const i=e.$implicit;return B.fc().getEgreso(i)}),B.Tb(1,"mat-icon",9),B.Fc(2,"trending_down"),B.Sb(),B.Tb(3,"h5",10),B.Fc(4),B.Sb(),B.Ob(5,"br"),B.Tb(6,"p",10),B.Fc(7),B.gc(8,"date"),B.Ob(9,"br"),B.Fc(10),B.Ob(11,"br"),B.Sb(),B.Dc(12,he,2,1,"span",11),B.Sb()}if(2&t){const t=e.$implicit;B.Cb(4),B.Hc("No. ",t.egreso,""),B.Cb(3),B.Hc(" Fecha: ",B.ic(8,4,t.fecha,"dd/MM/yyyy"),""),B.Cb(3),B.Hc(" Bodega: ",t.bodega.descripcion,""),B.Cb(2),B.lc("ngIf",!!t.idcomandafox)}}let me=(()=>{class t{constructor(t,e){this.egresoSrvc=t,this.ls=e,this.getEgresoEv=new B.o,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.keyboardLayout=E.a.IDIOMA_TECLADO,this.esMovil=!1,this.loadEgresos=()=>{this.egresoSrvc.get().subscribe(t=>{t&&t.length>0&&(this.lstEgresos=t,this.applyFilter())})},this.getEgreso=t=>{this.getEgresoEv.emit({egreso:t.egreso,tipo_movimiento:t.tipo_movimiento.tipo_movimiento,bodega:t.bodega.bodega,fecha:t.fecha,usuario:t.usuario.usuario,estatus_movimiento:t.estatus_movimiento||1,traslado:t.traslado||0,idcomandafox:t.idcomandafox})},this.pageChange=t=>{this.pageSize=t.pageSize,this.pageIndex=t.pageIndex,this.applyFilter()}}ngOnInit(){this.esMovil=this.ls.get(E.a.usrTokenVar).enmovil||!1,this.loadEgresos()}applyFilter(){if(this.txtFiltro.length>0){const t=Object(E.b)(this.lstEgresos,this.txtFiltro);this.length=t.length,this.lstEgresosPaged=Object(E.e)(t,this.pageSize,this.pageIndex+1)}else this.length=this.lstEgresos.length,this.lstEgresosPaged=Object(E.e)(this.lstEgresos,this.pageSize,this.pageIndex+1)}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(de),B.Nb(R.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-lista-egreso"]],outputs:{getEgresoEv:"getEgresoEv"},decls:8,vars:6,consts:[[1,"mat-elevation-z4","fullWidth"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"matKeyboard","ngModel","ngModelOptions","input","ngModelChange",4,"ngIf"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["matInput","","placeholder","Buscar...",3,"matKeyboard","ngModel","ngModelOptions","input","ngModelChange"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[3,"click"],["mat-list-icon",""],["mat-line",""],["mat-line","",4,"ngIf"]],template:function(t,e){1&t&&(B.Tb(0,"mat-card",0),B.Tb(1,"mat-card-content"),B.Tb(2,"mat-form-field",1),B.Dc(3,be,1,4,"input",2),B.Dc(4,ge,1,3,"input",3),B.Sb(),B.Tb(5,"mat-nav-list"),B.Dc(6,pe,13,7,"mat-list-item",4),B.Sb(),B.Tb(7,"mat-paginator",5),B.bc("page",function(t){return e.pageChange(t)}),B.Sb(),B.Sb(),B.Sb()),2&t&&(B.Cb(3),B.lc("ngIf",!e.esMovil),B.Cb(1),B.lc("ngIf",e.esMovil),B.Cb(2),B.lc("ngForOf",e.lstEgresosPaged),B.Cb(1),B.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[b.a,b.c,d.b,o.m,s.e,o.l,x.a,u.b,k.a,a.c,a.k,a.n,s.c,l.a,s.b,j.j],pipes:[o.e],styles:[".fullWidth[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%!important}"]}),t})(),fe=(()=>{class t{constructor(t){this.http=t,this.conversorUrl="conversor",this.srvcErrHndl=new $.a}transformar(t){return this.http.post(`${E.a.urlWms}/${this.conversorUrl}/transformar`,t).pipe(Object(H.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}producir(t){return this.http.post(`${E.a.urlWms}/${this.conversorUrl}/producir`,t).pipe(Object(H.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(B.Xb(n.b))},t.\u0275prov=B.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Se(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",5),B.bc("click",function(){return B.xc(t),B.fc().showEgresoForm=!0}),B.Tb(1,"mat-icon",6),B.Fc(2,"expand_more"),B.Sb(),B.Sb()}}function ve(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",5),B.bc("click",function(){return B.xc(t),B.fc().showEgresoForm=!1}),B.Tb(1,"mat-icon",6),B.Fc(2,"expand_less"),B.Sb(),B.Sb()}}function Ce(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.tipo_movimiento),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Te(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",10),B.Tb(1,"mat-label"),B.Fc(2,"Tipo de movimiento"),B.Sb(),B.Tb(3,"mat-select",19),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).egreso.tipo_movimiento=e}),B.Dc(4,Ce,2,2,"mat-option",13),B.Sb(),B.Sb()}if(2&t){const t=B.fc(2);B.Cb(3),B.lc("ngModel",t.egreso.tipo_movimiento),B.Cb(1),B.lc("ngForOf",t.tiposMovimiento)}}function _e(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.bodega),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function xe(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-checkbox",21),B.bc("ngModelChange",function(e){return B.xc(t),+(B.fc(2).egreso.traslado=e)}),B.Fc(1,"\xbfEs traslado entre bodegas de la misma sede? "),B.Sb()}if(2&t){const t=B.fc(2);B.lc("ngModel",+t.egreso.traslado)}}function Me(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.bodega),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Ie(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",10),B.Tb(1,"mat-label"),B.Fc(2,"Bodega destino"),B.Sb(),B.Tb(3,"mat-select",22),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).egreso.bodega_destino=e}),B.Dc(4,Me,2,2,"mat-option",13),B.Sb(),B.Sb()}if(2&t){const t=B.fc(2);B.Cb(3),B.lc("ngModel",t.egreso.bodega_destino)("required",1==+t.egreso.traslado),B.Cb(1),B.lc("ngForOf",t.bodegas)}}function De(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.tipo_movimiento),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Fe(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",10),B.Tb(1,"mat-label"),B.Fc(2,"Tipo de movimiento destino"),B.Sb(),B.Tb(3,"mat-select",23),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).egreso.tipo_movimiento_destino=e}),B.Dc(4,De,2,2,"mat-option",13),B.Sb(),B.Sb()}if(2&t){const t=B.fc(2);B.Cb(3),B.lc("ngModel",t.egreso.tipo_movimiento_destino)("required",1==+t.egreso.traslado),B.Cb(1),B.lc("ngForOf",t.tiposMovimientoIngreso)}}function ye(t,e){if(1&t&&(B.Tb(0,"span"),B.Ob(1,"br"),B.Tb(2,"strong"),B.Fc(3),B.Sb(),B.Sb()),2&t){const t=B.fc(2);B.Cb(3),B.Hc("Comanda: #",t.egreso.idcomandafox,"")}}const ke=function(){return[2,3]};function Oe(t,e){if(1&t&&(B.Tb(0,"button",24),B.Fc(1," Guardar "),B.Sb()),2&t){B.fc();const t=B.tc(1),e=B.fc();B.lc("disabled",!t.form.valid||B.nc(1,ke).indexOf(+e.egreso.estatus_movimiento)>=0||e.bloqueoBotones)}}function we(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",25),B.bc("click",function(){return B.xc(t),B.fc(2).confirmarEgreso()}),B.Fc(1," Confirmar "),B.Sb()}if(2&t){B.fc();const t=B.tc(1),e=B.fc();B.lc("disabled",!t.form.valid||B.nc(1,ke).indexOf(+e.egreso.estatus_movimiento)>=0)}}function Ee(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",26),B.bc("click",function(){return B.xc(t),B.fc(2).resetEgreso()}),B.Fc(1," Nuevo "),B.Sb()}}function Ae(t,e){if(1&t){const t=B.Ub();B.Tb(0,"form",7,8),B.bc("ngSubmit",function(){B.xc(t);const e=B.tc(1),i=B.fc();return e.form.valid&&i.onSubmit()}),B.Dc(2,Te,5,2,"mat-form-field",9),B.Tb(3,"mat-form-field",10),B.Tb(4,"input",11),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().egreso.fecha=e}),B.Sb(),B.Sb(),B.Tb(5,"mat-form-field",10),B.Tb(6,"mat-label"),B.Fc(7,"Bodega"),B.Sb(),B.Tb(8,"mat-select",12),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().egreso.bodega=e}),B.Dc(9,_e,2,2,"mat-option",13),B.Sb(),B.Sb(),B.Dc(10,xe,2,1,"mat-checkbox",14),B.Dc(11,Ie,5,3,"mat-form-field",9),B.Dc(12,Fe,5,3,"mat-form-field",9),B.Dc(13,ye,4,1,"span",3),B.Tb(14,"div",15),B.Dc(15,Oe,2,2,"button",16),B.Dc(16,we,2,2,"button",17),B.Dc(17,Ee,2,0,"button",18),B.Sb(),B.Sb()}if(2&t){const t=B.fc();B.Cb(2),B.lc("ngIf",t.saveToDB),B.Cb(2),B.lc("ngModel",t.egreso.fecha),B.Cb(4),B.lc("ngModel",t.egreso.bodega),B.Cb(1),B.lc("ngForOf",t.bodegas),B.Cb(1),B.lc("ngIf",t.saveToDB),B.Cb(1),B.lc("ngIf",1==+t.egreso.traslado&&B.nc(11,ke).indexOf(+t.egreso.estatus_movimiento)<0),B.Cb(1),B.lc("ngIf",1==+t.egreso.traslado&&B.nc(12,ke).indexOf(+t.egreso.estatus_movimiento)<0),B.Cb(1),B.lc("ngIf",!!t.egreso.idcomandafox),B.Cb(2),B.lc("ngIf",t.saveToDB),B.Cb(1),B.lc("ngIf",t.egreso.egreso&&t.detallesEgreso.length>0),B.Cb(1),B.lc("ngIf",t.egreso.egreso)}}function Be(t,e){1&t&&B.Ob(0,"hr")}function Re(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",5),B.bc("click",function(){return B.xc(t),B.fc(2).showDetalleEgresoForm=!0}),B.Tb(1,"mat-icon",6),B.Fc(2,"expand_more"),B.Sb(),B.Sb()}}function $e(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",5),B.bc("click",function(){return B.xc(t),B.fc(2).showDetalleEgresoForm=!1}),B.Tb(1,"mat-icon",6),B.Fc(2,"expand_less"),B.Sb(),B.Sb()}}function He(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Pe(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.presentacion),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Ne(t,e){if(1&t&&(B.Tb(0,"button",24),B.Fc(1," Guardar "),B.Sb()),2&t){B.fc();const t=B.tc(1),e=B.fc(2);B.lc("disabled",!t.form.valid||B.nc(1,ke).indexOf(+e.egreso.estatus_movimiento)>=0||e.bloqueoBotones)}}function Ue(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",37),B.bc("click",function(){return B.xc(t),B.fc(3).addToDetail()}),B.Fc(1," Guardar "),B.Sb()}if(2&t){B.fc();const t=B.tc(1),e=B.fc(2);B.lc("disabled",!e.egreso.bodega||!t.form.valid||B.nc(1,ke).indexOf(+e.egreso.estatus_movimiento)>=0)}}function je(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",26),B.bc("click",function(){return B.xc(t),B.fc(3).resetDetalleEgreso()}),B.Fc(1," Nuevo "),B.Sb()}}const Ge=function(){return{standalone:!0}};function ze(t,e){if(1&t){const t=B.Ub();B.Tb(0,"form",7,30),B.bc("ngSubmit",function(){B.xc(t);const e=B.tc(1),i=B.fc(2);return e.form.valid&&i.onSubmitDetail()}),B.Tb(2,"mat-form-field",10),B.Tb(3,"mat-label"),B.Fc(4,"Art\xedculo"),B.Sb(),B.Tb(5,"input",31),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).txtArticuloSelected=e})("keyup",function(){B.xc(t);const e=B.fc(2);return e.filtrarArticulos(e.txtArticuloSelected)}),B.Sb(),B.Tb(6,"mat-autocomplete",32,33),B.bc("optionSelected",function(){return B.xc(t),B.fc(2).setPresentaciones()}),B.Dc(8,He,2,2,"mat-option",13),B.Sb(),B.Sb(),B.Tb(9,"mat-form-field",10),B.Tb(10,"mat-label"),B.Fc(11,"Presentaci\xf3n"),B.Sb(),B.Tb(12,"mat-select",34),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).detalleEgreso.presentacion=e}),B.Dc(13,Pe,2,2,"mat-option",13),B.Sb(),B.Sb(),B.Tb(14,"mat-form-field",10),B.Tb(15,"input",35),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).detalleEgreso.cantidad=e})("change",function(){B.xc(t);const e=B.fc(2);return e.detalleEgreso.precio_total=+e.detalleEgreso.precio_unitario*+e.detalleEgreso.cantidad}),B.Sb(),B.Sb(),B.Tb(16,"div",15),B.Dc(17,Ne,2,2,"button",16),B.Dc(18,Ue,2,2,"button",36),B.Dc(19,je,2,0,"button",18),B.Sb(),B.Sb()}if(2&t){const t=B.tc(7),e=B.fc(2);B.Cb(5),B.lc("ngModel",e.txtArticuloSelected)("ngModelOptions",B.nc(11,Ge))("matAutocomplete",t),B.Cb(1),B.lc("displayWith",e.displayArticulo),B.Cb(2),B.lc("ngForOf",e.filteredArticulos),B.Cb(4),B.lc("ngModel",e.detalleEgreso.presentacion),B.Cb(1),B.lc("ngForOf",e.fltrPresentaciones),B.Cb(2),B.lc("ngModel",e.detalleEgreso.cantidad),B.Cb(2),B.lc("ngIf",e.saveToDB),B.Cb(1),B.lc("ngIf",!e.saveToDB),B.Cb(1),B.lc("ngIf",e.detalleEgreso.egreso_detalle)}}function qe(t,e){1&t&&B.Ob(0,"hr")}function Le(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",38),B.bc("input",function(e){return B.xc(t),B.fc(2).applyFilter(e.target.value)}),B.Sb()}if(2&t){const t=B.fc(2);B.lc("matKeyboard",t.keyboardLayout)}}function We(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",39),B.bc("keyup",function(e){return B.xc(t),B.fc(2).applyFilter(e.target.value)}),B.Sb()}}function Ve(t,e){1&t&&(B.Tb(0,"th",53),B.Fc(1,"Art\xedculo"),B.Sb())}function Ke(t,e){if(1&t&&(B.Tb(0,"td",54),B.Fc(1),B.Sb()),2&t){const t=e.$implicit,i=B.fc(3);B.Cb(1),B.Hc(" ",i.saveToDB?t.articulo.descripcion:i.getDescripcionArticulo(t.articulo),"")}}function Qe(t,e){1&t&&(B.Tb(0,"th",53),B.Fc(1,"Presentaci\xf3n"),B.Sb())}function Xe(t,e){if(1&t&&(B.Tb(0,"td",54),B.Fc(1),B.Sb()),2&t){const t=e.$implicit,i=B.fc(3);B.Cb(1),B.Hc(" ",i.saveToDB?t.presentacion.descripcion:i.getDescripcionPresentacion(t.presentacion)," ")}}function Je(t,e){1&t&&(B.Tb(0,"th",55),B.Fc(1,"Cantidad"),B.Sb())}function Ze(t,e){if(1&t&&(B.Tb(0,"td",56),B.Fc(1),B.gc(2,"number"),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Gc(B.ic(2,1,t.cantidad,"1.2-2"))}}function Ye(t,e){1&t&&(B.Tb(0,"th",55),B.Fc(1,"Costo Unitario"),B.Sb())}function ti(t,e){if(1&t&&(B.Tb(0,"td",56),B.Fc(1),B.gc(2,"number"),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Hc("",B.ic(2,1,t.precio_unitario,"1.2-2")," ")}}function ei(t,e){1&t&&(B.Tb(0,"th",55),B.Fc(1,"Costo Total"),B.Sb())}function ii(t,e){if(1&t&&(B.Tb(0,"td",56),B.Fc(1),B.gc(2,"number"),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Gc(B.ic(2,1,t.precio_total,"1.2-2"))}}function oi(t,e){1&t&&(B.Tb(0,"th",53),B.Fc(1,"\xa0"),B.Sb())}function ni(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",25),B.bc("click",function(){B.xc(t);const e=B.fc().$implicit;return B.fc(3).getDetalleEgreso(e.egreso,e.egreso_detalle)}),B.Fc(1," Editar "),B.Sb()}if(2&t){const t=B.fc(4);B.lc("disabled",B.nc(1,ke).indexOf(+t.egreso.estatus_movimiento)>=0||t.bloqueoBotones)}}function ai(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",37),B.bc("click",function(){B.xc(t);const e=B.fc().$implicit;return B.fc(3).editFromDetail(e.articulo)}),B.Fc(1," Editar "),B.Sb()}if(2&t){const t=B.fc(4);B.lc("disabled",B.nc(1,ke).indexOf(+t.egreso.estatus_movimiento)>=0||t.bloqueoBotones)}}function ci(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",37),B.bc("click",function(){B.xc(t);const e=B.fc().$implicit;return B.fc(3).removeFromDetail(e.articulo)}),B.Fc(1," Eliminar "),B.Sb()}if(2&t){const t=B.fc(4);B.lc("disabled",B.nc(1,ke).indexOf(+t.egreso.estatus_movimiento)>=0||t.bloqueoBotones)}}function ri(t,e){if(1&t&&(B.Tb(0,"td",54),B.Dc(1,ni,2,2,"button",17),B.Dc(2,ai,2,2,"button",36),B.Dc(3,ci,2,2,"button",36),B.Sb()),2&t){const t=B.fc(3);B.Cb(1),B.lc("ngIf",t.saveToDB),B.Cb(1),B.lc("ngIf",!t.saveToDB),B.Cb(1),B.lc("ngIf",!t.saveToDB)}}function si(t,e){1&t&&B.Ob(0,"tr",57)}function li(t,e){1&t&&B.Ob(0,"tr",58)}function di(t,e){if(1&t&&(B.Tb(0,"table",40),B.Rb(1,41),B.Dc(2,Ve,2,0,"th",42),B.Dc(3,Ke,2,1,"td",43),B.Qb(),B.Rb(4,44),B.Dc(5,Qe,2,0,"th",42),B.Dc(6,Xe,2,1,"td",43),B.Qb(),B.Rb(7,45),B.Dc(8,Je,2,0,"th",46),B.Dc(9,Ze,3,4,"td",47),B.Qb(),B.Rb(10,48),B.Dc(11,Ye,2,0,"th",46),B.Dc(12,ti,3,4,"td",47),B.Qb(),B.Rb(13,49),B.Dc(14,ei,2,0,"th",46),B.Dc(15,ii,3,4,"td",47),B.Qb(),B.Rb(16,50),B.Dc(17,oi,2,0,"th",42),B.Dc(18,ri,4,3,"td",43),B.Qb(),B.Dc(19,si,1,0,"tr",51),B.Dc(20,li,1,0,"tr",52),B.Sb()),2&t){const t=B.fc(2);B.lc("dataSource",t.dataSource),B.Cb(19),B.lc("matHeaderRowDef",t.displayedColumns),B.Cb(1),B.lc("matRowDefColumns",t.displayedColumns)}}function ui(t,e){if(1&t&&(B.Tb(0,"mat-card",0),B.Tb(1,"mat-card-title"),B.Tb(2,"h4"),B.Fc(3),B.Dc(4,Re,3,0,"button",1),B.Dc(5,$e,3,0,"button",1),B.Sb(),B.Sb(),B.Tb(6,"mat-card-content"),B.Dc(7,ze,20,12,"form",2),B.Dc(8,qe,1,0,"hr",3),B.Tb(9,"mat-form-field",10),B.Dc(10,Le,1,1,"input",27),B.Dc(11,We,1,0,"input",28),B.Sb(),B.Dc(12,di,21,3,"table",29),B.Sb(),B.Sb()),2&t){const t=B.fc();B.Cb(3),B.Ic(" Detalle del egreso ",t.saveToDB?"No.":""," ",t.egreso.egreso," "),B.Cb(1),B.lc("ngIf",!t.showDetalleEgresoForm),B.Cb(1),B.lc("ngIf",t.showDetalleEgresoForm),B.Cb(2),B.lc("ngIf",t.showDetalleEgresoForm),B.Cb(1),B.lc("ngIf",t.detallesEgreso.length>0),B.Cb(2),B.lc("ngIf",!t.esMovil),B.Cb(1),B.lc("ngIf",t.esMovil),B.Cb(1),B.lc("ngIf",t.detallesEgreso.length>0)}}function bi(t,e){1&t&&B.Ob(0,"hr")}function gi(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",5),B.bc("click",function(){return B.xc(t),B.fc(2).showDetalleEgresoForm=!0}),B.Tb(1,"mat-icon",6),B.Fc(2,"expand_more"),B.Sb(),B.Sb()}}function hi(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",5),B.bc("click",function(){return B.xc(t),B.fc(2).showDetalleEgresoForm=!1}),B.Tb(1,"mat-icon",6),B.Fc(2,"expand_less"),B.Sb(),B.Sb()}}function pi(t,e){if(1&t&&(B.Tb(0,"mat-option",20),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function mi(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",37),B.bc("click",function(){return B.xc(t),B.fc(3).addToDetailMerma()}),B.Fc(1," Guardar "),B.Sb()}if(2&t){B.fc();const t=B.tc(1),e=B.fc(2);B.lc("disabled",!e.detalleMerma.articulo||!t.form.valid||B.nc(1,ke).indexOf(+e.egreso.estatus_movimiento)>=0)}}function fi(t,e){if(1&t){const t=B.Ub();B.Tb(0,"form",7,59),B.bc("ngSubmit",function(){B.xc(t);const e=B.tc(1),i=B.fc(2);return e.form.valid&&i.onSubmitDetail()}),B.Tb(2,"mat-form-field",10),B.Tb(3,"mat-label"),B.Fc(4,"Art\xedculo"),B.Sb(),B.Tb(5,"input",31),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).txtArticuloSelectedM=e})("keyup",function(){B.xc(t);const e=B.fc(2);return e.filtrarArticulos(e.txtArticuloSelectedM)}),B.Sb(),B.Tb(6,"mat-autocomplete",32,33),B.bc("optionSelected",function(){return B.xc(t),B.fc(2).setPresentacionesMerma()}),B.Dc(8,pi,2,2,"mat-option",13),B.Sb(),B.Sb(),B.Tb(9,"mat-form-field",10),B.Tb(10,"input",60),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).detalleMerma.cantidad_utilizada=e}),B.Sb(),B.Sb(),B.Tb(11,"mat-form-field",10),B.Tb(12,"input",61),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).detalleMerma.cantidad=e}),B.Sb(),B.Sb(),B.Tb(13,"div",15),B.Dc(14,mi,2,2,"button",36),B.Sb(),B.Sb()}if(2&t){const t=B.tc(7),e=B.fc(2);B.Cb(5),B.lc("ngModel",e.txtArticuloSelectedM)("ngModelOptions",B.nc(8,Ge))("matAutocomplete",t),B.Cb(1),B.lc("displayWith",e.displayArticuloMerma),B.Cb(2),B.lc("ngForOf",e.filteredArticulos),B.Cb(2),B.lc("ngModel",e.detalleMerma.cantidad_utilizada),B.Cb(2),B.lc("ngModel",e.detalleMerma.cantidad),B.Cb(2),B.lc("ngIf",!e.saveToDB)}}function Si(t,e){1&t&&B.Ob(0,"hr")}function vi(t,e){1&t&&(B.Tb(0,"th",53),B.Fc(1,"Art\xedculo"),B.Sb())}function Ci(t,e){if(1&t&&(B.Tb(0,"td",54),B.Fc(1),B.Sb()),2&t){const t=e.$implicit,i=B.fc(3);B.Cb(1),B.Hc(" ",i.saveToDB?t.articulo.descripcion:i.getDescripcionArticulo(t.articulo),"")}}function Ti(t,e){1&t&&(B.Tb(0,"th",53),B.Fc(1,"Presentaci\xf3n"),B.Sb())}function _i(t,e){if(1&t&&(B.Tb(0,"td",54),B.Fc(1),B.Sb()),2&t){const t=e.$implicit,i=B.fc(3);B.Cb(1),B.Hc(" ",i.saveToDB?t.presentacion.descripcion:i.getDescripcionPresentacion(t.presentacion)," ")}}function xi(t,e){1&t&&(B.Tb(0,"th",55),B.Fc(1,"Cantidad a Utilizar"),B.Sb())}function Mi(t,e){if(1&t&&(B.Tb(0,"td",56),B.Fc(1),B.gc(2,"number"),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Gc(B.ic(2,1,t.cantidad_utilizada,"1.2-2"))}}function Ii(t,e){1&t&&(B.Tb(0,"th",55),B.Fc(1,"Cantidad"),B.Sb())}function Di(t,e){if(1&t&&(B.Tb(0,"td",56),B.Fc(1),B.gc(2,"number"),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Gc(B.ic(2,1,t.cantidad,"1.2-2"))}}function Fi(t,e){1&t&&(B.Tb(0,"th",53),B.Fc(1,"\xa0"),B.Sb())}function yi(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",25),B.bc("click",function(){B.xc(t);const e=B.fc().$implicit;return B.fc(3).getDetalleEgreso(e.egreso,e.egreso_detalle)}),B.Fc(1," Editar "),B.Sb()}if(2&t){const t=B.fc(4);B.lc("disabled",B.nc(1,ke).indexOf(+t.egreso.estatus_movimiento)>=0||t.bloqueoBotones)}}function ki(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",37),B.bc("click",function(){B.xc(t);const e=B.fc().$implicit;return B.fc(3).editFromDetailMerma(e.articulo)}),B.Fc(1," Editar "),B.Sb()}if(2&t){const t=B.fc(4);B.lc("disabled",B.nc(1,ke).indexOf(+t.egreso.estatus_movimiento)>=0||t.bloqueoBotones)}}function Oi(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",37),B.bc("click",function(){B.xc(t);const e=B.fc().$implicit;return B.fc(3).removeFromDetailMerma(e.articulo)}),B.Fc(1," Eliminar "),B.Sb()}if(2&t){const t=B.fc(4);B.lc("disabled",B.nc(1,ke).indexOf(+t.egreso.estatus_movimiento)>=0||t.bloqueoBotones)}}function wi(t,e){if(1&t&&(B.Tb(0,"td",54),B.Dc(1,yi,2,2,"button",17),B.Dc(2,ki,2,2,"button",36),B.Dc(3,Oi,2,2,"button",36),B.Sb()),2&t){const t=B.fc(3);B.Cb(1),B.lc("ngIf",t.saveToDB),B.Cb(1),B.lc("ngIf",!t.saveToDB),B.Cb(1),B.lc("ngIf",!t.saveToDB)}}function Ei(t,e){1&t&&B.Ob(0,"tr",57)}function Ai(t,e){1&t&&B.Ob(0,"tr",58)}function Bi(t,e){if(1&t&&(B.Tb(0,"table",40),B.Rb(1,41),B.Dc(2,vi,2,0,"th",42),B.Dc(3,Ci,2,1,"td",43),B.Qb(),B.Rb(4,44),B.Dc(5,Ti,2,0,"th",42),B.Dc(6,_i,2,1,"td",43),B.Qb(),B.Rb(7,62),B.Dc(8,xi,2,0,"th",46),B.Dc(9,Mi,3,4,"td",47),B.Qb(),B.Rb(10,45),B.Dc(11,Ii,2,0,"th",46),B.Dc(12,Di,3,4,"td",47),B.Qb(),B.Rb(13,50),B.Dc(14,Fi,2,0,"th",42),B.Dc(15,wi,4,3,"td",43),B.Qb(),B.Dc(16,Ei,1,0,"tr",51),B.Dc(17,Ai,1,0,"tr",52),B.Sb()),2&t){const t=B.fc(2);B.lc("dataSource",t.dataSourceM),B.Cb(16),B.lc("matHeaderRowDef",t.displayedColumnsM),B.Cb(1),B.lc("matRowDefColumns",t.displayedColumnsM)}}function Ri(t,e){if(1&t&&(B.Tb(0,"mat-card",0),B.Tb(1,"mat-card-title"),B.Tb(2,"h4"),B.Fc(3),B.Dc(4,gi,3,0,"button",1),B.Dc(5,hi,3,0,"button",1),B.Sb(),B.Sb(),B.Tb(6,"mat-card-content"),B.Dc(7,fi,15,9,"form",2),B.Dc(8,Si,1,0,"hr",3),B.Dc(9,Bi,18,3,"table",29),B.Sb(),B.Sb()),2&t){const t=B.fc();B.Cb(3),B.Ic(" Merma ",t.saveToDB?"No.":""," ",t.egreso.egreso," "),B.Cb(1),B.lc("ngIf",!t.showDetalleEgresoForm),B.Cb(1),B.lc("ngIf",t.showDetalleEgresoForm),B.Cb(2),B.lc("ngIf",t.showDetalleEgresoForm),B.Cb(1),B.lc("ngIf",t.detallesMerma.length>0),B.Cb(1),B.lc("ngIf",t.detallesMerma.length>0)}}let $i=(()=>{class t{constructor(t,e,i,o,n,a,c,r,s){this.snackBar=t,this.ls=e,this.egresoSrvc=i,this.tipoMovimientoSrvc=o,this.bodegaSrvc=n,this.articuloSrvc=a,this.proveedorSrvc=c,this.transformacionSrvc=r,this.presentacionSrvc=s,this.saveToDB=!0,this.egresoSavedEv=new B.o,this.showEgresoForm=!0,this.showDetalleEgresoForm=!0,this.detallesEgreso=[],this.detallesMerma=[],this.displayedColumns=["articulo","presentacion","cantidad","precio_unitario","precio_total","editItem"],this.displayedColumnsM=["cantidad_utilizada","articulo","presentacion","cantidad","editItem"],this.tiposMovimiento=[],this.tiposMovimientoIngreso=[],this.bodegas=[],this.articulos=[],this.filteredArticulos=[],this.proveedores=[],this.filteredProveedores=[],this.presentaciones=[],this.fltrPresentaciones=[],this.fltrPresentacionesMerma=[],this.keyboardLayout=E.a.IDIOMA_TECLADO,this.esMovil=!1,this.bloqueoBotones=!1,this.txtArticuloSelected=void 0,this.txtArticuloSelectedM=void 0,this.txtProveedorSelected=void 0,this.loadTiposMovimiento=(t=!0)=>{this.tipoMovimientoSrvc.get(t?{egreso:1}:{ingreso:1}).subscribe(e=>{e&&(t?this.tiposMovimiento=e:this.tiposMovimientoIngreso=e)})},this.loadBodegas=()=>{this.bodegaSrvc.get({sede:this.ls.get(E.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.bodegas=t)})},this.loadProveedores=()=>{this.proveedorSrvc.get().subscribe(t=>{t&&(this.proveedores=t)})},this.loadPresentaciones=()=>{this.presentacionSrvc.get().subscribe(t=>{t&&(this.presentaciones=t)})},this.resetEgreso=()=>{this.egreso={egreso:null,tipo_movimiento:null,bodega:null,fecha:A().format(E.a.dbDateFormat),usuario:this.ls.get(E.a.usrTokenVar).idusr||0,estatus_movimiento:1,traslado:0},this.resetDetalleEgreso(),this.updateTableDataSource(),this.resetDetalleMerma(),this.updateTableDataSourceM()},this.onSubmit=()=>{this.bloqueoBotones=!0,this.egresoSrvc.save(this.egreso).subscribe(t=>{t.exito&&(this.egresoSavedEv.emit(),this.resetEgreso(),this.egreso={egreso:t.egreso.egreso,tipo_movimiento:t.egreso.tipo_movimiento,fecha:t.egreso.fecha,bodega:t.egreso.bodega,creacion:t.egreso.creacion,usuario:t.egreso.usuario,estatus_movimiento:t.egreso.estatus_movimiento,traslado:t.egreso.traslado},this.loadDetalleEgreso(this.egreso.egreso)),this.bloqueoBotones=!1})},this.confirmarEgreso=()=>{this.egreso.estatus_movimiento=2,this.onSubmit()},this.loadArticulos=()=>{this.articuloSrvc.getArticulosIngreso().subscribe(t=>{t&&(this.articulos=t)})},this.resetDetalleEgreso=()=>{this.detalleEgreso={egreso_detalle:null,egreso:this.egreso.egreso?this.egreso.egreso:null,articulo:null,cantidad:null,precio_unitario:null,precio_total:null,presentacion:0},this.txtArticuloSelected=void 0},this.resetDetalleMerma=()=>{this.detalleMerma={egreso_detalle:null,egreso:this.egreso.egreso?this.egreso.egreso:null,articulo:null,cantidad:null,precio_unitario:null,precio_total:null,presentacion:0},this.txtArticuloSelectedM=void 0},this.loadDetalleEgreso=(t=+this.egreso.egreso)=>{this.egresoSrvc.getDetalle(t,{egreso:t}).subscribe(t=>{t&&(this.detallesEgreso=t,this.updateTableDataSource())})},this.getDetalleEgreso=(t=+this.egreso.egreso,e)=>{this.egresoSrvc.getDetalle(t,{egreso_detalle:e}).subscribe(t=>{t&&(this.detalleEgreso={egreso_detalle:t[0].egreso_detalle,egreso:t[0].egreso,articulo:t[0].articulo.articulo,cantidad:+t[0].cantidad,precio_unitario:+t[0].precio_unitario,precio_total:+t[0].precio_total,presentacion:t[0].presentacion.presentacion},this.setPresentaciones(),this.saveToDB||this.setPresentacionesMerma(),this.txtArticuloSelected=t[0].articulo,this.showDetalleEgresoForm=!0)})},this.onSubmitDetail=()=>{this.bloqueoBotones=!0,this.detalleEgreso.egreso=this.egreso.egreso,this.egresoSrvc.saveDetalle(this.detalleEgreso).subscribe(t=>{t.exito?(this.loadDetalleEgreso(),this.resetDetalleEgreso(),this.snackBar.open("Egreso guardado con \xe9xito...","Egreso",{duration:3e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Egreso",{duration:3e3}),this.bloqueoBotones=!1})},this.addToDetail=()=>{this.detalleEgreso.cantidad>0?(this.detallesEgreso.splice(this.detallesEgreso.findIndex(t=>+t.articulo==+this.detalleEgreso.articulo),1),this.detallesEgreso.push(this.detalleEgreso),this.resetDetalleEgreso(),this.updateTableDataSource()):this.snackBar.open("ERROR: La cantidad debe ser mayor a 0","Egreso",{duration:3e3})},this.addToDetailMerma=()=>{if(this.detalleMerma.cantidad>0&&this.detalleMerma.cantidad_utilizada>0){var t,e=this.detallesMerma.findIndex(t=>+t.articulo==+this.detalleMerma.articulo);e>-1&&this.detallesMerma.splice(e,1),t=this.articulos.filter(t=>+t.articulo==this.detalleMerma.articulo),this.detalleMerma.presentacion=t[0].presentacion_reporte,this.detallesMerma.push(this.detalleMerma),this.txtArticuloSelectedM=void 0,this.resetDetalleMerma(),this.updateTableDataSourceM()}else this.detalleMerma.cantidad<=0?this.snackBar.open("ERROR: La cantidad debe ser mayor a 0","Egreso",{duration:3e3}):this.detalleMerma.cantidad_utilizada<=0&&this.snackBar.open("ERROR: La cantidad a utilizar debe ser mayor a 0","Egreso",{duration:3e3})},this.editFromDetail=t=>{var e=this.detallesEgreso.filter(e=>+e.articulo==+t)[0];this.detalleEgreso={egreso_detalle:e.egreso_detalle,egreso:e.egreso_detalle,articulo:e.articulo,cantidad:e.cantidad,precio_unitario:e.precio_unitario,precio_total:e.precio_unitario,presentacion:e.presentacion},this.setPresentaciones(!0),this.txtArticuloSelected=this.articulos.filter(t=>+t.articulo==this.detalleEgreso.articulo)[0]},this.editFromDetailMerma=t=>{var e=this.detallesMerma.filter(e=>+e.articulo==+t)[0];this.detalleMerma={egreso_detalle:e.egreso_detalle,egreso:e.egreso_detalle,articulo:e.articulo,cantidad:e.cantidad,precio_unitario:e.precio_unitario,precio_total:e.precio_unitario,presentacion:e.presentacion,cantidad_utilizada:e.cantidad_utilizada},this.setPresentacionesMerma(),this.txtArticuloSelectedM=this.articulos.filter(t=>+t.articulo==this.detalleMerma.articulo)[0]},this.removeFromDetailMerma=t=>this.detallesMerma.splice(this.detallesMerma.findIndex(e=>+e.articulo==+t),1),this.removeFromDetail=t=>this.detallesEgreso.splice(this.detallesEgreso.findIndex(e=>+e.articulo==+t),1),this.getDescripcionArticulo=t=>this.articulos.find(e=>+e.articulo==+t).descripcion||"",this.getDescripcionPresentacion=t=>this.presentaciones.find(e=>+e.presentacion==+t).descripcion||"",this.updateTableDataSource=()=>{this.dataSource=new p.k(this.detallesEgreso),this.dataSource.filterPredicate=(t,e)=>t.articulo.descripcion.toLowerCase().includes(e)},this.updateTableDataSourceM=()=>{this.dataSourceM=new p.k(this.detallesMerma)},this.filtrarArticulos=t=>{if(t&&"string"==typeof t){const e=t.toLowerCase();this.filteredArticulos=this.articulos.filter(t=>t.descripcion.toLowerCase().includes(e))}else this.filteredArticulos=this.articulos},this.setPresentaciones=(t=!1)=>{this.fltrPresentaciones=[];const e=this.articulos.findIndex(t=>+t.articulo==+this.detalleEgreso.articulo),i=this.articulos[e];this.fltrPresentaciones=this.presentaciones.filter(t=>+t.medida.medida==+i.presentacion.medida),t||(this.detalleEgreso.presentacion=null)},this.setPresentacionesMerma=()=>{this.fltrPresentacionesMerma=[];const t=this.articulos.findIndex(t=>+t.articulo==+this.detalleMerma.articulo),e=this.articulos[t];this.fltrPresentacionesMerma=this.presentaciones.filter(t=>+t.medida.medida==+e.presentacion.medida)},this.displayArticulo=t=>{if(t)return this.detalleEgreso.articulo=t.articulo,t.descripcion},this.displayArticuloMerma=t=>{if(t)return this.detalleMerma.articulo=t.articulo,t.descripcion},this.filtrarProveedores=t=>{if(t&&"string"==typeof t){const e=t.toLowerCase();this.filteredProveedores=this.proveedores.filter(t=>t.razon_social.toLowerCase().includes(e)||t.nit.toLowerCase().includes(e))}else this.filteredProveedores=this.proveedores},this.displayProveedor=t=>{if(t)return this.egreso.proveedor=t.proveedor,`(${t.nit}) ${t.razon_social}`},this.applyFilter=t=>{this.dataSource.filter=t}}ngOnInit(){this.esMovil=this.ls.get(E.a.usrTokenVar).enmovil||!1,this.resetEgreso(),this.loadTiposMovimiento(),this.loadTiposMovimiento(!1),this.loadBodegas(),this.loadArticulos(),this.loadProveedores(),this.loadPresentaciones(),this.saveToDB||(this.displayedColumns=["articulo","presentacion","cantidad","editItem"])}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(v.b),B.Nb(R.a),B.Nb(de),B.Nb(V.a),B.Nb(K.a),B.Nb(Q.a),B.Nb(W.a),B.Nb(fe),B.Nb(X.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-form-egreso"]],inputs:{egreso:"egreso",saveToDB:"saveToDB"},outputs:{egresoSavedEv:"egresoSavedEv"},decls:12,vars:8,consts:[[1,"mat-elevation-z4","fullWidth"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmEgreso","ngForm"],["class","fullWidth",4,"ngIf"],[1,"fullWidth"],["matInput","","type","date","placeholder","Fecha","name","fecha","required","",3,"ngModel","ngModelChange"],["name","bodega","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","traslado","class","fullWidth",3,"ngModel","ngModelChange",4,"ngIf"],["align","end"],["mat-raised-button","","type","submit","color","accent","class","btnAccion",3,"disabled",4,"ngIf"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"disabled","click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["name","tipo_movimiento","required","",3,"ngModel","ngModelChange"],[3,"value"],["name","traslado",1,"fullWidth",3,"ngModel","ngModelChange"],["name","bodega_destino",3,"ngModel","required","ngModelChange"],["name","tipo_movimiento_destino",3,"ngModel","required","ngModelChange"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button","color","accent",3,"click"],["matInput","","placeholder","Buscar",3,"matKeyboard","input",4,"ngIf"],["matInput","","placeholder","Buscar",3,"keyup",4,"ngIf"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleEgreso","ngForm"],["type","text","placeholder","Art\xedculo","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith","optionSelected"],["autoArticulos","matAutocomplete"],["name","presentacion","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Cantidad","name","cantidad","type","number","step","0.01","required","",3,"ngModel","ngModelChange","change"],["mat-raised-button","","type","button","color","accent",3,"disabled","click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["matInput","","placeholder","Buscar",3,"matKeyboard","input"],["matInput","","placeholder","Buscar",3,"keyup"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","articulo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","presentacion"],["matColumnDef","cantidad"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","precio_unitario"],["matColumnDef","precio_total"],["matColumnDef","editItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-header-row",""],["mat-row",""],["frmMerma","ngForm"],["type","number","step","0.01","matInput","","placeholder","Cantidad a Utilizar","name","cantidad_utilizar","required","",3,"ngModel","ngModelChange"],["matInput","","placeholder","Cantidad","name","cantidad","type","number","step","0.01","required","",3,"ngModel","ngModelChange"],["matColumnDef","cantidad_utilizada"]],template:function(t,e){1&t&&(B.Tb(0,"mat-card",0),B.Tb(1,"mat-card-title"),B.Tb(2,"h4"),B.Fc(3),B.Dc(4,Se,3,0,"button",1),B.Dc(5,ve,3,0,"button",1),B.Sb(),B.Sb(),B.Tb(6,"mat-card-content"),B.Dc(7,Ae,18,13,"form",2),B.Sb(),B.Sb(),B.Dc(8,Be,1,0,"hr",3),B.Dc(9,ui,13,9,"mat-card",4),B.Dc(10,bi,1,0,"hr",3),B.Dc(11,Ri,10,7,"mat-card",4)),2&t&&(B.Cb(3),B.Hc(" Egreso",e.egreso.egreso?" No. "+e.egreso.egreso:""," "),B.Cb(1),B.lc("ngIf",!e.showEgresoForm),B.Cb(1),B.lc("ngIf",e.showEgresoForm),B.Cb(2),B.lc("ngIf",e.showEgresoForm),B.Cb(1),B.lc("ngIf",e.egreso.egreso||!e.saveToDB),B.Cb(1),B.lc("ngIf",e.egreso.egreso||!e.saveToDB),B.Cb(1),B.lc("ngIf",e.egreso.egreso||!e.saveToDB),B.Cb(1),B.lc("ngIf",!e.saveToDB))},directives:[b.a,b.h,o.m,b.c,S.a,l.a,a.r,a.l,a.m,d.b,u.b,a.c,a.p,a.k,a.n,d.f,m.a,o.l,j.m,f.a,F.c,F.a,a.o,k.a,p.j,p.c,p.e,p.b,p.g,p.i,p.d,p.a,p.f,p.h],pipes:[o.f],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}"]}),t})();const Hi=["lstEgreso"],Pi=["frmEgreso"];let Ni=(()=>{class t{constructor(t){this.ls=t,this.setEgreso=t=>{this.egreso=t,this.frmEgreso.resetDetalleEgreso(),this.frmEgreso.loadDetalleEgreso(+this.egreso.egreso)},this.refreshEgresoList=()=>{this.lstEgresoComponent.loadEgresos()},this.egreso={egreso:null,tipo_movimiento:null,bodega:null,fecha:A().format(E.a.dbDateFormat),usuario:this.ls.get(E.a.usrTokenVar).idusr||0,estatus_movimiento:1,traslado:0}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(R.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-egreso"]],viewQuery:function(t,e){if(1&t&&(B.Kc(Hi,1),B.Kc(Pi,1)),2&t){let t;B.sc(t=B.cc())&&(e.lstEgresoComponent=t.first),B.sc(t=B.cc())&&(e.frmEgreso=t.first)}},decls:7,vars:1,consts:[[1,"row"],[1,"col","m5","s12"],[3,"getEgresoEv"],["lstEgreso",""],[1,"col","m7","s12"],[3,"egreso","egresoSavedEv"],["frmEgreso",""]],template:function(t,e){1&t&&(B.Tb(0,"div",0),B.Tb(1,"div",1),B.Tb(2,"app-lista-egreso",2,3),B.bc("getEgresoEv",function(t){return e.setEgreso(t)}),B.Sb(),B.Sb(),B.Tb(4,"div",4),B.Tb(5,"app-form-egreso",5,6),B.bc("egresoSavedEv",function(){return e.refreshEgresoList()}),B.Sb(),B.Sb(),B.Sb()),2&t&&(B.Cb(5),B.lc("egreso",e.egreso))},directives:[me,$i],styles:[""]}),t})();function Ui(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",10),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().categoria.descripcion=e}),B.Sb()}if(2&t){const t=B.fc();B.lc("matKeyboard",t.keyboardLayout)("ngModel",t.categoria.descripcion)}}function ji(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",11),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().categoria.descripcion=e}),B.Sb()}if(2&t){const t=B.fc();B.lc("ngModel",t.categoria.descripcion)}}function Gi(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-chip",12),B.bc("click",function(){B.xc(t);const i=e.$implicit;return B.fc().categoria=i}),B.Fc(1),B.Sb()}if(2&t){const t=e.$implicit;B.Cb(1),B.Hc(" ",t.descripcion," ")}}let zi=(()=>{class t{constructor(t,e,i){this.snackBar=t,this.ls=e,this.articuloSrvc=i,this.categoriaGrupoSvd=new B.o,this.onChangeSubCategoriaEv=new B.o,this.categorias=[],this.categoriasGruposPadre=[],this.categoriasGrupos=[],this.editCategoriaMode=!1,this.editSubCategoriaMode=!1,this.showCategoriasForm=!0,this.keyboardLayout=E.a.IDIOMA_TECLADO,this.esMovil=!1,this.impresoras=[],this.resetCategoria=()=>{this.categoria={categoria:null,sede:this.ls.get(E.a.usrTokenVar).sede||0,descripcion:null},this.resetCategoriaGrupo(),this.editCategoriaMode=!1},this.resetCategoriaGrupo=()=>{this.categoriaGrupo={categoria_grupo:null,categoria:this.categoria.categoria,categoria_grupo_grupo:null,descripcion:null,receta:0,impresora:null,descuento:0,antecesores:null},this.editSubCategoriaMode=!1},this.loadCategorias=()=>{this.articuloSrvc.getCategorias({sede:+this.ls.get(E.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.categorias=t)})},this.onCategoriaSelected=t=>this.loadSubCategorias(+t.value.categoria),this.loadSubCategorias=t=>{this.articuloSrvc.getCategoriasGrupos({categoria:+t}).subscribe(t=>{t&&(this.categoriasGruposPadre=this.articuloSrvc.adaptCategoriaGrupoResponse(t),this.categoriasGrupos=this.categoriasGruposPadre)})},this.loadImpresoras=()=>{this.articuloSrvc.getImpresoras({sede:+this.ls.get(E.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.impresoras=t)})},this.onSubCategoriaPadreSelected=t=>this.loadSubCategoriasSubcategorias(+t.value),this.loadSubCategoriasSubcategorias=t=>{this.articuloSrvc.getCategoriasGrupos({categoria_grupo_grupo:t}).subscribe(t=>{t&&(this.categoriasGrupos=this.articuloSrvc.adaptCategoriaGrupoResponse(t))})},this.onSubmitCategoria=()=>{this.articuloSrvc.saveCategoria(this.categoria).subscribe(t=>{t.exito?(this.editCategoriaMode=!1,this.resetCategoria(),this.loadCategorias(),this.categoriaGrupoSvd.emit(),this.snackBar.open("Grabada con \xe9xito.","Categor\xeda",{duration:5e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Categor\xeda",{duration:5e3})})},this.onSubCategoriaSelected=t=>this.onChangeSubCategoriaEv.emit(+t.value.categoria_grupo),this.onSubmitSubCategoria=()=>{this.articuloSrvc.saveCategoriaGrupo(this.categoriaGrupo).subscribe(t=>{t.exito?(this.resetCategoriaGrupo(),this.loadSubCategorias(+this.categoria.categoria),this.snackBar.open("Grabada con \xe9xito.","Sub - Categor\xeda",{duration:5e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Sub - Categor\xeda",{duration:5e3})})}}ngOnInit(){this.esMovil=this.ls.get(E.a.usrTokenVar).enmovil||!1,this.resetCategoria(),this.loadCategorias(),this.loadImpresoras()}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(v.b),B.Nb(R.a),B.Nb(Q.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-categoria-producto"]],outputs:{categoriaGrupoSvd:"categoriaGrupoSvd",onChangeSubCategoriaEv:"onChangeSubCategoriaEv"},decls:18,vars:4,consts:[[1,"mat-elevation-z4"],["novalidate",""],["frmCategoria","ngForm"],[1,"fullWidth"],["type","text","matInput","","placeholder","Descripci\xf3n de la categor\xeda","name","descripcion","minlength","1","maxlength","150","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["type","text","matInput","","placeholder","Descripci\xf3n de la categor\xeda","name","descripcion","minlength","1","maxlength","150","required","",3,"ngModel","ngModelChange",4,"ngIf"],["align","end"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button","color","warn",3,"click"],["color","accent","selected","",3,"click",4,"ngFor","ngForOf"],["type","text","matInput","","placeholder","Descripci\xf3n de la categor\xeda","name","descripcion","minlength","1","maxlength","150","required","",3,"matKeyboard","ngModel","ngModelChange"],["type","text","matInput","","placeholder","Descripci\xf3n de la categor\xeda","name","descripcion","minlength","1","maxlength","150","required","",3,"ngModel","ngModelChange"],["color","accent","selected","",3,"click"]],template:function(t,e){if(1&t&&(B.Tb(0,"mat-card",0),B.Tb(1,"mat-card-title"),B.Tb(2,"h4"),B.Fc(3,"Categor\xedas"),B.Sb(),B.Sb(),B.Tb(4,"mat-card-content"),B.Tb(5,"form",1,2),B.Tb(7,"mat-form-field",3),B.Dc(8,Ui,1,2,"input",4),B.Dc(9,ji,1,1,"input",5),B.Sb(),B.Tb(10,"div",6),B.Tb(11,"button",7),B.bc("click",function(){return e.onSubmitCategoria()}),B.Fc(12," Guardar "),B.Sb(),B.Tb(13,"button",8),B.bc("click",function(){return e.resetCategoria()}),B.Fc(14," Cancelar "),B.Sb(),B.Sb(),B.Sb(),B.Ob(15,"hr"),B.Tb(16,"mat-chip-list"),B.Dc(17,Gi,2,1,"mat-chip",9),B.Sb(),B.Sb(),B.Sb()),2&t){const t=B.tc(6);B.Cb(8),B.lc("ngIf",!e.esMovil),B.Cb(1),B.lc("ngIf",e.esMovil),B.Cb(2),B.lc("disabled",!t.form.valid),B.Cb(6),B.lc("ngForOf",e.categorias)}},directives:[b.a,b.h,b.c,a.r,a.l,a.m,d.b,o.m,S.a,y.b,o.l,u.b,k.a,a.c,a.g,a.f,a.p,a.k,a.n,y.a],styles:[".fullWidth[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:18pt}"]}),t})();function qi(t,e){if(1&t&&(B.Tb(0,"mat-option",19),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.categoria),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Li(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",20),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().categoriaGrupo.descripcion=e}),B.Sb()}if(2&t){const t=B.fc();B.lc("matKeyboard",t.keyboardLayout)("ngModel",t.categoriaGrupo.descripcion)}}function Wi(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",21),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().categoriaGrupo.descripcion=e}),B.Sb()}if(2&t){const t=B.fc();B.lc("ngModel",t.categoriaGrupo.descripcion)}}function Vi(t,e){if(1&t&&(B.Tb(0,"mat-option",19),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.impresora),B.Cb(1),B.Hc(" ",t.nombre," ")}}function Ki(t,e){if(1&t&&(B.Tb(0,"mat-option",19),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.bodega),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Qi(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",22),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().categoriaGrupo.cuenta_contable=e}),B.Sb()}if(2&t){const t=B.fc();B.lc("matKeyboard",t.keyboardLayout)("ngModel",t.categoriaGrupo.cuenta_contable)}}function Xi(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",23),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().categoriaGrupo.cuenta_contable=e}),B.Sb()}if(2&t){const t=B.fc();B.lc("ngModel",t.categoriaGrupo.cuenta_contable)}}function Ji(t,e){if(1&t&&(B.Tb(0,"mat-option",24),B.Fc(1),B.Sb()),2&t){const t=e.$implicit,i=B.fc();B.lc("value",t.categoria_grupo)("disabled",+t.categoria_grupo==+i.categoriaGrupo.categoria_grupo),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Zi(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-chip",25),B.bc("click",function(){B.xc(t);const i=e.$implicit,o=B.fc();return o.categoria=i,o.loadSubCategorias(i.categoria)}),B.Fc(1),B.Sb()}if(2&t){const t=e.$implicit;B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Yi(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-chip",26),B.bc("click",function(){B.xc(t);const i=e.$implicit;return B.fc().setCatGrp(i)}),B.Fc(1),B.Sb()}if(2&t){const t=e.$implicit;B.Cb(1),B.Hc(" ",t.descripcion," ")}}let to=(()=>{class t{constructor(t,e,i,o){this.snackBar=t,this.articuloSrvc=e,this.bodegaSrvc=i,this.ls=o,this.categorias=[],this.impresoras=[],this.categoriasGruposPadre=[],this.categoriasGrupos=[],this.keyboardLayout=E.a.IDIOMA_TECLADO,this.esMovil=!1,this.bodegas=[],this.loadCategorias=()=>{this.articuloSrvc.getCategorias({sede:+this.ls.get(E.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.categorias=t)})},this.loadImpresoras=()=>{this.articuloSrvc.getImpresoras({sede:+this.ls.get(E.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.impresoras=t)})},this.loadBodegas=()=>{this.bodegaSrvc.get({sede:this.ls.get(E.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.bodegas=t)})},this.loadSubCategorias=t=>{this.resetCategoriaGrupo(),this.categoriaGrupo.categoria=t,this.articuloSrvc.getCategoriasGrupos({categoria:+t}).subscribe(t=>{t&&(this.categoriasGruposPadre=this.articuloSrvc.adaptCategoriaGrupoResponse(t),this.categoriasGrupos=JSON.parse(JSON.stringify(this.categoriasGruposPadre)))})},this.resetCategoriaGrupo=()=>{this.categoriaGrupo={categoria_grupo:null,categoria:null,categoria_grupo_grupo:null,descripcion:null,receta:0,impresora:null,descuento:0,antecesores:null}},this.onSubmitSubCategoria=()=>{this.articuloSrvc.saveCategoriaGrupo(this.categoriaGrupo).subscribe(t=>{t.exito?(this.loadSubCategorias(+this.categoriaGrupo.categoria),this.resetCategoriaGrupo(),this.snackBar.open("Grabada con \xe9xito.","Sub - Categor\xeda",{duration:5e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Sub - Categor\xeda",{duration:5e3})})},this.setCatGrp=t=>{this.categoriaGrupo=t},this.resetCategoriaGrupo()}ngOnInit(){this.esMovil=this.ls.get(E.a.usrTokenVar).enmovil||!1,this.loadCategorias(),this.loadImpresoras(),this.loadBodegas()}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(v.b),B.Nb(Q.a),B.Nb(K.a),B.Nb(R.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-sub-categoria-producto"]],decls:43,vars:15,consts:[[1,"mat-elevation-z4"],["novalidate",""],["frmCategoriaGrupo","ngForm"],[1,"fullWidth"],["name","categoria","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","matInput","","placeholder","Descripci\xf3n de la sub - categor\xeda","name","descripcion","minlength","1","maxlength","45","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["type","text","matInput","","placeholder","Descripci\xf3n de la sub - categor\xeda","name","descripcion","minlength","1","maxlength","45","required","",3,"ngModel","ngModelChange",4,"ngIf"],["name","impresora","required","",3,"ngModel","ngModelChange"],["name","bodega","required","",3,"ngModel","ngModelChange"],["type","text","matInput","","placeholder","Cuenta contable (si aplica)","name","cuenta_contable","minlength","0","maxlength","10",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["type","text","matInput","","placeholder","Cuenta contable (si aplica)","name","cuenta_contable","minlength","0","maxlength","10",3,"ngModel","ngModelChange",4,"ngIf"],["name","categoriaGrupoPadre",3,"ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],["align","end"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"disabled","click"],["mat-raised-button","","type","button","color","warn",3,"click"],["color","accent","selected","",3,"click",4,"ngFor","ngForOf"],["color","warn","selected","",3,"click",4,"ngFor","ngForOf"],[3,"value"],["type","text","matInput","","placeholder","Descripci\xf3n de la sub - categor\xeda","name","descripcion","minlength","1","maxlength","45","required","",3,"matKeyboard","ngModel","ngModelChange"],["type","text","matInput","","placeholder","Descripci\xf3n de la sub - categor\xeda","name","descripcion","minlength","1","maxlength","45","required","",3,"ngModel","ngModelChange"],["type","text","matInput","","placeholder","Cuenta contable (si aplica)","name","cuenta_contable","minlength","0","maxlength","10",3,"matKeyboard","ngModel","ngModelChange"],["type","text","matInput","","placeholder","Cuenta contable (si aplica)","name","cuenta_contable","minlength","0","maxlength","10",3,"ngModel","ngModelChange"],[3,"value","disabled"],["color","accent","selected","",3,"click"],["color","warn","selected","",3,"click"]],template:function(t,e){if(1&t&&(B.Tb(0,"mat-card",0),B.Tb(1,"mat-card-title"),B.Tb(2,"h4"),B.Fc(3,"Sub - categor\xedas"),B.Sb(),B.Sb(),B.Tb(4,"mat-card-content"),B.Tb(5,"form",1,2),B.Tb(7,"mat-form-field",3),B.Tb(8,"mat-label"),B.Fc(9,"Categor\xeda"),B.Sb(),B.Tb(10,"mat-select",4),B.bc("ngModelChange",function(t){return e.categoriaGrupo.categoria=t}),B.Dc(11,qi,2,2,"mat-option",5),B.Sb(),B.Sb(),B.Tb(12,"mat-form-field",3),B.Dc(13,Li,1,2,"input",6),B.Dc(14,Wi,1,1,"input",7),B.Sb(),B.Tb(15,"mat-form-field",3),B.Tb(16,"mat-label"),B.Fc(17,"Impresora:"),B.Sb(),B.Tb(18,"mat-select",8),B.bc("ngModelChange",function(t){return e.categoriaGrupo.impresora=t}),B.Dc(19,Vi,2,2,"mat-option",5),B.Sb(),B.Sb(),B.Tb(20,"mat-form-field",3),B.Tb(21,"mat-label"),B.Fc(22,"Sacar de la bodega:"),B.Sb(),B.Tb(23,"mat-select",9),B.bc("ngModelChange",function(t){return e.categoriaGrupo.bodega=t}),B.Dc(24,Ki,2,2,"mat-option",5),B.Sb(),B.Sb(),B.Tb(25,"mat-form-field",3),B.Dc(26,Qi,1,2,"input",10),B.Dc(27,Xi,1,1,"input",11),B.Sb(),B.Tb(28,"mat-form-field",3),B.Tb(29,"mat-label"),B.Fc(30,"Anidar dentro de"),B.Sb(),B.Tb(31,"mat-select",12),B.bc("ngModelChange",function(t){return e.categoriaGrupo.categoria_grupo_grupo=t}),B.Dc(32,Ji,2,3,"mat-option",13),B.Sb(),B.Sb(),B.Tb(33,"div",14),B.Tb(34,"button",15),B.bc("click",function(){return e.onSubmitSubCategoria()}),B.Fc(35," Guardar "),B.Sb(),B.Tb(36,"button",16),B.bc("click",function(){return e.resetCategoriaGrupo()}),B.Fc(37," Cancelar "),B.Sb(),B.Sb(),B.Sb(),B.Ob(38,"hr"),B.Tb(39,"mat-chip-list"),B.Dc(40,Zi,2,1,"mat-chip",17),B.Sb(),B.Tb(41,"mat-chip-list"),B.Dc(42,Yi,2,1,"mat-chip",18),B.Sb(),B.Sb(),B.Sb()),2&t){const t=B.tc(6);B.Cb(10),B.lc("ngModel",e.categoriaGrupo.categoria),B.Cb(1),B.lc("ngForOf",e.categorias),B.Cb(2),B.lc("ngIf",!e.esMovil),B.Cb(1),B.lc("ngIf",e.esMovil),B.Cb(4),B.lc("ngModel",e.categoriaGrupo.impresora),B.Cb(1),B.lc("ngForOf",e.impresoras),B.Cb(4),B.lc("ngModel",e.categoriaGrupo.bodega),B.Cb(1),B.lc("ngForOf",e.bodegas),B.Cb(2),B.lc("ngIf",!e.esMovil),B.Cb(1),B.lc("ngIf",e.esMovil),B.Cb(4),B.lc("ngModel",e.categoriaGrupo.categoria_grupo_grupo),B.Cb(1),B.lc("ngForOf",e.categoriasGruposPadre),B.Cb(2),B.lc("disabled",!t.form.valid),B.Cb(6),B.lc("ngForOf",e.categorias),B.Cb(2),B.lc("ngForOf",e.categoriasGrupos)}},directives:[b.a,b.h,b.c,a.r,a.l,a.m,d.b,d.f,m.a,a.p,a.k,a.n,o.l,o.m,S.a,y.b,j.m,u.b,k.a,a.c,a.g,a.f,y.a],styles:[""]}),t})();var eo=i("XiUz"),io=i("Iab2"),oo=i("IHy4"),no=i("TOq3");function ao(t,e){if(1&t&&(B.Tb(0,"mat-option",11),B.Fc(1),B.Sb()),2&t){const t=e.$implicit,i=B.fc();B.lc("value",t.sede)("disabled",+t.sede==+i.miSede),B.Cb(1),B.Hc(" ",t.nombre," ")}}function co(t,e){1&t&&B.Ob(0,"app-cargando")}let ro=(()=>{class t{constructor(t,e,i,o,n){this.sedeSrvc=t,this.ls=e,this.snackBar=i,this.dialog=o,this.articuloSrvc=n,this.articulo=null,this.cargando=!1,this.sedes=[],this.params={},this.miSede=0,this.loadSedes=()=>{this.sedeSrvc.get().subscribe(t=>{t&&(this.sedes=t)})},this.onSubmit=()=>{this.dialog.open(L.a,{maxWidth:"400px",data:new L.b("Replicar art\xedculos","Este proceso replicar\xe1 TODOS los art\xedculos a las sedes seleccionadas. \xbfDesea continuar?","S\xed","No")}).afterClosed().subscribe(t=>{if(t){this.cargando=!0;const t={sedes:[],articulo:null};this.params.sede.forEach(e=>t.sedes.push({sede:+e})),this.articulo&&(t.articulo=+this.articulo.articulo),this.articuloSrvc.replicaArticulosEnSedes(t).subscribe(t=>{t.exito?this.snackBar.open(t.mensaje,"Replicar art\xedculos",{duration:3e3}):this.snackBar.open(`ERROR: ${t.mensaje}`,"Replicar art\xedculos",{duration:7e3}),this.params={},this.cargando=!1})}})}}ngOnInit(){this.miSede=this.ls.get(E.a.usrTokenVar).sede||0,this.loadSedes()}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(oo.a),B.Nb(R.a),B.Nb(v.b),B.Nb(M.b),B.Nb(Q.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-replicar-asedes"]],inputs:{articulo:"articulo"},decls:18,vars:5,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate","",3,"ngSubmit"],["frmReplicaArticulosSedes","ngForm"],[2,"width","90%"],["name","sede","multiple","","required","",3,"ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],[4,"ngIf"],[3,"value","disabled"]],template:function(t,e){if(1&t){const t=B.Ub();B.Tb(0,"div",0),B.Tb(1,"div",1),B.Tb(2,"mat-card",2),B.Tb(3,"mat-card-title"),B.Tb(4,"h4"),B.Fc(5),B.Sb(),B.Sb(),B.Tb(6,"mat-card-content"),B.Tb(7,"form",3,4),B.bc("ngSubmit",function(){return B.xc(t),B.tc(8).form.valid&&e.onSubmit()}),B.Tb(9,"mat-form-field",5),B.Tb(10,"mat-label"),B.Fc(11,"Sede"),B.Sb(),B.Tb(12,"mat-select",6),B.bc("ngModelChange",function(t){return e.params.sede=t}),B.Dc(13,ao,2,3,"mat-option",7),B.Sb(),B.Sb(),B.Tb(14,"div",8),B.Tb(15,"button",9),B.Fc(16," Replicar "),B.Sb(),B.Sb(),B.Sb(),B.Dc(17,co,1,0,"app-cargando",10),B.Sb(),B.Sb(),B.Sb(),B.Sb()}if(2&t){const t=B.tc(8);B.Cb(5),B.Hc("Replicar ",(null==e.articulo?null:e.articulo.descripcion)||"TODOS los art\xedculos"," a las sedes"),B.Cb(7),B.lc("ngModel",e.params.sede),B.Cb(1),B.lc("ngForOf",e.sedes),B.Cb(2),B.lc("disabled",!t.form.valid||e.cargando),B.Cb(2),B.lc("ngIf",e.cargando)}},directives:[b.a,b.h,b.c,a.r,a.l,a.m,d.b,d.f,m.a,a.p,a.k,a.n,o.l,S.a,o.m,j.m,no.a],styles:[""]}),t})(),so=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.articulo=null}ngOnInit(){this.data.articulo&&(this.articulo=this.data.articulo)}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(M.f),B.Nb(M.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-replicar-a-sedes-dialog"]],decls:5,vars:1,consts:[["mat-dialog-content",""],[3,"articulo"],["mat-dialog-actions","","align","end"],["mat-raised-button","","type","button","color","accent",3,"click"]],template:function(t,e){1&t&&(B.Tb(0,"div",0),B.Ob(1,"app-replicar-asedes",1),B.Sb(),B.Tb(2,"div",2),B.Tb(3,"button",3),B.bc("click",function(){return e.dialogRef.close()}),B.Fc(4," Terminar "),B.Sb(),B.Sb()),2&t&&(B.Cb(1),B.lc("articulo",e.articulo))},directives:[M.d,ro,M.c,S.a],styles:[""]}),t})();var lo=i("pJXi"),uo=i("1wH6"),bo=i("FHMA");function go(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",5),B.bc("click",function(){return B.xc(t),B.fc().showArticuloForm=!0}),B.Tb(1,"mat-icon",6),B.Fc(2,"expand_more"),B.Sb(),B.Sb()}}function ho(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",5),B.bc("click",function(){return B.xc(t),B.fc().showArticuloForm=!1}),B.Tb(1,"mat-icon",6),B.Fc(2,"expand_less"),B.Sb(),B.Sb()}}function po(t,e){if(1&t&&(B.Tb(0,"mat-chip",36),B.Fc(1),B.Sb()),2&t){const t=B.fc(2);B.Cb(1),B.Hc(" ",t.categoria.descripcion," ")}}function mo(t,e){if(1&t&&(B.Tb(0,"mat-chip",37),B.Fc(1),B.Sb()),2&t){const t=B.fc(2);B.Cb(1),B.Hc(" ",t.subcategoria.descripcion," ")}}function fo(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",38),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).articulo.descripcion=e}),B.Sb()}if(2&t){const t=B.fc(2);B.lc("matKeyboard",t.keyboardLayout)("ngModel",t.articulo.descripcion)}}function So(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",39),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).articulo.descripcion=e}),B.Sb()}if(2&t){const t=B.fc(2);B.lc("ngModel",t.articulo.descripcion)}}function vo(t,e){if(1&t&&(B.Tb(0,"mat-option",40),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.presentacion),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Co(t,e){if(1&t&&(B.Tb(0,"mat-option",40),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.presentacion),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function To(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",41),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).articulo.codigo=e}),B.Sb()}if(2&t){const t=B.fc(2);B.lc("matKeyboard",t.keyboardLayout)("ngModel",t.articulo.codigo)}}function _o(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",42),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).articulo.codigo=e}),B.Sb()}if(2&t){const t=B.fc(2);B.lc("ngModel",t.articulo.codigo)}}function xo(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",43),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).articulo.shopify_id=e}),B.Sb()}if(2&t){const t=B.fc(2);B.lc("matKeyboard",t.keyboardLayout)("ngModel",t.articulo.shopify_id)}}function Mo(t,e){if(1&t){const t=B.Ub();B.Tb(0,"input",44),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).articulo.shopify_id=e}),B.Sb()}if(2&t){const t=B.fc(2);B.lc("ngModel",t.articulo.shopify_id)}}function Io(t,e){if(1&t&&(B.Tb(0,"mat-option",40),B.Fc(1),B.gc(2,"number"),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.impuesto_especial),B.Cb(1),B.Ic(" ",t.descripcion," (",B.ic(2,3,t.porcentaje,"1.2-2"),"%) ")}}function Do(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",11),B.Tb(1,"input",45),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).articulo.rendimiento=e}),B.Sb(),B.Sb()}if(2&t){const t=B.fc(2);B.Cb(1),B.lc("ngModel",t.articulo.rendimiento)}}function Fo(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",11),B.Tb(1,"input",46),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).articulo.cantidad_minima=e}),B.Sb(),B.Sb()}if(2&t){const t=B.fc(2);B.Cb(1),B.lc("ngModel",t.articulo.cantidad_minima)}}function yo(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",11),B.Tb(1,"input",47),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).articulo.cantidad_maxima=e}),B.Sb(),B.Sb()}if(2&t){const t=B.fc(2);B.Cb(1),B.lc("ngModel",t.articulo.cantidad_maxima)}}function ko(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",48),B.bc("click",function(){return B.xc(t),B.fc(2).replicarASedes()}),B.Fc(1," Replicar a sedes "),B.Sb()}}function Oo(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",49),B.bc("click",function(){return B.xc(t),B.fc(2).resetArticulo()}),B.Fc(1," Nuevo "),B.Sb()}}function wo(t,e){if(1&t){const t=B.Ub();B.Tb(0,"form",7,8),B.bc("ngSubmit",function(){B.xc(t);const e=B.tc(1),i=B.fc();return e.form.valid&&i.onSubmit()}),B.Tb(2,"mat-chip-list"),B.Dc(3,po,2,1,"mat-chip",9),B.Dc(4,mo,2,1,"mat-chip",10),B.Sb(),B.Tb(5,"mat-form-field",11),B.Dc(6,fo,1,2,"input",12),B.Dc(7,So,1,1,"input",13),B.Sb(),B.Tb(8,"mat-form-field",11),B.Tb(9,"input",14),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().articulo.precio=e}),B.Sb(),B.Sb(),B.Tb(10,"mat-form-field",11),B.Tb(11,"mat-label"),B.Fc(12,"Presentaci\xf3n Venta"),B.Sb(),B.Tb(13,"mat-select",15),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().articulo.presentacion=e}),B.Dc(14,vo,2,2,"mat-option",16),B.Sb(),B.Sb(),B.Tb(15,"mat-form-field",11),B.Tb(16,"mat-label"),B.Fc(17,"Presentaci\xf3n Reportes"),B.Sb(),B.Tb(18,"mat-select",17),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().articulo.presentacion_reporte=e}),B.Dc(19,Co,2,2,"mat-option",16),B.Sb(),B.Sb(),B.Tb(20,"mat-form-field",11),B.Dc(21,To,1,2,"input",18),B.Dc(22,_o,1,1,"input",19),B.Sb(),B.Tb(23,"mat-form-field",11),B.Dc(24,xo,1,2,"input",20),B.Dc(25,Mo,1,1,"input",21),B.Sb(),B.Tb(26,"mat-form-field",11),B.Tb(27,"mat-label"),B.Fc(28,"Impuesto Especial"),B.Sb(),B.Tb(29,"mat-select",22),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().articulo.impuesto_especial=e}),B.Dc(30,Io,3,6,"mat-option",16),B.Sb(),B.Sb(),B.Dc(31,Do,2,1,"mat-form-field",23),B.Dc(32,Fo,2,1,"mat-form-field",23),B.Dc(33,yo,2,1,"mat-form-field",23),B.Tb(34,"div",24),B.Tb(35,"div",25),B.Tb(36,"mat-checkbox",26),B.bc("ngModelChange",function(e){return B.xc(t),+(B.fc().articulo.produccion=e)}),B.Fc(37,"\xbfEs producci\xf3n?"),B.Sb(),B.Sb(),B.Tb(38,"div",25),B.Tb(39,"mat-checkbox",27),B.bc("ngModelChange",function(e){return B.xc(t),+(B.fc().articulo.mostrar_pos=e)}),B.Fc(40,"Mostrar en POS"),B.Sb(),B.Sb(),B.Tb(41,"div",25),B.Tb(42,"mat-checkbox",28),B.bc("ngModelChange",function(e){return B.xc(t),+(B.fc().articulo.combo=e)}),B.Fc(43,"Combo"),B.Sb(),B.Sb(),B.Tb(44,"div",25),B.Tb(45,"mat-checkbox",29),B.bc("ngModelChange",function(e){return B.xc(t),+(B.fc().articulo.multiple=e)}),B.Fc(46,"Opci\xf3n m\xfaltiple"),B.Sb(),B.Sb(),B.Sb(),B.Tb(47,"div",24),B.Tb(48,"div",25),B.Tb(49,"mat-checkbox",30),B.bc("ngModelChange",function(e){return B.xc(t),+(B.fc().articulo.mostrar_inventario=e)}),B.Fc(50,"Mostrar en Inventario"),B.Sb(),B.Sb(),B.Tb(51,"div",25),B.Tb(52,"mat-checkbox",31),B.bc("ngModelChange",function(e){return B.xc(t),+(B.fc().articulo.esreceta=e)}),B.Fc(53,"Es receta"),B.Sb(),B.Sb(),B.Sb(),B.Tb(54,"div",32),B.Tb(55,"button",33),B.Fc(56," Guardar "),B.Sb(),B.Dc(57,ko,2,0,"button",34),B.Dc(58,Oo,2,0,"button",35),B.Sb(),B.Sb()}if(2&t){const t=B.tc(1),e=B.fc();B.Cb(3),B.lc("ngIf",e.categoria),B.Cb(1),B.lc("ngIf",e.subcategoria),B.Cb(2),B.lc("ngIf",!e.esMovil),B.Cb(1),B.lc("ngIf",e.esMovil),B.Cb(2),B.lc("ngModel",e.articulo.precio),B.Cb(4),B.lc("ngModel",e.articulo.presentacion),B.Cb(1),B.lc("ngForOf",e.presentaciones),B.Cb(4),B.lc("ngModel",e.articulo.presentacion_reporte),B.Cb(1),B.lc("ngForOf",e.presentaciones),B.Cb(2),B.lc("ngIf",!e.esMovil),B.Cb(1),B.lc("ngIf",e.esMovil),B.Cb(2),B.lc("ngIf",!e.esMovil),B.Cb(1),B.lc("ngIf",e.esMovil),B.Cb(4),B.lc("ngModel",e.articulo.impuesto_especial),B.Cb(1),B.lc("ngForOf",e.impuestosEspeciales),B.Cb(1),B.lc("ngIf",1==+e.articulo.produccion),B.Cb(1),B.lc("ngIf",1==+e.articulo.multiple||+e.articulo.combo),B.Cb(1),B.lc("ngIf",1==+e.articulo.multiple||+e.articulo.combo),B.Cb(3),B.lc("ngModel",+e.articulo.produccion),B.Cb(3),B.lc("ngModel",+e.articulo.mostrar_pos),B.Cb(3),B.lc("ngModel",+e.articulo.combo),B.Cb(3),B.lc("ngModel",+e.articulo.multiple),B.Cb(4),B.lc("ngModel",+e.articulo.mostrar_inventario),B.Cb(3),B.lc("ngModel",+e.articulo.esreceta),B.Cb(3),B.lc("disabled",!t.form.valid||!e.articulo.categoria_grupo),B.Cb(2),B.lc("ngIf",e.articulo.articulo),B.Cb(1),B.lc("ngIf",e.articulo.articulo)}}function Eo(t,e){1&t&&B.Ob(0,"hr")}function Ao(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",5),B.bc("click",function(){return B.xc(t),B.fc(2).showDetalleForm=!0}),B.Tb(1,"mat-icon",6),B.Fc(2,"expand_more"),B.Sb(),B.Sb()}}function Bo(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",5),B.bc("click",function(){return B.xc(t),B.fc(2).showDetalleForm=!1}),B.Tb(1,"mat-icon",6),B.Fc(2,"expand_less"),B.Sb(),B.Sb()}}function Ro(t,e){if(1&t&&(B.Tb(0,"mat-option",40),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function $o(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-form-field",11),B.Tb(1,"input",60),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(3).receta.precio=e}),B.Sb(),B.Sb()}if(2&t){const t=B.fc(3);B.Cb(1),B.lc("ngModel",t.receta.precio)}}function Ho(t,e){if(1&t&&(B.Tb(0,"mat-option",40),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.medida),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Po(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",49),B.bc("click",function(){return B.xc(t),B.fc(3).resetReceta()}),B.Fc(1," Nuevo "),B.Sb()}}function No(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",49),B.bc("click",function(){return B.xc(t),B.fc(3).imprimirReceta()}),B.Fc(1," Imprimir "),B.Sb()}}const Uo=function(){return{standalone:!0}};function jo(t,e){if(1&t){const t=B.Ub();B.Tb(0,"form",7,52),B.bc("ngSubmit",function(){B.xc(t);const e=B.tc(1),i=B.fc(2);return e.form.valid&&i.onSubmitDetail()}),B.Tb(2,"mat-form-field",11),B.Tb(3,"mat-label"),B.Fc(4,"Art\xedculo"),B.Sb(),B.Tb(5,"input",53),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).txtArticuloSelected=e})("keyup",function(){B.xc(t);const e=B.fc(2);return e.filtrarArticulos(e.txtArticuloSelected)}),B.Sb(),B.Tb(6,"mat-autocomplete",54,55),B.Dc(8,Ro,2,2,"mat-option",16),B.Sb(),B.Sb(),B.Tb(9,"mat-form-field",11),B.Tb(10,"input",56),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).receta.cantidad=e}),B.Sb(),B.Sb(),B.Dc(11,$o,2,1,"mat-form-field",23),B.Tb(12,"mat-form-field",11),B.Tb(13,"mat-label"),B.Fc(14,"Unidad de medida"),B.Sb(),B.Tb(15,"mat-select",57),B.bc("ngModelChange",function(e){return B.xc(t),B.fc(2).receta.medida=e}),B.Dc(16,Ho,2,2,"mat-option",16),B.Sb(),B.Sb(),B.Tb(17,"div",24),B.Tb(18,"div",25),B.Tb(19,"mat-checkbox",58),B.bc("ngModelChange",function(e){return B.xc(t),+(B.fc(2).receta.racionable=e)}),B.Fc(20,"\xbfEs racionable?"),B.Sb(),B.Sb(),B.Tb(21,"div",25),B.Tb(22,"mat-checkbox",59),B.bc("ngModelChange",function(e){return B.xc(t),+(B.fc(2).receta.precio_extra=e)}),B.Fc(23," Precio Extra "),B.Sb(),B.Sb(),B.Sb(),B.Tb(24,"div",32),B.Tb(25,"button",33),B.Fc(26," Guardar "),B.Sb(),B.Dc(27,Po,2,0,"button",35),B.Dc(28,No,2,0,"button",35),B.Sb(),B.Sb()}if(2&t){const t=B.tc(1),e=B.tc(7),i=B.fc(2);B.Cb(5),B.lc("ngModel",i.txtArticuloSelected)("ngModelOptions",B.nc(14,Uo))("matAutocomplete",e),B.Cb(1),B.lc("displayWith",i.displayArticulo),B.Cb(2),B.lc("ngForOf",i.filteredArticulos),B.Cb(2),B.lc("ngModel",i.receta.cantidad),B.Cb(1),B.lc("ngIf",i.receta.precio_extra&&i.receta.precio_extra>0),B.Cb(4),B.lc("ngModel",i.receta.medida),B.Cb(1),B.lc("ngForOf",i.medidas),B.Cb(3),B.lc("ngModel",+i.receta.racionable),B.Cb(3),B.lc("ngModel",+i.receta.precio_extra),B.Cb(3),B.lc("disabled",!t.form.valid),B.Cb(2),B.lc("ngIf",i.receta.articulo_detalle),B.Cb(1),B.lc("ngIf",i.recetas.length>0)}}function Go(t,e){1&t&&B.Ob(0,"hr")}function zo(t,e){1&t&&(B.Tb(0,"th",73),B.Fc(1,"Art\xedculo"),B.Sb())}function qo(t,e){if(1&t&&(B.Tb(0,"td",74),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Gc(t.articulo.descripcion)}}function Lo(t,e){1&t&&(B.Tb(0,"th",75),B.Fc(1,"Cantidad"),B.Sb())}function Wo(t,e){if(1&t&&(B.Tb(0,"td",76),B.Fc(1),B.gc(2,"number"),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Gc(B.ic(2,1,t.cantidad,"1.2-2"))}}function Vo(t,e){1&t&&(B.Tb(0,"th",75),B.Fc(1,"Unida de medida"),B.Sb())}function Ko(t,e){if(1&t&&(B.Tb(0,"td",76),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Gc(t.medida.descripcion)}}function Qo(t,e){1&t&&(B.Tb(0,"th",75),B.Fc(1,"Precio"),B.Sb())}function Xo(t,e){if(1&t&&(B.Tb(0,"td",76),B.Fc(1),B.gc(2,"number"),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.Gc(B.ic(2,1,t.precio,"1.2-2"))}}function Jo(t,e){1&t&&(B.Tb(0,"th",73),B.Fc(1,"\xa0"),B.Sb())}function Zo(t,e){if(1&t){const t=B.Ub();B.Tb(0,"td",74),B.Tb(1,"button",48),B.bc("click",function(){B.xc(t);const i=e.$implicit;return B.fc(3).getReceta(i.receta,i.articulo_detalle)}),B.Fc(2," Editar "),B.Sb(),B.Tb(3,"button",49),B.bc("click",function(){B.xc(t);const i=e.$implicit;return B.fc(3).eliminaReceta(i)}),B.Fc(4," Eliminar "),B.Sb(),B.Sb()}}function Yo(t,e){1&t&&B.Ob(0,"tr",77)}function tn(t,e){1&t&&B.Ob(0,"tr",78)}function en(t,e){if(1&t&&(B.Tb(0,"table",61),B.Rb(1,62),B.Dc(2,zo,2,0,"th",63),B.Dc(3,qo,2,1,"td",64),B.Qb(),B.Rb(4,65),B.Dc(5,Lo,2,0,"th",66),B.Dc(6,Wo,3,4,"td",67),B.Qb(),B.Rb(7,68),B.Dc(8,Vo,2,0,"th",66),B.Dc(9,Ko,2,1,"td",67),B.Qb(),B.Rb(10,69),B.Dc(11,Qo,2,0,"th",66),B.Dc(12,Xo,3,4,"td",67),B.Qb(),B.Rb(13,70),B.Dc(14,Jo,2,0,"th",63),B.Dc(15,Zo,5,0,"td",64),B.Qb(),B.Dc(16,Yo,1,0,"tr",71),B.Dc(17,tn,1,0,"tr",72),B.Sb()),2&t){const t=B.fc(2);B.lc("dataSource",t.dataSource),B.Cb(16),B.lc("matHeaderRowDef",t.displayedColumns),B.Cb(1),B.lc("matRowDefColumns",t.displayedColumns)}}function on(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-card",0),B.Tb(1,"mat-card-title"),B.Tb(2,"h4"),B.Fc(3),B.Dc(4,Ao,3,0,"button",1),B.Dc(5,Bo,3,0,"button",1),B.Sb(),B.Sb(),B.Tb(6,"mat-card-content"),B.Dc(7,jo,29,15,"form",2),B.Dc(8,Go,1,0,"hr",3),B.Tb(9,"mat-form-field",11),B.Tb(10,"input",50),B.bc("keyup",function(e){return B.xc(t),B.fc().applyFilter(e.target.value)}),B.Sb(),B.Sb(),B.Dc(11,en,18,3,"table",51),B.Sb(),B.Sb()}if(2&t){const t=B.fc();B.Cb(3),B.Hc(" Detalle del art\xedculo ",t.articulo.descripcion," "),B.Cb(1),B.lc("ngIf",!t.showDetalleForm),B.Cb(1),B.lc("ngIf",t.showDetalleForm),B.Cb(2),B.lc("ngIf",t.showDetalleForm),B.Cb(1),B.lc("ngIf",t.recetas.length>0),B.Cb(3),B.lc("ngIf",t.recetas.length>0)}}let nn=(()=>{class t{constructor(t,e,i,o,n,a,c,r){this.dialog=t,this.snackBar=e,this.ls=i,this.articuloSrvc=o,this.medidaSrvc=n,this.presentacionSrvc=a,this.impuestoEspecialSrvc=c,this.rptSrvc=r,this.categoria=null,this.subcategoria=null,this.articuloSvd=new B.o,this.titulo="Receta",this.showArticuloForm=!0,this.medidas=[],this.medidasFull=[],this.presentaciones=[],this.articulos=[],this.filteredArticulos=[],this.recetas=[],this.impuestosEspeciales=[],this.showDetalleForm=!0,this.displayedColumns=["articulo","cantidad","medida","precio","editItem"],this.keyboardLayout=E.a.IDIOMA_TECLADO,this.esMovil=!1,this.txtArticuloSelected=void 0,this.resetArticulo=()=>{this.articulo={articulo:null,categoria_grupo:this.articulo.categoria_grupo,presentacion:null,descripcion:null,precio:null,bien_servicio:"B",produccion:0,mostrar_pos:1,presentacion_reporte:null,impuesto_especial:null,shopify_id:null,multiple:0,cantidad_minima:1,cantidad_maxima:1,combo:0,rendimiento:0,mostrar_inventario:0},this.recetas=[],this.resetReceta()},this.setArticuloCategoriaGrupo=t=>this.articulo.categoria_grupo=+t,this.onSubmit=()=>{this.articuloSrvc.saveArticulo(this.articulo).subscribe(t=>{t.exito?(this.articuloSvd.emit(),this.resetArticulo(),this.articulo=t.articulo,this.loadRecetas(this.articulo.articulo),this.loadArticulos(),this.snackBar.open("Art\xedculo guardado con \xe9xito...","Art\xedculo",{duration:3e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Articulo",{duration:3e3})})},this.loadMedidas=()=>{this.medidaSrvc.get().subscribe(t=>{t&&(this.medidasFull=t)})},this.loadPresentaciones=()=>{this.presentacionSrvc.get().subscribe(t=>{t&&(this.presentaciones=t)})},this.loadArticulos=()=>{this.articuloSrvc.getArticulos().subscribe(t=>{t&&(this.articulos=t)})},this.loadImpuestosEspeciales=()=>{this.impuestoEspecialSrvc.get().subscribe(t=>{t&&(this.impuestosEspeciales=t)})},this.displayArticulo=t=>{if(t)return this.receta.articulo=t.articulo,this.filtrarMedidas(t),t.descripcion;this.medidas=[]},this.filtrarMedidas=t=>{const e=this.presentaciones.find(e=>+e.presentacion==+t.presentacion_reporte);this.medidas=e?this.medidasFull.filter(t=>+t.medida==+e.medida.medida):[]},this.filtrarArticulos=t=>{if(t&&"string"==typeof t){const e=t.toLowerCase();this.filteredArticulos=this.articulos.filter(t=>t.descripcion.toLowerCase().includes(e))}else this.filteredArticulos=this.articulos},this.resetReceta=()=>{this.receta={articulo_detalle:null,receta:this.articulo.articulo||0,racionable:0,articulo:null,cantidad:1,medida:null,anulado:0,precio_extra:0,precio:0},this.txtArticuloSelected=void 0,this.updateTableDataSource()},this.loadRecetas=(t=+this.articulo.articulo)=>{this.articuloSrvc.getArticuloDetalle(+t,{receta:+t}).subscribe(t=>{t&&(this.recetas=t,this.updateTableDataSource())})},this.getReceta=(t=+this.articulo.articulo,e)=>{this.articuloSrvc.getArticuloDetalle(t,{articulo_detalle:e}).subscribe(t=>{t&&(this.receta={articulo_detalle:t[0].articulo_detalle,receta:t[0].receta.articulo,racionable:t[0].articulo.articulo,articulo:t[0].articulo.articulo,cantidad:+t[0].cantidad,medida:t[0].medida.medida,anulado:t[0].anulado||0,precio_extra:t[0].precio_extra||0,precio:+t[0].precio},this.txtArticuloSelected=t[0].articulo,this.showDetalleForm=!0)})},this.eliminaReceta=t=>{this.dialog.open(L.a,{maxWidth:"400px",data:new L.b("Eliminar detalle",`\xbfDesea eliminar '${t.cantidad} de ${t.articulo.descripcion}' de la receta?`,"S\xed","No")}).afterClosed().subscribe(e=>{e&&(t.anulado=1,t.articulo=t.articulo.articulo,this.articuloSrvc.saveArticuloDetalle(t).subscribe(t=>{this.loadRecetas(),this.resetReceta()}))})},this.onSubmitDetail=()=>{this.receta.receta=this.articulo.articulo,this.articuloSrvc.saveArticuloDetalle(this.receta).subscribe(t=>{t&&(t.exito?(this.loadRecetas(),this.resetReceta()):this.snackBar.open(`ERROR: ${t.mensaje}`,"Art\xedculo",{duration:3e3}))})},this.imprimirReceta=()=>{this.rptSrvc.imprimirReceta(this.articulo.articulo).subscribe(t=>{if(t){const e=new Blob([t],{type:"application/pdf"});Object(io.saveAs)(e,`${this.titulo}_${this.articulo.descripcion}.pdf`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})},this.updateTableDataSource=()=>{this.dataSource=new p.k(this.recetas),this.dataSource.filterPredicate=(t,e)=>t.articulo.descripcion.toLowerCase().includes(e)},this.replicarASedes=()=>{this.dialog.open(so,{width:"50%",data:{articulo:this.articulo}}).afterClosed().subscribe(t=>{})},this.applyFilter=t=>{this.dataSource.filter=t.toLocaleLowerCase()}}ngOnInit(){this.esMovil=this.ls.get(E.a.usrTokenVar).enmovil||!1,this.resetArticulo(),this.loadMedidas(),this.loadArticulos(),this.loadPresentaciones(),this.loadImpuestosEspeciales()}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(M.b),B.Nb(v.b),B.Nb(R.a),B.Nb(Q.a),B.Nb(lo.a),B.Nb(X.a),B.Nb(uo.a),B.Nb(bo.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-form-producto"]],inputs:{articulo:"articulo",categoria:"categoria",subcategoria:"subcategoria"},outputs:{articuloSvd:"articuloSvd"},decls:10,vars:6,consts:[[1,"mat-elevation-z4","fullWidth"],["mat-icon-button","","type","button","color","accent",3,"click",4,"ngIf"],["novalidate","",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["class","mat-elevation-z4 fullWidth",4,"ngIf"],["mat-icon-button","","type","button","color","accent",3,"click"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmArticulo","ngForm"],["color","accent","class","catSubCat","selected","",4,"ngIf"],["color","warn","class","catSubCat","selected","",4,"ngIf"],[1,"fullWidth"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"ngModel","ngModelChange",4,"ngIf"],["matInput","","type","number","placeholder","Precio","name","precio","required","",3,"ngModel","ngModelChange"],["name","presentacion","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","presentacion_reporte","required","",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","C\xf3digo","name","codigo","required","",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text","placeholder","C\xf3digo","name","codigo","required","",3,"ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text","placeholder","Shopify ID","name","shopify_id",3,"matKeyboard","ngModel","ngModelChange",4,"ngIf"],["matInput","","type","text","placeholder","Shopify ID","name","shopify_id",3,"ngModel","ngModelChange",4,"ngIf"],["name","impuesto_especial",3,"ngModel","ngModelChange"],["class","fullWidth",4,"ngIf"],[1,"row"],[1,"col","m3","s3"],["name","produccion",1,"example-margin",3,"ngModel","ngModelChange"],["name","mostrar_pos",1,"example-margin",3,"ngModel","ngModelChange"],["name","combo",1,"example-margin",3,"ngModel","ngModelChange"],["name","multiple",1,"example-margin",3,"ngModel","ngModelChange"],["name","mostrar_inventario",1,"example-margin",3,"ngModel","ngModelChange"],["name","esreceta",1,"example-margin",3,"ngModel","ngModelChange"],["align","end"],["mat-raised-button","","type","submit","color","accent",1,"btnAccion",3,"disabled"],["mat-raised-button","","type","button","color","accent","class","btnAccion",3,"click",4,"ngIf"],["mat-raised-button","","type","button","color","accent",3,"click",4,"ngIf"],["color","accent","selected","",1,"catSubCat"],["color","warn","selected","",1,"catSubCat"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"matKeyboard","ngModel","ngModelChange"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"ngModel","ngModelChange"],[3,"value"],["matInput","","type","text","placeholder","C\xf3digo","name","codigo","required","",3,"matKeyboard","ngModel","ngModelChange"],["matInput","","type","text","placeholder","C\xf3digo","name","codigo","required","",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","Shopify ID","name","shopify_id",3,"matKeyboard","ngModel","ngModelChange"],["matInput","","type","text","placeholder","Shopify ID","name","shopify_id",3,"ngModel","ngModelChange"],["matInput","","type","number","step","0.05","placeholder","Rendimiento","name","rendimiento","required","",3,"ngModel","ngModelChange"],["matInput","","type","number","step","1","placeholder","Cantidad minima","name","minima","required","",3,"ngModel","ngModelChange"],["matInput","","type","number","step","1","placeholder","Cantidad maxima","name","maxima","required","",3,"ngModel","ngModelChange"],["mat-raised-button","","type","button","color","accent",1,"btnAccion",3,"click"],["mat-raised-button","","type","button","color","accent",3,"click"],["matInput","","placeholder","Buscar",3,"keyup"],["mat-table","","class","mat-elevation-z4 full-width",3,"dataSource",4,"ngIf"],["frmDetalleArticulo","ngForm"],["type","text","placeholder","Art\xedculo","matInput","","required","",3,"ngModel","ngModelOptions","matAutocomplete","ngModelChange","keyup"],[3,"displayWith"],["autoArticulos","matAutocomplete"],["matInput","","placeholder","Cantidad","name","cantidad","required","",3,"ngModel","ngModelChange"],["name","medida","required","",3,"ngModel","ngModelChange"],["name","racionable",1,"fullWidth",3,"ngModel","ngModelChange"],["name","extra",1,"fullWidth",3,"ngModel","ngModelChange"],["matInput","","placeholder","Precio","name","precio","required","",3,"ngModel","ngModelChange"],["mat-table","",1,"mat-elevation-z4","full-width",3,"dataSource"],["matColumnDef","articulo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-wrap",4,"matCellDef"],["matColumnDef","cantidad"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","medida"],["matColumnDef","precio"],["matColumnDef","editItem"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"text-wrap"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(B.Tb(0,"mat-card",0),B.Tb(1,"mat-card-title"),B.Tb(2,"h4"),B.Fc(3),B.Dc(4,go,3,0,"button",1),B.Dc(5,ho,3,0,"button",1),B.Sb(),B.Sb(),B.Tb(6,"mat-card-content"),B.Dc(7,wo,59,27,"form",2),B.Sb(),B.Sb(),B.Dc(8,Eo,1,0,"hr",3),B.Dc(9,on,12,6,"mat-card",4)),2&t&&(B.Cb(3),B.Hc(" Art\xedculo ",e.articulo.articulo?e.articulo.descripcion:""," "),B.Cb(1),B.lc("ngIf",!e.showArticuloForm),B.Cb(1),B.lc("ngIf",e.showArticuloForm),B.Cb(2),B.lc("ngIf",e.showArticuloForm),B.Cb(1),B.lc("ngIf",e.articulo.articulo),B.Cb(1),B.lc("ngIf",e.articulo.articulo))},directives:[b.a,b.h,o.m,b.c,S.a,l.a,a.r,a.l,a.m,y.b,d.b,u.b,a.o,a.c,a.p,a.k,a.n,d.f,m.a,o.l,f.a,y.a,k.a,j.m,F.c,F.a,p.j,p.c,p.e,p.b,p.g,p.i,p.d,p.a,p.f,p.h],pipes:[o.f],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.iconFontSize[_ngcontent-%COMP%]{font-size:24pt}.catSubCat[_ngcontent-%COMP%]{margin-bottom:10px}"]}),t})();const an=["frmProducto"],cn=["frmSubcategoria"];function rn(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-chip",16),B.bc("click",function(){B.xc(t);const i=e.$implicit,o=B.fc();return o.categoria=i,o.categoriaGrupo=null,o.loadSubCategorias(i.categoria)}),B.Fc(1),B.Sb()}if(2&t){const t=e.$implicit;B.Cb(1),B.Hc(" ",t.descripcion," ")}}function sn(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-chip",19),B.bc("click",function(){B.xc(t);const i=e.$implicit,o=B.fc(2);return o.categoriaGrupo=i,o.loadSubCategorias(o.categoria.categoria,i.categoria_grupo)}),B.Fc(1),B.Sb()}if(2&t){const t=e.$implicit;B.Cb(1),B.Hc(" ",t.descripcion," ")}}function ln(t,e){if(1&t&&(B.Tb(0,"mat-chip-list",17),B.Dc(1,sn,2,1,"mat-chip",18),B.Sb()),2&t){const t=e.$implicit;B.Cb(1),B.lc("ngForOf",t)}}function dn(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",20),B.bc("click",function(){B.xc(t);const i=e.$implicit;return B.fc().setArticulo(i)}),B.Fc(1),B.Sb()}if(2&t){const t=e.$implicit;B.Cb(1),B.Gc(t.descripcion)}}const un=function(){return{standalone:!0}};let bn=(()=>{class t{constructor(t,e){this.articuloSrvc=t,this.ls=e,this.categorias=[],this.categoriasGrupos=[],this.listasCategoriasGrupo=[],this.articulos=[],this.articulosFull=[],this.txtFiltro="",this.setArticulo=t=>{this.articuloSrvc.getArticulo({articulo:t.articulo}).subscribe(t=>{if(t&&t.length>0){const e=t[0];this.articulo={articulo:+e.articulo,categoria_grupo:+e.categoria_grupo.categoria_grupo,presentacion:e.presentacion.presentacion,descripcion:e.descripcion,precio:+e.precio,codigo:e.codigo,produccion:e.produccion,presentacion_reporte:e.presentacion_reporte.presentacion,mostrar_pos:e.mostrar_pos,impuesto_especial:e.impuesto_especial,shopify_id:e.shopify_id,multiple:e.multiple,cantidad_minima:e.cantidad_minima,cantidad_maxima:e.cantidad_maxima,combo:e.combo,rendimiento:e.rendimiento,mostrar_inventario:e.mostrar_inventario,esreceta:e.esreceta},this.frmProductoComponent.loadRecetas(+this.articulo.articulo),this.frmProductoComponent.resetReceta()}})},this.setArticuloCategoriaGrupo=t=>{this.articulo.categoria_grupo=+t,this.frmProductoComponent.setArticuloCategoriaGrupo(+t)},this.refreshArticuloList=t=>{this.loadArticulos()},this.loadCategorias=()=>{this.articuloSrvc.getCategorias({sede:+this.ls.get(E.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.categorias=t)})},this.loadSubCategorias=(t,e=null)=>{const i={categoria:+t,categoria_grupo_grupo:null};e?(this.frmProductoComponent.articulo.categoria_grupo=e,i.categoria_grupo_grupo=e):(this.frmProductoComponent.articulo.categoria_grupo=null,delete i.categoria_grupo_grupo,this.listasCategoriasGrupo=[]),this.articuloSrvc.getCategoriasGrupos(i).subscribe(t=>{t&&t.length>0?this.listasCategoriasGrupo.push(this.articuloSrvc.adaptCategoriaGrupoResponse(t)):e&&this.loadArticulos(e)})},this.loadArticulos=(t=null)=>{const e={categoria_grupo:null};t?e.categoria_grupo=t:delete e.categoria_grupo,this.articuloSrvc.getArticulos(e).subscribe(t=>{t&&(this.articulosFull=t,this.articulos=JSON.parse(JSON.stringify(this.articulosFull)))})},this.reloadCategoriasInSubcategoriasArticulos=()=>{this.loadCategorias(),this.frmSubcategoria.loadCategorias()},this.articulo={articulo:null,categoria_grupo:null,presentacion:null,descripcion:null,precio:null,bien_servicio:"B",produccion:0,presentacion_reporte:null,mostrar_pos:0,impuesto_especial:null,rendimiento:1,mostrar_inventario:0}}ngOnInit(){this.loadCategorias(),this.loadArticulos()}applyFilter(){this.articulos=this.txtFiltro.length>0?Object(E.b)(this.articulosFull,this.txtFiltro):JSON.parse(JSON.stringify(this.articulosFull))}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(Q.a),B.Nb(R.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-producto"]],viewQuery:function(t,e){if(1&t&&(B.Kc(an,1),B.Kc(cn,1)),2&t){let t;B.sc(t=B.cc())&&(e.frmProductoComponent=t.first),B.sc(t=B.cc())&&(e.frmSubcategoria=t.first)}},decls:20,vars:9,consts:[["label","Categor\xedas"],[3,"categoriaGrupoSvd","onChangeSubCategoriaEv"],["label","Sub-categor\xedas"],["frmSubcategoria",""],["label","Art\xedculos"],["fxLayout","row wrap","fxLayout.xs","column","fxLayoutAlign","start start"],["fxFlex","100%"],["color","accent","selected","",3,"click",4,"ngFor","ngForOf"],["class","divSubCategorias",4,"ngFor","ngForOf"],["fxFlex","40%","fxFlex.xs","100%","fxFlex.sm","100%","fxLayout","row wrap","fxLayoutGap","8px grid","fxLayoutAlign","start start",1,"divArticulos"],[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],["mat-list-item","","class","accion-comanda mat-elevation-z4",3,"click",4,"ngFor","ngForOf"],["fxFlex","60%","fxFlex.xs","100%","fxFlex.sm","100%",1,"divArticulos"],[3,"categoria","subcategoria","articulo","articuloSvd"],["frmProducto",""],["color","accent","selected","",3,"click"],[1,"divSubCategorias"],["color","warn","selected","",3,"click",4,"ngFor","ngForOf"],["color","warn","selected","",3,"click"],["mat-list-item","",1,"accion-comanda","mat-elevation-z4",3,"click"]],template:function(t,e){1&t&&(B.Tb(0,"mat-tab-group"),B.Tb(1,"mat-tab",0),B.Tb(2,"app-categoria-producto",1),B.bc("categoriaGrupoSvd",function(){return e.reloadCategoriasInSubcategoriasArticulos()})("onChangeSubCategoriaEv",function(t){return e.setArticuloCategoriaGrupo(t)}),B.Sb(),B.Sb(),B.Tb(3,"mat-tab",2),B.Ob(4,"app-sub-categoria-producto",null,3),B.Sb(),B.Tb(6,"mat-tab",4),B.Tb(7,"div",5),B.Tb(8,"div",6),B.Tb(9,"mat-chip-list"),B.Dc(10,rn,2,1,"mat-chip",7),B.Sb(),B.Dc(11,ln,2,1,"mat-chip-list",8),B.Sb(),B.Tb(12,"div",9),B.Tb(13,"mat-form-field",10),B.Tb(14,"input",11),B.bc("keyup",function(){return e.applyFilter()})("ngModelChange",function(t){return e.txtFiltro=t}),B.Sb(),B.Sb(),B.Tb(15,"mat-action-list"),B.Dc(16,dn,2,1,"button",12),B.Sb(),B.Sb(),B.Tb(17,"div",13),B.Tb(18,"app-form-producto",14,15),B.bc("articuloSvd",function(t){return e.refreshArticuloList(t)}),B.Sb(),B.Sb(),B.Sb(),B.Sb(),B.Sb()),2&t&&(B.Cb(10),B.lc("ngForOf",e.categorias),B.Cb(1),B.lc("ngForOf",e.listasCategoriasGrupo),B.Cb(3),B.lc("ngModel",e.txtFiltro)("ngModelOptions",B.nc(8,un)),B.Cb(2),B.lc("ngForOf",e.articulos),B.Cb(2),B.lc("categoria",e.categoria)("subcategoria",e.categoriaGrupo)("articulo",e.articulo))},directives:[h.b,h.a,zi,to,eo.c,eo.b,eo.a,y.b,o.l,eo.d,d.b,u.b,a.c,a.k,a.n,s.a,nn,y.a,s.c],styles:[".divArticulos[_ngcontent-%COMP%]{padding:3px 8px;overflow-y:auto;margin:0;height:85vh}.divArticulos[_ngcontent-%COMP%] > mat-card[_ngcontent-%COMP%]{width:200px;max-height:95px}.divSubCategorias[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px}.accion-comanda[_ngcontent-%COMP%]{background-color:#fff;margin:10px 0}"]}),t})();const gn=["frmEgreso"],hn=["frmIngreso"];let pn=(()=>{class t{constructor(t,e,i){this.ls=t,this._snackBar=e,this.transformacionSrvc=i,this.mermaDetalle=[],this.showMerma=!0,this.bloqueoBotones=!1,this.transformar=()=>{this.bloqueoBotones=!0,this.egreso=this.frmEgreso.egreso,this.ingreso=this.frmIngreso.ingreso,this.transformacion={egreso:{tipo_movimiento:this.egreso.tipo_movimiento,fecha:this.egreso.fecha,proveedor:this.ingreso.proveedor,bodega:this.egreso.bodega,usuario:this.egreso.usuario,estatus_movimiento:this.egreso.estatus_movimiento,bodega_destino:this.egreso.bodega_destino,tipo_movimiento_destino:this.egreso.tipo_movimiento_destino,detalle:[]},ingreso:{tipo_movimiento:this.ingreso.tipo_movimiento,fecha:this.ingreso.fecha,proveedor:this.ingreso.proveedor,bodega:this.ingreso.bodega,usuario:this.ingreso.usuario,bodega_origen:this.ingreso.bodega_origen,comentario:this.ingreso.comentario,detalle:[]},merma:[]},this.frmEgreso.detallesMerma.forEach(t=>this.transformacion.merma.push({articulo:t.articulo,cantidad:t.cantidad,precio_unitario:t.precio_unitario,precio_total:t.precio_total,presentacion:t.presentacion,cantidad_utilizada:t.cantidad_utilizada})),this.frmEgreso.detallesEgreso.forEach(t=>this.transformacion.egreso.detalle.push({articulo:t.articulo,cantidad:t.cantidad,precio_unitario:t.precio_unitario,precio_total:t.precio_total,presentacion:t.presentacion})),this.frmIngreso.detallesIngreso.forEach(t=>this.transformacion.ingreso.detalle.push({articulo:t.articulo,cantidad:t.cantidad,precio_unitario:t.precio_unitario,precio_total:t.precio_total,presentacion:t.presentacion,cantidad_utilizada:t.cantidad_utilizada})),this.transformacion.egreso&&this.transformacion.egreso.detalle&&this.transformacion.egreso.detalle.length>0&&this.transformacion.ingreso&&this.transformacion.ingreso.detalle&&this.transformacion.ingreso.detalle.length>0?this.transformacionSrvc.transformar(this.transformacion).subscribe(t=>{this.bloqueoBotones=!1,t.exito?(this.frmEgreso.resetEgreso(),this.frmEgreso.detallesEgreso=[],this.frmEgreso.resetDetalleMerma(),this.frmEgreso.detallesMerma=[],this.frmIngreso.resetIngreso(),this.frmIngreso.detallesIngreso=[],this._snackBar.open("Transformaci\xf3n generada con \xe9xito...","Transformaci\xf3n",{duration:5e3})):this._snackBar.open(`ERROR: ${t.mensaje}`,"Transformaci\xf3n",{duration:3e3})}):(this.bloqueoBotones=!1,this._snackBar.open("Faltan datos necesario. Favor complete los datos e intente de nuevo.","Transformaci\xf3n",{duration:3e3}))}}ngOnInit(){this.egreso={egreso:null,tipo_movimiento:null,bodega:null,fecha:A().format(E.a.dbDateFormat),usuario:this.ls.get(E.a.usrTokenVar).idusr||0,estatus_movimiento:1,traslado:0},this.ingreso={ingreso:null,tipo_movimiento:null,fecha:A().format(E.a.dbDateFormat),bodega:null,usuario:this.ls.get(E.a.usrTokenVar).idusr||0,comentario:null,proveedor:null}}doSomething(){}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(R.a),B.Nb(v.b),B.Nb(fe))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-transformacion"]],viewQuery:function(t,e){if(1&t&&(B.Kc(gn,1),B.Kc(hn,1)),2&t){let t;B.sc(t=B.cc())&&(e.frmEgreso=t.first),B.sc(t=B.cc())&&(e.frmIngreso=t.first)}},decls:15,vars:6,consts:[[1,"row"],[1,"col","m12","s12",2,"padding-bottom","5px !important"],["align","end"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[2,"font-size","18pt"],[1,"col","m6","s12"],[3,"egreso","saveToDB","egresoChange","egresoSavedEv"],["frmEgreso",""],[3,"bodega","ingreso","saveToDB","ingresoChange","ingresoSavedEv"],["frmIngreso",""]],template:function(t,e){1&t&&(B.Tb(0,"div",0),B.Tb(1,"div",1),B.Tb(2,"div",2),B.Tb(3,"button",3),B.bc("click",function(){return e.transformar()}),B.Tb(4,"mat-icon",4),B.Fc(5,"transform"),B.Sb(),B.Fc(6,"\xa0Transformar "),B.Sb(),B.Sb(),B.Sb(),B.Sb(),B.Tb(7,"div",0),B.Tb(8,"div",5),B.Tb(9,"app-form-egreso",6,7),B.bc("egresoChange",function(t){return e.egreso=t})("egresoSavedEv",function(){return e.doSomething()}),B.Sb(),B.Sb(),B.Tb(11,"div",5),B.Tb(12,"app-form-ingreso",8,9),B.bc("ingresoChange",function(t){return e.ingreso=t})("ingresoSavedEv",function(){return e.doSomething()}),B.Sb(),B.Sb(),B.Sb(),B.Ob(14,"div",0)),2&t&&(B.Cb(3),B.lc("disabled",e.bloqueoBotones),B.Cb(6),B.lc("egreso",e.egreso)("saveToDB",!1),B.Cb(3),B.lc("bodega",!1)("ingreso",e.ingreso)("saveToDB",!1))},directives:[S.a,l.a,$i,ce],styles:[""]}),t})();var mn=i("NU9O");function fn(t,e){if(1&t&&(B.Tb(0,"mat-option",13),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.bodega),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Sn(t,e){if(1&t&&(B.Tb(0,"mat-option",13),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.sede),B.Cb(1),B.Hc(" ",t.nombre," ")}}function vn(t,e){1&t&&B.Ob(0,"app-cargando")}const Cn=function(){return{standalone:!0}};let Tn=(()=>{class t{constructor(t,e,i,o){this.snackBar=t,this.pdfServicio=e,this.sedeSrvc=i,this.bodegaSrvc=o,this.bodegas=[],this.sedes=[],this.params={},this.titulo="Existencias",this.cargando=!1,this.configBotones={showPdf:!0,showHtml:!1,showExcel:!0},this.getSede=(t={})=>{this.sedeSrvc.get(t).subscribe(t=>{this.sedes=t})},this.getBodega=(t={})=>{this.bodegaSrvc.get(t).subscribe(t=>{this.bodegas=t})},this.excelClick=()=>{this.params._excel=1,this.cargando=!0,this.pdfServicio.getReporteExistencia(this.params).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/vnd.ms-excel"});Object(io.saveAs)(e,`${this.titulo}.xls`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})},this.resetParams=()=>{this.params={},this.cargando=!1}}ngOnInit(){this.params.fecha=A().format(E.a.dbDateFormat),this.getSede(),this.getBodega()}onSubmit(){this.params._excel=0,this.cargando=!0,this.pdfServicio.getReporteExistencia(this.params).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/pdf"});Object(io.saveAs)(e,`${this.titulo}.pdf`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(v.b),B.Nb(bo.a),B.Nb(oo.a),B.Nb(K.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-existencias"]],decls:24,vars:9,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmRptExistencias","ngForm"],[1,"fullWidth"],["name","bodega",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","sede",3,"ngModel","ngModelChange"],["matInput","","type","date","placeholder","Al","required","",3,"ngModel","ngModelOptions","ngModelChange"],["align","end"],[3,"configuracion","excelClick","pdfClick","resetParamsClick"],[4,"ngIf"],[3,"value"]],template:function(t,e){1&t&&(B.Tb(0,"div",0),B.Tb(1,"div",1),B.Tb(2,"mat-card",2),B.Tb(3,"mat-card-title"),B.Tb(4,"h4"),B.Fc(5,"Reporte de existencias"),B.Sb(),B.Sb(),B.Tb(6,"mat-card-content"),B.Tb(7,"form",3,4),B.Tb(9,"mat-form-field",5),B.Tb(10,"mat-label"),B.Fc(11,"Bodega"),B.Sb(),B.Tb(12,"mat-select",6),B.bc("ngModelChange",function(t){return e.params.bodega=t}),B.Dc(13,fn,2,2,"mat-option",7),B.Sb(),B.Sb(),B.Tb(14,"mat-form-field",5),B.Tb(15,"mat-label"),B.Fc(16,"Sede"),B.Sb(),B.Tb(17,"mat-select",8),B.bc("ngModelChange",function(t){return e.params.sede=t}),B.Dc(18,Sn,2,2,"mat-option",7),B.Sb(),B.Sb(),B.Tb(19,"mat-form-field",5),B.Tb(20,"input",9),B.bc("ngModelChange",function(t){return e.params.fecha=t}),B.Sb(),B.Sb(),B.Tb(21,"div",10),B.Tb(22,"app-rpt-botones",11),B.bc("excelClick",function(){return e.excelClick()})("pdfClick",function(){return e.onSubmit()})("resetParamsClick",function(){return e.resetParams()}),B.Sb(),B.Sb(),B.Sb(),B.Dc(23,vn,1,0,"app-cargando",12),B.Sb(),B.Sb(),B.Sb(),B.Sb()),2&t&&(B.Cb(12),B.lc("ngModel",e.params.bodega),B.Cb(1),B.lc("ngForOf",e.bodegas),B.Cb(4),B.lc("ngModel",e.params.sede),B.Cb(1),B.lc("ngForOf",e.sedes),B.Cb(2),B.lc("ngModel",e.params.fecha)("ngModelOptions",B.nc(8,Cn)),B.Cb(2),B.lc("configuracion",e.configBotones),B.Cb(1),B.lc("ngIf",e.cargando))},directives:[b.a,b.h,b.c,a.r,a.l,a.m,d.b,d.f,m.a,a.k,a.n,o.l,u.b,a.c,a.p,mn.a,o.m,j.m,no.a],styles:[""]}),t})();function _n(t,e){if(1&t&&(B.Tb(0,"mat-option",14),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.articulo),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function xn(t,e){if(1&t&&(B.Tb(0,"mat-option",14),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.bodega),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Mn(t,e){if(1&t&&(B.Tb(0,"mat-option",14),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.sede),B.Cb(1),B.Hc(" ",t.nombre," ")}}function In(t,e){1&t&&B.Ob(0,"app-cargando")}const Dn=function(){return{standalone:!0}};let Fn=(()=>{class t{constructor(t,e,i,o,n){this.snackBar=t,this.pdfServicio=e,this.sedeSrvc=i,this.bodegaSrvc=o,this.articuloSrvc=n,this.bodegas=[],this.sedes=[],this.articulos=[],this.params={},this.titulo="Kardex",this.cargando=!1,this.configBotones={showPdf:!0,showHtml:!1,showExcel:!0},this.getSede=(t={})=>{this.sedeSrvc.get(t).subscribe(t=>{this.sedes=t})},this.getArticulo=(t={})=>{this.articuloSrvc.getArticulosIngreso(t).subscribe(t=>{this.articulos=t})},this.getBodega=(t={})=>{this.bodegaSrvc.get(t).subscribe(t=>{this.bodegas=t})},this.excelClick=()=>{this.params._excel=1,this.cargando=!0,this.pdfServicio.getReporteKardex(this.params).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/vnd.ms-excel"});Object(io.saveAs)(e,`${this.titulo}.xls`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})},this.resetParams=()=>{this.params={},this.cargando=!1}}ngOnInit(){this.getSede(),this.getBodega(),this.getArticulo()}onSubmit(){this.params._excel=0,this.pdfServicio.getReporteKardex(this.params).subscribe(t=>{if(t){const e=new Blob([t],{type:"application/pdf"});Object(io.saveAs)(e,`${this.titulo}.pdf`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(v.b),B.Nb(bo.a),B.Nb(oo.a),B.Nb(K.a),B.Nb(Q.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-kardex"]],decls:30,vars:14,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],[1,"fullWidth"],["name","articulo","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","bodega",3,"ngModel","ngModelChange"],["name","sede",3,"ngModel","ngModelChange"],["matInput","","type","date","placeholder","Del","required","",3,"ngModel","ngModelOptions","ngModelChange"],["matInput","","type","date","placeholder","Al","required","",3,"ngModel","ngModelOptions","ngModelChange"],["align","end"],[3,"configuracion","excelClick","pdfClick","resetParamsClick"],[4,"ngIf"],[3,"value"]],template:function(t,e){1&t&&(B.Tb(0,"div",0),B.Tb(1,"div",1),B.Tb(2,"mat-card",2),B.Tb(3,"mat-card-title"),B.Tb(4,"h4"),B.Fc(5,"Kardex"),B.Sb(),B.Sb(),B.Tb(6,"mat-card-content"),B.Tb(7,"form",3),B.Tb(8,"mat-form-field",4),B.Tb(9,"mat-label"),B.Fc(10,"Articulo"),B.Sb(),B.Tb(11,"mat-select",5),B.bc("ngModelChange",function(t){return e.params.articulo=t}),B.Dc(12,_n,2,2,"mat-option",6),B.Sb(),B.Sb(),B.Tb(13,"mat-form-field",4),B.Tb(14,"mat-label"),B.Fc(15,"Bodega"),B.Sb(),B.Tb(16,"mat-select",7),B.bc("ngModelChange",function(t){return e.params.bodega=t}),B.Dc(17,xn,2,2,"mat-option",6),B.Sb(),B.Sb(),B.Tb(18,"mat-form-field",4),B.Tb(19,"mat-label"),B.Fc(20,"Sede"),B.Sb(),B.Tb(21,"mat-select",8),B.bc("ngModelChange",function(t){return e.params.sede=t}),B.Dc(22,Mn,2,2,"mat-option",6),B.Sb(),B.Sb(),B.Tb(23,"mat-form-field",4),B.Tb(24,"input",9),B.bc("ngModelChange",function(t){return e.params.fdel=t}),B.Sb(),B.Sb(),B.Tb(25,"mat-form-field",4),B.Tb(26,"input",10),B.bc("ngModelChange",function(t){return e.params.fal=t}),B.Sb(),B.Sb(),B.Tb(27,"div",11),B.Tb(28,"app-rpt-botones",12),B.bc("excelClick",function(){return e.excelClick()})("pdfClick",function(){return e.onSubmit()})("resetParamsClick",function(){return e.resetParams()}),B.Sb(),B.Sb(),B.Sb(),B.Dc(29,In,1,0,"app-cargando",13),B.Sb(),B.Sb(),B.Sb(),B.Sb()),2&t&&(B.Cb(11),B.lc("ngModel",e.params.articulo),B.Cb(1),B.lc("ngForOf",e.articulos),B.Cb(4),B.lc("ngModel",e.params.bodega),B.Cb(1),B.lc("ngForOf",e.bodegas),B.Cb(4),B.lc("ngModel",e.params.sede),B.Cb(1),B.lc("ngForOf",e.sedes),B.Cb(2),B.lc("ngModel",e.params.fdel)("ngModelOptions",B.nc(12,Dn)),B.Cb(2),B.lc("ngModel",e.params.fal)("ngModelOptions",B.nc(13,Dn)),B.Cb(2),B.lc("configuracion",e.configBotones),B.Cb(1),B.lc("ngIf",e.cargando))},directives:[b.a,b.h,b.c,a.r,a.l,a.m,d.b,d.f,m.a,a.p,a.k,a.n,o.l,u.b,a.c,mn.a,o.m,j.m,no.a],styles:[""]}),t})();const yn=["frmIngreso"];let kn=(()=>{class t{constructor(t,e,i){this.ls=t,this.snackBar=e,this.transformacionSrvc=i,this.bloqueoBotones=!1,this.transformar=()=>{this.bloqueoBotones=!0,this.ingreso=this.frmIngreso.ingreso,this.produccion={tipo_movimiento:this.ingreso.tipo_movimiento,fecha:this.ingreso.fecha,proveedor:this.ingreso.proveedor,bodega:this.ingreso.bodega,usuario:this.ingreso.usuario,bodega_origen:this.ingreso.bodega_origen,comentario:this.ingreso.comentario,detalle:[]},this.frmIngreso.detallesIngreso.forEach(t=>this.produccion.detalle.push({articulo:t.articulo,cantidad:t.cantidad,precio_unitario:t.precio_unitario,precio_total:t.precio_total,presentacion:t.presentacion})),this.produccion&&this.produccion.detalle&&this.produccion.detalle.length>0?this.transformacionSrvc.producir(this.produccion).subscribe(t=>{this.bloqueoBotones=!1,t.exito?(this.frmIngreso.resetIngreso(),this.frmIngreso.detallesIngreso=[],this.snackBar.open("Producto generado con \xe9xito...","Producci\xf3n",{duration:5e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Producci\xf3n",{duration:3e3})}):(this.bloqueoBotones=!1,this.snackBar.open("Faltan datos necesario. Favor complete los datos e intente de nuevo.","Transformaci\xf3n",{duration:3e3}))},this.doSomething=()=>{}}ngOnInit(){this.ingreso={ingreso:null,tipo_movimiento:null,fecha:A().format(E.a.dbDateFormat),bodega:null,usuario:this.ls.get(E.a.usrTokenVar).idusr||0,comentario:null,proveedor:null}}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(R.a),B.Nb(v.b),B.Nb(fe))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-produccion"]],viewQuery:function(t,e){if(1&t&&B.Kc(yn,1),2&t){let t;B.sc(t=B.cc())&&(e.frmIngreso=t.first)}},decls:11,vars:4,consts:[[1,"row"],[1,"col","m12","s12",2,"padding-bottom","5px !important"],["align","end"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[2,"font-size","18pt"],[1,"col","m12","s12"],[3,"produccion","ingreso","saveToDB","ingresoChange","ingresoSavedEv"],["frmIngreso",""]],template:function(t,e){1&t&&(B.Tb(0,"div",0),B.Tb(1,"div",1),B.Tb(2,"div",2),B.Tb(3,"button",3),B.bc("click",function(){return e.transformar()}),B.Tb(4,"mat-icon",4),B.Fc(5,"transform"),B.Sb(),B.Fc(6,"\xa0Producir "),B.Sb(),B.Sb(),B.Sb(),B.Sb(),B.Tb(7,"div",0),B.Tb(8,"div",5),B.Tb(9,"app-form-ingreso",6,7),B.bc("ingresoChange",function(t){return e.ingreso=t})("ingresoSavedEv",function(){return e.doSomething()}),B.Sb(),B.Sb(),B.Sb()),2&t&&(B.Cb(3),B.lc("disabled",e.bloqueoBotones),B.Cb(6),B.lc("produccion",!0)("ingreso",e.ingreso)("saveToDB",!1))},directives:[S.a,l.a,ce],styles:[""]}),t})();function On(t,e){if(1&t&&(B.Tb(0,"mat-option",13),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.bodega),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function wn(t,e){if(1&t&&(B.Tb(0,"mat-option",13),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.sede),B.Cb(1),B.Hc(" ",t.nombre," ")}}function En(t,e){1&t&&B.Ob(0,"app-cargando")}const An=function(){return{standalone:!0}};let Bn=(()=>{class t{constructor(t,e,i,o){this.snackBar=t,this.pdfServicio=e,this.sedeSrvc=i,this.bodegaSrvc=o,this.bodegas=[],this.sedes=[],this.params={},this.titulo="Valorizado",this.cargando=!1,this.configBotones={showPdf:!0,showHtml:!1,showExcel:!0},this.getSede=(t={})=>{this.sedeSrvc.get(t).subscribe(t=>{this.sedes=t})},this.getBodega=(t={})=>{this.bodegaSrvc.get(t).subscribe(t=>{this.bodegas=t})},this.excelClick=()=>{this.params._excel=1,this.cargando=!0,this.pdfServicio.getReporteValorizado(this.params).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/vnd.ms-excel"});Object(io.saveAs)(e,`${this.titulo}.xls`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})},this.resetParams=()=>{this.params={},this.cargando=!1}}ngOnInit(){this.params.fecha=A().format(E.a.dbDateFormat),this.getSede(),this.getBodega()}onSubmit(){this.params._excel=0,this.cargando=!0,this.pdfServicio.getReporteValorizado(this.params).subscribe(t=>{if(this.cargando=!1,t){const e=new Blob([t],{type:"application/pdf"});Object(io.saveAs)(e,`${this.titulo}.pdf`)}else this.snackBar.open("No se pudo generar el reporte...",this.titulo,{duration:3e3})})}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(v.b),B.Nb(bo.a),B.Nb(oo.a),B.Nb(K.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-valorizado"]],decls:24,vars:9,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],["novalidate",""],["frmRptValorizado","ngForm"],[1,"fullWidth"],["name","bodega",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","sede",3,"ngModel","ngModelChange"],["matInput","","type","date","placeholder","Al","required","",3,"ngModel","ngModelOptions","ngModelChange"],["align","end"],[3,"configuracion","excelClick","pdfClick","resetParamsClick"],[4,"ngIf"],[3,"value"]],template:function(t,e){1&t&&(B.Tb(0,"div",0),B.Tb(1,"div",1),B.Tb(2,"mat-card",2),B.Tb(3,"mat-card-title"),B.Tb(4,"h4"),B.Fc(5,"Inventario Valorizado"),B.Sb(),B.Sb(),B.Tb(6,"mat-card-content"),B.Tb(7,"form",3,4),B.Tb(9,"mat-form-field",5),B.Tb(10,"mat-label"),B.Fc(11,"Bodega"),B.Sb(),B.Tb(12,"mat-select",6),B.bc("ngModelChange",function(t){return e.params.bodega=t}),B.Dc(13,On,2,2,"mat-option",7),B.Sb(),B.Sb(),B.Tb(14,"mat-form-field",5),B.Tb(15,"mat-label"),B.Fc(16,"Sede"),B.Sb(),B.Tb(17,"mat-select",8),B.bc("ngModelChange",function(t){return e.params.sede=t}),B.Dc(18,wn,2,2,"mat-option",7),B.Sb(),B.Sb(),B.Tb(19,"mat-form-field",5),B.Tb(20,"input",9),B.bc("ngModelChange",function(t){return e.params.fecha=t}),B.Sb(),B.Sb(),B.Tb(21,"div",10),B.Tb(22,"app-rpt-botones",11),B.bc("excelClick",function(){return e.excelClick()})("pdfClick",function(){return e.onSubmit()})("resetParamsClick",function(){return e.resetParams()}),B.Sb(),B.Sb(),B.Sb(),B.Dc(23,En,1,0,"app-cargando",12),B.Sb(),B.Sb(),B.Sb(),B.Sb()),2&t&&(B.Cb(12),B.lc("ngModel",e.params.bodega),B.Cb(1),B.lc("ngForOf",e.bodegas),B.Cb(4),B.lc("ngModel",e.params.sede),B.Cb(1),B.lc("ngForOf",e.sedes),B.Cb(2),B.lc("ngModel",e.params.fecha)("ngModelOptions",B.nc(8,An)),B.Cb(2),B.lc("configuracion",e.configBotones),B.Cb(1),B.lc("ngIf",e.cargando))},directives:[b.a,b.h,b.c,a.r,a.l,a.m,d.b,d.f,m.a,a.k,a.n,o.l,u.b,a.c,a.p,mn.a,o.m,j.m,no.a],styles:[""]}),t})(),Rn=(()=>{class t{constructor(t){this.http=t,this.fisicoUrl="fisico",this.srvcErrHndl=new $.a}generarInventarioFisico(t){return this.http.post(`${E.a.urlWms}/${this.fisicoUrl}/generar`,t).pipe(Object(H.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}confirmar(t){return this.http.post(`${E.a.urlWms}/${this.fisicoUrl}/confirmar/${+t.inventario_fisico>0?"/"+t.inventario_fisico:""}`,{}).pipe(Object(H.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}getDetalle(t,e={}){return this.http.get(`${E.a.urlWms}/${this.fisicoUrl}/buscar_detalle/${t}?${N.stringify(e)}`).pipe(Object(H.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}saveDetalle(t){return this.http.post(`${E.a.urlWms}/${this.fisicoUrl}/actualizar/`,t).pipe(Object(H.a)(E.a.reintentos),Object(P.a)(this.srvcErrHndl.errorHandler))}}return t.\u0275fac=function(e){return new(e||t)(B.Xb(n.b))},t.\u0275prov=B.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function $n(t,e){1&t&&(B.Tb(0,"mat-icon",8),B.Fc(1,"expand_more"),B.Sb())}function Hn(t,e){1&t&&(B.Tb(0,"mat-icon",8),B.Fc(1,"expand_less"),B.Sb())}function Pn(t,e){if(1&t&&(B.Tb(0,"mat-option",21),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.bodega),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Nn(t,e){if(1&t&&(B.Tb(0,"mat-option",21),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.sede),B.Cb(1),B.Hc(" ",t.nombre," ")}}function Un(t,e){if(1&t&&(B.Tb(0,"mat-option",21),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function jn(t,e){if(1&t&&(B.Tb(0,"mat-option",21),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.categoria_grupo),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function Gn(t,e){1&t&&B.Ob(0,"app-cargando")}const zn=function(){return{standalone:!0}};function qn(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-card-content"),B.Tb(1,"form",9,10),B.bc("ngSubmit",function(){B.xc(t);const e=B.tc(2),i=B.fc();return e.form.valid&&i.onSubmit()}),B.Tb(3,"mat-form-field",11),B.Tb(4,"mat-label"),B.Fc(5,"Bodega"),B.Sb(),B.Tb(6,"mat-select",12),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().params.bodega=e}),B.Dc(7,Pn,2,2,"mat-option",13),B.Sb(),B.Sb(),B.Tb(8,"mat-form-field",11),B.Tb(9,"mat-label"),B.Fc(10,"Sede"),B.Sb(),B.Tb(11,"mat-select",14),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().params.sede=e}),B.Dc(12,Nn,2,2,"mat-option",13),B.Sb(),B.Sb(),B.Tb(13,"mat-form-field",11),B.Tb(14,"mat-label"),B.Fc(15,"Categor\xeda"),B.Sb(),B.Tb(16,"mat-select",15),B.bc("selectionChange",function(e){return B.xc(t),B.fc().onCategoriaSelected(e)}),B.Dc(17,Un,2,2,"mat-option",13),B.Sb(),B.Sb(),B.Tb(18,"mat-form-field",11),B.Tb(19,"mat-label"),B.Fc(20,"Sub-categor\xeda"),B.Sb(),B.Tb(21,"mat-select",16),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().params.categoria_grupo_grupo=e}),B.Dc(22,jn,2,2,"mat-option",13),B.Sb(),B.Sb(),B.Tb(23,"mat-form-field",11),B.Tb(24,"input",17),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().params.fecha=e}),B.Sb(),B.Sb(),B.Tb(25,"mat-checkbox",18),B.bc("ngModelChange",function(e){return B.xc(t),+(B.fc().params._excel=e)}),B.Fc(26,"Generar en Excel "),B.Sb(),B.Tb(27,"div",19),B.Tb(28,"button",20),B.Fc(29,"GENERAR"),B.Sb(),B.Sb(),B.Sb(),B.Dc(30,Gn,1,0,"app-cargando",7),B.Sb()}if(2&t){const t=B.tc(2),e=B.fc();B.Cb(6),B.lc("ngModel",e.params.bodega),B.Cb(1),B.lc("ngForOf",e.bodegas),B.Cb(4),B.lc("ngModel",e.params.sede),B.Cb(1),B.lc("ngForOf",e.sedes),B.Cb(5),B.lc("ngForOf",e.categorias),B.Cb(4),B.lc("ngModel",e.params.categoria_grupo_grupo),B.Cb(1),B.lc("ngForOf",e.categoriasGruposPadre),B.Cb(2),B.lc("ngModel",e.params.fecha)("ngModelOptions",B.nc(12,zn)),B.Cb(1),B.lc("ngModel",+e.params._excel),B.Cb(3),B.lc("disabled",!t.form.valid),B.Cb(2),B.lc("ngIf",e.cargando)}}let Ln=(()=>{class t{constructor(t,e,i,o,n,a,c){this.snackBar=t,this.pdfServicio=e,this.sedeSrvc=i,this.bodegaSrvc=o,this.articuloSrvc=n,this.fisicoSrvc=a,this.ls=c,this.bodegas=[],this.sedes=[],this.params={},this.categorias=[],this.categoriasGruposPadre=[],this.categoriasGrupos=[],this.titulo="Fisico",this.cargando=!1,this.showReporte=!0,this.getSede=(t={})=>{this.sedeSrvc.get(t).subscribe(t=>{this.sedes=t})},this.getBodega=(t={})=>{this.bodegaSrvc.get(t).subscribe(t=>{this.bodegas=t})},this.loadCategorias=()=>{this.articuloSrvc.getCategorias({sede:+this.ls.get(E.a.usrTokenVar).sede||0}).subscribe(t=>{t&&(this.categorias=t)})},this.onCategoriaSelected=t=>this.loadSubCategorias(+t.value.categoria),this.loadSubCategorias=t=>{this.articuloSrvc.getCategoriasGrupos({categoria:+t}).subscribe(t=>{t&&(this.categoriasGruposPadre=this.articuloSrvc.adaptCategoriaGrupoResponse(t),this.categoriasGrupos=this.categoriasGruposPadre)})},this.onSubCategoriaPadreSelected=t=>this.loadSubCategoriasSubcategorias(+t.value),this.loadSubCategoriasSubcategorias=t=>{this.articuloSrvc.getCategoriasGrupos({categoria_grupo_grupo:t}).subscribe(t=>{t&&(this.categoriasGrupos=this.articuloSrvc.adaptCategoriaGrupoResponse(t))})}}ngOnInit(){this.getSede(),this.getBodega(),this.loadCategorias(),this.params.fecha=A().format(E.a.dbDateFormat)}onSubmit(){this.cargando=!0,this.fisicoSrvc.generarInventarioFisico(this.params).subscribe(t=>{this.cargando=!1,console.log(t),t.exito?this.pdfServicio.imprimirInventarioFisico(t.inventario,this.params).subscribe(t=>{if(this.params._excel){const e=new Blob([t],{type:"application/vnd.ms-excel"});Object(io.saveAs)(e,`${this.titulo}.xls`)}else{const e=new Blob([t],{type:"application/pdf"});Object(io.saveAs)(e,`${this.titulo}.pdf`)}}):this.snackBar.open("No se pudo generar el reporte... "+t.mensaje,this.titulo,{duration:3e3})})}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(v.b),B.Nb(bo.a),B.Nb(oo.a),B.Nb(K.a),B.Nb(Q.a),B.Nb(Rn),B.Nb(R.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-reporte"]],decls:13,vars:3,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],[1,"col"],[1,"col",2,"float","right"],["mat-button","","type","button","color","accent",3,"click"],["class","iconFontSize",4,"ngIf"],[4,"ngIf"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],["frmFisicoReporte","ngForm"],[1,"fullWidth"],["name","bodega","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","sede","required","",3,"ngModel","ngModelChange"],["name","categoria",3,"selectionChange"],["name","categoriaGrupoPadre",3,"ngModel","ngModelChange"],["matInput","","type","date","placeholder","Fecha","readonly","","required","",3,"ngModel","ngModelOptions","ngModelChange"],["name","excel",1,"fullWidth",3,"ngModel","ngModelChange"],["align","end"],["mat-button","","color","accent","type","submit",3,"disabled"],[3,"value"]],template:function(t,e){1&t&&(B.Tb(0,"div",0),B.Tb(1,"div",1),B.Tb(2,"mat-card",2),B.Tb(3,"mat-card-title"),B.Tb(4,"div",0),B.Tb(5,"div",3),B.Tb(6,"h4"),B.Fc(7,"Inventario F\xedsico"),B.Sb(),B.Sb(),B.Tb(8,"div",4),B.Tb(9,"button",5),B.bc("click",function(){return e.showReporte=!e.showReporte}),B.Dc(10,$n,2,0,"mat-icon",6),B.Dc(11,Hn,2,0,"mat-icon",6),B.Sb(),B.Sb(),B.Sb(),B.Sb(),B.Dc(12,qn,31,13,"mat-card-content",7),B.Sb(),B.Sb(),B.Sb()),2&t&&(B.Cb(10),B.lc("ngIf",e.showReporte),B.Cb(1),B.lc("ngIf",!e.showReporte),B.Cb(1),B.lc("ngIf",e.showReporte))},directives:[b.a,b.h,S.a,o.m,l.a,b.c,a.r,a.l,a.m,d.b,d.f,m.a,a.p,a.k,a.n,o.l,u.b,a.c,f.a,j.m,no.a],styles:[""]}),t})();function Wn(t,e){1&t&&(B.Tb(0,"mat-icon",9),B.Fc(1,"expand_more"),B.Sb())}function Vn(t,e){1&t&&(B.Tb(0,"mat-icon",9),B.Fc(1,"expand_less"),B.Sb())}function Kn(t,e){1&t&&B.Ob(0,"app-cargando")}function Qn(t,e){if(1&t){const t=B.Ub();B.Tb(0,"mat-card-content"),B.Tb(1,"form",10),B.bc("ngSubmit",function(){return B.xc(t),B.fc().buscar()}),B.Tb(2,"mat-form-field",11),B.Tb(3,"input",12),B.bc("ngModelChange",function(e){return B.xc(t),B.fc().params.numero=e}),B.Sb(),B.Tb(4,"button",13),B.Fc(5,"Buscar"),B.Sb(),B.Sb(),B.Sb(),B.Dc(6,Kn,1,0,"app-cargando",7),B.Sb()}if(2&t){const t=B.fc();B.Cb(3),B.lc("ngModel",t.params.numero),B.Cb(3),B.lc("ngIf",t.cargando)}}const Xn=function(){return{standalone:!0}};function Jn(t,e){if(1&t&&(B.Tb(0,"tr"),B.Tb(1,"td",24),B.Fc(2),B.Sb(),B.Tb(3,"td",24),B.Tb(4,"mat-form-field"),B.Tb(5,"input",25),B.bc("ngModelChange",function(t){return e.$implicit.existencia_sistema=t}),B.Sb(),B.Sb(),B.Sb(),B.Tb(6,"td",24),B.Tb(7,"mat-form-field",11),B.Tb(8,"input",26),B.bc("ngModelChange",function(t){return e.$implicit.existencia_fisica=t}),B.Sb(),B.Sb(),B.Sb(),B.Sb()),2&t){const t=e.$implicit;B.Cb(2),B.Hc(" ",t.narticulo," "),B.Cb(3),B.lc("ngModel",t.existencia_sistema)("ngModelOptions",B.nc(5,Xn)),B.Cb(3),B.lc("ngModel",t.existencia_fisica)("ngModelOptions",B.nc(6,Xn))}}function Zn(t,e){if(1&t&&(B.Rb(0),B.Tb(1,"tr"),B.Tb(2,"th",23),B.Fc(3),B.Sb(),B.Sb(),B.Dc(4,Jn,9,7,"tr",17),B.Qb()),2&t){const t=e.$implicit;B.Cb(3),B.Gc(t.descripcion),B.Cb(1),B.lc("ngForOf",t.datos)}}function Yn(t,e){if(1&t&&(B.Rb(0),B.Tb(1,"tr"),B.Tb(2,"th",22),B.Tb(3,"mat-label"),B.Fc(4),B.Sb(),B.Sb(),B.Sb(),B.Dc(5,Zn,5,2,"ng-container",17),B.Qb()),2&t){const t=e.$implicit;B.Cb(4),B.Gc(t.descripcion),B.Cb(1),B.lc("ngForOf",t.datos)}}function ta(t,e){1&t&&(B.Tb(0,"button",27),B.Fc(1,"Guardar"),B.Sb())}function ea(t,e){if(1&t){const t=B.Ub();B.Tb(0,"button",20),B.bc("click",function(){return B.xc(t),B.fc(2).confirmar()}),B.Fc(1,"Confirmar"),B.Sb()}}function ia(t,e){1&t&&B.Ob(0,"app-cargando")}function oa(t,e){if(1&t){const t=B.Ub();B.Tb(0,"div",0),B.Tb(1,"div",1),B.Tb(2,"mat-card",2),B.Ob(3,"mat-card-title"),B.Tb(4,"mat-card-content"),B.Tb(5,"form",14,15),B.bc("ngSubmit",function(){B.xc(t);const e=B.tc(6),i=B.fc();return e.form.valid&&i.actualizar()}),B.Tb(7,"table",16),B.Dc(8,Yn,6,2,"ng-container",17),B.Sb(),B.Tb(9,"div",18),B.Dc(10,ta,2,0,"button",19),B.Tb(11,"button",20),B.bc("click",function(){return B.xc(t),B.fc().imprimir()}),B.Fc(12,"PDF"),B.Sb(),B.Tb(13,"button",20),B.bc("click",function(){return B.xc(t),B.fc().imprimirXls()}),B.Fc(14,"Excel"),B.Sb(),B.Dc(15,ea,2,0,"button",21),B.Sb(),B.Sb(),B.Dc(16,ia,1,0,"app-cargando",7),B.Sb(),B.Sb(),B.Sb(),B.Sb()}if(2&t){const t=B.fc();B.Cb(8),B.lc("ngForOf",t.articulos),B.Cb(2),B.lc("ngIf",0==t.inventario.confirmado),B.Cb(5),B.lc("ngIf",0==t.inventario.confirmado),B.Cb(1),B.lc("ngIf",t.cargando)}}let na=(()=>{class t{constructor(t,e,i,o){this.snackBar=t,this.pdfServicio=e,this.fisicoSrvc=i,this.dialog=o,this.showForm=!0,this.params={},this.cargando=!1,this.articulos=[],this.inventario={},this.titulo="Inventario_Fisico",this.resetDatos=()=>{this.articulos=[],this.inventario={inventario_fisico:0,sede:null,usuario:null,categoria_grupo:null,fhcreacion:null,fecha:null,notas:null,confirmado:0}},this.buscar=()=>{(""+this.params.numero).length<19?(this.resetDatos(),this.fisicoSrvc.getDetalle(this.params.numero).subscribe(t=>{t&&t.exito?(this.articulos=t.detalle,this.inventario=t.inventario):this.snackBar.open(`ERROR: ${t.mensaje}`,"Inventario",{duration:3e3})})):this.snackBar.open("ERROR: El texto sobrepasa la longitud permitida","Inventario",{duration:3e3})},this.actualizar=()=>{this.fisicoSrvc.saveDetalle(this.articulos).subscribe(t=>{this.snackBar.open(t.exito?"Datos actualizados exitosamente":`ERROR: ${t.mensaje}`,"Inventario",{duration:3e3})})},this.confirmar=()=>{this.dialog.open(L.a,{maxWidth:"400px",data:new L.b("Confirmar Inventario Fisico","No podr\xe1 modificar los datos ingresados. \xbfDesea continuar?","S\xed","No")}).afterClosed().subscribe(t=>{t&&this.fisicoSrvc.confirmar(this.inventario).subscribe(t=>{t.exito?(this.inventario=t.inventario,this.snackBar.open("Inventario confirmado exitosamente","Inventario",{duration:3e3})):this.snackBar.open(`ERROR: ${t.mensaje}`,"Inventario",{duration:3e3})})})},this.imprimir=()=>{this.pdfServicio.imprimirInventarioFisico(this.inventario.inventario_fisico,{existencia_fisica:!0}).subscribe(t=>{const e=new Blob([t],{type:"application/pdf"});Object(io.saveAs)(e,`${this.titulo}.pdf`)})},this.imprimirXls=()=>{this.pdfServicio.imprimirInventarioFisico(this.inventario.inventario_fisico,{existencia_fisica:!0,_excel:!0}).subscribe(t=>{const e=new Blob([t],{type:"application/vnd.ms-excel"});Object(io.saveAs)(e,`${this.titulo}.xls`)})}}ngOnInit(){this.resetDatos()}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(v.b),B.Nb(bo.a),B.Nb(Rn),B.Nb(M.b))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-form-inventario-fisico"]],decls:14,vars:4,consts:[[1,"row"],[1,"col","m12","s12"],[1,"mat-elevation-z4","fullWidth"],[1,"col"],[1,"col",2,"float","right"],["mat-button","","type","button","color","accent",3,"click"],["class","iconFontSize",4,"ngIf"],[4,"ngIf"],["class","row",4,"ngIf"],[1,"iconFontSize"],["novalidate","",3,"ngSubmit"],[1,"fullWidth"],["matInput","","type","number","maxlength","17","max","17","placeholder","N\xfamero","name","numero","required","",3,"ngModel","ngModelChange"],["mat-raised-button","","matSuffix","","color","accent","type","submit"],["novalidate","","autocomplete","off",3,"ngSubmit"],["frmConteoFisico","ngForm"],[1,"tbl"],[4,"ngFor","ngForOf"],["align","end"],["mat-button","","color","accent","type","submit",4,"ngIf"],["mat-button","","color","accent","type","button",3,"click"],["mat-button","","color","accent","type","button",3,"click",4,"ngIf"],["colspan","2",1,"brdTSingleBSingle"],["colspan","3",1,"brdTSingleBSingle"],[1,"brdTSingleBSingle"],["matInput","","type","number","step","0.01","placeholder","Existencia Sistema","disabled","",2,"color","black","-webkit-text-fill-color","black",3,"ngModel","ngModelOptions","ngModelChange"],["matInput","","type","number","step","0.01","placeholder","Cantidad","required","",3,"ngModel","ngModelOptions","ngModelChange"],["mat-button","","color","accent","type","submit"]],template:function(t,e){1&t&&(B.Tb(0,"div",0),B.Tb(1,"div",1),B.Tb(2,"mat-card",2),B.Tb(3,"mat-card-title"),B.Tb(4,"div",0),B.Tb(5,"div",3),B.Tb(6,"h4"),B.Fc(7,"Ingreso Inventario F\xedsico"),B.Sb(),B.Sb(),B.Tb(8,"div",4),B.Tb(9,"button",5),B.bc("click",function(){return e.showForm=!e.showForm}),B.Dc(10,Wn,2,0,"mat-icon",6),B.Dc(11,Vn,2,0,"mat-icon",6),B.Sb(),B.Sb(),B.Sb(),B.Sb(),B.Dc(12,Qn,7,2,"mat-card-content",7),B.Sb(),B.Sb(),B.Sb(),B.Dc(13,oa,17,4,"div",8)),2&t&&(B.Cb(10),B.lc("ngIf",e.showForm),B.Cb(1),B.lc("ngIf",!e.showForm),B.Cb(1),B.lc("ngIf",e.showForm),B.Cb(1),B.lc("ngIf",e.articulos.length>0))},directives:[b.a,b.h,S.a,o.m,l.a,b.c,a.r,a.l,a.m,d.b,u.b,a.o,a.c,a.f,a.p,a.k,a.n,d.g,no.a,o.l,d.f],styles:[""]}),t})();const aa=["rptInventario"],ca=["frmInventario"];let ra=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=B.Hb({type:t,selectors:[["app-fisico"]],viewQuery:function(t,e){if(1&t&&(B.Kc(aa,1),B.Kc(ca,1)),2&t){let t;B.sc(t=B.cc())&&(e.rptInventarioComponent=t.first),B.sc(t=B.cc())&&(e.frmInventarioComponent=t.first)}},decls:6,vars:0,consts:[[1,"row"],[1,"col","s12","m12"]],template:function(t,e){1&t&&(B.Tb(0,"div",0),B.Tb(1,"div",1),B.Ob(2,"app-reporte"),B.Sb(),B.Sb(),B.Tb(3,"div",0),B.Tb(4,"div",1),B.Ob(5,"app-form-inventario-fisico"),B.Sb(),B.Sb())},directives:[Ln,na],styles:[""]}),t})();var sa=i("quSY");function la(t,e){if(1&t&&(B.Tb(0,"mat-option",13),B.Fc(1),B.Sb()),2&t){const t=e.$implicit;B.lc("value",t.categoria_grupo),B.Cb(1),B.Hc(" ",t.descripcion," ")}}function da(t,e){if(1&t){const t=B.Ub();B.Tb(0,"tr"),B.Tb(1,"td",2),B.Tb(2,"mat-form-field",0),B.Tb(3,"mat-select",7),B.bc("ngModelChange",function(t){return e.$implicit.categoria_grupo=t}),B.Dc(4,la,2,2,"mat-option",8),B.Sb(),B.Sb(),B.Sb(),B.Tb(5,"td",3),B.Tb(6,"mat-form-field",0),B.Tb(7,"input",9),B.bc("ngModelChange",function(t){return e.$implicit.descripcion=t}),B.Sb(),B.Sb(),B.Sb(),B.Tb(8,"td",4),B.Tb(9,"mat-checkbox",10),B.bc("ngModelChange",function(t){return+(e.$implicit.mostrar_pos=t)}),B.Sb(),B.Sb(),B.Tb(10,"td",11),B.Tb(11,"button",12),B.bc("click",function(){B.xc(t);const i=e.$implicit;return B.fc().updArticulo(i)}),B.Fc(12," Guardar "),B.Sb(),B.Sb(),B.Sb()}if(2&t){const t=e.$implicit,i=B.fc();B.Cb(3),B.lc("ngModel",t.categoria_grupo),B.Cb(1),B.lc("ngForOf",i.categoriasGrupos),B.Cb(3),B.lc("ngModel",t.descripcion),B.Cb(2),B.lc("ngModel",+t.mostrar_pos),B.Cb(2),B.lc("disabled",i.cargando||!t.categoria_grupo||!t.descripcion)}}const ua=function(){return{standalone:!0}},ba=[{path:"ingresos",component:le,canActivate:[w.a]},{path:"egresos",component:Ni,canActivate:[w.a]},{path:"articulos",component:bn,canActivate:[w.a]},{path:"transformaciones",component:pn,canActivate:[w.a]},{path:"rptexistencia",component:Tn,canActivate:[w.a]},{path:"rptkardex",component:Fn,canActivate:[w.a]},{path:"produccion",component:kn,canActivate:[w.a]},{path:"rptvalorizado",component:Bn,canActivate:[w.a]},{path:"fisico",component:ra,canActivate:[w.a]},{path:"replicar_articulos_sedes",component:ro,canActivate:[w.a]},{path:"qeprod",component:(()=>{class t{constructor(t,e,i,o){this.dialog=t,this.snackBar=e,this.ls=i,this.articuloSrvc=o,this.categorias=[],this.categoriasGrupos=[],this.lstArticulos=[],this.lstArticulosFull=[],this.txtFiltro="",this.cargando=!1,this.endSubs=new sa.a,this.loadCategorias=()=>this.endSubs.add(this.articuloSrvc.getCategorias({sede:+this.ls.get(E.a.usrTokenVar).sede||0}).subscribe(t=>this.categorias=t)),this.loadSubCategorias=(t=null)=>{const e={_sede:+this.ls.get(E.a.usrTokenVar).sede||1,categoria:+t};t||delete e.categoria,this.endSubs.add(this.articuloSrvc.getCategoriasGrupos(e).subscribe(t=>{this.categoriasGrupos=this.articuloSrvc.adaptCategoriaGrupoResponse(t),this.categoriasGrupos.map(t=>{const e=this.categorias.find(e=>+e.categoria==+t.categoria);return e&&(t.descripcion=`${e.descripcion}-${t.descripcion}`),t}),this.categoriasGrupos=Object(E.c)(this.categoriasGrupos,"descripcion")}))},this.loadArticulos=()=>{this.endSubs.add(this.articuloSrvc.getArticulo({_sede:1}).subscribe(t=>{t.forEach(t=>{this.lstArticulosFull.push({articulo:t.articulo,categoria:t.categoria_grupo.categoria,categoria_grupo:+t.categoria_grupo.categoria_grupo,descripcion:t.descripcion,mostrar_pos:t.mostrar_pos})}),this.lstArticulos=JSON.parse(JSON.stringify(this.lstArticulosFull))}))},this.updArticulo=t=>{t.mostrar_pos=t.mostrar_pos?1:0;const e=this.dialog.open(L.a,{maxWidth:"400px",data:new L.b("Actualizar art\xedculo",`Esto guardar\xe1 las modificaciones realizadas en ${t.descripcion}. \xbfDesea continuar?`,"S\xed","No")});this.endSubs.add(e.afterClosed().subscribe(e=>{e&&(this.cargando=!0,this.endSubs.add(this.articuloSrvc.fastEdit(t).subscribe(t=>{t.exito?this.snackBar.open(t.mensaje,"Art\xedculo",{duration:3e3}):this.snackBar.open(`ERROR: ${t.mensaje}`,"Art\xedculo",{duration:7e3}),this.cargando=!1})))}))}}ngOnInit(){this.loadCategorias(),this.loadSubCategorias(),this.loadArticulos()}ngOnDestroy(){this.endSubs.unsubscribe()}applyFilter(){this.lstArticulos=this.txtFiltro.length>0?Object(E.b)(this.lstArticulosFull,this.txtFiltro):JSON.parse(JSON.stringify(this.lstArticulosFull))}}return t.\u0275fac=function(e){return new(e||t)(B.Nb(M.b),B.Nb(v.b),B.Nb(R.a),B.Nb(Q.a))},t.\u0275cmp=B.Hb({type:t,selectors:[["app-quick-edit-producto"]],decls:16,vars:4,consts:[[1,"fullWidth"],["matInput","","placeholder","Buscar...",3,"ngModel","ngModelOptions","keyup","ngModelChange"],[2,"width","36%"],[2,"width","42%"],[2,"width","12%","text-align","center"],[2,"width","10%"],[4,"ngFor","ngForOf"],["name","categoria_grupo",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","placeholder","Descripci\xf3n","name","descripcion","required","",3,"ngModel","ngModelChange"],["name","mostrar_pos",3,"ngModel","ngModelChange"],[2,"width","10%","text-align","center"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[3,"value"]],template:function(t,e){1&t&&(B.Tb(0,"table"),B.Tb(1,"caption"),B.Tb(2,"mat-form-field",0),B.Tb(3,"input",1),B.bc("keyup",function(){return e.applyFilter()})("ngModelChange",function(t){return e.txtFiltro=t}),B.Sb(),B.Sb(),B.Sb(),B.Tb(4,"thead"),B.Tb(5,"tr"),B.Tb(6,"th",2),B.Fc(7,"Subcategor\xeda"),B.Sb(),B.Tb(8,"th",3),B.Fc(9,"Art\xedculo"),B.Sb(),B.Tb(10,"th",4),B.Fc(11,"Mostrar en POS"),B.Sb(),B.Tb(12,"th",5),B.Fc(13,"\xa0"),B.Sb(),B.Sb(),B.Sb(),B.Tb(14,"tbody"),B.Dc(15,da,13,5,"tr",6),B.Sb(),B.Sb()),2&t&&(B.Cb(3),B.lc("ngModel",e.txtFiltro)("ngModelOptions",B.nc(3,ua)),B.Cb(12),B.lc("ngForOf",e.lstArticulos))},directives:[d.b,u.b,a.c,a.k,a.n,o.l,m.a,a.p,f.a,S.a,j.m],styles:["table[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}"]}),t})(),canActivate:[w.a]},{path:"**",redirectTo:"/admin/dashboard",pathMatch:"full"}];let ga=(()=>{class t{}return t.\u0275mod=B.Lb({type:t}),t.\u0275inj=B.Kb({factory:function(e){return new(e||t)},imports:[[O.d.forChild(ba)],O.d]}),t})(),ha=(()=>{class t{}return t.\u0275mod=B.Lb({type:t}),t.\u0275inj=B.Kb({factory:function(e){return new(e||t)},providers:[],imports:[[o.c,ga,c.a,r.a,n.c,a.e,k.b,s.d,l.b,d.d,u.c,b.f,g.b,h.c,p.l,m.b,f.b,S.b,v.c,C.b,T.d,_.b,x.b,M.e,I.d,D.c,F.b,y.c]]}),t})()}}]);