(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"0Uhh":function(e,t,n){"use strict";n.r(t),t.default='<mat-card class="mat-elevation-z4 fullWidth">\n    <mat-card-title>\n        <h4>\n            Ingreso{{!!ingreso.ingreso ? (\' No. \' + ingreso.ingreso) : \'\'}}\n            <button mat-icon-button type="button" color="accent" (click)="showIngresoForm = true;"\n                *ngIf="!showIngresoForm">\n                <mat-icon class="iconFontSize">expand_more</mat-icon>\n            </button>\n            <button mat-icon-button type="button" color="accent" (click)="showIngresoForm = false;"\n                *ngIf="showIngresoForm">\n                <mat-icon class="iconFontSize">expand_less</mat-icon>\n            </button>\n        </h4>\n    </mat-card-title>\n    <mat-card-content>\n        <form #frmIngreso="ngForm" *ngIf="showIngresoForm" (ngSubmit)="frmIngreso.form.valid && onSubmit()" novalidate>\n            <mat-form-field class="fullWidth">\n                <mat-label>Tipo de movimiento</mat-label>\n                <mat-select name="tipo_movimiento" [(ngModel)]="ingreso.tipo_movimiento" required>\n                    <mat-option *ngFor="let tm of tiposMovimiento" [value]="tm.tipo_movimiento">\n                        {{tm.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <input matInput type="date" placeholder="Fecha" name="fecha" [(ngModel)]="ingreso.fecha" required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <mat-label>Bodega</mat-label>\n                <mat-select name="bodega" [(ngModel)]="ingreso.bodega" required>\n                    <mat-option *ngFor="let bode of bodegas" [value]="bode.bodega">\n                        {{bode.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <mat-label>Bodega de origen</mat-label>\n                <mat-select name="bodega_origen" [(ngModel)]="ingreso.bodega_origen">\n                    <mat-option *ngFor="let bodeO of bodegas" [value]="bodeO.bodega">\n                        {{bodeO.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <mat-label>Proveedor</mat-label>\n                <mat-select name="proveedor" [(ngModel)]="ingreso.proveedor" required>\n                    <mat-option *ngFor="let prov of proveedores" [value]="prov.proveedor">\n                        ({{prov.nit}}) {{prov.razon_social}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="esMovil">\n                <input matInput placeholder="Comentarios" name="comentario" [(ngModel)]="ingreso.comentario">\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="alphanumeric"\n                    ng-virtual-keyboard-placeholder="Comentarios" placeholder="Comentarios" name="comentario"\n                    [(ngModel)]="ingreso.comentario">\n            </mat-form-field>\n            <div align="end">\n                <button mat-raised-button type="submit" color="accent" class="btnAccion" [disabled]="!frmIngreso.form.valid"\n                    *ngIf="saveToDB">\n                    Guardar\n                </button>\n                <button mat-raised-button type="button" color="accent" (click)="resetIngreso()" *ngIf="ingreso.ingreso">\n                    Nuevo\n                </button>\n            </div>\n        </form>\n    </mat-card-content>\n</mat-card>\n<hr *ngIf="ingreso.ingreso || !saveToDB" />\n<mat-card class="mat-elevation-z4 fullWidth" *ngIf="ingreso.ingreso || !saveToDB">\n    <mat-card-title>\n        <h4>\n            Detalle del ingreso {{saveToDB ? \'No.\' : \'\'}} {{ingreso.ingreso}}\n            <button mat-icon-button type="button" color="accent" (click)="showDetalleIngresoForm = true;"\n                *ngIf="!showDetalleIngresoForm">\n                <mat-icon class="iconFontSize">expand_more</mat-icon>\n            </button>\n            <button mat-icon-button type="button" color="accent" (click)="showDetalleIngresoForm = false;"\n                *ngIf="showDetalleIngresoForm">\n                <mat-icon class="iconFontSize">expand_less</mat-icon>\n            </button>\n        </h4>\n    </mat-card-title>\n    <mat-card-content>\n        <form #frmDetalleIngreso="ngForm" *ngIf="showDetalleIngresoForm" (ngSubmit)="frmDetalleIngreso.form.valid && onSubmitDetail()" novalidate>\n            <mat-form-field class="fullWidth">\n                <mat-label>Artículo</mat-label>\n                <mat-select name="articulo" [(ngModel)]="detalleIngreso.articulo" required>\n                    <mat-option *ngFor="let a of articulos" [value]="a.articulo">\n                        {{a.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <mat-label>Presentación</mat-label>\n                <mat-select name="presentacion" [(ngModel)]="detalleIngreso.presentacion" required>\n                    <mat-option *ngFor="let p of presentaciones" [value]="p.presentacion">\n                        {{p.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="esMovil">\n                <input matInput placeholder="Cantidad" name="cantidad" [(ngModel)]="detalleIngreso.cantidad"\n                    (change)="detalleIngreso.precio_total = +detalleIngreso.precio_unitario * +detalleIngreso.cantidad"\n                    required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="numeric"\n                    ng-virtual-keyboard-placeholder="Cantidad" placeholder="Cantidad" name="cantidad"\n                    [(ngModel)]="detalleIngreso.cantidad"\n                    (change)="detalleIngreso.precio_total = +detalleIngreso.precio_unitario * +detalleIngreso.cantidad"\n                    required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="esMovil">\n                <input matInput placeholder="Costo unitario" name="precio_unitario"\n                    [(ngModel)]="detalleIngreso.precio_unitario"\n                    (change)="detalleIngreso.precio_total = +detalleIngreso.precio_unitario * +detalleIngreso.cantidad"\n                    required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="numeric"\n                    ng-virtual-keyboard-placeholder="Costo unitario" placeholder="Costo unitario" name="precio_unitario"\n                    [(ngModel)]="detalleIngreso.precio_unitario"\n                    (change)="detalleIngreso.precio_total = +detalleIngreso.precio_unitario * +detalleIngreso.cantidad"\n                    required>\n            </mat-form-field>\n            <div align="end">\n                <button mat-raised-button type="submit" color="accent" class="btnAccion" [disabled]="!frmDetalleIngreso.form.valid"\n                    *ngIf="saveToDB">\n                    Guardar\n                </button>\n                <button mat-raised-button type="button" color="accent" (click)="addToDetail()"\n                    [disabled]="!frmDetalleIngreso.form.valid || [2, 3].indexOf(+ingreso.estatus_movimiento) >= 0"\n                    *ngIf="!saveToDB">\n                    Nuevo\n                </button>\n                <button mat-raised-button type="button" color="accent" (click)="resetDetalleIngreso()"\n                    *ngIf="detalleIngreso.ingreso_detalle">\n                    Nuevo\n                </button>\n            </div>\n        </form>\n        <hr *ngIf="detallesIngreso.length > 0" />\n        <table mat-table [dataSource]="dataSource" class="mat-elevation-z4 full-width"\n            *ngIf="detallesIngreso.length > 0">\n            <ng-container matColumnDef="articulo">\n                <th mat-header-cell *matHeaderCellDef>Artículo</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">\n                    {{saveToDB ? element.articulo.descripcion : getDescripcionArticulo(element.articulo)}}</td>\n            </ng-container>\n            <ng-container matColumnDef="presentacion">\n                <th mat-header-cell *matHeaderCellDef>Presentación</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">\n                    {{saveToDB ? element.presentacion.descripcion : getDescripcionPresentacion(element.presentacion)}}\n                </td>\n            </ng-container>\n            <ng-container matColumnDef="cantidad">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Cantidad</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.cantidad | number:\'1.2-2\'}}</td>\n            </ng-container>\n            <ng-container matColumnDef="costo_unitario">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Costo Unitario</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.precio_unitario | number:\'1.2-2\'}}\n                </td>\n            </ng-container>\n            <ng-container matColumnDef="costo_total">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Costo Total</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.precio_total | number:\'1.2-2\'}}</td>\n            </ng-container>\n            <ng-container matColumnDef="deleteItem">\n                <th mat-header-cell *matHeaderCellDef>&nbsp;</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">\n                    <button mat-raised-button type="button" color="accent"\n                        (click)="getDetalleIngreso(element.ingreso, element.ingreso_detalle)" *ngIf="saveToDB">\n                        Editar\n                    </button>\n                    <button mat-raised-button type="button" color="accent" (click)="removeFromDetail(element.articulo)"\n                        [disabled]="[2, 3].indexOf(+ingreso.estatus_movimiento) >= 0" *ngIf="!saveToDB">\n                        Editar\n                    </button>\n                </td>\n            </ng-container>\n            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>\n            <tr mat-row *matRowDef="let row; columns: displayedColumns;">\n            </tr>\n        </table>\n    </mat-card-content>\n</mat-card>'},"3e6T":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var o=n("mrSG"),a=n("CcnG"),r=n("t/Na"),i=n("sKxO"),l=n("R5jZ"),s=n("FY0D"),c=n("5tAl"),d=n("9Z1F"),u=n("Qyje"),m=function(){function e(e,t){this.http=e,this.ls=t,this.usrToken=null,this.srvcErrHndl=new l.a,this.usrToken=this.ls.get(i.a.usrTokenVar)?this.ls.get(i.a.usrTokenVar).token:null}return e.prototype.get=function(e){void 0===e&&(e={});var t={headers:new r.c({Authorization:this.usrToken})};return this.http.get(i.a.urlCatalogos+"/get_tipo_movimiento?"+u.stringify(e),t).pipe(Object(c.a)(i.a.reintentos),Object(d.a)(this.srvcErrHndl.errorHandler))},e.ctorParameters=function(){return[{type:r.a},{type:s.a}]},e=o.c([Object(a.Injectable)({providedIn:"root"})],e)}()},"4muF":function(e,t,n){"use strict";n.r(t),t.default='<div class="row">\n    <div class="col m12 s12">\n        <button mat-raised-button class="btnAccion" color="primary" *ngFor="let sc of subcategorias" (click)="clickOnSubCategoria(sc)" [disabled]="bloqueoBotones">\n            {{sc.descripcion}}\n        </button>\n    </div>\n</div>\n<hr *ngIf="articulos.length > 0" />\n<div class="row">\n    <div class="col m12 s12">\n        <button mat-raised-button class="btnAccion" color="warn" *ngFor="let art of articulos" (click)="clickOnArticulo(art)" [disabled]="bloqueoBotones">\n            {{art.descripcion}}\n        </button>\n    </div>\n</div>'},"5bcq":function(e,t,n){"use strict";n.r(t),t.default=".fullWidth {\n    width: 100% !important;\n}\n\ntable {\n    width: 100% !important;\n}"},"66Qk":function(e,t,n){"use strict";n.r(t),t.default='<mat-card class="mat-elevation-z4 fullWidth">\n    <mat-card-title>\n        <h4>\n            Artículo {{!!articulo.articulo ? articulo.descripcion: \'\'}}\n            <button mat-icon-button type="button" color="accent" (click)="showArticuloForm = true;"\n                *ngIf="!showArticuloForm">\n                <mat-icon class="iconFontSize">expand_more</mat-icon>\n            </button>\n            <button mat-icon-button type="button" color="accent" (click)="showArticuloForm = false;"\n                *ngIf="showArticuloForm">\n                <mat-icon class="iconFontSize">expand_less</mat-icon>\n            </button>\n        </h4>\n    </mat-card-title>\n    <mat-card-content>\n        <form #frmArticulo="ngForm" *ngIf="showArticuloForm" (ngSubmit)="frmArticulo.form.valid && onSubmit()" novalidate>\n            <mat-form-field class="fullWidth" *ngIf="esMovil">\n                <input matInput type="text" placeholder="Descripcion" name="descripcion"\n                    [(ngModel)]="articulo.descripcion" required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="alphanumeric"\n                    ng-virtual-keyboard-placeholder="Descripción" type="text" placeholder="Descripción"\n                    name="descripcion" [(ngModel)]="articulo.descripcion" required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="esMovil">\n                <input matInput type="number" placeholder="Precio" name="precio" [(ngModel)]="articulo.precio" required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="numeric"\n                    ng-virtual-keyboard-placeholder="Precio" type="number" placeholder="Precio" name="precio"\n                    [(ngModel)]="articulo.precio" required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <mat-label>Presentación</mat-label>\n                <mat-select name="presentacion" [(ngModel)]="articulo.presentacion">\n                    <mat-option *ngFor="let p of presentaciones" [value]="p.presentacion">\n                        {{p.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="esMovil">\n                <input matInput type="text" placeholder="Código" name="codigo" [(ngModel)]="articulo.codigo" required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="numeric"\n                    ng-virtual-keyboard-placeholder="Código" type="text" placeholder="Código" name="codigo"\n                    [(ngModel)]="articulo.codigo" required>\n            </mat-form-field>\n            <mat-checkbox name="produccion" class="fullWidth" [(ngModel)]="+articulo.produccion">¿Es produccion?</mat-checkbox>\n            <div align="end">\n                <button mat-raised-button type="submit" color="accent" class="btnAccion" [disabled]="!frmArticulo.form.valid || !articulo.categoria_grupo">\n                    Guardar\n                </button>\n                <button mat-raised-button type="button" color="accent" (click)="resetArticulo()" *ngIf="articulo.articulo">\n                    Nuevo\n                </button>\n            </div>\n        </form>\n    </mat-card-content>\n</mat-card>\n<hr *ngIf="articulo.articulo" />\n<mat-card class="mat-elevation-z4 fullWidth" *ngIf="articulo.articulo">\n    <mat-card-title>\n        <h4>\n            Detalle del artículo {{articulo.descripcion}}\n            <button mat-icon-button type="button" color="accent" (click)="showDetalleForm = true;"\n                *ngIf="!showDetalleForm">\n                <mat-icon class="iconFontSize">expand_more</mat-icon>\n            </button>\n            <button mat-icon-button type="button" color="accent" (click)="showDetalleForm = false;"\n                *ngIf="showDetalleForm">\n                <mat-icon class="iconFontSize">expand_less</mat-icon>\n            </button>\n        </h4>\n    </mat-card-title>\n    <mat-card-content>\n        <form #frmDetalleArticulo="ngForm" *ngIf="showDetalleForm" (ngSubmit)="frmDetalleArticulo.form.valid && onSubmitDetail()" novalidate>\n            <mat-form-field class="fullWidth">\n                <mat-label>Artículo</mat-label>\n                <mat-select name="articulo" [(ngModel)]="receta.articulo" required>\n                    <mat-option *ngFor="let a of articulos" [value]="a.articulo">\n                        {{a.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="esMovil">\n                <input matInput placeholder="Cantidad" name="cantidad" [(ngModel)]="receta.cantidad" required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="numeric"\n                    ng-virtual-keyboard-placeholder="Cantidad" placeholder="Cantidad" name="cantidad"\n                    [(ngModel)]="receta.cantidad" required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <mat-label>Unidad de medida</mat-label>\n                <mat-select name="medida" [(ngModel)]="receta.medida" required>\n                    <mat-option *ngFor="let m of medidas" [value]="m.medida">\n                        {{m.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-checkbox name="racionable" class="fullWidth" [(ngModel)]="+receta.racionable">¿Es racionable?</mat-checkbox>\n            <div align="end">\n                <button mat-raised-button type="submit" color="accent" class="btnAccion" [disabled]="!frmDetalleArticulo.form.valid">\n                    Guardar\n                </button>\n                <button mat-raised-button type="button" color="accent" (click)="resetReceta()" *ngIf="receta.articulo_detalle">\n                    Nuevo\n                </button>\n            </div>\n        </form>\n        <hr *ngIf="recetas.length > 0" />\n        <table mat-table [dataSource]="dataSource" class="mat-elevation-z4 full-width" *ngIf="recetas.length > 0">\n            <ng-container matColumnDef="articulo">\n                <th mat-header-cell *matHeaderCellDef>Artículo</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">{{element.articulo.descripcion}}</td>\n            </ng-container>\n            <ng-container matColumnDef="cantidad">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Cantidad</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.cantidad | number:\'1.2-2\'}}</td>\n            </ng-container>\n            <ng-container matColumnDef="medida">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Unida de medida</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.medida.descripcion}}</td>\n            </ng-container>\n            <ng-container matColumnDef="editItem">\n                <th mat-header-cell *matHeaderCellDef>&nbsp;</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">\n                    <button mat-raised-button type="button" color="accent" class="btnAccion" (click)="getReceta(element.receta, element.articulo_detalle)">\n                        Editar\n                    </button>\n                    <button mat-raised-button type="button" color="accent" (click)="eliminaReceta(element)">\n                        Eliminar\n                    </button>\n                </td>\n            </ng-container>\n            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>\n            <tr mat-row *matRowDef="let row; columns: displayedColumns;">\n            </tr>\n        </table>\n    </mat-card-content>\n</mat-card>'},"8Mvs":function(e,t,n){"use strict";n.r(t),t.default=""},CIKf:function(e,t,n){"use strict";n.r(t),t.default='<div class="row">\n  <div class="col m12 s12">\n    <mat-card class="mat-elevation-z4 fullWidth">\n      <mat-card-title>\n        <h4>Kardex</h4>\n      </mat-card-title>\n      <mat-card-content>\n        <form (ngSubmit)="onSubmit()" novalidate>\n          <mat-form-field class="fullWidth">\n              <mat-label>Articulo</mat-label>\n              <mat-select name="articulo" [(ngModel)]="params.articulo" required>\n                  <mat-option *ngFor="let art of articulos" [value]="art.articulo">\n                      {{art.descripcion}}\n                  </mat-option>\n              </mat-select>\n          </mat-form-field>\n          <mat-form-field class="fullWidth">\n              <mat-label>Bodega</mat-label>\n              <mat-select name="bodega" [(ngModel)]="params.bodega">\n                  <mat-option *ngFor="let bod of bodegas" [value]="bod.bodega">\n                      {{bod.descripcion}}\n                  </mat-option>\n              </mat-select>\n          </mat-form-field>\n          <mat-form-field class="fullWidth">\n              <mat-label>Sede</mat-label>\n              <mat-select name="sede" [(ngModel)]="params.sede">\n                  <mat-option *ngFor="let sede of sedes" [value]="sede.sede">\n                      {{sede.nombre}}\n                  </mat-option>\n              </mat-select>\n          </mat-form-field>\n          <mat-form-field class="fullWidth">            \n            <input matInput type="date" placeholder="Del" [(ngModel)]="params.fdel" [ngModelOptions]="{standalone: true}" required>\n          </mat-form-field>\n          <mat-form-field class="fullWidth">            \n            <input matInput type="date" placeholder="Al" [(ngModel)]="params.fal" [ngModelOptions]="{standalone: true}" required>\n          </mat-form-field>\n          <div align="end">\n            <button mat-button color="accent" type="submit">GENERAR</button>\n          </div>\n        </form>        \n      </mat-card-content>\n    </mat-card>\n  </div>\n</div>'},FHMA:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o=n("mrSG"),a=n("CcnG"),r=n("t/Na"),i=n("sKxO"),l=n("R5jZ"),s=n("FY0D"),c=n("5tAl"),d=n("9Z1F"),u=function(){function e(e,t){this.http=e,this.ls=t,this.usrToken=null,this.httpOptions={responseType:"blob"},this.srvcErrHndl=new l.a,this.usrToken=this.ls.get(i.a.usrTokenVar)?this.ls.get(i.a.usrTokenVar).token:null,this.httpOptions.headers=new r.c({Authorization:this.usrToken,Accept:"application/pdf"})}return e.prototype.getReporteCaja=function(e){return this.httpOptions.params=e,this.http.get(i.a.urlAppRestaurante+"/reporte/caja",this.httpOptions).pipe(Object(c.a)(i.a.reintentos),Object(d.a)(this.srvcErrHndl.errorHandler))},e.prototype.getReporteExistencia=function(e){return this.httpOptions.params=e,this.http.get(i.a.urlWms+"/reporte/existencia",this.httpOptions).pipe(Object(c.a)(i.a.reintentos),Object(d.a)(this.srvcErrHndl.errorHandler))},e.prototype.getReporteKardex=function(e){return this.httpOptions.params=e,this.http.get(i.a.urlWms+"/reporte/kardex",this.httpOptions).pipe(Object(c.a)(i.a.reintentos),Object(d.a)(this.srvcErrHndl.errorHandler))},e.prototype.getReporteFactura=function(e){return this.httpOptions.params=e,this.http.get(i.a.urlAppRestaurante+"/reporte/factura",this.httpOptions).pipe(Object(c.a)(i.a.reintentos),Object(d.a)(this.srvcErrHndl.errorHandler))},e.prototype.getReportePropina=function(e){return this.httpOptions.params=e,this.http.get(i.a.urlFacturacion+"/reporte/venta/propina",this.httpOptions).pipe(Object(c.a)(i.a.reintentos),Object(d.a)(this.srvcErrHndl.errorHandler))},e.prototype.getComanda=function(e){return this.http.get(i.a.urlAppRestaurante+"/comanda/imprimir/"+e+"/1",this.httpOptions).pipe(Object(c.a)(i.a.reintentos),Object(d.a)(this.srvcErrHndl.errorHandler))},e.ctorParameters=function(){return[{type:r.a},{type:s.a}]},e=o.c([Object(a.Injectable)({providedIn:"root"})],e)}()},Iab2:function(e,t,n){var o,a,r;a=[],void 0===(r="function"==typeof(o=function(){"use strict";function t(e,t,n){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){r(o.response,t,n)},o.onerror=function(){console.error("could not download file")},o.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,r=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype?function(e,r,i){var l=a.URL||a.webkitURL,s=document.createElement("a");r=r||e.name||"download",s.download=r,s.rel="noopener","string"==typeof e?(s.href=e,s.origin===location.origin?o(s):n(s.href)?t(e,r,i):o(s,s.target="_blank")):(s.href=l.createObjectURL(e),setTimeout((function(){l.revokeObjectURL(s.href)}),4e4),setTimeout((function(){o(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,a,r){if(a=a||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,r),a);else if(n(e))t(e,a,r);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout((function(){o(i)}))}}:function(e,n,o,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,o);var i="application/octet-stream"===e.type,l=/constructor/i.test(a.HTMLElement)||a.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&l)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=s?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},c.readAsDataURL(e)}else{var d=a.URL||a.webkitURL,u=d.createObjectURL(e);r?r.location=u:location.href=u,r=null,setTimeout((function(){d.revokeObjectURL(u)}),4e4)}});a.saveAs=r.saveAs=r,e.exports=r})?o.apply(t,a):o)||(e.exports=r)},JOQN:function(e,t,n){"use strict";n.r(t),t.default='<mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="example-tree" [style.height]="treeHeight">\n    \x3c!-- This is the tree node template for leaf nodes --\x3e\n    <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>\n        <li class="mat-tree-node">\n            \x3c!-- use a disabled button to provide padding for tree leaf --\x3e\n            <button mat-icon-button disabled></button>\n            <span *ngIf="tieneHijos(node)">{{node.nombre}}</span>\n            <button mat-raised-button type="button" *ngIf="!tieneHijos(node)"\n                (click)="onProductoClicked(node)">{{node.nombre}}</button>\n        </li>\n    </mat-tree-node>\n    \x3c!-- This is the tree node template for expandable nodes --\x3e\n    <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">\n        <li>\n            <div class="mat-tree-node">\n                <button mat-icon-button matTreeNodeToggle [attr.aria-label]="\'toggle \' + node.nombre">\n                    <mat-icon class="mat-icon-rtl-mirror" style="font-size: 24pt !important;">\n                        {{treeControl.isExpanded(node) ? \'expand_more\' : \'chevron_right\'}}\n                    </mat-icon>\n                </button>\n                <span *ngIf="tieneHijos(node)">{{node.nombre}}</span>\n                <button mat-raised-button type="button" *ngIf="!tieneHijos(node)" (click)="onProductoClicked(node);">{{node.nombre}}</button>\n            </div>\n            <ul [class.example-tree-invisible]="!treeControl.isExpanded(node)">\n                <ng-container matTreeNodeOutlet></ng-container>\n            </ul>\n        </li>\n    </mat-nested-tree-node>\n</mat-tree>\n\x3c!--\n<mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="example-tree">\n    \n    <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>\n        <li class="mat-tree-node">\n            \n            <button mat-icon-button disabled></button>\n            {{node.nombre}}\n        </li>\n    </mat-tree-node>\n    \n    <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">\n        <li>\n            <div class="mat-tree-node">\n                <button mat-icon-button matTreeNodeToggle [attr.aria-label]="\'toggle \' + node.nombre">\n                    <mat-icon class="mat-icon-rtl-mirror">\n                        {{treeControl.isExpanded(node) ? \'expand_more\' : \'chevron_right\'}}\n                    </mat-icon>\n                </button>\n                {{node.nombre}}\n            </div>\n            <ul [class.example-tree-invisible]="!treeControl.isExpanded(node)">\n                <ng-container matTreeNodeOutlet></ng-container>\n            </ul>\n        </li>\n    </mat-nested-tree-node>\n</mat-tree>\n--\x3e'},KtKg:function(e,t,n){"use strict";n.r(t),t.default="/*\n.mat-grid-list {\n    display: flex;\n    align-items: flex-start !important;\n    vertical-align: top !important;\n }\n*/\n/*\n .mat-grid-tile .mat-figure {\n    align-items: flex-start !important;\n }\n*/\n/*\n ::ng-deep md-grid-tile.mat-grid-tile .mat-figure {\n    align-items: flex-start;  \n    justify-content: flex-start;  \n}\n*/\n/*\nmat-grid-tile >::ng-deep .mat-figure {\n    align-items: flex-start;\n    overflow-y: auto;\n}\n*/"},NRFb:function(e,t,n){"use strict";n.r(t),t.default=""},PySw:function(e,t,n){"use strict";n.r(t),t.default=""},Q1s9:function(e,t,n){"use strict";n.r(t),t.default=""},SOpS:function(e,t,n){"use strict";n.r(t),t.default=""},Vthy:function(e,t,n){"use strict";n.r(t),t.default='<mat-card class="mat-elevation-z4 fullWidth">\n    <mat-card-title>\n        <h4>\n            Egreso{{!!egreso.egreso ? (\' No. \' + egreso.egreso) : \'\'}}\n            <button mat-icon-button type="button" color="accent" (click)="showEgresoForm = true;"\n                *ngIf="!showEgresoForm">\n                <mat-icon class="iconFontSize">expand_more</mat-icon>\n            </button>\n            <button mat-icon-button type="button" color="accent" (click)="showEgresoForm = false;"\n                *ngIf="showEgresoForm">\n                <mat-icon class="iconFontSize">expand_less</mat-icon>\n            </button>\n        </h4>\n    </mat-card-title>\n    <mat-card-content>\n        <form #frmEgreso="ngForm" *ngIf="showEgresoForm" (ngSubmit)="frmEgreso.form.valid && onSubmit()" novalidate>\n            <mat-form-field class="fullWidth">\n                <mat-label>Tipo de movimiento</mat-label>\n                <mat-select name="tipo_movimiento" [(ngModel)]="egreso.tipo_movimiento" required>\n                    <mat-option *ngFor="let tm of tiposMovimiento" [value]="tm.tipo_movimiento">\n                        {{tm.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <input matInput type="date" placeholder="Fecha" name="fecha" [(ngModel)]="egreso.fecha" required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <mat-label>Bodega</mat-label>\n                <mat-select name="bodega" [(ngModel)]="egreso.bodega" required>\n                    <mat-option *ngFor="let bode of bodegas" [value]="bode.bodega">\n                        {{bode.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-checkbox name="traslado" class="fullWidth" [(ngModel)]="+egreso.traslado">¿Es traslado?</mat-checkbox>\n            <mat-form-field class="fullWidth">\n                <mat-label>Tipo de movimiento destino</mat-label>\n                <mat-select name="tipo_movimiento_destino" [(ngModel)]="egreso.tipo_movimiento_destino"\n                    [required]="+egreso.traslado == 1">\n                    <mat-option *ngFor="let tmD of tiposMovimiento" [value]="tmD.tipo_movimiento">\n                        {{tmD.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <mat-label>Proveedor</mat-label>\n                <mat-select name="proveedor" [(ngModel)]="egreso.proveedor" [required]="+egreso.traslado == 1">\n                    <mat-option *ngFor="let prov of proveedores" [value]="prov.proveedor">\n                        ({{prov.nit}}) {{prov.razon_social}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <mat-label>Bodega destino</mat-label>\n                <mat-select name="bodega_destino" [(ngModel)]="egreso.bodega_destino"\n                    [required]="+egreso.traslado == 1">\n                    <mat-option *ngFor="let bodeDest of bodegas" [value]="bodeDest.bodega">\n                        {{bodeDest.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <div align="end">\n                <button mat-raised-button type="submit" color="accent" class="btnAccion"\n                    [disabled]="!frmEgreso.form.valid || [2, 3].indexOf(+egreso.estatus_movimiento) >= 0"\n                    *ngIf="saveToDB">\n                    Guardar\n                </button>\n                <button mat-raised-button type="button" color="accent" class="btnAccion" (click)="confirmarEgreso()"\n                    *ngIf="egreso.egreso && detallesEgreso.length > 0"\n                    [disabled]="!frmEgreso.form.valid || [2, 3].indexOf(+egreso.estatus_movimiento) >= 0">Confirmar</button>\n                <button mat-raised-button type="button" color="accent" (click)="resetEgreso()" *ngIf="egreso.egreso">\n                    Nuevo\n                </button>\n            </div>\n        </form>\n    </mat-card-content>\n</mat-card>\n<hr *ngIf="egreso.egreso || !saveToDB" />\n<mat-card class="mat-elevation-z4 fullWidth" *ngIf="egreso.egreso || !saveToDB">\n    <mat-card-title>\n        <h4>\n            Detalle del egreso {{saveToDB ? \'No.\' : \'\'}} {{egreso.egreso}}\n            <button mat-icon-button type="button" color="accent" (click)="showDetalleEgresoForm = true;"\n                *ngIf="!showDetalleEgresoForm">\n                <mat-icon class="iconFontSize">expand_more</mat-icon>\n            </button>\n            <button mat-icon-button type="button" color="accent" (click)="showDetalleEgresoForm = false;"\n                *ngIf="showDetalleEgresoForm">\n                <mat-icon class="iconFontSize">expand_less</mat-icon>\n            </button>\n        </h4>\n    </mat-card-title>\n    <mat-card-content>\n        <form #frmDetalleEgreso="ngForm" *ngIf="showDetalleEgresoForm"\n            (ngSubmit)="frmDetalleEgreso.form.valid && onSubmitDetail()" novalidate>\n            <mat-form-field class="fullWidth">\n                <mat-label>Artículo</mat-label>\n                <mat-select name="articulo" [(ngModel)]="detalleEgreso.articulo" required>\n                    <mat-option *ngFor="let a of articulos" [value]="a.articulo">\n                        {{a.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <mat-label>Presentación</mat-label>\n                <mat-select name="presentacion" [(ngModel)]="detalleEgreso.presentacion" required>\n                    <mat-option *ngFor="let p of presentaciones" [value]="p.presentacion">\n                        {{p.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="esMovil">\n                <input matInput placeholder="Cantidad" name="cantidad" [(ngModel)]="detalleEgreso.cantidad"\n                    (change)="detalleEgreso.precio_total = +detalleEgreso.precio_unitario * +detalleEgreso.cantidad"\n                    required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="numeric"\n                    ng-virtual-keyboard-placeholder="Cantidad" placeholder="Cantidad" name="cantidad"\n                    [(ngModel)]="detalleEgreso.cantidad"\n                    (change)="detalleEgreso.precio_total = +detalleEgreso.precio_unitario * +detalleEgreso.cantidad"\n                    required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="esMovil">\n                <input matInput placeholder="Costo unitario" name="precio_unitario"\n                    [(ngModel)]="detalleEgreso.precio_unitario"\n                    (change)="detalleEgreso.precio_total = +detalleEgreso.precio_unitario * +detalleEgreso.cantidad"\n                    required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="numeric"\n                    ng-virtual-keyboard-placeholder="Costo unitario" placeholder="Costo unitario" name="precio_unitario"\n                    [(ngModel)]="detalleEgreso.precio_unitario"\n                    (change)="detalleEgreso.precio_total = +detalleEgreso.precio_unitario * +detalleEgreso.cantidad"\n                    required>\n            </mat-form-field>\n            <div align="end">\n                <button mat-raised-button type="submit" color="accent" class="btnAccion"\n                    [disabled]="!frmDetalleEgreso.form.valid || [2, 3].indexOf(+egreso.estatus_movimiento) >= 0"\n                    *ngIf="saveToDB">\n                    Guardar\n                </button>\n                <button mat-raised-button type="button" color="accent" (click)="addToDetail()"\n                    [disabled]="!frmDetalleEgreso.form.valid || [2, 3].indexOf(+egreso.estatus_movimiento) >= 0"\n                    *ngIf="!saveToDB">\n                    Nuevo\n                </button>\n                <button mat-raised-button type="button" color="accent" (click)="resetDetalleEgreso()"\n                    *ngIf="detalleEgreso.egreso_detalle">\n                    Nuevo\n                </button>\n            </div>\n        </form>\n        <hr *ngIf="detallesEgreso.length > 0" />\n        <table mat-table [dataSource]="dataSource" class="mat-elevation-z4 full-width"\n            *ngIf="detallesEgreso.length > 0">\n            <ng-container matColumnDef="articulo">\n                <th mat-header-cell *matHeaderCellDef>Artículo</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">\n                    {{saveToDB ? element.articulo.descripcion : getDescripcionArticulo(element.articulo)}}</td>\n            </ng-container>\n            <ng-container matColumnDef="presentacion">\n                <th mat-header-cell *matHeaderCellDef>Presentación</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">\n                    {{saveToDB ? element.presentacion.descripcion : getDescripcionPresentacion(element.presentacion)}}\n                </td>\n            </ng-container>\n            <ng-container matColumnDef="cantidad">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Cantidad</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.cantidad | number:\'1.2-2\'}}</td>\n            </ng-container>\n            <ng-container matColumnDef="precio_unitario">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Costo Unitario</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.precio_unitario | number:\'1.2-2\'}}\n                </td>\n            </ng-container>\n            <ng-container matColumnDef="precio_total">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Costo Total</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.precio_total | number:\'1.2-2\'}}</td>\n            </ng-container>\n            <ng-container matColumnDef="editItem">\n                <th mat-header-cell *matHeaderCellDef>&nbsp;</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">\n                    <button mat-raised-button type="button" color="accent" class="btnAccion"\n                        (click)="getDetalleEgreso(element.egreso, element.egreso_detalle)"\n                        [disabled]="[2, 3].indexOf(+egreso.estatus_movimiento) >= 0" *ngIf="saveToDB">\n                        Editar\n                    </button>\n                    <button mat-raised-button type="button" color="accent" (click)="removeFromDetail(element.articulo)"\n                        [disabled]="[2, 3].indexOf(+egreso.estatus_movimiento) >= 0" *ngIf="!saveToDB">\n                        Eliminar\n                    </button>\n                </td>\n            </ng-container>\n            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>\n            <tr mat-row *matRowDef="let row; columns: displayedColumns;">\n            </tr>\n        </table>\n    </mat-card-content>\n</mat-card>\n<hr *ngIf="egreso.egreso || !saveToDB" />\n<mat-card class="mat-elevation-z4 fullWidth" *ngIf="!saveToDB">\n    <mat-card-title>\n        <h4>\n            Merma {{saveToDB ? \'No.\' : \'\'}} {{egreso.egreso}}\n            <button mat-icon-button type="button" color="accent" (click)="showDetalleEgresoForm = true;"\n                *ngIf="!showDetalleEgresoForm">\n                <mat-icon class="iconFontSize">expand_more</mat-icon>\n            </button>\n            <button mat-icon-button type="button" color="accent" (click)="showDetalleEgresoForm = false;"\n                *ngIf="showDetalleEgresoForm">\n                <mat-icon class="iconFontSize">expand_less</mat-icon>\n            </button>\n        </h4>\n    </mat-card-title>\n    <mat-card-content>\n        <form #frmMerma="ngForm" *ngIf="showDetalleEgresoForm"\n            (ngSubmit)="frmMerma.form.valid && onSubmitDetail()" novalidate>\n            <mat-form-field class="fullWidth">\n                <mat-label>Artículo</mat-label>\n                <mat-select name="articulo" [(ngModel)]="detalleMerma.articulo" required>\n                    <mat-option *ngFor="let a of articulos" [value]="a.articulo">\n                        {{a.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth">\n                <mat-label>Presentación</mat-label>\n                <mat-select name="presentacion" [(ngModel)]="detalleMerma.presentacion" required>\n                    <mat-option *ngFor="let p of presentaciones" [value]="p.presentacion">\n                        {{p.descripcion}}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="esMovil">\n                <input matInput placeholder="Cantidad" name="cantidad" [(ngModel)]="detalleMerma.cantidad"\n                    (change)="detalleMerma.precio_total = +detalleMerma.precio_unitario * +detalleMerma.cantidad"\n                    required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="numeric"\n                    ng-virtual-keyboard-placeholder="Cantidad" placeholder="Cantidad" name="cantidad"\n                    [(ngModel)]="detalleMerma.cantidad"\n                    (change)="detalleMerma.precio_total = +detalleMerma.precio_unitario * +detalleMerma.cantidad"\n                    required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="esMovil">\n                <input matInput placeholder="Costo unitario" name="precio_unitario"\n                    [(ngModel)]="detalleMerma.precio_unitario"\n                    (change)="detalleMerma.precio_total = +detalleMerma.precio_unitario * +detalleMerma.cantidad"\n                    required>\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="numeric"\n                    ng-virtual-keyboard-placeholder="Costo unitario" placeholder="Costo unitario" name="precio_unitario"\n                    [(ngModel)]="detalleMerma.precio_unitario"\n                    (change)="detalleMerma.precio_total = +detalleMerma.precio_unitario * +detalleMerma.cantidad"\n                    required>\n            </mat-form-field>\n            <div align="end">\n                <button mat-raised-button type="button" color="accent" (click)="addToDetailMerma()"\n                    [disabled]="!frmMerma.form.valid || [2, 3].indexOf(+egreso.estatus_movimiento) >= 0"\n                    *ngIf="!saveToDB">\n                    Nuevo\n                </button>\n            </div>\n        </form>\n        <hr *ngIf="detallesMerma.length > 0" />\n        <table mat-table [dataSource]="dataSource" class="mat-elevation-z4 full-width"\n            *ngIf="detallesMerma.length > 0">\n            <ng-container matColumnDef="articulo">\n                <th mat-header-cell *matHeaderCellDef>Artículo</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">\n                    {{saveToDB ? element.articulo.descripcion : getDescripcionArticulo(element.articulo)}}</td>\n            </ng-container>\n            <ng-container matColumnDef="presentacion">\n                <th mat-header-cell *matHeaderCellDef>Presentación</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">\n                    {{saveToDB ? element.presentacion.descripcion : getDescripcionPresentacion(element.presentacion)}}\n                </td>\n            </ng-container>\n            <ng-container matColumnDef="cantidad">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Cantidad</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.cantidad | number:\'1.2-2\'}}</td>\n            </ng-container>\n            <ng-container matColumnDef="precio_unitario">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Costo Unitario</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.precio_unitario | number:\'1.2-2\'}}\n                </td>\n            </ng-container>\n            <ng-container matColumnDef="precio_total">\n                <th mat-header-cell *matHeaderCellDef class="text-right">Costo Total</th>\n                <td mat-cell *matCellDef="let element" class="text-right">{{element.precio_total | number:\'1.2-2\'}}</td>\n            </ng-container>\n            <ng-container matColumnDef="editItem">\n                <th mat-header-cell *matHeaderCellDef>&nbsp;</th>\n                <td mat-cell *matCellDef="let element" class="text-wrap">\n                    <button mat-raised-button type="button" color="accent" class="btnAccion"\n                        (click)="getDetalleEgreso(element.egreso, element.egreso_detalle)"\n                        [disabled]="[2, 3].indexOf(+egreso.estatus_movimiento) >= 0" *ngIf="saveToDB">\n                        Editar\n                    </button>\n                    <button mat-raised-button type="button" color="accent" (click)="removeFromDetail(element.articulo)"\n                        [disabled]="[2, 3].indexOf(+egreso.estatus_movimiento) >= 0" *ngIf="!saveToDB">\n                        Eliminar\n                    </button>\n                </td>\n            </ng-container>\n            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>\n            <tr mat-row *matRowDef="let row; columns: displayedColumns;">\n            </tr>\n        </table>\n    </mat-card-content>\n</mat-card>'},Wgbk:function(e,t,n){"use strict";n.r(t),t.default='<div>\n    <div *ngIf="!showCategoriasForm">\n        <div align="center">\n            <button mat-button type="button" color="accent" (click)="showCategoriasForm = true; resetCategoria();">\n                <mat-icon class="iconFontSize">expand_more</mat-icon>&nbsp;Categorías y sub-categorías\n            </button>\n        </div>\n    </div>\n    <div *ngIf="showCategoriasForm">\n        <div align="center">\n            <button mat-button type="button" color="accent" (click)="showCategoriasForm = false; resetCategoria();">\n                <mat-icon class="iconFontSize">expand_less</mat-icon>&nbsp;Categorías y sub-categorías\n            </button>\n        </div>\n    </div>\n</div>\n<div *ngIf="showCategoriasForm">\n    <div>\n        <form #frmCategoria="ngForm" novalidate>\n            <mat-form-field class="fullWidth" *ngIf="!editCategoriaMode">\n                <mat-label>Categoría</mat-label>\n                <mat-select name="categoria" [(ngModel)]="categoria" (selectionChange)="onCategoriaSelected($event)">\n                    <mat-option *ngFor="let cat of categorias" [value]="cat">\n                        {{cat.descripcion}}\n                    </mat-option>\n                </mat-select>\n                \x3c!--Inicio de botones para edición y nueva--\x3e\n                <button mat-raised-button type="button" matSuffix color="accent" class="btnAccion"\n                    (click)="editCategoriaMode = true;" *ngIf="!editCategoriaMode && +categoria.categoria > 0">\n                    Editar\n                </button>\n                <button mat-raised-button type="button" matSuffix color="accent"\n                    (click)="resetCategoria(); editCategoriaMode = true;" *ngIf="!editCategoriaMode">\n                    Nueva\n                </button>\n                \x3c!--Fin de botones para edición y nueva--\x3e\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="esMovil && editCategoriaMode">\n                <input matInput placeholder="Descripcion de la categoría" name="descripcion"\n                    [(ngModel)]="categoria.descripcion" [required]="editCategoriaMode">\n                \x3c!--Inicia botones de guardar y cancelar--\x3e\n                <button mat-raised-button type="button" matSuffix color="accent" class="btnAccion"\n                    (click)="onSubmitCategoria()" [disabled]="!frmCategoria.form.valid" *ngIf="editCategoriaMode">\n                    Guardar\n                </button>\n                <button mat-raised-button type="button" matSuffix color="warn" (click)="resetCategoria()"\n                    *ngIf="editCategoriaMode">\n                    Cancelar\n                </button>\n                \x3c!--Fin de botones de guardar y cancelar--\x3e\n            </mat-form-field>\n            <mat-form-field class="fullWidth" *ngIf="!esMovil && editCategoriaMode">\n                <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="alphanumeric"\n                    ng-virtual-keyboard-placeholder="Descripcion de la categoría"\n                    placeholder="Descripcion de la categoría" name="descripcion" [(ngModel)]="categoria.descripcion"\n                    [required]="editCategoriaMode">\n                \x3c!--Inicia botones de guardar y cancelar cuando no es móvil--\x3e\n                <button mat-raised-button type="button" matSuffix color="accent" class="btnAccion"\n                    (click)="onSubmitCategoria()" [disabled]="!frmCategoria.form.valid" *ngIf="editCategoriaMode">\n                    Guardar\n                </button>\n                <button mat-raised-button type="button" matSuffix color="warn" (click)="resetCategoria()"\n                    *ngIf="editCategoriaMode">\n                    Cancelar\n                </button>\n                \x3c!--Fin de botones de guardar y cancelar cuando no es móvil--\x3e\n            </mat-form-field>\n        </form>\n    </div>\n</div>\n<div *ngIf="showCategoriasForm">\n    <form #frmCategoriaGrupo="ngForm" novalidate>\n        <mat-form-field class="fullWidth">\n            <mat-label>Sub-categoría Padre</mat-label>\n            <mat-select name="categoriaGrupoPadre" [(ngModel)]="categoriaGrupo.categoria_grupo_grupo"\n                (selectionChange)="onSubCategoriaPadreSelected($event)">\n                <mat-option *ngFor="let subcatpadre of categoriasGruposPadre" [value]="subcatpadre.categoria_grupo">\n                    {{subcatpadre.descripcion}}\n                </mat-option>\n            </mat-select>\n        </mat-form-field>\n\n        <mat-form-field class="fullWidth" *ngIf="!editSubCategoriaMode">\n            <mat-label>Sub-categoría</mat-label>\n            <mat-select name="categoriaGrupo" [(ngModel)]="categoriaGrupo"\n                (selectionChange)="onSubCategoriaSelected($event)">\n                <mat-option *ngFor="let subcat of categoriasGrupos" [value]="subcat">\n                    {{subcat.descripcion}}\n                </mat-option>\n            </mat-select>\n            <button mat-raised-button type="button" matSuffix color="accent" class="btnAccion"\n                (click)="editSubCategoriaMode = true;"\n                *ngIf="!editSubCategoriaMode && +categoriaGrupo.categoria_grupo > 0">\n                Editar\n            </button>\n            <button mat-raised-button type="button" matSuffix color="accent"\n                (click)="resetCategoriaGrupo(); editSubCategoriaMode = true;" *ngIf="!editSubCategoriaMode">\n                Nueva\n            </button>\n        </mat-form-field>\n        <mat-form-field class="fullWidth" *ngIf="esMovil && editSubCategoriaMode">\n            <input matInput placeholder="Descripcion de la sub - categoría" name="descripcion"\n                [(ngModel)]="categoriaGrupo.descripcion" [required]="editCategoriaMode">\n        </mat-form-field>\n        <mat-form-field class="fullWidth" *ngIf="!esMovil && editSubCategoriaMode">\n            <input matInput ng-virtual-keyboard ng-virtual-keyboard-layout="alphanumeric"\n                ng-virtual-keyboard-placeholder="Descripcion de la sub - categoría"\n                placeholder="Descripcion de la sub - categoría" name="descripcion"\n                [(ngModel)]="categoriaGrupo.descripcion" [required]="editCategoriaMode">\n        </mat-form-field>\n        <mat-checkbox name="descuento" class="fullWidth" [(ngModel)]="+categoriaGrupo.descuento">¿Aplica Descuento?\n        </mat-checkbox>\n        <mat-form-field class="fullWidth" *ngIf="editSubCategoriaMode">\n            <mat-label>Impresora</mat-label>\n            <mat-select name="impresora" [(ngModel)]="categoriaGrupo.impresora" im>\n                <mat-option *ngFor="let imp of impresoras" [value]="imp.impresora">\n                    {{imp.nombre}}\n                </mat-option>\n            </mat-select>\n            <button mat-raised-button type="button" matSuffix color="accent" class="btnAccion" (click)="onSubmitSubCategoria()"\n                [disabled]="!frmCategoriaGrupo.form.valid" *ngIf="editSubCategoriaMode">\n                Guardar\n            </button>\n            <button mat-raised-button type="button" matSuffix color="warn" (click)="resetCategoriaGrupo()"\n                *ngIf="editSubCategoriaMode">\n                Cancelar\n            </button>\n        </mat-form-field>\n    </form>\n</div>'},YpM4:function(e,t,n){"use strict";n.r(t),t.default=".full-width {\n    width: 100%;\n}\n\n.iconFontSize {\n    font-size: 24pt;\n}"},ZSjk:function(e,t,n){"use strict";n.r(t),t.default=".example-tree-invisible {\n    display: none;\n}\n\n.example-tree ul, .example-tree li {\n    margin-top: 0;\n    margin-bottom: 0;\n    list-style-type: none;\n}\n\n.tabulacion {\n    padding-left: 10px !important;\n}"},aDkJ:function(e,t,n){"use strict";n.r(t),t.default=".fullWidth { width: 100%; }\n.iconFontSize{ font-size: 18pt; }"},f8CZ:function(e,t,n){"use strict";n.r(t),t.default='<div class="row">\n    <div class="col m5 s12">\n        <app-lista-ingreso #lstIngreso (getIngresoEv)="setIngreso($event)"></app-lista-ingreso>\n    </div>\n    <div class="col m7 s12">\n        <app-form-ingreso #frmIngreso [ingreso]="ingreso" (ingresoSavedEv)="refreshIngresoList()"></app-form-ingreso>\n    </div>\n</div>'},fPcv:function(e,t,n){"use strict";n.r(t),t.default='<div class="row">\n    <div class="col m12 s12" style="padding-bottom: 5px !important;">\n        <div align="end">\n            <button mat-raised-button type="button" color="accent" (click)="transformar()">\n                <mat-icon style="font-size: 18pt;">transform</mat-icon>&nbsp;Transformar\n            </button>\n        </div>\n    </div>\n</div>\n<div class="row">\n    <div class="col m12 s12">\n        <app-form-ingreso #frmIngreso [(ingreso)]="ingreso" [saveToDB]="false" (ingresoSavedEv)="doSomething()">\n        </app-form-ingreso>\n    </div>\n</div>\n'},h9cp:function(e,t,n){"use strict";n.r(t),t.default=""},"iQY+":function(e,t,n){"use strict";n.r(t),t.default=".full-width {\n    width: 100%;\n}\n\n.iconFontSize {\n    font-size: 24pt;\n}"},iYQc:function(e,t,n){"use strict";n.r(t),t.default='<div class="row">\n  <div class="col m12 s12">\n    <mat-card class="mat-elevation-z4 fullWidth">\n      <mat-card-title>\n        <h4>Reporte de existencias</h4>\n      </mat-card-title>\n      <mat-card-content>\n        <form (ngSubmit)="onSubmit()" novalidate>\n          <mat-form-field class="fullWidth">\n              <mat-label>Bodega</mat-label>\n              <mat-select name="bodega" [(ngModel)]="params.bodega">\n                  <mat-option *ngFor="let bod of bodegas" [value]="bod.bodega">\n                      {{bod.descripcion}}\n                  </mat-option>\n              </mat-select>\n          </mat-form-field>\n          <mat-form-field class="fullWidth">\n              <mat-label>Sede</mat-label>\n              <mat-select name="sede" [(ngModel)]="params.sede">\n                  <mat-option *ngFor="let sede of sedes" [value]="sede.sede">\n                      {{sede.nombre}}\n                  </mat-option>\n              </mat-select>\n          </mat-form-field>\n          <mat-form-field class="fullWidth">            \n            <input matInput type="date" placeholder="Al" [(ngModel)]="params.fecha" [ngModelOptions]="{standalone: true}" required>\n          </mat-form-field>\n          <div align="end">\n            <button mat-button color="accent" type="submit">GENERAR</button>\n          </div>\n        </form>        \n      </mat-card-content>\n    </mat-card>\n  </div>\n</div>'},qRjx:function(e,t,n){"use strict";n.r(t),t.default='<div class="row">\n    <div class="col m12 s12" style="padding-bottom: 5px !important;">\n        <div align="end">\n            <button mat-raised-button type="button" color="accent" (click)="transformar()">\n                <mat-icon style="font-size: 18pt;">transform</mat-icon>&nbsp;Transformar\n            </button>\n        </div>\n    </div>\n</div>\n<div class="row">\n    <div class="col m6 s12">\n        <app-form-egreso #frmEgreso [(egreso)]="egreso" [saveToDB]="false" (egresoSavedEv)="doSomething()">\n        </app-form-egreso>\n    </div>\n    <div class="col m6 s12">\n        <app-form-ingreso #frmIngreso [(ingreso)]="ingreso" [saveToDB]="false" (ingresoSavedEv)="doSomething()">\n        </app-form-ingreso>\n    </div>\n</div>\n<div class="row">\n\n</div>'},qhgY:function(e,t,n){"use strict";n.r(t),t.default=".full-width {\n    width: 100%;\n}\n\n.iconFontSize {\n    font-size: 24pt;\n}"},qrxf:function(e,t,n){"use strict";n.r(t),t.default='<mat-card class="mat-elevation-z4 fullWidth">\n    <mat-card-content>\n        <mat-form-field>\n            <input matInput (keyup)="applyFilter()" placeholder="Buscar..." [(ngModel)]="txtFiltro" [ngModelOptions]="{standalone: true}">\n        </mat-form-field>\n        <mat-nav-list>\n            <mat-list-item *ngFor="let element of lstEgresosPaged" (click)="getEgreso(element)">\n                <mat-icon mat-list-icon>trending_down</mat-icon>\n                <h5 mat-line>No. {{element.egreso}}</h5><br/>\n                <p mat-line>\n                    Fecha: {{element.fecha | date: \'dd/MM/yyyy\'}}<br/>\n                    Bodega: {{element.bodega.descripcion}}<br/>\n                </p>\n            </mat-list-item>\n        </mat-nav-list>\n        <mat-paginator [length]="length" [pageSize]="pageSize" [pageSizeOptions]="pageSizeOptions" (page)="pageChange($event)" showFirstLastButtons>\n        </mat-paginator>\n    </mat-card-content>\n</mat-card>\n'},rRvq:function(e,t,n){"use strict";n.r(t),t.default='<div class="row">\n    <div class="col m5 s12">\n        <app-categoria-producto (categoriaGrupoSvd)="refreshArticuloList($event)"\n            (onChangeSubCategoriaEv)="setArticuloCategoriaGrupo($event)"></app-categoria-producto>\n        <app-lista-producto #lstProducto [treeHeight]="\'100%\'" (productoClickedEv)="setArticulo($event)">\n        </app-lista-producto>\n    </div>\n    <div class="col m7 s12">\n        <app-form-producto #frmProducto [articulo]="articulo" (articuloSvd)="refreshArticuloList($event)">\n        </app-form-producto>\n    </div>\n</div>'},"sR+E":function(e,t,n){"use strict";n.r(t),t.default=""},u5dX:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var o=n("mrSG"),a=n("CcnG"),r=n("t/Na"),i=n("sKxO"),l=n("R5jZ"),s=n("FY0D"),c=n("5tAl"),d=n("9Z1F"),u=n("Qyje"),m=function(){function e(e,t){this.http=e,this.ls=t,this.usrToken=null,this.srvcErrHndl=new l.a,this.usrToken=this.ls.get(i.a.usrTokenVar)?this.ls.get(i.a.usrTokenVar).token:null}return e.prototype.get=function(e){void 0===e&&(e={});var t={headers:new r.c({Authorization:this.usrToken})};return this.http.get(i.a.urlCatalogos+"/get_bodega?"+u.stringify(e),t).pipe(Object(c.a)(i.a.reintentos),Object(d.a)(this.srvcErrHndl.errorHandler))},e.ctorParameters=function(){return[{type:r.a},{type:s.a}]},e=o.c([Object(a.Injectable)({providedIn:"root"})],e)}()},v3Pe:function(e,t,n){"use strict";n.r(t),t.default='<div class="row">\n    <div class="col m5 s12">\n        <app-lista-egreso #lstEgreso (getEgresoEv)="setEgreso($event)"></app-lista-egreso>\n    </div>\n    <div class="col m7 s12">\n        <app-form-egreso #frmEgreso [egreso]="egreso" (egresoSavedEv)="refreshEgresoList()"></app-form-egreso>\n    </div>\n</div>'},vtFA:function(e,t,n){"use strict";n.r(t);var o=n("mrSG"),a=n("CcnG"),r=n("Ip0R"),i=n("t/Na"),l=n("gIcY"),s=n("PCNd"),c=n("0/Q6"),d=n("SMsm"),u=n("seP3"),m=n("b716"),g=n("FVSy"),p=n("LC5p"),f=n("La40"),h=n("BHnd"),b=n("uGex"),v=n("de3e"),y=n("UodH"),I=n("vARd"),C=n("8mMr"),S=n("mVsa"),D=n("r43C"),_=n("4epT"),E=n("o3x0"),k=n("Nsh5"),M=n("J12g"),w=n("vnWn"),x=n("drcI"),O=n("ZYCi"),F=n("0T/Q"),T=n("FY0D"),A=n("sKxO"),j=n("wd/R"),B=function(){function e(e){var t=this;this.ls=e,this.breakpoint=2,this.onWindowResize=function(e){t.breakpoint=e.target.innerWidth<=360?1:2},this.setIngreso=function(e){t.ingreso=e,t.frmIngreso.loadDetalleIngreso(+t.ingreso.ingreso)},this.refreshIngresoList=function(){t.lstIngresoComponent.loadIngresos()},this.ingreso={ingreso:null,tipo_movimiento:null,fecha:j().format(A.a.dbDateFormat),bodega:null,usuario:this.ls.get(A.a.usrTokenVar).idusr||0,comentario:null,proveedor:null}}return e.prototype.ngOnInit=function(){this.breakpoint=window.innerWidth<=360?1:2},e.ctorParameters=function(){return[{type:T.a}]},o.c([Object(a.ViewChild)("lstIngreso",{static:!1})],e.prototype,"lstIngresoComponent",void 0),o.c([Object(a.ViewChild)("frmIngreso",{static:!1})],e.prototype,"frmIngreso",void 0),e=o.c([Object(a.Component)({selector:"app-ingreso",template:o.f(n("f8CZ")).default,styles:[o.f(n("KtKg")).default]})],e)}(),W=function(){function e(e){var t=this;this.ls=e,this.setEgreso=function(e){t.egreso=e,t.frmEgreso.loadDetalleEgreso(+t.egreso.egreso)},this.refreshEgresoList=function(){t.lstEgresoComponent.loadEgresos()},this.egreso={egreso:null,tipo_movimiento:null,bodega:null,fecha:j().format(A.a.dbDateFormat),usuario:this.ls.get(A.a.usrTokenVar).idusr||0,estatus_movimiento:1,traslado:0}}return e.prototype.ngOnInit=function(){},e.ctorParameters=function(){return[{type:T.a}]},o.c([Object(a.ViewChild)("lstEgreso",{static:!1})],e.prototype,"lstEgresoComponent",void 0),o.c([Object(a.ViewChild)("frmEgreso",{static:!1})],e.prototype,"frmEgreso",void 0),e=o.c([Object(a.Component)({selector:"app-egreso",template:o.f(n("v3Pe")).default,styles:[o.f(n("SOpS")).default]})],e)}(),P=n("NGYs"),R=function(){function e(e){var t=this;this.articuloSrvc=e,this.setArticulo=function(e){t.articuloSrvc.getArticulo({articulo:e.id}).subscribe((function(e){if(e&&e.length>0){var n=e[0];t.articulo={articulo:+n.articulo,categoria_grupo:+n.categoria_grupo.categoria_grupo,presentacion:n.presentacion.presentacion,descripcion:n.descripcion,precio:+n.precio,codigo:n.codigo,produccion:n.produccion},t.frmProductoComponent.loadRecetas(+t.articulo.articulo),t.frmProductoComponent.resetReceta()}}))},this.setArticuloCategoriaGrupo=function(e){t.articulo.categoria_grupo=+e,t.frmProductoComponent.setArticuloCategoriaGrupo(+e)},this.refreshArticuloList=function(e){t.lstProductoComponent.loadArbolArticulos()},this.articulo={articulo:null,categoria_grupo:null,presentacion:null,descripcion:null,precio:null,bien_servicio:"B",produccion:0}}return e.prototype.ngOnInit=function(){},e.ctorParameters=function(){return[{type:P.a}]},o.c([Object(a.ViewChild)("lstProducto",{static:!1})],e.prototype,"lstProductoComponent",void 0),o.c([Object(a.ViewChild)("frmProducto",{static:!1})],e.prototype,"frmProductoComponent",void 0),e=o.c([Object(a.Component)({selector:"app-producto",template:o.f(n("rRvq")).default,styles:[o.f(n("Q1s9")).default]})],e)}(),H=n("R5jZ"),z=n("5tAl"),G=n("9Z1F"),q=function(){function e(e,t){this.http=e,this.ls=t,this.conversorUrl="conversor",this.usrToken=null,this.srvcErrHndl=new H.a,this.usrToken=this.ls.get(A.a.usrTokenVar)?this.ls.get(A.a.usrTokenVar).token:null}return e.prototype.transformar=function(e){var t={headers:new i.c({Authorization:this.usrToken})};return this.http.post(A.a.urlWms+"/"+this.conversorUrl+"/transformar",e,t).pipe(Object(z.a)(A.a.reintentos),Object(G.a)(this.srvcErrHndl.errorHandler))},e.prototype.producir=function(e){var t={headers:new i.c({Authorization:this.usrToken})};return this.http.post(A.a.urlWms+"/"+this.conversorUrl+"/producir",e,t).pipe(Object(z.a)(A.a.reintentos),Object(G.a)(this.srvcErrHndl.errorHandler))},e.ctorParameters=function(){return[{type:i.a},{type:T.a}]},e=o.c([Object(a.Injectable)({providedIn:"root"})],e)}(),N=function(){function e(e,t,n){var o=this;this.ls=e,this._snackBar=t,this.transformacionSrvc=n,this.mermaDetalle=[],this.showMerma=!0,this.transformar=function(){o.egreso=o.frmEgreso.egreso,o.ingreso=o.frmIngreso.ingreso,o.transformacion={egreso:{tipo_movimiento:o.egreso.tipo_movimiento,fecha:o.egreso.fecha,proveedor:o.ingreso.proveedor,bodega:o.egreso.bodega,usuario:o.egreso.usuario,estatus_movimiento:o.egreso.estatus_movimiento,bodega_destino:o.egreso.bodega_destino,tipo_movimiento_destino:o.egreso.tipo_movimiento_destino,detalle:[]},ingreso:{tipo_movimiento:o.ingreso.tipo_movimiento,fecha:o.ingreso.fecha,proveedor:o.ingreso.proveedor,bodega:o.ingreso.bodega,usuario:o.ingreso.usuario,bodega_origen:o.ingreso.bodega_origen,comentario:o.ingreso.comentario,detalle:[]},merma:[]},o.frmEgreso.detallesMerma.forEach((function(e){return o.transformacion.merma.push({articulo:e.articulo,cantidad:e.cantidad,precio_unitario:e.precio_unitario,precio_total:e.precio_total,presentacion:e.presentacion})})),o.frmEgreso.detallesEgreso.forEach((function(e){return o.transformacion.egreso.detalle.push({articulo:e.articulo,cantidad:e.cantidad,precio_unitario:e.precio_unitario,precio_total:e.precio_total,presentacion:e.presentacion})})),o.frmIngreso.detallesIngreso.forEach((function(e){return o.transformacion.ingreso.detalle.push({articulo:e.articulo,cantidad:e.cantidad,precio_unitario:e.precio_unitario,precio_total:e.precio_total,presentacion:e.presentacion})})),o.transformacion.egreso&&o.transformacion.egreso.detalle&&o.transformacion.egreso.detalle.length>0&&o.transformacion.ingreso&&o.transformacion.ingreso.detalle&&o.transformacion.ingreso.detalle.length>0?o.transformacionSrvc.transformar(o.transformacion).subscribe((function(e){e.exito?(o.frmEgreso.resetEgreso(),o.frmEgreso.detallesEgreso=[],o.frmIngreso.resetIngreso(),o.frmIngreso.detallesIngreso=[],o._snackBar.open("Transformación generada con éxito...","Transformación",{duration:5e3})):o._snackBar.open("ERROR: "+e.mensaje,"Transformación",{duration:3e3})})):o._snackBar.open("Faltan datos necesario. Favor complete los datos e intente de nuevo.","Transformación",{duration:3e3})}}return e.prototype.ngOnInit=function(){this.egreso={egreso:null,tipo_movimiento:null,bodega:null,fecha:j().format(A.a.dbDateFormat),usuario:this.ls.get(A.a.usrTokenVar).idusr||0,estatus_movimiento:1,traslado:0},this.ingreso={ingreso:null,tipo_movimiento:null,fecha:j().format(A.a.dbDateFormat),bodega:null,usuario:this.ls.get(A.a.usrTokenVar).idusr||0,comentario:null,proveedor:null}},e.prototype.doSomething=function(){},e.ctorParameters=function(){return[{type:T.a},{type:I.a},{type:q}]},o.c([Object(a.ViewChild)("frmEgreso",{static:!1})],e.prototype,"frmEgreso",void 0),o.c([Object(a.ViewChild)("frmIngreso",{static:!1})],e.prototype,"frmIngreso",void 0),e=o.c([Object(a.Component)({selector:"app-transformacion",template:o.f(n("qRjx")).default,styles:[o.f(n("PySw")).default]})],e)}(),V=n("FHMA"),U=n("IHy4"),L=n("u5dX"),Q=n("Iab2"),Y=function(){function e(e,t,n,o){var a=this;this.snackBar=e,this.pdfServicio=t,this.sedeSrvc=n,this.bodegaSrvc=o,this.bodegas=[],this.sedes=[],this.params={},this.titulo="Existencias",this.getSede=function(e){void 0===e&&(e={}),a.sedeSrvc.get(e).subscribe((function(e){a.sedes=e}))},this.getBodega=function(e){void 0===e&&(e={}),a.bodegaSrvc.get(e).subscribe((function(e){a.bodegas=e}))}}return e.prototype.ngOnInit=function(){this.getSede(),this.getBodega()},e.prototype.onSubmit=function(){var e=this;this.pdfServicio.getReporteExistencia(this.params).subscribe((function(t){if(t){var n=new Blob([t],{type:"application/pdf"});Object(Q.saveAs)(n,e.titulo+".pdf")}else e.snackBar.open("No se pudo generar el reporte...",e.titulo,{duration:3e3})}))},e.ctorParameters=function(){return[{type:I.a},{type:V.a},{type:U.a},{type:L.a}]},e=o.c([Object(a.Component)({selector:"app-existencias",template:o.f(n("iYQc")).default,styles:[o.f(n("sR+E")).default]})],e)}(),K=function(){function e(e,t,n,o,a){var r=this;this.snackBar=e,this.pdfServicio=t,this.sedeSrvc=n,this.bodegaSrvc=o,this.articuloSrvc=a,this.bodegas=[],this.sedes=[],this.articulos=[],this.params={},this.titulo="Kardex",this.getSede=function(e){void 0===e&&(e={}),r.sedeSrvc.get(e).subscribe((function(e){r.sedes=e}))},this.getArticulo=function(e){void 0===e&&(e={}),r.articuloSrvc.getArticulos(e).subscribe((function(e){r.articulos=e}))},this.getBodega=function(e){void 0===e&&(e={}),r.bodegaSrvc.get(e).subscribe((function(e){r.bodegas=e}))}}return e.prototype.ngOnInit=function(){this.getSede(),this.getBodega(),this.getArticulo()},e.prototype.onSubmit=function(){var e=this;this.pdfServicio.getReporteKardex(this.params).subscribe((function(t){if(t){var n=new Blob([t],{type:"application/pdf"});Object(Q.saveAs)(n,e.titulo+".pdf")}else e.snackBar.open("No se pudo generar el reporte...",e.titulo,{duration:3e3})}))},e.ctorParameters=function(){return[{type:I.a},{type:V.a},{type:U.a},{type:L.a},{type:P.a}]},e=o.c([Object(a.Component)({selector:"app-kardex",template:o.f(n("CIKf")).default,styles:[o.f(n("NRFb")).default]})],e)}(),Z=function(){function e(e,t,n){var o=this;this.ls=e,this._snackBar=t,this.transformacionSrvc=n,this.transformar=function(){o.ingreso=o.frmIngreso.ingreso,o.produccion={tipo_movimiento:o.ingreso.tipo_movimiento,fecha:o.ingreso.fecha,proveedor:o.ingreso.proveedor,bodega:o.ingreso.bodega,usuario:o.ingreso.usuario,bodega_origen:o.ingreso.bodega_origen,comentario:o.ingreso.comentario,detalle:[]},o.frmIngreso.detallesIngreso.forEach((function(e){return o.produccion.detalle.push({articulo:e.articulo,cantidad:e.cantidad,precio_unitario:e.precio_unitario,precio_total:e.precio_total,presentacion:e.presentacion})})),o.produccion&&o.produccion.detalle&&o.produccion.detalle.length>0?o.transformacionSrvc.producir(o.produccion).subscribe((function(e){e.exito?(o.frmIngreso.resetIngreso(),o.frmIngreso.detallesIngreso=[],o._snackBar.open("Producto generado con éxito...","Producción",{duration:5e3})):o._snackBar.open("ERROR: "+e.mensaje,"Producción",{duration:3e3})})):o._snackBar.open("Faltan datos necesario. Favor complete los datos e intente de nuevo.","Transformación",{duration:3e3})}}return e.prototype.ngOnInit=function(){this.ingreso={ingreso:null,tipo_movimiento:null,fecha:j().format(A.a.dbDateFormat),bodega:null,usuario:this.ls.get(A.a.usrTokenVar).idusr||0,comentario:null,proveedor:null}},e.ctorParameters=function(){return[{type:T.a},{type:I.a},{type:q}]},o.c([Object(a.ViewChild)("frmIngreso",{static:!1})],e.prototype,"frmIngreso",void 0),e=o.c([Object(a.Component)({selector:"app-produccion",template:o.f(n("fPcv")).default,styles:[o.f(n("h9cp")).default]})],e)}(),$=[{path:"ingresos",component:B,canActivate:[F.a]},{path:"egresos",component:W,canActivate:[F.a]},{path:"articulos",component:R,canActivate:[F.a]},{path:"transformaciones",component:N,canActivate:[F.a]},{path:"rptexistencia",component:Y,canActivate:[F.a]},{path:"rptkardex",component:K,canActivate:[F.a]},{path:"produccion",component:Z,canActivate:[F.a]},{path:"**",redirectTo:"/admin/dashboard",pathMatch:"full"}],J=function(){function e(){}return e=o.c([Object(a.NgModule)({imports:[O.b.forChild($)],exports:[O.b]})],e)}(),X=n("OBdK"),ee=function(){function e(e,t){this.ls=e,this.articuloSrvc=t,this.treeHeight="450px",this.productoClickedEv=new a.EventEmitter,this.treeControl=new X.j((function(e){return e.hijos})),this.dataSource=new M.b,this.hasChild=function(e,t){return!!t.hijos&&t.hijos.length>0},this.tieneHijos=function(e){return!!e.hijos&&e.hijos.length>0}}return e.prototype.ngOnInit=function(){this.loadArbolArticulos()},e.prototype.onProductoClicked=function(e){this.productoClickedEv.emit(e)},e.prototype.loadArbolArticulos=function(){var e=this;this.articuloSrvc.getArbolArticulos(this.ls.get(A.a.usrTokenVar).sede||0).subscribe((function(t){t&&(e.arbol=e.articuloSrvc.convertToArbolNodoProducto(t),e.dataSource.data=e.arbol)}))},e.ctorParameters=function(){return[{type:T.a},{type:P.a}]},o.c([Object(a.Input)()],e.prototype,"treeHeight",void 0),o.c([Object(a.Output)()],e.prototype,"productoClickedEv",void 0),e=o.c([Object(a.Component)({selector:"app-lista-producto",template:o.f(n("JOQN")).default,styles:[o.f(n("ZSjk")).default]})],e)}(),te=n("Qyje"),ne=function(){function e(e,t){this.http=e,this.ls=t,this.ingresoUrl="ingreso",this.usrToken=null,this.srvcErrHndl=new H.a,this.usrToken=this.ls.get(A.a.usrTokenVar)?this.ls.get(A.a.usrTokenVar).token:null}return e.prototype.get=function(e){void 0===e&&(e={});var t={headers:new i.c({Authorization:this.usrToken})};return this.http.get(A.a.urlWms+"/"+this.ingresoUrl+"/buscar_ingreso?"+te.stringify(e),t).pipe(Object(z.a)(A.a.reintentos),Object(G.a)(this.srvcErrHndl.errorHandler))},e.prototype.save=function(e){var t={headers:new i.c({Authorization:this.usrToken})};return this.http.post(A.a.urlWms+"/"+this.ingresoUrl+"/guardar"+(+e.ingreso>0?"/"+e.ingreso:""),e,t).pipe(Object(z.a)(A.a.reintentos),Object(G.a)(this.srvcErrHndl.errorHandler))},e.prototype.getDetalle=function(e,t){void 0===t&&(t={});var n={headers:new i.c({Authorization:this.usrToken})};return this.http.get(A.a.urlWms+"/"+this.ingresoUrl+"/buscar_detalle/"+e+"?"+te.stringify(t),n).pipe(Object(z.a)(A.a.reintentos),Object(G.a)(this.srvcErrHndl.errorHandler))},e.prototype.saveDetalle=function(e){var t={headers:new i.c({Authorization:this.usrToken})};return this.http.post(A.a.urlWms+"/"+this.ingresoUrl+"/guardar_detalle/"+e.ingreso+(+e.ingreso_detalle>0?"/"+e.ingreso_detalle:""),e,t).pipe(Object(z.a)(A.a.reintentos),Object(G.a)(this.srvcErrHndl.errorHandler))},e.ctorParameters=function(){return[{type:i.a},{type:T.a}]},e=o.c([Object(a.Injectable)({providedIn:"root"})],e)}(),oe=function(){function e(e){var t=this;this.ingresoSrvc=e,this.getIngresoEv=new a.EventEmitter,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadIngresos=function(){t.ingresoSrvc.get().subscribe((function(e){e&&e.length>0&&(t.lstIngresos=e,t.applyFilter())}))},this.getIngreso=function(e){t.getIngresoEv.emit({ingreso:e.ingreso,tipo_movimiento:e.tipo_movimiento.tipo_movimiento,fecha:e.fecha,bodega_origen:e.bodega_origen&&e.bodega_origen.bodega?e.bodega_origen.bodega:null,bodega:e.bodega.bodega,usuario:e.usuario.usuario,comentario:e.comentario,proveedor:e.proveedor.proveedor})},this.pageChange=function(e){t.pageSize=e.pageSize,t.pageIndex=e.pageIndex,t.applyFilter()}}return e.prototype.ngOnInit=function(){this.loadIngresos()},e.prototype.applyFilter=function(){if(this.txtFiltro.length>0){var e=Object(A.b)(this.lstIngresos,this.txtFiltro);this.length=e.length,this.lstIngresosPaged=Object(A.c)(e,this.pageSize,this.pageIndex+1)}else this.length=this.lstIngresos.length,this.lstIngresosPaged=Object(A.c)(this.lstIngresos,this.pageSize,this.pageIndex+1)},e.ctorParameters=function(){return[{type:ne}]},o.c([Object(a.Output)()],e.prototype,"getIngresoEv",void 0),e=o.c([Object(a.Component)({selector:"app-lista-ingreso",template:o.f(n("x2BN")).default,styles:[o.f(n("5bcq")).default]})],e)}(),ae=n("3e6T"),re=n("50cD"),ie=n("C5NV"),le=function(){function e(e,t,n,o,r,i,l,s){var c=this;this._snackBar=e,this.ls=t,this.ingresoSrvc=n,this.proveedorSrvc=o,this.tipoMovimientoSrvc=r,this.bodegaSrvc=i,this.articuloSrvc=l,this.presentacinSrvc=s,this.saveToDB=!0,this.ingresoSavedEv=new a.EventEmitter,this.showIngresoForm=!0,this.showDetalleIngresoForm=!0,this.detallesIngreso=[],this.displayedColumns=["articulo","presentacion","cantidad","costo_unitario","costo_total","deleteItem"],this.tiposMovimiento=[],this.proveedores=[],this.bodegas=[],this.articulos=[],this.presentaciones=[],this.esMovil=!1,this.loadTiposMovimiento=function(){c.tipoMovimientoSrvc.get().subscribe((function(e){e&&(c.tiposMovimiento=e)}))},this.loadProveedores=function(){c.proveedorSrvc.get().subscribe((function(e){e&&(c.proveedores=e)}))},this.loadBodegas=function(){c.bodegaSrvc.get({sede:+c.ls.get(A.a.usrTokenVar).sede||0}).subscribe((function(e){e&&(c.bodegas=e)}))},this.loadPresentaciones=function(){c.presentacinSrvc.get().subscribe((function(e){e&&(c.presentaciones=e)}))},this.resetIngreso=function(){c.ingreso={ingreso:null,tipo_movimiento:null,fecha:j().format(A.a.dbDateFormat),bodega:null,usuario:c.ls.get(A.a.usrTokenVar).idusr||0,comentario:null,proveedor:null,estatus_movimiento:1},c.resetDetalleIngreso()},this.onSubmit=function(){c.ingresoSrvc.save(c.ingreso).subscribe((function(e){c.ingresoSavedEv.emit(),c.resetIngreso()}))},this.loadArticulos=function(){c.articuloSrvc.getArticulos().subscribe((function(e){e&&(c.articulos=e)}))},this.resetDetalleIngreso=function(){return c.detalleIngreso={ingreso_detalle:null,ingreso:c.ingreso.ingreso?c.ingreso.ingreso:null,articulo:null,cantidad:null,precio_unitario:null,precio_total:null,presentacion:0}},this.loadDetalleIngreso=function(e){void 0===e&&(e=+c.ingreso.ingreso),c.ingresoSrvc.getDetalle(e,{ingreso:e}).subscribe((function(e){e&&(c.detallesIngreso=e,c.updateTableDataSource())}))},this.getDetalleIngreso=function(e,t){void 0===e&&(e=+c.ingreso.ingreso),c.ingresoSrvc.getDetalle(e,{ingreso_detalle:t}).subscribe((function(e){e&&(c.detalleIngreso={ingreso_detalle:e[0].ingreso_detalle,ingreso:e[0].ingreso,articulo:e[0].articulo.articulo,cantidad:+e[0].cantidad,precio_unitario:+e[0].precio_unitario,precio_total:+e[0].precio_total,presentacion:e[0].presentacion.presentacion},c.showDetalleIngresoForm=!0)}))},this.onSubmitDetail=function(){c.detalleIngreso.ingreso=c.ingreso.ingreso,c.detalleIngreso.precio_total=+c.detalleIngreso.cantidad*+c.detalleIngreso.precio_unitario,c.ingresoSrvc.saveDetalle(c.detalleIngreso).subscribe((function(e){e&&(c.loadDetalleIngreso(),c.resetDetalleIngreso())}))},this.addToDetail=function(){c.detallesIngreso.push(c.detalleIngreso),c.resetDetalleIngreso(),c.updateTableDataSource()},this.removeFromDetail=function(e){return c.detallesIngreso.splice(c.detallesIngreso.findIndex((function(t){return+t.articulo==+e})),1)},this.getDescripcionArticulo=function(e){return c.articulos.find((function(t){return+t.articulo==+e})).descripcion||""},this.getDescripcionPresentacion=function(e){return c.presentaciones.find((function(t){return+t.presentacion==+e})).descripcion||""},this.updateTableDataSource=function(){return c.dataSource=new h.a(c.detallesIngreso)},this.eliminarArticulo=function(e){c.detallesIngreso.splice(c.detallesIngreso.findIndex((function(t){return t.ingreso_detalle===e.ingreso_detalle})),1),c.updateTableDataSource()}}return e.prototype.ngOnInit=function(){this.esMovil=this.ls.get(A.a.usrTokenVar).enmovil||!1,this.resetIngreso(),this.loadTiposMovimiento(),this.loadProveedores(),this.loadBodegas(),this.loadArticulos(),this.loadPresentaciones()},e.ctorParameters=function(){return[{type:I.a},{type:T.a},{type:ne},{type:re.a},{type:ae.a},{type:L.a},{type:P.a},{type:ie.a}]},o.c([Object(a.Input)()],e.prototype,"ingreso",void 0),o.c([Object(a.Input)()],e.prototype,"saveToDB",void 0),o.c([Object(a.Output)()],e.prototype,"ingresoSavedEv",void 0),e=o.c([Object(a.Component)({selector:"app-form-ingreso",template:o.f(n("0Uhh")).default,styles:[o.f(n("YpM4")).default]})],e)}(),se=n("pJXi"),ce=n("IJgu"),de=function(){function e(e,t,n,o,r,i){var l=this;this.dialog=e,this.snackBar=t,this.ls=n,this.articuloSrvc=o,this.medidaSrvc=r,this.presentacionSrvc=i,this.articuloSvd=new a.EventEmitter,this.showArticuloForm=!0,this.medidas=[],this.presentaciones=[],this.articulos=[],this.recetas=[],this.showDetalleForm=!0,this.displayedColumns=["articulo","cantidad","medida","editItem"],this.esMovil=!1,this.resetArticulo=function(){l.articulo={articulo:null,categoria_grupo:l.articulo.categoria_grupo,presentacion:null,descripcion:null,precio:null,bien_servicio:"B",produccion:0},l.resetReceta()},this.setArticuloCategoriaGrupo=function(e){return l.articulo.categoria_grupo=+e},this.onSubmit=function(){l.articuloSrvc.saveArticulo(l.articulo).subscribe((function(e){e.exito?(l.articuloSvd.emit(),l.resetArticulo(),l.articulo=e.articulo,l.loadArticulos(),l.snackBar.open("Articulo guardado con éxito...","Articulo",{duration:3e3})):l.snackBar.open("ERROR: "+e.mensaje,"Articulo",{duration:3e3})}))},this.loadMedidas=function(){l.medidaSrvc.get().subscribe((function(e){e&&(l.medidas=e)}))},this.loadPresentaciones=function(){l.presentacionSrvc.get().subscribe((function(e){e&&(l.presentaciones=e)}))},this.loadArticulos=function(){l.articuloSrvc.getArticulos().subscribe((function(e){e&&(l.articulos=e)}))},this.resetReceta=function(){l.receta={articulo_detalle:null,receta:l.articulo.articulo||0,racionable:0,articulo:null,cantidad:1,medida:null,anulado:0},l.recetas=[],l.updateTableDataSource()},this.loadRecetas=function(e){void 0===e&&(e=+l.articulo.articulo),l.articuloSrvc.getArticuloDetalle(+e,{receta:+e}).subscribe((function(e){e&&(l.recetas=e,l.updateTableDataSource())}))},this.getReceta=function(e,t){void 0===e&&(e=+l.articulo.articulo),l.articuloSrvc.getArticuloDetalle(e,{articulo_detalle:t}).subscribe((function(e){e&&(l.receta={articulo_detalle:e[0].articulo_detalle,receta:e[0].receta.articulo,racionable:e[0].articulo.articulo,articulo:e[0].articulo.articulo,cantidad:+e[0].cantidad,medida:e[0].medida.medida,anulado:e[0].anulado||0},l.showDetalleForm=!0)}))},this.eliminaReceta=function(e){l.dialog.open(ce.a,{maxWidth:"400px",data:new ce.b("Eliminar detalle","¿Desea eliminar '"+e.cantidad+" de "+e.articulo.descripcion+"' de la receta?","Sí","No")}).afterClosed().subscribe((function(t){t&&(e.anulado=1,l.articuloSrvc.saveArticuloDetalle(e).subscribe((function(e){l.loadRecetas(),l.resetReceta()})))}))},this.onSubmitDetail=function(){l.receta.receta=l.articulo.articulo,l.articuloSrvc.saveArticuloDetalle(l.receta).subscribe((function(e){e&&(e.exito?(l.loadRecetas(),l.resetReceta()):l.snackBar.open("ERROR: "+e.mensaje,"Articulo",{duration:3e3}))}))},this.updateTableDataSource=function(){return l.dataSource=new h.a(l.recetas)}}return e.prototype.ngOnInit=function(){this.esMovil=this.ls.get(A.a.usrTokenVar).enmovil||!1,this.resetArticulo(),this.loadMedidas(),this.loadArticulos(),this.loadPresentaciones()},e.ctorParameters=function(){return[{type:E.b},{type:I.a},{type:T.a},{type:P.a},{type:se.a},{type:ie.a}]},o.c([Object(a.Input)()],e.prototype,"articulo",void 0),o.c([Object(a.Output)()],e.prototype,"articuloSvd",void 0),e=o.c([Object(a.Component)({selector:"app-form-producto",template:o.f(n("66Qk")).default,styles:[o.f(n("qhgY")).default]})],e)}(),ue=function(){function e(e,t,n){var o=this;this._snackBar=e,this.ls=t,this.articuloSrvc=n,this.categoriaGrupoSvd=new a.EventEmitter,this.onChangeSubCategoriaEv=new a.EventEmitter,this.categorias=[],this.categoriasGruposPadre=[],this.categoriasGrupos=[],this.editCategoriaMode=!1,this.editSubCategoriaMode=!1,this.showCategoriasForm=!1,this.esMovil=!1,this.impresoras=[],this.resetCategoria=function(){o.categoria={categoria:null,sede:o.ls.get(A.a.usrTokenVar).sede||0,descripcion:null},o.resetCategoriaGrupo(),o.editCategoriaMode=!1},this.resetCategoriaGrupo=function(){o.categoriaGrupo={categoria_grupo:null,categoria:o.categoria.categoria,categoria_grupo_grupo:null,descripcion:null,receta:0,impresora:null,descuento:0,antecesores:null},o.editSubCategoriaMode=!1},this.loadCategorias=function(){o.articuloSrvc.getCategorias({sede:+o.ls.get(A.a.usrTokenVar).sede||0}).subscribe((function(e){e&&(o.categorias=e)}))},this.onCategoriaSelected=function(e){return o.loadSubCategorias(+e.value.categoria)},this.loadSubCategorias=function(e){o.articuloSrvc.getCategoriasGrupos({categoria:+e}).subscribe((function(e){e&&(o.categoriasGruposPadre=o.articuloSrvc.adaptCategoriaGrupoResponse(e),o.categoriasGrupos=o.categoriasGruposPadre)}))},this.loadImpresoras=function(){o.articuloSrvc.getImpresoras({sede:+o.ls.get(A.a.usrTokenVar).sede||0}).subscribe((function(e){e&&(o.impresoras=e)}))},this.onSubCategoriaPadreSelected=function(e){return o.loadSubCategoriasSubcategorias(+e.value)},this.loadSubCategoriasSubcategorias=function(e){o.articuloSrvc.getCategoriasGrupos({categoria_grupo_grupo:e}).subscribe((function(e){e&&(o.categoriasGrupos=o.articuloSrvc.adaptCategoriaGrupoResponse(e))}))},this.onSubmitCategoria=function(){o.articuloSrvc.saveCategoria(o.categoria).subscribe((function(e){e.exito?(o.editCategoriaMode=!1,o.resetCategoria(),o.loadCategorias(),o.categoriaGrupoSvd.emit(),o._snackBar.open("Grabada con éxito.","Categoría",{duration:5e3})):o._snackBar.open("ERROR: "+e.mensaje,"Categoría",{duration:5e3})}))},this.onSubCategoriaSelected=function(e){return o.onChangeSubCategoriaEv.emit(+e.value.categoria_grupo)},this.onSubmitSubCategoria=function(){o.articuloSrvc.saveCategoriaGrupo(o.categoriaGrupo).subscribe((function(e){e.exito?(o.resetCategoriaGrupo(),o.loadSubCategorias(+o.categoria.categoria),o.categoriaGrupoSvd.emit(),o._snackBar.open("Grabada con éxito.","Sub - Categoría",{duration:5e3})):o._snackBar.open("ERROR: "+e.mensaje,"Sub - Categoría",{duration:5e3})}))}}return e.prototype.ngOnInit=function(){this.esMovil=this.ls.get(A.a.usrTokenVar).enmovil||!1,this.resetCategoria(),this.loadCategorias(),this.loadImpresoras()},e.ctorParameters=function(){return[{type:I.a},{type:T.a},{type:P.a}]},o.c([Object(a.Output)()],e.prototype,"categoriaGrupoSvd",void 0),o.c([Object(a.Output)()],e.prototype,"onChangeSubCategoriaEv",void 0),e=o.c([Object(a.Component)({selector:"app-categoria-producto",template:o.f(n("Wgbk")).default,styles:[o.f(n("aDkJ")).default]})],e)}(),me=function(){function e(e,t){this.http=e,this.ls=t,this.egresoUrl="egreso",this.usrToken=null,this.srvcErrHndl=new H.a,this.usrToken=this.ls.get(A.a.usrTokenVar)?this.ls.get(A.a.usrTokenVar).token:null}return e.prototype.get=function(e){void 0===e&&(e={});var t={headers:new i.c({Authorization:this.usrToken})};return this.http.get(A.a.urlWms+"/"+this.egresoUrl+"/buscar_egreso?"+te.stringify(e),t).pipe(Object(z.a)(A.a.reintentos),Object(G.a)(this.srvcErrHndl.errorHandler))},e.prototype.save=function(e){var t={headers:new i.c({Authorization:this.usrToken})};return this.http.post(A.a.urlWms+"/"+this.egresoUrl+"/guardar"+(+e.egreso>0?"/"+e.egreso:""),e,t).pipe(Object(z.a)(A.a.reintentos),Object(G.a)(this.srvcErrHndl.errorHandler))},e.prototype.getDetalle=function(e,t){void 0===t&&(t={});var n={headers:new i.c({Authorization:this.usrToken})};return this.http.get(A.a.urlWms+"/"+this.egresoUrl+"/buscar_detalle/"+e+"?"+te.stringify(t),n).pipe(Object(z.a)(A.a.reintentos),Object(G.a)(this.srvcErrHndl.errorHandler))},e.prototype.saveDetalle=function(e){var t={headers:new i.c({Authorization:this.usrToken})};return this.http.post(A.a.urlWms+"/"+this.egresoUrl+"/guardar_detalle/"+e.egreso+(+e.egreso_detalle>0?"/"+e.egreso_detalle:""),e,t).pipe(Object(z.a)(A.a.reintentos),Object(G.a)(this.srvcErrHndl.errorHandler))},e.ctorParameters=function(){return[{type:i.a},{type:T.a}]},e=o.c([Object(a.Injectable)({providedIn:"root"})],e)}(),ge=function(){function e(e){var t=this;this.egresoSrvc=e,this.getEgresoEv=new a.EventEmitter,this.length=0,this.pageSize=5,this.pageSizeOptions=[5,10,15],this.pageIndex=0,this.txtFiltro="",this.loadEgresos=function(){t.egresoSrvc.get().subscribe((function(e){e&&e.length>0&&(t.lstEgresos=e,t.applyFilter())}))},this.getEgreso=function(e){t.getEgresoEv.emit({egreso:e.egreso,tipo_movimiento:e.tipo_movimiento.tipo_movimiento,bodega:e.bodega.bodega,fecha:e.fecha,usuario:e.usuario.usuario,estatus_movimiento:e.estatus_movimiento||1,traslado:e.traslado||0})},this.pageChange=function(e){t.pageSize=e.pageSize,t.pageIndex=e.pageIndex,t.applyFilter()}}return e.prototype.ngOnInit=function(){this.loadEgresos()},e.prototype.applyFilter=function(){if(this.txtFiltro.length>0){var e=Object(A.b)(this.lstEgresos,this.txtFiltro);this.length=e.length,this.lstEgresosPaged=Object(A.c)(e,this.pageSize,this.pageIndex+1)}else this.length=this.lstEgresos.length,this.lstEgresosPaged=Object(A.c)(this.lstEgresos,this.pageSize,this.pageIndex+1)},e.ctorParameters=function(){return[{type:me}]},o.c([Object(a.Output)()],e.prototype,"getEgresoEv",void 0),e=o.c([Object(a.Component)({selector:"app-lista-egreso",template:o.f(n("qrxf")).default,styles:[o.f(n("yQYf")).default]})],e)}(),pe=function(){function e(e,t,n,o,r,i,l,s,c){var d=this;this._snackBar=e,this.ls=t,this.egresoSrvc=n,this.tipoMovimientoSrvc=o,this.bodegaSrvc=r,this.articuloSrvc=i,this.proveedorSrvc=l,this.transformacionSrvc=s,this.presentacionSrvc=c,this.saveToDB=!0,this.egresoSavedEv=new a.EventEmitter,this.showEgresoForm=!0,this.showDetalleEgresoForm=!0,this.detallesEgreso=[],this.detallesMerma=[],this.displayedColumns=["articulo","presentacion","cantidad","precio_unitario","precio_total","editItem"],this.tiposMovimiento=[],this.bodegas=[],this.articulos=[],this.proveedores=[],this.presentaciones=[],this.esMovil=!1,this.loadTiposMovimiento=function(){d.tipoMovimientoSrvc.get().subscribe((function(e){e&&(d.tiposMovimiento=e)}))},this.loadBodegas=function(){d.bodegaSrvc.get({sede:d.ls.get(A.a.usrTokenVar).sede||0}).subscribe((function(e){e&&(d.bodegas=e)}))},this.loadProveedores=function(){d.proveedorSrvc.get().subscribe((function(e){e&&(d.proveedores=e)}))},this.loadPresentaciones=function(){d.presentacionSrvc.get().subscribe((function(e){e&&(d.presentaciones=e)}))},this.resetEgreso=function(){d.egreso={egreso:null,tipo_movimiento:null,bodega:null,fecha:j().format(A.a.dbDateFormat),usuario:d.ls.get(A.a.usrTokenVar).idusr||0,estatus_movimiento:1,traslado:0},d.resetDetalleEgreso(),d.resetDetalleMerma()},this.onSubmit=function(){d.egresoSrvc.save(d.egreso).subscribe((function(e){e.exito&&(d.egresoSavedEv.emit(),d.resetEgreso(),d.egreso={egreso:e.egreso.egreso,tipo_movimiento:e.egreso.tipo_movimiento,fecha:e.egreso.fecha,bodega:e.egreso.bodega,creacion:e.egreso.creacion,usuario:e.egreso.usuario,estatus_movimiento:e.egreso.estatus_movimiento,traslado:e.egreso.traslado},d.loadDetalleEgreso(d.egreso.egreso))}))},this.confirmarEgreso=function(){d.egreso.estatus_movimiento=2,d.onSubmit()},this.loadArticulos=function(){d.articuloSrvc.getArticulos().subscribe((function(e){e&&(d.articulos=e)}))},this.resetDetalleEgreso=function(){return d.detalleEgreso={egreso_detalle:null,egreso:d.egreso.egreso?d.egreso.egreso:null,articulo:null,cantidad:null,precio_unitario:null,precio_total:null,presentacion:0}},this.resetDetalleMerma=function(){return d.detalleMerma={egreso_detalle:null,egreso:d.egreso.egreso?d.egreso.egreso:null,articulo:null,cantidad:null,precio_unitario:null,precio_total:null,presentacion:0}},this.loadDetalleEgreso=function(e){void 0===e&&(e=+d.egreso.egreso),d.egresoSrvc.getDetalle(e,{egreso:e}).subscribe((function(e){e&&(d.detallesEgreso=e,d.updateTableDataSource())}))},this.getDetalleEgreso=function(e,t){void 0===e&&(e=+d.egreso.egreso),d.egresoSrvc.getDetalle(e,{egreso_detalle:t}).subscribe((function(e){e&&(d.detalleEgreso={egreso_detalle:e[0].egreso_detalle,egreso:e[0].egreso,articulo:e[0].articulo.articulo,cantidad:+e[0].cantidad,precio_unitario:+e[0].precio_unitario,precio_total:+e[0].precio_total,presentacion:e[0].presentacion.presentacion},d.showDetalleEgresoForm=!0)}))},this.onSubmitDetail=function(){d.detalleEgreso.egreso=d.egreso.egreso,d.egresoSrvc.saveDetalle(d.detalleEgreso).subscribe((function(e){e.exito?(d.loadDetalleEgreso(),d.resetDetalleEgreso(),d._snackBar.open("Egreso guardado con éxito...","Egreso",{duration:3e3})):d._snackBar.open("ERROR: "+e.mensaje,"Egreso",{duration:3e3})}))},this.addToDetail=function(){d.detallesEgreso.push(d.detalleEgreso),d.resetDetalleEgreso(),d.updateTableDataSource()},this.addToDetailMerma=function(){d.detallesMerma.push(d.detalleMerma),d.resetDetalleMerma(),d.updateTableDataSourceM()},this.removeFromDetail=function(e){return d.detallesEgreso.splice(d.detallesEgreso.findIndex((function(t){return+t.articulo==+e})),1)},this.getDescripcionArticulo=function(e){return d.articulos.find((function(t){return+t.articulo==+e})).descripcion||""},this.getDescripcionPresentacion=function(e){return d.presentaciones.find((function(t){return+t.presentacion==+e})).descripcion||""},this.updateTableDataSource=function(){return d.dataSource=new h.a(d.detallesEgreso)},this.updateTableDataSourceM=function(){return d.dataSource=new h.a(d.detallesMerma)}}return e.prototype.ngOnInit=function(){this.esMovil=this.ls.get(A.a.usrTokenVar).enmovil||!1,this.resetEgreso(),this.loadTiposMovimiento(),this.loadBodegas(),this.loadArticulos(),this.loadProveedores(),this.loadPresentaciones()},e.ctorParameters=function(){return[{type:I.a},{type:T.a},{type:me},{type:ae.a},{type:L.a},{type:P.a},{type:re.a},{type:q},{type:ie.a}]},o.c([Object(a.Input)()],e.prototype,"egreso",void 0),o.c([Object(a.Input)()],e.prototype,"saveToDB",void 0),o.c([Object(a.Output)()],e.prototype,"egresoSavedEv",void 0),e=o.c([Object(a.Component)({selector:"app-form-egreso",template:o.f(n("Vthy")).default,styles:[o.f(n("iQY+")).default]})],e)}(),fe=function(){function e(e,t){var n=this;this.articuloSrvc=e,this.ls=t,this.bloqueoBotones=!1,this.productoClickedEv=new a.EventEmitter,this.categoriasFilledEv=new a.EventEmitter,this.categorias=[],this.subcategorias=[],this.articulos=[],this.loadArbolArticulos=function(){n.articuloSrvc.getArbolArticulos(n.ls.get(A.a.usrTokenVar).sede||0).subscribe((function(e){n.fillCategorias(e)}))},this.fillCategorias=function(e){var t,a;n.categorias=[],n.subcategorias=[],n.articulos=[];try{for(var r=o.k(e),i=r.next();!i.done;i=r.next()){var l=i.value;n.categorias.push(l)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(t)throw t.error}}n.categoriasFilledEv.emit(n.categorias)},this.fillSubCategorias=function(e){var t,a;n.subcategorias=[],n.articulos=[];try{for(var r=o.k(e),i=r.next();!i.done;i=r.next()){var l=i.value;n.subcategorias.push(l)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(t)throw t.error}}},this.fillArticulos=function(e){var t,a;n.articulos=[];try{for(var r=o.k(e),i=r.next();!i.done;i=r.next()){var l=i.value;n.articulos.push(l)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(t)throw t.error}}},this.clickOnCategoria=function(e){e.categoria_grupo.length>0&&n.fillSubCategorias(e.categoria_grupo)},this.clickOnSubCategoria=function(e){e.articulo.length>0&&n.fillArticulos(e.articulo)},this.clickOnArticulo=function(e){var t={id:+e.articulo,nombre:e.descripcion,precio:+e.precio,impresora:e.impresora,presentacion:e.presentacion,codigo:e.codigo};n.productoClickedEv.emit(t)}}return e.prototype.ngOnInit=function(){this.loadArbolArticulos()},e.ctorParameters=function(){return[{type:P.a},{type:T.a}]},o.c([Object(a.Input)()],e.prototype,"bloqueoBotones",void 0),o.c([Object(a.Output)()],e.prototype,"productoClickedEv",void 0),o.c([Object(a.Output)()],e.prototype,"categoriasFilledEv",void 0),e=o.c([Object(a.Component)({selector:"app-lista-producto-alt",template:o.f(n("4muF")).default,styles:[o.f(n("8Mvs")).default]})],e)}();n.d(t,"WmsModule",(function(){return he}));var he=function(){function e(){}return e=o.c([Object(a.NgModule)({declarations:[ee,oe,le,B,R,de,ue,W,ge,pe,N,Y,K,fe,Z],imports:[r.CommonModule,J,s.a,i.b,l.FormsModule,c.a,d.a,u.c,m.b,g.a,p.a,f.a,h.b,b.a,v.a,y.b,I.b,C.a,S.a,D.a,_.b,E.c,w.a,k.a,M.a,x.NgVirtualKeyboardModule],providers:[q],exports:[ee,fe]})],e)}()},x2BN:function(e,t,n){"use strict";n.r(t),t.default='<mat-card class="mat-elevation-z4 fullWidth" style="height: 100% important;">\n    <mat-card-content>\n        <mat-form-field class="fullWidth">\n            <input matInput (keyup)="applyFilter()" placeholder="Buscar..." [(ngModel)]="txtFiltro" [ngModelOptions]="{standalone: true}">\n        </mat-form-field>\n        <mat-nav-list>\n            <mat-list-item *ngFor="let element of lstIngresosPaged" (click)="getIngreso(element)">\n                <mat-icon mat-list-icon>trending_up</mat-icon>\n                <h5 mat-line>No. {{element.ingreso}}</h5><br/>\n                <p mat-line>\n                    Fecha: {{element.fecha | date: \'dd/MM/yyyy\'}}<br/>\n                    Bodega: {{element.bodega.descripcion}}<br/>\n                </p>\n                <p mat-line>\n                    Proveedor: {{element.proveedor.razon_social}}\n                </p>\n            </mat-list-item>                        \n        </mat-nav-list>\n        <mat-paginator [length]="length" [pageSize]="pageSize" [pageSizeOptions]="pageSizeOptions" (page)="pageChange($event)" showFirstLastButtons>\n        </mat-paginator>\n    </mat-card-content>\n</mat-card>\n'},yQYf:function(e,t,n){"use strict";n.r(t),t.default=".fullWidth {\n    width: 100% !important;\n}\n\ntable {\n    width: 100% !important;\n}"}}]);